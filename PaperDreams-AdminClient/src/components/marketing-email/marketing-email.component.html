<div class="content-wrapper">
  <div class="card">
    <div class="card-header">
      <div class="card-title">
        <i class="material-icons">email</i>
        שליחת מייל שיווקי
      </div>
    </div>
    <div class="card-body">
      <div class="action-buttons">
        <button class="btn btn-secondary" (click)="generateMarketingText()">
          <i class="material-icons">auto_awesome</i>
          צור תוכן שיווקי (AI)
        </button>
        <button class="btn btn-primary" (click)="sendEmails()" [disabled]="!emailContent.trim()">
          <i class="material-icons">send</i>
          שלח לכל המשתמשים
        </button>
      </div>

      @if(statusMessage) {
      <div class="status-box"
        [ngClass]="{'loading': statusMessage.includes('שולח') || statusMessage.includes('מייצר')}">
        <i class="material-icons" *ngIf="statusMessage.includes('שגיאה')">error</i>
        <i class="material-icons"
          *ngIf="statusMessage.includes('נוצר') || statusMessage.includes('נשלח')">check_circle</i>
        <i class="material-icons rotating"
          *ngIf="statusMessage.includes('שולח') || statusMessage.includes('מייצר')">sync</i>
        {{ statusMessage }}
      </div>
      }
    </div>
  </div>
</div>