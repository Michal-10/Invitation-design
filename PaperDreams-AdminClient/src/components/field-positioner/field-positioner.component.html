<!-- 

   <div class="container">
    <div class="field-selector">
      <h3>专 砖 拽:</h3>
      <ul>
        @for (field of fields; track field) {
          <li>
            @if (!isFieldPlaced(field.field.id)) {
              <button
                [class.selected]="isFieldSelected(field)"
                (click)="selectField(field)">
                {{ field.field.name }}
              </button>
            } @else {
              <button class="edit-button" (click)="editPlacement(field)">
                砖 拽 {{ field.field.name }}
              </button>
            }
          </li>
        }
      </ul>
    </div>
  
    <div class="image-placement-area">
      @if(showPrompt && selectedField) {
        <div class="placement-prompt">
          <p> 抓 注 转 拽 砖 转 专爪 拽 转 砖 "{{ selectedField.field.name }}"</p>
        </div>
      }
  
      <div class="image-container" #imageContainer>
        <img
          #templateImage
          [src]="templateImageUrl"
          alt="Template"
          class="template-image"
          (click)="onImageClick($event)"
        />
        @for (field of fields; track field) {
          @if (positions[field.field.id]) {
            <div
              class="field-label"
              [style.top]="getFieldPosition(field.field.id)?.top"
              [style.left]="getFieldPosition(field.field.id)?.left"
              [style.position]="'absolute'"
              [attr.data-field-id]="field.field.id"
              (mousedown)="startDrag($event, field)"
              style="cursor: grab;"
            >
              {{ field.field.name }}
            </div>
          }
        }
      </div>
    </div>
  </div> -->







<!-- 


 
<div class="field-placement-container">


<div class="placement-workspace">
    <div class="fields-panel">
        <div class="panel-header">
            <h2>砖转 </h2>
        </div>
        <div class="fields-list">
            @for (field of fields; track field) {
            <div class="field-item" [class.placed]="isFieldPlaced(field.field.id)"
                [class.selected]="isFieldSelected(field)">
                @if (!isFieldPlaced(field.field.id)) {
                <button class="field-button" (click)="selectField(field)">
                    <mat-icon>input</mat-icon>
                    <span>{{ field.field.name }}</span>
                </button>
                } @else {
                <button class="field-button edit-button" (click)="editPlacement(field)">
                    <mat-icon>edit_location</mat-icon>
                    <span>{{ field.field.name }}</span>
                </button>
                }
            </div>
            }
        </div>
    </div>

    <div class="template-workspace">
        @if(showPrompt && selectedField) {
        <div class="placement-prompt">
            <mat-icon>touch_app</mat-icon>
            <p>抓 注 转 拽 砖 转 专爪 拽 转 砖 "{{ selectedField.field.name }}"</p>
        </div>
        }

        <div class="image-container" #imageContainer>
            @if(templateImageUrl) {
            <img #templateImage [src]="templateImageUrl" alt="Template" class="template-image"
                (click)="onImageClick($event)" />
            @for (field of fields; track field) {
            @if (positions[field.field.id]) {
            <div class="field-label" [style.top]="getFieldPosition(field.field.id)?.top"
                [style.left]="getFieldPosition(field.field.id)?.left" [style.position]="'absolute'"
                [attr.data-field-id]="field.field.id" (mousedown)="startDrag($event, field)">
                <div class="field-label-content">
                    <mat-icon>drag_indicator</mat-icon>
                    <span>{{ field.field.name }}</span>
                </div>
            </div>
            }
            }
            } @else {
            <div class="loading-template">
                <mat-spinner diameter="40"></mat-spinner>
                <p>注 转转...</p>
            </div>
            }
        </div>
    </div>
</div>

</div> 






 -->


















<!-- 
  <div class="content-wrapper page-transition">
    <div class="placement-workspace">
      <div class="fields-panel card">
        <div class="card-header">
          <div class="card-title">
            <i class="material-icons">format_list_bulleted</i>
            <span>砖转 </span>
          </div>
        </div>
        <div class="card-body">
          <div class="fields-list">
            @for (field of fields; track field) {
              <div class="field-item" 
                  [class.placed]="isFieldPlaced(field.field.id)"
                  [class.selected]="isFieldSelected(field)">
                  <button class="field-button edit-button" (click)="editPlacement(field)">
                    <mat-icon>edit_location</mat-icon>
                    <span>{{ field.field.name }}</span>
                  </button>
              </div>
            }
            
            @if(fields.length === 0) {
              <div class="empty-fields">
                <mat-icon>info</mat-icon>
                <p> 砖转  拽专 </p>
              </div>
            }
          </div>
        </div>
      </div>

      <div class="template-workspace card">
        <div class="card-header">
          <div class="card-title">
            <i class="material-icons">dashboard_customize</i>
            <span>拽 砖转</span>
          </div>
        </div>
        <div class="card-body">
          @if(showPrompt && selectedField) {
            <div class="placement-prompt">
              <mat-icon>touch_app</mat-icon>
              <p>抓 注 转 拽 砖 转 专爪 拽 转 砖 "{{ selectedField.field.name }}"</p>
            </div>
          }

          <div class="image-container" #imageContainer>
            @if(templateImageUrl) {
              <img 
                #templateImage 
                [src]="templateImageUrl" 
                alt="Template" 
                class="template-image"
                (click)="onImageClick($event)" 
              />
              
              @for (field of fields; track field) {
                @if (positions[field.field.id]) {
                  <div 
                    class="field-label" 
                    [style.top]="getFieldPosition(field.field.id)?.top"
                    [style.left]="getFieldPosition(field.field.id)?.left" 
                    [style.position]="'absolute'"
                    [attr.data-field-id]="field.field.id" 
                    (mousedown)="startDrag($event, field)"
                  >
                    <div class="field-label-content">
                      <mat-icon>drag_indicator</mat-icon>
                      <span>{{ field.field.name }}</span>
                    </div>
                  </div>
                }
              }
            } @else {
              <div class="loading-template">
                <mat-spinner diameter="40" color="accent"></mat-spinner>
                <p>注 转转...</p>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div> -->













<!--   
  <div class="content-wrapper page-transition">
    <div class="placement-workspace">
      <div class="fields-panel card">
        <div class="card-header">
          <div class="card-title">
            <i class="material-icons">format_list_bulleted</i>
            <span>砖转 </span>
          </div>
        </div>
        <div class="card-body">
          <div class="fields-list">
            @for (field of fields; track field) {
              <div class="field-item" 
                  [class.placed]="isFieldPlaced(field.field.id)"
                  [class.selected]="isFieldSelected(field)">
                  <button class="field-button edit-button" (click)="editPlacement(field)">
                    <mat-icon>edit_location</mat-icon>
                    <span>{{ field.field.name }}</span>
                  </button>
              </div>
            }
            
            @if(fields.length === 0) {
              <div class="empty-fields">
                <mat-icon>info</mat-icon>
                <p> 砖转  拽专 </p>
              </div>
            }
          </div>
        </div>
      </div>

      <div class="template-workspace card">
        <div class="card-header">
          <div class="card-title">
            <i class="material-icons">dashboard_customize</i>
            <span>拽 砖转</span>
          </div>
        </div>
        <div class="card-body">
          @if(showPrompt && selectedField) {
            <div class="placement-prompt">
              <mat-icon>touch_app</mat-icon>
              <p>抓 注 转 拽 砖 转 专爪 拽 转 砖 "{{ selectedField.field.name }}"</p>
            </div>
          }

          <div class="image-container" #imageContainer>
            @if(templateImageUrl) {
              <img 
                #templateImage 
                [src]="templateImageUrl" 
                alt="Template" 
                class="template-image"
              />
              
              @for (field of fields; track field) {
                @if (positions[field.field.id]) {
                  <div 
                    class="field-label" 
                    [style.top]="getFieldPosition(field.field.id)?.top"
                    [style.left]="getFieldPosition(field.field.id)?.left" 
                    [style.position]="'absolute'"
                    [attr.data-field-id]="field.field.id" 
                    (mousedown)="startDrag($event, field)"
                  >
                    <div class="field-label-content">
                      <mat-icon>drag_indicator</mat-icon>
                      <span>{{ field.field.name }}</span>
                    </div>
                  </div>
                }
              }
            } @else {
              <div class="loading-template">
                <mat-spinner diameter="40" color="accent"></mat-spinner>
                <p>注 转转...</p>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div> -->








  <div class="content-wrapper page-transition">
    <div class="placement-workspace">
      <div class="template-workspace card">
        <div class="card-header">
          <div class="card-title">
            <i class="material-icons">dashboard_customize</i>
            <span style="font-size: large;">拽 砖转</span>
            <span style="font-size: medium; padding-left: 10px;"> 专专 转 砖转 拽 专爪</span>
          </div>
          <button mat-raised-button color="primary" class="save-button" (click)="saveTemplate()">
             砖专 转转
          </button>
        </div>
        <div class="card-body">
          <div class="image-container" #imageContainer>
            @if(templateImageUrl) {
              <img
                #templateImage
                [src]="templateImageUrl"
                alt="Template"
                class="template-image"
                (load)="onTemplateImageLoad()" />
  
              @for (field of fields; track field) {
                @if (positions[field.field.id]) {
                  <div
                    class="field-label"
                    [style.top]="getFieldPosition(field.field.id)?.top"
                    [style.left]="getFieldPosition(field.field.id)?.left"
                    [style.position]="'absolute'"
                    [attr.data-field-id]="field.field.id"
                    (mousedown)="startDrag($event, field)"
                  >
                    <div class="field-label-content">
                      <mat-icon>drag_indicator</mat-icon>
                      <span>{{ field.field.name }}</span>
                    </div>
                  </div>
                }
              }
            } @else {
              <div class="loading-template">
                <mat-spinner diameter="40" color="accent"></mat-spinner>
                <p>注 转转...</p>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div>