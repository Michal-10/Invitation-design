var bye=Object.defineProperty;var e$=n=>{throw TypeError(n)};var wye=(n,e,t)=>e in n?bye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var nn=(n,e,t)=>wye(n,typeof e!="symbol"?e+"":e,t),o5=(n,e,t)=>e.has(n)||e$("Cannot "+t);var P=(n,e,t)=>(o5(n,e,"read from private field"),t?t.call(n):e.get(n)),ve=(n,e,t)=>e.has(n)?e$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),he=(n,e,t,r)=>(o5(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),be=(n,e,t)=>(o5(n,e,"access private method"),t);var Mo=(n,e,t,r)=>({set _(i){he(n,e,i,t)},get _(){return P(n,e,r)}});function WJ(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function nR(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var u5={exports:{}},x_={},l5={exports:{}},Xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t$;function xye(){if(t$)return Xn;t$=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),c=Symbol.iterator;function f(M){return M===null||typeof M!="object"?null:(M=c&&M[c]||M["@@iterator"],typeof M=="function"?M:null)}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(M,q,H){this.props=M,this.context=q,this.refs=m,this.updater=H||d}g.prototype.isReactComponent={},g.prototype.setState=function(M,q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,q,"setState")},g.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function y(){}y.prototype=g.prototype;function v(M,q,H){this.props=M,this.context=q,this.refs=m,this.updater=H||d}var b=v.prototype=new y;b.constructor=v,p(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function A(M,q,H){var K,Z={},J=null,X=null;if(q!=null)for(K in q.ref!==void 0&&(X=q.ref),q.key!==void 0&&(J=""+q.key),q)x.call(q,K)&&!E.hasOwnProperty(K)&&(Z[K]=q[K]);var ae=arguments.length-2;if(ae===1)Z.children=H;else if(1<ae){for(var ie=Array(ae),ce=0;ce<ae;ce++)ie[ce]=arguments[ce+2];Z.children=ie}if(M&&M.defaultProps)for(K in ae=M.defaultProps,ae)Z[K]===void 0&&(Z[K]=ae[K]);return{$$typeof:n,type:M,key:J,ref:X,props:Z,_owner:S.current}}function k(M,q){return{$$typeof:n,type:M.type,key:q,ref:M.ref,props:M.props,_owner:M._owner}}function T(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function O(M){var q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(H){return q[H]})}var F=/\/+/g;function I(M,q){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):q.toString(36)}function R(M,q,H,K,Z){var J=typeof M;(J==="undefined"||J==="boolean")&&(M=null);var X=!1;if(M===null)X=!0;else switch(J){case"string":case"number":X=!0;break;case"object":switch(M.$$typeof){case n:case e:X=!0}}if(X)return X=M,Z=Z(X),M=K===""?"."+I(X,0):K,w(Z)?(H="",M!=null&&(H=M.replace(F,"$&/")+"/"),R(Z,q,H,"",function(ce){return ce})):Z!=null&&(T(Z)&&(Z=k(Z,H+(!Z.key||X&&X.key===Z.key?"":(""+Z.key).replace(F,"$&/")+"/")+M)),q.push(Z)),1;if(X=0,K=K===""?".":K+":",w(M))for(var ae=0;ae<M.length;ae++){J=M[ae];var ie=K+I(J,ae);X+=R(J,q,H,ie,Z)}else if(ie=f(M),typeof ie=="function")for(M=ie.call(M),ae=0;!(J=M.next()).done;)J=J.value,ie=K+I(J,ae++),X+=R(J,q,H,ie,Z);else if(J==="object")throw q=String(M),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return X}function U(M,q,H){if(M==null)return M;var K=[],Z=0;return R(M,K,"","",function(J){return q.call(H,J,Z++)}),K}function B(M){if(M._status===-1){var q=M._result;q=q(),q.then(function(H){(M._status===0||M._status===-1)&&(M._status=1,M._result=H)},function(H){(M._status===0||M._status===-1)&&(M._status=2,M._result=H)}),M._status===-1&&(M._status=0,M._result=q)}if(M._status===1)return M._result.default;throw M._result}var W={current:null},Y={transition:null},z={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:Y,ReactCurrentOwner:S};function j(){throw Error("act(...) is not supported in production builds of React.")}return Xn.Children={map:U,forEach:function(M,q,H){U(M,function(){q.apply(this,arguments)},H)},count:function(M){var q=0;return U(M,function(){q++}),q},toArray:function(M){return U(M,function(q){return q})||[]},only:function(M){if(!T(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Xn.Component=g,Xn.Fragment=t,Xn.Profiler=i,Xn.PureComponent=v,Xn.StrictMode=r,Xn.Suspense=u,Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,Xn.act=j,Xn.cloneElement=function(M,q,H){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var K=p({},M.props),Z=M.key,J=M.ref,X=M._owner;if(q!=null){if(q.ref!==void 0&&(J=q.ref,X=S.current),q.key!==void 0&&(Z=""+q.key),M.type&&M.type.defaultProps)var ae=M.type.defaultProps;for(ie in q)x.call(q,ie)&&!E.hasOwnProperty(ie)&&(K[ie]=q[ie]===void 0&&ae!==void 0?ae[ie]:q[ie])}var ie=arguments.length-2;if(ie===1)K.children=H;else if(1<ie){ae=Array(ie);for(var ce=0;ce<ie;ce++)ae[ce]=arguments[ce+2];K.children=ae}return{$$typeof:n,type:M.type,key:Z,ref:J,props:K,_owner:X}},Xn.createContext=function(M){return M={$$typeof:o,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Xn.createElement=A,Xn.createFactory=function(M){var q=A.bind(null,M);return q.type=M,q},Xn.createRef=function(){return{current:null}},Xn.forwardRef=function(M){return{$$typeof:s,render:M}},Xn.isValidElement=T,Xn.lazy=function(M){return{$$typeof:h,_payload:{_status:-1,_result:M},_init:B}},Xn.memo=function(M,q){return{$$typeof:l,type:M,compare:q===void 0?null:q}},Xn.startTransition=function(M){var q=Y.transition;Y.transition={};try{M()}finally{Y.transition=q}},Xn.unstable_act=j,Xn.useCallback=function(M,q){return W.current.useCallback(M,q)},Xn.useContext=function(M){return W.current.useContext(M)},Xn.useDebugValue=function(){},Xn.useDeferredValue=function(M){return W.current.useDeferredValue(M)},Xn.useEffect=function(M,q){return W.current.useEffect(M,q)},Xn.useId=function(){return W.current.useId()},Xn.useImperativeHandle=function(M,q,H){return W.current.useImperativeHandle(M,q,H)},Xn.useInsertionEffect=function(M,q){return W.current.useInsertionEffect(M,q)},Xn.useLayoutEffect=function(M,q){return W.current.useLayoutEffect(M,q)},Xn.useMemo=function(M,q){return W.current.useMemo(M,q)},Xn.useReducer=function(M,q,H){return W.current.useReducer(M,q,H)},Xn.useRef=function(M){return W.current.useRef(M)},Xn.useState=function(M){return W.current.useState(M)},Xn.useSyncExternalStore=function(M,q,H){return W.current.useSyncExternalStore(M,q,H)},Xn.useTransition=function(){return W.current.useTransition()},Xn.version="18.3.1",Xn}var n$;function ox(){return n$||(n$=1,l5.exports=xye()),l5.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r$;function _ye(){if(r$)return x_;r$=1;var n=ox(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(s,u,l){var h,c={},f=null,d=null;l!==void 0&&(f=""+l),u.key!==void 0&&(f=""+u.key),u.ref!==void 0&&(d=u.ref);for(h in u)r.call(u,h)&&!a.hasOwnProperty(h)&&(c[h]=u[h]);if(s&&s.defaultProps)for(h in u=s.defaultProps,u)c[h]===void 0&&(c[h]=u[h]);return{$$typeof:e,type:s,key:f,ref:d,props:c,_owner:i.current}}return x_.Fragment=t,x_.jsx=o,x_.jsxs=o,x_}var i$;function Sye(){return i$||(i$=1,u5.exports=_ye()),u5.exports}var Ie=Sye(),pe=ox();const ki=Fp(pe),s6=WJ({__proto__:null,default:ki},[pe]);var KA={},c5={exports:{}},lu={},h5={exports:{}},f5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a$;function Cye(){return a$||(a$=1,function(n){function e(Y,z){var j=Y.length;Y.push(z);e:for(;0<j;){var M=j-1>>>1,q=Y[M];if(0<i(q,z))Y[M]=z,Y[j]=q,j=M;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var z=Y[0],j=Y.pop();if(j!==z){Y[0]=j;e:for(var M=0,q=Y.length,H=q>>>1;M<H;){var K=2*(M+1)-1,Z=Y[K],J=K+1,X=Y[J];if(0>i(Z,j))J<q&&0>i(X,Z)?(Y[M]=X,Y[J]=j,M=J):(Y[M]=Z,Y[K]=j,M=K);else if(J<q&&0>i(X,j))Y[M]=X,Y[J]=j,M=J;else break e}}return z}function i(Y,z){var j=Y.sortIndex-z.sortIndex;return j!==0?j:Y.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var u=[],l=[],h=1,c=null,f=3,d=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var z=t(l);z!==null;){if(z.callback===null)r(l);else if(z.startTime<=Y)r(l),z.sortIndex=z.expirationTime,e(u,z);else break;z=t(l)}}function w(Y){if(m=!1,b(Y),!p)if(t(u)!==null)p=!0,B(x);else{var z=t(l);z!==null&&W(w,z.startTime-Y)}}function x(Y,z){p=!1,m&&(m=!1,y(A),A=-1),d=!0;var j=f;try{for(b(z),c=t(u);c!==null&&(!(c.expirationTime>z)||Y&&!O());){var M=c.callback;if(typeof M=="function"){c.callback=null,f=c.priorityLevel;var q=M(c.expirationTime<=z);z=n.unstable_now(),typeof q=="function"?c.callback=q:c===t(u)&&r(u),b(z)}else r(u);c=t(u)}if(c!==null)var H=!0;else{var K=t(l);K!==null&&W(w,K.startTime-z),H=!1}return H}finally{c=null,f=j,d=!1}}var S=!1,E=null,A=-1,k=5,T=-1;function O(){return!(n.unstable_now()-T<k)}function F(){if(E!==null){var Y=n.unstable_now();T=Y;var z=!0;try{z=E(!0,Y)}finally{z?I():(S=!1,E=null)}}else S=!1}var I;if(typeof v=="function")I=function(){v(F)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,U=R.port2;R.port1.onmessage=F,I=function(){U.postMessage(null)}}else I=function(){g(F,0)};function B(Y){E=Y,S||(S=!0,I())}function W(Y,z){A=g(function(){Y(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){p||d||(p=!0,B(x))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(Y){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var j=f;f=z;try{return Y()}finally{f=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,z){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var j=f;f=Y;try{return z()}finally{f=j}},n.unstable_scheduleCallback=function(Y,z,j){var M=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?M+j:M):j=M,Y){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=j+q,Y={id:h++,callback:z,priorityLevel:Y,startTime:j,expirationTime:q,sortIndex:-1},j>M?(Y.sortIndex=j,e(l,Y),t(u)===null&&Y===t(l)&&(m?(y(A),A=-1):m=!0,W(w,j-M))):(Y.sortIndex=q,e(u,Y),p||d||(p=!0,B(x))),Y},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(Y){var z=f;return function(){var j=f;f=z;try{return Y.apply(this,arguments)}finally{f=j}}}}(f5)),f5}var s$;function kB(){return s$||(s$=1,h5.exports=Cye()),h5.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o$;function Eye(){if(o$)return lu;o$=1;var n=ox(),e=kB();function t(_){for(var C="https://reactjs.org/docs/error-decoder.html?invariant="+_,L=1;L<arguments.length;L++)C+="&args[]="+encodeURIComponent(arguments[L]);return"Minified React error #"+_+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(_,C){o(_,C),o(_+"Capture",C)}function o(_,C){for(i[_]=C,_=0;_<C.length;_++)r.add(C[_])}var s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},c={};function f(_){return u.call(c,_)?!0:u.call(h,_)?!1:l.test(_)?c[_]=!0:(h[_]=!0,!1)}function d(_,C,L,V){if(L!==null&&L.type===0)return!1;switch(typeof C){case"function":case"symbol":return!0;case"boolean":return V?!1:L!==null?!L.acceptsBooleans:(_=_.toLowerCase().slice(0,5),_!=="data-"&&_!=="aria-");default:return!1}}function p(_,C,L,V){if(C===null||typeof C>"u"||d(_,C,L,V))return!0;if(V)return!1;if(L!==null)switch(L.type){case 3:return!C;case 4:return C===!1;case 5:return isNaN(C);case 6:return isNaN(C)||1>C}return!1}function m(_,C,L,V,ee,re,we){this.acceptsBooleans=C===2||C===3||C===4,this.attributeName=V,this.attributeNamespace=ee,this.mustUseProperty=L,this.propertyName=_,this.type=C,this.sanitizeURL=re,this.removeEmptyString=we}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_){g[_]=new m(_,0,!1,_,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_){var C=_[0];g[C]=new m(C,1,!1,_[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(_){g[_]=new m(_,2,!1,_.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_){g[_]=new m(_,2,!1,_,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_){g[_]=new m(_,3,!1,_.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(_){g[_]=new m(_,3,!0,_,null,!1,!1)}),["capture","download"].forEach(function(_){g[_]=new m(_,4,!1,_,null,!1,!1)}),["cols","rows","size","span"].forEach(function(_){g[_]=new m(_,6,!1,_,null,!1,!1)}),["rowSpan","start"].forEach(function(_){g[_]=new m(_,5,!1,_.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(_){return _[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_){var C=_.replace(y,v);g[C]=new m(C,1,!1,_,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_){var C=_.replace(y,v);g[C]=new m(C,1,!1,_,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(_){var C=_.replace(y,v);g[C]=new m(C,1,!1,_,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(_){g[_]=new m(_,1,!1,_.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(_){g[_]=new m(_,1,!1,_.toLowerCase(),null,!0,!0)});function b(_,C,L,V){var ee=g.hasOwnProperty(C)?g[C]:null;(ee!==null?ee.type!==0:V||!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(p(C,L,ee,V)&&(L=null),V||ee===null?f(C)&&(L===null?_.removeAttribute(C):_.setAttribute(C,""+L)):ee.mustUseProperty?_[ee.propertyName]=L===null?ee.type===3?!1:"":L:(C=ee.attributeName,V=ee.attributeNamespace,L===null?_.removeAttribute(C):(ee=ee.type,L=ee===3||ee===4&&L===!0?"":""+L,V?_.setAttributeNS(V,C,L):_.setAttribute(C,L))))}var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),Y=Symbol.iterator;function z(_){return _===null||typeof _!="object"?null:(_=Y&&_[Y]||_["@@iterator"],typeof _=="function"?_:null)}var j=Object.assign,M;function q(_){if(M===void 0)try{throw Error()}catch(L){var C=L.stack.trim().match(/\n( *(at )?)/);M=C&&C[1]||""}return`
`+M+_}var H=!1;function K(_,C){if(!_||H)return"";H=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(C)if(C=function(){throw Error()},Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(ot){var V=ot}Reflect.construct(_,[],C)}else{try{C.call()}catch(ot){V=ot}_.call(C.prototype)}else{try{throw Error()}catch(ot){V=ot}_()}}catch(ot){if(ot&&V&&typeof ot.stack=="string"){for(var ee=ot.stack.split(`
`),re=V.stack.split(`
`),we=ee.length-1,Me=re.length-1;1<=we&&0<=Me&&ee[we]!==re[Me];)Me--;for(;1<=we&&0<=Me;we--,Me--)if(ee[we]!==re[Me]){if(we!==1||Me!==1)do if(we--,Me--,0>Me||ee[we]!==re[Me]){var qe=`
`+ee[we].replace(" at new "," at ");return _.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",_.displayName)),qe}while(1<=we&&0<=Me);break}}}finally{H=!1,Error.prepareStackTrace=L}return(_=_?_.displayName||_.name:"")?q(_):""}function Z(_){switch(_.tag){case 5:return q(_.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return _=K(_.type,!1),_;case 11:return _=K(_.type.render,!1),_;case 1:return _=K(_.type,!0),_;default:return""}}function J(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case E:return"Fragment";case S:return"Portal";case k:return"Profiler";case A:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case O:return(_.displayName||"Context")+".Consumer";case T:return(_._context.displayName||"Context")+".Provider";case F:var C=_.render;return _=_.displayName,_||(_=C.displayName||C.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case U:return C=_.displayName||null,C!==null?C:J(_.type)||"Memo";case B:C=_._payload,_=_._init;try{return J(_(C))}catch{}}return null}function X(_){var C=_.type;switch(_.tag){case 24:return"Cache";case 9:return(C.displayName||"Context")+".Consumer";case 10:return(C._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=C.render,_=_.displayName||_.name||"",C.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return C;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(C);case 8:return C===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C}return null}function ae(_){switch(typeof _){case"boolean":case"number":case"string":case"undefined":return _;case"object":return _;default:return""}}function ie(_){var C=_.type;return(_=_.nodeName)&&_.toLowerCase()==="input"&&(C==="checkbox"||C==="radio")}function ce(_){var C=ie(_)?"checked":"value",L=Object.getOwnPropertyDescriptor(_.constructor.prototype,C),V=""+_[C];if(!_.hasOwnProperty(C)&&typeof L<"u"&&typeof L.get=="function"&&typeof L.set=="function"){var ee=L.get,re=L.set;return Object.defineProperty(_,C,{configurable:!0,get:function(){return ee.call(this)},set:function(we){V=""+we,re.call(this,we)}}),Object.defineProperty(_,C,{enumerable:L.enumerable}),{getValue:function(){return V},setValue:function(we){V=""+we},stopTracking:function(){_._valueTracker=null,delete _[C]}}}}function ge(_){_._valueTracker||(_._valueTracker=ce(_))}function Ce(_){if(!_)return!1;var C=_._valueTracker;if(!C)return!0;var L=C.getValue(),V="";return _&&(V=ie(_)?_.checked?"true":"false":_.value),_=V,_!==L?(C.setValue(_),!0):!1}function Ee(_){if(_=_||(typeof document<"u"?document:void 0),typeof _>"u")return null;try{return _.activeElement||_.body}catch{return _.body}}function G(_,C){var L=C.checked;return j({},C,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:L??_._wrapperState.initialChecked})}function de(_,C){var L=C.defaultValue==null?"":C.defaultValue,V=C.checked!=null?C.checked:C.defaultChecked;L=ae(C.value!=null?C.value:L),_._wrapperState={initialChecked:V,initialValue:L,controlled:C.type==="checkbox"||C.type==="radio"?C.checked!=null:C.value!=null}}function ye(_,C){C=C.checked,C!=null&&b(_,"checked",C,!1)}function le(_,C){ye(_,C);var L=ae(C.value),V=C.type;if(L!=null)V==="number"?(L===0&&_.value===""||_.value!=L)&&(_.value=""+L):_.value!==""+L&&(_.value=""+L);else if(V==="submit"||V==="reset"){_.removeAttribute("value");return}C.hasOwnProperty("value")?fe(_,C.type,L):C.hasOwnProperty("defaultValue")&&fe(_,C.type,ae(C.defaultValue)),C.checked==null&&C.defaultChecked!=null&&(_.defaultChecked=!!C.defaultChecked)}function ne(_,C,L){if(C.hasOwnProperty("value")||C.hasOwnProperty("defaultValue")){var V=C.type;if(!(V!=="submit"&&V!=="reset"||C.value!==void 0&&C.value!==null))return;C=""+_._wrapperState.initialValue,L||C===_.value||(_.value=C),_.defaultValue=C}L=_.name,L!==""&&(_.name=""),_.defaultChecked=!!_._wrapperState.initialChecked,L!==""&&(_.name=L)}function fe(_,C,L){(C!=="number"||Ee(_.ownerDocument)!==_)&&(L==null?_.defaultValue=""+_._wrapperState.initialValue:_.defaultValue!==""+L&&(_.defaultValue=""+L))}var Ne=Array.isArray;function Ae(_,C,L,V){if(_=_.options,C){C={};for(var ee=0;ee<L.length;ee++)C["$"+L[ee]]=!0;for(L=0;L<_.length;L++)ee=C.hasOwnProperty("$"+_[L].value),_[L].selected!==ee&&(_[L].selected=ee),ee&&V&&(_[L].defaultSelected=!0)}else{for(L=""+ae(L),C=null,ee=0;ee<_.length;ee++){if(_[ee].value===L){_[ee].selected=!0,V&&(_[ee].defaultSelected=!0);return}C!==null||_[ee].disabled||(C=_[ee])}C!==null&&(C.selected=!0)}}function ue(_,C){if(C.dangerouslySetInnerHTML!=null)throw Error(t(91));return j({},C,{value:void 0,defaultValue:void 0,children:""+_._wrapperState.initialValue})}function me(_,C){var L=C.value;if(L==null){if(L=C.children,C=C.defaultValue,L!=null){if(C!=null)throw Error(t(92));if(Ne(L)){if(1<L.length)throw Error(t(93));L=L[0]}C=L}C==null&&(C=""),L=C}_._wrapperState={initialValue:ae(L)}}function Se(_,C){var L=ae(C.value),V=ae(C.defaultValue);L!=null&&(L=""+L,L!==_.value&&(_.value=L),C.defaultValue==null&&_.defaultValue!==L&&(_.defaultValue=L)),V!=null&&(_.defaultValue=""+V)}function Re(_){var C=_.textContent;C===_._wrapperState.initialValue&&C!==""&&C!==null&&(_.value=C)}function je(_){switch(_){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rt(_,C){return _==null||_==="http://www.w3.org/1999/xhtml"?je(C):_==="http://www.w3.org/2000/svg"&&C==="foreignObject"?"http://www.w3.org/1999/xhtml":_}var at,yt=function(_){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(C,L,V,ee){MSApp.execUnsafeLocalFunction(function(){return _(C,L,V,ee)})}:_}(function(_,C){if(_.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _)_.innerHTML=C;else{for(at=at||document.createElement("div"),at.innerHTML="<svg>"+C.valueOf().toString()+"</svg>",C=at.firstChild;_.firstChild;)_.removeChild(_.firstChild);for(;C.firstChild;)_.appendChild(C.firstChild)}});function pt(_,C){if(C){var L=_.firstChild;if(L&&L===_.lastChild&&L.nodeType===3){L.nodeValue=C;return}}_.textContent=C}var Le={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tt=["Webkit","ms","Moz","O"];Object.keys(Le).forEach(function(_){tt.forEach(function(C){C=C+_.charAt(0).toUpperCase()+_.substring(1),Le[C]=Le[_]})});function ft(_,C,L){return C==null||typeof C=="boolean"||C===""?"":L||typeof C!="number"||C===0||Le.hasOwnProperty(_)&&Le[_]?(""+C).trim():C+"px"}function Et(_,C){_=_.style;for(var L in C)if(C.hasOwnProperty(L)){var V=L.indexOf("--")===0,ee=ft(L,C[L],V);L==="float"&&(L="cssFloat"),V?_.setProperty(L,ee):_[L]=ee}}var xt=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ot(_,C){if(C){if(xt[_]&&(C.children!=null||C.dangerouslySetInnerHTML!=null))throw Error(t(137,_));if(C.dangerouslySetInnerHTML!=null){if(C.children!=null)throw Error(t(60));if(typeof C.dangerouslySetInnerHTML!="object"||!("__html"in C.dangerouslySetInnerHTML))throw Error(t(61))}if(C.style!=null&&typeof C.style!="object")throw Error(t(62))}}function dn(_,C){if(_.indexOf("-")===-1)return typeof C.is=="string";switch(_){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kr=null;function Ba(_){return _=_.target||_.srcElement||window,_.correspondingUseElement&&(_=_.correspondingUseElement),_.nodeType===3?_.parentNode:_}var Mu=null,xe=null,De=null;function Ue(_){if(_=Uy(_)){if(typeof Mu!="function")throw Error(t(280));var C=_.stateNode;C&&(C=Ca(C),Mu(_.stateNode,_.type,C))}}function et(_){xe?De?De.push(_):De=[_]:xe=_}function Nt(){if(xe){var _=xe,C=De;if(De=xe=null,Ue(_),C)for(_=0;_<C.length;_++)Ue(C[_])}}function pn(_,C){return _(C)}function Be(){}var Ge=!1;function nt(_,C,L){if(Ge)return _(C,L);Ge=!0;try{return pn(_,C,L)}finally{Ge=!1,(xe!==null||De!==null)&&(Be(),Nt())}}function bt(_,C){var L=_.stateNode;if(L===null)return null;var V=Ca(L);if(V===null)return null;L=V[C];e:switch(C){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(V=!V.disabled)||(_=_.type,V=!(_==="button"||_==="input"||_==="select"||_==="textarea")),_=!V;break e;default:_=!1}if(_)return null;if(L&&typeof L!="function")throw Error(t(231,C,typeof L));return L}var kt=!1;if(s)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){kt=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{kt=!1}function an(_,C,L,V,ee,re,we,Me,qe){var ot=Array.prototype.slice.call(arguments,3);try{C.apply(L,ot)}catch(Ct){this.onError(Ct)}}var Mt=!1,Bt=null,Rt=!1,zt=null,Vt={onError:function(_){Mt=!0,Bt=_}};function $n(_,C,L,V,ee,re,we,Me,qe){Mt=!1,Bt=null,an.apply(Vt,arguments)}function fr(_,C,L,V,ee,re,we,Me,qe){if($n.apply(this,arguments),Mt){if(Mt){var ot=Bt;Mt=!1,Bt=null}else throw Error(t(198));Rt||(Rt=!0,zt=ot)}}function Wr(_){var C=_,L=_;if(_.alternate)for(;C.return;)C=C.return;else{_=C;do C=_,(C.flags&4098)!==0&&(L=C.return),_=C.return;while(_)}return C.tag===3?L:null}function Ei(_){if(_.tag===13){var C=_.memoizedState;if(C===null&&(_=_.alternate,_!==null&&(C=_.memoizedState)),C!==null)return C.dehydrated}return null}function ai(_){if(Wr(_)!==_)throw Error(t(188))}function $i(_){var C=_.alternate;if(!C){if(C=Wr(_),C===null)throw Error(t(188));return C!==_?null:_}for(var L=_,V=C;;){var ee=L.return;if(ee===null)break;var re=ee.alternate;if(re===null){if(V=ee.return,V!==null){L=V;continue}break}if(ee.child===re.child){for(re=ee.child;re;){if(re===L)return ai(ee),_;if(re===V)return ai(ee),C;re=re.sibling}throw Error(t(188))}if(L.return!==V.return)L=ee,V=re;else{for(var we=!1,Me=ee.child;Me;){if(Me===L){we=!0,L=ee,V=re;break}if(Me===V){we=!0,V=ee,L=re;break}Me=Me.sibling}if(!we){for(Me=re.child;Me;){if(Me===L){we=!0,L=re,V=ee;break}if(Me===V){we=!0,V=re,L=ee;break}Me=Me.sibling}if(!we)throw Error(t(189))}}if(L.alternate!==V)throw Error(t(190))}if(L.tag!==3)throw Error(t(188));return L.stateNode.current===L?_:C}function xc(_){return _=$i(_),_!==null?Th(_):null}function Th(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var C=Th(_);if(C!==null)return C;_=_.sibling}return null}var Jo=e.unstable_scheduleCallback,So=e.unstable_cancelCallback,xy=e.unstable_shouldYield,Hf=e.unstable_requestPaint,_r=e.unstable_now,Dh=e.unstable_getCurrentPriorityLevel,eu=e.unstable_ImmediatePriority,dr=e.unstable_UserBlockingPriority,Ti=e.unstable_NormalPriority,qp=e.unstable_LowPriority,Al=e.unstable_IdlePriority,wr=null,mi=null;function Ir(_){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(wr,_,void 0,(_.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:Ks,Ah=Math.log,is=Math.LN2;function Ks(_){return _>>>=0,_===0?32:31-(Ah(_)/is|0)|0}var kl=64,_c=4194304;function xa(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function Gf(_,C){var L=_.pendingLanes;if(L===0)return 0;var V=0,ee=_.suspendedLanes,re=_.pingedLanes,we=L&268435455;if(we!==0){var Me=we&~ee;Me!==0?V=xa(Me):(re&=we,re!==0&&(V=xa(re)))}else we=L&~ee,we!==0?V=xa(we):re!==0&&(V=xa(re));if(V===0)return 0;if(C!==0&&C!==V&&(C&ee)===0&&(ee=V&-V,re=C&-C,ee>=re||ee===16&&(re&4194240)!==0))return C;if((V&4)!==0&&(V|=L&16),C=_.entangledLanes,C!==0)for(_=_.entanglements,C&=V;0<C;)L=31-Bn(C),ee=1<<L,V|=_[L],C&=~ee;return V}function GD(_,C){switch(_){case 1:case 2:case 4:return C+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return C+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XD(_,C){for(var L=_.suspendedLanes,V=_.pingedLanes,ee=_.expirationTimes,re=_.pendingLanes;0<re;){var we=31-Bn(re),Me=1<<we,qe=ee[we];qe===-1?((Me&L)===0||(Me&V)!==0)&&(ee[we]=GD(Me,C)):qe<=C&&(_.expiredLanes|=Me),re&=~Me}}function Vp(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function Nx(){var _=kl;return kl<<=1,(kl&4194240)===0&&(kl=64),_}function Co(_){for(var C=[],L=0;31>L;L++)C.push(_);return C}function _y(_,C,L){_.pendingLanes|=C,C!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,C=31-Bn(C),_[C]=L}function N4(_,C){var L=_.pendingLanes&~C;_.pendingLanes=C,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=C,_.mutableReadLanes&=C,_.entangledLanes&=C,C=_.entanglements;var V=_.eventTimes;for(_=_.expirationTimes;0<L;){var ee=31-Bn(L),re=1<<ee;C[ee]=0,V[ee]=-1,_[ee]=-1,L&=~re}}function Ox(_,C){var L=_.entangledLanes|=C;for(_=_.entanglements;L;){var V=31-Bn(L),ee=1<<V;ee&C|_[V]&C&&(_[V]|=C),L&=~ee}}var lr=0;function Sy(_){return _&=-_,1<_?4<_?(_&268435455)!==0?16:536870912:4:1}var Hp,Gp,KD,YD,z1,W1=!1,Xp=[],tu=null,kh=null,Nl=null,Gn=new Map,Kp=new Map,Ol=[],QD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZD(_,C){switch(_){case"focusin":case"focusout":tu=null;break;case"dragenter":case"dragleave":kh=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":Gn.delete(C.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kp.delete(C.pointerId)}}function Cy(_,C,L,V,ee,re){return _===null||_.nativeEvent!==re?(_={blockedOn:C,domEventName:L,eventSystemFlags:V,nativeEvent:re,targetContainers:[ee]},C!==null&&(C=Uy(C),C!==null&&Gp(C)),_):(_.eventSystemFlags|=V,C=_.targetContainers,ee!==null&&C.indexOf(ee)===-1&&C.push(ee),_)}function _a(_,C,L,V,ee){switch(C){case"focusin":return tu=Cy(tu,_,C,L,V,ee),!0;case"dragenter":return kh=Cy(kh,_,C,L,V,ee),!0;case"mouseover":return Nl=Cy(Nl,_,C,L,V,ee),!0;case"pointerover":var re=ee.pointerId;return Gn.set(re,Cy(Gn.get(re)||null,_,C,L,V,ee)),!0;case"gotpointercapture":return re=ee.pointerId,Kp.set(re,Cy(Kp.get(re)||null,_,C,L,V,ee)),!0}return!1}function j1(_){var C=Bh(_.target);if(C!==null){var L=Wr(C);if(L!==null){if(C=L.tag,C===13){if(C=Ei(L),C!==null){_.blockedOn=C,z1(_.priority,function(){KD(L)});return}}else if(C===3&&L.stateNode.current.memoizedState.isDehydrated){_.blockedOn=L.tag===3?L.stateNode.containerInfo:null;return}}}_.blockedOn=null}function $1(_){if(_.blockedOn!==null)return!1;for(var C=_.targetContainers;0<C.length;){var L=H1(_.domEventName,_.eventSystemFlags,C[0],_.nativeEvent);if(L===null){L=_.nativeEvent;var V=new L.constructor(L.type,L);Kr=V,L.target.dispatchEvent(V),Kr=null}else return C=Uy(L),C!==null&&Gp(C),_.blockedOn=L,!1;C.shift()}return!0}function q1(_,C,L){$1(_)&&L.delete(C)}function O4(){W1=!1,tu!==null&&$1(tu)&&(tu=null),kh!==null&&$1(kh)&&(kh=null),Nl!==null&&$1(Nl)&&(Nl=null),Gn.forEach(q1),Kp.forEach(q1)}function Nh(_,C){_.blockedOn===C&&(_.blockedOn=null,W1||(W1=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,O4)))}function Ys(_){function C(ee){return Nh(ee,_)}if(0<Xp.length){Nh(Xp[0],_);for(var L=1;L<Xp.length;L++){var V=Xp[L];V.blockedOn===_&&(V.blockedOn=null)}}for(tu!==null&&Nh(tu,_),kh!==null&&Nh(kh,_),Nl!==null&&Nh(Nl,_),Gn.forEach(C),Kp.forEach(C),L=0;L<Ol.length;L++)V=Ol[L],V.blockedOn===_&&(V.blockedOn=null);for(;0<Ol.length&&(L=Ol[0],L.blockedOn===null);)j1(L),L.blockedOn===null&&Ol.shift()}var Yp=w.ReactCurrentBatchConfig,V1=!0;function Uu(_,C,L,V){var ee=lr,re=Yp.transition;Yp.transition=null;try{lr=1,Qp(_,C,L,V)}finally{lr=ee,Yp.transition=re}}function Sc(_,C,L,V){var ee=lr,re=Yp.transition;Yp.transition=null;try{lr=4,Qp(_,C,L,V)}finally{lr=ee,Yp.transition=re}}function Qp(_,C,L,V){if(V1){var ee=H1(_,C,L,V);if(ee===null)ub(_,C,V,Zp,L),ZD(_,V);else if(_a(ee,_,C,L,V))V.stopPropagation();else if(ZD(_,V),C&4&&-1<QD.indexOf(_)){for(;ee!==null;){var re=Uy(ee);if(re!==null&&Hp(re),re=H1(_,C,L,V),re===null&&ub(_,C,V,Zp,L),re===ee)break;ee=re}ee!==null&&V.stopPropagation()}else ub(_,C,V,null,L)}}var Zp=null;function H1(_,C,L,V){if(Zp=null,_=Ba(V),_=Bh(_),_!==null)if(C=Wr(_),C===null)_=null;else if(L=C.tag,L===13){if(_=Ei(C),_!==null)return _;_=null}else if(L===3){if(C.stateNode.current.memoizedState.isDehydrated)return C.tag===3?C.stateNode.containerInfo:null;_=null}else C!==_&&(_=null);return Zp=_,null}function JD(_){switch(_){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dh()){case eu:return 1;case dr:return 4;case Ti:case qp:return 16;case Al:return 536870912;default:return 16}default:return 16}}var za=null,Oh=null,Cc=null;function Ey(){if(Cc)return Cc;var _,C=Oh,L=C.length,V,ee="value"in za?za.value:za.textContent,re=ee.length;for(_=0;_<L&&C[_]===ee[_];_++);var we=L-_;for(V=1;V<=we&&C[L-V]===ee[re-V];V++);return Cc=ee.slice(_,1<V?1-V:void 0)}function Xf(_){var C=_.keyCode;return"charCode"in _?(_=_.charCode,_===0&&C===13&&(_=13)):_=C,_===10&&(_=13),32<=_||_===13?_:0}function Ts(){return!0}function Eo(){return!1}function aa(_){function C(L,V,ee,re,we){this._reactName=L,this._targetInst=ee,this.type=V,this.nativeEvent=re,this.target=we,this.currentTarget=null;for(var Me in _)_.hasOwnProperty(Me)&&(L=_[Me],this[Me]=L?L(re):re[Me]);return this.isDefaultPrevented=(re.defaultPrevented!=null?re.defaultPrevented:re.returnValue===!1)?Ts:Eo,this.isPropagationStopped=Eo,this}return j(C.prototype,{preventDefault:function(){this.defaultPrevented=!0;var L=this.nativeEvent;L&&(L.preventDefault?L.preventDefault():typeof L.returnValue!="unknown"&&(L.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var L=this.nativeEvent;L&&(L.stopPropagation?L.stopPropagation():typeof L.cancelBubble!="unknown"&&(L.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),C}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_){return _.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bu=aa(Qs),zu=j({},Qs,{view:0,detail:0}),eA=aa(zu),Ty,Dy,Wa,Ds=j({},zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yf,button:0,buttons:0,relatedTarget:function(_){return _.relatedTarget===void 0?_.fromElement===_.srcElement?_.toElement:_.fromElement:_.relatedTarget},movementX:function(_){return"movementX"in _?_.movementX:(_!==Wa&&(Wa&&_.type==="mousemove"?(Ty=_.screenX-Wa.screenX,Dy=_.screenY-Wa.screenY):Dy=Ty=0,Wa=_),Ty)},movementY:function(_){return"movementY"in _?_.movementY:Dy}}),si=aa(Ds),Ay=j({},Ds,{dataTransfer:0}),Wu=aa(Ay),tA=j({},zu,{relatedTarget:0}),G1=aa(tA),Rx=j({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ix=aa(Rx),nA=j({},Qs,{clipboardData:function(_){return"clipboardData"in _?_.clipboardData:window.clipboardData}}),X1=aa(nA),rA=j({},Qs,{data:0}),Kf=aa(rA),Fx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I4(_){var C=this.nativeEvent;return C.getModifierState?C.getModifierState(_):(_=K1[_])?!!C[_]:!1}function Yf(){return I4}var Y1=j({},zu,{key:function(_){if(_.key){var C=Fx[_.key]||_.key;if(C!=="Unidentified")return C}return _.type==="keypress"?(_=Xf(_),_===13?"Enter":String.fromCharCode(_)):_.type==="keydown"||_.type==="keyup"?R4[_.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yf,charCode:function(_){return _.type==="keypress"?Xf(_):0},keyCode:function(_){return _.type==="keydown"||_.type==="keyup"?_.keyCode:0},which:function(_){return _.type==="keypress"?Xf(_):_.type==="keydown"||_.type==="keyup"?_.keyCode:0}}),iA=aa(Y1),aA=j({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qf=aa(aA),sA=j({},zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yf}),Q1=aa(sA),Z1=j({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jp=aa(Z1),Px=j({},Ds,{deltaX:function(_){return"deltaX"in _?_.deltaX:"wheelDeltaX"in _?-_.wheelDeltaX:0},deltaY:function(_){return"deltaY"in _?_.deltaY:"wheelDeltaY"in _?-_.wheelDeltaY:"wheelDelta"in _?-_.wheelDelta:0},deltaZ:0,deltaMode:0}),Lx=aa(Px),oA=[9,13,27,32],ky=s&&"CompositionEvent"in window,Zf=null;s&&"documentMode"in document&&(Zf=document.documentMode);var eg=s&&"TextEvent"in window&&!Zf,To=s&&(!ky||Zf&&8<Zf&&11>=Zf),Rh=" ",J1=!1;function Mx(_,C){switch(_){case"keyup":return oA.indexOf(C.keyCode)!==-1;case"keydown":return C.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ju(_){return _=_.detail,typeof _=="object"&&"data"in _?_.data:null}var Do=!1;function Ux(_,C){switch(_){case"compositionend":return ju(C);case"keypress":return C.which!==32?null:(J1=!0,Rh);case"textInput":return _=C.data,_===Rh&&J1?null:_;default:return null}}function uA(_,C){if(Do)return _==="compositionend"||!ky&&Mx(_,C)?(_=Ey(),Cc=Oh=za=null,Do=!1,_):null;switch(_){case"paste":return null;case"keypress":if(!(C.ctrlKey||C.altKey||C.metaKey)||C.ctrlKey&&C.altKey){if(C.char&&1<C.char.length)return C.char;if(C.which)return String.fromCharCode(C.which)}return null;case"compositionend":return To&&C.locale!=="ko"?null:C.data;default:return null}}var Ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tc(_){var C=_&&_.nodeName&&_.nodeName.toLowerCase();return C==="input"?!!Ec[_.type]:C==="textarea"}function Ny(_,C,L,V){et(V),C=lb(C,"onChange"),0<C.length&&(L=new Bu("onChange","change",null,L,V),_.push({event:L,listeners:C}))}var tg=null,Ih=null;function lA(_){Kx(_,0)}function Fh(_){var C=oa(_);if(Ce(C))return _}function nu(_,C){if(_==="change")return C}var ng=!1;if(s){var Ph;if(s){var ru="oninput"in document;if(!ru){var eb=document.createElement("div");eb.setAttribute("oninput","return;"),ru=typeof eb.oninput=="function"}Ph=ru}else Ph=!1;ng=Ph&&(!document.documentMode||9<document.documentMode)}function Jf(){tg&&(tg.detachEvent("onpropertychange",Bx),Ih=tg=null)}function Bx(_){if(_.propertyName==="value"&&Fh(Ih)){var C=[];Ny(C,Ih,_,Ba(_)),nt(lA,C)}}function zx(_,C,L){_==="focusin"?(Jf(),tg=C,Ih=L,tg.attachEvent("onpropertychange",Bx)):_==="focusout"&&Jf()}function Di(_){if(_==="selectionchange"||_==="keyup"||_==="keydown")return Fh(Ih)}function tb(_,C){if(_==="click")return Fh(C)}function Wx(_,C){if(_==="input"||_==="change")return Fh(C)}function jx(_,C){return _===C&&(_!==0||1/_===1/C)||_!==_&&C!==C}var Zs=typeof Object.is=="function"?Object.is:jx;function ed(_,C){if(Zs(_,C))return!0;if(typeof _!="object"||_===null||typeof C!="object"||C===null)return!1;var L=Object.keys(_),V=Object.keys(C);if(L.length!==V.length)return!1;for(V=0;V<L.length;V++){var ee=L[V];if(!u.call(C,ee)||!Zs(_[ee],C[ee]))return!1}return!0}function Lh(_){for(;_&&_.firstChild;)_=_.firstChild;return _}function yi(_,C){var L=Lh(_);_=0;for(var V;L;){if(L.nodeType===3){if(V=_+L.textContent.length,_<=C&&V>=C)return{node:L,offset:C-_};_=V}e:{for(;L;){if(L.nextSibling){L=L.nextSibling;break e}L=L.parentNode}L=void 0}L=Lh(L)}}function Ki(_,C){return _&&C?_===C?!0:_&&_.nodeType===3?!1:C&&C.nodeType===3?Ki(_,C.parentNode):"contains"in _?_.contains(C):_.compareDocumentPosition?!!(_.compareDocumentPosition(C)&16):!1:!1}function sa(){for(var _=window,C=Ee();C instanceof _.HTMLIFrameElement;){try{var L=typeof C.contentWindow.location.href=="string"}catch{L=!1}if(L)_=C.contentWindow;else break;C=Ee(_.document)}return C}function rg(_){var C=_&&_.nodeName&&_.nodeName.toLowerCase();return C&&(C==="input"&&(_.type==="text"||_.type==="search"||_.type==="tel"||_.type==="url"||_.type==="password")||C==="textarea"||_.contentEditable==="true")}function Oy(_){var C=sa(),L=_.focusedElem,V=_.selectionRange;if(C!==L&&L&&L.ownerDocument&&Ki(L.ownerDocument.documentElement,L)){if(V!==null&&rg(L)){if(C=V.start,_=V.end,_===void 0&&(_=C),"selectionStart"in L)L.selectionStart=C,L.selectionEnd=Math.min(_,L.value.length);else if(_=(C=L.ownerDocument||document)&&C.defaultView||window,_.getSelection){_=_.getSelection();var ee=L.textContent.length,re=Math.min(V.start,ee);V=V.end===void 0?re:Math.min(V.end,ee),!_.extend&&re>V&&(ee=V,V=re,re=ee),ee=yi(L,re);var we=yi(L,V);ee&&we&&(_.rangeCount!==1||_.anchorNode!==ee.node||_.anchorOffset!==ee.offset||_.focusNode!==we.node||_.focusOffset!==we.offset)&&(C=C.createRange(),C.setStart(ee.node,ee.offset),_.removeAllRanges(),re>V?(_.addRange(C),_.extend(we.node,we.offset)):(C.setEnd(we.node,we.offset),_.addRange(C)))}}for(C=[],_=L;_=_.parentNode;)_.nodeType===1&&C.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<C.length;L++)_=C[L],_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}var Ry=s&&"documentMode"in document&&11>=document.documentMode,ig=null,Sa=null,td=null,Iy=!1;function nb(_,C,L){var V=L.window===L?L.document:L.nodeType===9?L:L.ownerDocument;Iy||ig==null||ig!==Ee(V)||(V=ig,"selectionStart"in V&&rg(V)?V={start:V.selectionStart,end:V.selectionEnd}:(V=(V.ownerDocument&&V.ownerDocument.defaultView||window).getSelection(),V={anchorNode:V.anchorNode,anchorOffset:V.anchorOffset,focusNode:V.focusNode,focusOffset:V.focusOffset}),td&&ed(td,V)||(td=V,V=lb(Sa,"onSelect"),0<V.length&&(C=new Bu("onSelect","select",null,C,L),_.push({event:C,listeners:V}),C.target=ig)))}function Ao(_,C){var L={};return L[_.toLowerCase()]=C.toLowerCase(),L["Webkit"+_]="webkit"+C,L["Moz"+_]="moz"+C,L}var ja={animationend:Ao("Animation","AnimationEnd"),animationiteration:Ao("Animation","AnimationIteration"),animationstart:Ao("Animation","AnimationStart"),transitionend:Ao("Transition","TransitionEnd")},nd={},rb={};s&&(rb=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function ag(_){if(nd[_])return nd[_];if(!ja[_])return _;var C=ja[_],L;for(L in C)if(C.hasOwnProperty(L)&&L in rb)return nd[_]=C[L];return _}var $x=ag("animationend"),qx=ag("animationiteration"),Vx=ag("animationstart"),Hx=ag("transitionend"),Gx=new Map,Xx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dc(_,C){Gx.set(_,C),a(C,[_])}for(var ib=0;ib<Xx.length;ib++){var rd=Xx[ib],cA=rd.toLowerCase(),ab=rd[0].toUpperCase()+rd.slice(1);Dc(cA,"on"+ab)}Dc($x,"onAnimationEnd"),Dc(qx,"onAnimationIteration"),Dc(Vx,"onAnimationStart"),Dc("dblclick","onDoubleClick"),Dc("focusin","onFocus"),Dc("focusout","onBlur"),Dc(Hx,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mh));function sb(_,C,L){var V=_.type||"unknown-event";_.currentTarget=L,fr(V,C,void 0,_),_.currentTarget=null}function Kx(_,C){C=(C&4)!==0;for(var L=0;L<_.length;L++){var V=_[L],ee=V.event;V=V.listeners;e:{var re=void 0;if(C)for(var we=V.length-1;0<=we;we--){var Me=V[we],qe=Me.instance,ot=Me.currentTarget;if(Me=Me.listener,qe!==re&&ee.isPropagationStopped())break e;sb(ee,Me,ot),re=qe}else for(we=0;we<V.length;we++){if(Me=V[we],qe=Me.instance,ot=Me.currentTarget,Me=Me.listener,qe!==re&&ee.isPropagationStopped())break e;sb(ee,Me,ot),re=qe}}}if(Rt)throw _=zt,Rt=!1,zt=null,_}function Yr(_,C){var L=C[hb];L===void 0&&(L=C[hb]=new Set);var V=_+"__bubble";L.has(V)||(Yx(C,_,2,!1),L.add(V))}function ob(_,C,L){var V=0;C&&(V|=4),Yx(L,_,V,C)}var Fy="_reactListening"+Math.random().toString(36).slice(2);function id(_){if(!_[Fy]){_[Fy]=!0,r.forEach(function(L){L!=="selectionchange"&&(hA.has(L)||ob(L,!1,_),ob(L,!0,_))});var C=_.nodeType===9?_:_.ownerDocument;C===null||C[Fy]||(C[Fy]=!0,ob("selectionchange",!1,C))}}function Yx(_,C,L,V){switch(JD(C)){case 1:var ee=Uu;break;case 4:ee=Sc;break;default:ee=Qp}L=ee.bind(null,C,L,_),ee=void 0,!kt||C!=="touchstart"&&C!=="touchmove"&&C!=="wheel"||(ee=!0),V?ee!==void 0?_.addEventListener(C,L,{capture:!0,passive:ee}):_.addEventListener(C,L,!0):ee!==void 0?_.addEventListener(C,L,{passive:ee}):_.addEventListener(C,L,!1)}function ub(_,C,L,V,ee){var re=V;if((C&1)===0&&(C&2)===0&&V!==null)e:for(;;){if(V===null)return;var we=V.tag;if(we===3||we===4){var Me=V.stateNode.containerInfo;if(Me===ee||Me.nodeType===8&&Me.parentNode===ee)break;if(we===4)for(we=V.return;we!==null;){var qe=we.tag;if((qe===3||qe===4)&&(qe=we.stateNode.containerInfo,qe===ee||qe.nodeType===8&&qe.parentNode===ee))return;we=we.return}for(;Me!==null;){if(we=Bh(Me),we===null)return;if(qe=we.tag,qe===5||qe===6){V=re=we;continue e}Me=Me.parentNode}}V=V.return}nt(function(){var ot=re,Ct=Ba(L),Tt=[];e:{var _t=Gx.get(_);if(_t!==void 0){var Wt=Bu,Zt=_;switch(_){case"keypress":if(Xf(L)===0)break e;case"keydown":case"keyup":Wt=iA;break;case"focusin":Zt="focus",Wt=G1;break;case"focusout":Zt="blur",Wt=G1;break;case"beforeblur":case"afterblur":Wt=G1;break;case"click":if(L.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Wt=si;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Wt=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Wt=Q1;break;case $x:case qx:case Vx:Wt=Ix;break;case Hx:Wt=Jp;break;case"scroll":Wt=eA;break;case"wheel":Wt=Lx;break;case"copy":case"cut":case"paste":Wt=X1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Wt=Qf}var sn=(C&4)!==0,ha=!sn&&_==="scroll",Qe=sn?_t!==null?_t+"Capture":null:_t;sn=[];for(var He=ot,Je;He!==null;){Je=He;var At=Je.stateNode;if(Je.tag===5&&At!==null&&(Je=At,Qe!==null&&(At=bt(He,Qe),At!=null&&sn.push(sg(He,At,Je)))),ha)break;He=He.return}0<sn.length&&(_t=new Wt(_t,Zt,null,L,Ct),Tt.push({event:_t,listeners:sn}))}}if((C&7)===0){e:{if(_t=_==="mouseover"||_==="pointerover",Wt=_==="mouseout"||_==="pointerout",_t&&L!==Kr&&(Zt=L.relatedTarget||L.fromElement)&&(Bh(Zt)||Zt[Il]))break e;if((Wt||_t)&&(_t=Ct.window===Ct?Ct:(_t=Ct.ownerDocument)?_t.defaultView||_t.parentWindow:window,Wt?(Zt=L.relatedTarget||L.toElement,Wt=ot,Zt=Zt?Bh(Zt):null,Zt!==null&&(ha=Wr(Zt),Zt!==ha||Zt.tag!==5&&Zt.tag!==6)&&(Zt=null)):(Wt=null,Zt=ot),Wt!==Zt)){if(sn=si,At="onMouseLeave",Qe="onMouseEnter",He="mouse",(_==="pointerout"||_==="pointerover")&&(sn=Qf,At="onPointerLeave",Qe="onPointerEnter",He="pointer"),ha=Wt==null?_t:oa(Wt),Je=Zt==null?_t:oa(Zt),_t=new sn(At,He+"leave",Wt,L,Ct),_t.target=ha,_t.relatedTarget=Je,At=null,Bh(Ct)===ot&&(sn=new sn(Qe,He+"enter",Zt,L,Ct),sn.target=Je,sn.relatedTarget=ha,At=sn),ha=At,Wt&&Zt)t:{for(sn=Wt,Qe=Zt,He=0,Je=sn;Je;Je=ad(Je))He++;for(Je=0,At=Qe;At;At=ad(At))Je++;for(;0<He-Je;)sn=ad(sn),He--;for(;0<Je-He;)Qe=ad(Qe),Je--;for(;He--;){if(sn===Qe||Qe!==null&&sn===Qe.alternate)break t;sn=ad(sn),Qe=ad(Qe)}sn=null}else sn=null;Wt!==null&&fA(Tt,_t,Wt,sn,!1),Zt!==null&&ha!==null&&fA(Tt,ha,Zt,sn,!0)}}e:{if(_t=ot?oa(ot):window,Wt=_t.nodeName&&_t.nodeName.toLowerCase(),Wt==="select"||Wt==="input"&&_t.type==="file")var on=nu;else if(Tc(_t))if(ng)on=Wx;else{on=Di;var mn=zx}else(Wt=_t.nodeName)&&Wt.toLowerCase()==="input"&&(_t.type==="checkbox"||_t.type==="radio")&&(on=tb);if(on&&(on=on(_,ot))){Ny(Tt,on,L,Ct);break e}mn&&mn(_,_t,ot),_==="focusout"&&(mn=_t._wrapperState)&&mn.controlled&&_t.type==="number"&&fe(_t,"number",_t.value)}switch(mn=ot?oa(ot):window,_){case"focusin":(Tc(mn)||mn.contentEditable==="true")&&(ig=mn,Sa=ot,td=null);break;case"focusout":td=Sa=ig=null;break;case"mousedown":Iy=!0;break;case"contextmenu":case"mouseup":case"dragend":Iy=!1,nb(Tt,L,Ct);break;case"selectionchange":if(Ry)break;case"keydown":case"keyup":nb(Tt,L,Ct)}var yn;if(ky)e:{switch(_){case"compositionstart":var _n="onCompositionStart";break e;case"compositionend":_n="onCompositionEnd";break e;case"compositionupdate":_n="onCompositionUpdate";break e}_n=void 0}else Do?Mx(_,L)&&(_n="onCompositionEnd"):_==="keydown"&&L.keyCode===229&&(_n="onCompositionStart");_n&&(To&&L.locale!=="ko"&&(Do||_n!=="onCompositionStart"?_n==="onCompositionEnd"&&Do&&(yn=Ey()):(za=Ct,Oh="value"in za?za.value:za.textContent,Do=!0)),mn=lb(ot,_n),0<mn.length&&(_n=new Kf(_n,_,null,L,Ct),Tt.push({event:_n,listeners:mn}),yn?_n.data=yn:(yn=ju(L),yn!==null&&(_n.data=yn)))),(yn=eg?Ux(_,L):uA(_,L))&&(ot=lb(ot,"onBeforeInput"),0<ot.length&&(Ct=new Kf("onBeforeInput","beforeinput",null,L,Ct),Tt.push({event:Ct,listeners:ot}),Ct.data=yn))}Kx(Tt,C)})}function sg(_,C,L){return{instance:_,listener:C,currentTarget:L}}function lb(_,C){for(var L=C+"Capture",V=[];_!==null;){var ee=_,re=ee.stateNode;ee.tag===5&&re!==null&&(ee=re,re=bt(_,L),re!=null&&V.unshift(sg(_,re,ee)),re=bt(_,C),re!=null&&V.push(sg(_,re,ee))),_=_.return}return V}function ad(_){if(_===null)return null;do _=_.return;while(_&&_.tag!==5);return _||null}function fA(_,C,L,V,ee){for(var re=C._reactName,we=[];L!==null&&L!==V;){var Me=L,qe=Me.alternate,ot=Me.stateNode;if(qe!==null&&qe===V)break;Me.tag===5&&ot!==null&&(Me=ot,ee?(qe=bt(L,re),qe!=null&&we.unshift(sg(L,qe,Me))):ee||(qe=bt(L,re),qe!=null&&we.push(sg(L,qe,Me)))),L=L.return}we.length!==0&&_.push({event:C,listeners:we})}var F4=/\r\n?/g,dA=/\u0000|\uFFFD/g;function Qx(_){return(typeof _=="string"?_:""+_).replace(F4,`
`).replace(dA,"")}function Py(_,C,L){if(C=Qx(C),Qx(_)!==C&&L)throw Error(t(425))}function sd(){}var Zx=null,Jx=null;function e_(_,C){return _==="textarea"||_==="noscript"||typeof C.children=="string"||typeof C.children=="number"||typeof C.dangerouslySetInnerHTML=="object"&&C.dangerouslySetInnerHTML!==null&&C.dangerouslySetInnerHTML.__html!=null}var ko=typeof setTimeout=="function"?setTimeout:void 0,t_=typeof clearTimeout=="function"?clearTimeout:void 0,Ly=typeof Promise=="function"?Promise:void 0,pA=typeof queueMicrotask=="function"?queueMicrotask:typeof Ly<"u"?function(_){return Ly.resolve(null).then(_).catch(gA)}:ko;function gA(_){setTimeout(function(){throw _})}function cb(_,C){var L=C,V=0;do{var ee=L.nextSibling;if(_.removeChild(L),ee&&ee.nodeType===8)if(L=ee.data,L==="/$"){if(V===0){_.removeChild(ee),Ys(C);return}V--}else L!=="$"&&L!=="$?"&&L!=="$!"||V++;L=ee}while(L);Ys(C)}function Rl(_){for(;_!=null;_=_.nextSibling){var C=_.nodeType;if(C===1||C===3)break;if(C===8){if(C=_.data,C==="$"||C==="$!"||C==="$?")break;if(C==="/$")return null}}return _}function od(_){_=_.previousSibling;for(var C=0;_;){if(_.nodeType===8){var L=_.data;if(L==="$"||L==="$!"||L==="$?"){if(C===0)return _;C--}else L==="/$"&&C++}_=_.previousSibling}return null}var Uh=Math.random().toString(36).slice(2),iu="__reactFiber$"+Uh,My="__reactProps$"+Uh,Il="__reactContainer$"+Uh,hb="__reactEvents$"+Uh,mA="__reactListeners$"+Uh,yA="__reactHandles$"+Uh;function Bh(_){var C=_[iu];if(C)return C;for(var L=_.parentNode;L;){if(C=L[Il]||L[iu]){if(L=C.alternate,C.child!==null||L!==null&&L.child!==null)for(_=od(_);_!==null;){if(L=_[iu])return L;_=od(_)}return C}_=L,L=_.parentNode}return null}function Uy(_){return _=_[iu]||_[Il],!_||_.tag!==5&&_.tag!==6&&_.tag!==13&&_.tag!==3?null:_}function oa(_){if(_.tag===5||_.tag===6)return _.stateNode;throw Error(t(33))}function Ca(_){return _[My]||null}var fb=[],ud=-1;function Ac(_){return{current:_}}function Qr(_){0>ud||(_.current=fb[ud],fb[ud]=null,ud--)}function jr(_,C){ud++,fb[ud]=_.current,_.current=C}var Fl={},$a=Ac(Fl),as=Ac(!1),zh=Fl;function ld(_,C){var L=_.type.contextTypes;if(!L)return Fl;var V=_.stateNode;if(V&&V.__reactInternalMemoizedUnmaskedChildContext===C)return V.__reactInternalMemoizedMaskedChildContext;var ee={},re;for(re in L)ee[re]=C[re];return V&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=C,_.__reactInternalMemoizedMaskedChildContext=ee),ee}function ss(_){return _=_.childContextTypes,_!=null}function og(){Qr(as),Qr($a)}function n_(_,C,L){if($a.current!==Fl)throw Error(t(168));jr($a,C),jr(as,L)}function db(_,C,L){var V=_.stateNode;if(C=C.childContextTypes,typeof V.getChildContext!="function")return L;V=V.getChildContext();for(var ee in V)if(!(ee in C))throw Error(t(108,X(_)||"Unknown",ee));return j({},L,V)}function cd(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Fl,zh=$a.current,jr($a,_),jr(as,as.current),!0}function vA(_,C,L){var V=_.stateNode;if(!V)throw Error(t(169));L?(_=db(_,C,zh),V.__reactInternalMemoizedMergedChildContext=_,Qr(as),Qr($a),jr($a,_)):Qr(as),jr(as,L)}var Pl=null,ug=!1,pb=!1;function By(_){Pl===null?Pl=[_]:Pl.push(_)}function kc(_){ug=!0,By(_)}function Wh(){if(!pb&&Pl!==null){pb=!0;var _=0,C=lr;try{var L=Pl;for(lr=1;_<L.length;_++){var V=L[_];do V=V(!0);while(V!==null)}Pl=null,ug=!1}catch(ee){throw Pl!==null&&(Pl=Pl.slice(_+1)),Jo(eu,Wh),ee}finally{lr=C,pb=!1}}return null}var As=[],hd=0,jh=null,$h=0,ks=[],Ns=0,qh=null,No=1,vi="";function fd(_,C){As[hd++]=$h,As[hd++]=jh,jh=_,$h=C}function bA(_,C,L){ks[Ns++]=No,ks[Ns++]=vi,ks[Ns++]=qh,qh=_;var V=No;_=vi;var ee=32-Bn(V)-1;V&=~(1<<ee),L+=1;var re=32-Bn(C)+ee;if(30<re){var we=ee-ee%5;re=(V&(1<<we)-1).toString(32),V>>=we,ee-=we,No=1<<32-Bn(C)+ee|L<<ee|V,vi=re+_}else No=1<<re|L<<ee|V,vi=_}function lg(_){_.return!==null&&(fd(_,1),bA(_,1,0))}function Ea(_){for(;_===jh;)jh=As[--hd],As[hd]=null,$h=As[--hd],As[hd]=null;for(;_===qh;)qh=ks[--Ns],ks[Ns]=null,vi=ks[--Ns],ks[Ns]=null,No=ks[--Ns],ks[Ns]=null}var Oo=null,It=null,Sr=!1,Ro=null;function r_(_,C){var L=jl(5,null,null,0);L.elementType="DELETED",L.stateNode=C,L.return=_,C=_.deletions,C===null?(_.deletions=[L],_.flags|=16):C.push(L)}function wA(_,C){switch(_.tag){case 5:var L=_.type;return C=C.nodeType!==1||L.toLowerCase()!==C.nodeName.toLowerCase()?null:C,C!==null?(_.stateNode=C,Oo=_,It=Rl(C.firstChild),!0):!1;case 6:return C=_.pendingProps===""||C.nodeType!==3?null:C,C!==null?(_.stateNode=C,Oo=_,It=null,!0):!1;case 13:return C=C.nodeType!==8?null:C,C!==null?(L=qh!==null?{id:No,overflow:vi}:null,_.memoizedState={dehydrated:C,treeContext:L,retryLane:1073741824},L=jl(18,null,null,0),L.stateNode=C,L.return=_,_.child=L,Oo=_,It=null,!0):!1;default:return!1}}function dd(_){return(_.mode&1)!==0&&(_.flags&128)===0}function cg(_){if(Sr){var C=It;if(C){var L=C;if(!wA(_,C)){if(dd(_))throw Error(t(418));C=Rl(L.nextSibling);var V=Oo;C&&wA(_,C)?r_(V,L):(_.flags=_.flags&-4097|2,Sr=!1,Oo=_)}}else{if(dd(_))throw Error(t(418));_.flags=_.flags&-4097|2,Sr=!1,Oo=_}}}function gb(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;Oo=_}function zy(_){if(_!==Oo)return!1;if(!Sr)return gb(_),Sr=!0,!1;var C;if((C=_.tag!==3)&&!(C=_.tag!==5)&&(C=_.type,C=C!=="head"&&C!=="body"&&!e_(_.type,_.memoizedProps)),C&&(C=It)){if(dd(_))throw i_(),Error(t(418));for(;C;)r_(_,C),C=Rl(C.nextSibling)}if(gb(_),_.tag===13){if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));e:{for(_=_.nextSibling,C=0;_;){if(_.nodeType===8){var L=_.data;if(L==="/$"){if(C===0){It=Rl(_.nextSibling);break e}C--}else L!=="$"&&L!=="$!"&&L!=="$?"||C++}_=_.nextSibling}It=null}}else It=Oo?Rl(_.stateNode.nextSibling):null;return!0}function i_(){for(var _=It;_;)_=Rl(_.nextSibling)}function pd(){It=Oo=null,Sr=!1}function Wy(_){Ro===null?Ro=[_]:Ro.push(_)}var a_=w.ReactCurrentBatchConfig;function qi(_,C,L){if(_=L.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(L._owner){if(L=L._owner,L){if(L.tag!==1)throw Error(t(309));var V=L.stateNode}if(!V)throw Error(t(147,_));var ee=V,re=""+_;return C!==null&&C.ref!==null&&typeof C.ref=="function"&&C.ref._stringRef===re?C.ref:(C=function(we){var Me=ee.refs;we===null?delete Me[re]:Me[re]=we},C._stringRef=re,C)}if(typeof _!="string")throw Error(t(284));if(!L._owner)throw Error(t(290,_))}return _}function Js(_,C){throw _=Object.prototype.toString.call(C),Error(t(31,_==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":_))}function $u(_){var C=_._init;return C(_._payload)}function mb(_){function C(Qe,He){if(_){var Je=Qe.deletions;Je===null?(Qe.deletions=[He],Qe.flags|=16):Je.push(He)}}function L(Qe,He){if(!_)return null;for(;He!==null;)C(Qe,He),He=He.sibling;return null}function V(Qe,He){for(Qe=new Map;He!==null;)He.key!==null?Qe.set(He.key,He):Qe.set(He.index,He),He=He.sibling;return Qe}function ee(Qe,He){return Qe=Ng(Qe,He),Qe.index=0,Qe.sibling=null,Qe}function re(Qe,He,Je){return Qe.index=Je,_?(Je=Qe.alternate,Je!==null?(Je=Je.index,Je<He?(Qe.flags|=2,He):Je):(Qe.flags|=2,He)):(Qe.flags|=1048576,He)}function we(Qe){return _&&Qe.alternate===null&&(Qe.flags|=2),Qe}function Me(Qe,He,Je,At){return He===null||He.tag!==6?(He=t5(Je,Qe.mode,At),He.return=Qe,He):(He=ee(He,Je),He.return=Qe,He)}function qe(Qe,He,Je,At){var on=Je.type;return on===E?Ct(Qe,He,Je.props.children,At,Je.key):He!==null&&(He.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===B&&$u(on)===He.type)?(At=ee(He,Je.props),At.ref=qi(Qe,He,Je),At.return=Qe,At):(At=WA(Je.type,Je.key,Je.props,null,Qe.mode,At),At.ref=qi(Qe,He,Je),At.return=Qe,At)}function ot(Qe,He,Je,At){return He===null||He.tag!==4||He.stateNode.containerInfo!==Je.containerInfo||He.stateNode.implementation!==Je.implementation?(He=n5(Je,Qe.mode,At),He.return=Qe,He):(He=ee(He,Je.children||[]),He.return=Qe,He)}function Ct(Qe,He,Je,At,on){return He===null||He.tag!==7?(He=Zy(Je,Qe.mode,At,on),He.return=Qe,He):(He=ee(He,Je),He.return=Qe,He)}function Tt(Qe,He,Je){if(typeof He=="string"&&He!==""||typeof He=="number")return He=t5(""+He,Qe.mode,Je),He.return=Qe,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case x:return Je=WA(He.type,He.key,He.props,null,Qe.mode,Je),Je.ref=qi(Qe,null,He),Je.return=Qe,Je;case S:return He=n5(He,Qe.mode,Je),He.return=Qe,He;case B:var At=He._init;return Tt(Qe,At(He._payload),Je)}if(Ne(He)||z(He))return He=Zy(He,Qe.mode,Je,null),He.return=Qe,He;Js(Qe,He)}return null}function _t(Qe,He,Je,At){var on=He!==null?He.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number")return on!==null?null:Me(Qe,He,""+Je,At);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case x:return Je.key===on?qe(Qe,He,Je,At):null;case S:return Je.key===on?ot(Qe,He,Je,At):null;case B:return on=Je._init,_t(Qe,He,on(Je._payload),At)}if(Ne(Je)||z(Je))return on!==null?null:Ct(Qe,He,Je,At,null);Js(Qe,Je)}return null}function Wt(Qe,He,Je,At,on){if(typeof At=="string"&&At!==""||typeof At=="number")return Qe=Qe.get(Je)||null,Me(He,Qe,""+At,on);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case x:return Qe=Qe.get(At.key===null?Je:At.key)||null,qe(He,Qe,At,on);case S:return Qe=Qe.get(At.key===null?Je:At.key)||null,ot(He,Qe,At,on);case B:var mn=At._init;return Wt(Qe,He,Je,mn(At._payload),on)}if(Ne(At)||z(At))return Qe=Qe.get(Je)||null,Ct(He,Qe,At,on,null);Js(He,At)}return null}function Zt(Qe,He,Je,At){for(var on=null,mn=null,yn=He,_n=He=0,fs=null;yn!==null&&_n<Je.length;_n++){yn.index>_n?(fs=yn,yn=null):fs=yn.sibling;var xr=_t(Qe,yn,Je[_n],At);if(xr===null){yn===null&&(yn=fs);break}_&&yn&&xr.alternate===null&&C(Qe,yn),He=re(xr,He,_n),mn===null?on=xr:mn.sibling=xr,mn=xr,yn=fs}if(_n===Je.length)return L(Qe,yn),Sr&&fd(Qe,_n),on;if(yn===null){for(;_n<Je.length;_n++)yn=Tt(Qe,Je[_n],At),yn!==null&&(He=re(yn,He,_n),mn===null?on=yn:mn.sibling=yn,mn=yn);return Sr&&fd(Qe,_n),on}for(yn=V(Qe,yn);_n<Je.length;_n++)fs=Wt(yn,Qe,_n,Je[_n],At),fs!==null&&(_&&fs.alternate!==null&&yn.delete(fs.key===null?_n:fs.key),He=re(fs,He,_n),mn===null?on=fs:mn.sibling=fs,mn=fs);return _&&yn.forEach(function(Og){return C(Qe,Og)}),Sr&&fd(Qe,_n),on}function sn(Qe,He,Je,At){var on=z(Je);if(typeof on!="function")throw Error(t(150));if(Je=on.call(Je),Je==null)throw Error(t(151));for(var mn=on=null,yn=He,_n=He=0,fs=null,xr=Je.next();yn!==null&&!xr.done;_n++,xr=Je.next()){yn.index>_n?(fs=yn,yn=null):fs=yn.sibling;var Og=_t(Qe,yn,xr.value,At);if(Og===null){yn===null&&(yn=fs);break}_&&yn&&Og.alternate===null&&C(Qe,yn),He=re(Og,He,_n),mn===null?on=Og:mn.sibling=Og,mn=Og,yn=fs}if(xr.done)return L(Qe,yn),Sr&&fd(Qe,_n),on;if(yn===null){for(;!xr.done;_n++,xr=Je.next())xr=Tt(Qe,xr.value,At),xr!==null&&(He=re(xr,He,_n),mn===null?on=xr:mn.sibling=xr,mn=xr);return Sr&&fd(Qe,_n),on}for(yn=V(Qe,yn);!xr.done;_n++,xr=Je.next())xr=Wt(yn,Qe,_n,xr.value,At),xr!==null&&(_&&xr.alternate!==null&&yn.delete(xr.key===null?_n:xr.key),He=re(xr,He,_n),mn===null?on=xr:mn.sibling=xr,mn=xr);return _&&yn.forEach(function(vye){return C(Qe,vye)}),Sr&&fd(Qe,_n),on}function ha(Qe,He,Je,At){if(typeof Je=="object"&&Je!==null&&Je.type===E&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case x:e:{for(var on=Je.key,mn=He;mn!==null;){if(mn.key===on){if(on=Je.type,on===E){if(mn.tag===7){L(Qe,mn.sibling),He=ee(mn,Je.props.children),He.return=Qe,Qe=He;break e}}else if(mn.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===B&&$u(on)===mn.type){L(Qe,mn.sibling),He=ee(mn,Je.props),He.ref=qi(Qe,mn,Je),He.return=Qe,Qe=He;break e}L(Qe,mn);break}else C(Qe,mn);mn=mn.sibling}Je.type===E?(He=Zy(Je.props.children,Qe.mode,At,Je.key),He.return=Qe,Qe=He):(At=WA(Je.type,Je.key,Je.props,null,Qe.mode,At),At.ref=qi(Qe,He,Je),At.return=Qe,Qe=At)}return we(Qe);case S:e:{for(mn=Je.key;He!==null;){if(He.key===mn)if(He.tag===4&&He.stateNode.containerInfo===Je.containerInfo&&He.stateNode.implementation===Je.implementation){L(Qe,He.sibling),He=ee(He,Je.children||[]),He.return=Qe,Qe=He;break e}else{L(Qe,He);break}else C(Qe,He);He=He.sibling}He=n5(Je,Qe.mode,At),He.return=Qe,Qe=He}return we(Qe);case B:return mn=Je._init,ha(Qe,He,mn(Je._payload),At)}if(Ne(Je))return Zt(Qe,He,Je,At);if(z(Je))return sn(Qe,He,Je,At);Js(Qe,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"?(Je=""+Je,He!==null&&He.tag===6?(L(Qe,He.sibling),He=ee(He,Je),He.return=Qe,Qe=He):(L(Qe,He),He=t5(Je,Qe.mode,At),He.return=Qe,Qe=He),we(Qe)):L(Qe,He)}return ha}var gd=mb(!0),au=mb(!1),jy=Ac(null),Io=null,hg=null,yb=null;function vb(){yb=hg=Io=null}function bb(_){var C=jy.current;Qr(jy),_._currentValue=C}function wb(_,C,L){for(;_!==null;){var V=_.alternate;if((_.childLanes&C)!==C?(_.childLanes|=C,V!==null&&(V.childLanes|=C)):V!==null&&(V.childLanes&C)!==C&&(V.childLanes|=C),_===L)break;_=_.return}}function Nc(_,C){Io=_,yb=hg=null,_=_.dependencies,_!==null&&_.firstContext!==null&&((_.lanes&C)!==0&&(oe=!0),_.firstContext=null)}function Os(_){var C=_._currentValue;if(yb!==_)if(_={context:_,memoizedValue:C,next:null},hg===null){if(Io===null)throw Error(t(308));hg=_,Io.dependencies={lanes:0,firstContext:_}}else hg=hg.next=_;return C}var Ll=null;function fg(_){Ll===null?Ll=[_]:Ll.push(_)}function $y(_,C,L,V){var ee=C.interleaved;return ee===null?(L.next=L,fg(C)):(L.next=ee.next,ee.next=L),C.interleaved=L,Fo(_,V)}function Fo(_,C){_.lanes|=C;var L=_.alternate;for(L!==null&&(L.lanes|=C),L=_,_=_.return;_!==null;)_.childLanes|=C,L=_.alternate,L!==null&&(L.childLanes|=C),L=_,_=_.return;return L.tag===3?L.stateNode:null}var Ml=!1;function qy(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xb(_,C){_=_.updateQueue,C.updateQueue===_&&(C.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function Ul(_,C){return{eventTime:_,lane:C,tag:0,payload:null,callback:null,next:null}}function Bl(_,C,L){var V=_.updateQueue;if(V===null)return null;if(V=V.shared,(pr&2)!==0){var ee=V.pending;return ee===null?C.next=C:(C.next=ee.next,ee.next=C),V.pending=C,Fo(_,L)}return ee=V.interleaved,ee===null?(C.next=C,fg(V)):(C.next=ee.next,ee.next=C),V.interleaved=C,Fo(_,L)}function _b(_,C,L){if(C=C.updateQueue,C!==null&&(C=C.shared,(L&4194240)!==0)){var V=C.lanes;V&=_.pendingLanes,L|=V,C.lanes=L,Ox(_,L)}}function Vy(_,C){var L=_.updateQueue,V=_.alternate;if(V!==null&&(V=V.updateQueue,L===V)){var ee=null,re=null;if(L=L.firstBaseUpdate,L!==null){do{var we={eventTime:L.eventTime,lane:L.lane,tag:L.tag,payload:L.payload,callback:L.callback,next:null};re===null?ee=re=we:re=re.next=we,L=L.next}while(L!==null);re===null?ee=re=C:re=re.next=C}else ee=re=C;L={baseState:V.baseState,firstBaseUpdate:ee,lastBaseUpdate:re,shared:V.shared,effects:V.effects},_.updateQueue=L;return}_=L.lastBaseUpdate,_===null?L.firstBaseUpdate=C:_.next=C,L.lastBaseUpdate=C}function dg(_,C,L,V){var ee=_.updateQueue;Ml=!1;var re=ee.firstBaseUpdate,we=ee.lastBaseUpdate,Me=ee.shared.pending;if(Me!==null){ee.shared.pending=null;var qe=Me,ot=qe.next;qe.next=null,we===null?re=ot:we.next=ot,we=qe;var Ct=_.alternate;Ct!==null&&(Ct=Ct.updateQueue,Me=Ct.lastBaseUpdate,Me!==we&&(Me===null?Ct.firstBaseUpdate=ot:Me.next=ot,Ct.lastBaseUpdate=qe))}if(re!==null){var Tt=ee.baseState;we=0,Ct=ot=qe=null,Me=re;do{var _t=Me.lane,Wt=Me.eventTime;if((V&_t)===_t){Ct!==null&&(Ct=Ct.next={eventTime:Wt,lane:0,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null});e:{var Zt=_,sn=Me;switch(_t=C,Wt=L,sn.tag){case 1:if(Zt=sn.payload,typeof Zt=="function"){Tt=Zt.call(Wt,Tt,_t);break e}Tt=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=sn.payload,_t=typeof Zt=="function"?Zt.call(Wt,Tt,_t):Zt,_t==null)break e;Tt=j({},Tt,_t);break e;case 2:Ml=!0}}Me.callback!==null&&Me.lane!==0&&(_.flags|=64,_t=ee.effects,_t===null?ee.effects=[Me]:_t.push(Me))}else Wt={eventTime:Wt,lane:_t,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},Ct===null?(ot=Ct=Wt,qe=Tt):Ct=Ct.next=Wt,we|=_t;if(Me=Me.next,Me===null){if(Me=ee.shared.pending,Me===null)break;_t=Me,Me=_t.next,_t.next=null,ee.lastBaseUpdate=_t,ee.shared.pending=null}}while(!0);if(Ct===null&&(qe=Tt),ee.baseState=qe,ee.firstBaseUpdate=ot,ee.lastBaseUpdate=Ct,C=ee.shared.interleaved,C!==null){ee=C;do we|=ee.lane,ee=ee.next;while(ee!==C)}else re===null&&(ee.shared.lanes=0);Xy|=we,_.lanes=we,_.memoizedState=Tt}}function Ri(_,C,L){if(_=C.effects,C.effects=null,_!==null)for(C=0;C<_.length;C++){var V=_[C],ee=V.callback;if(ee!==null){if(V.callback=null,V=L,typeof ee!="function")throw Error(t(191,ee));ee.call(V)}}}var On={},$r=Ac(On),bi=Ac(On),Vi=Ac(On);function ua(_){if(_===On)throw Error(t(174));return _}function Vh(_,C){switch(jr(Vi,C),jr(bi,_),jr($r,On),_=C.nodeType,_){case 9:case 11:C=(C=C.documentElement)?C.namespaceURI:rt(null,"");break;default:_=_===8?C.parentNode:C,C=_.namespaceURI||null,_=_.tagName,C=rt(C,_)}Qr($r),jr($r,C)}function wi(){Qr($r),Qr(bi),Qr(Vi)}function pg(_){ua(Vi.current);var C=ua($r.current),L=rt(C,_.type);C!==L&&(jr(bi,_),jr($r,L))}function Oc(_){bi.current===_&&(Qr($r),Qr(bi))}var Zr=Ac(0);function gg(_){for(var C=_;C!==null;){if(C.tag===13){var L=C.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||L.data==="$?"||L.data==="$!"))return C}else if(C.tag===19&&C.memoizedProps.revealOrder!==void 0){if((C.flags&128)!==0)return C}else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===_)break;for(;C.sibling===null;){if(C.return===null||C.return===_)return null;C=C.return}C.sibling.return=C.return,C=C.sibling}return null}var md=[];function os(){for(var _=0;_<md.length;_++)md[_]._workInProgressVersionPrimary=null;md.length=0}var mg=w.ReactCurrentDispatcher,Hy=w.ReactCurrentBatchConfig,Rs=0,Fr=null,Ii=null,Yi=null,qu=!1,Hh=!1,su=0,Sb=0;function Qi(){throw Error(t(321))}function Gy(_,C){if(C===null)return!1;for(var L=0;L<C.length&&L<_.length;L++)if(!Zs(_[L],C[L]))return!1;return!0}function yg(_,C,L,V,ee,re){if(Rs=re,Fr=C,C.memoizedState=null,C.updateQueue=null,C.lanes=0,mg.current=_===null||_.memoizedState===null?L4:Kh,_=L(V,ee),Hh){re=0;do{if(Hh=!1,su=0,25<=re)throw Error(t(301));re+=1,Yi=Ii=null,C.updateQueue=null,mg.current=Ab,_=L(V,ee)}while(Hh)}if(mg.current=xg,C=Ii!==null&&Ii.next!==null,Rs=0,Yi=Ii=Fr=null,qu=!1,C)throw Error(t(300));return _}function vg(){var _=su!==0;return su=0,_}function oi(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yi===null?Fr.memoizedState=Yi=_:Yi=Yi.next=_,Yi}function la(){if(Ii===null){var _=Fr.alternate;_=_!==null?_.memoizedState:null}else _=Ii.next;var C=Yi===null?Fr.memoizedState:Yi.next;if(C!==null)Yi=C,Ii=_;else{if(_===null)throw Error(t(310));Ii=_,_={memoizedState:Ii.memoizedState,baseState:Ii.baseState,baseQueue:Ii.baseQueue,queue:Ii.queue,next:null},Yi===null?Fr.memoizedState=Yi=_:Yi=Yi.next=_}return Yi}function us(_,C){return typeof C=="function"?C(_):C}function ls(_){var C=la(),L=C.queue;if(L===null)throw Error(t(311));L.lastRenderedReducer=_;var V=Ii,ee=V.baseQueue,re=L.pending;if(re!==null){if(ee!==null){var we=ee.next;ee.next=re.next,re.next=we}V.baseQueue=ee=re,L.pending=null}if(ee!==null){re=ee.next,V=V.baseState;var Me=we=null,qe=null,ot=re;do{var Ct=ot.lane;if((Rs&Ct)===Ct)qe!==null&&(qe=qe.next={lane:0,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),V=ot.hasEagerState?ot.eagerState:_(V,ot.action);else{var Tt={lane:Ct,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null};qe===null?(Me=qe=Tt,we=V):qe=qe.next=Tt,Fr.lanes|=Ct,Xy|=Ct}ot=ot.next}while(ot!==null&&ot!==re);qe===null?we=V:qe.next=Me,Zs(V,C.memoizedState)||(oe=!0),C.memoizedState=V,C.baseState=we,C.baseQueue=qe,L.lastRenderedState=V}if(_=L.interleaved,_!==null){ee=_;do re=ee.lane,Fr.lanes|=re,Xy|=re,ee=ee.next;while(ee!==_)}else ee===null&&(L.lanes=0);return[C.memoizedState,L.dispatch]}function Cb(_){var C=la(),L=C.queue;if(L===null)throw Error(t(311));L.lastRenderedReducer=_;var V=L.dispatch,ee=L.pending,re=C.memoizedState;if(ee!==null){L.pending=null;var we=ee=ee.next;do re=_(re,we.action),we=we.next;while(we!==ee);Zs(re,C.memoizedState)||(oe=!0),C.memoizedState=re,C.baseQueue===null&&(C.baseState=re),L.lastRenderedState=re}return[re,V]}function Eb(){}function Tb(_,C){var L=Fr,V=la(),ee=C(),re=!Zs(V.memoizedState,ee);if(re&&(V.memoizedState=ee,oe=!0),V=V.queue,l_(s_.bind(null,L,V,_),[_]),V.getSnapshot!==C||re||Yi!==null&&Yi.memoizedState.tag&1){if(L.flags|=2048,bg(9,Rc.bind(null,L,V,ee,C),void 0,null),hs===null)throw Error(t(349));(Rs&30)!==0||xA(L,C,ee)}return ee}function xA(_,C,L){_.flags|=16384,_={getSnapshot:C,value:L},C=Fr.updateQueue,C===null?(C={lastEffect:null,stores:null},Fr.updateQueue=C,C.stores=[_]):(L=C.stores,L===null?C.stores=[_]:L.push(_))}function Rc(_,C,L,V){C.value=L,C.getSnapshot=V,o_(C)&&Db(_)}function s_(_,C,L){return L(function(){o_(C)&&Db(_)})}function o_(_){var C=_.getSnapshot;_=_.value;try{var L=C();return!Zs(_,L)}catch{return!0}}function Db(_){var C=Fo(_,1);C!==null&&Lc(C,_,1,-1)}function Gh(_){var C=oi();return typeof _=="function"&&(_=_()),C.memoizedState=C.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:_},C.queue=_,_=_.dispatch=DA.bind(null,Fr,_),[C.memoizedState,_]}function bg(_,C,L,V){return _={tag:_,create:C,destroy:L,deps:V,next:null},C=Fr.updateQueue,C===null?(C={lastEffect:null,stores:null},Fr.updateQueue=C,C.lastEffect=_.next=_):(L=C.lastEffect,L===null?C.lastEffect=_.next=_:(V=L.next,L.next=_,_.next=V,C.lastEffect=_)),_}function u_(){return la().memoizedState}function wg(_,C,L,V){var ee=oi();Fr.flags|=_,ee.memoizedState=bg(1|C,L,void 0,V===void 0?null:V)}function yd(_,C,L,V){var ee=la();V=V===void 0?null:V;var re=void 0;if(Ii!==null){var we=Ii.memoizedState;if(re=we.destroy,V!==null&&Gy(V,we.deps)){ee.memoizedState=bg(C,L,re,V);return}}Fr.flags|=_,ee.memoizedState=bg(1|C,L,re,V)}function _A(_,C){return wg(8390656,8,_,C)}function l_(_,C){return yd(2048,8,_,C)}function c_(_,C){return yd(4,2,_,C)}function h_(_,C){return yd(4,4,_,C)}function Xh(_,C){if(typeof C=="function")return _=_(),C(_),function(){C(null)};if(C!=null)return _=_(),C.current=_,function(){C.current=null}}function SA(_,C,L){return L=L!=null?L.concat([_]):null,yd(4,4,Xh.bind(null,C,_),L)}function Ic(){}function f_(_,C){var L=la();C=C===void 0?null:C;var V=L.memoizedState;return V!==null&&C!==null&&Gy(C,V[1])?V[0]:(L.memoizedState=[_,C],_)}function ui(_,C){var L=la();C=C===void 0?null:C;var V=L.memoizedState;return V!==null&&C!==null&&Gy(C,V[1])?V[0]:(_=_(),L.memoizedState=[_,C],_)}function CA(_,C,L){return(Rs&21)===0?(_.baseState&&(_.baseState=!1,oe=!0),_.memoizedState=L):(Zs(L,C)||(L=Nx(),Fr.lanes|=L,Xy|=L,_.baseState=!0),C)}function EA(_,C){var L=lr;lr=L!==0&&4>L?L:4,_(!0);var V=Hy.transition;Hy.transition={};try{_(!1),C()}finally{lr=L,Hy.transition=V}}function TA(){return la().memoizedState}function P4(_,C,L){var V=Ag(_);if(L={lane:V,action:L,hasEagerState:!1,eagerState:null,next:null},d_(_))AA(C,L);else if(L=$y(_,C,L,V),L!==null){var ee=Lo();Lc(L,_,V,ee),Po(L,C,V)}}function DA(_,C,L){var V=Ag(_),ee={lane:V,action:L,hasEagerState:!1,eagerState:null,next:null};if(d_(_))AA(C,ee);else{var re=_.alternate;if(_.lanes===0&&(re===null||re.lanes===0)&&(re=C.lastRenderedReducer,re!==null))try{var we=C.lastRenderedState,Me=re(we,L);if(ee.hasEagerState=!0,ee.eagerState=Me,Zs(Me,we)){var qe=C.interleaved;qe===null?(ee.next=ee,fg(C)):(ee.next=qe.next,qe.next=ee),C.interleaved=ee;return}}catch{}finally{}L=$y(_,C,ee,V),L!==null&&(ee=Lo(),Lc(L,_,V,ee),Po(L,C,V))}}function d_(_){var C=_.alternate;return _===Fr||C!==null&&C===Fr}function AA(_,C){Hh=qu=!0;var L=_.pending;L===null?C.next=C:(C.next=L.next,L.next=C),_.pending=C}function Po(_,C,L){if((L&4194240)!==0){var V=C.lanes;V&=_.pendingLanes,L|=V,C.lanes=L,Ox(_,L)}}var xg={readContext:Os,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useInsertionEffect:Qi,useLayoutEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useMutableSource:Qi,useSyncExternalStore:Qi,useId:Qi,unstable_isNewReconciler:!1},L4={readContext:Os,useCallback:function(_,C){return oi().memoizedState=[_,C===void 0?null:C],_},useContext:Os,useEffect:_A,useImperativeHandle:function(_,C,L){return L=L!=null?L.concat([_]):null,wg(4194308,4,Xh.bind(null,C,_),L)},useLayoutEffect:function(_,C){return wg(4194308,4,_,C)},useInsertionEffect:function(_,C){return wg(4,2,_,C)},useMemo:function(_,C){var L=oi();return C=C===void 0?null:C,_=_(),L.memoizedState=[_,C],_},useReducer:function(_,C,L){var V=oi();return C=L!==void 0?L(C):C,V.memoizedState=V.baseState=C,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:C},V.queue=_,_=_.dispatch=P4.bind(null,Fr,_),[V.memoizedState,_]},useRef:function(_){var C=oi();return _={current:_},C.memoizedState=_},useState:Gh,useDebugValue:Ic,useDeferredValue:function(_){return oi().memoizedState=_},useTransition:function(){var _=Gh(!1),C=_[0];return _=EA.bind(null,_[1]),oi().memoizedState=_,[C,_]},useMutableSource:function(){},useSyncExternalStore:function(_,C,L){var V=Fr,ee=oi();if(Sr){if(L===void 0)throw Error(t(407));L=L()}else{if(L=C(),hs===null)throw Error(t(349));(Rs&30)!==0||xA(V,C,L)}ee.memoizedState=L;var re={value:L,getSnapshot:C};return ee.queue=re,_A(s_.bind(null,V,re,_),[_]),V.flags|=2048,bg(9,Rc.bind(null,V,re,L,C),void 0,null),L},useId:function(){var _=oi(),C=hs.identifierPrefix;if(Sr){var L=vi,V=No;L=(V&~(1<<32-Bn(V)-1)).toString(32)+L,C=":"+C+"R"+L,L=su++,0<L&&(C+="H"+L.toString(32)),C+=":"}else L=Sb++,C=":"+C+"r"+L.toString(32)+":";return _.memoizedState=C},unstable_isNewReconciler:!1},Kh={readContext:Os,useCallback:f_,useContext:Os,useEffect:l_,useImperativeHandle:SA,useInsertionEffect:c_,useLayoutEffect:h_,useMemo:ui,useReducer:ls,useRef:u_,useState:function(){return ls(us)},useDebugValue:Ic,useDeferredValue:function(_){var C=la();return CA(C,Ii.memoizedState,_)},useTransition:function(){var _=ls(us)[0],C=la().memoizedState;return[_,C]},useMutableSource:Eb,useSyncExternalStore:Tb,useId:TA,unstable_isNewReconciler:!1},Ab={readContext:Os,useCallback:f_,useContext:Os,useEffect:l_,useImperativeHandle:SA,useInsertionEffect:c_,useLayoutEffect:h_,useMemo:ui,useReducer:Cb,useRef:u_,useState:function(){return Cb(us)},useDebugValue:Ic,useDeferredValue:function(_){var C=la();return Ii===null?C.memoizedState=_:CA(C,Ii.memoizedState,_)},useTransition:function(){var _=Cb(us)[0],C=la().memoizedState;return[_,C]},useMutableSource:Eb,useSyncExternalStore:Tb,useId:TA,unstable_isNewReconciler:!1};function qa(_,C){if(_&&_.defaultProps){C=j({},C),_=_.defaultProps;for(var L in _)C[L]===void 0&&(C[L]=_[L]);return C}return C}function _g(_,C,L,V){C=_.memoizedState,L=L(V,C),L=L==null?C:j({},C,L),_.memoizedState=L,_.lanes===0&&(_.updateQueue.baseState=L)}var Sg={isMounted:function(_){return(_=_._reactInternals)?Wr(_)===_:!1},enqueueSetState:function(_,C,L){_=_._reactInternals;var V=Lo(),ee=Ag(_),re=Ul(V,ee);re.payload=C,L!=null&&(re.callback=L),C=Bl(_,re,ee),C!==null&&(Lc(C,_,ee,V),_b(C,_,ee))},enqueueReplaceState:function(_,C,L){_=_._reactInternals;var V=Lo(),ee=Ag(_),re=Ul(V,ee);re.tag=1,re.payload=C,L!=null&&(re.callback=L),C=Bl(_,re,ee),C!==null&&(Lc(C,_,ee,V),_b(C,_,ee))},enqueueForceUpdate:function(_,C){_=_._reactInternals;var L=Lo(),V=Ag(_),ee=Ul(L,V);ee.tag=2,C!=null&&(ee.callback=C),C=Bl(_,ee,V),C!==null&&(Lc(C,_,V,L),_b(C,_,V))}};function kb(_,C,L,V,ee,re,we){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(V,re,we):C.prototype&&C.prototype.isPureReactComponent?!ed(L,V)||!ed(ee,re):!0}function kA(_,C,L){var V=!1,ee=Fl,re=C.contextType;return typeof re=="object"&&re!==null?re=Os(re):(ee=ss(C)?zh:$a.current,V=C.contextTypes,re=(V=V!=null)?ld(_,ee):Fl),C=new C(L,re),_.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Sg,_.stateNode=C,C._reactInternals=_,V&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=ee,_.__reactInternalMemoizedMaskedChildContext=re),C}function p_(_,C,L,V){_=C.state,typeof C.componentWillReceiveProps=="function"&&C.componentWillReceiveProps(L,V),typeof C.UNSAFE_componentWillReceiveProps=="function"&&C.UNSAFE_componentWillReceiveProps(L,V),C.state!==_&&Sg.enqueueReplaceState(C,C.state,null)}function Nb(_,C,L,V){var ee=_.stateNode;ee.props=L,ee.state=_.memoizedState,ee.refs={},qy(_);var re=C.contextType;typeof re=="object"&&re!==null?ee.context=Os(re):(re=ss(C)?zh:$a.current,ee.context=ld(_,re)),ee.state=_.memoizedState,re=C.getDerivedStateFromProps,typeof re=="function"&&(_g(_,C,re,L),ee.state=_.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof ee.getSnapshotBeforeUpdate=="function"||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(C=ee.state,typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount(),C!==ee.state&&Sg.enqueueReplaceState(ee,ee.state,null),dg(_,L,ee,V),ee.state=_.memoizedState),typeof ee.componentDidMount=="function"&&(_.flags|=4194308)}function vd(_,C){try{var L="",V=C;do L+=Z(V),V=V.return;while(V);var ee=L}catch(re){ee=`
Error generating stack: `+re.message+`
`+re.stack}return{value:_,source:C,stack:ee,digest:null}}function Ob(_,C,L){return{value:_,source:null,stack:L??null,digest:C??null}}function Cg(_,C){try{console.error(C.value)}catch(L){setTimeout(function(){throw L})}}var M4=typeof WeakMap=="function"?WeakMap:Map;function NA(_,C,L){L=Ul(-1,L),L.tag=3,L.payload={element:null};var V=C.value;return L.callback=function(){PA||(PA=!0,G4=V),Cg(_,C)},L}function D(_,C,L){L=Ul(-1,L),L.tag=3;var V=_.type.getDerivedStateFromError;if(typeof V=="function"){var ee=C.value;L.payload=function(){return V(ee)},L.callback=function(){Cg(_,C)}}var re=_.stateNode;return re!==null&&typeof re.componentDidCatch=="function"&&(L.callback=function(){Cg(_,C),typeof V!="function"&&(Tg===null?Tg=new Set([this]):Tg.add(this));var we=C.stack;this.componentDidCatch(C.value,{componentStack:we!==null?we:""})}),L}function N(_,C,L){var V=_.pingCache;if(V===null){V=_.pingCache=new M4;var ee=new Set;V.set(C,ee)}else ee=V.get(C),ee===void 0&&(ee=new Set,V.set(C,ee));ee.has(L)||(ee.add(L),_=oye.bind(null,_,C,L),C.then(_,_))}function $(_){do{var C;if((C=_.tag===13)&&(C=_.memoizedState,C=C!==null?C.dehydrated!==null:!0),C)return _;_=_.return}while(_!==null);return null}function Q(_,C,L,V,ee){return(_.mode&1)===0?(_===C?_.flags|=65536:(_.flags|=128,L.flags|=131072,L.flags&=-52805,L.tag===1&&(L.alternate===null?L.tag=17:(C=Ul(-1,1),C.tag=2,Bl(L,C,1))),L.lanes|=1),_):(_.flags|=65536,_.lanes=ee,_)}var te=w.ReactCurrentOwner,oe=!1;function ke(_,C,L,V){C.child=_===null?au(C,null,L,V):gd(C,_.child,L,V)}function Xe(_,C,L,V,ee){L=L.render;var re=C.ref;return Nc(C,ee),V=yg(_,C,L,V,re,ee),L=vg(),_!==null&&!oe?(C.updateQueue=_.updateQueue,C.flags&=-2053,_.lanes&=~ee,cs(_,C,ee)):(Sr&&L&&lg(C),C.flags|=1,ke(_,C,V,ee),C.child)}function ut(_,C,L,V,ee){if(_===null){var re=L.type;return typeof re=="function"&&!e5(re)&&re.defaultProps===void 0&&L.compare===null&&L.defaultProps===void 0?(C.tag=15,C.type=re,Dt(_,C,re,V,ee)):(_=WA(L.type,null,V,C,C.mode,ee),_.ref=C.ref,_.return=C,C.child=_)}if(re=_.child,(_.lanes&ee)===0){var we=re.memoizedProps;if(L=L.compare,L=L!==null?L:ed,L(we,V)&&_.ref===C.ref)return cs(_,C,ee)}return C.flags|=1,_=Ng(re,V),_.ref=C.ref,_.return=C,C.child=_}function Dt(_,C,L,V,ee){if(_!==null){var re=_.memoizedProps;if(ed(re,V)&&_.ref===C.ref)if(oe=!1,C.pendingProps=V=re,(_.lanes&ee)!==0)(_.flags&131072)!==0&&(oe=!0);else return C.lanes=_.lanes,cs(_,C,ee)}return Lt(_,C,L,V,ee)}function Gt(_,C,L){var V=C.pendingProps,ee=V.children,re=_!==null?_.memoizedState:null;if(V.mode==="hidden")if((C.mode&1)===0)C.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(Ib,Vu),Vu|=L;else{if((L&1073741824)===0)return _=re!==null?re.baseLanes|L:L,C.lanes=C.childLanes=1073741824,C.memoizedState={baseLanes:_,cachePool:null,transitions:null},C.updateQueue=null,jr(Ib,Vu),Vu|=_,null;C.memoizedState={baseLanes:0,cachePool:null,transitions:null},V=re!==null?re.baseLanes:L,jr(Ib,Vu),Vu|=V}else re!==null?(V=re.baseLanes|L,C.memoizedState=null):V=L,jr(Ib,Vu),Vu|=V;return ke(_,C,ee,L),C.child}function En(_,C){var L=C.ref;(_===null&&L!==null||_!==null&&_.ref!==L)&&(C.flags|=512,C.flags|=2097152)}function Lt(_,C,L,V,ee){var re=ss(L)?zh:$a.current;return re=ld(C,re),Nc(C,ee),L=yg(_,C,L,V,re,ee),V=vg(),_!==null&&!oe?(C.updateQueue=_.updateQueue,C.flags&=-2053,_.lanes&=~ee,cs(_,C,ee)):(Sr&&V&&lg(C),C.flags|=1,ke(_,C,L,ee),C.child)}function Jr(_,C,L,V,ee){if(ss(L)){var re=!0;cd(C)}else re=!1;if(Nc(C,ee),C.stateNode===null)Qn(_,C),kA(C,L,V),Nb(C,L,V,ee),V=!0;else if(_===null){var we=C.stateNode,Me=C.memoizedProps;we.props=Me;var qe=we.context,ot=L.contextType;typeof ot=="object"&&ot!==null?ot=Os(ot):(ot=ss(L)?zh:$a.current,ot=ld(C,ot));var Ct=L.getDerivedStateFromProps,Tt=typeof Ct=="function"||typeof we.getSnapshotBeforeUpdate=="function";Tt||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(Me!==V||qe!==ot)&&p_(C,we,V,ot),Ml=!1;var _t=C.memoizedState;we.state=_t,dg(C,V,we,ee),qe=C.memoizedState,Me!==V||_t!==qe||as.current||Ml?(typeof Ct=="function"&&(_g(C,L,Ct,V),qe=C.memoizedState),(Me=Ml||kb(C,L,Me,V,_t,qe,ot))?(Tt||typeof we.UNSAFE_componentWillMount!="function"&&typeof we.componentWillMount!="function"||(typeof we.componentWillMount=="function"&&we.componentWillMount(),typeof we.UNSAFE_componentWillMount=="function"&&we.UNSAFE_componentWillMount()),typeof we.componentDidMount=="function"&&(C.flags|=4194308)):(typeof we.componentDidMount=="function"&&(C.flags|=4194308),C.memoizedProps=V,C.memoizedState=qe),we.props=V,we.state=qe,we.context=ot,V=Me):(typeof we.componentDidMount=="function"&&(C.flags|=4194308),V=!1)}else{we=C.stateNode,xb(_,C),Me=C.memoizedProps,ot=C.type===C.elementType?Me:qa(C.type,Me),we.props=ot,Tt=C.pendingProps,_t=we.context,qe=L.contextType,typeof qe=="object"&&qe!==null?qe=Os(qe):(qe=ss(L)?zh:$a.current,qe=ld(C,qe));var Wt=L.getDerivedStateFromProps;(Ct=typeof Wt=="function"||typeof we.getSnapshotBeforeUpdate=="function")||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(Me!==Tt||_t!==qe)&&p_(C,we,V,qe),Ml=!1,_t=C.memoizedState,we.state=_t,dg(C,V,we,ee);var Zt=C.memoizedState;Me!==Tt||_t!==Zt||as.current||Ml?(typeof Wt=="function"&&(_g(C,L,Wt,V),Zt=C.memoizedState),(ot=Ml||kb(C,L,ot,V,_t,Zt,qe)||!1)?(Ct||typeof we.UNSAFE_componentWillUpdate!="function"&&typeof we.componentWillUpdate!="function"||(typeof we.componentWillUpdate=="function"&&we.componentWillUpdate(V,Zt,qe),typeof we.UNSAFE_componentWillUpdate=="function"&&we.UNSAFE_componentWillUpdate(V,Zt,qe)),typeof we.componentDidUpdate=="function"&&(C.flags|=4),typeof we.getSnapshotBeforeUpdate=="function"&&(C.flags|=1024)):(typeof we.componentDidUpdate!="function"||Me===_.memoizedProps&&_t===_.memoizedState||(C.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||Me===_.memoizedProps&&_t===_.memoizedState||(C.flags|=1024),C.memoizedProps=V,C.memoizedState=Zt),we.props=V,we.state=Zt,we.context=qe,V=ot):(typeof we.componentDidUpdate!="function"||Me===_.memoizedProps&&_t===_.memoizedState||(C.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||Me===_.memoizedProps&&_t===_.memoizedState||(C.flags|=1024),V=!1)}return Cr(_,C,L,V,re,ee)}function Cr(_,C,L,V,ee,re){En(_,C);var we=(C.flags&128)!==0;if(!V&&!we)return ee&&vA(C,L,!1),cs(_,C,re);V=C.stateNode,te.current=C;var Me=we&&typeof L.getDerivedStateFromError!="function"?null:V.render();return C.flags|=1,_!==null&&we?(C.child=gd(C,_.child,null,re),C.child=gd(C,null,Me,re)):ke(_,C,Me,re),C.memoizedState=V.state,ee&&vA(C,L,!0),C.child}function Is(_){var C=_.stateNode;C.pendingContext?n_(_,C.pendingContext,C.pendingContext!==C.context):C.context&&n_(_,C.context,!1),Vh(_,C.containerInfo)}function zl(_,C,L,V,ee){return pd(),Wy(ee),C.flags|=256,ke(_,C,L,V),C.child}var it={dehydrated:null,treeContext:null,retryLane:0};function Ye(_){return{baseLanes:_,cachePool:null,transitions:null}}function lt(_,C,L){var V=C.pendingProps,ee=Zr.current,re=!1,we=(C.flags&128)!==0,Me;if((Me=we)||(Me=_!==null&&_.memoizedState===null?!1:(ee&2)!==0),Me?(re=!0,C.flags&=-129):(_===null||_.memoizedState!==null)&&(ee|=1),jr(Zr,ee&1),_===null)return cg(C),_=C.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?((C.mode&1)===0?C.lanes=1:_.data==="$!"?C.lanes=8:C.lanes=1073741824,null):(we=V.children,_=V.fallback,re?(V=C.mode,re=C.child,we={mode:"hidden",children:we},(V&1)===0&&re!==null?(re.childLanes=0,re.pendingProps=we):re=jA(we,V,0,null),_=Zy(_,V,L,null),re.return=C,_.return=C,re.sibling=_,C.child=re,C.child.memoizedState=Ye(L),C.memoizedState=it,_):Ut(C,we));if(ee=_.memoizedState,ee!==null&&(Me=ee.dehydrated,Me!==null))return Fn(_,C,we,V,Me,ee,L);if(re){re=V.fallback,we=C.mode,ee=_.child,Me=ee.sibling;var qe={mode:"hidden",children:V.children};return(we&1)===0&&C.child!==ee?(V=C.child,V.childLanes=0,V.pendingProps=qe,C.deletions=null):(V=Ng(ee,qe),V.subtreeFlags=ee.subtreeFlags&14680064),Me!==null?re=Ng(Me,re):(re=Zy(re,we,L,null),re.flags|=2),re.return=C,V.return=C,V.sibling=re,C.child=V,V=re,re=C.child,we=_.child.memoizedState,we=we===null?Ye(L):{baseLanes:we.baseLanes|L,cachePool:null,transitions:we.transitions},re.memoizedState=we,re.childLanes=_.childLanes&~L,C.memoizedState=it,V}return re=_.child,_=re.sibling,V=Ng(re,{mode:"visible",children:V.children}),(C.mode&1)===0&&(V.lanes=L),V.return=C,V.sibling=null,_!==null&&(L=C.deletions,L===null?(C.deletions=[_],C.flags|=16):L.push(_)),C.child=V,C.memoizedState=null,V}function Ut(_,C){return C=jA({mode:"visible",children:C},_.mode,0,null),C.return=_,_.child=C}function fn(_,C,L,V){return V!==null&&Wy(V),gd(C,_.child,null,L),_=Ut(C,C.pendingProps.children),_.flags|=2,C.memoizedState=null,_}function Fn(_,C,L,V,ee,re,we){if(L)return C.flags&256?(C.flags&=-257,V=Ob(Error(t(422))),fn(_,C,we,V)):C.memoizedState!==null?(C.child=_.child,C.flags|=128,null):(re=V.fallback,ee=C.mode,V=jA({mode:"visible",children:V.children},ee,0,null),re=Zy(re,ee,we,null),re.flags|=2,V.return=C,re.return=C,V.sibling=re,C.child=V,(C.mode&1)!==0&&gd(C,_.child,null,we),C.child.memoizedState=Ye(we),C.memoizedState=it,re);if((C.mode&1)===0)return fn(_,C,we,null);if(ee.data==="$!"){if(V=ee.nextSibling&&ee.nextSibling.dataset,V)var Me=V.dgst;return V=Me,re=Error(t(419)),V=Ob(re,V,void 0),fn(_,C,we,V)}if(Me=(we&_.childLanes)!==0,oe||Me){if(V=hs,V!==null){switch(we&-we){case 4:ee=2;break;case 16:ee=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ee=32;break;case 536870912:ee=268435456;break;default:ee=0}ee=(ee&(V.suspendedLanes|we))!==0?0:ee,ee!==0&&ee!==re.retryLane&&(re.retryLane=ee,Fo(_,ee),Lc(V,_,ee,-1))}return J4(),V=Ob(Error(t(421))),fn(_,C,we,V)}return ee.data==="$?"?(C.flags|=128,C.child=_.child,C=uye.bind(null,_),ee._reactRetry=C,null):(_=re.treeContext,It=Rl(ee.nextSibling),Oo=C,Sr=!0,Ro=null,_!==null&&(ks[Ns++]=No,ks[Ns++]=vi,ks[Ns++]=qh,No=_.id,vi=_.overflow,qh=C),C=Ut(C,V.children),C.flags|=4096,C)}function Tn(_,C,L){_.lanes|=C;var V=_.alternate;V!==null&&(V.lanes|=C),wb(_.return,C,L)}function tr(_,C,L,V,ee){var re=_.memoizedState;re===null?_.memoizedState={isBackwards:C,rendering:null,renderingStartTime:0,last:V,tail:L,tailMode:ee}:(re.isBackwards=C,re.rendering=null,re.renderingStartTime=0,re.last=V,re.tail=L,re.tailMode=ee)}function ca(_,C,L){var V=C.pendingProps,ee=V.revealOrder,re=V.tail;if(ke(_,C,V.children,L),V=Zr.current,(V&2)!==0)V=V&1|2,C.flags|=128;else{if(_!==null&&(_.flags&128)!==0)e:for(_=C.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&Tn(_,L,C);else if(_.tag===19)Tn(_,L,C);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===C)break e;for(;_.sibling===null;){if(_.return===null||_.return===C)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}V&=1}if(jr(Zr,V),(C.mode&1)===0)C.memoizedState=null;else switch(ee){case"forwards":for(L=C.child,ee=null;L!==null;)_=L.alternate,_!==null&&gg(_)===null&&(ee=L),L=L.sibling;L=ee,L===null?(ee=C.child,C.child=null):(ee=L.sibling,L.sibling=null),tr(C,!1,ee,L,re);break;case"backwards":for(L=null,ee=C.child,C.child=null;ee!==null;){if(_=ee.alternate,_!==null&&gg(_)===null){C.child=ee;break}_=ee.sibling,ee.sibling=L,L=ee,ee=_}tr(C,!0,L,null,re);break;case"together":tr(C,!1,null,null,void 0);break;default:C.memoizedState=null}return C.child}function Qn(_,C){(C.mode&1)===0&&_!==null&&(_.alternate=null,C.alternate=null,C.flags|=2)}function cs(_,C,L){if(_!==null&&(C.dependencies=_.dependencies),Xy|=C.lanes,(L&C.childLanes)===0)return null;if(_!==null&&C.child!==_.child)throw Error(t(153));if(C.child!==null){for(_=C.child,L=Ng(_,_.pendingProps),C.child=L,L.return=C;_.sibling!==null;)_=_.sibling,L=L.sibling=Ng(_,_.pendingProps),L.return=C;L.sibling=null}return C.child}function U4(_,C,L){switch(C.tag){case 3:Is(C),pd();break;case 5:pg(C);break;case 1:ss(C.type)&&cd(C);break;case 4:Vh(C,C.stateNode.containerInfo);break;case 10:var V=C.type._context,ee=C.memoizedProps.value;jr(jy,V._currentValue),V._currentValue=ee;break;case 13:if(V=C.memoizedState,V!==null)return V.dehydrated!==null?(jr(Zr,Zr.current&1),C.flags|=128,null):(L&C.child.childLanes)!==0?lt(_,C,L):(jr(Zr,Zr.current&1),_=cs(_,C,L),_!==null?_.sibling:null);jr(Zr,Zr.current&1);break;case 19:if(V=(L&C.childLanes)!==0,(_.flags&128)!==0){if(V)return ca(_,C,L);C.flags|=128}if(ee=C.memoizedState,ee!==null&&(ee.rendering=null,ee.tail=null,ee.lastEffect=null),jr(Zr,Zr.current),V)break;return null;case 22:case 23:return C.lanes=0,Gt(_,C,L)}return cs(_,C,L)}var Ej,B4,Tj,Dj;Ej=function(_,C){for(var L=C.child;L!==null;){if(L.tag===5||L.tag===6)_.appendChild(L.stateNode);else if(L.tag!==4&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===C)break;for(;L.sibling===null;){if(L.return===null||L.return===C)return;L=L.return}L.sibling.return=L.return,L=L.sibling}},B4=function(){},Tj=function(_,C,L,V){var ee=_.memoizedProps;if(ee!==V){_=C.stateNode,ua($r.current);var re=null;switch(L){case"input":ee=G(_,ee),V=G(_,V),re=[];break;case"select":ee=j({},ee,{value:void 0}),V=j({},V,{value:void 0}),re=[];break;case"textarea":ee=ue(_,ee),V=ue(_,V),re=[];break;default:typeof ee.onClick!="function"&&typeof V.onClick=="function"&&(_.onclick=sd)}Ot(L,V);var we;L=null;for(ot in ee)if(!V.hasOwnProperty(ot)&&ee.hasOwnProperty(ot)&&ee[ot]!=null)if(ot==="style"){var Me=ee[ot];for(we in Me)Me.hasOwnProperty(we)&&(L||(L={}),L[we]="")}else ot!=="dangerouslySetInnerHTML"&&ot!=="children"&&ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&ot!=="autoFocus"&&(i.hasOwnProperty(ot)?re||(re=[]):(re=re||[]).push(ot,null));for(ot in V){var qe=V[ot];if(Me=ee!=null?ee[ot]:void 0,V.hasOwnProperty(ot)&&qe!==Me&&(qe!=null||Me!=null))if(ot==="style")if(Me){for(we in Me)!Me.hasOwnProperty(we)||qe&&qe.hasOwnProperty(we)||(L||(L={}),L[we]="");for(we in qe)qe.hasOwnProperty(we)&&Me[we]!==qe[we]&&(L||(L={}),L[we]=qe[we])}else L||(re||(re=[]),re.push(ot,L)),L=qe;else ot==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,Me=Me?Me.__html:void 0,qe!=null&&Me!==qe&&(re=re||[]).push(ot,qe)):ot==="children"?typeof qe!="string"&&typeof qe!="number"||(re=re||[]).push(ot,""+qe):ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&(i.hasOwnProperty(ot)?(qe!=null&&ot==="onScroll"&&Yr("scroll",_),re||Me===qe||(re=[])):(re=re||[]).push(ot,qe))}L&&(re=re||[]).push("style",L);var ot=re;(C.updateQueue=ot)&&(C.flags|=4)}},Dj=function(_,C,L,V){L!==V&&(C.flags|=4)};function g_(_,C){if(!Sr)switch(_.tailMode){case"hidden":C=_.tail;for(var L=null;C!==null;)C.alternate!==null&&(L=C),C=C.sibling;L===null?_.tail=null:L.sibling=null;break;case"collapsed":L=_.tail;for(var V=null;L!==null;)L.alternate!==null&&(V=L),L=L.sibling;V===null?C||_.tail===null?_.tail=null:_.tail.sibling=null:V.sibling=null}}function eo(_){var C=_.alternate!==null&&_.alternate.child===_.child,L=0,V=0;if(C)for(var ee=_.child;ee!==null;)L|=ee.lanes|ee.childLanes,V|=ee.subtreeFlags&14680064,V|=ee.flags&14680064,ee.return=_,ee=ee.sibling;else for(ee=_.child;ee!==null;)L|=ee.lanes|ee.childLanes,V|=ee.subtreeFlags,V|=ee.flags,ee.return=_,ee=ee.sibling;return _.subtreeFlags|=V,_.childLanes=L,C}function Qme(_,C,L){var V=C.pendingProps;switch(Ea(C),C.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return eo(C),null;case 1:return ss(C.type)&&og(),eo(C),null;case 3:return V=C.stateNode,wi(),Qr(as),Qr($a),os(),V.pendingContext&&(V.context=V.pendingContext,V.pendingContext=null),(_===null||_.child===null)&&(zy(C)?C.flags|=4:_===null||_.memoizedState.isDehydrated&&(C.flags&256)===0||(C.flags|=1024,Ro!==null&&(Y4(Ro),Ro=null))),B4(_,C),eo(C),null;case 5:Oc(C);var ee=ua(Vi.current);if(L=C.type,_!==null&&C.stateNode!=null)Tj(_,C,L,V,ee),_.ref!==C.ref&&(C.flags|=512,C.flags|=2097152);else{if(!V){if(C.stateNode===null)throw Error(t(166));return eo(C),null}if(_=ua($r.current),zy(C)){V=C.stateNode,L=C.type;var re=C.memoizedProps;switch(V[iu]=C,V[My]=re,_=(C.mode&1)!==0,L){case"dialog":Yr("cancel",V),Yr("close",V);break;case"iframe":case"object":case"embed":Yr("load",V);break;case"video":case"audio":for(ee=0;ee<Mh.length;ee++)Yr(Mh[ee],V);break;case"source":Yr("error",V);break;case"img":case"image":case"link":Yr("error",V),Yr("load",V);break;case"details":Yr("toggle",V);break;case"input":de(V,re),Yr("invalid",V);break;case"select":V._wrapperState={wasMultiple:!!re.multiple},Yr("invalid",V);break;case"textarea":me(V,re),Yr("invalid",V)}Ot(L,re),ee=null;for(var we in re)if(re.hasOwnProperty(we)){var Me=re[we];we==="children"?typeof Me=="string"?V.textContent!==Me&&(re.suppressHydrationWarning!==!0&&Py(V.textContent,Me,_),ee=["children",Me]):typeof Me=="number"&&V.textContent!==""+Me&&(re.suppressHydrationWarning!==!0&&Py(V.textContent,Me,_),ee=["children",""+Me]):i.hasOwnProperty(we)&&Me!=null&&we==="onScroll"&&Yr("scroll",V)}switch(L){case"input":ge(V),ne(V,re,!0);break;case"textarea":ge(V),Re(V);break;case"select":case"option":break;default:typeof re.onClick=="function"&&(V.onclick=sd)}V=ee,C.updateQueue=V,V!==null&&(C.flags|=4)}else{we=ee.nodeType===9?ee:ee.ownerDocument,_==="http://www.w3.org/1999/xhtml"&&(_=je(L)),_==="http://www.w3.org/1999/xhtml"?L==="script"?(_=we.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild)):typeof V.is=="string"?_=we.createElement(L,{is:V.is}):(_=we.createElement(L),L==="select"&&(we=_,V.multiple?we.multiple=!0:V.size&&(we.size=V.size))):_=we.createElementNS(_,L),_[iu]=C,_[My]=V,Ej(_,C,!1,!1),C.stateNode=_;e:{switch(we=dn(L,V),L){case"dialog":Yr("cancel",_),Yr("close",_),ee=V;break;case"iframe":case"object":case"embed":Yr("load",_),ee=V;break;case"video":case"audio":for(ee=0;ee<Mh.length;ee++)Yr(Mh[ee],_);ee=V;break;case"source":Yr("error",_),ee=V;break;case"img":case"image":case"link":Yr("error",_),Yr("load",_),ee=V;break;case"details":Yr("toggle",_),ee=V;break;case"input":de(_,V),ee=G(_,V),Yr("invalid",_);break;case"option":ee=V;break;case"select":_._wrapperState={wasMultiple:!!V.multiple},ee=j({},V,{value:void 0}),Yr("invalid",_);break;case"textarea":me(_,V),ee=ue(_,V),Yr("invalid",_);break;default:ee=V}Ot(L,ee),Me=ee;for(re in Me)if(Me.hasOwnProperty(re)){var qe=Me[re];re==="style"?Et(_,qe):re==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,qe!=null&&yt(_,qe)):re==="children"?typeof qe=="string"?(L!=="textarea"||qe!=="")&&pt(_,qe):typeof qe=="number"&&pt(_,""+qe):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(i.hasOwnProperty(re)?qe!=null&&re==="onScroll"&&Yr("scroll",_):qe!=null&&b(_,re,qe,we))}switch(L){case"input":ge(_),ne(_,V,!1);break;case"textarea":ge(_),Re(_);break;case"option":V.value!=null&&_.setAttribute("value",""+ae(V.value));break;case"select":_.multiple=!!V.multiple,re=V.value,re!=null?Ae(_,!!V.multiple,re,!1):V.defaultValue!=null&&Ae(_,!!V.multiple,V.defaultValue,!0);break;default:typeof ee.onClick=="function"&&(_.onclick=sd)}switch(L){case"button":case"input":case"select":case"textarea":V=!!V.autoFocus;break e;case"img":V=!0;break e;default:V=!1}}V&&(C.flags|=4)}C.ref!==null&&(C.flags|=512,C.flags|=2097152)}return eo(C),null;case 6:if(_&&C.stateNode!=null)Dj(_,C,_.memoizedProps,V);else{if(typeof V!="string"&&C.stateNode===null)throw Error(t(166));if(L=ua(Vi.current),ua($r.current),zy(C)){if(V=C.stateNode,L=C.memoizedProps,V[iu]=C,(re=V.nodeValue!==L)&&(_=Oo,_!==null))switch(_.tag){case 3:Py(V.nodeValue,L,(_.mode&1)!==0);break;case 5:_.memoizedProps.suppressHydrationWarning!==!0&&Py(V.nodeValue,L,(_.mode&1)!==0)}re&&(C.flags|=4)}else V=(L.nodeType===9?L:L.ownerDocument).createTextNode(V),V[iu]=C,C.stateNode=V}return eo(C),null;case 13:if(Qr(Zr),V=C.memoizedState,_===null||_.memoizedState!==null&&_.memoizedState.dehydrated!==null){if(Sr&&It!==null&&(C.mode&1)!==0&&(C.flags&128)===0)i_(),pd(),C.flags|=98560,re=!1;else if(re=zy(C),V!==null&&V.dehydrated!==null){if(_===null){if(!re)throw Error(t(318));if(re=C.memoizedState,re=re!==null?re.dehydrated:null,!re)throw Error(t(317));re[iu]=C}else pd(),(C.flags&128)===0&&(C.memoizedState=null),C.flags|=4;eo(C),re=!1}else Ro!==null&&(Y4(Ro),Ro=null),re=!0;if(!re)return C.flags&65536?C:null}return(C.flags&128)!==0?(C.lanes=L,C):(V=V!==null,V!==(_!==null&&_.memoizedState!==null)&&V&&(C.child.flags|=8192,(C.mode&1)!==0&&(_===null||(Zr.current&1)!==0?Va===0&&(Va=3):J4())),C.updateQueue!==null&&(C.flags|=4),eo(C),null);case 4:return wi(),B4(_,C),_===null&&id(C.stateNode.containerInfo),eo(C),null;case 10:return bb(C.type._context),eo(C),null;case 17:return ss(C.type)&&og(),eo(C),null;case 19:if(Qr(Zr),re=C.memoizedState,re===null)return eo(C),null;if(V=(C.flags&128)!==0,we=re.rendering,we===null)if(V)g_(re,!1);else{if(Va!==0||_!==null&&(_.flags&128)!==0)for(_=C.child;_!==null;){if(we=gg(_),we!==null){for(C.flags|=128,g_(re,!1),V=we.updateQueue,V!==null&&(C.updateQueue=V,C.flags|=4),C.subtreeFlags=0,V=L,L=C.child;L!==null;)re=L,_=V,re.flags&=14680066,we=re.alternate,we===null?(re.childLanes=0,re.lanes=_,re.child=null,re.subtreeFlags=0,re.memoizedProps=null,re.memoizedState=null,re.updateQueue=null,re.dependencies=null,re.stateNode=null):(re.childLanes=we.childLanes,re.lanes=we.lanes,re.child=we.child,re.subtreeFlags=0,re.deletions=null,re.memoizedProps=we.memoizedProps,re.memoizedState=we.memoizedState,re.updateQueue=we.updateQueue,re.type=we.type,_=we.dependencies,re.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),L=L.sibling;return jr(Zr,Zr.current&1|2),C.child}_=_.sibling}re.tail!==null&&_r()>Fb&&(C.flags|=128,V=!0,g_(re,!1),C.lanes=4194304)}else{if(!V)if(_=gg(we),_!==null){if(C.flags|=128,V=!0,L=_.updateQueue,L!==null&&(C.updateQueue=L,C.flags|=4),g_(re,!0),re.tail===null&&re.tailMode==="hidden"&&!we.alternate&&!Sr)return eo(C),null}else 2*_r()-re.renderingStartTime>Fb&&L!==1073741824&&(C.flags|=128,V=!0,g_(re,!1),C.lanes=4194304);re.isBackwards?(we.sibling=C.child,C.child=we):(L=re.last,L!==null?L.sibling=we:C.child=we,re.last=we)}return re.tail!==null?(C=re.tail,re.rendering=C,re.tail=C.sibling,re.renderingStartTime=_r(),C.sibling=null,L=Zr.current,jr(Zr,V?L&1|2:L&1),C):(eo(C),null);case 22:case 23:return Z4(),V=C.memoizedState!==null,_!==null&&_.memoizedState!==null!==V&&(C.flags|=8192),V&&(C.mode&1)!==0?(Vu&1073741824)!==0&&(eo(C),C.subtreeFlags&6&&(C.flags|=8192)):eo(C),null;case 24:return null;case 25:return null}throw Error(t(156,C.tag))}function Zme(_,C){switch(Ea(C),C.tag){case 1:return ss(C.type)&&og(),_=C.flags,_&65536?(C.flags=_&-65537|128,C):null;case 3:return wi(),Qr(as),Qr($a),os(),_=C.flags,(_&65536)!==0&&(_&128)===0?(C.flags=_&-65537|128,C):null;case 5:return Oc(C),null;case 13:if(Qr(Zr),_=C.memoizedState,_!==null&&_.dehydrated!==null){if(C.alternate===null)throw Error(t(340));pd()}return _=C.flags,_&65536?(C.flags=_&-65537|128,C):null;case 19:return Qr(Zr),null;case 4:return wi(),null;case 10:return bb(C.type._context),null;case 22:case 23:return Z4(),null;case 24:return null;default:return null}}var OA=!1,to=!1,Jme=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function Rb(_,C){var L=_.ref;if(L!==null)if(typeof L=="function")try{L(null)}catch(V){Zi(_,C,V)}else L.current=null}function z4(_,C,L){try{L()}catch(V){Zi(_,C,V)}}var Aj=!1;function eye(_,C){if(Zx=V1,_=sa(),rg(_)){if("selectionStart"in _)var L={start:_.selectionStart,end:_.selectionEnd};else e:{L=(L=_.ownerDocument)&&L.defaultView||window;var V=L.getSelection&&L.getSelection();if(V&&V.rangeCount!==0){L=V.anchorNode;var ee=V.anchorOffset,re=V.focusNode;V=V.focusOffset;try{L.nodeType,re.nodeType}catch{L=null;break e}var we=0,Me=-1,qe=-1,ot=0,Ct=0,Tt=_,_t=null;t:for(;;){for(var Wt;Tt!==L||ee!==0&&Tt.nodeType!==3||(Me=we+ee),Tt!==re||V!==0&&Tt.nodeType!==3||(qe=we+V),Tt.nodeType===3&&(we+=Tt.nodeValue.length),(Wt=Tt.firstChild)!==null;)_t=Tt,Tt=Wt;for(;;){if(Tt===_)break t;if(_t===L&&++ot===ee&&(Me=we),_t===re&&++Ct===V&&(qe=we),(Wt=Tt.nextSibling)!==null)break;Tt=_t,_t=Tt.parentNode}Tt=Wt}L=Me===-1||qe===-1?null:{start:Me,end:qe}}else L=null}L=L||{start:0,end:0}}else L=null;for(Jx={focusedElem:_,selectionRange:L},V1=!1,Kt=C;Kt!==null;)if(C=Kt,_=C.child,(C.subtreeFlags&1028)!==0&&_!==null)_.return=C,Kt=_;else for(;Kt!==null;){C=Kt;try{var Zt=C.alternate;if((C.flags&1024)!==0)switch(C.tag){case 0:case 11:case 15:break;case 1:if(Zt!==null){var sn=Zt.memoizedProps,ha=Zt.memoizedState,Qe=C.stateNode,He=Qe.getSnapshotBeforeUpdate(C.elementType===C.type?sn:qa(C.type,sn),ha);Qe.__reactInternalSnapshotBeforeUpdate=He}break;case 3:var Je=C.stateNode.containerInfo;Je.nodeType===1?Je.textContent="":Je.nodeType===9&&Je.documentElement&&Je.removeChild(Je.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(At){Zi(C,C.return,At)}if(_=C.sibling,_!==null){_.return=C.return,Kt=_;break}Kt=C.return}return Zt=Aj,Aj=!1,Zt}function m_(_,C,L){var V=C.updateQueue;if(V=V!==null?V.lastEffect:null,V!==null){var ee=V=V.next;do{if((ee.tag&_)===_){var re=ee.destroy;ee.destroy=void 0,re!==void 0&&z4(C,L,re)}ee=ee.next}while(ee!==V)}}function RA(_,C){if(C=C.updateQueue,C=C!==null?C.lastEffect:null,C!==null){var L=C=C.next;do{if((L.tag&_)===_){var V=L.create;L.destroy=V()}L=L.next}while(L!==C)}}function W4(_){var C=_.ref;if(C!==null){var L=_.stateNode;switch(_.tag){case 5:_=L;break;default:_=L}typeof C=="function"?C(_):C.current=_}}function kj(_){var C=_.alternate;C!==null&&(_.alternate=null,kj(C)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(C=_.stateNode,C!==null&&(delete C[iu],delete C[My],delete C[hb],delete C[mA],delete C[yA])),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function Nj(_){return _.tag===5||_.tag===3||_.tag===4}function Oj(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||Nj(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function j4(_,C,L){var V=_.tag;if(V===5||V===6)_=_.stateNode,C?L.nodeType===8?L.parentNode.insertBefore(_,C):L.insertBefore(_,C):(L.nodeType===8?(C=L.parentNode,C.insertBefore(_,L)):(C=L,C.appendChild(_)),L=L._reactRootContainer,L!=null||C.onclick!==null||(C.onclick=sd));else if(V!==4&&(_=_.child,_!==null))for(j4(_,C,L),_=_.sibling;_!==null;)j4(_,C,L),_=_.sibling}function $4(_,C,L){var V=_.tag;if(V===5||V===6)_=_.stateNode,C?L.insertBefore(_,C):L.appendChild(_);else if(V!==4&&(_=_.child,_!==null))for($4(_,C,L),_=_.sibling;_!==null;)$4(_,C,L),_=_.sibling}var Fs=null,Fc=!1;function Eg(_,C,L){for(L=L.child;L!==null;)Rj(_,C,L),L=L.sibling}function Rj(_,C,L){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(wr,L)}catch{}switch(L.tag){case 5:to||Rb(L,C);case 6:var V=Fs,ee=Fc;Fs=null,Eg(_,C,L),Fs=V,Fc=ee,Fs!==null&&(Fc?(_=Fs,L=L.stateNode,_.nodeType===8?_.parentNode.removeChild(L):_.removeChild(L)):Fs.removeChild(L.stateNode));break;case 18:Fs!==null&&(Fc?(_=Fs,L=L.stateNode,_.nodeType===8?cb(_.parentNode,L):_.nodeType===1&&cb(_,L),Ys(_)):cb(Fs,L.stateNode));break;case 4:V=Fs,ee=Fc,Fs=L.stateNode.containerInfo,Fc=!0,Eg(_,C,L),Fs=V,Fc=ee;break;case 0:case 11:case 14:case 15:if(!to&&(V=L.updateQueue,V!==null&&(V=V.lastEffect,V!==null))){ee=V=V.next;do{var re=ee,we=re.destroy;re=re.tag,we!==void 0&&((re&2)!==0||(re&4)!==0)&&z4(L,C,we),ee=ee.next}while(ee!==V)}Eg(_,C,L);break;case 1:if(!to&&(Rb(L,C),V=L.stateNode,typeof V.componentWillUnmount=="function"))try{V.props=L.memoizedProps,V.state=L.memoizedState,V.componentWillUnmount()}catch(Me){Zi(L,C,Me)}Eg(_,C,L);break;case 21:Eg(_,C,L);break;case 22:L.mode&1?(to=(V=to)||L.memoizedState!==null,Eg(_,C,L),to=V):Eg(_,C,L);break;default:Eg(_,C,L)}}function Ij(_){var C=_.updateQueue;if(C!==null){_.updateQueue=null;var L=_.stateNode;L===null&&(L=_.stateNode=new Jme),C.forEach(function(V){var ee=lye.bind(null,_,V);L.has(V)||(L.add(V),V.then(ee,ee))})}}function Pc(_,C){var L=C.deletions;if(L!==null)for(var V=0;V<L.length;V++){var ee=L[V];try{var re=_,we=C,Me=we;e:for(;Me!==null;){switch(Me.tag){case 5:Fs=Me.stateNode,Fc=!1;break e;case 3:Fs=Me.stateNode.containerInfo,Fc=!0;break e;case 4:Fs=Me.stateNode.containerInfo,Fc=!0;break e}Me=Me.return}if(Fs===null)throw Error(t(160));Rj(re,we,ee),Fs=null,Fc=!1;var qe=ee.alternate;qe!==null&&(qe.return=null),ee.return=null}catch(ot){Zi(ee,C,ot)}}if(C.subtreeFlags&12854)for(C=C.child;C!==null;)Fj(C,_),C=C.sibling}function Fj(_,C){var L=_.alternate,V=_.flags;switch(_.tag){case 0:case 11:case 14:case 15:if(Pc(C,_),Yh(_),V&4){try{m_(3,_,_.return),RA(3,_)}catch(sn){Zi(_,_.return,sn)}try{m_(5,_,_.return)}catch(sn){Zi(_,_.return,sn)}}break;case 1:Pc(C,_),Yh(_),V&512&&L!==null&&Rb(L,L.return);break;case 5:if(Pc(C,_),Yh(_),V&512&&L!==null&&Rb(L,L.return),_.flags&32){var ee=_.stateNode;try{pt(ee,"")}catch(sn){Zi(_,_.return,sn)}}if(V&4&&(ee=_.stateNode,ee!=null)){var re=_.memoizedProps,we=L!==null?L.memoizedProps:re,Me=_.type,qe=_.updateQueue;if(_.updateQueue=null,qe!==null)try{Me==="input"&&re.type==="radio"&&re.name!=null&&ye(ee,re),dn(Me,we);var ot=dn(Me,re);for(we=0;we<qe.length;we+=2){var Ct=qe[we],Tt=qe[we+1];Ct==="style"?Et(ee,Tt):Ct==="dangerouslySetInnerHTML"?yt(ee,Tt):Ct==="children"?pt(ee,Tt):b(ee,Ct,Tt,ot)}switch(Me){case"input":le(ee,re);break;case"textarea":Se(ee,re);break;case"select":var _t=ee._wrapperState.wasMultiple;ee._wrapperState.wasMultiple=!!re.multiple;var Wt=re.value;Wt!=null?Ae(ee,!!re.multiple,Wt,!1):_t!==!!re.multiple&&(re.defaultValue!=null?Ae(ee,!!re.multiple,re.defaultValue,!0):Ae(ee,!!re.multiple,re.multiple?[]:"",!1))}ee[My]=re}catch(sn){Zi(_,_.return,sn)}}break;case 6:if(Pc(C,_),Yh(_),V&4){if(_.stateNode===null)throw Error(t(162));ee=_.stateNode,re=_.memoizedProps;try{ee.nodeValue=re}catch(sn){Zi(_,_.return,sn)}}break;case 3:if(Pc(C,_),Yh(_),V&4&&L!==null&&L.memoizedState.isDehydrated)try{Ys(C.containerInfo)}catch(sn){Zi(_,_.return,sn)}break;case 4:Pc(C,_),Yh(_);break;case 13:Pc(C,_),Yh(_),ee=_.child,ee.flags&8192&&(re=ee.memoizedState!==null,ee.stateNode.isHidden=re,!re||ee.alternate!==null&&ee.alternate.memoizedState!==null||(H4=_r())),V&4&&Ij(_);break;case 22:if(Ct=L!==null&&L.memoizedState!==null,_.mode&1?(to=(ot=to)||Ct,Pc(C,_),to=ot):Pc(C,_),Yh(_),V&8192){if(ot=_.memoizedState!==null,(_.stateNode.isHidden=ot)&&!Ct&&(_.mode&1)!==0)for(Kt=_,Ct=_.child;Ct!==null;){for(Tt=Kt=Ct;Kt!==null;){switch(_t=Kt,Wt=_t.child,_t.tag){case 0:case 11:case 14:case 15:m_(4,_t,_t.return);break;case 1:Rb(_t,_t.return);var Zt=_t.stateNode;if(typeof Zt.componentWillUnmount=="function"){V=_t,L=_t.return;try{C=V,Zt.props=C.memoizedProps,Zt.state=C.memoizedState,Zt.componentWillUnmount()}catch(sn){Zi(V,L,sn)}}break;case 5:Rb(_t,_t.return);break;case 22:if(_t.memoizedState!==null){Mj(Tt);continue}}Wt!==null?(Wt.return=_t,Kt=Wt):Mj(Tt)}Ct=Ct.sibling}e:for(Ct=null,Tt=_;;){if(Tt.tag===5){if(Ct===null){Ct=Tt;try{ee=Tt.stateNode,ot?(re=ee.style,typeof re.setProperty=="function"?re.setProperty("display","none","important"):re.display="none"):(Me=Tt.stateNode,qe=Tt.memoizedProps.style,we=qe!=null&&qe.hasOwnProperty("display")?qe.display:null,Me.style.display=ft("display",we))}catch(sn){Zi(_,_.return,sn)}}}else if(Tt.tag===6){if(Ct===null)try{Tt.stateNode.nodeValue=ot?"":Tt.memoizedProps}catch(sn){Zi(_,_.return,sn)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===_)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===_)break e;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===_)break e;Ct===Tt&&(Ct=null),Tt=Tt.return}Ct===Tt&&(Ct=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}break;case 19:Pc(C,_),Yh(_),V&4&&Ij(_);break;case 21:break;default:Pc(C,_),Yh(_)}}function Yh(_){var C=_.flags;if(C&2){try{e:{for(var L=_.return;L!==null;){if(Nj(L)){var V=L;break e}L=L.return}throw Error(t(160))}switch(V.tag){case 5:var ee=V.stateNode;V.flags&32&&(pt(ee,""),V.flags&=-33);var re=Oj(_);$4(_,re,ee);break;case 3:case 4:var we=V.stateNode.containerInfo,Me=Oj(_);j4(_,Me,we);break;default:throw Error(t(161))}}catch(qe){Zi(_,_.return,qe)}_.flags&=-3}C&4096&&(_.flags&=-4097)}function tye(_,C,L){Kt=_,Pj(_)}function Pj(_,C,L){for(var V=(_.mode&1)!==0;Kt!==null;){var ee=Kt,re=ee.child;if(ee.tag===22&&V){var we=ee.memoizedState!==null||OA;if(!we){var Me=ee.alternate,qe=Me!==null&&Me.memoizedState!==null||to;Me=OA;var ot=to;if(OA=we,(to=qe)&&!ot)for(Kt=ee;Kt!==null;)we=Kt,qe=we.child,we.tag===22&&we.memoizedState!==null?Uj(ee):qe!==null?(qe.return=we,Kt=qe):Uj(ee);for(;re!==null;)Kt=re,Pj(re),re=re.sibling;Kt=ee,OA=Me,to=ot}Lj(_)}else(ee.subtreeFlags&8772)!==0&&re!==null?(re.return=ee,Kt=re):Lj(_)}}function Lj(_){for(;Kt!==null;){var C=Kt;if((C.flags&8772)!==0){var L=C.alternate;try{if((C.flags&8772)!==0)switch(C.tag){case 0:case 11:case 15:to||RA(5,C);break;case 1:var V=C.stateNode;if(C.flags&4&&!to)if(L===null)V.componentDidMount();else{var ee=C.elementType===C.type?L.memoizedProps:qa(C.type,L.memoizedProps);V.componentDidUpdate(ee,L.memoizedState,V.__reactInternalSnapshotBeforeUpdate)}var re=C.updateQueue;re!==null&&Ri(C,re,V);break;case 3:var we=C.updateQueue;if(we!==null){if(L=null,C.child!==null)switch(C.child.tag){case 5:L=C.child.stateNode;break;case 1:L=C.child.stateNode}Ri(C,we,L)}break;case 5:var Me=C.stateNode;if(L===null&&C.flags&4){L=Me;var qe=C.memoizedProps;switch(C.type){case"button":case"input":case"select":case"textarea":qe.autoFocus&&L.focus();break;case"img":qe.src&&(L.src=qe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(C.memoizedState===null){var ot=C.alternate;if(ot!==null){var Ct=ot.memoizedState;if(Ct!==null){var Tt=Ct.dehydrated;Tt!==null&&Ys(Tt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}to||C.flags&512&&W4(C)}catch(_t){Zi(C,C.return,_t)}}if(C===_){Kt=null;break}if(L=C.sibling,L!==null){L.return=C.return,Kt=L;break}Kt=C.return}}function Mj(_){for(;Kt!==null;){var C=Kt;if(C===_){Kt=null;break}var L=C.sibling;if(L!==null){L.return=C.return,Kt=L;break}Kt=C.return}}function Uj(_){for(;Kt!==null;){var C=Kt;try{switch(C.tag){case 0:case 11:case 15:var L=C.return;try{RA(4,C)}catch(qe){Zi(C,L,qe)}break;case 1:var V=C.stateNode;if(typeof V.componentDidMount=="function"){var ee=C.return;try{V.componentDidMount()}catch(qe){Zi(C,ee,qe)}}var re=C.return;try{W4(C)}catch(qe){Zi(C,re,qe)}break;case 5:var we=C.return;try{W4(C)}catch(qe){Zi(C,we,qe)}}}catch(qe){Zi(C,C.return,qe)}if(C===_){Kt=null;break}var Me=C.sibling;if(Me!==null){Me.return=C.return,Kt=Me;break}Kt=C.return}}var nye=Math.ceil,IA=w.ReactCurrentDispatcher,q4=w.ReactCurrentOwner,Wl=w.ReactCurrentBatchConfig,pr=0,hs=null,Ta=null,Ps=0,Vu=0,Ib=Ac(0),Va=0,y_=null,Xy=0,FA=0,V4=0,v_=null,ou=null,H4=0,Fb=1/0,bd=null,PA=!1,G4=null,Tg=null,LA=!1,Dg=null,MA=0,b_=0,X4=null,UA=-1,BA=0;function Lo(){return(pr&6)!==0?_r():UA!==-1?UA:UA=_r()}function Ag(_){return(_.mode&1)===0?1:(pr&2)!==0&&Ps!==0?Ps&-Ps:a_.transition!==null?(BA===0&&(BA=Nx()),BA):(_=lr,_!==0||(_=window.event,_=_===void 0?16:JD(_.type)),_)}function Lc(_,C,L,V){if(50<b_)throw b_=0,X4=null,Error(t(185));_y(_,L,V),((pr&2)===0||_!==hs)&&(_===hs&&((pr&2)===0&&(FA|=L),Va===4&&kg(_,Ps)),uu(_,V),L===1&&pr===0&&(C.mode&1)===0&&(Fb=_r()+500,ug&&Wh()))}function uu(_,C){var L=_.callbackNode;XD(_,C);var V=Gf(_,_===hs?Ps:0);if(V===0)L!==null&&So(L),_.callbackNode=null,_.callbackPriority=0;else if(C=V&-V,_.callbackPriority!==C){if(L!=null&&So(L),C===1)_.tag===0?kc(zj.bind(null,_)):By(zj.bind(null,_)),pA(function(){(pr&6)===0&&Wh()}),L=null;else{switch(Sy(V)){case 1:L=eu;break;case 4:L=dr;break;case 16:L=Ti;break;case 536870912:L=Al;break;default:L=Ti}L=Xj(L,Bj.bind(null,_))}_.callbackPriority=C,_.callbackNode=L}}function Bj(_,C){if(UA=-1,BA=0,(pr&6)!==0)throw Error(t(327));var L=_.callbackNode;if(Pb()&&_.callbackNode!==L)return null;var V=Gf(_,_===hs?Ps:0);if(V===0)return null;if((V&30)!==0||(V&_.expiredLanes)!==0||C)C=zA(_,V);else{C=V;var ee=pr;pr|=2;var re=jj();(hs!==_||Ps!==C)&&(bd=null,Fb=_r()+500,Yy(_,C));do try{aye();break}catch(Me){Wj(_,Me)}while(!0);vb(),IA.current=re,pr=ee,Ta!==null?C=0:(hs=null,Ps=0,C=Va)}if(C!==0){if(C===2&&(ee=Vp(_),ee!==0&&(V=ee,C=K4(_,ee))),C===1)throw L=y_,Yy(_,0),kg(_,V),uu(_,_r()),L;if(C===6)kg(_,V);else{if(ee=_.current.alternate,(V&30)===0&&!rye(ee)&&(C=zA(_,V),C===2&&(re=Vp(_),re!==0&&(V=re,C=K4(_,re))),C===1))throw L=y_,Yy(_,0),kg(_,V),uu(_,_r()),L;switch(_.finishedWork=ee,_.finishedLanes=V,C){case 0:case 1:throw Error(t(345));case 2:Qy(_,ou,bd);break;case 3:if(kg(_,V),(V&130023424)===V&&(C=H4+500-_r(),10<C)){if(Gf(_,0)!==0)break;if(ee=_.suspendedLanes,(ee&V)!==V){Lo(),_.pingedLanes|=_.suspendedLanes&ee;break}_.timeoutHandle=ko(Qy.bind(null,_,ou,bd),C);break}Qy(_,ou,bd);break;case 4:if(kg(_,V),(V&4194240)===V)break;for(C=_.eventTimes,ee=-1;0<V;){var we=31-Bn(V);re=1<<we,we=C[we],we>ee&&(ee=we),V&=~re}if(V=ee,V=_r()-V,V=(120>V?120:480>V?480:1080>V?1080:1920>V?1920:3e3>V?3e3:4320>V?4320:1960*nye(V/1960))-V,10<V){_.timeoutHandle=ko(Qy.bind(null,_,ou,bd),V);break}Qy(_,ou,bd);break;case 5:Qy(_,ou,bd);break;default:throw Error(t(329))}}}return uu(_,_r()),_.callbackNode===L?Bj.bind(null,_):null}function K4(_,C){var L=v_;return _.current.memoizedState.isDehydrated&&(Yy(_,C).flags|=256),_=zA(_,C),_!==2&&(C=ou,ou=L,C!==null&&Y4(C)),_}function Y4(_){ou===null?ou=_:ou.push.apply(ou,_)}function rye(_){for(var C=_;;){if(C.flags&16384){var L=C.updateQueue;if(L!==null&&(L=L.stores,L!==null))for(var V=0;V<L.length;V++){var ee=L[V],re=ee.getSnapshot;ee=ee.value;try{if(!Zs(re(),ee))return!1}catch{return!1}}}if(L=C.child,C.subtreeFlags&16384&&L!==null)L.return=C,C=L;else{if(C===_)break;for(;C.sibling===null;){if(C.return===null||C.return===_)return!0;C=C.return}C.sibling.return=C.return,C=C.sibling}}return!0}function kg(_,C){for(C&=~V4,C&=~FA,_.suspendedLanes|=C,_.pingedLanes&=~C,_=_.expirationTimes;0<C;){var L=31-Bn(C),V=1<<L;_[L]=-1,C&=~V}}function zj(_){if((pr&6)!==0)throw Error(t(327));Pb();var C=Gf(_,0);if((C&1)===0)return uu(_,_r()),null;var L=zA(_,C);if(_.tag!==0&&L===2){var V=Vp(_);V!==0&&(C=V,L=K4(_,V))}if(L===1)throw L=y_,Yy(_,0),kg(_,C),uu(_,_r()),L;if(L===6)throw Error(t(345));return _.finishedWork=_.current.alternate,_.finishedLanes=C,Qy(_,ou,bd),uu(_,_r()),null}function Q4(_,C){var L=pr;pr|=1;try{return _(C)}finally{pr=L,pr===0&&(Fb=_r()+500,ug&&Wh())}}function Ky(_){Dg!==null&&Dg.tag===0&&(pr&6)===0&&Pb();var C=pr;pr|=1;var L=Wl.transition,V=lr;try{if(Wl.transition=null,lr=1,_)return _()}finally{lr=V,Wl.transition=L,pr=C,(pr&6)===0&&Wh()}}function Z4(){Vu=Ib.current,Qr(Ib)}function Yy(_,C){_.finishedWork=null,_.finishedLanes=0;var L=_.timeoutHandle;if(L!==-1&&(_.timeoutHandle=-1,t_(L)),Ta!==null)for(L=Ta.return;L!==null;){var V=L;switch(Ea(V),V.tag){case 1:V=V.type.childContextTypes,V!=null&&og();break;case 3:wi(),Qr(as),Qr($a),os();break;case 5:Oc(V);break;case 4:wi();break;case 13:Qr(Zr);break;case 19:Qr(Zr);break;case 10:bb(V.type._context);break;case 22:case 23:Z4()}L=L.return}if(hs=_,Ta=_=Ng(_.current,null),Ps=Vu=C,Va=0,y_=null,V4=FA=Xy=0,ou=v_=null,Ll!==null){for(C=0;C<Ll.length;C++)if(L=Ll[C],V=L.interleaved,V!==null){L.interleaved=null;var ee=V.next,re=L.pending;if(re!==null){var we=re.next;re.next=ee,V.next=we}L.pending=V}Ll=null}return _}function Wj(_,C){do{var L=Ta;try{if(vb(),mg.current=xg,qu){for(var V=Fr.memoizedState;V!==null;){var ee=V.queue;ee!==null&&(ee.pending=null),V=V.next}qu=!1}if(Rs=0,Yi=Ii=Fr=null,Hh=!1,su=0,q4.current=null,L===null||L.return===null){Va=1,y_=C,Ta=null;break}e:{var re=_,we=L.return,Me=L,qe=C;if(C=Ps,Me.flags|=32768,qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var ot=qe,Ct=Me,Tt=Ct.tag;if((Ct.mode&1)===0&&(Tt===0||Tt===11||Tt===15)){var _t=Ct.alternate;_t?(Ct.updateQueue=_t.updateQueue,Ct.memoizedState=_t.memoizedState,Ct.lanes=_t.lanes):(Ct.updateQueue=null,Ct.memoizedState=null)}var Wt=$(we);if(Wt!==null){Wt.flags&=-257,Q(Wt,we,Me,re,C),Wt.mode&1&&N(re,ot,C),C=Wt,qe=ot;var Zt=C.updateQueue;if(Zt===null){var sn=new Set;sn.add(qe),C.updateQueue=sn}else Zt.add(qe);break e}else{if((C&1)===0){N(re,ot,C),J4();break e}qe=Error(t(426))}}else if(Sr&&Me.mode&1){var ha=$(we);if(ha!==null){(ha.flags&65536)===0&&(ha.flags|=256),Q(ha,we,Me,re,C),Wy(vd(qe,Me));break e}}re=qe=vd(qe,Me),Va!==4&&(Va=2),v_===null?v_=[re]:v_.push(re),re=we;do{switch(re.tag){case 3:re.flags|=65536,C&=-C,re.lanes|=C;var Qe=NA(re,qe,C);Vy(re,Qe);break e;case 1:Me=qe;var He=re.type,Je=re.stateNode;if((re.flags&128)===0&&(typeof He.getDerivedStateFromError=="function"||Je!==null&&typeof Je.componentDidCatch=="function"&&(Tg===null||!Tg.has(Je)))){re.flags|=65536,C&=-C,re.lanes|=C;var At=D(re,Me,C);Vy(re,At);break e}}re=re.return}while(re!==null)}qj(L)}catch(on){C=on,Ta===L&&L!==null&&(Ta=L=L.return);continue}break}while(!0)}function jj(){var _=IA.current;return IA.current=xg,_===null?xg:_}function J4(){(Va===0||Va===3||Va===2)&&(Va=4),hs===null||(Xy&268435455)===0&&(FA&268435455)===0||kg(hs,Ps)}function zA(_,C){var L=pr;pr|=2;var V=jj();(hs!==_||Ps!==C)&&(bd=null,Yy(_,C));do try{iye();break}catch(ee){Wj(_,ee)}while(!0);if(vb(),pr=L,IA.current=V,Ta!==null)throw Error(t(261));return hs=null,Ps=0,Va}function iye(){for(;Ta!==null;)$j(Ta)}function aye(){for(;Ta!==null&&!xy();)$j(Ta)}function $j(_){var C=Gj(_.alternate,_,Vu);_.memoizedProps=_.pendingProps,C===null?qj(_):Ta=C,q4.current=null}function qj(_){var C=_;do{var L=C.alternate;if(_=C.return,(C.flags&32768)===0){if(L=Qme(L,C,Vu),L!==null){Ta=L;return}}else{if(L=Zme(L,C),L!==null){L.flags&=32767,Ta=L;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{Va=6,Ta=null;return}}if(C=C.sibling,C!==null){Ta=C;return}Ta=C=_}while(C!==null);Va===0&&(Va=5)}function Qy(_,C,L){var V=lr,ee=Wl.transition;try{Wl.transition=null,lr=1,sye(_,C,L,V)}finally{Wl.transition=ee,lr=V}return null}function sye(_,C,L,V){do Pb();while(Dg!==null);if((pr&6)!==0)throw Error(t(327));L=_.finishedWork;var ee=_.finishedLanes;if(L===null)return null;if(_.finishedWork=null,_.finishedLanes=0,L===_.current)throw Error(t(177));_.callbackNode=null,_.callbackPriority=0;var re=L.lanes|L.childLanes;if(N4(_,re),_===hs&&(Ta=hs=null,Ps=0),(L.subtreeFlags&2064)===0&&(L.flags&2064)===0||LA||(LA=!0,Xj(Ti,function(){return Pb(),null})),re=(L.flags&15990)!==0,(L.subtreeFlags&15990)!==0||re){re=Wl.transition,Wl.transition=null;var we=lr;lr=1;var Me=pr;pr|=4,q4.current=null,eye(_,L),Fj(L,_),Oy(Jx),V1=!!Zx,Jx=Zx=null,_.current=L,tye(L),Hf(),pr=Me,lr=we,Wl.transition=re}else _.current=L;if(LA&&(LA=!1,Dg=_,MA=ee),re=_.pendingLanes,re===0&&(Tg=null),Ir(L.stateNode),uu(_,_r()),C!==null)for(V=_.onRecoverableError,L=0;L<C.length;L++)ee=C[L],V(ee.value,{componentStack:ee.stack,digest:ee.digest});if(PA)throw PA=!1,_=G4,G4=null,_;return(MA&1)!==0&&_.tag!==0&&Pb(),re=_.pendingLanes,(re&1)!==0?_===X4?b_++:(b_=0,X4=_):b_=0,Wh(),null}function Pb(){if(Dg!==null){var _=Sy(MA),C=Wl.transition,L=lr;try{if(Wl.transition=null,lr=16>_?16:_,Dg===null)var V=!1;else{if(_=Dg,Dg=null,MA=0,(pr&6)!==0)throw Error(t(331));var ee=pr;for(pr|=4,Kt=_.current;Kt!==null;){var re=Kt,we=re.child;if((Kt.flags&16)!==0){var Me=re.deletions;if(Me!==null){for(var qe=0;qe<Me.length;qe++){var ot=Me[qe];for(Kt=ot;Kt!==null;){var Ct=Kt;switch(Ct.tag){case 0:case 11:case 15:m_(8,Ct,re)}var Tt=Ct.child;if(Tt!==null)Tt.return=Ct,Kt=Tt;else for(;Kt!==null;){Ct=Kt;var _t=Ct.sibling,Wt=Ct.return;if(kj(Ct),Ct===ot){Kt=null;break}if(_t!==null){_t.return=Wt,Kt=_t;break}Kt=Wt}}}var Zt=re.alternate;if(Zt!==null){var sn=Zt.child;if(sn!==null){Zt.child=null;do{var ha=sn.sibling;sn.sibling=null,sn=ha}while(sn!==null)}}Kt=re}}if((re.subtreeFlags&2064)!==0&&we!==null)we.return=re,Kt=we;else e:for(;Kt!==null;){if(re=Kt,(re.flags&2048)!==0)switch(re.tag){case 0:case 11:case 15:m_(9,re,re.return)}var Qe=re.sibling;if(Qe!==null){Qe.return=re.return,Kt=Qe;break e}Kt=re.return}}var He=_.current;for(Kt=He;Kt!==null;){we=Kt;var Je=we.child;if((we.subtreeFlags&2064)!==0&&Je!==null)Je.return=we,Kt=Je;else e:for(we=He;Kt!==null;){if(Me=Kt,(Me.flags&2048)!==0)try{switch(Me.tag){case 0:case 11:case 15:RA(9,Me)}}catch(on){Zi(Me,Me.return,on)}if(Me===we){Kt=null;break e}var At=Me.sibling;if(At!==null){At.return=Me.return,Kt=At;break e}Kt=Me.return}}if(pr=ee,Wh(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(wr,_)}catch{}V=!0}return V}finally{lr=L,Wl.transition=C}}return!1}function Vj(_,C,L){C=vd(L,C),C=NA(_,C,1),_=Bl(_,C,1),C=Lo(),_!==null&&(_y(_,1,C),uu(_,C))}function Zi(_,C,L){if(_.tag===3)Vj(_,_,L);else for(;C!==null;){if(C.tag===3){Vj(C,_,L);break}else if(C.tag===1){var V=C.stateNode;if(typeof C.type.getDerivedStateFromError=="function"||typeof V.componentDidCatch=="function"&&(Tg===null||!Tg.has(V))){_=vd(L,_),_=D(C,_,1),C=Bl(C,_,1),_=Lo(),C!==null&&(_y(C,1,_),uu(C,_));break}}C=C.return}}function oye(_,C,L){var V=_.pingCache;V!==null&&V.delete(C),C=Lo(),_.pingedLanes|=_.suspendedLanes&L,hs===_&&(Ps&L)===L&&(Va===4||Va===3&&(Ps&130023424)===Ps&&500>_r()-H4?Yy(_,0):V4|=L),uu(_,C)}function Hj(_,C){C===0&&((_.mode&1)===0?C=1:(C=_c,_c<<=1,(_c&130023424)===0&&(_c=4194304)));var L=Lo();_=Fo(_,C),_!==null&&(_y(_,C,L),uu(_,L))}function uye(_){var C=_.memoizedState,L=0;C!==null&&(L=C.retryLane),Hj(_,L)}function lye(_,C){var L=0;switch(_.tag){case 13:var V=_.stateNode,ee=_.memoizedState;ee!==null&&(L=ee.retryLane);break;case 19:V=_.stateNode;break;default:throw Error(t(314))}V!==null&&V.delete(C),Hj(_,L)}var Gj;Gj=function(_,C,L){if(_!==null)if(_.memoizedProps!==C.pendingProps||as.current)oe=!0;else{if((_.lanes&L)===0&&(C.flags&128)===0)return oe=!1,U4(_,C,L);oe=(_.flags&131072)!==0}else oe=!1,Sr&&(C.flags&1048576)!==0&&bA(C,$h,C.index);switch(C.lanes=0,C.tag){case 2:var V=C.type;Qn(_,C),_=C.pendingProps;var ee=ld(C,$a.current);Nc(C,L),ee=yg(null,C,V,_,ee,L);var re=vg();return C.flags|=1,typeof ee=="object"&&ee!==null&&typeof ee.render=="function"&&ee.$$typeof===void 0?(C.tag=1,C.memoizedState=null,C.updateQueue=null,ss(V)?(re=!0,cd(C)):re=!1,C.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,qy(C),ee.updater=Sg,C.stateNode=ee,ee._reactInternals=C,Nb(C,V,_,L),C=Cr(null,C,V,!0,re,L)):(C.tag=0,Sr&&re&&lg(C),ke(null,C,ee,L),C=C.child),C;case 16:V=C.elementType;e:{switch(Qn(_,C),_=C.pendingProps,ee=V._init,V=ee(V._payload),C.type=V,ee=C.tag=hye(V),_=qa(V,_),ee){case 0:C=Lt(null,C,V,_,L);break e;case 1:C=Jr(null,C,V,_,L);break e;case 11:C=Xe(null,C,V,_,L);break e;case 14:C=ut(null,C,V,qa(V.type,_),L);break e}throw Error(t(306,V,""))}return C;case 0:return V=C.type,ee=C.pendingProps,ee=C.elementType===V?ee:qa(V,ee),Lt(_,C,V,ee,L);case 1:return V=C.type,ee=C.pendingProps,ee=C.elementType===V?ee:qa(V,ee),Jr(_,C,V,ee,L);case 3:e:{if(Is(C),_===null)throw Error(t(387));V=C.pendingProps,re=C.memoizedState,ee=re.element,xb(_,C),dg(C,V,null,L);var we=C.memoizedState;if(V=we.element,re.isDehydrated)if(re={element:V,isDehydrated:!1,cache:we.cache,pendingSuspenseBoundaries:we.pendingSuspenseBoundaries,transitions:we.transitions},C.updateQueue.baseState=re,C.memoizedState=re,C.flags&256){ee=vd(Error(t(423)),C),C=zl(_,C,V,L,ee);break e}else if(V!==ee){ee=vd(Error(t(424)),C),C=zl(_,C,V,L,ee);break e}else for(It=Rl(C.stateNode.containerInfo.firstChild),Oo=C,Sr=!0,Ro=null,L=au(C,null,V,L),C.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(pd(),V===ee){C=cs(_,C,L);break e}ke(_,C,V,L)}C=C.child}return C;case 5:return pg(C),_===null&&cg(C),V=C.type,ee=C.pendingProps,re=_!==null?_.memoizedProps:null,we=ee.children,e_(V,ee)?we=null:re!==null&&e_(V,re)&&(C.flags|=32),En(_,C),ke(_,C,we,L),C.child;case 6:return _===null&&cg(C),null;case 13:return lt(_,C,L);case 4:return Vh(C,C.stateNode.containerInfo),V=C.pendingProps,_===null?C.child=gd(C,null,V,L):ke(_,C,V,L),C.child;case 11:return V=C.type,ee=C.pendingProps,ee=C.elementType===V?ee:qa(V,ee),Xe(_,C,V,ee,L);case 7:return ke(_,C,C.pendingProps,L),C.child;case 8:return ke(_,C,C.pendingProps.children,L),C.child;case 12:return ke(_,C,C.pendingProps.children,L),C.child;case 10:e:{if(V=C.type._context,ee=C.pendingProps,re=C.memoizedProps,we=ee.value,jr(jy,V._currentValue),V._currentValue=we,re!==null)if(Zs(re.value,we)){if(re.children===ee.children&&!as.current){C=cs(_,C,L);break e}}else for(re=C.child,re!==null&&(re.return=C);re!==null;){var Me=re.dependencies;if(Me!==null){we=re.child;for(var qe=Me.firstContext;qe!==null;){if(qe.context===V){if(re.tag===1){qe=Ul(-1,L&-L),qe.tag=2;var ot=re.updateQueue;if(ot!==null){ot=ot.shared;var Ct=ot.pending;Ct===null?qe.next=qe:(qe.next=Ct.next,Ct.next=qe),ot.pending=qe}}re.lanes|=L,qe=re.alternate,qe!==null&&(qe.lanes|=L),wb(re.return,L,C),Me.lanes|=L;break}qe=qe.next}}else if(re.tag===10)we=re.type===C.type?null:re.child;else if(re.tag===18){if(we=re.return,we===null)throw Error(t(341));we.lanes|=L,Me=we.alternate,Me!==null&&(Me.lanes|=L),wb(we,L,C),we=re.sibling}else we=re.child;if(we!==null)we.return=re;else for(we=re;we!==null;){if(we===C){we=null;break}if(re=we.sibling,re!==null){re.return=we.return,we=re;break}we=we.return}re=we}ke(_,C,ee.children,L),C=C.child}return C;case 9:return ee=C.type,V=C.pendingProps.children,Nc(C,L),ee=Os(ee),V=V(ee),C.flags|=1,ke(_,C,V,L),C.child;case 14:return V=C.type,ee=qa(V,C.pendingProps),ee=qa(V.type,ee),ut(_,C,V,ee,L);case 15:return Dt(_,C,C.type,C.pendingProps,L);case 17:return V=C.type,ee=C.pendingProps,ee=C.elementType===V?ee:qa(V,ee),Qn(_,C),C.tag=1,ss(V)?(_=!0,cd(C)):_=!1,Nc(C,L),kA(C,V,ee),Nb(C,V,ee,L),Cr(null,C,V,!0,_,L);case 19:return ca(_,C,L);case 22:return Gt(_,C,L)}throw Error(t(156,C.tag))};function Xj(_,C){return Jo(_,C)}function cye(_,C,L,V){this.tag=_,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=C,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=V,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(_,C,L,V){return new cye(_,C,L,V)}function e5(_){return _=_.prototype,!(!_||!_.isReactComponent)}function hye(_){if(typeof _=="function")return e5(_)?1:0;if(_!=null){if(_=_.$$typeof,_===F)return 11;if(_===U)return 14}return 2}function Ng(_,C){var L=_.alternate;return L===null?(L=jl(_.tag,C,_.key,_.mode),L.elementType=_.elementType,L.type=_.type,L.stateNode=_.stateNode,L.alternate=_,_.alternate=L):(L.pendingProps=C,L.type=_.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=_.flags&14680064,L.childLanes=_.childLanes,L.lanes=_.lanes,L.child=_.child,L.memoizedProps=_.memoizedProps,L.memoizedState=_.memoizedState,L.updateQueue=_.updateQueue,C=_.dependencies,L.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},L.sibling=_.sibling,L.index=_.index,L.ref=_.ref,L}function WA(_,C,L,V,ee,re){var we=2;if(V=_,typeof _=="function")e5(_)&&(we=1);else if(typeof _=="string")we=5;else e:switch(_){case E:return Zy(L.children,ee,re,C);case A:we=8,ee|=8;break;case k:return _=jl(12,L,C,ee|2),_.elementType=k,_.lanes=re,_;case I:return _=jl(13,L,C,ee),_.elementType=I,_.lanes=re,_;case R:return _=jl(19,L,C,ee),_.elementType=R,_.lanes=re,_;case W:return jA(L,ee,re,C);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case T:we=10;break e;case O:we=9;break e;case F:we=11;break e;case U:we=14;break e;case B:we=16,V=null;break e}throw Error(t(130,_==null?_:typeof _,""))}return C=jl(we,L,C,ee),C.elementType=_,C.type=V,C.lanes=re,C}function Zy(_,C,L,V){return _=jl(7,_,V,C),_.lanes=L,_}function jA(_,C,L,V){return _=jl(22,_,V,C),_.elementType=W,_.lanes=L,_.stateNode={isHidden:!1},_}function t5(_,C,L){return _=jl(6,_,null,C),_.lanes=L,_}function n5(_,C,L){return C=jl(4,_.children!==null?_.children:[],_.key,C),C.lanes=L,C.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},C}function fye(_,C,L,V,ee){this.tag=C,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Co(0),this.expirationTimes=Co(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Co(0),this.identifierPrefix=V,this.onRecoverableError=ee,this.mutableSourceEagerHydrationData=null}function r5(_,C,L,V,ee,re,we,Me,qe){return _=new fye(_,C,L,Me,qe),C===1?(C=1,re===!0&&(C|=8)):C=0,re=jl(3,null,null,C),_.current=re,re.stateNode=_,re.memoizedState={element:V,isDehydrated:L,cache:null,transitions:null,pendingSuspenseBoundaries:null},qy(re),_}function dye(_,C,L){var V=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:V==null?null:""+V,children:_,containerInfo:C,implementation:L}}function Kj(_){if(!_)return Fl;_=_._reactInternals;e:{if(Wr(_)!==_||_.tag!==1)throw Error(t(170));var C=_;do{switch(C.tag){case 3:C=C.stateNode.context;break e;case 1:if(ss(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break e}}C=C.return}while(C!==null);throw Error(t(171))}if(_.tag===1){var L=_.type;if(ss(L))return db(_,L,C)}return C}function Yj(_,C,L,V,ee,re,we,Me,qe){return _=r5(L,V,!0,_,ee,re,we,Me,qe),_.context=Kj(null),L=_.current,V=Lo(),ee=Ag(L),re=Ul(V,ee),re.callback=C??null,Bl(L,re,ee),_.current.lanes=ee,_y(_,ee,V),uu(_,V),_}function $A(_,C,L,V){var ee=C.current,re=Lo(),we=Ag(ee);return L=Kj(L),C.context===null?C.context=L:C.pendingContext=L,C=Ul(re,we),C.payload={element:_},V=V===void 0?null:V,V!==null&&(C.callback=V),_=Bl(ee,C,we),_!==null&&(Lc(_,ee,we,re),_b(_,ee,we)),we}function qA(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return _.child.stateNode;default:return _.child.stateNode}}function Qj(_,C){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var L=_.retryLane;_.retryLane=L!==0&&L<C?L:C}}function i5(_,C){Qj(_,C),(_=_.alternate)&&Qj(_,C)}function pye(){return null}var Zj=typeof reportError=="function"?reportError:function(_){console.error(_)};function a5(_){this._internalRoot=_}VA.prototype.render=a5.prototype.render=function(_){var C=this._internalRoot;if(C===null)throw Error(t(409));$A(_,C,null,null)},VA.prototype.unmount=a5.prototype.unmount=function(){var _=this._internalRoot;if(_!==null){this._internalRoot=null;var C=_.containerInfo;Ky(function(){$A(null,_,null,null)}),C[Il]=null}};function VA(_){this._internalRoot=_}VA.prototype.unstable_scheduleHydration=function(_){if(_){var C=YD();_={blockedOn:null,target:_,priority:C};for(var L=0;L<Ol.length&&C!==0&&C<Ol[L].priority;L++);Ol.splice(L,0,_),L===0&&j1(_)}};function s5(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)}function HA(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11&&(_.nodeType!==8||_.nodeValue!==" react-mount-point-unstable "))}function Jj(){}function gye(_,C,L,V,ee){if(ee){if(typeof V=="function"){var re=V;V=function(){var ot=qA(we);re.call(ot)}}var we=Yj(C,V,_,0,null,!1,!1,"",Jj);return _._reactRootContainer=we,_[Il]=we.current,id(_.nodeType===8?_.parentNode:_),Ky(),we}for(;ee=_.lastChild;)_.removeChild(ee);if(typeof V=="function"){var Me=V;V=function(){var ot=qA(qe);Me.call(ot)}}var qe=r5(_,0,!1,null,null,!1,!1,"",Jj);return _._reactRootContainer=qe,_[Il]=qe.current,id(_.nodeType===8?_.parentNode:_),Ky(function(){$A(C,qe,L,V)}),qe}function GA(_,C,L,V,ee){var re=L._reactRootContainer;if(re){var we=re;if(typeof ee=="function"){var Me=ee;ee=function(){var qe=qA(we);Me.call(qe)}}$A(C,we,_,ee)}else we=gye(L,C,_,ee,V);return qA(we)}Hp=function(_){switch(_.tag){case 3:var C=_.stateNode;if(C.current.memoizedState.isDehydrated){var L=xa(C.pendingLanes);L!==0&&(Ox(C,L|1),uu(C,_r()),(pr&6)===0&&(Fb=_r()+500,Wh()))}break;case 13:Ky(function(){var V=Fo(_,1);if(V!==null){var ee=Lo();Lc(V,_,1,ee)}}),i5(_,1)}},Gp=function(_){if(_.tag===13){var C=Fo(_,134217728);if(C!==null){var L=Lo();Lc(C,_,134217728,L)}i5(_,134217728)}},KD=function(_){if(_.tag===13){var C=Ag(_),L=Fo(_,C);if(L!==null){var V=Lo();Lc(L,_,C,V)}i5(_,C)}},YD=function(){return lr},z1=function(_,C){var L=lr;try{return lr=_,C()}finally{lr=L}},Mu=function(_,C,L){switch(C){case"input":if(le(_,L),C=L.name,L.type==="radio"&&C!=null){for(L=_;L.parentNode;)L=L.parentNode;for(L=L.querySelectorAll("input[name="+JSON.stringify(""+C)+'][type="radio"]'),C=0;C<L.length;C++){var V=L[C];if(V!==_&&V.form===_.form){var ee=Ca(V);if(!ee)throw Error(t(90));Ce(V),le(V,ee)}}}break;case"textarea":Se(_,L);break;case"select":C=L.value,C!=null&&Ae(_,!!L.multiple,C,!1)}},pn=Q4,Be=Ky;var mye={usingClientEntryPoint:!1,Events:[Uy,oa,Ca,et,Nt,Q4]},w_={findFiberByHostInstance:Bh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yye={bundleType:w_.bundleType,version:w_.version,rendererPackageName:w_.rendererPackageName,rendererConfig:w_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(_){return _=xc(_),_===null?null:_.stateNode},findFiberByHostInstance:w_.findFiberByHostInstance||pye,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var XA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!XA.isDisabled&&XA.supportsFiber)try{wr=XA.inject(yye),mi=XA}catch{}}return lu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mye,lu.createPortal=function(_,C){var L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s5(C))throw Error(t(200));return dye(_,C,null,L)},lu.createRoot=function(_,C){if(!s5(_))throw Error(t(299));var L=!1,V="",ee=Zj;return C!=null&&(C.unstable_strictMode===!0&&(L=!0),C.identifierPrefix!==void 0&&(V=C.identifierPrefix),C.onRecoverableError!==void 0&&(ee=C.onRecoverableError)),C=r5(_,1,!1,null,null,L,!1,V,ee),_[Il]=C.current,id(_.nodeType===8?_.parentNode:_),new a5(C)},lu.findDOMNode=function(_){if(_==null)return null;if(_.nodeType===1)return _;var C=_._reactInternals;if(C===void 0)throw typeof _.render=="function"?Error(t(188)):(_=Object.keys(_).join(","),Error(t(268,_)));return _=xc(C),_=_===null?null:_.stateNode,_},lu.flushSync=function(_){return Ky(_)},lu.hydrate=function(_,C,L){if(!HA(C))throw Error(t(200));return GA(null,_,C,!0,L)},lu.hydrateRoot=function(_,C,L){if(!s5(_))throw Error(t(405));var V=L!=null&&L.hydratedSources||null,ee=!1,re="",we=Zj;if(L!=null&&(L.unstable_strictMode===!0&&(ee=!0),L.identifierPrefix!==void 0&&(re=L.identifierPrefix),L.onRecoverableError!==void 0&&(we=L.onRecoverableError)),C=Yj(C,null,_,1,L??null,ee,!1,re,we),_[Il]=C.current,id(_),V)for(_=0;_<V.length;_++)L=V[_],ee=L._getVersion,ee=ee(L._source),C.mutableSourceEagerHydrationData==null?C.mutableSourceEagerHydrationData=[L,ee]:C.mutableSourceEagerHydrationData.push(L,ee);return new VA(C)},lu.render=function(_,C,L){if(!HA(C))throw Error(t(200));return GA(null,_,C,!1,L)},lu.unmountComponentAtNode=function(_){if(!HA(_))throw Error(t(40));return _._reactRootContainer?(Ky(function(){GA(null,null,_,!1,function(){_._reactRootContainer=null,_[Il]=null})}),!0):!1},lu.unstable_batchedUpdates=Q4,lu.unstable_renderSubtreeIntoContainer=function(_,C,L,V){if(!HA(L))throw Error(t(200));if(_==null||_._reactInternals===void 0)throw Error(t(38));return GA(_,C,L,!1,V)},lu.version="18.3.1-next-f1338f8080-20240426",lu}var u$;function NB(){if(u$)return c5.exports;u$=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),c5.exports=Eye(),c5.exports}var l$;function Tye(){if(l$)return KA;l$=1;var n=NB();return KA.createRoot=n.createRoot,KA.hydrateRoot=n.hydrateRoot,KA}var Dye=Tye(),__={},c$;function Aye(){if(c$)return __;c$=1,Object.defineProperty(__,"__esModule",{value:!0}),__.parse=o,__.serialize=l;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function o(f,d){const p=new a,m=f.length;if(m<2)return p;const g=(d==null?void 0:d.decode)||h;let y=0;do{const v=f.indexOf("=",y);if(v===-1)break;const b=f.indexOf(";",y),w=b===-1?m:b;if(v>w){y=f.lastIndexOf(";",v-1)+1;continue}const x=s(f,y,v),S=u(f,v,x),E=f.slice(x,S);if(p[E]===void 0){let A=s(f,v+1,w),k=u(f,w,A);const T=g(f.slice(A,k));p[E]=T}y=w+1}while(y<m);return p}function s(f,d,p){do{const m=f.charCodeAt(d);if(m!==32&&m!==9)return d}while(++d<p);return p}function u(f,d,p){for(;d>p;){const m=f.charCodeAt(--d);if(m!==32&&m!==9)return d+1}return p}function l(f,d,p){const m=(p==null?void 0:p.encode)||encodeURIComponent;if(!n.test(f))throw new TypeError(`argument name is invalid: ${f}`);const g=m(d);if(!e.test(g))throw new TypeError(`argument val is invalid: ${d}`);let y=f+"="+g;if(!p)return y;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);y+="; Max-Age="+p.maxAge}if(p.domain){if(!t.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);y+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);y+="; Path="+p.path}if(p.expires){if(!c(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);y+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(y+="; HttpOnly"),p.secure&&(y+="; Secure"),p.partitioned&&(y+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return y}function h(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function c(f){return i.call(f)==="[object Date]"}return __}Aye();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jJ=n=>{throw TypeError(n)},kye=(n,e,t)=>e.has(n)||jJ("Cannot "+t),d5=(n,e,t)=>(kye(n,e,"read from private field"),t?t.call(n):e.get(n)),Nye=(n,e,t)=>e.has(n)?jJ("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),h$="popstate";function Oye(n={}){function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return MC("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Bm(i)}return Iye(e,t,null,n)}function nr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ss(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Rye(){return Math.random().toString(36).substring(2,10)}function f$(n,e){return{usr:n.state,key:n.key,idx:e}}function MC(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ay(e):e,state:t,key:e&&e.key||r||Rye()}}function Bm({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ay(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Iye(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",u=null,l=h();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function h(){return(o.state||{idx:null}).idx}function c(){s="POP";let g=h(),y=g==null?null:g-l;l=g,u&&u({action:s,location:m.location,delta:y})}function f(g,y){s="PUSH";let v=MC(m.location,g,y);l=h()+1;let b=f$(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(w)}a&&u&&u({action:s,location:m.location,delta:1})}function d(g,y){s="REPLACE";let v=MC(m.location,g,y);l=h();let b=f$(v,l),w=m.createHref(v);o.replaceState(b,"",w),a&&u&&u({action:s,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:Bm(g);return v=v.replace(/ $/,"%20"),nr(y,`No window.location.(origin|href) available to create URL for href: ${v}`),new URL(v,y)}let m={get action(){return s},get location(){return n(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(h$,c),u=g,()=>{i.removeEventListener(h$,c),u=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:d,go(g){return o.go(g)}};return m}var qS,d$=class{constructor(n){if(Nye(this,qS,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(d5(this,qS).has(n))return d5(this,qS).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){d5(this,qS).set(n,e)}};qS=new WeakMap;var Fye=new Set(["lazy","caseSensitive","path","id","index","children"]);function Pye(n){return n.index===!0}function yN(n,e,t=[],r={}){return n.map((i,a)=>{let o=[...t,String(a)],s=typeof i.id=="string"?i.id:o.join("-");if(nr(i.index!==!0||!i.children,"Cannot specify children on an index route"),nr(!r[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),Pye(i)){let u={...i,...e(i),id:s};return r[s]=u,u}else{let u={...i,...e(i),id:s,children:void 0};return r[s]=u,i.children&&(u.children=yN(i.children,e,o,r)),u}})}function zg(n,e,t="/"){return Vk(n,e,t,!1)}function Vk(n,e,t,r){let i=typeof e=="string"?ay(e):e,a=dc(i.pathname||"/",t);if(a==null)return null;let o=$J(n);Mye(o);let s=null;for(let u=0;s==null&&u<o.length;++u){let l=Xye(a);s=Hye(o[u],l,r)}return s}function Lye(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function $J(n,e=[],t=[],r=""){let i=(a,o,s)=>{let u={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(nr(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=If([r,u.relativePath]),h=t.concat(u);a.children&&a.children.length>0&&(nr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),$J(a.children,e,h,l)),!(a.path==null&&!a.index)&&e.push({path:l,score:qye(l,a.index),routesMeta:h})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let u of qJ(a.path))i(a,o,u)}),e}function qJ(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=qJ(r.join("/")),s=[];return s.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&s.push(...o),s.map(u=>n.startsWith("/")&&u===""?"/":u)}function Mye(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Vye(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Uye=/^:[\w-]+$/,Bye=3,zye=2,Wye=1,jye=10,$ye=-2,p$=n=>n==="*";function qye(n,e){let t=n.split("/"),r=t.length;return t.some(p$)&&(r+=$ye),e&&(r+=zye),t.filter(i=>!p$(i)).reduce((i,a)=>i+(Uye.test(a)?Bye:a===""?Wye:jye),r)}function Vye(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Hye(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let u=r[s],l=s===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",c=vN({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},h),f=u.route;if(!c&&l&&t&&!r[r.length-1].route.index&&(c=vN({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:If([a,c.pathname]),pathnameBase:Qye(If([a,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(a=If([a,c.pathnameBase]))}return o}function vN(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Gye(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,{paramName:h,isOptional:c},f)=>{if(h==="*"){let p=s[f]||"";o=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const d=s[f];return c&&!d?l[h]=void 0:l[h]=(d||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:o,pattern:n}}function Gye(n,e=!1,t=!0){Ss(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Xye(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ss(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function dc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Kye(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ay(n):n;return{pathname:t?t.startsWith("/")?t:Yye(t,e):e,search:Zye(r),hash:Jye(i)}}function Yye(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function p5(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VJ(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rR(n){let e=VJ(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function iR(n,e,t,r=!1){let i;typeof n=="string"?i=ay(n):(i={...n},nr(!i.pathname||!i.pathname.includes("?"),p5("?","pathname","search",i)),nr(!i.pathname||!i.pathname.includes("#"),p5("#","pathname","hash",i)),nr(!i.search||!i.search.includes("#"),p5("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let c=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),c-=1;i.pathname=f.join("/")}s=c>=0?e[c]:"/"}let u=Kye(i,s),l=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(l||h)&&(u.pathname+="/"),u}var If=n=>n.join("/").replace(/\/\/+/g,"/"),Qye=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Zye=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Jye=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,bN=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function UC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var HJ=["POST","PUT","PATCH","DELETE"],eve=new Set(HJ),tve=["GET",...HJ],nve=new Set(tve),rve=new Set([301,302,303,307,308]),ive=new Set([307,308]),g5={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ave={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},S_={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},OB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sve=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),GJ="remix-router-transitions",XJ=Symbol("ResetLoaderData");function ove(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";nr(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.mapRouteProperties||sve,i={},a=yN(n.routes,r,void 0,i),o,s=n.basename||"/",u=n.dataStrategy||fve,l={unstable_middleware:!1,...n.future},h=null,c=new Set,f=null,d=null,p=null,m=n.hydrationData!=null,g=zg(a,n.history.location,s),y=!1,v=null;if(g==null&&!n.patchRoutesOnNavigation){let Be=nc(404,{pathname:n.history.location.pathname}),{matches:Ge,route:nt}=T$(a);g=Ge,v={[nt.id]:Be}}g&&!n.hydrationData&&Ue(g,a,n.history.location.pathname).active&&(g=null);let b;if(g)if(g.some(Be=>Be.route.lazy))b=!1;else if(!g.some(Be=>Be.route.loader))b=!0;else{let Be=n.hydrationData?n.hydrationData.loaderData:null,Ge=n.hydrationData?n.hydrationData.errors:null;if(Ge){let nt=g.findIndex(bt=>Ge[bt.route.id]!==void 0);b=g.slice(0,nt+1).every(bt=>!u6(bt.route,Be,Ge))}else b=g.every(nt=>!u6(nt.route,Be,Ge))}else{b=!1,g=[];let Be=Ue(null,a,n.history.location.pathname);Be.active&&Be.matches&&(y=!0,g=Be.matches)}let w,x={historyAction:n.history.action,location:n.history.location,matches:g,initialized:b,navigation:g5,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||v,fetchers:new Map,blockers:new Map},S="POP",E=!1,A,k=!1,T=new Map,O=null,F=!1,I=!1,R=new Set,U=new Map,B=0,W=-1,Y=new Map,z=new Set,j=new Map,M=new Map,q=new Set,H=new Map,K,Z=null;function J(){if(h=n.history.listen(({action:Be,location:Ge,delta:nt})=>{if(K){K(),K=void 0;return}Ss(H.size===0||nt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let bt=dn({currentLocation:x.location,nextLocation:Ge,historyAction:Be});if(bt&&nt!=null){let kt=new Promise(tn=>{K=tn});n.history.go(nt*-1),Ot(bt,{state:"blocked",location:Ge,proceed(){Ot(bt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ge}),kt.then(()=>n.history.go(nt))},reset(){let tn=new Map(x.blockers);tn.set(bt,S_),ie({blockers:tn})}});return}return Ee(Be,Ge)}),t){Cve(e,T);let Be=()=>Eve(e,T);e.addEventListener("pagehide",Be),O=()=>e.removeEventListener("pagehide",Be)}return x.initialized||Ee("POP",x.location,{initialHydration:!0}),w}function X(){h&&h(),O&&O(),c.clear(),A&&A.abort(),x.fetchers.forEach((Be,Ge)=>at(Ge)),x.blockers.forEach((Be,Ge)=>xt(Ge))}function ae(Be){return c.add(Be),()=>c.delete(Be)}function ie(Be,Ge={}){x={...x,...Be};let nt=[],bt=[];x.fetchers.forEach((kt,tn)=>{kt.state==="idle"&&(q.has(tn)?nt.push(tn):bt.push(tn))}),q.forEach(kt=>{!x.fetchers.has(kt)&&!U.has(kt)&&nt.push(kt)}),[...c].forEach(kt=>kt(x,{deletedFetchers:nt,viewTransitionOpts:Ge.viewTransitionOpts,flushSync:Ge.flushSync===!0})),nt.forEach(kt=>at(kt)),bt.forEach(kt=>x.fetchers.delete(kt))}function ce(Be,Ge,{flushSync:nt}={}){var Rt,zt;let bt=x.actionData!=null&&x.navigation.formMethod!=null&&th(x.navigation.formMethod)&&x.navigation.state==="loading"&&((Rt=Be.state)==null?void 0:Rt._isRedirect)!==!0,kt;Ge.actionData?Object.keys(Ge.actionData).length>0?kt=Ge.actionData:kt=null:bt?kt=x.actionData:kt=null;let tn=Ge.loaderData?C$(x.loaderData,Ge.loaderData,Ge.matches||[],Ge.errors):x.loaderData,an=x.blockers;an.size>0&&(an=new Map(an),an.forEach((Vt,$n)=>an.set($n,S_)));let Mt=E===!0||x.navigation.formMethod!=null&&th(x.navigation.formMethod)&&((zt=Be.state)==null?void 0:zt._isRedirect)!==!0;o&&(a=o,o=void 0),F||S==="POP"||(S==="PUSH"?n.history.push(Be,Be.state):S==="REPLACE"&&n.history.replace(Be,Be.state));let Bt;if(S==="POP"){let Vt=T.get(x.location.pathname);Vt&&Vt.has(Be.pathname)?Bt={currentLocation:x.location,nextLocation:Be}:T.has(Be.pathname)&&(Bt={currentLocation:Be,nextLocation:x.location})}else if(k){let Vt=T.get(x.location.pathname);Vt?Vt.add(Be.pathname):(Vt=new Set([Be.pathname]),T.set(x.location.pathname,Vt)),Bt={currentLocation:x.location,nextLocation:Be}}ie({...Ge,actionData:kt,loaderData:tn,historyAction:S,location:Be,initialized:!0,navigation:g5,revalidation:"idle",restoreScrollPosition:De(Be,Ge.matches||x.matches),preventScrollReset:Mt,blockers:an},{viewTransitionOpts:Bt,flushSync:nt===!0}),S="POP",E=!1,k=!1,F=!1,I=!1,Z==null||Z.resolve(),Z=null}async function ge(Be,Ge){if(typeof Be=="number"){n.history.go(Be);return}let nt=o6(x.location,x.matches,s,Be,Ge==null?void 0:Ge.fromRouteId,Ge==null?void 0:Ge.relative),{path:bt,submission:kt,error:tn}=g$(!1,nt,Ge),an=x.location,Mt=MC(x.location,bt,Ge&&Ge.state);Mt={...Mt,...n.history.encodeLocation(Mt)};let Bt=Ge&&Ge.replace!=null?Ge.replace:void 0,Rt="PUSH";Bt===!0?Rt="REPLACE":Bt===!1||kt!=null&&th(kt.formMethod)&&kt.formAction===x.location.pathname+x.location.search&&(Rt="REPLACE");let zt=Ge&&"preventScrollReset"in Ge?Ge.preventScrollReset===!0:void 0,Vt=(Ge&&Ge.flushSync)===!0,$n=dn({currentLocation:an,nextLocation:Mt,historyAction:Rt});if($n){Ot($n,{state:"blocked",location:Mt,proceed(){Ot($n,{state:"proceeding",proceed:void 0,reset:void 0,location:Mt}),ge(Be,Ge)},reset(){let fr=new Map(x.blockers);fr.set($n,S_),ie({blockers:fr})}});return}await Ee(Rt,Mt,{submission:kt,pendingError:tn,preventScrollReset:zt,replace:Ge&&Ge.replace,enableViewTransition:Ge&&Ge.viewTransition,flushSync:Vt})}function Ce(){Z||(Z=Tve()),Se(),ie({revalidation:"loading"});let Be=Z.promise;return x.navigation.state==="submitting"?Be:x.navigation.state==="idle"?(Ee(x.historyAction,x.location,{startUninterruptedRevalidation:!0}),Be):(Ee(S||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation,enableViewTransition:k===!0}),Be)}async function Ee(Be,Ge,nt){A&&A.abort(),A=null,S=Be,F=(nt&&nt.startUninterruptedRevalidation)===!0,xe(x.location,x.matches),E=(nt&&nt.preventScrollReset)===!0,k=(nt&&nt.enableViewTransition)===!0;let bt=o||a,kt=nt&&nt.overrideNavigation,tn=nt!=null&&nt.initialHydration&&x.matches&&x.matches.length>0&&!y?x.matches:zg(bt,Ge,s),an=(nt&&nt.flushSync)===!0;if(tn&&x.initialized&&!I&&bve(x.location,Ge)&&!(nt&&nt.submission&&th(nt.submission.formMethod))){ce(Ge,{matches:tn},{flushSync:an});return}let Mt=Ue(tn,bt,Ge.pathname);if(Mt.active&&Mt.matches&&(tn=Mt.matches),!tn){let{error:Ei,notFoundMatches:ai,route:$i}=Kr(Ge.pathname);ce(Ge,{matches:ai,loaderData:{},errors:{[$i.id]:Ei}},{flushSync:an});return}A=new AbortController;let Bt=Lb(n.history,Ge,A.signal,nt&&nt.submission),Rt=new d$(n.unstable_getContext?await n.unstable_getContext():void 0),zt;if(nt&&nt.pendingError)zt=[xv(tn).route.id,{type:"error",error:nt.pendingError}];else if(nt&&nt.submission&&th(nt.submission.formMethod)){let Ei=await G(Bt,Ge,nt.submission,tn,Rt,Mt.active,{replace:nt.replace,flushSync:an});if(Ei.shortCircuited)return;if(Ei.pendingActionResult){let[ai,$i]=Ei.pendingActionResult;if(ll($i)&&UC($i.error)&&$i.error.status===404){A=null,ce(Ge,{matches:Ei.matches,loaderData:{},errors:{[ai]:$i.error}});return}}tn=Ei.matches||tn,zt=Ei.pendingActionResult,kt=m5(Ge,nt.submission),an=!1,Mt.active=!1,Bt=Lb(n.history,Bt.url,Bt.signal)}let{shortCircuited:Vt,matches:$n,loaderData:fr,errors:Wr}=await de(Bt,Ge,tn,Rt,Mt.active,kt,nt&&nt.submission,nt&&nt.fetcherSubmission,nt&&nt.replace,nt&&nt.initialHydration===!0,an,zt);Vt||(A=null,ce(Ge,{matches:$n||tn,...E$(zt),loaderData:fr,errors:Wr}))}async function G(Be,Ge,nt,bt,kt,tn,an={}){Se();let Mt=_ve(Ge,nt);if(ie({navigation:Mt},{flushSync:an.flushSync===!0}),tn){let zt=await et(bt,Ge.pathname,Be.signal);if(zt.type==="aborted")return{shortCircuited:!0};if(zt.type==="error"){let Vt=xv(zt.partialMatches).route.id;return{matches:zt.partialMatches,pendingActionResult:[Vt,{type:"error",error:zt.error}]}}else if(zt.matches)bt=zt.matches;else{let{notFoundMatches:Vt,error:$n,route:fr}=Kr(Ge.pathname);return{matches:Vt,pendingActionResult:[fr.id,{type:"error",error:$n}]}}}let Bt,Rt=VS(bt,Ge);if(!Rt.route.action&&!Rt.route.lazy)Bt={type:"error",error:nc(405,{method:Be.method,pathname:Ge.pathname,routeId:Rt.route.id})};else{let zt=await ue("action",Be,[Rt],bt,kt,null);if(Bt=zt[Rt.route.id],!Bt){for(let Vt of bt)if(zt[Vt.route.id]){Bt=zt[Vt.route.id];break}}if(Be.signal.aborted)return{shortCircuited:!0}}if(Av(Bt)){let zt;return an&&an.replace!=null?zt=an.replace:zt=x$(Bt.response.headers.get("Location"),new URL(Be.url),s)===x.location.pathname+x.location.search,await Ae(Be,Bt,!0,{submission:nt,replace:zt}),{shortCircuited:!0}}if(ll(Bt)){let zt=xv(bt,Rt.route.id);return(an&&an.replace)!==!0&&(S="PUSH"),{matches:bt,pendingActionResult:[zt.route.id,Bt]}}return{matches:bt,pendingActionResult:[Rt.route.id,Bt]}}async function de(Be,Ge,nt,bt,kt,tn,an,Mt,Bt,Rt,zt,Vt){let $n=tn||m5(Ge,an),fr=an||Mt||A$($n),Wr=!F&&!Rt;if(kt){if(Wr){let Ti=ye(Vt);ie({navigation:$n,...Ti!==void 0?{actionData:Ti}:{}},{flushSync:zt})}let dr=await et(nt,Ge.pathname,Be.signal);if(dr.type==="aborted")return{shortCircuited:!0};if(dr.type==="error"){let Ti=xv(dr.partialMatches).route.id;return{matches:dr.partialMatches,loaderData:{},errors:{[Ti]:dr.error}}}else if(dr.matches)nt=dr.matches;else{let{error:Ti,notFoundMatches:qp,route:Al}=Kr(Ge.pathname);return{matches:qp,loaderData:{},errors:{[Al.id]:Ti}}}}let Ei=o||a,[ai,$i]=y$(n.history,x,nt,fr,Ge,Rt===!0,I,R,q,j,z,Ei,s,Vt);if(W=++B,ai.length===0&&$i.length===0){let dr=tt();return ce(Ge,{matches:nt,loaderData:{},errors:Vt&&ll(Vt[1])?{[Vt[0]]:Vt[1].error}:null,...E$(Vt),...dr?{fetchers:new Map(x.fetchers)}:{}},{flushSync:zt}),{shortCircuited:!0}}if(Wr){let dr={};if(!kt){dr.navigation=$n;let Ti=ye(Vt);Ti!==void 0&&(dr.actionData=Ti)}$i.length>0&&(dr.fetchers=le($i)),ie(dr,{flushSync:zt})}$i.forEach(dr=>{pt(dr.key),dr.controller&&U.set(dr.key,dr.controller)});let xc=()=>$i.forEach(dr=>pt(dr.key));A&&A.signal.addEventListener("abort",xc);let{loaderResults:Th,fetcherResults:Jo}=await me(nt,ai,$i,Be,bt);if(Be.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",xc),$i.forEach(dr=>U.delete(dr.key));let So=YA(Th);if(So)return await Ae(Be,So.result,!0,{replace:Bt}),{shortCircuited:!0};if(So=YA(Jo),So)return z.add(So.key),await Ae(Be,So.result,!0,{replace:Bt}),{shortCircuited:!0};let{loaderData:xy,errors:Hf}=S$(x,nt,Th,Vt,$i,Jo);Rt&&x.errors&&(Hf={...x.errors,...Hf});let _r=tt(),Dh=ft(W),eu=_r||Dh||$i.length>0;return{matches:nt,loaderData:xy,errors:Hf,...eu?{fetchers:new Map(x.fetchers)}:{}}}function ye(Be){if(Be&&!ll(Be[1]))return{[Be[0]]:Be[1].data};if(x.actionData)return Object.keys(x.actionData).length===0?null:x.actionData}function le(Be){return Be.forEach(Ge=>{let nt=x.fetchers.get(Ge.key),bt=C_(void 0,nt?nt.data:void 0);x.fetchers.set(Ge.key,bt)}),new Map(x.fetchers)}async function ne(Be,Ge,nt,bt){pt(Be);let kt=(bt&&bt.flushSync)===!0,tn=o||a,an=o6(x.location,x.matches,s,nt,Ge,bt==null?void 0:bt.relative),Mt=zg(tn,an,s),Bt=Ue(Mt,tn,an);if(Bt.active&&Bt.matches&&(Mt=Bt.matches),!Mt){je(Be,Ge,nc(404,{pathname:an}),{flushSync:kt});return}let{path:Rt,submission:zt,error:Vt}=g$(!0,an,bt);if(Vt){je(Be,Ge,Vt,{flushSync:kt});return}let $n=VS(Mt,Rt),fr=new d$(n.unstable_getContext?await n.unstable_getContext():void 0),Wr=(bt&&bt.preventScrollReset)===!0;if(zt&&th(zt.formMethod)){await fe(Be,Ge,Rt,$n,Mt,fr,Bt.active,kt,Wr,zt);return}j.set(Be,{routeId:Ge,path:Rt}),await Ne(Be,Ge,Rt,$n,Mt,fr,Bt.active,kt,Wr,zt)}async function fe(Be,Ge,nt,bt,kt,tn,an,Mt,Bt,Rt){Se(),j.delete(Be);function zt(wr){if(!wr.route.action&&!wr.route.lazy){let mi=nc(405,{method:Rt.formMethod,pathname:nt,routeId:Ge});return je(Be,Ge,mi,{flushSync:Mt}),!0}return!1}if(!an&&zt(bt))return;let Vt=x.fetchers.get(Be);Re(Be,Sve(Rt,Vt),{flushSync:Mt});let $n=new AbortController,fr=Lb(n.history,nt,$n.signal,Rt);if(an){let wr=await et(kt,nt,fr.signal,Be);if(wr.type==="aborted")return;if(wr.type==="error"){je(Be,Ge,wr.error,{flushSync:Mt});return}else if(wr.matches){if(kt=wr.matches,bt=VS(kt,nt),zt(bt))return}else{je(Be,Ge,nc(404,{pathname:nt}),{flushSync:Mt});return}}U.set(Be,$n);let Wr=B,ai=(await ue("action",fr,[bt],kt,tn,Be))[bt.route.id];if(fr.signal.aborted){U.get(Be)===$n&&U.delete(Be);return}if(q.has(Be)){if(Av(ai)||ll(ai)){Re(Be,Mg(void 0));return}}else{if(Av(ai))if(U.delete(Be),W>Wr){Re(Be,Mg(void 0));return}else return z.add(Be),Re(Be,C_(Rt)),Ae(fr,ai,!1,{fetcherSubmission:Rt,preventScrollReset:Bt});if(ll(ai)){je(Be,Ge,ai.error);return}}let $i=x.navigation.location||x.location,xc=Lb(n.history,$i,$n.signal),Th=o||a,Jo=x.navigation.state!=="idle"?zg(Th,x.navigation.location,s):x.matches;nr(Jo,"Didn't find any matches after fetcher action");let So=++B;Y.set(Be,So);let xy=C_(Rt,ai.data);x.fetchers.set(Be,xy);let[Hf,_r]=y$(n.history,x,Jo,Rt,$i,!1,I,R,q,j,z,Th,s,[bt.route.id,ai]);_r.filter(wr=>wr.key!==Be).forEach(wr=>{let mi=wr.key,Ir=x.fetchers.get(mi),Bn=C_(void 0,Ir?Ir.data:void 0);x.fetchers.set(mi,Bn),pt(mi),wr.controller&&U.set(mi,wr.controller)}),ie({fetchers:new Map(x.fetchers)});let Dh=()=>_r.forEach(wr=>pt(wr.key));$n.signal.addEventListener("abort",Dh);let{loaderResults:eu,fetcherResults:dr}=await me(Jo,Hf,_r,xc,tn);if($n.signal.aborted)return;$n.signal.removeEventListener("abort",Dh),Y.delete(Be),U.delete(Be),_r.forEach(wr=>U.delete(wr.key));let Ti=YA(eu);if(Ti)return Ae(xc,Ti.result,!1,{preventScrollReset:Bt});if(Ti=YA(dr),Ti)return z.add(Ti.key),Ae(xc,Ti.result,!1,{preventScrollReset:Bt});let{loaderData:qp,errors:Al}=S$(x,Jo,eu,void 0,_r,dr);if(x.fetchers.has(Be)){let wr=Mg(ai.data);x.fetchers.set(Be,wr)}ft(So),x.navigation.state==="loading"&&So>W?(nr(S,"Expected pending action"),A&&A.abort(),ce(x.navigation.location,{matches:Jo,loaderData:qp,errors:Al,fetchers:new Map(x.fetchers)})):(ie({errors:Al,loaderData:C$(x.loaderData,qp,Jo,Al),fetchers:new Map(x.fetchers)}),I=!1)}async function Ne(Be,Ge,nt,bt,kt,tn,an,Mt,Bt,Rt){let zt=x.fetchers.get(Be);Re(Be,C_(Rt,zt?zt.data:void 0),{flushSync:Mt});let Vt=new AbortController,$n=Lb(n.history,nt,Vt.signal);if(an){let ai=await et(kt,nt,$n.signal,Be);if(ai.type==="aborted")return;if(ai.type==="error"){je(Be,Ge,ai.error,{flushSync:Mt});return}else if(ai.matches)kt=ai.matches,bt=VS(kt,nt);else{je(Be,Ge,nc(404,{pathname:nt}),{flushSync:Mt});return}}U.set(Be,Vt);let fr=B,Ei=(await ue("loader",$n,[bt],kt,tn,Be))[bt.route.id];if(U.get(Be)===Vt&&U.delete(Be),!$n.signal.aborted){if(q.has(Be)){Re(Be,Mg(void 0));return}if(Av(Ei))if(W>fr){Re(Be,Mg(void 0));return}else{z.add(Be),await Ae($n,Ei,!1,{preventScrollReset:Bt});return}if(ll(Ei)){je(Be,Ge,Ei.error);return}Re(Be,Mg(Ei.data))}}async function Ae(Be,Ge,nt,{submission:bt,fetcherSubmission:kt,preventScrollReset:tn,replace:an}={}){Ge.response.headers.has("X-Remix-Revalidate")&&(I=!0);let Mt=Ge.response.headers.get("Location");nr(Mt,"Expected a Location header on the redirect Response"),Mt=x$(Mt,new URL(Be.url),s);let Bt=MC(x.location,Mt,{_isRedirect:!0});if(t){let Wr=!1;if(Ge.response.headers.has("X-Remix-Reload-Document"))Wr=!0;else if(OB.test(Mt)){const Ei=n.history.createURL(Mt);Wr=Ei.origin!==e.location.origin||dc(Ei.pathname,s)==null}if(Wr){an?e.location.replace(Mt):e.location.assign(Mt);return}}A=null;let Rt=an===!0||Ge.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:zt,formAction:Vt,formEncType:$n}=x.navigation;!bt&&!kt&&zt&&Vt&&$n&&(bt=A$(x.navigation));let fr=bt||kt;if(ive.has(Ge.response.status)&&fr&&th(fr.formMethod))await Ee(Rt,Bt,{submission:{...fr,formAction:Mt},preventScrollReset:tn||E,enableViewTransition:nt?k:void 0});else{let Wr=m5(Bt,bt);await Ee(Rt,Bt,{overrideNavigation:Wr,fetcherSubmission:kt,preventScrollReset:tn||E,enableViewTransition:nt?k:void 0})}}async function ue(Be,Ge,nt,bt,kt,tn){let an,Mt={};try{an=await pve(u,Be,Ge,nt,bt,tn,i,r,kt,l.unstable_middleware)}catch(Bt){return nt.forEach(Rt=>{Mt[Rt.route.id]={type:"error",error:Bt}}),Mt}for(let[Bt,Rt]of Object.entries(an))if(wve(Rt)){let zt=Rt.result;Mt[Bt]={type:"redirect",response:yve(zt,Ge,Bt,bt,s)}}else Mt[Bt]=await mve(Rt);return Mt}async function me(Be,Ge,nt,bt,kt){let tn=ue("loader",bt,Ge,Be,kt,null),an=Promise.all(nt.map(async Rt=>{if(Rt.matches&&Rt.match&&Rt.controller){let Vt=(await ue("loader",Lb(n.history,Rt.path,Rt.controller.signal),[Rt.match],Rt.matches,kt,Rt.key))[Rt.match.route.id];return{[Rt.key]:Vt}}else return Promise.resolve({[Rt.key]:{type:"error",error:nc(404,{pathname:Rt.path})}})})),Mt=await tn,Bt=(await an).reduce((Rt,zt)=>Object.assign(Rt,zt),{});return{loaderResults:Mt,fetcherResults:Bt}}function Se(){I=!0,j.forEach((Be,Ge)=>{U.has(Ge)&&R.add(Ge),pt(Ge)})}function Re(Be,Ge,nt={}){x.fetchers.set(Be,Ge),ie({fetchers:new Map(x.fetchers)},{flushSync:(nt&&nt.flushSync)===!0})}function je(Be,Ge,nt,bt={}){let kt=xv(x.matches,Ge);at(Be),ie({errors:{[kt.route.id]:nt},fetchers:new Map(x.fetchers)},{flushSync:(bt&&bt.flushSync)===!0})}function rt(Be){return M.set(Be,(M.get(Be)||0)+1),q.has(Be)&&q.delete(Be),x.fetchers.get(Be)||ave}function at(Be){let Ge=x.fetchers.get(Be);U.has(Be)&&!(Ge&&Ge.state==="loading"&&Y.has(Be))&&pt(Be),j.delete(Be),Y.delete(Be),z.delete(Be),q.delete(Be),R.delete(Be),x.fetchers.delete(Be)}function yt(Be){let Ge=(M.get(Be)||0)-1;Ge<=0?(M.delete(Be),q.add(Be)):M.set(Be,Ge),ie({fetchers:new Map(x.fetchers)})}function pt(Be){let Ge=U.get(Be);Ge&&(Ge.abort(),U.delete(Be))}function Le(Be){for(let Ge of Be){let nt=rt(Ge),bt=Mg(nt.data);x.fetchers.set(Ge,bt)}}function tt(){let Be=[],Ge=!1;for(let nt of z){let bt=x.fetchers.get(nt);nr(bt,`Expected fetcher: ${nt}`),bt.state==="loading"&&(z.delete(nt),Be.push(nt),Ge=!0)}return Le(Be),Ge}function ft(Be){let Ge=[];for(let[nt,bt]of Y)if(bt<Be){let kt=x.fetchers.get(nt);nr(kt,`Expected fetcher: ${nt}`),kt.state==="loading"&&(pt(nt),Y.delete(nt),Ge.push(nt))}return Le(Ge),Ge.length>0}function Et(Be,Ge){let nt=x.blockers.get(Be)||S_;return H.get(Be)!==Ge&&H.set(Be,Ge),nt}function xt(Be){x.blockers.delete(Be),H.delete(Be)}function Ot(Be,Ge){let nt=x.blockers.get(Be)||S_;nr(nt.state==="unblocked"&&Ge.state==="blocked"||nt.state==="blocked"&&Ge.state==="blocked"||nt.state==="blocked"&&Ge.state==="proceeding"||nt.state==="blocked"&&Ge.state==="unblocked"||nt.state==="proceeding"&&Ge.state==="unblocked",`Invalid blocker state transition: ${nt.state} -> ${Ge.state}`);let bt=new Map(x.blockers);bt.set(Be,Ge),ie({blockers:bt})}function dn({currentLocation:Be,nextLocation:Ge,historyAction:nt}){if(H.size===0)return;H.size>1&&Ss(!1,"A router only supports one blocker at a time");let bt=Array.from(H.entries()),[kt,tn]=bt[bt.length-1],an=x.blockers.get(kt);if(!(an&&an.state==="proceeding")&&tn({currentLocation:Be,nextLocation:Ge,historyAction:nt}))return kt}function Kr(Be){let Ge=nc(404,{pathname:Be}),nt=o||a,{matches:bt,route:kt}=T$(nt);return{notFoundMatches:bt,route:kt,error:Ge}}function Ba(Be,Ge,nt){if(f=Be,p=Ge,d=nt||null,!m&&x.navigation===g5){m=!0;let bt=De(x.location,x.matches);bt!=null&&ie({restoreScrollPosition:bt})}return()=>{f=null,p=null,d=null}}function Mu(Be,Ge){return d&&d(Be,Ge.map(bt=>Lye(bt,x.loaderData)))||Be.key}function xe(Be,Ge){if(f&&p){let nt=Mu(Be,Ge);f[nt]=p()}}function De(Be,Ge){if(f){let nt=Mu(Be,Ge),bt=f[nt];if(typeof bt=="number")return bt}return null}function Ue(Be,Ge,nt){if(n.patchRoutesOnNavigation)if(Be){if(Object.keys(Be[0].params).length>0)return{active:!0,matches:Vk(Ge,nt,s,!0)}}else return{active:!0,matches:Vk(Ge,nt,s,!0)||[]};return{active:!1,matches:null}}async function et(Be,Ge,nt,bt){if(!n.patchRoutesOnNavigation)return{type:"success",matches:Be};let kt=Be;for(;;){let tn=o==null,an=o||a,Mt=i;try{await n.patchRoutesOnNavigation({signal:nt,path:Ge,matches:kt,fetcherKey:bt,patch:(zt,Vt)=>{nt.aborted||b$(zt,Vt,an,Mt,r)}})}catch(zt){return{type:"error",error:zt,partialMatches:kt}}finally{tn&&!nt.aborted&&(a=[...a])}if(nt.aborted)return{type:"aborted"};let Bt=zg(an,Ge,s);if(Bt)return{type:"success",matches:Bt};let Rt=Vk(an,Ge,s,!0);if(!Rt||kt.length===Rt.length&&kt.every((zt,Vt)=>zt.route.id===Rt[Vt].route.id))return{type:"success",matches:null};kt=Rt}}function Nt(Be){i={},o=yN(Be,r,void 0,i)}function pn(Be,Ge){let nt=o==null;b$(Be,Ge,o||a,i,r),nt&&(a=[...a],ie({}))}return w={get basename(){return s},get future(){return l},get state(){return x},get routes(){return a},get window(){return e},initialize:J,subscribe:ae,enableScrollRestoration:Ba,navigate:ge,fetch:ne,revalidate:Ce,createHref:Be=>n.history.createHref(Be),encodeLocation:Be=>n.history.encodeLocation(Be),getFetcher:rt,deleteFetcher:yt,dispose:X,getBlocker:Et,deleteBlocker:xt,patchRoutes:pn,_internalFetchControllers:U,_internalSetRoutes:Nt},w}function uve(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function o6(n,e,t,r,i,a){let o,s;if(i){o=[];for(let l of e)if(o.push(l),l.route.id===i){s=l;break}}else o=e,s=e[e.length-1];let u=iR(r||".",rR(o),dc(n.pathname,t)||n.pathname,a==="path");if(r==null&&(u.search=n.search,u.hash=n.hash),(r==null||r===""||r===".")&&s){let l=RB(u.search);if(s.route.index&&!l)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&l){let h=new URLSearchParams(u.search),c=h.getAll("index");h.delete("index"),c.filter(d=>d).forEach(d=>h.append("index",d));let f=h.toString();u.search=f?`?${f}`:""}}return t!=="/"&&(u.pathname=u.pathname==="/"?t:If([t,u.pathname])),Bm(u)}function g$(n,e,t){if(!t||!uve(t))return{path:e};if(t.formMethod&&!xve(t.formMethod))return{path:e,error:nc(405,{method:t.formMethod})};let r=()=>({path:e,error:nc(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),o=QJ(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!th(a))return r();let c=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((f,[d,p])=>`${f}${d}=${p}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:o,formEncType:t.formEncType,formData:void 0,json:void 0,text:c}}}else if(t.formEncType==="application/json"){if(!th(a))return r();try{let c=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:o,formEncType:t.formEncType,formData:void 0,json:c,text:void 0}}}catch{return r()}}}nr(typeof FormData=="function","FormData is not available in this environment");let s,u;if(t.formData)s=l6(t.formData),u=t.formData;else if(t.body instanceof FormData)s=l6(t.body),u=t.body;else if(t.body instanceof URLSearchParams)s=t.body,u=_$(s);else if(t.body==null)s=new URLSearchParams,u=new FormData;else try{s=new URLSearchParams(t.body),u=_$(s)}catch{return r()}let l={formMethod:a,formAction:o,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(th(l.formMethod))return{path:e,submission:l};let h=ay(e);return n&&h.search&&RB(h.search)&&s.append("index",""),h.search=`?${s}`,{path:Bm(h),submission:l}}function m$(n,e,t=!1){let r=n.findIndex(i=>i.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function y$(n,e,t,r,i,a,o,s,u,l,h,c,f,d){let p=d?ll(d[1])?d[1].error:d[1].data:void 0,m=n.createURL(e.location),g=n.createURL(i),y=t;a&&e.errors?y=m$(t,Object.keys(e.errors)[0],!0):d&&ll(d[1])&&(y=m$(t,d[0]));let v=d?d[1].statusCode:void 0,b=v&&v>=400,w=y.filter((S,E)=>{let{route:A}=S;if(A.lazy)return!0;if(A.loader==null)return!1;if(a)return u6(A,e.loaderData,e.errors);if(lve(e.loaderData,e.matches[E],S))return!0;let k=e.matches[E],T=S;return v$(S,{currentUrl:m,currentParams:k.params,nextUrl:g,nextParams:T.params,...r,actionResult:p,actionStatus:v,defaultShouldRevalidate:b?!1:o||m.pathname+m.search===g.pathname+g.search||m.search!==g.search||cve(k,T)})}),x=[];return l.forEach((S,E)=>{if(a||!t.some(F=>F.route.id===S.routeId)||u.has(E))return;let A=zg(c,S.path,f);if(!A){x.push({key:E,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let k=e.fetchers.get(E),T=VS(A,S.path),O=!1;h.has(E)?O=!1:s.has(E)?(s.delete(E),O=!0):k&&k.state!=="idle"&&k.data===void 0?O=o:O=v$(T,{currentUrl:m,currentParams:e.matches[e.matches.length-1].params,nextUrl:g,nextParams:t[t.length-1].params,...r,actionResult:p,actionStatus:v,defaultShouldRevalidate:b?!1:o}),O&&x.push({key:E,routeId:S.routeId,path:S.path,matches:A,match:T,controller:new AbortController})}),[w,x]}function u6(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function lve(n,e,t){let r=!e||t.route.id!==e.route.id,i=!n.hasOwnProperty(t.route.id);return r||i}function cve(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function v$(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function b$(n,e,t,r,i){let a;if(n){let u=r[n];nr(u,`No route found to patch children into: routeId = ${n}`),u.children||(u.children=[]),a=u.children}else a=t;let o=e.filter(u=>!a.some(l=>KJ(u,l))),s=yN(o,i,[n||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...s)}function KJ(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(a=>KJ(t,a))}):!1}async function hve(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let i=t[n.id];nr(i,"No route found in manifest");let a={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";Ss(!u,`Route "${i.id}" has a static property "${o}" defined but its lazy function is also returning a value for this property. The lazy route property "${o}" will be ignored.`),!u&&!Fye.has(o)&&(a[o]=r[o])}Object.assign(i,a),Object.assign(i,{...e(i),lazy:void 0})}async function w$(n){let e=n.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,a)=>{t[e[a].route.id]=i}),t}async function fve(n){return n.matches.some(e=>e.route.unstable_middleware)?dve(n,!1,()=>w$(n),(e,t)=>({[t]:{type:"error",result:e}})):w$(n)}async function dve(n,e,t,r){let{matches:i,request:a,params:o,context:s}=n,u={handlerResult:void 0};try{let l=i.flatMap(c=>c.route.unstable_middleware?c.route.unstable_middleware.map(f=>[c.route.id,f]):[]),h=await YJ({request:a,params:o,context:s},l,e,u,t);return e?h:u.handlerResult}catch(l){if(!u.middlewareError)throw l;let h=await r(u.middlewareError.error,u.middlewareError.routeId);return u.handlerResult?Object.assign(u.handlerResult,h):h}}async function YJ(n,e,t,r,i,a=0){let{request:o}=n;if(o.signal.aborted)throw o.signal.reason?o.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${o.method} ${o.url}`);let s=e[a];if(!s)return r.handlerResult=await i(),r.handlerResult;let[u,l]=s,h=!1,c,f=async()=>{if(h)throw new Error("You may only call `next()` once per middleware");h=!0,await YJ(n,e,t,r,i,a+1)};try{let d=await l({request:n.request,params:n.params,context:n.context},f);return h?d===void 0?c:d:f()}catch(d){throw r.middlewareError?r.middlewareError.error!==d&&(r.middlewareError={routeId:u,error:d}):r.middlewareError={routeId:u,error:d},d}}async function pve(n,e,t,r,i,a,o,s,u,l){let h=i.map(d=>d.route.lazy?hve(d.route,s,o):void 0);l&&await Promise.all(h);let c=i.map((d,p)=>{let m=h[p],g=r.some(v=>v.route.id===d.route.id);return{...d,shouldLoad:g,resolve:async v=>(v&&t.method==="GET"&&(d.route.lazy||d.route.loader)&&(g=!0),g?gve(e,t,d,m,v,u):Promise.resolve({type:"data",result:void 0}))}}),f=await n({matches:c,request:t,params:i[0].params,fetcherKey:a,context:u});try{await Promise.all(h)}catch{}return f}async function gve(n,e,t,r,i,a){let o,s,u=l=>{let h,c=new Promise((p,m)=>h=m);s=()=>h(),e.signal.addEventListener("abort",s);let f=p=>typeof l!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):l({request:e,params:t.params,context:a},...p!==void 0?[p]:[]),d=(async()=>{try{return{type:"data",result:await(i?i(m=>f(m)):f())}}catch(p){return{type:"error",result:p}}})();return Promise.race([d,c])};try{let l=t.route[n];if(r)if(l){let h,[c]=await Promise.all([u(l).catch(f=>{h=f}),r]);if(h!==void 0)throw h;o=c}else if(await r,l=t.route[n],l)o=await u(l);else if(n==="action"){let h=new URL(e.url),c=h.pathname+h.search;throw nc(405,{method:e.method,pathname:c,routeId:t.route.id})}else return{type:"data",result:void 0};else if(l)o=await u(l);else{let h=new URL(e.url),c=h.pathname+h.search;throw nc(404,{pathname:c})}}catch(l){return{type:"error",result:l}}finally{s&&e.signal.removeEventListener("abort",s)}return o}async function mve(n){var r,i,a,o,s,u;let{result:e,type:t}=n;if(ZJ(e)){let l;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?l=null:l=await e.json():l=await e.text()}catch(h){return{type:"error",error:h}}return t==="error"?{type:"error",error:new bN(e.status,e.statusText,l),statusCode:e.status,headers:e.headers}:{type:"data",data:l,statusCode:e.status,headers:e.headers}}return t==="error"?D$(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new bN(((a=e.init)==null?void 0:a.status)||500,void 0,e.data),statusCode:UC(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:UC(e)?e.status:void 0}:D$(e)?{type:"data",data:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function yve(n,e,t,r,i){let a=n.headers.get("Location");if(nr(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!OB.test(a)){let o=r.slice(0,r.findIndex(s=>s.route.id===t)+1);a=o6(new URL(e.url),o,i,a),n.headers.set("Location",a)}return n}function x$(n,e,t){if(OB.test(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=dc(i.pathname,t)!=null;if(i.origin===e.origin&&a)return i.pathname+i.search+i.hash}return n}function Lb(n,e,t,r){let i=n.createURL(QJ(e)).toString(),a={signal:t};if(r&&th(r.formMethod)){let{formMethod:o,formEncType:s}=r;a.method=o.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(r.json)):s==="text/plain"?a.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?a.body=l6(r.formData):a.body=r.formData}return new Request(i,a)}function l6(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function _$(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function vve(n,e,t,r=!1,i=!1){let a={},o=null,s,u=!1,l={},h=t&&ll(t[1])?t[1].error:void 0;return n.forEach(c=>{if(!(c.route.id in e))return;let f=c.route.id,d=e[f];if(nr(!Av(d),"Cannot handle redirect results in processLoaderData"),ll(d)){let p=d.error;if(h!==void 0&&(p=h,h=void 0),o=o||{},i)o[f]=p;else{let m=xv(n,f);o[m.route.id]==null&&(o[m.route.id]=p)}r||(a[f]=XJ),u||(u=!0,s=UC(d.error)?d.error.status:500),d.headers&&(l[f]=d.headers)}else a[f]=d.data,d.statusCode&&d.statusCode!==200&&!u&&(s=d.statusCode),d.headers&&(l[f]=d.headers)}),h!==void 0&&t&&(o={[t[0]]:h},a[t[0]]=void 0),{loaderData:a,errors:o,statusCode:s||200,loaderHeaders:l}}function S$(n,e,t,r,i,a){let{loaderData:o,errors:s}=vve(e,t,r);return i.forEach(u=>{let{key:l,match:h,controller:c}=u,f=a[l];if(nr(f,"Did not find corresponding fetcher result"),!(c&&c.signal.aborted))if(ll(f)){let d=xv(n.matches,h==null?void 0:h.route.id);s&&s[d.route.id]||(s={...s,[d.route.id]:f.error}),n.fetchers.delete(l)}else if(Av(f))nr(!1,"Unhandled fetcher revalidation redirect");else{let d=Mg(f.data);n.fetchers.set(l,d)}}),{loaderData:o,errors:s}}function C$(n,e,t,r){let i=Object.entries(e).filter(([,a])=>a!==XJ).reduce((a,[o,s])=>(a[o]=s,a),{});for(let a of t){let o=a.route.id;if(!e.hasOwnProperty(o)&&n.hasOwnProperty(o)&&a.route.loader&&(i[o]=n[o]),r&&r.hasOwnProperty(o))break}return i}function E$(n){return n?ll(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function xv(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function T$(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function nc(n,{pathname:e,routeId:t,method:r,type:i,message:a}={}){let o="Unknown Server Error",s="Unknown @remix-run/router error";return n===400?(o="Bad Request",r&&e&&t?s=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(s="Unable to encode submission body")):n===403?(o="Forbidden",s=`Route "${t}" does not match URL "${e}"`):n===404?(o="Not Found",s=`No route matches URL "${e}"`):n===405&&(o="Method Not Allowed",r&&e&&t?s=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(s=`Invalid request method "${r.toUpperCase()}"`)),new bN(n||500,o,new Error(s),!0)}function YA(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(Av(i))return{key:r,result:i}}}function QJ(n){let e=typeof n=="string"?ay(n):n;return Bm({...e,hash:""})}function bve(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function wve(n){return ZJ(n.result)&&rve.has(n.result.status)}function ll(n){return n.type==="error"}function Av(n){return(n&&n.type)==="redirect"}function D$(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function ZJ(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function xve(n){return nve.has(n.toUpperCase())}function th(n){return eve.has(n.toUpperCase())}function RB(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function VS(n,e){let t=typeof e=="string"?ay(e).search:e.search;if(n[n.length-1].route.index&&RB(t||""))return n[n.length-1];let r=VJ(n);return r[r.length-1]}function A$(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:a,json:o}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:o,text:void 0}}}function m5(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function _ve(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function C_(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Sve(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Mg(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function Cve(n,e){try{let t=n.sessionStorage.getItem(GJ);if(t){let r=JSON.parse(t);for(let[i,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function Eve(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(GJ,JSON.stringify(t))}catch(r){Ss(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function Tve(){let n,e,t=new Promise((r,i)=>{n=async a=>{r(a);try{await t}catch{}},e=async a=>{i(a);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var E1=pe.createContext(null);E1.displayName="DataRouter";var QT=pe.createContext(null);QT.displayName="DataRouterState";var IB=pe.createContext({isTransitioning:!1});IB.displayName="ViewTransition";var JJ=pe.createContext(new Map);JJ.displayName="Fetchers";var Dve=pe.createContext(null);Dve.displayName="Await";var wh=pe.createContext(null);wh.displayName="Navigation";var aR=pe.createContext(null);aR.displayName="Location";var Wf=pe.createContext({outlet:null,matches:[],isDataRoute:!1});Wf.displayName="Route";var FB=pe.createContext(null);FB.displayName="RouteError";function Ave(n,{relative:e}={}){nr(ux(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=pe.useContext(wh),{hash:i,pathname:a,search:o}=ZT(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:If([t,a])),r.createHref({pathname:s,search:o,hash:i})}function ux(){return pe.useContext(aR)!=null}function sy(){return nr(ux(),"useLocation() may be used only in the context of a <Router> component."),pe.useContext(aR).location}var eee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tee(n){pe.useContext(wh).static||pe.useLayoutEffect(n)}function sR(){let{isDataRoute:n}=pe.useContext(Wf);return n?Wve():kve()}function kve(){nr(ux(),"useNavigate() may be used only in the context of a <Router> component.");let n=pe.useContext(E1),{basename:e,navigator:t}=pe.useContext(wh),{matches:r}=pe.useContext(Wf),{pathname:i}=sy(),a=JSON.stringify(rR(r)),o=pe.useRef(!1);return tee(()=>{o.current=!0}),pe.useCallback((u,l={})=>{if(Ss(o.current,eee),!o.current)return;if(typeof u=="number"){t.go(u);return}let h=iR(u,JSON.parse(a),i,l.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:If([e,h.pathname])),(l.replace?t.replace:t.push)(h,l.state,l)},[e,t,a,i,n])}pe.createContext(null);function ZT(n,{relative:e}={}){let{matches:t}=pe.useContext(Wf),{pathname:r}=sy(),i=JSON.stringify(rR(t));return pe.useMemo(()=>iR(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Nve(n,e,t,r){nr(ux(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=pe.useContext(wh),{matches:o}=pe.useContext(Wf),s=o[o.length-1],u=s?s.params:{},l=s?s.pathname:"/",h=s?s.pathnameBase:"/",c=s&&s.route;{let v=c&&c.path||"";nee(l,!c||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=sy(),d;d=f;let p=d.pathname||"/",m=p;if(h!=="/"){let v=h.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=!a&&t&&t.matches&&t.matches.length>0?t.matches:zg(n,{pathname:m});return Ss(c||g!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Ss(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Pve(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:If([h,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?h:If([h,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,t,r)}function Ove(){let n=zve(),e=UC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=pe.createElement(pe.Fragment,null,pe.createElement("p",null," Hey developer "),pe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",pe.createElement("code",{style:a},"ErrorBoundary")," or"," ",pe.createElement("code",{style:a},"errorElement")," prop on your route.")),pe.createElement(pe.Fragment,null,pe.createElement("h2",null,"Unexpected Application Error!"),pe.createElement("h3",{style:{fontStyle:"italic"}},e),t?pe.createElement("pre",{style:i},t):null,o)}var Rve=pe.createElement(Ove,null),Ive=class extends pe.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?pe.createElement(Wf.Provider,{value:this.props.routeContext},pe.createElement(FB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Fve({routeContext:n,match:e,children:t}){let r=pe.useContext(E1);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),pe.createElement(Wf.Provider,{value:n},t)}function Pve(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let u=i.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id])!==void 0);nr(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,s=-1;if(t)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(s=u),l.route.id){let{loaderData:h,errors:c}=t,f=l.route.loader&&!h.hasOwnProperty(l.route.id)&&(!c||c[l.route.id]===void 0);if(l.route.lazy||f){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((u,l,h)=>{let c,f=!1,d=null,p=null;t&&(c=a&&l.route.id?a[l.route.id]:void 0,d=l.route.errorElement||Rve,o&&(s<0&&h===0?(nee("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):s===h&&(f=!0,p=l.route.hydrateFallbackElement||null)));let m=e.concat(i.slice(0,h+1)),g=()=>{let y;return c?y=d:f?y=p:l.route.Component?y=pe.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=u,pe.createElement(Fve,{match:l,routeContext:{outlet:u,matches:m,isDataRoute:t!=null},children:y})};return t&&(l.route.ErrorBoundary||l.route.errorElement||h===0)?pe.createElement(Ive,{location:t.location,revalidation:t.revalidation,component:d,error:c,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}function PB(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lve(n){let e=pe.useContext(E1);return nr(e,PB(n)),e}function Mve(n){let e=pe.useContext(QT);return nr(e,PB(n)),e}function Uve(n){let e=pe.useContext(Wf);return nr(e,PB(n)),e}function LB(n){let e=Uve(n),t=e.matches[e.matches.length-1];return nr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Bve(){return LB("useRouteId")}function zve(){var r;let n=pe.useContext(FB),e=Mve("useRouteError"),t=LB("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function Wve(){let{router:n}=Lve("useNavigate"),e=LB("useNavigate"),t=pe.useRef(!1);return tee(()=>{t.current=!0}),pe.useCallback(async(i,a={})=>{Ss(t.current,eee),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var k$={};function nee(n,e,t){!e&&!k$[n]&&(k$[n]=!0,Ss(!1,t))}var N$={};function O$(n,e){!n&&!N$[e]&&(N$[e]=!0,console.warn(e))}function jve(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Ss(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:pe.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Ss(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:pe.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Ss(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:pe.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var $ve=class{constructor(){this.status="pending",this.promise=new Promise((n,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",n(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function qve({router:n,flushSync:e}){let[t,r]=pe.useState(n.state),[i,a]=pe.useState(),[o,s]=pe.useState({isTransitioning:!1}),[u,l]=pe.useState(),[h,c]=pe.useState(),[f,d]=pe.useState(),p=pe.useRef(new Map),m=pe.useCallback((b,{deletedFetchers:w,flushSync:x,viewTransitionOpts:S})=>{b.fetchers.forEach((A,k)=>{A.data!==void 0&&p.current.set(k,A.data)}),w.forEach(A=>p.current.delete(A)),O$(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let E=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(O$(S==null||E,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!S||!E){e&&x?e(()=>r(b)):pe.startTransition(()=>r(b));return}if(e&&x){e(()=>{h&&(u&&u.resolve(),h.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:S.currentLocation,nextLocation:S.nextLocation})});let A=n.window.document.startViewTransition(()=>{e(()=>r(b))});A.finished.finally(()=>{e(()=>{l(void 0),c(void 0),a(void 0),s({isTransitioning:!1})})}),e(()=>c(A));return}h?(u&&u.resolve(),h.skipTransition(),d({state:b,currentLocation:S.currentLocation,nextLocation:S.nextLocation})):(a(b),s({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}))},[n.window,e,h,u]);pe.useLayoutEffect(()=>n.subscribe(m),[n,m]),pe.useEffect(()=>{o.isTransitioning&&!o.flushSync&&l(new $ve)},[o]),pe.useEffect(()=>{if(u&&i&&n.window){let b=i,w=u.promise,x=n.window.document.startViewTransition(async()=>{pe.startTransition(()=>r(b)),await w});x.finished.finally(()=>{l(void 0),c(void 0),a(void 0),s({isTransitioning:!1})}),c(x)}},[i,u,n.window]),pe.useEffect(()=>{u&&i&&t.location.key===i.location.key&&u.resolve()},[u,h,t.location,i]),pe.useEffect(()=>{!o.isTransitioning&&f&&(a(f.state),s({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),d(void 0))},[o.isTransitioning,f]);let g=pe.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:b=>n.navigate(b),push:(b,w,x)=>n.navigate(b,{state:w,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(b,w,x)=>n.navigate(b,{replace:!0,state:w,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),y=n.basename||"/",v=pe.useMemo(()=>({router:n,navigator:g,static:!1,basename:y}),[n,g,y]);return pe.createElement(pe.Fragment,null,pe.createElement(E1.Provider,{value:v},pe.createElement(QT.Provider,{value:t},pe.createElement(JJ.Provider,{value:p.current},pe.createElement(IB.Provider,{value:o},pe.createElement(Xve,{basename:y,location:t.location,navigationType:t.historyAction,navigator:g},pe.createElement(Vve,{routes:n.routes,future:n.future,state:t})))))),null)}var Vve=pe.memo(Hve);function Hve({routes:n,future:e,state:t}){return Nve(n,void 0,t,e)}function Gve({to:n,replace:e,state:t,relative:r}){nr(ux(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=pe.useContext(wh);Ss(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=pe.useContext(Wf),{pathname:o}=sy(),s=sR(),u=iR(n,rR(a),o,r==="path"),l=JSON.stringify(u);return pe.useEffect(()=>{s(JSON.parse(l),{replace:e,state:t,relative:r})},[s,l,r,e,t]),null}function Xve({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){nr(!ux(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=pe.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=ay(t));let{pathname:u="/",search:l="",hash:h="",state:c=null,key:f="default"}=t,d=pe.useMemo(()=>{let p=dc(u,o);return p==null?null:{location:{pathname:p,search:l,hash:h,state:c,key:f},navigationType:r}},[o,u,l,h,c,f,r]);return Ss(d!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${h}" because it does not start with the basename, so the <Router> won't render anything.`),d==null?null:pe.createElement(wh.Provider,{value:s},pe.createElement(aR.Provider,{children:e,value:d}))}var Hk="get",Gk="application/x-www-form-urlencoded";function oR(n){return n!=null&&typeof n.tagName=="string"}function Kve(n){return oR(n)&&n.tagName.toLowerCase()==="button"}function Yve(n){return oR(n)&&n.tagName.toLowerCase()==="form"}function Qve(n){return oR(n)&&n.tagName.toLowerCase()==="input"}function Zve(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Jve(n,e){return n.button===0&&(!e||e==="_self")&&!Zve(n)}var QA=null;function e0e(){if(QA===null)try{new FormData(document.createElement("form"),0),QA=!1}catch{QA=!0}return QA}var t0e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function y5(n){return n!=null&&!t0e.has(n)?(Ss(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gk}"`),null):n}function n0e(n,e){let t,r,i,a,o;if(Yve(n)){let s=n.getAttribute("action");r=s?dc(s,e):null,t=n.getAttribute("method")||Hk,i=y5(n.getAttribute("enctype"))||Gk,a=new FormData(n)}else if(Kve(n)||Qve(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||s.getAttribute("action");if(r=u?dc(u,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||Hk,i=y5(n.getAttribute("formenctype"))||y5(s.getAttribute("enctype"))||Gk,a=new FormData(s,n),!e0e()){let{name:l,type:h,value:c}=n;if(h==="image"){let f=l?`${l}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else l&&a.append(l,c)}}else{if(oR(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Hk,r=null,i=Gk,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function MB(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function r0e(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function i0e(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function a0e(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await r0e(a,t);return o.links?o.links():[]}return[]}));return l0e(r.flat(1).filter(i0e).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function R$(n,e,t,r,i,a){let o=(u,l)=>t[l]?u.route.id!==t[l].route.id:!0,s=(u,l)=>{var h;return t[l].pathname!==u.pathname||((h=t[l].route.path)==null?void 0:h.endsWith("*"))&&t[l].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,l)=>o(u,l)||s(u,l)):a==="data"?e.filter((u,l)=>{var c;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,l)||s(u,l))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((c=t[0])==null?void 0:c.params)||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function s0e(n,e,{includeHydrateFallback:t}={}){return o0e(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function o0e(n){return[...new Set(n)]}function u0e(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function l0e(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(u0e(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function c0e(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&dc(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function ree(){let n=pe.useContext(E1);return MB(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function h0e(){let n=pe.useContext(QT);return MB(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var UB=pe.createContext(void 0);UB.displayName="FrameworkContext";function iee(){let n=pe.useContext(UB);return MB(n,"You must render this element inside a <HydratedRouter> element"),n}function f0e(n,e){let t=pe.useContext(UB),[r,i]=pe.useState(!1),[a,o]=pe.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:l,onMouseLeave:h,onTouchStart:c}=e,f=pe.useRef(null);pe.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let m=y=>{y.forEach(v=>{o(v.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return f.current&&g.observe(f.current),()=>{g.disconnect()}}},[n]),pe.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let d=()=>{i(!0)},p=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,f,{}]:[a,f,{onFocus:E_(s,d),onBlur:E_(u,p),onMouseEnter:E_(l,d),onMouseLeave:E_(h,p),onTouchStart:E_(c,d)}]:[!1,f,{}]}function E_(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function d0e({page:n,...e}){let{router:t}=ree(),r=pe.useMemo(()=>zg(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?pe.createElement(g0e,{page:n,matches:r,...e}):null}function p0e(n){let{manifest:e,routeModules:t}=iee(),[r,i]=pe.useState([]);return pe.useEffect(()=>{let a=!1;return a0e(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function g0e({page:n,matches:e,...t}){let r=sy(),{manifest:i,routeModules:a}=iee(),{basename:o}=ree(),{loaderData:s,matches:u}=h0e(),l=pe.useMemo(()=>R$(n,e,u,i,r,"data"),[n,e,u,i,r]),h=pe.useMemo(()=>R$(n,e,u,i,r,"assets"),[n,e,u,i,r]),c=pe.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let p=new Set,m=!1;if(e.forEach(y=>{var b;let v=i.routes[y.route.id];!v||!v.hasLoader||(!l.some(w=>w.route.id===y.route.id)&&y.route.id in s&&((b=a[y.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?m=!0:p.add(y.route.id))}),p.size===0)return[];let g=c0e(n,o);return m&&p.size>0&&g.searchParams.set("_routes",e.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[g.pathname+g.search]},[o,s,r,i,l,e,n,a]),f=pe.useMemo(()=>s0e(h,i),[h,i]),d=p0e(h);return pe.createElement(pe.Fragment,null,c.map(p=>pe.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...t})),f.map(p=>pe.createElement("link",{key:p,rel:"modulepreload",href:p,...t})),d.map(({key:p,link:m})=>pe.createElement("link",{key:p,...m})))}function m0e(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var aee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aee&&(window.__reactRouterVersion="7.4.0")}catch{}function y0e(n,e){return ove({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:Oye({window:e==null?void 0:e.window}),hydrationData:v0e(),routes:n,mapRouteProperties:jve,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function v0e(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:b0e(n.errors)}),n}function b0e(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new bN(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let o=new a(i.message);o.stack="",t[r]=o}catch{}}if(t[r]==null){let a=new Error(i.message);a.stack="",t[r]=a}}else t[r]=i;return t}var see=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oee=pe.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:u,to:l,preventScrollReset:h,viewTransition:c,...f},d){let{basename:p}=pe.useContext(wh),m=typeof l=="string"&&see.test(l),g,y=!1;if(typeof l=="string"&&m&&(g=l,aee))try{let k=new URL(window.location.href),T=l.startsWith("//")?new URL(k.protocol+l):new URL(l),O=dc(T.pathname,p);T.origin===k.origin&&O!=null?l=O+T.search+T.hash:y=!0}catch{Ss(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=Ave(l,{relative:i}),[b,w,x]=f0e(r,f),S=S0e(l,{replace:o,state:s,target:u,preventScrollReset:h,relative:i,viewTransition:c});function E(k){e&&e(k),k.defaultPrevented||S(k)}let A=pe.createElement("a",{...f,...x,href:g||v,onClick:y||a?e:E,ref:m0e(d,w),target:u,"data-discover":!m&&t==="render"?"true":void 0});return b&&!m?pe.createElement(pe.Fragment,null,A,pe.createElement(d0e,{page:v})):A});oee.displayName="Link";var w0e=pe.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:u,...l},h){let c=ZT(o,{relative:l.relative}),f=sy(),d=pe.useContext(QT),{navigator:p,basename:m}=pe.useContext(wh),g=d!=null&&A0e(c)&&s===!0,y=p.encodeLocation?p.encodeLocation(c).pathname:c.pathname,v=f.pathname,b=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;t||(v=v.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&m&&(b=dc(b,m)||b);const w=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let x=v===y||!i&&v.startsWith(y)&&v.charAt(w)==="/",S=b!=null&&(b===y||!i&&b.startsWith(y)&&b.charAt(y.length)==="/"),E={isActive:x,isPending:S,isTransitioning:g},A=x?e:void 0,k;typeof r=="function"?k=r(E):k=[r,x?"active":null,S?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(E):a;return pe.createElement(oee,{...l,"aria-current":A,className:k,ref:h,style:T,to:o,viewTransition:s},typeof u=="function"?u(E):u)});w0e.displayName="NavLink";var x0e=pe.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Hk,action:s,onSubmit:u,relative:l,preventScrollReset:h,viewTransition:c,...f},d)=>{let p=T0e(),m=D0e(s,{relative:l}),g=o.toLowerCase()==="get"?"get":"post",y=typeof s=="string"&&see.test(s),v=b=>{if(u&&u(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,x=(w==null?void 0:w.getAttribute("formmethod"))||o;p(w||b.currentTarget,{fetcherKey:e,method:x,navigate:t,replace:i,state:a,relative:l,preventScrollReset:h,viewTransition:c})};return pe.createElement("form",{ref:d,method:g,action:m,onSubmit:r?u:v,...f,"data-discover":!y&&n==="render"?"true":void 0})});x0e.displayName="Form";function _0e(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uee(n){let e=pe.useContext(E1);return nr(e,_0e(n)),e}function S0e(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=sR(),u=sy(),l=ZT(n,{relative:a});return pe.useCallback(h=>{if(Jve(h,e)){h.preventDefault();let c=t!==void 0?t:Bm(u)===Bm(l);s(n,{replace:c,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,s,l,t,r,e,n,i,a,o])}var C0e=0,E0e=()=>`__${String(++C0e)}__`;function T0e(){let{router:n}=uee("useSubmit"),{basename:e}=pe.useContext(wh),t=Bve();return pe.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:u,body:l}=n0e(r,e);if(i.navigate===!1){let h=i.fetcherKey||E0e();await n.fetch(h,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function D0e(n,{relative:e}={}){let{basename:t}=pe.useContext(wh),r=pe.useContext(Wf);nr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...ZT(n||".",{relative:e})},o=sy();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),u=s.getAll("index");if(u.some(h=>h==="")){s.delete("index"),u.filter(c=>c).forEach(c=>s.append("index",c));let h=s.toString();a.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:If([t,a.pathname])),Bm(a)}function A0e(n,e={}){let t=pe.useContext(IB);nr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uee("useViewTransitionState"),i=ZT(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=dc(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=dc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return vN(i.pathname,o)!=null||vN(i.pathname,a)!=null}new TextEncoder;const BC={black:"#000",white:"#fff"},Mb={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Ub={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Bb={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},zb={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Wb={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},T_={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},k0e={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function _p(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}const uR="$$material";function wN(){return wN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wN.apply(null,arguments)}function N0e(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function O0e(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var R0e=function(){function n(t){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(O0e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=N0e(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},n}(),no="-ms-",xN="-moz-",Tr="-webkit-",lee="comm",BB="rule",zB="decl",I0e="@import",cee="@keyframes",F0e="@layer",P0e=Math.abs,lR=String.fromCharCode,L0e=Object.assign;function M0e(n,e){return qs(n,0)^45?(((e<<2^qs(n,0))<<2^qs(n,1))<<2^qs(n,2))<<2^qs(n,3):0}function hee(n){return n.trim()}function U0e(n,e){return(n=e.exec(n))?n[0]:n}function Ar(n,e,t){return n.replace(e,t)}function c6(n,e){return n.indexOf(e)}function qs(n,e){return n.charCodeAt(e)|0}function zC(n,e,t){return n.slice(e,t)}function Sf(n){return n.length}function WB(n){return n.length}function ZA(n,e){return e.push(n),n}function B0e(n,e){return n.map(e).join("")}var cR=1,Ww=1,fee=0,ku=0,Oa=0,lx="";function hR(n,e,t,r,i,a,o){return{value:n,root:e,parent:t,type:r,props:i,children:a,line:cR,column:Ww,length:o,return:""}}function D_(n,e){return L0e(hR("",null,null,"",null,null,0),n,{length:-n.length},e)}function z0e(){return Oa}function W0e(){return Oa=ku>0?qs(lx,--ku):0,Ww--,Oa===10&&(Ww=1,cR--),Oa}function vl(){return Oa=ku<fee?qs(lx,ku++):0,Ww++,Oa===10&&(Ww=1,cR++),Oa}function Ff(){return qs(lx,ku)}function Xk(){return ku}function JT(n,e){return zC(lx,n,e)}function WC(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dee(n){return cR=Ww=1,fee=Sf(lx=n),ku=0,[]}function pee(n){return lx="",n}function Kk(n){return hee(JT(ku-1,h6(n===91?n+2:n===40?n+1:n)))}function j0e(n){for(;(Oa=Ff())&&Oa<33;)vl();return WC(n)>2||WC(Oa)>3?"":" "}function $0e(n,e){for(;--e&&vl()&&!(Oa<48||Oa>102||Oa>57&&Oa<65||Oa>70&&Oa<97););return JT(n,Xk()+(e<6&&Ff()==32&&vl()==32))}function h6(n){for(;vl();)switch(Oa){case n:return ku;case 34:case 39:n!==34&&n!==39&&h6(Oa);break;case 40:n===41&&h6(n);break;case 92:vl();break}return ku}function q0e(n,e){for(;vl()&&n+Oa!==57;)if(n+Oa===84&&Ff()===47)break;return"/*"+JT(e,ku-1)+"*"+lR(n===47?n:vl())}function V0e(n){for(;!WC(Ff());)vl();return JT(n,ku)}function H0e(n){return pee(Yk("",null,null,null,[""],n=dee(n),0,[0],n))}function Yk(n,e,t,r,i,a,o,s,u){for(var l=0,h=0,c=o,f=0,d=0,p=0,m=1,g=1,y=1,v=0,b="",w=i,x=a,S=r,E=b;g;)switch(p=v,v=vl()){case 40:if(p!=108&&qs(E,c-1)==58){c6(E+=Ar(Kk(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=Kk(v);break;case 9:case 10:case 13:case 32:E+=j0e(p);break;case 92:E+=$0e(Xk()-1,7);continue;case 47:switch(Ff()){case 42:case 47:ZA(G0e(q0e(vl(),Xk()),e,t),u);break;default:E+="/"}break;case 123*m:s[l++]=Sf(E)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+h:y==-1&&(E=Ar(E,/\f/g,"")),d>0&&Sf(E)-c&&ZA(d>32?F$(E+";",r,t,c-1):F$(Ar(E," ","")+";",r,t,c-2),u);break;case 59:E+=";";default:if(ZA(S=I$(E,e,t,l,h,i,s,b,w=[],x=[],c),a),v===123)if(h===0)Yk(E,e,S,S,w,a,c,s,x);else switch(f===99&&qs(E,3)===110?100:f){case 100:case 108:case 109:case 115:Yk(n,S,S,r&&ZA(I$(n,S,S,0,0,i,s,b,i,w=[],c),x),i,x,c,s,r?w:x);break;default:Yk(E,S,S,S,[""],x,0,s,x)}}l=h=d=0,m=y=1,b=E="",c=o;break;case 58:c=1+Sf(E),d=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&W0e()==125)continue}switch(E+=lR(v),v*m){case 38:y=h>0?1:(E+="\f",-1);break;case 44:s[l++]=(Sf(E)-1)*y,y=1;break;case 64:Ff()===45&&(E+=Kk(vl())),f=Ff(),h=c=Sf(b=E+=V0e(Xk())),v++;break;case 45:p===45&&Sf(E)==2&&(m=0)}}return a}function I$(n,e,t,r,i,a,o,s,u,l,h){for(var c=i-1,f=i===0?a:[""],d=WB(f),p=0,m=0,g=0;p<r;++p)for(var y=0,v=zC(n,c+1,c=P0e(m=o[p])),b=n;y<d;++y)(b=hee(m>0?f[y]+" "+v:Ar(v,/&\f/g,f[y])))&&(u[g++]=b);return hR(n,e,t,i===0?BB:s,u,l,h)}function G0e(n,e,t){return hR(n,e,t,lee,lR(z0e()),zC(n,2,-2),0)}function F$(n,e,t,r){return hR(n,e,t,zB,zC(n,0,r),zC(n,r+1,-1),r)}function b2(n,e){for(var t="",r=WB(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function X0e(n,e,t,r){switch(n.type){case F0e:if(n.children.length)break;case I0e:case zB:return n.return=n.return||n.value;case lee:return"";case cee:return n.return=n.value+"{"+b2(n.children,r)+"}";case BB:n.value=n.props.join(",")}return Sf(t=b2(n.children,r))?n.return=n.value+"{"+t+"}":""}function K0e(n){var e=WB(n);return function(t,r,i,a){for(var o="",s=0;s<e;s++)o+=n[s](t,r,i,a)||"";return o}}function Y0e(n){return function(e){e.root||(e=e.return)&&n(e)}}function gee(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Q0e=function(e,t,r){for(var i=0,a=0;i=a,a=Ff(),i===38&&a===12&&(t[r]=1),!WC(a);)vl();return JT(e,ku)},Z0e=function(e,t){var r=-1,i=44;do switch(WC(i)){case 0:i===38&&Ff()===12&&(t[r]=1),e[r]+=Q0e(ku-1,t,r);break;case 2:e[r]+=Kk(i);break;case 4:if(i===44){e[++r]=Ff()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=lR(i)}while(i=vl());return e},J0e=function(e,t){return pee(Z0e(dee(e),t))},P$=new WeakMap,e1e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!P$.get(r))&&!i){P$.set(e,!0);for(var a=[],o=J0e(t,a),s=r.props,u=0,l=0;u<o.length;u++)for(var h=0;h<s.length;h++,l++)e.props[l]=a[u]?o[u].replace(/&\f/g,s[h]):s[h]+" "+o[u]}}},t1e=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function mee(n,e){switch(M0e(n,e)){case 5103:return Tr+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tr+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Tr+n+xN+n+no+n+n;case 6828:case 4268:return Tr+n+no+n+n;case 6165:return Tr+n+no+"flex-"+n+n;case 5187:return Tr+n+Ar(n,/(\w+).+(:[^]+)/,Tr+"box-$1$2"+no+"flex-$1$2")+n;case 5443:return Tr+n+no+"flex-item-"+Ar(n,/flex-|-self/,"")+n;case 4675:return Tr+n+no+"flex-line-pack"+Ar(n,/align-content|flex-|-self/,"")+n;case 5548:return Tr+n+no+Ar(n,"shrink","negative")+n;case 5292:return Tr+n+no+Ar(n,"basis","preferred-size")+n;case 6060:return Tr+"box-"+Ar(n,"-grow","")+Tr+n+no+Ar(n,"grow","positive")+n;case 4554:return Tr+Ar(n,/([^-])(transform)/g,"$1"+Tr+"$2")+n;case 6187:return Ar(Ar(Ar(n,/(zoom-|grab)/,Tr+"$1"),/(image-set)/,Tr+"$1"),n,"")+n;case 5495:case 3959:return Ar(n,/(image-set\([^]*)/,Tr+"$1$`$1");case 4968:return Ar(Ar(n,/(.+:)(flex-)?(.*)/,Tr+"box-pack:$3"+no+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tr+n+n;case 4095:case 3583:case 4068:case 2532:return Ar(n,/(.+)-inline(.+)/,Tr+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Sf(n)-1-e>6)switch(qs(n,e+1)){case 109:if(qs(n,e+4)!==45)break;case 102:return Ar(n,/(.+:)(.+)-([^]+)/,"$1"+Tr+"$2-$3$1"+xN+(qs(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~c6(n,"stretch")?mee(Ar(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(qs(n,e+1)!==115)break;case 6444:switch(qs(n,Sf(n)-3-(~c6(n,"!important")&&10))){case 107:return Ar(n,":",":"+Tr)+n;case 101:return Ar(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tr+(qs(n,14)===45?"inline-":"")+"box$3$1"+Tr+"$2$3$1"+no+"$2box$3")+n}break;case 5936:switch(qs(n,e+11)){case 114:return Tr+n+no+Ar(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Tr+n+no+Ar(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Tr+n+no+Ar(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Tr+n+no+n+n}return n}var n1e=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case zB:e.return=mee(e.value,e.length);break;case cee:return b2([D_(e,{value:Ar(e.value,"@","@"+Tr)})],i);case BB:if(e.length)return B0e(e.props,function(a){switch(U0e(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return b2([D_(e,{props:[Ar(a,/:(read-\w+)/,":"+xN+"$1")]})],i);case"::placeholder":return b2([D_(e,{props:[Ar(a,/:(plac\w+)/,":"+Tr+"input-$1")]}),D_(e,{props:[Ar(a,/:(plac\w+)/,":"+xN+"$1")]}),D_(e,{props:[Ar(a,/:(plac\w+)/,no+"input-$1")]})],i)}return""})}},r1e=[n1e],i1e=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=e.stylisPlugins||r1e,a={},o,s=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)a[g[y]]=!0;s.push(m)});var u,l=[e1e,t1e];{var h,c=[X0e,Y0e(function(m){h.insert(m)})],f=K0e(l.concat(i,c)),d=function(g){return b2(H0e(g),f)};u=function(g,y,v,b){h=v,d(g?g+"{"+y.styles+"}":y.styles),b&&(p.inserted[y.name]=!0)}}var p={key:t,sheet:new R0e({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:u};return p.sheet.hydrate(s),p},v5={exports:{}},Pr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L$;function a1e(){if(L$)return Pr;L$=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,l=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,c=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,d=n?Symbol.for("react.memo"):60115,p=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,v=n?Symbol.for("react.scope"):60119;function b(x){if(typeof x=="object"&&x!==null){var S=x.$$typeof;switch(S){case e:switch(x=x.type,x){case u:case l:case r:case a:case i:case c:return x;default:switch(x=x&&x.$$typeof,x){case s:case h:case p:case d:case o:return x;default:return S}}case t:return S}}}function w(x){return b(x)===l}return Pr.AsyncMode=u,Pr.ConcurrentMode=l,Pr.ContextConsumer=s,Pr.ContextProvider=o,Pr.Element=e,Pr.ForwardRef=h,Pr.Fragment=r,Pr.Lazy=p,Pr.Memo=d,Pr.Portal=t,Pr.Profiler=a,Pr.StrictMode=i,Pr.Suspense=c,Pr.isAsyncMode=function(x){return w(x)||b(x)===u},Pr.isConcurrentMode=w,Pr.isContextConsumer=function(x){return b(x)===s},Pr.isContextProvider=function(x){return b(x)===o},Pr.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===e},Pr.isForwardRef=function(x){return b(x)===h},Pr.isFragment=function(x){return b(x)===r},Pr.isLazy=function(x){return b(x)===p},Pr.isMemo=function(x){return b(x)===d},Pr.isPortal=function(x){return b(x)===t},Pr.isProfiler=function(x){return b(x)===a},Pr.isStrictMode=function(x){return b(x)===i},Pr.isSuspense=function(x){return b(x)===c},Pr.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===r||x===l||x===a||x===i||x===c||x===f||typeof x=="object"&&x!==null&&(x.$$typeof===p||x.$$typeof===d||x.$$typeof===o||x.$$typeof===s||x.$$typeof===h||x.$$typeof===g||x.$$typeof===y||x.$$typeof===v||x.$$typeof===m)},Pr.typeOf=b,Pr}var M$;function s1e(){return M$||(M$=1,v5.exports=a1e()),v5.exports}var b5,U$;function o1e(){if(U$)return b5;U$=1;var n=s1e(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=r,a[n.Memo]=i;function o(p){return n.isMemo(p)?i:a[p.$$typeof]||e}var s=Object.defineProperty,u=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,f=Object.prototype;function d(p,m,g){if(typeof m!="string"){if(f){var y=c(m);y&&y!==f&&d(p,y,g)}var v=u(m);l&&(v=v.concat(l(m)));for(var b=o(p),w=o(m),x=0;x<v.length;++x){var S=v[x];if(!t[S]&&!(g&&g[S])&&!(w&&w[S])&&!(b&&b[S])){var E=h(m,S);try{s(p,S,E)}catch{}}}}return p}return b5=d,b5}o1e();var u1e=!0;function yee(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):i&&(r+=i+" ")}),r}var jB=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||u1e===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},$B=function(e,t,r){jB(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a=t;do e.insert(t===a?"."+i:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function l1e(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var c1e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},h1e=/[A-Z]|^ms/g,f1e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,vee=function(e){return e.charCodeAt(1)===45},B$=function(e){return e!=null&&typeof e!="boolean"},w5=gee(function(n){return vee(n)?n:n.replace(h1e,"-$&").toLowerCase()}),z$=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(f1e,function(r,i,a){return Cf={name:i,styles:a,next:Cf},i})}return c1e[e]!==1&&!vee(e)&&typeof t=="number"&&t!==0?t+"px":t};function jC(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return Cf={name:i.name,styles:i.styles,next:Cf},i.name;var a=t;if(a.styles!==void 0){var o=a.next;if(o!==void 0)for(;o!==void 0;)Cf={name:o.name,styles:o.styles,next:Cf},o=o.next;var s=a.styles+";";return s}return d1e(n,e,t)}case"function":{if(n!==void 0){var u=Cf,l=t(n);return Cf=u,jC(n,e,l)}break}}var h=t;if(e==null)return h;var c=e[h];return c!==void 0?c:h}function d1e(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=jC(n,e,t[i])+";";else for(var a in t){var o=t[a];if(typeof o!="object"){var s=o;e!=null&&e[s]!==void 0?r+=a+"{"+e[s]+"}":B$(s)&&(r+=w5(a)+":"+z$(a,s)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var u=0;u<o.length;u++)B$(o[u])&&(r+=w5(a)+":"+z$(a,o[u])+";");else{var l=jC(n,e,o);switch(a){case"animation":case"animationName":{r+=w5(a)+":"+l+";";break}default:r+=a+"{"+l+"}"}}}return r}var W$=/label:\s*([^\s;{]+)\s*(;|$)/g,Cf;function eD(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";Cf=void 0;var a=n[0];if(a==null||a.raw===void 0)r=!1,i+=jC(t,e,a);else{var o=a;i+=o[0]}for(var s=1;s<n.length;s++)if(i+=jC(t,e,n[s]),r){var u=a;i+=u[s]}W$.lastIndex=0;for(var l="",h;(h=W$.exec(i))!==null;)l+="-"+h[1];var c=l1e(i)+l;return{name:c,styles:i,next:Cf}}var p1e=function(e){return e()},bee=s6.useInsertionEffect?s6.useInsertionEffect:!1,wee=bee||p1e,j$=bee||pe.useLayoutEffect,xee=pe.createContext(typeof HTMLElement<"u"?i1e({key:"css"}):null);xee.Provider;var qB=function(e){return pe.forwardRef(function(t,r){var i=pe.useContext(xee);return e(t,i,r)})},fR=pe.createContext({}),VB={}.hasOwnProperty,f6="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",g1e=function(e,t){var r={};for(var i in t)VB.call(t,i)&&(r[i]=t[i]);return r[f6]=e,r},m1e=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return jB(t,r,i),wee(function(){return $B(t,r,i)}),null},y1e=qB(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[f6],a=[r],o="";typeof n.className=="string"?o=yee(e.registered,a,n.className):n.className!=null&&(o=n.className+" ");var s=eD(a,void 0,pe.useContext(fR));o+=e.key+"-"+s.name;var u={};for(var l in n)VB.call(n,l)&&l!=="css"&&l!==f6&&(u[l]=n[l]);return u.className=o,t&&(u.ref=t),pe.createElement(pe.Fragment,null,pe.createElement(m1e,{cache:e,serialized:s,isStringTag:typeof i=="string"}),pe.createElement(i,u))}),v1e=y1e,$$=function(e,t){var r=arguments;if(t==null||!VB.call(t,"css"))return pe.createElement.apply(void 0,r);var i=r.length,a=new Array(i);a[0]=v1e,a[1]=g1e(e,t);for(var o=2;o<i;o++)a[o]=r[o];return pe.createElement.apply(null,a)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})($$||($$={}));var b1e=qB(function(n,e){var t=n.styles,r=eD([t],void 0,pe.useContext(fR)),i=pe.useRef();return j$(function(){var a=e.key+"-global",o=new e.sheet.constructor({key:a,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),s=!1,u=document.querySelector('style[data-emotion="'+a+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),u!==null&&(s=!0,u.setAttribute("data-emotion",a),o.hydrate([u])),i.current=[o,s],function(){o.flush()}},[e]),j$(function(){var a=i.current,o=a[0],s=a[1];if(s){a[1]=!1;return}if(r.next!==void 0&&$B(e,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function HB(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return eD(e)}function tD(){var n=HB.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var w1e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,x1e=gee(function(n){return w1e.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),_1e=x1e,S1e=function(e){return e!=="theme"},q$=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?_1e:S1e},V$=function(e,t,r){var i;if(t){var a=t.shouldForwardProp;i=e.__emotion_forwardProp&&a?function(o){return e.__emotion_forwardProp(o)&&a(o)}:a}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},C1e=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return jB(t,r,i),wee(function(){return $B(t,r,i)}),null},E1e=function n(e,t){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,a,o;t!==void 0&&(a=t.label,o=t.target);var s=V$(e,t,r),u=s||q$(i),l=!u("as");return function(){var h=arguments,c=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&c.push("label:"+a+";"),h[0]==null||h[0].raw===void 0)c.push.apply(c,h);else{var f=h[0];c.push(f[0]);for(var d=h.length,p=1;p<d;p++)c.push(h[p],f[p])}var m=qB(function(g,y,v){var b=l&&g.as||i,w="",x=[],S=g;if(g.theme==null){S={};for(var E in g)S[E]=g[E];S.theme=pe.useContext(fR)}typeof g.className=="string"?w=yee(y.registered,x,g.className):g.className!=null&&(w=g.className+" ");var A=eD(c.concat(x),y.registered,S);w+=y.key+"-"+A.name,o!==void 0&&(w+=" "+o);var k=l&&s===void 0?q$(b):u,T={};for(var O in g)l&&O==="as"||k(O)&&(T[O]=g[O]);return T.className=w,v&&(T.ref=v),pe.createElement(pe.Fragment,null,pe.createElement(C1e,{cache:y,serialized:A,isStringTag:typeof b=="string"}),pe.createElement(b,T))});return m.displayName=a!==void 0?a:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=i,m.__emotion_styles=c,m.__emotion_forwardProp=s,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(g,y){var v=n(g,wN({},t,y,{shouldForwardProp:V$(m,y,!0)}));return v.apply(void 0,c)},m}},T1e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],d6=E1e.bind(null);T1e.forEach(function(n){d6[n]=d6(n)});function D1e(n){return n==null||Object.keys(n).length===0}function A1e(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?i=>e(D1e(i)?t:i):e;return Ie.jsx(b1e,{styles:r})}/**
 * @mui/styled-engine v6.4.8
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function _ee(n,e){return d6(n,e)}function k1e(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const H$=[];function G$(n){return H$[0]=n,eD(H$)}var x5={exports:{}},ei={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X$;function N1e(){if(X$)return ei;X$=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),d=Symbol.for("react.client.reference");function p(m){if(typeof m=="object"&&m!==null){var g=m.$$typeof;switch(g){case n:switch(m=m.type,m){case t:case i:case r:case u:case l:return m;default:switch(m=m&&m.$$typeof,m){case o:case s:case c:case h:return m;case a:return m;default:return g}}case e:return g}}}return ei.ContextConsumer=a,ei.ContextProvider=o,ei.Element=n,ei.ForwardRef=s,ei.Fragment=t,ei.Lazy=c,ei.Memo=h,ei.Portal=e,ei.Profiler=i,ei.StrictMode=r,ei.Suspense=u,ei.SuspenseList=l,ei.isContextConsumer=function(m){return p(m)===a},ei.isContextProvider=function(m){return p(m)===o},ei.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===n},ei.isForwardRef=function(m){return p(m)===s},ei.isFragment=function(m){return p(m)===t},ei.isLazy=function(m){return p(m)===c},ei.isMemo=function(m){return p(m)===h},ei.isPortal=function(m){return p(m)===e},ei.isProfiler=function(m){return p(m)===i},ei.isStrictMode=function(m){return p(m)===r},ei.isSuspense=function(m){return p(m)===u},ei.isSuspenseList=function(m){return p(m)===l},ei.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===t||m===i||m===r||m===u||m===l||m===f||typeof m=="object"&&m!==null&&(m.$$typeof===c||m.$$typeof===h||m.$$typeof===o||m.$$typeof===a||m.$$typeof===s||m.$$typeof===d||m.getModuleId!==void 0)},ei.typeOf=p,ei}var K$;function O1e(){return K$||(K$=1,x5.exports=N1e()),x5.exports}var See=O1e();function kf(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function Cee(n){if(pe.isValidElement(n)||See.isValidElementType(n)||!kf(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=Cee(n[t])}),e}function vo(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return kf(n)&&kf(e)&&Object.keys(e).forEach(i=>{pe.isValidElement(e[i])||See.isValidElementType(e[i])?r[i]=e[i]:kf(e[i])&&Object.prototype.hasOwnProperty.call(n,i)&&kf(n[i])?r[i]=vo(n[i],e[i],t):t.clone?r[i]=kf(e[i])?Cee(e[i]):e[i]:r[i]=e[i]}),r}const R1e=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function I1e(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...i}=n,a=R1e(e),o=Object.keys(a);function s(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${t})`}function u(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-r/100}${t})`}function l(f,d){const p=o.indexOf(d);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${t}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:d)-r/100}${t})`}function h(f){return o.indexOf(f)+1<o.length?l(f,o[o.indexOf(f)+1]):s(f)}function c(f){const d=o.indexOf(f);return d===0?s(o[1]):d===o.length-1?u(o[d]):l(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return{keys:o,values:a,up:s,down:u,between:l,only:h,not:c,unit:t,...i}}function F1e(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var o,s;const a=/min-width:\s*([0-9.]+)/;return+(((o=r.match(a))==null?void 0:o[1])||0)-+(((s=i.match(a))==null?void 0:s[1])||0)});return t.length?t.reduce((r,i)=>{const a=e[i];return delete r[i],r[i]=a,r},{...e}):e}function P1e(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function L1e(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,i]=t,a=Number.isNaN(+r)?r||0:+r;return n.containerQueries(i).up(a)}function M1e(n){const e=(a,o)=>a.replace("@media",o?`@container ${o}`:"@container");function t(a,o){a.up=(...s)=>e(n.breakpoints.up(...s),o),a.down=(...s)=>e(n.breakpoints.down(...s),o),a.between=(...s)=>e(n.breakpoints.between(...s),o),a.only=(...s)=>e(n.breakpoints.only(...s),o),a.not=(...s)=>{const u=e(n.breakpoints.not(...s),o);return u.includes("not all and")?u.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):u}}const r={},i=a=>(t(r,a),r);return t(i),{...n,containerQueries:i}}const U1e={borderRadius:4};function CC(n,e){return e?vo(n,e,{clone:!1}):n}const dR={xs:0,sm:600,md:900,lg:1200,xl:1536},Y$={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${dR[n]}px)`},B1e={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:dR[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function pc(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const a=r.breakpoints||Y$;return e.reduce((o,s,u)=>(o[a.up(a.keys[u])]=t(e[u]),o),{})}if(typeof e=="object"){const a=r.breakpoints||Y$;return Object.keys(e).reduce((o,s)=>{if(P1e(a.keys,s)){const u=L1e(r.containerQueries?r:B1e,s);u&&(o[u]=t(e[s],s))}else if(Object.keys(a.values||dR).includes(s)){const u=a.up(s);o[u]=t(e[s],s)}else{const u=s;o[u]=e[u]}return o},{})}return t(e)}function z1e(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,i)=>{const a=n.up(i);return r[a]={},r},{}))||{}}function W1e(n,e){return n.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},e)}function j1e(n,e){if(typeof n!="object")return{};const t={},r=Object.keys(e);return Array.isArray(n)?r.forEach((i,a)=>{a<n.length&&(t[i]=!0)}):r.forEach(i=>{n[i]!=null&&(t[i]=!0)}),t}function pR({values:n,breakpoints:e,base:t}){const r=t||j1e(n,e),i=Object.keys(r);if(i.length===0)return n;let a;return i.reduce((o,s,u)=>(Array.isArray(n)?(o[s]=n[u]!=null?n[u]:n[a],a=u):typeof n=="object"?(o[s]=n[s]!=null?n[s]:n[a],a=s):o[s]=n,o),{})}function kn(n){if(typeof n!="string")throw new Error(_p(7));return n.charAt(0).toUpperCase()+n.slice(1)}function gR(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((i,a)=>i&&i[a]?i[a]:null,n);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,n)}function _N(n,e,t,r=t){let i;return typeof n=="function"?i=n(t):Array.isArray(n)?i=n[t]||r:i=gR(n,t)||r,e&&(i=e(i,r,n)),i}function va(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:i}=n,a=o=>{if(o[e]==null)return null;const s=o[e],u=o.theme,l=gR(u,r)||{};return pc(o,s,c=>{let f=_N(l,i,c);return c===f&&typeof c=="string"&&(f=_N(l,i,`${e}${c==="default"?"":kn(c)}`,c)),t===!1?f:{[t]:f}})};return a.propTypes={},a.filterProps=[e],a}function $1e(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const q1e={m:"margin",p:"padding"},V1e={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Q$={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},H1e=$1e(n=>{if(n.length>2)if(Q$[n])n=Q$[n];else return[n];const[e,t]=n.split(""),r=q1e[e],i=V1e[t]||"";return Array.isArray(i)?i.map(a=>r+a):[r+i]}),GB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],XB=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...GB,...XB];function nD(n,e,t,r){const i=gR(n,e,!0)??t;return typeof i=="number"||typeof i=="string"?a=>typeof a=="string"?a:typeof i=="string"?`calc(${a} * ${i})`:i*a:Array.isArray(i)?a=>{if(typeof a=="string")return a;const o=Math.abs(a),s=i[o];return a>=0?s:typeof s=="number"?-s:`-${s}`}:typeof i=="function"?i:()=>{}}function KB(n){return nD(n,"spacing",8)}function rD(n,e){return typeof e=="string"||e==null?e:n(e)}function G1e(n,e){return t=>n.reduce((r,i)=>(r[i]=rD(e,t),r),{})}function X1e(n,e,t,r){if(!e.includes(t))return null;const i=H1e(t),a=G1e(i,r),o=n[t];return pc(n,o,a)}function Eee(n,e){const t=KB(n.theme);return Object.keys(n).map(r=>X1e(n,e,r,t)).reduce(CC,{})}function Ji(n){return Eee(n,GB)}Ji.propTypes={};Ji.filterProps=GB;function ea(n){return Eee(n,XB)}ea.propTypes={};ea.filterProps=XB;function Tee(n=8,e=KB({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(a=>{const o=e(a);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function mR(...n){const e=n.reduce((r,i)=>(i.filterProps.forEach(a=>{r[a]=i}),r),{}),t=r=>Object.keys(r).reduce((i,a)=>e[a]?CC(i,e[a](r)):i,{});return t.propTypes={},t.filterProps=n.reduce((r,i)=>r.concat(i.filterProps),[]),t}function ac(n){return typeof n!="number"?n:`${n}px solid`}function yc(n,e){return va({prop:n,themeKey:"borders",transform:e})}const K1e=yc("border",ac),Y1e=yc("borderTop",ac),Q1e=yc("borderRight",ac),Z1e=yc("borderBottom",ac),J1e=yc("borderLeft",ac),ebe=yc("borderColor"),tbe=yc("borderTopColor"),nbe=yc("borderRightColor"),rbe=yc("borderBottomColor"),ibe=yc("borderLeftColor"),abe=yc("outline",ac),sbe=yc("outlineColor"),yR=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=nD(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:rD(e,r)});return pc(n,n.borderRadius,t)}return null};yR.propTypes={};yR.filterProps=["borderRadius"];mR(K1e,Y1e,Q1e,Z1e,J1e,ebe,tbe,nbe,rbe,ibe,yR,abe,sbe);const vR=n=>{if(n.gap!==void 0&&n.gap!==null){const e=nD(n.theme,"spacing",8),t=r=>({gap:rD(e,r)});return pc(n,n.gap,t)}return null};vR.propTypes={};vR.filterProps=["gap"];const bR=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=nD(n.theme,"spacing",8),t=r=>({columnGap:rD(e,r)});return pc(n,n.columnGap,t)}return null};bR.propTypes={};bR.filterProps=["columnGap"];const wR=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=nD(n.theme,"spacing",8),t=r=>({rowGap:rD(e,r)});return pc(n,n.rowGap,t)}return null};wR.propTypes={};wR.filterProps=["rowGap"];const obe=va({prop:"gridColumn"}),ube=va({prop:"gridRow"}),lbe=va({prop:"gridAutoFlow"}),cbe=va({prop:"gridAutoColumns"}),hbe=va({prop:"gridAutoRows"}),fbe=va({prop:"gridTemplateColumns"}),dbe=va({prop:"gridTemplateRows"}),pbe=va({prop:"gridTemplateAreas"}),gbe=va({prop:"gridArea"});mR(vR,bR,wR,obe,ube,lbe,cbe,hbe,fbe,dbe,pbe,gbe);function w2(n,e){return e==="grey"?e:n}const mbe=va({prop:"color",themeKey:"palette",transform:w2}),ybe=va({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:w2}),vbe=va({prop:"backgroundColor",themeKey:"palette",transform:w2});mR(mbe,ybe,vbe);function dl(n){return n<=1&&n!==0?`${n*100}%`:n}const bbe=va({prop:"width",transform:dl}),YB=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,a,o,s,u;const r=((o=(a=(i=n.theme)==null?void 0:i.breakpoints)==null?void 0:a.values)==null?void 0:o[t])||dR[t];return r?((u=(s=n.theme)==null?void 0:s.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:dl(t)}};return pc(n,n.maxWidth,e)}return null};YB.filterProps=["maxWidth"];const wbe=va({prop:"minWidth",transform:dl}),xbe=va({prop:"height",transform:dl}),_be=va({prop:"maxHeight",transform:dl}),Sbe=va({prop:"minHeight",transform:dl});va({prop:"size",cssProperty:"width",transform:dl});va({prop:"size",cssProperty:"height",transform:dl});const Cbe=va({prop:"boxSizing"});mR(bbe,YB,wbe,xbe,_be,Sbe,Cbe);const iD={border:{themeKey:"borders",transform:ac},borderTop:{themeKey:"borders",transform:ac},borderRight:{themeKey:"borders",transform:ac},borderBottom:{themeKey:"borders",transform:ac},borderLeft:{themeKey:"borders",transform:ac},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ac},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:yR},color:{themeKey:"palette",transform:w2},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:w2},backgroundColor:{themeKey:"palette",transform:w2},p:{style:ea},pt:{style:ea},pr:{style:ea},pb:{style:ea},pl:{style:ea},px:{style:ea},py:{style:ea},padding:{style:ea},paddingTop:{style:ea},paddingRight:{style:ea},paddingBottom:{style:ea},paddingLeft:{style:ea},paddingX:{style:ea},paddingY:{style:ea},paddingInline:{style:ea},paddingInlineStart:{style:ea},paddingInlineEnd:{style:ea},paddingBlock:{style:ea},paddingBlockStart:{style:ea},paddingBlockEnd:{style:ea},m:{style:Ji},mt:{style:Ji},mr:{style:Ji},mb:{style:Ji},ml:{style:Ji},mx:{style:Ji},my:{style:Ji},margin:{style:Ji},marginTop:{style:Ji},marginRight:{style:Ji},marginBottom:{style:Ji},marginLeft:{style:Ji},marginX:{style:Ji},marginY:{style:Ji},marginInline:{style:Ji},marginInlineStart:{style:Ji},marginInlineEnd:{style:Ji},marginBlock:{style:Ji},marginBlockStart:{style:Ji},marginBlockEnd:{style:Ji},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:vR},rowGap:{style:wR},columnGap:{style:bR},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:dl},maxWidth:{style:YB},minWidth:{transform:dl},height:{transform:dl},maxHeight:{transform:dl},minHeight:{transform:dl},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Ebe(...n){const e=n.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function Tbe(n,e){return typeof n=="function"?n(e):n}function Dbe(){function n(t,r,i,a){const o={[t]:r,theme:i},s=a[t];if(!s)return{[t]:r};const{cssProperty:u=t,themeKey:l,transform:h,style:c}=s;if(r==null)return null;if(l==="typography"&&r==="inherit")return{[t]:r};const f=gR(i,l)||{};return c?c(o):pc(o,r,p=>{let m=_N(f,h,p);return p===m&&typeof p=="string"&&(m=_N(f,h,`${t}${p==="default"?"":kn(p)}`,p)),u===!1?m:{[u]:m}})}function e(t){const{sx:r,theme:i={}}=t||{};if(!r)return null;const a=i.unstable_sxConfig??iD;function o(s){let u=s;if(typeof s=="function")u=s(i);else if(typeof s!="object")return s;if(!u)return null;const l=z1e(i.breakpoints),h=Object.keys(l);let c=l;return Object.keys(u).forEach(f=>{const d=Tbe(u[f],i);if(d!=null)if(typeof d=="object")if(a[f])c=CC(c,n(f,d,i,a));else{const p=pc({theme:i},d,m=>({[f]:m}));Ebe(p,d)?c[f]=e({sx:d,theme:i}):c=CC(c,p)}else c=CC(c,n(f,d,i,a))}),F1e(i,W1e(h,c))}return Array.isArray(r)?r.map(o):o(r)}return e}const e1=Dbe();e1.filterProps=["sx"];function Abe(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let i=t.getColorSchemeSelector(n);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return t.palette.mode===n?e:{}}function xR(n={},...e){const{breakpoints:t={},palette:r={},spacing:i,shape:a={},...o}=n,s=I1e(t),u=Tee(i);let l=vo({breakpoints:s,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:u,shape:{...U1e,...a}},o);return l=M1e(l),l.applyStyles=Abe,l=e.reduce((h,c)=>vo(h,c),l),l.unstable_sxConfig={...iD,...o==null?void 0:o.unstable_sxConfig},l.unstable_sx=function(c){return e1({sx:c,theme:this})},l}function kbe(n){return Object.keys(n).length===0}function Nbe(n=null){const e=pe.useContext(fR);return!e||kbe(e)?n:e}const Obe=xR();function aD(n=Obe){return Nbe(n)}function Rbe({styles:n,themeId:e,defaultTheme:t={}}){const r=aD(t),i=typeof n=="function"?n(e&&r[e]||r):n;return Ie.jsx(A1e,{styles:i})}const Ibe=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??iD;return Object.keys(n).forEach(i=>{t[i]?e.systemProps[i]=n[i]:e.otherProps[i]=n[i]}),e};function _R(n){const{sx:e,...t}=n,{systemProps:r,otherProps:i}=Ibe(t);let a;return Array.isArray(e)?a=[r,...e]:typeof e=="function"?a=(...o)=>{const s=e(...o);return kf(s)?{...r,...s}:r}:a={...r,...e},{...i,sx:a}}const Z$=n=>n,Fbe=()=>{let n=Z$;return{configure(e){n=e},generate(e){return n(e)},reset(){n=Z$}}},Dee=Fbe();function Aee(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Aee(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Nn(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Aee(n))&&(r&&(r+=" "),r+=e);return r}function Pbe(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:i}=n,a=_ee("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(e1);return pe.forwardRef(function(u,l){const h=aD(t),{className:c,component:f="div",...d}=_R(u);return Ie.jsx(a,{as:f,ref:l,className:Nn(c,i?i(r):r),theme:e&&h[e]||h,...d})})}const Lbe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Br(n,e,t="Mui"){const r=Lbe[e];return r?`${t}-${r}`:`${Dee.generate(n)}-${e}`}function br(n,e,t="Mui"){const r={};return e.forEach(i=>{r[i]=Br(n,i,t)}),r}function kee(n){const{variants:e,...t}=n,r={variants:e,style:G$(t),isProcessed:!0};return r.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=G$(i.style))}),r}const Mbe=xR();function _5(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function Ube(n){return n?(e,t)=>t[n]:null}function Bbe(n,e,t){n.theme=Wbe(n.theme)?t:n.theme[e]||n.theme}function Qk(n,e){const t=typeof e=="function"?e(n):e;if(Array.isArray(t))return t.flatMap(r=>Qk(n,r));if(Array.isArray(t==null?void 0:t.variants)){let r;if(t.isProcessed)r=t.style;else{const{variants:i,...a}=t;r=a}return Nee(n,t.variants,[r])}return t!=null&&t.isProcessed?t.style:t}function Nee(n,e,t=[]){var i;let r;e:for(let a=0;a<e.length;a+=1){const o=e[a];if(typeof o.props=="function"){if(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),!o.props(r))continue}else for(const s in o.props)if(n[s]!==o.props[s]&&((i=n.ownerState)==null?void 0:i[s])!==o.props[s])continue e;typeof o.style=="function"?(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),t.push(o.style(r))):t.push(o.style)}return t}function Oee(n={}){const{themeId:e,defaultTheme:t=Mbe,rootShouldForwardProp:r=_5,slotShouldForwardProp:i=_5}=n;function a(s){Bbe(s,e,t)}return(s,u={})=>{k1e(s,x=>x.filter(S=>S!==e1));const{name:l,slot:h,skipVariantsResolver:c,skipSx:f,overridesResolver:d=Ube($be(h)),...p}=u,m=c!==void 0?c:h&&h!=="Root"&&h!=="root"||!1,g=f||!1;let y=_5;h==="Root"||h==="root"?y=r:h?y=i:jbe(s)&&(y=void 0);const v=_ee(s,{shouldForwardProp:y,label:zbe(),...p}),b=x=>{if(typeof x=="function"&&x.__emotion_real!==x)return function(E){return Qk(E,x)};if(kf(x)){const S=kee(x);return S.variants?function(A){return Qk(A,S)}:S.style}return x},w=(...x)=>{const S=[],E=x.map(b),A=[];if(S.push(a),l&&d&&A.push(function(F){var B,W;const R=(W=(B=F.theme.components)==null?void 0:B[l])==null?void 0:W.styleOverrides;if(!R)return null;const U={};for(const Y in R)U[Y]=Qk(F,R[Y]);return d(F,U)}),l&&!m&&A.push(function(F){var U,B;const I=F.theme,R=(B=(U=I==null?void 0:I.components)==null?void 0:U[l])==null?void 0:B.variants;return R?Nee(F,R):null}),g||A.push(e1),Array.isArray(E[0])){const O=E.shift(),F=new Array(S.length).fill(""),I=new Array(A.length).fill("");let R;R=[...F,...O,...I],R.raw=[...F,...O.raw,...I],S.unshift(R)}const k=[...S,...E,...A],T=v(...k);return s.muiName&&(T.muiName=s.muiName),T};return v.withConfig&&(w.withConfig=v.withConfig),w}}function zbe(n,e){return void 0}function Wbe(n){for(const e in n)return!1;return!0}function jbe(n){return typeof n=="string"&&n.charCodeAt(0)>96}function $be(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}const qbe=Oee();function $C(n,e){const t={...e};for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const i=r;if(i==="components"||i==="slots")t[i]={...n[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const a=n[i],o=e[i];if(!o)t[i]=a||{};else if(!a)t[i]=o;else{t[i]={...o};for(const s in a)if(Object.prototype.hasOwnProperty.call(a,s)){const u=s;t[i][u]=$C(a[u],o[u])}}}else t[i]===void 0&&(t[i]=n[i])}return t}function Vbe(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:$C(e.components[t].defaultProps,r)}function Hbe({props:n,name:e,defaultTheme:t,themeId:r}){let i=aD(t);return r&&(i=i[r]||i),Vbe({theme:i,name:e,props:n})}const zm=typeof window<"u"?pe.useLayoutEffect:pe.useEffect;function Gbe(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function QB(n,e=0,t=1){return Gbe(n,e,t)}function Xbe(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Wm(n){if(n.type)return n;if(n.charAt(0)==="#")return Wm(Xbe(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(_p(9,n));let r=n.substring(e+1,n.length-1),i;if(t==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(_p(10,i))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:t,values:r,colorSpace:i}}const Kbe=n=>{const e=Wm(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},HS=(n,e)=>{try{return Kbe(n)}catch{return n}};function SR(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((i,a)=>a<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Ree(n){n=Wm(n);const{values:e}=n,t=e[0],r=e[1]/100,i=e[2]/100,a=r*Math.min(i,1-i),o=(l,h=(l+t/30)%12)=>i-a*Math.max(Math.min(h-3,9-h,1),-1);let s="rgb";const u=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return n.type==="hsla"&&(s+="a",u.push(e[3])),SR({type:s,values:u})}function p6(n){n=Wm(n);let e=n.type==="hsl"||n.type==="hsla"?Wm(Ree(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Ybe(n,e){const t=p6(n),r=p6(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function _u(n,e){return n=Wm(n),e=QB(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,SR(n)}function JA(n,e,t){try{return _u(n,e)}catch{return n}}function ZB(n,e){if(n=Wm(n),e=QB(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return SR(n)}function li(n,e,t){try{return ZB(n,e)}catch{return n}}function JB(n,e){if(n=Wm(n),e=QB(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return SR(n)}function ci(n,e,t){try{return JB(n,e)}catch{return n}}function Qbe(n,e=.15){return p6(n)>.5?ZB(n,e):JB(n,e)}function ek(n,e,t){try{return Qbe(n,e)}catch{return n}}function J$(...n){return n.reduce((e,t)=>t==null?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}function Iee(n,e=166){let t;function r(...i){const a=()=>{n.apply(this,i)};clearTimeout(t),t=setTimeout(a,e)}return r.clear=()=>{clearTimeout(t)},r}function Zk(n,e){var t,r,i;return pe.isValidElement(n)&&e.indexOf(n.type.muiName??((i=(r=(t=n.type)==null?void 0:t._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}function fh(n){return n&&n.ownerDocument||document}function Sp(n){return fh(n).defaultView||window}function g6(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let eq=0;function Zbe(n){const[e,t]=pe.useState(n),r=n||e;return pe.useEffect(()=>{e==null&&(eq+=1,t(`mui-${eq}`))},[e]),r}const Jbe={...s6},tq=Jbe.useId;function CR(n){if(tq!==void 0){const e=tq();return n??e}return Zbe(n)}function nq({controlled:n,default:e,name:t,state:r="value"}){const{current:i}=pe.useRef(n!==void 0),[a,o]=pe.useState(e),s=i?n:a,u=pe.useCallback(l=>{i||o(l)},[]);return[s,u]}function W0(n){const e=pe.useRef(n);return zm(()=>{e.current=n}),pe.useRef((...t)=>(0,e.current)(...t)).current}function Ho(...n){return pe.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{g6(t,e)})},n)}const rq={};function Fee(n,e){const t=pe.useRef(rq);return t.current===rq&&(t.current=n(e)),t}const e2e=[];function t2e(n){pe.useEffect(n,e2e)}class e9{constructor(){nn(this,"currentId",null);nn(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});nn(this,"disposeEffect",()=>this.clear)}static create(){return new e9}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function Pee(){const n=Fee(e9.create).current;return t2e(n.disposeEffect),n}function iq(n){try{return n.matches(":focus-visible")}catch{}return!1}function Lee(n=window){const e=n.document.documentElement.clientWidth;return n.innerWidth-e}function zr(n,e,t=void 0){const r={};for(const i in n){const a=n[i];let o="",s=!0;for(let u=0;u<a.length;u+=1){const l=a[u];l&&(o+=(s===!0?"":" ")+e(l),s=!1,t&&t[l]&&(o+=" "+t[l]))}r[i]=o}return r}function n2e(n){return typeof n=="string"}function Mee(n,e,t){return n===void 0||n2e(n)?e:{...e,ownerState:{...e.ownerState,...t}}}function Uee(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function aq(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function Bee(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:i,className:a}=n;if(!e){const d=Nn(t==null?void 0:t.className,a,i==null?void 0:i.className,r==null?void 0:r.className),p={...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},m={...t,...i,...r};return d.length>0&&(m.className=d),Object.keys(p).length>0&&(m.style=p),{props:m,internalRef:void 0}}const o=Uee({...i,...r}),s=aq(r),u=aq(i),l=e(o),h=Nn(l==null?void 0:l.className,t==null?void 0:t.className,a,i==null?void 0:i.className,r==null?void 0:r.className),c={...l==null?void 0:l.style,...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},f={...l,...t,...u,...s};return h.length>0&&(f.className=h),Object.keys(c).length>0&&(f.style=c),{props:f,internalRef:l.ref}}function zee(n,e,t){return typeof n=="function"?n(e,t):n}function r2e(n){var c;const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:i=!1,...a}=n,o=i?{}:zee(t,r),{props:s,internalRef:u}=Bee({...a,externalSlotProps:o}),l=Ho(u,o==null?void 0:o.ref,(c=n.additionalProps)==null?void 0:c.ref);return Mee(e,{...s,ref:l},r)}function sD(n){var e;return parseInt(pe.version,10)>=19?((e=n==null?void 0:n.props)==null?void 0:e.ref)||null:(n==null?void 0:n.ref)||null}const i2e=pe.createContext(),a2e=()=>pe.useContext(i2e)??!1,s2e=pe.createContext(void 0);function o2e(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const i=e.components[t];return i.defaultProps?$C(i.defaultProps,r):!i.styleOverrides&&!i.variants?$C(i,r):r}function u2e({props:n,name:e}){const t=pe.useContext(s2e);return o2e({props:n,name:e,theme:{components:t}})}const sq={theme:void 0};function l2e(n){let e,t;return function(i){let a=e;return(a===void 0||i.theme!==t)&&(sq.theme=i.theme,a=kee(n(sq)),e=a,t=i.theme),a}}function c2e(n=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${n?`${n}-`:""}${r}${e(...i)})`}const oq=(n,e,t,r=[])=>{let i=n;e.forEach((a,o)=>{o===e.length-1?Array.isArray(i)?i[Number(a)]=t:i&&typeof i=="object"&&(i[a]=t):i&&typeof i=="object"&&(i[a]||(i[a]=r.includes(a)?[]:{}),i=i[a])})},h2e=(n,e,t)=>{function r(i,a=[],o=[]){Object.entries(i).forEach(([s,u])=>{(!t||t&&!t([...a,s]))&&u!=null&&(typeof u=="object"&&Object.keys(u).length>0?r(u,[...a,s],Array.isArray(u)?[...o,s]:o):e([...a,s],u,o))})}r(n)},f2e=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function S5(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},i={},a={},o={};return h2e(n,(s,u,l)=>{if((typeof u=="string"||typeof u=="number")&&(!r||!r(s,u))){const h=`--${t?`${t}-`:""}${s.join("-")}`,c=f2e(s,u);Object.assign(i,{[h]:c}),oq(a,s,`var(${h})`,l),oq(o,s,`var(${h}, ${c})`,l)}},s=>s[0]==="vars"),{css:i,vars:a,varsWithDefaults:o}}function d2e(n,e={}){const{getSelector:t=g,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:a={},components:o,defaultColorScheme:s="light",...u}=n,{vars:l,css:h,varsWithDefaults:c}=S5(u,e);let f=c;const d={},{[s]:p,...m}=a;if(Object.entries(m||{}).forEach(([b,w])=>{const{vars:x,css:S,varsWithDefaults:E}=S5(w,e);f=vo(f,E),d[b]={css:S,vars:x}}),p){const{css:b,vars:w,varsWithDefaults:x}=S5(p,e);f=vo(f,x),d[s]={css:b,vars:w}}function g(b,w){var S,E;let x=i;if(i==="class"&&(x=".%s"),i==="data"&&(x="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(x=`[${i}="%s"]`),b){if(x==="media")return n.defaultColorScheme===b?":root":{[`@media (prefers-color-scheme: ${((E=(S=a[b])==null?void 0:S.palette)==null?void 0:E.mode)||b})`]:{":root":w}};if(x)return n.defaultColorScheme===b?`:root, ${x.replace("%s",String(b))}`:x.replace("%s",String(b))}return":root"}return{vars:f,generateThemeVars:()=>{let b={...l};return Object.entries(d).forEach(([,{vars:w}])=>{b=vo(b,w)}),b},generateStyleSheets:()=>{var A,k;const b=[],w=n.defaultColorScheme||"light";function x(T,O){Object.keys(O).length&&b.push(typeof T=="string"?{[T]:{...O}}:T)}x(t(void 0,{...h}),h);const{[w]:S,...E}=d;if(S){const{css:T}=S,O=(k=(A=a[w])==null?void 0:A.palette)==null?void 0:k.mode,F=!r&&O?{colorScheme:O,...T}:{...T};x(t(w,{...F}),F)}return Object.entries(E).forEach(([T,{css:O}])=>{var R,U;const F=(U=(R=a[T])==null?void 0:R.palette)==null?void 0:U.mode,I=!r&&F?{colorScheme:F,...O}:{...O};x(t(T,{...I}),I)}),b}}}function p2e(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}const g2e=(n,e)=>n.filter(t=>e.includes(t)),cx=(n,e,t)=>{const r=n.keys[0];Array.isArray(e)?e.forEach((i,a)=>{t((o,s)=>{a<=n.keys.length-1&&(a===0?Object.assign(o,s):o[n.up(n.keys[a])]=s)},i)}):e&&typeof e=="object"?(Object.keys(e).length>n.keys.length?n.keys:g2e(n.keys,Object.keys(e))).forEach(a=>{if(n.keys.includes(a)){const o=e[a];o!==void 0&&t((s,u)=>{r===a?Object.assign(s,u):s[n.up(a)]=u},o)}}):(typeof e=="number"||typeof e=="string")&&t((i,a)=>{Object.assign(i,a)},e)};function SN(n){return`--Grid-${n}Spacing`}function ER(n){return`--Grid-parent-${n}Spacing`}const uq="--Grid-columns",x2="--Grid-parent-columns",m2e=({theme:n,ownerState:e})=>{const t={};return cx(n.breakpoints,e.size,(r,i)=>{let a={};i==="grow"&&(a={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(a={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${x2}) - (var(${x2}) - ${i}) * (var(${ER("column")}) / var(${x2})))`}),r(t,a)}),t},y2e=({theme:n,ownerState:e})=>{const t={};return cx(n.breakpoints,e.offset,(r,i)=>{let a={};i==="auto"&&(a={marginLeft:"auto"}),typeof i=="number"&&(a={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${x2}) + var(${ER("column")}) * ${i} / var(${x2}))`}),r(t,a)}),t},v2e=({theme:n,ownerState:e})=>{if(!e.container)return{};const t={[uq]:12};return cx(n.breakpoints,e.columns,(r,i)=>{const a=i??12;r(t,{[uq]:a,"> *":{[x2]:a}})}),t},b2e=({theme:n,ownerState:e})=>{if(!e.container)return{};const t={};return cx(n.breakpoints,e.rowSpacing,(r,i)=>{var o;const a=typeof i=="string"?i:(o=n.spacing)==null?void 0:o.call(n,i);r(t,{[SN("row")]:a,"> *":{[ER("row")]:a}})}),t},w2e=({theme:n,ownerState:e})=>{if(!e.container)return{};const t={};return cx(n.breakpoints,e.columnSpacing,(r,i)=>{var o;const a=typeof i=="string"?i:(o=n.spacing)==null?void 0:o.call(n,i);r(t,{[SN("column")]:a,"> *":{[ER("column")]:a}})}),t},x2e=({theme:n,ownerState:e})=>{if(!e.container)return{};const t={};return cx(n.breakpoints,e.direction,(r,i)=>{r(t,{flexDirection:i})}),t},_2e=({ownerState:n})=>({minWidth:0,boxSizing:"border-box",...n.container&&{display:"flex",flexWrap:"wrap",...n.wrap&&n.wrap!=="wrap"&&{flexWrap:n.wrap},gap:`var(${SN("row")}) var(${SN("column")})`}}),S2e=n=>{const e=[];return Object.entries(n).forEach(([t,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${t}-${String(r)}`)}),e},C2e=(n,e="xs")=>{function t(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(t(n))return[`spacing-${e}-${String(n)}`];if(typeof n=="object"&&!Array.isArray(n)){const r=[];return Object.entries(n).forEach(([i,a])=>{t(a)&&r.push(`spacing-${i}-${String(a)}`)}),r}return[]},E2e=n=>n===void 0?[]:typeof n=="object"?Object.entries(n).map(([e,t])=>`direction-${e}-${t}`):[`direction-xs-${String(n)}`];function T2e(n,e){n.item!==void 0&&delete n.item,n.zeroMinWidth!==void 0&&delete n.zeroMinWidth,e.keys.forEach(t=>{n[t]!==void 0&&delete n[t]})}const D2e=xR(),A2e=qbe("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,e)=>e.root});function k2e(n){return Hbe({props:n,name:"MuiGrid",defaultTheme:D2e})}function N2e(n={}){const{createStyledComponent:e=A2e,useThemeProps:t=k2e,useTheme:r=aD,componentName:i="MuiGrid"}=n,a=(l,h)=>{const{container:c,direction:f,spacing:d,wrap:p,size:m}=l,g={root:["root",c&&"container",p!=="wrap"&&`wrap-xs-${String(p)}`,...E2e(f),...S2e(m),...c?C2e(d,h.breakpoints.keys[0]):[]]};return zr(g,y=>Br(i,y),{})};function o(l,h,c=()=>!0){const f={};return l===null||(Array.isArray(l)?l.forEach((d,p)=>{d!==null&&c(d)&&h.keys[p]&&(f[h.keys[p]]=d)}):typeof l=="object"?Object.keys(l).forEach(d=>{const p=l[d];p!=null&&c(p)&&(f[d]=p)}):f[h.keys[0]]=l),f}const s=e(v2e,w2e,b2e,m2e,x2e,_2e,y2e),u=pe.forwardRef(function(h,c){const f=r(),d=t(h),p=_R(d);T2e(p,f.breakpoints);const{className:m,children:g,columns:y=12,container:v=!1,component:b="div",direction:w="row",wrap:x="wrap",size:S={},offset:E={},spacing:A=0,rowSpacing:k=A,columnSpacing:T=A,unstable_level:O=0,...F}=p,I=o(S,f.breakpoints,M=>M!==!1),R=o(E,f.breakpoints),U=h.columns??(O?void 0:y),B=h.spacing??(O?void 0:A),W=h.rowSpacing??h.spacing??(O?void 0:k),Y=h.columnSpacing??h.spacing??(O?void 0:T),z={...p,level:O,columns:U,container:v,direction:w,wrap:x,spacing:B,rowSpacing:W,columnSpacing:Y,size:I,offset:R},j=a(z,f);return Ie.jsx(s,{ref:c,as:b,ownerState:z,className:Nn(j.root,m),...F,children:pe.Children.map(g,M=>{var q;return pe.isValidElement(M)&&Zk(M,["Grid"])&&v&&M.props.container?pe.cloneElement(M,{unstable_level:((q=M.props)==null?void 0:q.unstable_level)??O+1}):M})})});return u.muiName="Grid",u}function Wee(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:BC.white,default:BC.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const O2e=Wee();function jee(){return{text:{primary:BC.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:BC.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const lq=jee();function cq(n,e,t,r){const i=r.light||r,a=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=JB(n.main,i):e==="dark"&&(n.dark=ZB(n.main,a)))}function R2e(n="light"){return n==="dark"?{main:Bb[200],light:Bb[50],dark:Bb[400]}:{main:Bb[700],light:Bb[400],dark:Bb[800]}}function I2e(n="light"){return n==="dark"?{main:Ub[200],light:Ub[50],dark:Ub[400]}:{main:Ub[500],light:Ub[300],dark:Ub[700]}}function F2e(n="light"){return n==="dark"?{main:Mb[500],light:Mb[300],dark:Mb[700]}:{main:Mb[700],light:Mb[400],dark:Mb[800]}}function P2e(n="light"){return n==="dark"?{main:zb[400],light:zb[300],dark:zb[700]}:{main:zb[700],light:zb[500],dark:zb[900]}}function L2e(n="light"){return n==="dark"?{main:Wb[400],light:Wb[300],dark:Wb[700]}:{main:Wb[800],light:Wb[500],dark:Wb[900]}}function M2e(n="light"){return n==="dark"?{main:T_[400],light:T_[300],dark:T_[700]}:{main:"#ed6c02",light:T_[500],dark:T_[900]}}function t9(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...i}=n,a=n.primary||R2e(e),o=n.secondary||I2e(e),s=n.error||F2e(e),u=n.info||P2e(e),l=n.success||L2e(e),h=n.warning||M2e(e);function c(m){return Ybe(m,lq.text.primary)>=t?lq.text.primary:O2e.text.primary}const f=({color:m,name:g,mainShade:y=500,lightShade:v=300,darkShade:b=700})=>{if(m={...m},!m.main&&m[y]&&(m.main=m[y]),!m.hasOwnProperty("main"))throw new Error(_p(11,g?` (${g})`:"",y));if(typeof m.main!="string")throw new Error(_p(12,g?` (${g})`:"",JSON.stringify(m.main)));return cq(m,"light",v,r),cq(m,"dark",b,r),m.contrastText||(m.contrastText=c(m.main)),m};let d;return e==="light"?d=Wee():e==="dark"&&(d=jee()),vo({common:{...BC},mode:e,primary:f({color:a,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:s,name:"error"}),warning:f({color:h,name:"warning"}),info:f({color:u,name:"info"}),success:f({color:l,name:"success"}),grey:k0e,contrastThreshold:t,getContrastText:c,augmentColor:f,tonalOffset:r,...d},i)}function U2e(n){const e={};return Object.entries(n).forEach(r=>{const[i,a]=r;typeof a=="object"&&(e[i]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),e}function B2e(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function z2e(n){return Math.round(n*1e5)/1e5}const hq={textTransform:"uppercase"},fq='"Roboto", "Helvetica", "Arial", sans-serif';function W2e(n,e){const{fontFamily:t=fq,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:a=400,fontWeightMedium:o=500,fontWeightBold:s=700,htmlFontSize:u=16,allVariants:l,pxToRem:h,...c}=typeof e=="function"?e(n):e,f=r/14,d=h||(g=>`${g/u*f}rem`),p=(g,y,v,b,w)=>({fontFamily:t,fontWeight:g,fontSize:d(y),lineHeight:v,...t===fq?{letterSpacing:`${z2e(b/y)}em`}:{},...w,...l}),m={h1:p(i,96,1.167,-1.5),h2:p(i,60,1.2,-.5),h3:p(a,48,1.167,0),h4:p(a,34,1.235,.25),h5:p(a,24,1.334,0),h6:p(o,20,1.6,.15),subtitle1:p(a,16,1.75,.15),subtitle2:p(o,14,1.57,.1),body1:p(a,16,1.5,.15),body2:p(a,14,1.43,.15),button:p(o,14,1.75,.4,hq),caption:p(a,12,1.66,.4),overline:p(a,12,2.66,1,hq),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return vo({htmlFontSize:u,pxToRem:d,fontFamily:t,fontSize:r,fontWeightLight:i,fontWeightRegular:a,fontWeightMedium:o,fontWeightBold:s,...m},c,{clone:!1})}const j2e=.2,$2e=.14,q2e=.12;function Fi(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${j2e})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${$2e})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${q2e})`].join(",")}const V2e=["none",Fi(0,2,1,-1,0,1,1,0,0,1,3,0),Fi(0,3,1,-2,0,2,2,0,0,1,5,0),Fi(0,3,3,-2,0,3,4,0,0,1,8,0),Fi(0,2,4,-1,0,4,5,0,0,1,10,0),Fi(0,3,5,-1,0,5,8,0,0,1,14,0),Fi(0,3,5,-1,0,6,10,0,0,1,18,0),Fi(0,4,5,-2,0,7,10,1,0,2,16,1),Fi(0,5,5,-3,0,8,10,1,0,3,14,2),Fi(0,5,6,-3,0,9,12,1,0,3,16,2),Fi(0,6,6,-3,0,10,14,1,0,4,18,3),Fi(0,6,7,-4,0,11,15,1,0,4,20,3),Fi(0,7,8,-4,0,12,17,2,0,5,22,4),Fi(0,7,8,-4,0,13,19,2,0,5,24,4),Fi(0,7,9,-4,0,14,21,2,0,5,26,4),Fi(0,8,9,-5,0,15,22,2,0,6,28,5),Fi(0,8,10,-5,0,16,24,2,0,6,30,5),Fi(0,8,11,-5,0,17,26,2,0,6,32,5),Fi(0,9,11,-5,0,18,28,2,0,7,34,6),Fi(0,9,12,-6,0,19,29,2,0,7,36,6),Fi(0,10,13,-6,0,20,31,3,0,8,38,7),Fi(0,10,13,-6,0,21,33,3,0,8,40,7),Fi(0,10,14,-6,0,22,35,3,0,8,42,7),Fi(0,11,14,-7,0,23,36,3,0,9,44,8),Fi(0,11,15,-7,0,24,38,3,0,9,46,8)],H2e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},G2e={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function dq(n){return`${Math.round(n)}ms`}function X2e(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function K2e(n){const e={...H2e,...n.easing},t={...G2e,...n.duration};return{getAutoHeightDuration:X2e,create:(i=["all"],a={})=>{const{duration:o=t.standard,easing:s=e.easeInOut,delay:u=0,...l}=a;return(Array.isArray(i)?i:[i]).map(h=>`${h} ${typeof o=="string"?o:dq(o)} ${s} ${typeof u=="string"?u:dq(u)}`).join(",")},...n,easing:e,duration:t}}const Y2e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Q2e(n){return kf(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function $ee(n={}){const e={...n};function t(r){const i=Object.entries(r);for(let a=0;a<i.length;a++){const[o,s]=i[a];!Q2e(s)||o.startsWith("unstable_")?delete r[o]:kf(s)&&(r[o]={...s},t(r[o]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function m6(n={},...e){const{breakpoints:t,mixins:r={},spacing:i,palette:a={},transitions:o={},typography:s={},shape:u,...l}=n;if(n.vars&&n.generateThemeVars===void 0)throw new Error(_p(20));const h=t9(a),c=xR(n);let f=vo(c,{mixins:B2e(c.breakpoints,r),palette:h,shadows:V2e.slice(),typography:W2e(h,s),transitions:K2e(o),zIndex:{...Y2e}});return f=vo(f,l),f=e.reduce((d,p)=>vo(d,p),f),f.unstable_sxConfig={...iD,...l==null?void 0:l.unstable_sxConfig},f.unstable_sx=function(p){return e1({sx:p,theme:this})},f.toRuntimeSource=$ee,f}function y6(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const Z2e=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=y6(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function qee(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function Vee(n){return n==="dark"?Z2e:[]}function J2e(n){const{palette:e={mode:"light"},opacity:t,overlays:r,...i}=n,a=t9(e);return{palette:a,opacity:{...qee(a.mode),...t},overlays:r||Vee(a.mode),...i}}function ewe(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const twe=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],nwe=n=>(e,t)=>{const r=n.rootSelector||":root",i=n.colorSchemeSelector;let a=i;if(i==="class"&&(a=".%s"),i==="data"&&(a="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(a=`[${i}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const o={};return twe(n.cssVarPrefix).forEach(s=>{o[s]=t[s],delete t[s]}),a==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:o}}:a?{[a.replace("%s",e)]:o,[`${r}, ${a.replace("%s",e)}`]:t}:{[r]:{...t,...o}}}if(a&&a!=="media")return`${r}, ${a.replace("%s",String(e))}`}else if(e){if(a==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(a)return a.replace("%s",String(e))}return r};function rwe(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function gt(n,e,t){!n[e]&&t&&(n[e]=t)}function GS(n){return typeof n!="string"||!n.startsWith("hsl")?n:Ree(n)}function wd(n,e){`${e}Channel`in n||(n[`${e}Channel`]=HS(GS(n[e])))}function iwe(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Qh=n=>{try{return n()}catch{}},awe=(n="mui")=>c2e(n);function C5(n,e,t,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!t){n[r]=J2e({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:a,...o}=m6({...t,palette:{mode:i,...e==null?void 0:e.palette}});return n[r]={...e,palette:a,opacity:{...qee(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||Vee(i)},o}function swe(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:o=ewe,colorSchemeSelector:s=t.light&&t.dark?"media":void 0,rootSelector:u=":root",...l}=n,h=Object.keys(t)[0],c=r||(t.light&&h!=="light"?"light":h),f=awe(a),{[c]:d,light:p,dark:m,...g}=t,y={...g};let v=d;if((c==="dark"&&!("dark"in t)||c==="light"&&!("light"in t))&&(v=!0),!v)throw new Error(_p(21,c));const b=C5(y,v,l,c);p&&!y.light&&C5(y,p,void 0,"light"),m&&!y.dark&&C5(y,m,void 0,"dark");let w={defaultColorScheme:c,...b,cssVarPrefix:a,colorSchemeSelector:s,rootSelector:u,getCssVar:f,colorSchemes:y,font:{...U2e(b.typography),...b.font},spacing:iwe(l.spacing)};Object.keys(w.colorSchemes).forEach(k=>{const T=w.colorSchemes[k].palette,O=F=>{const I=F.split("-"),R=I[1],U=I[2];return f(F,T[R][U])};if(T.mode==="light"&&(gt(T.common,"background","#fff"),gt(T.common,"onBackground","#000")),T.mode==="dark"&&(gt(T.common,"background","#000"),gt(T.common,"onBackground","#fff")),rwe(T,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),T.mode==="light"){gt(T.Alert,"errorColor",li(T.error.light,.6)),gt(T.Alert,"infoColor",li(T.info.light,.6)),gt(T.Alert,"successColor",li(T.success.light,.6)),gt(T.Alert,"warningColor",li(T.warning.light,.6)),gt(T.Alert,"errorFilledBg",O("palette-error-main")),gt(T.Alert,"infoFilledBg",O("palette-info-main")),gt(T.Alert,"successFilledBg",O("palette-success-main")),gt(T.Alert,"warningFilledBg",O("palette-warning-main")),gt(T.Alert,"errorFilledColor",Qh(()=>T.getContrastText(T.error.main))),gt(T.Alert,"infoFilledColor",Qh(()=>T.getContrastText(T.info.main))),gt(T.Alert,"successFilledColor",Qh(()=>T.getContrastText(T.success.main))),gt(T.Alert,"warningFilledColor",Qh(()=>T.getContrastText(T.warning.main))),gt(T.Alert,"errorStandardBg",ci(T.error.light,.9)),gt(T.Alert,"infoStandardBg",ci(T.info.light,.9)),gt(T.Alert,"successStandardBg",ci(T.success.light,.9)),gt(T.Alert,"warningStandardBg",ci(T.warning.light,.9)),gt(T.Alert,"errorIconColor",O("palette-error-main")),gt(T.Alert,"infoIconColor",O("palette-info-main")),gt(T.Alert,"successIconColor",O("palette-success-main")),gt(T.Alert,"warningIconColor",O("palette-warning-main")),gt(T.AppBar,"defaultBg",O("palette-grey-100")),gt(T.Avatar,"defaultBg",O("palette-grey-400")),gt(T.Button,"inheritContainedBg",O("palette-grey-300")),gt(T.Button,"inheritContainedHoverBg",O("palette-grey-A100")),gt(T.Chip,"defaultBorder",O("palette-grey-400")),gt(T.Chip,"defaultAvatarColor",O("palette-grey-700")),gt(T.Chip,"defaultIconColor",O("palette-grey-700")),gt(T.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),gt(T.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),gt(T.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),gt(T.LinearProgress,"primaryBg",ci(T.primary.main,.62)),gt(T.LinearProgress,"secondaryBg",ci(T.secondary.main,.62)),gt(T.LinearProgress,"errorBg",ci(T.error.main,.62)),gt(T.LinearProgress,"infoBg",ci(T.info.main,.62)),gt(T.LinearProgress,"successBg",ci(T.success.main,.62)),gt(T.LinearProgress,"warningBg",ci(T.warning.main,.62)),gt(T.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.11)`),gt(T.Slider,"primaryTrack",ci(T.primary.main,.62)),gt(T.Slider,"secondaryTrack",ci(T.secondary.main,.62)),gt(T.Slider,"errorTrack",ci(T.error.main,.62)),gt(T.Slider,"infoTrack",ci(T.info.main,.62)),gt(T.Slider,"successTrack",ci(T.success.main,.62)),gt(T.Slider,"warningTrack",ci(T.warning.main,.62));const F=ek(T.background.default,.8);gt(T.SnackbarContent,"bg",F),gt(T.SnackbarContent,"color",Qh(()=>T.getContrastText(F))),gt(T.SpeedDialAction,"fabHoverBg",ek(T.background.paper,.15)),gt(T.StepConnector,"border",O("palette-grey-400")),gt(T.StepContent,"border",O("palette-grey-400")),gt(T.Switch,"defaultColor",O("palette-common-white")),gt(T.Switch,"defaultDisabledColor",O("palette-grey-100")),gt(T.Switch,"primaryDisabledColor",ci(T.primary.main,.62)),gt(T.Switch,"secondaryDisabledColor",ci(T.secondary.main,.62)),gt(T.Switch,"errorDisabledColor",ci(T.error.main,.62)),gt(T.Switch,"infoDisabledColor",ci(T.info.main,.62)),gt(T.Switch,"successDisabledColor",ci(T.success.main,.62)),gt(T.Switch,"warningDisabledColor",ci(T.warning.main,.62)),gt(T.TableCell,"border",ci(JA(T.divider,1),.88)),gt(T.Tooltip,"bg",JA(T.grey[700],.92))}if(T.mode==="dark"){gt(T.Alert,"errorColor",ci(T.error.light,.6)),gt(T.Alert,"infoColor",ci(T.info.light,.6)),gt(T.Alert,"successColor",ci(T.success.light,.6)),gt(T.Alert,"warningColor",ci(T.warning.light,.6)),gt(T.Alert,"errorFilledBg",O("palette-error-dark")),gt(T.Alert,"infoFilledBg",O("palette-info-dark")),gt(T.Alert,"successFilledBg",O("palette-success-dark")),gt(T.Alert,"warningFilledBg",O("palette-warning-dark")),gt(T.Alert,"errorFilledColor",Qh(()=>T.getContrastText(T.error.dark))),gt(T.Alert,"infoFilledColor",Qh(()=>T.getContrastText(T.info.dark))),gt(T.Alert,"successFilledColor",Qh(()=>T.getContrastText(T.success.dark))),gt(T.Alert,"warningFilledColor",Qh(()=>T.getContrastText(T.warning.dark))),gt(T.Alert,"errorStandardBg",li(T.error.light,.9)),gt(T.Alert,"infoStandardBg",li(T.info.light,.9)),gt(T.Alert,"successStandardBg",li(T.success.light,.9)),gt(T.Alert,"warningStandardBg",li(T.warning.light,.9)),gt(T.Alert,"errorIconColor",O("palette-error-main")),gt(T.Alert,"infoIconColor",O("palette-info-main")),gt(T.Alert,"successIconColor",O("palette-success-main")),gt(T.Alert,"warningIconColor",O("palette-warning-main")),gt(T.AppBar,"defaultBg",O("palette-grey-900")),gt(T.AppBar,"darkBg",O("palette-background-paper")),gt(T.AppBar,"darkColor",O("palette-text-primary")),gt(T.Avatar,"defaultBg",O("palette-grey-600")),gt(T.Button,"inheritContainedBg",O("palette-grey-800")),gt(T.Button,"inheritContainedHoverBg",O("palette-grey-700")),gt(T.Chip,"defaultBorder",O("palette-grey-700")),gt(T.Chip,"defaultAvatarColor",O("palette-grey-300")),gt(T.Chip,"defaultIconColor",O("palette-grey-300")),gt(T.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),gt(T.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),gt(T.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),gt(T.LinearProgress,"primaryBg",li(T.primary.main,.5)),gt(T.LinearProgress,"secondaryBg",li(T.secondary.main,.5)),gt(T.LinearProgress,"errorBg",li(T.error.main,.5)),gt(T.LinearProgress,"infoBg",li(T.info.main,.5)),gt(T.LinearProgress,"successBg",li(T.success.main,.5)),gt(T.LinearProgress,"warningBg",li(T.warning.main,.5)),gt(T.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.13)`),gt(T.Slider,"primaryTrack",li(T.primary.main,.5)),gt(T.Slider,"secondaryTrack",li(T.secondary.main,.5)),gt(T.Slider,"errorTrack",li(T.error.main,.5)),gt(T.Slider,"infoTrack",li(T.info.main,.5)),gt(T.Slider,"successTrack",li(T.success.main,.5)),gt(T.Slider,"warningTrack",li(T.warning.main,.5));const F=ek(T.background.default,.98);gt(T.SnackbarContent,"bg",F),gt(T.SnackbarContent,"color",Qh(()=>T.getContrastText(F))),gt(T.SpeedDialAction,"fabHoverBg",ek(T.background.paper,.15)),gt(T.StepConnector,"border",O("palette-grey-600")),gt(T.StepContent,"border",O("palette-grey-600")),gt(T.Switch,"defaultColor",O("palette-grey-300")),gt(T.Switch,"defaultDisabledColor",O("palette-grey-600")),gt(T.Switch,"primaryDisabledColor",li(T.primary.main,.55)),gt(T.Switch,"secondaryDisabledColor",li(T.secondary.main,.55)),gt(T.Switch,"errorDisabledColor",li(T.error.main,.55)),gt(T.Switch,"infoDisabledColor",li(T.info.main,.55)),gt(T.Switch,"successDisabledColor",li(T.success.main,.55)),gt(T.Switch,"warningDisabledColor",li(T.warning.main,.55)),gt(T.TableCell,"border",li(JA(T.divider,1),.68)),gt(T.Tooltip,"bg",JA(T.grey[700],.92))}wd(T.background,"default"),wd(T.background,"paper"),wd(T.common,"background"),wd(T.common,"onBackground"),wd(T,"divider"),Object.keys(T).forEach(F=>{const I=T[F];F!=="tonalOffset"&&I&&typeof I=="object"&&(I.main&&gt(T[F],"mainChannel",HS(GS(I.main))),I.light&&gt(T[F],"lightChannel",HS(GS(I.light))),I.dark&&gt(T[F],"darkChannel",HS(GS(I.dark))),I.contrastText&&gt(T[F],"contrastTextChannel",HS(GS(I.contrastText))),F==="text"&&(wd(T[F],"primary"),wd(T[F],"secondary")),F==="action"&&(I.active&&wd(T[F],"active"),I.selected&&wd(T[F],"selected")))})}),w=e.reduce((k,T)=>vo(k,T),w);const x={prefix:a,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:nwe(w)},{vars:S,generateThemeVars:E,generateStyleSheets:A}=d2e(w,x);return w.vars=S,Object.entries(w.colorSchemes[w.defaultColorScheme]).forEach(([k,T])=>{w[k]=T}),w.generateThemeVars=E,w.generateStyleSheets=A,w.generateSpacing=function(){return Tee(l.spacing,KB(this))},w.getColorSchemeSelector=p2e(s),w.spacing=w.generateSpacing(),w.shouldSkipGeneratingVar=o,w.unstable_sxConfig={...iD,...l==null?void 0:l.unstable_sxConfig},w.unstable_sx=function(T){return e1({sx:T,theme:this})},w.toRuntimeSource=$ee,w}function pq(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:t9({...t===!0?{}:t.palette,mode:e})})}function Hee(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:a=t==null?void 0:t.mode,...o}=n,s=a||"light",u=i==null?void 0:i[s],l={...i,...t?{[s]:{...typeof u!="boolean"&&u,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return m6(n,...e);let h=t;"palette"in n||l[s]&&(l[s]!==!0?h=l[s].palette:s==="dark"&&(h={mode:"dark"}));const c=m6({...n,palette:h},...e);return c.defaultColorScheme=s,c.colorSchemes=l,c.palette.mode==="light"&&(c.colorSchemes.light={...l.light!==!0&&l.light,palette:c.palette},pq(c,"dark",l.dark)),c.palette.mode==="dark"&&(c.colorSchemes.dark={...l.dark!==!0&&l.dark,palette:c.palette},pq(c,"light",l.light)),c}return!t&&!("light"in l)&&s==="light"&&(l.light=!0),swe({...o,colorSchemes:l,defaultColorScheme:s,...typeof r!="boolean"&&r},...e)}const n9=Hee();function oD(){const n=aD(n9);return n[uR]||n}function Gee(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const vc=n=>Gee(n)&&n!=="classes",hn=Oee({themeId:uR,defaultTheme:n9,rootShouldForwardProp:vc});function owe(n){return Ie.jsx(Rbe,{...n,defaultTheme:n9,themeId:uR})}function uwe(n){return function(t){return Ie.jsx(owe,{styles:typeof n=="function"?r=>n({theme:r,...t}):n})}}function lwe(){return _R}const Xi=l2e;function Xr(n){return u2e(n)}function cwe(n){return Br("MuiSvgIcon",n)}br("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const hwe=n=>{const{color:e,fontSize:t,classes:r}=n,i={root:["root",e!=="inherit"&&`color${kn(e)}`,`fontSize${kn(t)}`]};return zr(i,cwe,r)},fwe=hn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${kn(t.color)}`],e[`fontSize${kn(t.fontSize)}`]]}})(Xi(({theme:n})=>{var e,t,r,i,a,o,s,u,l,h,c,f,d,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=n.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:m=>!m.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(a=n.typography)==null?void 0:a.pxToRem)==null?void 0:o.call(a,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((u=(s=n.typography)==null?void 0:s.pxToRem)==null?void 0:u.call(s,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((h=(l=n.typography)==null?void 0:l.pxToRem)==null?void 0:h.call(l,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,m])=>m&&m.main).map(([m])=>{var g,y;return{props:{color:m},style:{color:(y=(g=(n.vars??n).palette)==null?void 0:g[m])==null?void 0:y.main}}}),{props:{color:"action"},style:{color:(f=(c=(n.vars??n).palette)==null?void 0:c.action)==null?void 0:f.active}},{props:{color:"disabled"},style:{color:(p=(d=(n.vars??n).palette)==null?void 0:d.action)==null?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),v6=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiSvgIcon"}),{children:i,className:a,color:o="inherit",component:s="svg",fontSize:u="medium",htmlColor:l,inheritViewBox:h=!1,titleAccess:c,viewBox:f="0 0 24 24",...d}=r,p=pe.isValidElement(i)&&i.type==="svg",m={...r,color:o,component:s,fontSize:u,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:f,hasSvgAsChild:p},g={};h||(g.viewBox=f);const y=hwe(m);return Ie.jsxs(fwe,{as:s,className:Nn(y.root,a),focusable:"false",color:l,"aria-hidden":c?void 0:!0,role:c?"img":void 0,ref:t,...g,...d,...p&&i.props,ownerState:m,children:[p?i.props.children:i,c?Ie.jsx("title",{children:c}):null]})});v6.muiName="SvgIcon";function TR(n,e){function t(r,i){return Ie.jsx(v6,{"data-testid":`${e}Icon`,ref:i,...r,children:n})}return t.muiName=v6.muiName,pe.memo(pe.forwardRef(t))}function dwe(n,e){if(!n)return e;if(typeof n=="function"||typeof e=="function")return i=>{const a=typeof e=="function"?e(i):e,o=typeof n=="function"?n({...i,...a}):n,s=Nn(i==null?void 0:i.className,a==null?void 0:a.className,o==null?void 0:o.className);return{...a,...o,...!!s&&{className:s},...(a==null?void 0:a.style)&&(o==null?void 0:o.style)&&{style:{...a.style,...o.style}},...(a==null?void 0:a.sx)&&(o==null?void 0:o.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(o.sx)?o.sx:[o.sx]]}}};const t=e,r=Nn(t==null?void 0:t.className,n==null?void 0:n.className);return{...e,...n,...!!r&&{className:r},...(t==null?void 0:t.style)&&(n==null?void 0:n.style)&&{style:{...t.style,...n.style}},...(t==null?void 0:t.sx)&&(n==null?void 0:n.sx)&&{sx:[...Array.isArray(t.sx)?t.sx:[t.sx],...Array.isArray(n.sx)?n.sx:[n.sx]]}}}function Xee(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function b6(n,e){return b6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},b6(n,e)}function Kee(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,b6(n,e)}var Yee=NB();const tk=Fp(Yee),gq={disabled:!1},CN=ki.createContext(null);var pwe=function(e){return e.scrollTop},XS="unmounted",lv="exited",cv="entering",Jb="entered",w6="exiting",jf=function(n){Kee(e,n);function e(r,i){var a;a=n.call(this,r,i)||this;var o=i,s=o&&!o.isMounting?r.enter:r.appear,u;return a.appearStatus=null,r.in?s?(u=lv,a.appearStatus=cv):u=Jb:r.unmountOnExit||r.mountOnEnter?u=XS:u=lv,a.state={status:u},a.nextCallback=null,a}e.getDerivedStateFromProps=function(i,a){var o=i.in;return o&&a.status===XS?{status:lv}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var a=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==cv&&o!==Jb&&(a=cv):(o===cv||o===Jb)&&(a=w6)}this.updateStatus(!1,a)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,a,o,s;return a=o=s=i,i!=null&&typeof i!="number"&&(a=i.exit,o=i.enter,s=i.appear!==void 0?i.appear:o),{exit:a,enter:o,appear:s}},t.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null)if(this.cancelNextCallback(),a===cv){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:tk.findDOMNode(this);o&&pwe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===lv&&this.setState({status:XS})},t.performEnter=function(i){var a=this,o=this.props.enter,s=this.context?this.context.isMounting:i,u=this.props.nodeRef?[s]:[tk.findDOMNode(this),s],l=u[0],h=u[1],c=this.getTimeouts(),f=s?c.appear:c.enter;if(!i&&!o||gq.disabled){this.safeSetState({status:Jb},function(){a.props.onEntered(l)});return}this.props.onEnter(l,h),this.safeSetState({status:cv},function(){a.props.onEntering(l,h),a.onTransitionEnd(f,function(){a.safeSetState({status:Jb},function(){a.props.onEntered(l,h)})})})},t.performExit=function(){var i=this,a=this.props.exit,o=this.getTimeouts(),s=this.props.nodeRef?void 0:tk.findDOMNode(this);if(!a||gq.disabled){this.safeSetState({status:lv},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:w6},function(){i.props.onExiting(s),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:lv},function(){i.props.onExited(s)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},t.setNextCallback=function(i){var a=this,o=!0;return this.nextCallback=function(s){o&&(o=!1,a.nextCallback=null,i(s))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(i,a){this.setNextCallback(a);var o=this.props.nodeRef?this.props.nodeRef.current:tk.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!o||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],h=u[1];this.props.addEndListener(l,h)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===XS)return null;var a=this.props,o=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var s=Xee(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ki.createElement(CN.Provider,{value:null},typeof o=="function"?o(i,s):ki.cloneElement(ki.Children.only(o),s))},e}(ki.Component);jf.contextType=CN;jf.propTypes={};function jb(){}jf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:jb,onEntering:jb,onEntered:jb,onExit:jb,onExiting:jb,onExited:jb};jf.UNMOUNTED=XS;jf.EXITED=lv;jf.ENTERING=cv;jf.ENTERED=Jb;jf.EXITING=w6;function gwe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function r9(n,e){var t=function(a){return e&&pe.isValidElement(a)?e(a):a},r=Object.create(null);return n&&pe.Children.map(n,function(i){return i}).forEach(function(i){r[i.key]=t(i)}),r}function mwe(n,e){n=n||{},e=e||{};function t(h){return h in e?e[h]:n[h]}var r=Object.create(null),i=[];for(var a in n)a in e?i.length&&(r[a]=i,i=[]):i.push(a);var o,s={};for(var u in e){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];s[r[u][o]]=t(l)}s[u]=t(u)}for(o=0;o<i.length;o++)s[i[o]]=t(i[o]);return s}function kv(n,e,t){return t[e]!=null?t[e]:n.props[e]}function ywe(n,e){return r9(n.children,function(t){return pe.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:kv(t,"appear",n),enter:kv(t,"enter",n),exit:kv(t,"exit",n)})})}function vwe(n,e,t){var r=r9(n.children),i=mwe(e,r);return Object.keys(i).forEach(function(a){var o=i[a];if(pe.isValidElement(o)){var s=a in e,u=a in r,l=e[a],h=pe.isValidElement(l)&&!l.props.in;u&&(!s||h)?i[a]=pe.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:kv(o,"exit",n),enter:kv(o,"enter",n)}):!u&&s&&!h?i[a]=pe.cloneElement(o,{in:!1}):u&&s&&pe.isValidElement(l)&&(i[a]=pe.cloneElement(o,{onExited:t.bind(null,o),in:l.props.in,exit:kv(o,"exit",n),enter:kv(o,"enter",n)}))}}),i}var bwe=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},wwe={component:"div",childFactory:function(e){return e}},i9=function(n){Kee(e,n);function e(r,i){var a;a=n.call(this,r,i)||this;var o=a.handleExited.bind(gwe(a));return a.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},a}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,a){var o=a.children,s=a.handleExited,u=a.firstRender;return{children:u?ywe(i,s):vwe(i,o,s),firstRender:!1}},t.handleExited=function(i,a){var o=r9(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(a),this.mounted&&this.setState(function(s){var u=wN({},s.children);return delete u[i.key],{children:u}}))},t.render=function(){var i=this.props,a=i.component,o=i.childFactory,s=Xee(i,["component","childFactory"]),u=this.state.contextValue,l=bwe(this.state.children).map(o);return delete s.appear,delete s.enter,delete s.exit,a===null?ki.createElement(CN.Provider,{value:u},l):ki.createElement(CN.Provider,{value:u},ki.createElement(a,s,l))},e}(ki.Component);i9.propTypes={};i9.defaultProps=wwe;const Qee=n=>n.scrollTop;function EN(n,e){const{timeout:t,easing:r,style:i={}}=n;return{duration:i.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function xwe(n){return Br("MuiPaper",n)}br("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _we=n=>{const{square:e,elevation:t,variant:r,classes:i}=n,a={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return zr(a,xwe,i)},Swe=hn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(Xi(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Zee=pe.forwardRef(function(e,t){var d;const r=Xr({props:e,name:"MuiPaper"}),i=oD(),{className:a,component:o="div",elevation:s=1,square:u=!1,variant:l="elevation",...h}=r,c={...r,component:o,elevation:s,square:u,variant:l},f=_we(c);return Ie.jsx(Swe,{as:o,ownerState:c,className:Nn(f.root,a),ref:t,...h,style:{...l==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[s],...i.vars&&{"--Paper-overlay":(d=i.vars.overlays)==null?void 0:d[s]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${_u("#fff",y6(s))}, ${_u("#fff",y6(s))})`}},...h.style}})});function Su(n,e){const{className:t,elementType:r,ownerState:i,externalForwardedProps:a,internalForwardedProps:o,shouldForwardComponentProp:s=!1,...u}=e,{component:l,slots:h={[n]:void 0},slotProps:c={[n]:void 0},...f}=a,d=h[n]||r,p=zee(c[n],i),{props:{component:m,...g},internalRef:y}=Bee({className:t,...u,externalForwardedProps:n==="root"?f:void 0,externalSlotProps:p}),v=Ho(y,p==null?void 0:p.ref,e.ref),b=n==="root"?m||l:m,w=Mee(d,{...n==="root"&&!l&&!h[n]&&o,...n!=="root"&&!h[n]&&o,...g,...b&&!s&&{as:b},...b&&s&&{component:b},ref:v},i);return[d,w]}class TN{constructor(){nn(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new TN}static use(){const e=Fee(TN.create).current,[t,r]=pe.useState(!1);return e.shouldMount=t,e.setShouldMount=r,pe.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=Ewe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function Cwe(){return TN.use()}function Ewe(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t}function Twe(n){const{className:e,classes:t,pulsate:r=!1,rippleX:i,rippleY:a,rippleSize:o,in:s,onExited:u,timeout:l}=n,[h,c]=pe.useState(!1),f=Nn(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),d={width:o,height:o,top:-(o/2)+a,left:-(o/2)+i},p=Nn(t.child,h&&t.childLeaving,r&&t.childPulsate);return!s&&!h&&c(!0),pe.useEffect(()=>{if(!s&&u!=null){const m=setTimeout(u,l);return()=>{clearTimeout(m)}}},[u,s,l]),Ie.jsx("span",{className:f,style:d,children:Ie.jsx("span",{className:p})})}const ic=br("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),x6=550,Dwe=80,Awe=tD`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,kwe=tD`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Nwe=tD`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Owe=hn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Rwe=hn(Twe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ic.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Awe};
    animation-duration: ${x6}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${ic.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${ic.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ic.childLeaving} {
    opacity: 0;
    animation-name: ${kwe};
    animation-duration: ${x6}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${ic.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Nwe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Iwe=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:a={},className:o,...s}=r,[u,l]=pe.useState([]),h=pe.useRef(0),c=pe.useRef(null);pe.useEffect(()=>{c.current&&(c.current(),c.current=null)},[u]);const f=pe.useRef(!1),d=Pee(),p=pe.useRef(null),m=pe.useRef(null),g=pe.useCallback(w=>{const{pulsate:x,rippleX:S,rippleY:E,rippleSize:A,cb:k}=w;l(T=>[...T,Ie.jsx(Rwe,{classes:{ripple:Nn(a.ripple,ic.ripple),rippleVisible:Nn(a.rippleVisible,ic.rippleVisible),ripplePulsate:Nn(a.ripplePulsate,ic.ripplePulsate),child:Nn(a.child,ic.child),childLeaving:Nn(a.childLeaving,ic.childLeaving),childPulsate:Nn(a.childPulsate,ic.childPulsate)},timeout:x6,pulsate:x,rippleX:S,rippleY:E,rippleSize:A},h.current)]),h.current+=1,c.current=k},[a]),y=pe.useCallback((w={},x={},S=()=>{})=>{const{pulsate:E=!1,center:A=i||x.pulsate,fakeElement:k=!1}=x;if((w==null?void 0:w.type)==="mousedown"&&f.current){f.current=!1;return}(w==null?void 0:w.type)==="touchstart"&&(f.current=!0);const T=k?null:m.current,O=T?T.getBoundingClientRect():{width:0,height:0,left:0,top:0};let F,I,R;if(A||w===void 0||w.clientX===0&&w.clientY===0||!w.clientX&&!w.touches)F=Math.round(O.width/2),I=Math.round(O.height/2);else{const{clientX:U,clientY:B}=w.touches&&w.touches.length>0?w.touches[0]:w;F=Math.round(U-O.left),I=Math.round(B-O.top)}if(A)R=Math.sqrt((2*O.width**2+O.height**2)/3),R%2===0&&(R+=1);else{const U=Math.max(Math.abs((T?T.clientWidth:0)-F),F)*2+2,B=Math.max(Math.abs((T?T.clientHeight:0)-I),I)*2+2;R=Math.sqrt(U**2+B**2)}w!=null&&w.touches?p.current===null&&(p.current=()=>{g({pulsate:E,rippleX:F,rippleY:I,rippleSize:R,cb:S})},d.start(Dwe,()=>{p.current&&(p.current(),p.current=null)})):g({pulsate:E,rippleX:F,rippleY:I,rippleSize:R,cb:S})},[i,g,d]),v=pe.useCallback(()=>{y({},{pulsate:!0})},[y]),b=pe.useCallback((w,x)=>{if(d.clear(),(w==null?void 0:w.type)==="touchend"&&p.current){p.current(),p.current=null,d.start(0,()=>{b(w,x)});return}p.current=null,l(S=>S.length>0?S.slice(1):S),c.current=x},[d]);return pe.useImperativeHandle(t,()=>({pulsate:v,start:y,stop:b}),[v,y,b]),Ie.jsx(Owe,{className:Nn(ic.root,a.root,o),ref:m,...s,children:Ie.jsx(i9,{component:null,exit:!0,children:u})})});function Fwe(n){return Br("MuiButtonBase",n)}const Pwe=br("MuiButtonBase",["root","disabled","focusVisible"]),Lwe=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:i}=n,o=zr({root:["root",e&&"disabled",t&&"focusVisible"]},Fwe,i);return t&&r&&(o.root+=` ${r}`),o},Mwe=hn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Pwe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),a9=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:a=!1,children:o,className:s,component:u="button",disabled:l=!1,disableRipple:h=!1,disableTouchRipple:c=!1,focusRipple:f=!1,focusVisibleClassName:d,LinkComponent:p="a",onBlur:m,onClick:g,onContextMenu:y,onDragLeave:v,onFocus:b,onFocusVisible:w,onKeyDown:x,onKeyUp:S,onMouseDown:E,onMouseLeave:A,onMouseUp:k,onTouchEnd:T,onTouchMove:O,onTouchStart:F,tabIndex:I=0,TouchRippleProps:R,touchRippleRef:U,type:B,...W}=r,Y=pe.useRef(null),z=Cwe(),j=Ho(z.ref,U),[M,q]=pe.useState(!1);l&&M&&q(!1),pe.useImperativeHandle(i,()=>({focusVisible:()=>{q(!0),Y.current.focus()}}),[]);const H=z.shouldMount&&!h&&!l;pe.useEffect(()=>{M&&f&&!h&&z.pulsate()},[h,f,M,z]);const K=xd(z,"start",E,c),Z=xd(z,"stop",y,c),J=xd(z,"stop",v,c),X=xd(z,"stop",k,c),ae=xd(z,"stop",ue=>{M&&ue.preventDefault(),A&&A(ue)},c),ie=xd(z,"start",F,c),ce=xd(z,"stop",T,c),ge=xd(z,"stop",O,c),Ce=xd(z,"stop",ue=>{iq(ue.target)||q(!1),m&&m(ue)},!1),Ee=W0(ue=>{Y.current||(Y.current=ue.currentTarget),iq(ue.target)&&(q(!0),w&&w(ue)),b&&b(ue)}),G=()=>{const ue=Y.current;return u&&u!=="button"&&!(ue.tagName==="A"&&ue.href)},de=W0(ue=>{f&&!ue.repeat&&M&&ue.key===" "&&z.stop(ue,()=>{z.start(ue)}),ue.target===ue.currentTarget&&G()&&ue.key===" "&&ue.preventDefault(),x&&x(ue),ue.target===ue.currentTarget&&G()&&ue.key==="Enter"&&!l&&(ue.preventDefault(),g&&g(ue))}),ye=W0(ue=>{f&&ue.key===" "&&M&&!ue.defaultPrevented&&z.stop(ue,()=>{z.pulsate(ue)}),S&&S(ue),g&&ue.target===ue.currentTarget&&G()&&ue.key===" "&&!ue.defaultPrevented&&g(ue)});let le=u;le==="button"&&(W.href||W.to)&&(le=p);const ne={};le==="button"?(ne.type=B===void 0?"button":B,ne.disabled=l):(!W.href&&!W.to&&(ne.role="button"),l&&(ne["aria-disabled"]=l));const fe=Ho(t,Y),Ne={...r,centerRipple:a,component:u,disabled:l,disableRipple:h,disableTouchRipple:c,focusRipple:f,tabIndex:I,focusVisible:M},Ae=Lwe(Ne);return Ie.jsxs(Mwe,{as:le,className:Nn(Ae.root,s),ownerState:Ne,onBlur:Ce,onClick:g,onContextMenu:Z,onFocus:Ee,onKeyDown:de,onKeyUp:ye,onMouseDown:K,onMouseLeave:ae,onMouseUp:X,onDragLeave:J,onTouchEnd:ce,onTouchMove:ge,onTouchStart:ie,ref:fe,tabIndex:l?-1:I,type:B,...ne,...W,children:[o,H?Ie.jsx(Iwe,{ref:j,center:a,...R}):null]})});function xd(n,e,t,r=!1){return W0(i=>(t&&t(i),r||n[e](i),!0))}function Uwe(n){return typeof n.main=="string"}function Bwe(n,e=[]){if(!Uwe(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function Cp(n=[]){return([,e])=>e&&Bwe(e,n)}function zwe(n){return Br("MuiCircularProgress",n)}br("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Rg=44,_6=tD`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,S6=tD`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Wwe=typeof _6!="string"?HB`
        animation: ${_6} 1.4s linear infinite;
      `:null,jwe=typeof S6!="string"?HB`
        animation: ${S6} 1.4s ease-in-out infinite;
      `:null,$we=n=>{const{classes:e,variant:t,color:r,disableShrink:i}=n,a={root:["root",t,`color${kn(r)}`],svg:["svg"],circle:["circle",`circle${kn(t)}`,i&&"circleDisableShrink"]};return zr(a,zwe,e)},qwe=hn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${kn(t.color)}`]]}})(Xi(({theme:n})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Wwe||{animation:`${_6} 1.4s linear infinite`}},...Object.entries(n.palette).filter(Cp()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}}))]}))),Vwe=hn("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),Hwe=hn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${kn(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(Xi(({theme:n})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:jwe||{animation:`${S6} 1.4s ease-in-out infinite`}}]}))),s9=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiCircularProgress"}),{className:i,color:a="primary",disableShrink:o=!1,size:s=40,style:u,thickness:l=3.6,value:h=0,variant:c="indeterminate",...f}=r,d={...r,color:a,disableShrink:o,size:s,thickness:l,value:h,variant:c},p=$we(d),m={},g={},y={};if(c==="determinate"){const v=2*Math.PI*((Rg-l)/2);m.strokeDasharray=v.toFixed(3),y["aria-valuenow"]=Math.round(h),m.strokeDashoffset=`${((100-h)/100*v).toFixed(3)}px`,g.transform="rotate(-90deg)"}return Ie.jsx(qwe,{className:Nn(p.root,i),style:{width:s,height:s,...g,...u},ownerState:d,ref:t,role:"progressbar",...y,...f,children:Ie.jsx(Vwe,{className:p.svg,ownerState:d,viewBox:`${Rg/2} ${Rg/2} ${Rg} ${Rg}`,children:Ie.jsx(Hwe,{className:p.circle,style:m,ownerState:d,cx:Rg,cy:Rg,r:(Rg-l)/2,fill:"none",strokeWidth:l})})})});function Gwe(n){return Br("MuiIconButton",n)}const mq=br("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Xwe=n=>{const{classes:e,disabled:t,color:r,edge:i,size:a,loading:o}=n,s={root:["root",o&&"loading",t&&"disabled",r!=="default"&&`color${kn(r)}`,i&&`edge${kn(i)}`,`size${kn(a)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return zr(s,Gwe,e)},Kwe=hn(a9,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.loading&&e.loading,t.color!=="default"&&e[`color${kn(t.color)}`],t.edge&&e[`edge${kn(t.edge)}`],e[`size${kn(t.size)}`]]}})(Xi(({theme:n})=>({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:_u(n.palette.action.active,n.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Xi(({theme:n})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(n.palette).filter(Cp()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}})),...Object.entries(n.palette).filter(Cp()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":n.vars?`rgba(${(n.vars||n).palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:_u((n.vars||n).palette[e].main,n.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:n.typography.pxToRem(28)}}],[`&.${mq.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled},[`&.${mq.loading}`]:{color:"transparent"}}))),Ywe=hn("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(n,e)=>e.loadingIndicator})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(n.vars||n).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Qwe=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiIconButton"}),{edge:i=!1,children:a,className:o,color:s="default",disabled:u=!1,disableFocusRipple:l=!1,size:h="medium",id:c,loading:f=null,loadingIndicator:d,...p}=r,m=CR(c),g=d??Ie.jsx(s9,{"aria-labelledby":m,color:"inherit",size:16}),y={...r,edge:i,color:s,disabled:u,disableFocusRipple:l,loading:f,loadingIndicator:g,size:h},v=Xwe(y);return Ie.jsxs(Kwe,{id:f?m:c,className:Nn(v.root,o),centerRipple:!0,focusRipple:!l,disabled:u||f,ref:t,...p,ownerState:y,children:[typeof f=="boolean"&&Ie.jsx("span",{className:v.loadingWrapper,style:{display:"contents"},children:Ie.jsx(Ywe,{className:v.loadingIndicator,ownerState:y,children:f&&g})}),a]})});function Zwe(n){return Br("MuiTypography",n)}br("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Jwe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},exe=lwe(),txe=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:i,variant:a,classes:o}=n,s={root:["root",a,n.align!=="inherit"&&`align${kn(e)}`,t&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return zr(s,Zwe,o)},nxe=hn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${kn(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(Xi(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(Cp()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${kn(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),yq={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},t1=pe.forwardRef(function(e,t){const{color:r,...i}=Xr({props:e,name:"MuiTypography"}),a=!Jwe[r],o=exe({...i,...a&&{color:r}}),{align:s="inherit",className:u,component:l,gutterBottom:h=!1,noWrap:c=!1,paragraph:f=!1,variant:d="body1",variantMapping:p=yq,...m}=o,g={...o,align:s,color:r,className:u,component:l,gutterBottom:h,noWrap:c,paragraph:f,variant:d,variantMapping:p},y=l||(f?"p":p[d]||yq[d])||"span",v=txe(g);return Ie.jsx(nxe,{as:y,ref:t,className:Nn(v.root,u),...m,ownerState:g,style:{...s!=="inherit"&&{"--Typography-textAlign":s},...m.style}})});function rxe(n){return typeof n=="function"?n():n}const ixe=pe.forwardRef(function(e,t){const{children:r,container:i,disablePortal:a=!1}=e,[o,s]=pe.useState(null),u=Ho(pe.isValidElement(r)?sD(r):null,t);if(zm(()=>{a||s(rxe(i)||document.body)},[i,a]),zm(()=>{if(o&&!a)return g6(t,o),()=>{g6(t,null)}},[t,o,a]),a){if(pe.isValidElement(r)){const l={ref:u};return pe.cloneElement(r,l)}return r}return o&&Yee.createPortal(r,o)});function nk(n){return parseInt(n,10)||0}const axe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function sxe(n){for(const e in n)return!1;return!0}function vq(n){return sxe(n)||n.outerHeightStyle===0&&!n.overflowing}const oxe=pe.forwardRef(function(e,t){const{onChange:r,maxRows:i,minRows:a=1,style:o,value:s,...u}=e,{current:l}=pe.useRef(s!=null),h=pe.useRef(null),c=Ho(t,h),f=pe.useRef(null),d=pe.useRef(null),p=pe.useCallback(()=>{const b=h.current,w=d.current;if(!b||!w)return;const S=Sp(b).getComputedStyle(b);if(S.width==="0px")return{outerHeightStyle:0,overflowing:!1};w.style.width=S.width,w.value=b.value||e.placeholder||"x",w.value.slice(-1)===`
`&&(w.value+=" ");const E=S.boxSizing,A=nk(S.paddingBottom)+nk(S.paddingTop),k=nk(S.borderBottomWidth)+nk(S.borderTopWidth),T=w.scrollHeight;w.value="x";const O=w.scrollHeight;let F=T;a&&(F=Math.max(Number(a)*O,F)),i&&(F=Math.min(Number(i)*O,F)),F=Math.max(F,O);const I=F+(E==="border-box"?A+k:0),R=Math.abs(F-T)<=1;return{outerHeightStyle:I,overflowing:R}},[i,a,e.placeholder]),m=W0(()=>{const b=h.current,w=p();if(!b||!w||vq(w))return!1;const x=w.outerHeightStyle;return f.current!=null&&f.current!==x}),g=pe.useCallback(()=>{const b=h.current,w=p();if(!b||!w||vq(w))return;const x=w.outerHeightStyle;f.current!==x&&(f.current=x,b.style.height=`${x}px`),b.style.overflow=w.overflowing?"hidden":""},[p]),y=pe.useRef(-1);zm(()=>{const b=Iee(g),w=h==null?void 0:h.current;if(!w)return;const x=Sp(w);x.addEventListener("resize",b);let S;return typeof ResizeObserver<"u"&&(S=new ResizeObserver(()=>{m()&&(S.unobserve(w),cancelAnimationFrame(y.current),g(),y.current=requestAnimationFrame(()=>{S.observe(w)}))}),S.observe(w)),()=>{b.clear(),cancelAnimationFrame(y.current),x.removeEventListener("resize",b),S&&S.disconnect()}},[p,g,m]),zm(()=>{g()});const v=b=>{l||g(),r&&r(b)};return Ie.jsxs(pe.Fragment,{children:[Ie.jsx("textarea",{value:s,onChange:v,ref:c,rows:a,style:o,...u}),Ie.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:d,tabIndex:-1,style:{...axe.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function C6(n){return typeof n=="string"}function hx({props:n,states:e,muiFormControl:t}){return e.reduce((r,i)=>(r[i]=n[i],t&&typeof n[i]>"u"&&(r[i]=t[i]),r),{})}const o9=pe.createContext(void 0);function fx(){return pe.useContext(o9)}function bq(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function DN(n,e=!1){return n&&(bq(n.value)&&n.value!==""||e&&bq(n.defaultValue)&&n.defaultValue!=="")}function uxe(n){return n.startAdornment}function lxe(n){return Br("MuiInputBase",n)}const jw=br("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var wq;const DR=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${kn(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},AR=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},cxe=n=>{const{classes:e,color:t,disabled:r,error:i,endAdornment:a,focused:o,formControl:s,fullWidth:u,hiddenLabel:l,multiline:h,readOnly:c,size:f,startAdornment:d,type:p}=n,m={root:["root",`color${kn(t)}`,r&&"disabled",i&&"error",u&&"fullWidth",o&&"focused",s&&"formControl",f&&f!=="medium"&&`size${kn(f)}`,h&&"multiline",d&&"adornedStart",a&&"adornedEnd",l&&"hiddenLabel",c&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",h&&"inputMultiline",f==="small"&&"inputSizeSmall",l&&"inputHiddenLabel",d&&"inputAdornedStart",a&&"inputAdornedEnd",c&&"readOnly"]};return zr(m,lxe,e)},kR=hn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:DR})(Xi(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${jw.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),NR=hn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:AR})(Xi(({theme:n})=>{const e=n.palette.mode==="light",t={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},r={opacity:"0 !important"},i=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${jw.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${jw.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:a})=>!a.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:a})=>a.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),xq=uwe({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),u9=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:a,autoFocus:o,className:s,color:u,components:l={},componentsProps:h={},defaultValue:c,disabled:f,disableInjectingGlobalStyles:d,endAdornment:p,error:m,fullWidth:g=!1,id:y,inputComponent:v="input",inputProps:b={},inputRef:w,margin:x,maxRows:S,minRows:E,multiline:A=!1,name:k,onBlur:T,onChange:O,onClick:F,onFocus:I,onKeyDown:R,onKeyUp:U,placeholder:B,readOnly:W,renderSuffix:Y,rows:z,size:j,slotProps:M={},slots:q={},startAdornment:H,type:K="text",value:Z,...J}=r,X=b.value!=null?b.value:Z,{current:ae}=pe.useRef(X!=null),ie=pe.useRef(),ce=pe.useCallback(Le=>{},[]),ge=Ho(ie,w,b.ref,ce),[Ce,Ee]=pe.useState(!1),G=fx(),de=hx({props:r,muiFormControl:G,states:["color","disabled","error","hiddenLabel","size","required","filled"]});de.focused=G?G.focused:Ce,pe.useEffect(()=>{!G&&f&&Ce&&(Ee(!1),T&&T())},[G,f,Ce,T]);const ye=G&&G.onFilled,le=G&&G.onEmpty,ne=pe.useCallback(Le=>{DN(Le)?ye&&ye():le&&le()},[ye,le]);zm(()=>{ae&&ne({value:X})},[X,ne,ae]);const fe=Le=>{I&&I(Le),b.onFocus&&b.onFocus(Le),G&&G.onFocus?G.onFocus(Le):Ee(!0)},Ne=Le=>{T&&T(Le),b.onBlur&&b.onBlur(Le),G&&G.onBlur?G.onBlur(Le):Ee(!1)},Ae=(Le,...tt)=>{if(!ae){const ft=Le.target||ie.current;if(ft==null)throw new Error(_p(1));ne({value:ft.value})}b.onChange&&b.onChange(Le,...tt),O&&O(Le,...tt)};pe.useEffect(()=>{ne(ie.current)},[]);const ue=Le=>{ie.current&&Le.currentTarget===Le.target&&ie.current.focus(),F&&F(Le)};let me=v,Se=b;A&&me==="input"&&(z?Se={type:void 0,minRows:z,maxRows:z,...Se}:Se={type:void 0,maxRows:S,minRows:E,...Se},me=oxe);const Re=Le=>{ne(Le.animationName==="mui-auto-fill-cancel"?ie.current:{value:"x"})};pe.useEffect(()=>{G&&G.setAdornedStart(!!H)},[G,H]);const je={...r,color:de.color||"primary",disabled:de.disabled,endAdornment:p,error:de.error,focused:de.focused,formControl:G,fullWidth:g,hiddenLabel:de.hiddenLabel,multiline:A,size:de.size,startAdornment:H,type:K},rt=cxe(je),at=q.root||l.Root||kR,yt=M.root||h.root||{},pt=q.input||l.Input||NR;return Se={...Se,...M.input??h.input},Ie.jsxs(pe.Fragment,{children:[!d&&typeof xq=="function"&&(wq||(wq=Ie.jsx(xq,{}))),Ie.jsxs(at,{...yt,ref:t,onClick:ue,...J,...!C6(at)&&{ownerState:{...je,...yt.ownerState}},className:Nn(rt.root,yt.className,s,W&&"MuiInputBase-readOnly"),children:[H,Ie.jsx(o9.Provider,{value:null,children:Ie.jsx(pt,{"aria-invalid":de.error,"aria-describedby":i,autoComplete:a,autoFocus:o,defaultValue:c,disabled:de.disabled,id:y,onAnimationStart:Re,name:k,placeholder:B,readOnly:W,required:de.required,rows:z,value:X,onKeyDown:R,onKeyUp:U,type:K,...Se,...!C6(pt)&&{as:me,ownerState:{...je,...Se.ownerState}},ref:ge,className:Nn(rt.input,Se.className,W&&"MuiInputBase-readOnly"),onBlur:Ne,onChange:Ae,onFocus:fe})}),p,Y?Y({...de,startAdornment:H}):null]})]})});function hxe(n){return Br("MuiInput",n)}const A_={...jw,...br("MuiInput",["root","underline","input"])};function fxe(n){return Br("MuiOutlinedInput",n)}const Zh={...jw,...br("MuiOutlinedInput",["root","notchedOutline","input"])};function dxe(n){return Br("MuiFilledInput",n)}const Jy={...jw,...br("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},pxe=TR(Ie.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),gxe={entering:{opacity:1},entered:{opacity:1}},mxe=pe.forwardRef(function(e,t){const r=oD(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:s,easing:u,in:l,onEnter:h,onEntered:c,onEntering:f,onExit:d,onExited:p,onExiting:m,style:g,timeout:y=i,TransitionComponent:v=jf,...b}=e,w=pe.useRef(null),x=Ho(w,sD(s),t),S=R=>U=>{if(R){const B=w.current;U===void 0?R(B):R(B,U)}},E=S(f),A=S((R,U)=>{Qee(R);const B=EN({style:g,timeout:y,easing:u},{mode:"enter"});R.style.webkitTransition=r.transitions.create("opacity",B),R.style.transition=r.transitions.create("opacity",B),h&&h(R,U)}),k=S(c),T=S(m),O=S(R=>{const U=EN({style:g,timeout:y,easing:u},{mode:"exit"});R.style.webkitTransition=r.transitions.create("opacity",U),R.style.transition=r.transitions.create("opacity",U),d&&d(R)}),F=S(p),I=R=>{a&&a(w.current,R)};return Ie.jsx(v,{appear:o,in:l,nodeRef:w,onEnter:A,onEntered:k,onEntering:E,onExit:O,onExited:F,onExiting:T,addEndListener:I,timeout:y,...b,children:(R,{ownerState:U,...B})=>pe.cloneElement(s,{style:{opacity:0,visibility:R==="exited"&&!l?"hidden":void 0,...gxe[R],...g,...s.props.style},ref:x,...B})})});function yxe(n){return Br("MuiBackdrop",n)}br("MuiBackdrop",["root","invisible"]);const vxe=n=>{const{classes:e,invisible:t}=n;return zr({root:["root",t&&"invisible"]},yxe,e)},bxe=hn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),wxe=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiBackdrop"}),{children:i,className:a,component:o="div",invisible:s=!1,open:u,components:l={},componentsProps:h={},slotProps:c={},slots:f={},TransitionComponent:d,transitionDuration:p,...m}=r,g={...r,component:o,invisible:s},y=vxe(g),v={transition:d,root:l.Root,...f},b={...h,...c},w={slots:v,slotProps:b},[x,S]=Su("root",{elementType:bxe,externalForwardedProps:w,className:Nn(y.root,a),ownerState:g}),[E,A]=Su("transition",{elementType:mxe,externalForwardedProps:w,ownerState:g});return Ie.jsx(E,{in:u,timeout:p,...m,...A,children:Ie.jsx(x,{"aria-hidden":!0,...S,classes:y,ref:t,children:i})})}),xxe=br("MuiBox",["root"]),_xe=Hee(),xl=Pbe({themeId:uR,defaultTheme:_xe,defaultClassName:xxe.root,generateClassName:Dee.generate});function Sxe(n){return Br("MuiButton",n)}const ev=br("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Cxe=pe.createContext({}),Exe=pe.createContext(void 0),Txe=n=>{const{color:e,disableElevation:t,fullWidth:r,size:i,variant:a,loading:o,loadingPosition:s,classes:u}=n,l={root:["root",o&&"loading",a,`${a}${kn(e)}`,`size${kn(i)}`,`${a}Size${kn(i)}`,`color${kn(e)}`,t&&"disableElevation",r&&"fullWidth",o&&`loadingPosition${kn(s)}`],startIcon:["icon","startIcon",`iconSize${kn(i)}`],endIcon:["icon","endIcon",`iconSize${kn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},h=zr(l,Sxe,u);return{...u,...h}},Jee=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Dxe=hn(a9,{shouldForwardProp:n=>vc(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${kn(t.color)}`],e[`size${kn(t.size)}`],e[`${t.variant}Size${kn(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth,t.loading&&e.loading]}})(Xi(({theme:n})=>{const e=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],t=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return{...n.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${ev.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(n.vars||n).shadows[2],"&:hover":{boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2]}},"&:active":{boxShadow:(n.vars||n).shadows[8]},[`&.${ev.focusVisible}`]:{boxShadow:(n.vars||n).shadows[6]},[`&.${ev.disabled}`]:{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${ev.disabled}`]:{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(n.palette).filter(Cp()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(n.vars||n).palette[r].main,"--variant-outlinedColor":(n.vars||n).palette[r].main,"--variant-outlinedBorder":n.vars?`rgba(${n.vars.palette[r].mainChannel} / 0.5)`:_u(n.palette[r].main,.5),"--variant-containedColor":(n.vars||n).palette[r].contrastText,"--variant-containedBg":(n.vars||n).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(n.vars||n).palette[r].dark,"--variant-textBg":n.vars?`rgba(${n.vars.palette[r].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:_u(n.palette[r].main,n.palette.action.hoverOpacity),"--variant-outlinedBorder":(n.vars||n).palette[r].main,"--variant-outlinedBg":n.vars?`rgba(${n.vars.palette[r].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:_u(n.palette[r].main,n.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":n.vars?n.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":n.vars?n.vars.palette.Button.inheritContainedHoverBg:t,"--variant-textBg":n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:_u(n.palette.text.primary,n.palette.action.hoverOpacity),"--variant-outlinedBg":n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:_u(n.palette.text.primary,n.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:n.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:n.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:n.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${ev.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${ev.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:n.transitions.create(["background-color","box-shadow","border-color"],{duration:n.transitions.duration.short}),[`&.${ev.loading}`]:{color:"transparent"}}}]}})),Axe=hn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.startIcon,t.loading&&e.startIconLoadingStart,e[`iconSize${kn(t.size)}`]]}})(({theme:n})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Jee]})),kxe=hn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.endIcon,t.loading&&e.endIconLoadingEnd,e[`iconSize${kn(t.size)}`]]}})(({theme:n})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Jee]})),Nxe=hn("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(n,e)=>e.loadingIndicator})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(n.vars||n).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),_q=hn("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(n,e)=>e.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),Go=pe.forwardRef(function(e,t){const r=pe.useContext(Cxe),i=pe.useContext(Exe),a=$C(r,e),o=Xr({props:a,name:"MuiButton"}),{children:s,color:u="primary",component:l="button",className:h,disabled:c=!1,disableElevation:f=!1,disableFocusRipple:d=!1,endIcon:p,focusVisibleClassName:m,fullWidth:g=!1,id:y,loading:v=null,loadingIndicator:b,loadingPosition:w="center",size:x="medium",startIcon:S,type:E,variant:A="text",...k}=o,T=CR(y),O=b??Ie.jsx(s9,{"aria-labelledby":T,color:"inherit",size:16}),F={...o,color:u,component:l,disabled:c,disableElevation:f,disableFocusRipple:d,fullWidth:g,loading:v,loadingIndicator:O,loadingPosition:w,size:x,type:E,variant:A},I=Txe(F),R=(S||v&&w==="start")&&Ie.jsx(Axe,{className:I.startIcon,ownerState:F,children:S||Ie.jsx(_q,{className:I.loadingIconPlaceholder,ownerState:F})}),U=(p||v&&w==="end")&&Ie.jsx(kxe,{className:I.endIcon,ownerState:F,children:p||Ie.jsx(_q,{className:I.loadingIconPlaceholder,ownerState:F})}),B=i||"",W=typeof v=="boolean"?Ie.jsx("span",{className:I.loadingWrapper,style:{display:"contents"},children:v&&Ie.jsx(Nxe,{className:I.loadingIndicator,ownerState:F,children:O})}):null;return Ie.jsxs(Dxe,{ownerState:F,className:Nn(r.className,I.root,h,B),component:l,disabled:c||v,focusRipple:!d,focusVisibleClassName:Nn(I.focusVisible,m),ref:t,type:E,id:v?T:y,...k,classes:I,children:[R,w!=="end"&&W,s,w==="end"&&W,U]})});function Oxe(n){return Br("MuiCard",n)}br("MuiCard",["root"]);const Rxe=n=>{const{classes:e}=n;return zr({root:["root"]},Oxe,e)},Ixe=hn(Zee,{name:"MuiCard",slot:"Root",overridesResolver:(n,e)=>e.root})({overflow:"hidden"}),ete=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiCard"}),{className:i,raised:a=!1,...o}=r,s={...r,raised:a},u=Rxe(s);return Ie.jsx(Ixe,{className:Nn(u.root,i),elevation:a?8:void 0,ref:t,ownerState:s,...o})});function Fxe(n){return Br("MuiCardActions",n)}br("MuiCardActions",["root","spacing"]);const Pxe=n=>{const{classes:e,disableSpacing:t}=n;return zr({root:["root",!t&&"spacing"]},Fxe,e)},Lxe=hn("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Mxe=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:a,...o}=r,s={...r,disableSpacing:i},u=Pxe(s);return Ie.jsx(Lxe,{className:Nn(u.root,a),ownerState:s,ref:t,...o})});function Uxe(n){return Br("MuiCardMedia",n)}br("MuiCardMedia",["root","media","img"]);const Bxe=n=>{const{classes:e,isMediaComponent:t,isImageComponent:r}=n;return zr({root:["root",t&&"media",r&&"img"]},Uxe,e)},zxe=hn("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{isMediaComponent:r,isImageComponent:i}=t;return[e.root,r&&e.media,i&&e.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),Wxe=["video","audio","picture","iframe","img"],jxe=["picture","img"],tte=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiCardMedia"}),{children:i,className:a,component:o="div",image:s,src:u,style:l,...h}=r,c=Wxe.includes(o),f=!c&&s?{backgroundImage:`url("${s}")`,...l}:l,d={...r,component:o,isMediaComponent:c,isImageComponent:jxe.includes(o)},p=Bxe(d);return Ie.jsx(zxe,{className:Nn(p.root,a),as:o,role:!c&&s?"img":void 0,ref:t,style:f,ownerState:d,src:c?s||u:void 0,...h,children:i})});function $xe(n){const e=fh(n);return e.body===n?Sp(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function EC(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function Sq(n){return parseInt(Sp(n).getComputedStyle(n).paddingRight,10)||0}function qxe(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function Cq(n,e,t,r,i){const a=[e,t,...r];[].forEach.call(n.children,o=>{const s=!a.includes(o),u=!qxe(o);s&&u&&EC(o,i)})}function E5(n,e){let t=-1;return n.some((r,i)=>e(r)?(t=i,!0):!1),t}function Vxe(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if($xe(r)){const o=Lee(Sp(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${Sq(r)+o}px`;const s=fh(r).querySelectorAll(".mui-fixed");[].forEach.call(s,u=>{t.push({value:u.style.paddingRight,property:"padding-right",el:u}),u.style.paddingRight=`${Sq(u)+o}px`})}let a;if(r.parentNode instanceof DocumentFragment)a=fh(r).body;else{const o=r.parentElement,s=Sp(r);a=(o==null?void 0:o.nodeName)==="HTML"&&s.getComputedStyle(o).overflowY==="scroll"?o:r}t.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return()=>{t.forEach(({value:a,el:o,property:s})=>{a?o.style.setProperty(s,a):o.style.removeProperty(s)})}}function Hxe(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class Gxe{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&EC(e.modalRef,!1);const i=Hxe(t);Cq(t,e.mount,e.modalRef,i,!0);const a=E5(this.containers,o=>o.container===t);return a!==-1?(this.containers[a].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),r)}mount(e,t){const r=E5(this.containers,a=>a.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=Vxe(i,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=E5(this.containers,o=>o.modals.includes(e)),a=this.containers[i];if(a.modals.splice(a.modals.indexOf(e),1),this.modals.splice(r,1),a.modals.length===0)a.restore&&a.restore(),e.modalRef&&EC(e.modalRef,t),Cq(a.container,e.mount,e.modalRef,a.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=a.modals[a.modals.length-1];o.modalRef&&EC(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const Xxe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Kxe(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function Yxe(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function Qxe(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||Yxe(n))}function Zxe(n){const e=[],t=[];return Array.from(n.querySelectorAll(Xxe)).forEach((r,i)=>{const a=Kxe(r);a===-1||!Qxe(r)||(a===0?e.push(r):t.push({documentOrder:i,tabIndex:a,node:r}))}),t.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function Jxe(){return!0}function e_e(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:a=Zxe,isEnabled:o=Jxe,open:s}=n,u=pe.useRef(!1),l=pe.useRef(null),h=pe.useRef(null),c=pe.useRef(null),f=pe.useRef(null),d=pe.useRef(!1),p=pe.useRef(null),m=Ho(sD(e),p),g=pe.useRef(null);pe.useEffect(()=>{!s||!p.current||(d.current=!t)},[t,s]),pe.useEffect(()=>{if(!s||!p.current)return;const b=fh(p.current);return p.current.contains(b.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),d.current&&p.current.focus()),()=>{i||(c.current&&c.current.focus&&(u.current=!0,c.current.focus()),c.current=null)}},[s]),pe.useEffect(()=>{if(!s||!p.current)return;const b=fh(p.current),w=E=>{g.current=E,!(r||!o()||E.key!=="Tab")&&b.activeElement===p.current&&E.shiftKey&&(u.current=!0,h.current&&h.current.focus())},x=()=>{var k,T;const E=p.current;if(E===null)return;if(!b.hasFocus()||!o()||u.current){u.current=!1;return}if(E.contains(b.activeElement)||r&&b.activeElement!==l.current&&b.activeElement!==h.current)return;if(b.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!d.current)return;let A=[];if((b.activeElement===l.current||b.activeElement===h.current)&&(A=a(p.current)),A.length>0){const O=!!((k=g.current)!=null&&k.shiftKey&&((T=g.current)==null?void 0:T.key)==="Tab"),F=A[0],I=A[A.length-1];typeof F!="string"&&typeof I!="string"&&(O?I.focus():F.focus())}else E.focus()};b.addEventListener("focusin",x),b.addEventListener("keydown",w,!0);const S=setInterval(()=>{b.activeElement&&b.activeElement.tagName==="BODY"&&x()},50);return()=>{clearInterval(S),b.removeEventListener("focusin",x),b.removeEventListener("keydown",w,!0)}},[t,r,i,o,s,a]);const y=b=>{c.current===null&&(c.current=b.relatedTarget),d.current=!0,f.current=b.target;const w=e.props.onFocus;w&&w(b)},v=b=>{c.current===null&&(c.current=b.relatedTarget),d.current=!0};return Ie.jsxs(pe.Fragment,{children:[Ie.jsx("div",{tabIndex:s?0:-1,onFocus:v,ref:l,"data-testid":"sentinelStart"}),pe.cloneElement(e,{ref:m,onFocus:y}),Ie.jsx("div",{tabIndex:s?0:-1,onFocus:v,ref:h,"data-testid":"sentinelEnd"})]})}function t_e(n){return typeof n=="function"?n():n}function n_e(n){return n?n.props.hasOwnProperty("in"):!1}const Eq=()=>{},rk=new Gxe;function r_e(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:a,onTransitionExited:o,children:s,onClose:u,open:l,rootRef:h}=n,c=pe.useRef({}),f=pe.useRef(null),d=pe.useRef(null),p=Ho(d,h),[m,g]=pe.useState(!l),y=n_e(s);let v=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(v=!1);const b=()=>fh(f.current),w=()=>(c.current.modalRef=d.current,c.current.mount=f.current,c.current),x=()=>{rk.mount(w(),{disableScrollLock:r}),d.current&&(d.current.scrollTop=0)},S=W0(()=>{const U=t_e(e)||b().body;rk.add(w(),U),d.current&&x()}),E=()=>rk.isTopModal(w()),A=W0(U=>{f.current=U,U&&(l&&E()?x():d.current&&EC(d.current,v))}),k=pe.useCallback(()=>{rk.remove(w(),v)},[v]);pe.useEffect(()=>()=>{k()},[k]),pe.useEffect(()=>{l?S():(!y||!i)&&k()},[l,k,y,i,S]);const T=U=>B=>{var W;(W=U.onKeyDown)==null||W.call(U,B),!(B.key!=="Escape"||B.which===229||!E())&&(t||(B.stopPropagation(),u&&u(B,"escapeKeyDown")))},O=U=>B=>{var W;(W=U.onClick)==null||W.call(U,B),B.target===B.currentTarget&&u&&u(B,"backdropClick")};return{getRootProps:(U={})=>{const B=Uee(n);delete B.onTransitionEnter,delete B.onTransitionExited;const W={...B,...U};return{role:"presentation",...W,onKeyDown:T(W),ref:p}},getBackdropProps:(U={})=>{const B=U;return{"aria-hidden":!0,...B,onClick:O(B),open:l}},getTransitionProps:()=>{const U=()=>{g(!1),a&&a()},B=()=>{g(!0),o&&o(),i&&k()};return{onEnter:J$(U,(s==null?void 0:s.props.onEnter)??Eq),onExited:J$(B,(s==null?void 0:s.props.onExited)??Eq)}},rootRef:p,portalRef:A,isTopModal:E,exited:m,hasTransition:y}}function i_e(n){return Br("MuiModal",n)}br("MuiModal",["root","hidden","backdrop"]);const a_e=n=>{const{open:e,exited:t,classes:r}=n;return zr({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},i_e,r)},s_e=hn("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(Xi(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),o_e=hn(wxe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),uD=pe.forwardRef(function(e,t){const r=Xr({name:"MuiModal",props:e}),{BackdropComponent:i=o_e,BackdropProps:a,classes:o,className:s,closeAfterTransition:u=!1,children:l,container:h,component:c,components:f={},componentsProps:d={},disableAutoFocus:p=!1,disableEnforceFocus:m=!1,disableEscapeKeyDown:g=!1,disablePortal:y=!1,disableRestoreFocus:v=!1,disableScrollLock:b=!1,hideBackdrop:w=!1,keepMounted:x=!1,onBackdropClick:S,onClose:E,onTransitionEnter:A,onTransitionExited:k,open:T,slotProps:O={},slots:F={},theme:I,...R}=r,U={...r,closeAfterTransition:u,disableAutoFocus:p,disableEnforceFocus:m,disableEscapeKeyDown:g,disablePortal:y,disableRestoreFocus:v,disableScrollLock:b,hideBackdrop:w,keepMounted:x},{getRootProps:B,getBackdropProps:W,getTransitionProps:Y,portalRef:z,isTopModal:j,exited:M,hasTransition:q}=r_e({...U,rootRef:t}),H={...U,exited:M},K=a_e(H),Z={};if(l.props.tabIndex===void 0&&(Z.tabIndex="-1"),q){const{onEnter:ge,onExited:Ce}=Y();Z.onEnter=ge,Z.onExited=Ce}const J={slots:{root:f.Root,backdrop:f.Backdrop,...F},slotProps:{...d,...O}},[X,ae]=Su("root",{ref:t,elementType:s_e,externalForwardedProps:{...J,...R,component:c},getSlotProps:B,ownerState:H,className:Nn(s,K==null?void 0:K.root,!H.open&&H.exited&&(K==null?void 0:K.hidden))}),[ie,ce]=Su("backdrop",{ref:a==null?void 0:a.ref,elementType:i,externalForwardedProps:J,shouldForwardComponentProp:!0,additionalProps:a,getSlotProps:ge=>W({...ge,onClick:Ce=>{S&&S(Ce),ge!=null&&ge.onClick&&ge.onClick(Ce)}}),className:Nn(a==null?void 0:a.className,K==null?void 0:K.backdrop),ownerState:H});return!x&&!T&&(!q||M)?null:Ie.jsx(ixe,{ref:z,container:h,disablePortal:y,children:Ie.jsxs(X,{...ae,children:[!w&&i?Ie.jsx(ie,{...ce}):null,Ie.jsx(e_e,{disableEnforceFocus:m,disableAutoFocus:p,disableRestoreFocus:v,isEnabled:j,open:T,children:pe.cloneElement(l,Z)})]})})}),Tq=br("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),u_e=n=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:i,size:a,hiddenLabel:o,multiline:s}=n,u={root:["root",!t&&"underline",r&&"adornedStart",i&&"adornedEnd",a==="small"&&`size${kn(a)}`,o&&"hiddenLabel",s&&"multiline"],input:["input"]},l=zr(u,dxe,e);return{...e,...l}},l_e=hn(kR,{shouldForwardProp:n=>vc(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...DR(n,e),!t.disableUnderline&&e.underline]}})(Xi(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${Jy.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${Jy.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:a},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Jy.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Jy.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Jy.disabled}, .${Jy.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Jy.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Cp()).map(([o])=>{var s;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(s=(n.vars||n).palette[o])==null?void 0:s.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:s})=>o.multiline&&s==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),c_e=hn(NR,{name:"MuiFilledInput",slot:"Input",overridesResolver:AR})(Xi(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),l9=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:a={},componentsProps:o,fullWidth:s=!1,hiddenLabel:u,inputComponent:l="input",multiline:h=!1,slotProps:c,slots:f={},type:d="text",...p}=r,m={...r,disableUnderline:i,fullWidth:s,inputComponent:l,multiline:h,type:d},g=u_e(r),y={root:{ownerState:m},input:{ownerState:m}},v=c??o?vo(y,c??o):y,b=f.root??a.Root??l_e,w=f.input??a.Input??c_e;return Ie.jsx(u9,{slots:{root:b,input:w},slotProps:v,fullWidth:s,inputComponent:l,multiline:h,ref:t,type:d,...p,classes:g})});l9.muiName="Input";function h_e(n){return Br("MuiFormControl",n)}br("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const f_e=n=>{const{classes:e,margin:t,fullWidth:r}=n,i={root:["root",t!=="none"&&`margin${kn(t)}`,r&&"fullWidth"]};return zr(i,h_e,e)},d_e=hn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`margin${kn(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),c9=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiFormControl"}),{children:i,className:a,color:o="primary",component:s="div",disabled:u=!1,error:l=!1,focused:h,fullWidth:c=!1,hiddenLabel:f=!1,margin:d="none",required:p=!1,size:m="medium",variant:g="outlined",...y}=r,v={...r,color:o,component:s,disabled:u,error:l,fullWidth:c,hiddenLabel:f,margin:d,required:p,size:m,variant:g},b=f_e(v),[w,x]=pe.useState(()=>{let U=!1;return i&&pe.Children.forEach(i,B=>{if(!Zk(B,["Input","Select"]))return;const W=Zk(B,["Select"])?B.props.input:B;W&&uxe(W.props)&&(U=!0)}),U}),[S,E]=pe.useState(()=>{let U=!1;return i&&pe.Children.forEach(i,B=>{Zk(B,["Input","Select"])&&(DN(B.props,!0)||DN(B.props.inputProps,!0))&&(U=!0)}),U}),[A,k]=pe.useState(!1);u&&A&&k(!1);const T=h!==void 0&&!u?h:A;let O;pe.useRef(!1);const F=pe.useCallback(()=>{E(!0)},[]),I=pe.useCallback(()=>{E(!1)},[]),R=pe.useMemo(()=>({adornedStart:w,setAdornedStart:x,color:o,disabled:u,error:l,filled:S,focused:T,fullWidth:c,hiddenLabel:f,size:m,onBlur:()=>{k(!1)},onFocus:()=>{k(!0)},onEmpty:I,onFilled:F,registerEffect:O,required:p,variant:g}),[w,o,u,l,S,T,c,f,O,I,F,p,m,g]);return Ie.jsx(o9.Provider,{value:R,children:Ie.jsx(d_e,{as:s,ownerState:v,className:Nn(b.root,a),ref:t,...y,children:i})})});function p_e(n){return Br("MuiFormHelperText",n)}const Dq=br("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Aq;const g_e=n=>{const{classes:e,contained:t,size:r,disabled:i,error:a,filled:o,focused:s,required:u}=n,l={root:["root",i&&"disabled",a&&"error",r&&`size${kn(r)}`,t&&"contained",s&&"focused",o&&"filled",u&&"required"]};return zr(l,p_e,e)},m_e=hn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${kn(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(Xi(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Dq.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${Dq.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),y_e=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiFormHelperText"}),{children:i,className:a,component:o="p",disabled:s,error:u,filled:l,focused:h,margin:c,required:f,variant:d,...p}=r,m=fx(),g=hx({props:r,muiFormControl:m,states:["variant","size","disabled","error","filled","focused","required"]}),y={...r,component:o,contained:g.variant==="filled"||g.variant==="outlined",variant:g.variant,size:g.size,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required};delete y.ownerState;const v=g_e(y);return Ie.jsx(m_e,{as:o,className:Nn(v.root,a),ref:t,...p,ownerState:y,children:i===" "?Aq||(Aq=Ie.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function v_e(n){return Br("MuiFormLabel",n)}const TC=br("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),b_e=n=>{const{classes:e,color:t,focused:r,disabled:i,error:a,filled:o,required:s}=n,u={root:["root",`color${kn(t)}`,i&&"disabled",a&&"error",o&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",a&&"error"]};return zr(u,v_e,e)},w_e=hn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(Xi(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(Cp()).map(([e])=>({props:{color:e},style:{[`&.${TC.focused}`]:{color:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${TC.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${TC.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),x_e=hn("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(Xi(({theme:n})=>({[`&.${TC.error}`]:{color:(n.vars||n).palette.error.main}}))),__e=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiFormLabel"}),{children:i,className:a,color:o,component:s="label",disabled:u,error:l,filled:h,focused:c,required:f,...d}=r,p=fx(),m=hx({props:r,muiFormControl:p,states:["color","required","focused","disabled","error","filled"]}),g={...r,color:m.color||"primary",component:s,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required},y=b_e(g);return Ie.jsxs(w_e,{as:s,ownerState:g,className:Nn(y.root,a),ref:t,...d,children:[i,m.required&&Ie.jsxs(x_e,{ownerState:g,"aria-hidden":!0,className:y.asterisk,children:["","*"]})]})}),kq=pe.createContext();function S_e(n){return Br("MuiGrid",n)}const C_e=[0,1,2,3,4,5,6,7,8,9,10],E_e=["column-reverse","column","row-reverse","row"],T_e=["nowrap","wrap-reverse","wrap"],k_=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],qC=br("MuiGrid",["root","container","item","zeroMinWidth",...C_e.map(n=>`spacing-xs-${n}`),...E_e.map(n=>`direction-xs-${n}`),...T_e.map(n=>`wrap-xs-${n}`),...k_.map(n=>`grid-xs-${n}`),...k_.map(n=>`grid-sm-${n}`),...k_.map(n=>`grid-md-${n}`),...k_.map(n=>`grid-lg-${n}`),...k_.map(n=>`grid-xl-${n}`)]);function D_e({theme:n,ownerState:e}){let t;return n.breakpoints.keys.reduce((r,i)=>{let a={};if(e[i]&&(t=e[i]),!t)return r;if(t===!0)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=pR({values:e.columns,breakpoints:n.breakpoints.values}),s=typeof o=="object"?o[i]:o;if(s==null)return r;const u=`${Math.round(t/s*1e8)/1e6}%`;let l={};if(e.container&&e.item&&e.columnSpacing!==0){const h=n.spacing(e.columnSpacing);if(h!=="0px"){const c=`calc(${u} + ${h})`;l={flexBasis:c,maxWidth:c}}}a={flexBasis:u,flexGrow:0,maxWidth:u,...l}}return n.breakpoints.values[i]===0?Object.assign(r,a):r[n.breakpoints.up(i)]=a,r},{})}function A_e({theme:n,ownerState:e}){const t=pR({values:e.direction,breakpoints:n.breakpoints.values});return pc({theme:n},t,r=>{const i={flexDirection:r};return r.startsWith("column")&&(i[`& > .${qC.item}`]={maxWidth:"none"}),i})}function nte({breakpoints:n,values:e}){let t="";Object.keys(e).forEach(i=>{t===""&&e[i]!==0&&(t=i)});const r=Object.keys(n).sort((i,a)=>n[i]-n[a]);return r.slice(0,r.indexOf(t))}function k_e({theme:n,ownerState:e}){const{container:t,rowSpacing:r}=e;let i={};if(t&&r!==0){const a=pR({values:r,breakpoints:n.breakpoints.values});let o;typeof a=="object"&&(o=nte({breakpoints:n.breakpoints.values,values:a})),i=pc({theme:n},a,(s,u)=>{const l=n.spacing(s);return l!=="0px"?{marginTop:`calc(-1 * ${l})`,[`& > .${qC.item}`]:{paddingTop:l}}:o!=null&&o.includes(u)?{}:{marginTop:0,[`& > .${qC.item}`]:{paddingTop:0}}})}return i}function N_e({theme:n,ownerState:e}){const{container:t,columnSpacing:r}=e;let i={};if(t&&r!==0){const a=pR({values:r,breakpoints:n.breakpoints.values});let o;typeof a=="object"&&(o=nte({breakpoints:n.breakpoints.values,values:a})),i=pc({theme:n},a,(s,u)=>{const l=n.spacing(s);if(l!=="0px"){const h=`calc(-1 * ${l})`;return{width:`calc(100% + ${l})`,marginLeft:h,[`& > .${qC.item}`]:{paddingLeft:l}}}return o!=null&&o.includes(u)?{}:{width:"100%",marginLeft:0,[`& > .${qC.item}`]:{paddingLeft:0}}})}return i}function O_e(n,e,t={}){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[t[`spacing-xs-${String(n)}`]];const r=[];return e.forEach(i=>{const a=n[i];Number(a)>0&&r.push(t[`spacing-${i}-${String(a)}`])}),r}const R_e=hn("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{container:r,direction:i,item:a,spacing:o,wrap:s,zeroMinWidth:u,breakpoints:l}=t;let h=[];r&&(h=O_e(o,l,e));const c=[];return l.forEach(f=>{const d=t[f];d&&c.push(e[`grid-${f}-${String(d)}`])}),[e.root,r&&e.container,a&&e.item,u&&e.zeroMinWidth,...h,i!=="row"&&e[`direction-xs-${String(i)}`],s!=="wrap"&&e[`wrap-xs-${String(s)}`],...c]}})(({ownerState:n})=>({boxSizing:"border-box",...n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...n.item&&{margin:0},...n.zeroMinWidth&&{minWidth:0},...n.wrap!=="wrap"&&{flexWrap:n.wrap}}),A_e,k_e,N_e,D_e);function I_e(n,e){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[`spacing-xs-${String(n)}`];const t=[];return e.forEach(r=>{const i=n[r];if(Number(i)>0){const a=`spacing-${r}-${String(i)}`;t.push(a)}}),t}const F_e=n=>{const{classes:e,container:t,direction:r,item:i,spacing:a,wrap:o,zeroMinWidth:s,breakpoints:u}=n;let l=[];t&&(l=I_e(a,u));const h=[];u.forEach(f=>{const d=n[f];d&&h.push(`grid-${f}-${String(d)}`)});const c={root:["root",t&&"container",i&&"item",s&&"zeroMinWidth",...l,r!=="row"&&`direction-xs-${String(r)}`,o!=="wrap"&&`wrap-xs-${String(o)}`,...h]};return zr(c,S_e,e)},j0=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiGrid"}),{breakpoints:i}=oD(),a=_R(r),{className:o,columns:s,columnSpacing:u,component:l="div",container:h=!1,direction:c="row",item:f=!1,rowSpacing:d,spacing:p=0,wrap:m="wrap",zeroMinWidth:g=!1,...y}=a,v=d||p,b=u||p,w=pe.useContext(kq),x=h?s||12:w,S={},E={...y};i.keys.forEach(T=>{y[T]!=null&&(S[T]=y[T],delete E[T])});const A={...a,columns:x,container:h,direction:c,item:f,rowSpacing:v,columnSpacing:b,wrap:m,zeroMinWidth:g,spacing:p,...S,breakpoints:i.keys},k=F_e(A);return Ie.jsx(kq.Provider,{value:x,children:Ie.jsx(R_e,{ownerState:A,className:Nn(k.root,o),as:l,ref:t,...E})})}),rte=N2e({createStyledComponent:hn("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.container&&e.container]}}),componentName:"MuiGrid2",useThemeProps:n=>Xr({props:n,name:"MuiGrid2"}),useTheme:oD});function E6(n){return`scale(${n}, ${n**2})`}const P_e={entering:{opacity:1,transform:E6(1)},entered:{opacity:1,transform:"none"}},T5=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),T6=pe.forwardRef(function(e,t){const{addEndListener:r,appear:i=!0,children:a,easing:o,in:s,onEnter:u,onEntered:l,onEntering:h,onExit:c,onExited:f,onExiting:d,style:p,timeout:m="auto",TransitionComponent:g=jf,...y}=e,v=Pee(),b=pe.useRef(),w=oD(),x=pe.useRef(null),S=Ho(x,sD(a),t),E=U=>B=>{if(U){const W=x.current;B===void 0?U(W):U(W,B)}},A=E(h),k=E((U,B)=>{Qee(U);const{duration:W,delay:Y,easing:z}=EN({style:p,timeout:m,easing:o},{mode:"enter"});let j;m==="auto"?(j=w.transitions.getAutoHeightDuration(U.clientHeight),b.current=j):j=W,U.style.transition=[w.transitions.create("opacity",{duration:j,delay:Y}),w.transitions.create("transform",{duration:T5?j:j*.666,delay:Y,easing:z})].join(","),u&&u(U,B)}),T=E(l),O=E(d),F=E(U=>{const{duration:B,delay:W,easing:Y}=EN({style:p,timeout:m,easing:o},{mode:"exit"});let z;m==="auto"?(z=w.transitions.getAutoHeightDuration(U.clientHeight),b.current=z):z=B,U.style.transition=[w.transitions.create("opacity",{duration:z,delay:W}),w.transitions.create("transform",{duration:T5?z:z*.666,delay:T5?W:W||z*.333,easing:Y})].join(","),U.style.opacity=0,U.style.transform=E6(.75),c&&c(U)}),I=E(f),R=U=>{m==="auto"&&v.start(b.current||0,U),r&&r(x.current,U)};return Ie.jsx(g,{appear:i,in:s,nodeRef:x,onEnter:k,onEntered:T,onEntering:A,onExit:F,onExited:I,onExiting:O,addEndListener:R,timeout:m==="auto"?null:m,...y,children:(U,{ownerState:B,...W})=>pe.cloneElement(a,{style:{opacity:0,transform:E6(.75),visibility:U==="exited"&&!s?"hidden":void 0,...P_e[U],...p,...a.props.style},ref:S,...W})})});T6&&(T6.muiSupportAuto=!0);const L_e=n=>{const{classes:e,disableUnderline:t}=n,i=zr({root:["root",!t&&"underline"],input:["input"]},hxe,e);return{...e,...i}},M_e=hn(kR,{shouldForwardProp:n=>vc(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...DR(n,e),!t.disableUnderline&&e.underline]}})(Xi(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${A_.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${A_.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${A_.disabled}, .${A_.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${A_.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Cp()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}}))]}})),U_e=hn(NR,{name:"MuiInput",slot:"Input",overridesResolver:AR})({}),h9=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:a={},componentsProps:o,fullWidth:s=!1,inputComponent:u="input",multiline:l=!1,slotProps:h,slots:c={},type:f="text",...d}=r,p=L_e(r),g={root:{ownerState:{disableUnderline:i}}},y=h??o?vo(h??o,g):g,v=c.root??a.Root??M_e,b=c.input??a.Input??U_e;return Ie.jsx(u9,{slots:{root:v,input:b},slotProps:y,fullWidth:s,inputComponent:u,multiline:l,ref:t,type:f,...d,classes:p})});h9.muiName="Input";function B_e(n){return Br("MuiInputLabel",n)}br("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const z_e=n=>{const{classes:e,formControl:t,size:r,shrink:i,disableAnimation:a,variant:o,required:s}=n,u={root:["root",t&&"formControl",!a&&"animated",i&&"shrink",r&&r!=="normal"&&`size${kn(r)}`,o],asterisk:[s&&"asterisk"]},l=zr(u,B_e,e);return{...e,...l}},W_e=hn(__e,{shouldForwardProp:n=>vc(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${TC.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(Xi(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),f9=pe.forwardRef(function(e,t){const r=Xr({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:a,shrink:o,variant:s,className:u,...l}=r,h=fx();let c=o;typeof c>"u"&&h&&(c=h.filled||h.focused||h.adornedStart);const f=hx({props:r,muiFormControl:h,states:["size","variant","required","focused"]}),d={...r,disableAnimation:i,formControl:h,shrink:c,size:f.size,variant:f.variant,required:f.required,focused:f.focused},p=z_e(d);return Ie.jsx(W_e,{"data-shrink":c,ref:t,className:Nn(p.root,u),...l,ownerState:d,classes:p})}),D6=pe.createContext({});function j_e(n){return Br("MuiList",n)}br("MuiList",["root","padding","dense","subheader"]);const $_e=n=>{const{classes:e,disablePadding:t,dense:r,subheader:i}=n;return zr({root:["root",!t&&"padding",r&&"dense",i&&"subheader"]},j_e,e)},q_e=hn("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),V_e=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiList"}),{children:i,className:a,component:o="ul",dense:s=!1,disablePadding:u=!1,subheader:l,...h}=r,c=pe.useMemo(()=>({dense:s}),[s]),f={...r,component:o,dense:s,disablePadding:u},d=$_e(f);return Ie.jsx(D6.Provider,{value:c,children:Ie.jsxs(q_e,{as:o,className:Nn(d.root,a),ref:t,ownerState:f,...h,children:[l,i]})})}),Nq=br("MuiListItemIcon",["root","alignItemsFlexStart"]),Oq=br("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function D5(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function Rq(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function ite(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function N_(n,e,t,r,i,a){let o=!1,s=i(n,e,e?t:!1);for(;s;){if(s===n.firstChild){if(o)return!1;o=!0}const u=r?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!ite(s,a)||u)s=i(n,s,t);else return s.focus(),!0}return!1}const H_e=pe.forwardRef(function(e,t){const{actions:r,autoFocus:i=!1,autoFocusItem:a=!1,children:o,className:s,disabledItemsFocusable:u=!1,disableListWrap:l=!1,onKeyDown:h,variant:c="selectedMenu",...f}=e,d=pe.useRef(null),p=pe.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});zm(()=>{i&&d.current.focus()},[i]),pe.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(b,{direction:w})=>{const x=!d.current.style.width;if(b.clientHeight<d.current.clientHeight&&x){const S=`${Lee(Sp(b))}px`;d.current.style[w==="rtl"?"paddingLeft":"paddingRight"]=S,d.current.style.width=`calc(100% + ${S})`}return d.current}}),[]);const m=b=>{const w=d.current,x=b.key;if(b.ctrlKey||b.metaKey||b.altKey){h&&h(b);return}const E=fh(w).activeElement;if(x==="ArrowDown")b.preventDefault(),N_(w,E,l,u,D5);else if(x==="ArrowUp")b.preventDefault(),N_(w,E,l,u,Rq);else if(x==="Home")b.preventDefault(),N_(w,null,l,u,D5);else if(x==="End")b.preventDefault(),N_(w,null,l,u,Rq);else if(x.length===1){const A=p.current,k=x.toLowerCase(),T=performance.now();A.keys.length>0&&(T-A.lastTime>500?(A.keys=[],A.repeating=!0,A.previousKeyMatched=!0):A.repeating&&k!==A.keys[0]&&(A.repeating=!1)),A.lastTime=T,A.keys.push(k);const O=E&&!A.repeating&&ite(E,A);A.previousKeyMatched&&(O||N_(w,E,!1,u,D5,A))?b.preventDefault():A.previousKeyMatched=!1}h&&h(b)},g=Ho(d,t);let y=-1;pe.Children.forEach(o,(b,w)=>{if(!pe.isValidElement(b)){y===w&&(y+=1,y>=o.length&&(y=-1));return}b.props.disabled||(c==="selectedMenu"&&b.props.selected||y===-1)&&(y=w),y===w&&(b.props.disabled||b.props.muiSkipListHighlight||b.type.muiSkipListHighlight)&&(y+=1,y>=o.length&&(y=-1))});const v=pe.Children.map(o,(b,w)=>{if(w===y){const x={};return a&&(x.autoFocus=!0),b.props.tabIndex===void 0&&c==="selectedMenu"&&(x.tabIndex=0),pe.cloneElement(b,x)}return b});return Ie.jsx(V_e,{role:"menu",ref:g,className:s,onKeyDown:m,tabIndex:i?0:-1,...f,children:v})});function G_e(n){return Br("MuiPopover",n)}br("MuiPopover",["root","paper"]);function Iq(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function Fq(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function Pq(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function A5(n){return typeof n=="function"?n():n}const X_e=n=>{const{classes:e}=n;return zr({root:["root"],paper:["paper"]},G_e,e)},K_e=hn(uD,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),ate=hn(Zee,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Y_e=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiPopover"}),{action:i,anchorEl:a,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:u="anchorEl",children:l,className:h,container:c,elevation:f=8,marginThreshold:d=16,open:p,PaperProps:m={},slots:g={},slotProps:y={},transformOrigin:v={vertical:"top",horizontal:"left"},TransitionComponent:b,transitionDuration:w="auto",TransitionProps:x={},disableScrollLock:S=!1,...E}=r,A=pe.useRef(),k={...r,anchorOrigin:o,anchorReference:u,elevation:f,marginThreshold:d,transformOrigin:v,TransitionComponent:b,transitionDuration:w,TransitionProps:x},T=X_e(k),O=pe.useCallback(()=>{if(u==="anchorPosition")return s;const ce=A5(a),Ce=(ce&&ce.nodeType===1?ce:fh(A.current).body).getBoundingClientRect();return{top:Ce.top+Iq(Ce,o.vertical),left:Ce.left+Fq(Ce,o.horizontal)}},[a,o.horizontal,o.vertical,s,u]),F=pe.useCallback(ce=>({vertical:Iq(ce,v.vertical),horizontal:Fq(ce,v.horizontal)}),[v.horizontal,v.vertical]),I=pe.useCallback(ce=>{const ge={width:ce.offsetWidth,height:ce.offsetHeight},Ce=F(ge);if(u==="none")return{top:null,left:null,transformOrigin:Pq(Ce)};const Ee=O();let G=Ee.top-Ce.vertical,de=Ee.left-Ce.horizontal;const ye=G+ge.height,le=de+ge.width,ne=Sp(A5(a)),fe=ne.innerHeight-d,Ne=ne.innerWidth-d;if(d!==null&&G<d){const Ae=G-d;G-=Ae,Ce.vertical+=Ae}else if(d!==null&&ye>fe){const Ae=ye-fe;G-=Ae,Ce.vertical+=Ae}if(d!==null&&de<d){const Ae=de-d;de-=Ae,Ce.horizontal+=Ae}else if(le>Ne){const Ae=le-Ne;de-=Ae,Ce.horizontal+=Ae}return{top:`${Math.round(G)}px`,left:`${Math.round(de)}px`,transformOrigin:Pq(Ce)}},[a,u,O,F,d]),[R,U]=pe.useState(p),B=pe.useCallback(()=>{const ce=A.current;if(!ce)return;const ge=I(ce);ge.top!==null&&ce.style.setProperty("top",ge.top),ge.left!==null&&(ce.style.left=ge.left),ce.style.transformOrigin=ge.transformOrigin,U(!0)},[I]);pe.useEffect(()=>(S&&window.addEventListener("scroll",B),()=>window.removeEventListener("scroll",B)),[a,S,B]);const W=()=>{B()},Y=()=>{U(!1)};pe.useEffect(()=>{p&&B()}),pe.useImperativeHandle(i,()=>p?{updatePosition:()=>{B()}}:null,[p,B]),pe.useEffect(()=>{if(!p)return;const ce=Iee(()=>{B()}),ge=Sp(a);return ge.addEventListener("resize",ce),()=>{ce.clear(),ge.removeEventListener("resize",ce)}},[a,p,B]);let z=w;const j={slots:{transition:b,...g},slotProps:{transition:x,paper:m,...y}},[M,q]=Su("transition",{elementType:T6,externalForwardedProps:j,ownerState:k,getSlotProps:ce=>({...ce,onEntering:(ge,Ce)=>{var Ee;(Ee=ce.onEntering)==null||Ee.call(ce,ge,Ce),W()},onExited:ge=>{var Ce;(Ce=ce.onExited)==null||Ce.call(ce,ge),Y()}}),additionalProps:{appear:!0,in:p}});w==="auto"&&!M.muiSupportAuto&&(z=void 0);const H=c||(a?fh(A5(a)).body:void 0),[K,{slots:Z,slotProps:J,...X}]=Su("root",{ref:t,elementType:K_e,externalForwardedProps:{...j,...E},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:g.backdrop},slotProps:{backdrop:dwe(typeof y.backdrop=="function"?y.backdrop(k):y.backdrop,{invisible:!0})},container:H,open:p},ownerState:k,className:Nn(T.root,h)}),[ae,ie]=Su("paper",{ref:A,className:T.paper,elementType:ate,externalForwardedProps:j,shouldForwardComponentProp:!0,additionalProps:{elevation:f,style:R?void 0:{opacity:0}},ownerState:k});return Ie.jsx(K,{...X,...!C6(K)&&{slots:Z,slotProps:J,disableScrollLock:S},children:Ie.jsx(M,{...q,timeout:z,children:Ie.jsx(ae,{...ie,children:l})})})});function Q_e(n){return Br("MuiMenu",n)}br("MuiMenu",["root","paper","list"]);const Z_e={vertical:"top",horizontal:"right"},J_e={vertical:"top",horizontal:"left"},eSe=n=>{const{classes:e}=n;return zr({root:["root"],paper:["paper"],list:["list"]},Q_e,e)},tSe=hn(Y_e,{shouldForwardProp:n=>vc(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),nSe=hn(ate,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),rSe=hn(H_e,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),iSe=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:a,className:o,disableAutoFocusItem:s=!1,MenuListProps:u={},onClose:l,open:h,PaperProps:c={},PopoverClasses:f,transitionDuration:d="auto",TransitionProps:{onEntering:p,...m}={},variant:g="selectedMenu",slots:y={},slotProps:v={},...b}=r,w=a2e(),x={...r,autoFocus:i,disableAutoFocusItem:s,MenuListProps:u,onEntering:p,PaperProps:c,transitionDuration:d,TransitionProps:m,variant:g},S=eSe(x),E=i&&!s&&h,A=pe.useRef(null),k=(z,j)=>{A.current&&A.current.adjustStyleForScrollbar(z,{direction:w?"rtl":"ltr"}),p&&p(z,j)},T=z=>{z.key==="Tab"&&(z.preventDefault(),l&&l(z,"tabKeyDown"))};let O=-1;pe.Children.map(a,(z,j)=>{pe.isValidElement(z)&&(z.props.disabled||(g==="selectedMenu"&&z.props.selected||O===-1)&&(O=j))});const F={slots:y,slotProps:{list:u,transition:m,paper:c,...v}},I=r2e({elementType:y.root,externalSlotProps:v.root,ownerState:x,className:[S.root,o]}),[R,U]=Su("paper",{className:S.paper,elementType:nSe,externalForwardedProps:F,shouldForwardComponentProp:!0,ownerState:x}),[B,W]=Su("list",{className:Nn(S.list,u.className),elementType:rSe,shouldForwardComponentProp:!0,externalForwardedProps:F,getSlotProps:z=>({...z,onKeyDown:j=>{var M;T(j),(M=z.onKeyDown)==null||M.call(z,j)}}),ownerState:x}),Y=typeof F.slotProps.transition=="function"?F.slotProps.transition(x):F.slotProps.transition;return Ie.jsx(tSe,{onClose:l,anchorOrigin:{vertical:"bottom",horizontal:w?"right":"left"},transformOrigin:w?Z_e:J_e,slots:{root:y.root,paper:R,backdrop:y.backdrop,...y.transition&&{transition:y.transition}},slotProps:{root:I,paper:U,backdrop:typeof v.backdrop=="function"?v.backdrop(x):v.backdrop,transition:{...Y,onEntering:(...z)=>{var j;k(...z),(j=Y==null?void 0:Y.onEntering)==null||j.call(Y,...z)}}},open:h,ref:t,transitionDuration:d,ownerState:x,...b,classes:f,children:Ie.jsx(B,{actions:A,autoFocus:i&&(O===-1||s),autoFocusItem:E,variant:g,...W,children:a})})});function aSe(n){return Br("MuiMenuItem",n)}const O_=br("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),sSe=(n,e)=>{const{ownerState:t}=n;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},oSe=n=>{const{disabled:e,dense:t,divider:r,disableGutters:i,selected:a,classes:o}=n,u=zr({root:["root",t&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",a&&"selected"]},aSe,o);return{...o,...u}},uSe=hn(a9,{shouldForwardProp:n=>vc(n)||n==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:sSe})(Xi(({theme:n})=>({...n.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${O_.selected}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:_u(n.palette.primary.main,n.palette.action.selectedOpacity),[`&.${O_.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:_u(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},[`&.${O_.selected}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:_u(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:_u(n.palette.primary.main,n.palette.action.selectedOpacity)}},[`&.${O_.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${O_.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},[`& + .${Tq.root}`]:{marginTop:n.spacing(1),marginBottom:n.spacing(1)},[`& + .${Tq.inset}`]:{marginLeft:52},[`& .${Oq.root}`]:{marginTop:0,marginBottom:0},[`& .${Oq.inset}`]:{paddingLeft:36},[`& .${Nq.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[n.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...n.typography.body2,[`& .${Nq.root} svg`]:{fontSize:"1.25rem"}}}]}))),A6=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:a="li",dense:o=!1,divider:s=!1,disableGutters:u=!1,focusVisibleClassName:l,role:h="menuitem",tabIndex:c,className:f,...d}=r,p=pe.useContext(D6),m=pe.useMemo(()=>({dense:o||p.dense||!1,disableGutters:u}),[p.dense,o,u]),g=pe.useRef(null);zm(()=>{i&&g.current&&g.current.focus()},[i]);const y={...r,dense:m.dense,divider:s,disableGutters:u},v=oSe(r),b=Ho(g,t);let w;return r.disabled||(w=c!==void 0?c:-1),Ie.jsx(D6.Provider,{value:m,children:Ie.jsx(uSe,{ref:b,role:h,tabIndex:w,component:a,focusVisibleClassName:Nn(v.focusVisible,l),className:Nn(v.root,f),...d,ownerState:y,classes:v})})});function lSe(n){return Br("MuiNativeSelect",n)}const d9=br("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),cSe=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:a,error:o}=n,s={select:["select",t,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${kn(t)}`,a&&"iconOpen",r&&"disabled"]};return zr(s,lSe,e)},ste=hn("select")(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${d9.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),hSe=hn(ste,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:vc,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${d9.multiple}`]:e.multiple}]}})({}),ote=hn("svg")(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${d9.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),fSe=hn(ote,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${kn(t.variant)}`],t.open&&e.iconOpen]}})({}),dSe=pe.forwardRef(function(e,t){const{className:r,disabled:i,error:a,IconComponent:o,inputRef:s,variant:u="standard",...l}=e,h={...e,disabled:i,variant:u,error:a},c=cSe(h);return Ie.jsxs(pe.Fragment,{children:[Ie.jsx(hSe,{ownerState:h,className:Nn(c.select,r),disabled:i,ref:s||t,...l}),e.multiple?null:Ie.jsx(fSe,{as:o,ownerState:h,className:c.icon})]})});var Lq;const pSe=hn("fieldset",{shouldForwardProp:vc})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),gSe=hn("legend",{shouldForwardProp:vc})(Xi(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function mSe(n){const{children:e,classes:t,className:r,label:i,notched:a,...o}=n,s=i!=null&&i!=="",u={...n,notched:a,withLabel:s};return Ie.jsx(pSe,{"aria-hidden":!0,className:r,ownerState:u,...o,children:Ie.jsx(gSe,{ownerState:u,children:s?Ie.jsx("span",{children:i}):Lq||(Lq=Ie.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const ySe=n=>{const{classes:e}=n,r=zr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},fxe,e);return{...e,...r}},vSe=hn(kR,{shouldForwardProp:n=>vc(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:DR})(Xi(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Zh.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Zh.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Zh.focused} .${Zh.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(Cp()).map(([t])=>({props:{color:t},style:{[`&.${Zh.focused} .${Zh.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${Zh.error} .${Zh.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Zh.disabled} .${Zh.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),bSe=hn(mSe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(Xi(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),wSe=hn(NR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:AR})(Xi(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),p9=pe.forwardRef(function(e,t){var r;const i=Xr({props:e,name:"MuiOutlinedInput"}),{components:a={},fullWidth:o=!1,inputComponent:s="input",label:u,multiline:l=!1,notched:h,slots:c={},type:f="text",...d}=i,p=ySe(i),m=fx(),g=hx({props:i,muiFormControl:m,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),y={...i,color:g.color||"primary",disabled:g.disabled,error:g.error,focused:g.focused,formControl:m,fullWidth:o,hiddenLabel:g.hiddenLabel,multiline:l,size:g.size,type:f},v=c.root??a.Root??vSe,b=c.input??a.Input??wSe;return Ie.jsx(u9,{slots:{root:v,input:b},renderSuffix:w=>Ie.jsx(bSe,{ownerState:y,className:p.notchedOutline,label:u!=null&&u!==""&&g.required?r||(r=Ie.jsxs(pe.Fragment,{children:[u,"","*"]})):u,notched:typeof h<"u"?h:!!(w.startAdornment||w.filled||w.focused)}),fullWidth:o,inputComponent:s,multiline:l,ref:t,type:f,...d,classes:{...p,notchedOutline:null}})});p9.muiName="Input";function ute(n){return Br("MuiSelect",n)}const R_=br("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Mq;const xSe=hn(ste,{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${R_.select}`]:e.select},{[`&.${R_.select}`]:e[t.variant]},{[`&.${R_.error}`]:e.error},{[`&.${R_.multiple}`]:e.multiple}]}})({[`&.${R_.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),_Se=hn(ote,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${kn(t.variant)}`],t.open&&e.iconOpen]}})({}),SSe=hn("input",{shouldForwardProp:n=>Gee(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Uq(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function CSe(n){return n==null||typeof n=="string"&&!n.trim()}const ESe=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:a,error:o}=n,s={select:["select",t,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${kn(t)}`,a&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return zr(s,ute,e)},TSe=pe.forwardRef(function(e,t){var Et;const{"aria-describedby":r,"aria-label":i,autoFocus:a,autoWidth:o,children:s,className:u,defaultOpen:l,defaultValue:h,disabled:c,displayEmpty:f,error:d=!1,IconComponent:p,inputRef:m,labelId:g,MenuProps:y={},multiple:v,name:b,onBlur:w,onChange:x,onClose:S,onFocus:E,onOpen:A,open:k,readOnly:T,renderValue:O,required:F,SelectDisplayProps:I={},tabIndex:R,type:U,value:B,variant:W="standard",...Y}=e,[z,j]=nq({controlled:B,default:h,name:"Select"}),[M,q]=nq({controlled:k,default:l,name:"Select"}),H=pe.useRef(null),K=pe.useRef(null),[Z,J]=pe.useState(null),{current:X}=pe.useRef(k!=null),[ae,ie]=pe.useState(),ce=Ho(t,m),ge=pe.useCallback(xt=>{K.current=xt,xt&&J(xt)},[]),Ce=Z==null?void 0:Z.parentNode;pe.useImperativeHandle(ce,()=>({focus:()=>{K.current.focus()},node:H.current,value:z}),[z]),pe.useEffect(()=>{l&&M&&Z&&!X&&(ie(o?null:Ce.clientWidth),K.current.focus())},[Z,o]),pe.useEffect(()=>{a&&K.current.focus()},[a]),pe.useEffect(()=>{if(!g)return;const xt=fh(K.current).getElementById(g);if(xt){const Ot=()=>{getSelection().isCollapsed&&K.current.focus()};return xt.addEventListener("click",Ot),()=>{xt.removeEventListener("click",Ot)}}},[g]);const Ee=(xt,Ot)=>{xt?A&&A(Ot):S&&S(Ot),X||(ie(o?null:Ce.clientWidth),q(xt))},G=xt=>{xt.button===0&&(xt.preventDefault(),K.current.focus(),Ee(!0,xt))},de=xt=>{Ee(!1,xt)},ye=pe.Children.toArray(s),le=xt=>{const Ot=ye.find(dn=>dn.props.value===xt.target.value);Ot!==void 0&&(j(Ot.props.value),x&&x(xt,Ot))},ne=xt=>Ot=>{let dn;if(Ot.currentTarget.hasAttribute("tabindex")){if(v){dn=Array.isArray(z)?z.slice():[];const Kr=z.indexOf(xt.props.value);Kr===-1?dn.push(xt.props.value):dn.splice(Kr,1)}else dn=xt.props.value;if(xt.props.onClick&&xt.props.onClick(Ot),z!==dn&&(j(dn),x)){const Kr=Ot.nativeEvent||Ot,Ba=new Kr.constructor(Kr.type,Kr);Object.defineProperty(Ba,"target",{writable:!0,value:{value:dn,name:b}}),x(Ba,xt)}v||Ee(!1,Ot)}},fe=xt=>{T||[" ","ArrowUp","ArrowDown","Enter"].includes(xt.key)&&(xt.preventDefault(),Ee(!0,xt))},Ne=Z!==null&&M,Ae=xt=>{!Ne&&w&&(Object.defineProperty(xt,"target",{writable:!0,value:{value:z,name:b}}),w(xt))};delete Y["aria-invalid"];let ue,me;const Se=[];let Re=!1;(DN({value:z})||f)&&(O?ue=O(z):Re=!0);const je=ye.map(xt=>{if(!pe.isValidElement(xt))return null;let Ot;if(v){if(!Array.isArray(z))throw new Error(_p(2));Ot=z.some(dn=>Uq(dn,xt.props.value)),Ot&&Re&&Se.push(xt.props.children)}else Ot=Uq(z,xt.props.value),Ot&&Re&&(me=xt.props.children);return pe.cloneElement(xt,{"aria-selected":Ot?"true":"false",onClick:ne(xt),onKeyUp:dn=>{dn.key===" "&&dn.preventDefault(),xt.props.onKeyUp&&xt.props.onKeyUp(dn)},role:"option",selected:Ot,value:void 0,"data-value":xt.props.value})});Re&&(v?Se.length===0?ue=null:ue=Se.reduce((xt,Ot,dn)=>(xt.push(Ot),dn<Se.length-1&&xt.push(", "),xt),[]):ue=me);let rt=ae;!o&&X&&Z&&(rt=Ce.clientWidth);let at;typeof R<"u"?at=R:at=c?null:0;const yt=I.id||(b?`mui-component-select-${b}`:void 0),pt={...e,variant:W,value:z,open:Ne,error:d},Le=ESe(pt),tt={...y.PaperProps,...(Et=y.slotProps)==null?void 0:Et.paper},ft=CR();return Ie.jsxs(pe.Fragment,{children:[Ie.jsx(xSe,{as:"div",ref:ge,tabIndex:at,role:"combobox","aria-controls":Ne?ft:void 0,"aria-disabled":c?"true":void 0,"aria-expanded":Ne?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[g,yt].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":F?"true":void 0,"aria-invalid":d?"true":void 0,onKeyDown:fe,onMouseDown:c||T?null:G,onBlur:Ae,onFocus:E,...I,ownerState:pt,className:Nn(I.className,Le.select,u),id:yt,children:CSe(ue)?Mq||(Mq=Ie.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):ue}),Ie.jsx(SSe,{"aria-invalid":d,value:Array.isArray(z)?z.join(","):z,name:b,ref:H,"aria-hidden":!0,onChange:le,tabIndex:-1,disabled:c,className:Le.nativeInput,autoFocus:a,required:F,...Y,ownerState:pt}),Ie.jsx(_Se,{as:p,className:Le.icon,ownerState:pt}),Ie.jsx(iSe,{id:`menu-${b||""}`,anchorEl:Ce,open:Ne,onClose:de,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...y,slotProps:{...y.slotProps,list:{"aria-labelledby":g,role:"listbox","aria-multiselectable":v?"true":void 0,disableListWrap:!0,id:ft,...y.MenuListProps},paper:{...tt,style:{minWidth:rt,...tt!=null?tt.style:null}}},children:je})]})}),DSe=n=>{const{classes:e}=n,r=zr({root:["root"]},ute,e);return{...e,...r}},g9={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>vc(n)&&n!=="variant",slot:"Root"},ASe=hn(h9,g9)(""),kSe=hn(p9,g9)(""),NSe=hn(l9,g9)(""),OR=pe.forwardRef(function(e,t){const r=Xr({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:a,classes:o={},className:s,defaultOpen:u=!1,displayEmpty:l=!1,IconComponent:h=pxe,id:c,input:f,inputProps:d,label:p,labelId:m,MenuProps:g,multiple:y=!1,native:v=!1,onClose:b,onOpen:w,open:x,renderValue:S,SelectDisplayProps:E,variant:A="outlined",...k}=r,T=v?dSe:TSe,O=fx(),F=hx({props:r,muiFormControl:O,states:["variant","error"]}),I=F.variant||A,R={...r,variant:I,classes:o},U=DSe(R),{root:B,...W}=U,Y=f||{standard:Ie.jsx(ASe,{ownerState:R}),outlined:Ie.jsx(kSe,{label:p,ownerState:R}),filled:Ie.jsx(NSe,{ownerState:R})}[I],z=Ho(t,sD(Y));return Ie.jsx(pe.Fragment,{children:pe.cloneElement(Y,{inputComponent:T,inputProps:{children:a,error:F.error,IconComponent:h,variant:I,type:void 0,multiple:y,...v?{id:c}:{autoWidth:i,defaultOpen:u,displayEmpty:l,labelId:m,MenuProps:g,onClose:b,onOpen:w,open:x,renderValue:S,SelectDisplayProps:{id:c,...E}},...d,classes:d?vo(W,d.classes):W,...f?f.props.inputProps:{}},...(y&&v||l)&&I==="outlined"?{notched:!0}:{},ref:z,className:Nn(Y.props.className,s,U.root),...!f&&{variant:I},...k})})});OR.muiName="Select";function OSe(n){return Br("MuiTextField",n)}br("MuiTextField",["root"]);const RSe={standard:h9,filled:l9,outlined:p9},ISe=n=>{const{classes:e}=n;return zr({root:["root"]},OSe,e)},FSe=hn(c9,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Ef=pe.forwardRef(function(e,t){const r=Xr({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:a=!1,children:o,className:s,color:u="primary",defaultValue:l,disabled:h=!1,error:c=!1,FormHelperTextProps:f,fullWidth:d=!1,helperText:p,id:m,InputLabelProps:g,inputProps:y,InputProps:v,inputRef:b,label:w,maxRows:x,minRows:S,multiline:E=!1,name:A,onBlur:k,onChange:T,onFocus:O,placeholder:F,required:I=!1,rows:R,select:U=!1,SelectProps:B,slots:W={},slotProps:Y={},type:z,value:j,variant:M="outlined",...q}=r,H={...r,autoFocus:a,color:u,disabled:h,error:c,fullWidth:d,multiline:E,required:I,select:U,variant:M},K=ISe(H),Z=CR(m),J=p&&Z?`${Z}-helper-text`:void 0,X=w&&Z?`${Z}-label`:void 0,ae=RSe[M],ie={slots:W,slotProps:{input:v,inputLabel:g,htmlInput:y,formHelperText:f,select:B,...Y}},ce={},ge=ie.slotProps.inputLabel;M==="outlined"&&(ge&&typeof ge.shrink<"u"&&(ce.notched=ge.shrink),ce.label=w),U&&((!B||!B.native)&&(ce.id=void 0),ce["aria-describedby"]=void 0);const[Ce,Ee]=Su("input",{elementType:ae,externalForwardedProps:ie,additionalProps:ce,ownerState:H}),[G,de]=Su("inputLabel",{elementType:f9,externalForwardedProps:ie,ownerState:H}),[ye,le]=Su("htmlInput",{elementType:"input",externalForwardedProps:ie,ownerState:H}),[ne,fe]=Su("formHelperText",{elementType:y_e,externalForwardedProps:ie,ownerState:H}),[Ne,Ae]=Su("select",{elementType:OR,externalForwardedProps:ie,ownerState:H}),ue=Ie.jsx(Ce,{"aria-describedby":J,autoComplete:i,autoFocus:a,defaultValue:l,fullWidth:d,multiline:E,name:A,rows:R,maxRows:x,minRows:S,type:z,value:j,id:Z,inputRef:b,onBlur:k,onChange:T,onFocus:O,placeholder:F,inputProps:le,slots:{input:W.htmlInput?ye:void 0},...Ee});return Ie.jsxs(FSe,{className:Nn(K.root,s),disabled:h,error:c,fullWidth:d,ref:t,required:I,color:u,variant:M,ownerState:H,...q,children:[w!=null&&w!==""&&Ie.jsx(G,{htmlFor:Z,id:X,...de,children:w}),U?Ie.jsx(Ne,{"aria-describedby":J,id:Z,labelId:X,value:j,input:ue,...Ae,children:o}):ue,p&&Ie.jsx(ne,{id:J,...fe,children:p})]})});function lte(n,e){return function(){return n.apply(e,arguments)}}const{toString:PSe}=Object.prototype,{getPrototypeOf:m9}=Object,RR=(n=>e=>{const t=PSe.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),xh=n=>(n=n.toLowerCase(),e=>RR(e)===n),IR=n=>e=>typeof e===n,{isArray:dx}=Array,VC=IR("undefined");function LSe(n){return n!==null&&!VC(n)&&n.constructor!==null&&!VC(n.constructor)&&bl(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const cte=xh("ArrayBuffer");function MSe(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&cte(n.buffer),e}const USe=IR("string"),bl=IR("function"),hte=IR("number"),FR=n=>n!==null&&typeof n=="object",BSe=n=>n===!0||n===!1,Jk=n=>{if(RR(n)!=="object")return!1;const e=m9(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},zSe=xh("Date"),WSe=xh("File"),jSe=xh("Blob"),$Se=xh("FileList"),qSe=n=>FR(n)&&bl(n.pipe),VSe=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||bl(n.append)&&((e=RR(n))==="formdata"||e==="object"&&bl(n.toString)&&n.toString()==="[object FormData]"))},HSe=xh("URLSearchParams"),[GSe,XSe,KSe,YSe]=["ReadableStream","Request","Response","Headers"].map(xh),QSe=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lD(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),dx(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),o=a.length;let s;for(r=0;r<o;r++)s=a[r],e.call(null,n[s],s,n)}}function fte(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Nv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dte=n=>!VC(n)&&n!==Nv;function k6(){const{caseless:n}=dte(this)&&this||{},e={},t=(r,i)=>{const a=n&&fte(e,i)||i;Jk(e[a])&&Jk(r)?e[a]=k6(e[a],r):Jk(r)?e[a]=k6({},r):dx(r)?e[a]=r.slice():e[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&lD(arguments[r],t);return e}const ZSe=(n,e,t,{allOwnKeys:r}={})=>(lD(e,(i,a)=>{t&&bl(i)?n[a]=lte(i,t):n[a]=i},{allOwnKeys:r}),n),JSe=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),eCe=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},tCe=(n,e,t,r)=>{let i,a,o;const s={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),a=i.length;a-- >0;)o=i[a],(!r||r(o,n,e))&&!s[o]&&(e[o]=n[o],s[o]=!0);n=t!==!1&&m9(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},nCe=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},rCe=n=>{if(!n)return null;if(dx(n))return n;let e=n.length;if(!hte(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},iCe=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&m9(Uint8Array)),aCe=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(n,a[0],a[1])}},sCe=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},oCe=xh("HTMLFormElement"),uCe=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),Bq=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),lCe=xh("RegExp"),pte=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};lD(t,(i,a)=>{let o;(o=e(i,a,n))!==!1&&(r[a]=o||i)}),Object.defineProperties(n,r)},cCe=n=>{pte(n,(e,t)=>{if(bl(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(bl(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},hCe=(n,e)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return dx(n)?r(n):r(String(n).split(e)),t},fCe=()=>{},dCe=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function pCe(n){return!!(n&&bl(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const gCe=n=>{const e=new Array(10),t=(r,i)=>{if(FR(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const a=dx(r)?[]:{};return lD(r,(o,s)=>{const u=t(o,i+1);!VC(u)&&(a[s]=u)}),e[i]=void 0,a}}return r};return t(n,0)},mCe=xh("AsyncFunction"),yCe=n=>n&&(FR(n)||bl(n))&&bl(n.then)&&bl(n.catch),gte=((n,e)=>n?setImmediate:e?((t,r)=>(Nv.addEventListener("message",({source:i,data:a})=>{i===Nv&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Nv.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",bl(Nv.postMessage)),vCe=typeof queueMicrotask<"u"?queueMicrotask.bind(Nv):typeof process<"u"&&process.nextTick||gte,ht={isArray:dx,isArrayBuffer:cte,isBuffer:LSe,isFormData:VSe,isArrayBufferView:MSe,isString:USe,isNumber:hte,isBoolean:BSe,isObject:FR,isPlainObject:Jk,isReadableStream:GSe,isRequest:XSe,isResponse:KSe,isHeaders:YSe,isUndefined:VC,isDate:zSe,isFile:WSe,isBlob:jSe,isRegExp:lCe,isFunction:bl,isStream:qSe,isURLSearchParams:HSe,isTypedArray:iCe,isFileList:$Se,forEach:lD,merge:k6,extend:ZSe,trim:QSe,stripBOM:JSe,inherits:eCe,toFlatObject:tCe,kindOf:RR,kindOfTest:xh,endsWith:nCe,toArray:rCe,forEachEntry:aCe,matchAll:sCe,isHTMLForm:oCe,hasOwnProperty:Bq,hasOwnProp:Bq,reduceDescriptors:pte,freezeMethods:cCe,toObjectSet:hCe,toCamelCase:uCe,noop:fCe,toFiniteNumber:dCe,findKey:fte,global:Nv,isContextDefined:dte,isSpecCompliantForm:pCe,toJSONObject:gCe,isAsyncFn:mCe,isThenable:yCe,setImmediate:gte,asap:vCe};function Pn(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ht.inherits(Pn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ht.toJSONObject(this.config),code:this.code,status:this.status}}});const mte=Pn.prototype,yte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{yte[n]={value:n}});Object.defineProperties(Pn,yte);Object.defineProperty(mte,"isAxiosError",{value:!0});Pn.from=(n,e,t,r,i,a)=>{const o=Object.create(mte);return ht.toFlatObject(n,o,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),Pn.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,a&&Object.assign(o,a),o};const bCe=null;function N6(n){return ht.isPlainObject(n)||ht.isArray(n)}function vte(n){return ht.endsWith(n,"[]")?n.slice(0,-2):n}function zq(n,e,t){return n?n.concat(e).map(function(i,a){return i=vte(i),!t&&a?"["+i+"]":i}).join(t?".":""):e}function wCe(n){return ht.isArray(n)&&!n.some(N6)}const xCe=ht.toFlatObject(ht,{},null,function(e){return/^is[A-Z]/.test(e)});function PR(n,e,t){if(!ht.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ht.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!ht.isUndefined(g[m])});const r=t.metaTokens,i=t.visitor||h,a=t.dots,o=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&ht.isSpecCompliantForm(e);if(!ht.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(ht.isDate(p))return p.toISOString();if(!u&&ht.isBlob(p))throw new Pn("Blob is not supported. Use a Buffer instead.");return ht.isArrayBuffer(p)||ht.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function h(p,m,g){let y=p;if(p&&!g&&typeof p=="object"){if(ht.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(ht.isArray(p)&&wCe(p)||(ht.isFileList(p)||ht.endsWith(m,"[]"))&&(y=ht.toArray(p)))return m=vte(m),y.forEach(function(b,w){!(ht.isUndefined(b)||b===null)&&e.append(o===!0?zq([m],w,a):o===null?m:m+"[]",l(b))}),!1}return N6(p)?!0:(e.append(zq(g,m,a),l(p)),!1)}const c=[],f=Object.assign(xCe,{defaultVisitor:h,convertValue:l,isVisitable:N6});function d(p,m){if(!ht.isUndefined(p)){if(c.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));c.push(p),ht.forEach(p,function(y,v){(!(ht.isUndefined(y)||y===null)&&i.call(e,y,ht.isString(v)?v.trim():v,m,f))===!0&&d(y,m?m.concat(v):[v])}),c.pop()}}if(!ht.isObject(n))throw new TypeError("data must be an object");return d(n),e}function Wq(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function y9(n,e){this._pairs=[],n&&PR(n,this,e)}const bte=y9.prototype;bte.append=function(e,t){this._pairs.push([e,t])};bte.toString=function(e){const t=e?function(r){return e.call(this,r,Wq)}:Wq;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function _Ce(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wte(n,e,t){if(!e)return n;const r=t&&t.encode||_Ce;ht.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(e,t):a=ht.isURLSearchParams(e)?e.toString():new y9(e,t).toString(r),a){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class jq{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ht.forEach(this.handlers,function(r){r!==null&&e(r)})}}const xte={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},SCe=typeof URLSearchParams<"u"?URLSearchParams:y9,CCe=typeof FormData<"u"?FormData:null,ECe=typeof Blob<"u"?Blob:null,TCe={isBrowser:!0,classes:{URLSearchParams:SCe,FormData:CCe,Blob:ECe},protocols:["http","https","file","blob","url","data"]},v9=typeof window<"u"&&typeof document<"u",O6=typeof navigator=="object"&&navigator||void 0,DCe=v9&&(!O6||["ReactNative","NativeScript","NS"].indexOf(O6.product)<0),ACe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kCe=v9&&window.location.href||"http://localhost",NCe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:v9,hasStandardBrowserEnv:DCe,hasStandardBrowserWebWorkerEnv:ACe,navigator:O6,origin:kCe},Symbol.toStringTag,{value:"Module"})),po={...NCe,...TCe};function OCe(n,e){return PR(n,new po.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,a){return po.isNode&&ht.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function RCe(n){return ht.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ICe(n){const e={},t=Object.keys(n);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],e[a]=n[a];return e}function _te(n){function e(t,r,i,a){let o=t[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),u=a>=t.length;return o=!o&&ht.isArray(i)?i.length:o,u?(ht.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!s):((!i[o]||!ht.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],a)&&ht.isArray(i[o])&&(i[o]=ICe(i[o])),!s)}if(ht.isFormData(n)&&ht.isFunction(n.entries)){const t={};return ht.forEachEntry(n,(r,i)=>{e(RCe(r),i,t,0)}),t}return null}function FCe(n,e,t){if(ht.isString(n))try{return(e||JSON.parse)(n),ht.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const cD={transitional:xte,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=ht.isObject(e);if(a&&ht.isHTMLForm(e)&&(e=new FormData(e)),ht.isFormData(e))return i?JSON.stringify(_te(e)):e;if(ht.isArrayBuffer(e)||ht.isBuffer(e)||ht.isStream(e)||ht.isFile(e)||ht.isBlob(e)||ht.isReadableStream(e))return e;if(ht.isArrayBufferView(e))return e.buffer;if(ht.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return OCe(e,this.formSerializer).toString();if((s=ht.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return PR(s?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),FCe(e)):e}],transformResponse:[function(e){const t=this.transitional||cD.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ht.isResponse(e)||ht.isReadableStream(e))return e;if(e&&ht.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?Pn.from(s,Pn.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:po.classes.FormData,Blob:po.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ht.forEach(["delete","get","head","post","put","patch"],n=>{cD.headers[n]={}});const PCe=ht.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),LCe=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&PCe[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},$q=Symbol("internals");function I_(n){return n&&String(n).trim().toLowerCase()}function e3(n){return n===!1||n==null?n:ht.isArray(n)?n.map(e3):String(n)}function MCe(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const UCe=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function k5(n,e,t,r,i){if(ht.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!ht.isString(e)){if(ht.isString(r))return e.indexOf(r)!==-1;if(ht.isRegExp(r))return r.test(e)}}function BCe(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function zCe(n,e){const t=ht.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,a,o){return this[r].call(this,e,i,a,o)},configurable:!0})})}let Tu=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function a(s,u,l){const h=I_(u);if(!h)throw new Error("header name must be a non-empty string");const c=ht.findKey(i,h);(!c||i[c]===void 0||l===!0||l===void 0&&i[c]!==!1)&&(i[c||u]=e3(s))}const o=(s,u)=>ht.forEach(s,(l,h)=>a(l,h,u));if(ht.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(ht.isString(e)&&(e=e.trim())&&!UCe(e))o(LCe(e),t);else if(ht.isHeaders(e))for(const[s,u]of e.entries())a(u,s,r);else e!=null&&a(t,e,r);return this}get(e,t){if(e=I_(e),e){const r=ht.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return MCe(i);if(ht.isFunction(t))return t.call(this,i,r);if(ht.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=I_(e),e){const r=ht.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||k5(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function a(o){if(o=I_(o),o){const s=ht.findKey(r,o);s&&(!t||k5(r,r[s],s,t))&&(delete r[s],i=!0)}}return ht.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!e||k5(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const t=this,r={};return ht.forEach(this,(i,a)=>{const o=ht.findKey(r,a);if(o){t[o]=e3(i),delete t[a];return}const s=e?BCe(a):String(a).trim();s!==a&&delete t[a],t[s]=e3(i),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ht.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&ht.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[$q]=this[$q]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=I_(o);r[s]||(zCe(i,o),r[s]=!0)}return ht.isArray(e)?e.forEach(a):a(e),this}};Tu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ht.reduceDescriptors(Tu.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});ht.freezeMethods(Tu);function N5(n,e){const t=this||cD,r=e||t,i=Tu.from(r.headers);let a=r.data;return ht.forEach(n,function(s){a=s.call(t,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function Ste(n){return!!(n&&n.__CANCEL__)}function px(n,e,t){Pn.call(this,n??"canceled",Pn.ERR_CANCELED,e,t),this.name="CanceledError"}ht.inherits(px,Pn,{__CANCEL__:!0});function Cte(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Pn("Request failed with status code "+t.status,[Pn.ERR_BAD_REQUEST,Pn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function WCe(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function jCe(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),h=r[a];o||(o=l),t[i]=u,r[i]=l;let c=a,f=0;for(;c!==i;)f+=t[c++],c=c%n;if(i=(i+1)%n,i===a&&(a=(a+1)%n),l-o<e)return;const d=h&&l-h;return d?Math.round(f*1e3/d):void 0}}function $Ce(n,e){let t=0,r=1e3/e,i,a;const o=(l,h=Date.now())=>{t=h,i=null,a&&(clearTimeout(a),a=null),n.apply(null,l)};return[(...l)=>{const h=Date.now(),c=h-t;c>=r?o(l,h):(i=l,a||(a=setTimeout(()=>{a=null,o(i)},r-c)))},()=>i&&o(i)]}const AN=(n,e,t=3)=>{let r=0;const i=jCe(50,250);return $Ce(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,u=o-r,l=i(u),h=o<=s;r=o;const c={loaded:o,total:s,progress:s?o/s:void 0,bytes:u,rate:l||void 0,estimated:l&&s&&h?(s-o)/l:void 0,event:a,lengthComputable:s!=null,[e?"download":"upload"]:!0};n(c)},t)},qq=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},Vq=n=>(...e)=>ht.asap(()=>n(...e)),qCe=po.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,po.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(po.origin),po.navigator&&/(msie|trident)/i.test(po.navigator.userAgent)):()=>!0,VCe=po.hasStandardBrowserEnv?{write(n,e,t,r,i,a){const o=[n+"="+encodeURIComponent(e)];ht.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),ht.isString(r)&&o.push("path="+r),ht.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function HCe(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function GCe(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Ete(n,e,t){let r=!HCe(e);return n&&(r||t==!1)?GCe(n,e):e}const Hq=n=>n instanceof Tu?{...n}:n;function n1(n,e){e=e||{};const t={};function r(l,h,c,f){return ht.isPlainObject(l)&&ht.isPlainObject(h)?ht.merge.call({caseless:f},l,h):ht.isPlainObject(h)?ht.merge({},h):ht.isArray(h)?h.slice():h}function i(l,h,c,f){if(ht.isUndefined(h)){if(!ht.isUndefined(l))return r(void 0,l,c,f)}else return r(l,h,c,f)}function a(l,h){if(!ht.isUndefined(h))return r(void 0,h)}function o(l,h){if(ht.isUndefined(h)){if(!ht.isUndefined(l))return r(void 0,l)}else return r(void 0,h)}function s(l,h,c){if(c in e)return r(l,h);if(c in n)return r(void 0,l)}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(l,h,c)=>i(Hq(l),Hq(h),c,!0)};return ht.forEach(Object.keys(Object.assign({},n,e)),function(h){const c=u[h]||i,f=c(n[h],e[h],h);ht.isUndefined(f)&&c!==s||(t[h]=f)}),t}const Tte=n=>{const e=n1({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=e;e.headers=o=Tu.from(o),e.url=wte(Ete(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let u;if(ht.isFormData(t)){if(po.hasStandardBrowserEnv||po.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[l,...h]=u?u.split(";").map(c=>c.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...h].join("; "))}}if(po.hasStandardBrowserEnv&&(r&&ht.isFunction(r)&&(r=r(e)),r||r!==!1&&qCe(e.url))){const l=i&&a&&VCe.read(a);l&&o.set(i,l)}return e},XCe=typeof XMLHttpRequest<"u",KCe=XCe&&function(n){return new Promise(function(t,r){const i=Tte(n);let a=i.data;const o=Tu.from(i.headers).normalize();let{responseType:s,onUploadProgress:u,onDownloadProgress:l}=i,h,c,f,d,p;function m(){d&&d(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function y(){if(!g)return;const b=Tu.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),x={data:!s||s==="text"||s==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:b,config:n,request:g};Cte(function(E){t(E),m()},function(E){r(E),m()},x),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(r(new Pn("Request aborted",Pn.ECONNABORTED,n,g)),g=null)},g.onerror=function(){r(new Pn("Network Error",Pn.ERR_NETWORK,n,g)),g=null},g.ontimeout=function(){let w=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const x=i.transitional||xte;i.timeoutErrorMessage&&(w=i.timeoutErrorMessage),r(new Pn(w,x.clarifyTimeoutError?Pn.ETIMEDOUT:Pn.ECONNABORTED,n,g)),g=null},a===void 0&&o.setContentType(null),"setRequestHeader"in g&&ht.forEach(o.toJSON(),function(w,x){g.setRequestHeader(x,w)}),ht.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),s&&s!=="json"&&(g.responseType=i.responseType),l&&([f,p]=AN(l,!0),g.addEventListener("progress",f)),u&&g.upload&&([c,d]=AN(u),g.upload.addEventListener("progress",c),g.upload.addEventListener("loadend",d)),(i.cancelToken||i.signal)&&(h=b=>{g&&(r(!b||b.type?new px(null,n,g):b),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const v=WCe(i.url);if(v&&po.protocols.indexOf(v)===-1){r(new Pn("Unsupported protocol "+v+":",Pn.ERR_BAD_REQUEST,n));return}g.send(a||null)})},YCe=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const a=function(l){if(!i){i=!0,s();const h=l instanceof Error?l:this.reason;r.abort(h instanceof Pn?h:new px(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,a(new Pn(`timeout ${e} of ms exceeded`,Pn.ETIMEDOUT))},e);const s=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(l=>{l.unsubscribe?l.unsubscribe(a):l.removeEventListener("abort",a)}),n=null)};n.forEach(l=>l.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>ht.asap(s),u}},QCe=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},ZCe=async function*(n,e){for await(const t of JCe(n))yield*QCe(t,e)},JCe=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},Gq=(n,e,t,r)=>{const i=ZCe(n,e);let a=0,o,s=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:l,value:h}=await i.next();if(l){s(),u.close();return}let c=h.byteLength;if(t){let f=a+=c;t(f)}u.enqueue(new Uint8Array(h))}catch(l){throw s(l),l}},cancel(u){return s(u),i.return()}},{highWaterMark:2})},LR=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Dte=LR&&typeof ReadableStream=="function",eEe=LR&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Ate=(n,...e)=>{try{return!!n(...e)}catch{return!1}},tEe=Dte&&Ate(()=>{let n=!1;const e=new Request(po.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Xq=64*1024,R6=Dte&&Ate(()=>ht.isReadableStream(new Response("").body)),kN={stream:R6&&(n=>n.body)};LR&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!kN[e]&&(kN[e]=ht.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Pn(`Response type '${e}' is not supported`,Pn.ERR_NOT_SUPPORT,r)})})})(new Response);const nEe=async n=>{if(n==null)return 0;if(ht.isBlob(n))return n.size;if(ht.isSpecCompliantForm(n))return(await new Request(po.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ht.isArrayBufferView(n)||ht.isArrayBuffer(n))return n.byteLength;if(ht.isURLSearchParams(n)&&(n=n+""),ht.isString(n))return(await eEe(n)).byteLength},rEe=async(n,e)=>{const t=ht.toFiniteNumber(n.getContentLength());return t??nEe(e)},iEe=LR&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:a,timeout:o,onDownloadProgress:s,onUploadProgress:u,responseType:l,headers:h,withCredentials:c="same-origin",fetchOptions:f}=Tte(n);l=l?(l+"").toLowerCase():"text";let d=YCe([i,a&&a.toAbortSignal()],o),p;const m=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let g;try{if(u&&tEe&&t!=="get"&&t!=="head"&&(g=await rEe(h,r))!==0){let x=new Request(e,{method:"POST",body:r,duplex:"half"}),S;if(ht.isFormData(r)&&(S=x.headers.get("content-type"))&&h.setContentType(S),x.body){const[E,A]=qq(g,AN(Vq(u)));r=Gq(x.body,Xq,E,A)}}ht.isString(c)||(c=c?"include":"omit");const y="credentials"in Request.prototype;p=new Request(e,{...f,signal:d,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:y?c:void 0});let v=await fetch(p);const b=R6&&(l==="stream"||l==="response");if(R6&&(s||b&&m)){const x={};["status","statusText","headers"].forEach(k=>{x[k]=v[k]});const S=ht.toFiniteNumber(v.headers.get("content-length")),[E,A]=s&&qq(S,AN(Vq(s),!0))||[];v=new Response(Gq(v.body,Xq,E,()=>{A&&A(),m&&m()}),x)}l=l||"text";let w=await kN[ht.findKey(kN,l)||"text"](v,n);return!b&&m&&m(),await new Promise((x,S)=>{Cte(x,S,{data:w,headers:Tu.from(v.headers),status:v.status,statusText:v.statusText,config:n,request:p})})}catch(y){throw m&&m(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new Pn("Network Error",Pn.ERR_NETWORK,n,p),{cause:y.cause||y}):Pn.from(y,y&&y.code,n,p)}}),I6={http:bCe,xhr:KCe,fetch:iEe};ht.forEach(I6,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Kq=n=>`- ${n}`,aEe=n=>ht.isFunction(n)||n===null||n===!1,kte={getAdapter:n=>{n=ht.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let a=0;a<e;a++){t=n[a];let o;if(r=t,!aEe(t)&&(r=I6[(o=String(t)).toLowerCase()],r===void 0))throw new Pn(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+a]=r}if(!r){const a=Object.entries(i).map(([s,u])=>`adapter ${s} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?a.length>1?`since :
`+a.map(Kq).join(`
`):" "+Kq(a[0]):"as no adapter specified";throw new Pn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:I6};function O5(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new px(null,n)}function Yq(n){return O5(n),n.headers=Tu.from(n.headers),n.data=N5.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),kte.getAdapter(n.adapter||cD.adapter)(n).then(function(r){return O5(n),r.data=N5.call(n,n.transformResponse,r),r.headers=Tu.from(r.headers),r},function(r){return Ste(r)||(O5(n),r&&r.response&&(r.response.data=N5.call(n,n.transformResponse,r.response),r.response.headers=Tu.from(r.response.headers))),Promise.reject(r)})}const Nte="1.8.4",MR={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{MR[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Qq={};MR.transitional=function(e,t,r){function i(a,o){return"[Axios v"+Nte+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return(a,o,s)=>{if(e===!1)throw new Pn(i(o," has been removed"+(t?" in "+t:"")),Pn.ERR_DEPRECATED);return t&&!Qq[o]&&(Qq[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,o,s):!0}};MR.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function sEe(n,e,t){if(typeof n!="object")throw new Pn("options must be an object",Pn.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const a=r[i],o=e[a];if(o){const s=n[a],u=s===void 0||o(s,a,n);if(u!==!0)throw new Pn("option "+a+" must be "+u,Pn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Pn("Unknown option "+a,Pn.ERR_BAD_OPTION)}}const t3={assertOptions:sEe,validators:MR},Jh=t3.validators;let $0=class{constructor(e){this.defaults=e,this.interceptors={request:new jq,response:new jq}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=n1(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&t3.assertOptions(r,{silentJSONParsing:Jh.transitional(Jh.boolean),forcedJSONParsing:Jh.transitional(Jh.boolean),clarifyTimeoutError:Jh.transitional(Jh.boolean)},!1),i!=null&&(ht.isFunction(i)?t.paramsSerializer={serialize:i}:t3.assertOptions(i,{encode:Jh.function,serialize:Jh.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),t3.assertOptions(t,{baseUrl:Jh.spelling("baseURL"),withXsrfToken:Jh.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&ht.merge(a.common,a[t.method]);a&&ht.forEach(["delete","get","head","post","put","patch","common"],p=>{delete a[p]}),t.headers=Tu.concat(o,a);const s=[];let u=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(u=u&&m.synchronous,s.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let h,c=0,f;if(!u){const p=[Yq.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,l),f=p.length,h=Promise.resolve(t);c<f;)h=h.then(p[c++],p[c++]);return h}f=s.length;let d=t;for(c=0;c<f;){const p=s[c++],m=s[c++];try{d=p(d)}catch(g){m.call(this,g);break}}try{h=Yq.call(this,d)}catch(p){return Promise.reject(p)}for(c=0,f=l.length;c<f;)h=h.then(l[c++],l[c++]);return h}getUri(e){e=n1(this.defaults,e);const t=Ete(e.baseURL,e.url,e.allowAbsoluteUrls);return wte(t,e.params,e.paramsSerializer)}};ht.forEach(["delete","get","head","options"],function(e){$0.prototype[e]=function(t,r){return this.request(n1(r||{},{method:e,url:t,data:(r||{}).data}))}});ht.forEach(["post","put","patch"],function(e){function t(r){return function(a,o,s){return this.request(n1(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}$0.prototype[e]=t(),$0.prototype[e+"Form"]=t(!0)});let oEe=class Ote{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{r.subscribe(s),a=s}).then(i);return o.cancel=function(){r.unsubscribe(a)},o},e(function(a,o,s){r.reason||(r.reason=new px(a,o,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Ote(function(i){e=i}),cancel:e}}};function uEe(n){return function(t){return n.apply(null,t)}}function lEe(n){return ht.isObject(n)&&n.isAxiosError===!0}const F6={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(F6).forEach(([n,e])=>{F6[e]=n});function Rte(n){const e=new $0(n),t=lte($0.prototype.request,e);return ht.extend(t,$0.prototype,e,{allOwnKeys:!0}),ht.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Rte(n1(n,i))},t}const hr=Rte(cD);hr.Axios=$0;hr.CanceledError=px;hr.CancelToken=oEe;hr.isCancel=Ste;hr.VERSION=Nte;hr.toFormData=PR;hr.AxiosError=Pn;hr.Cancel=hr.CanceledError;hr.all=function(e){return Promise.all(e)};hr.spread=uEe;hr.isAxiosError=lEe;hr.mergeConfig=n1;hr.AxiosHeaders=Tu;hr.formToJSON=n=>_te(ht.isHTMLForm(n)?new FormData(n):n);hr.getAdapter=kte.getAdapter;hr.HttpStatusCode=F6;hr.default=hr;const{Axios:vZe,AxiosError:bZe,CanceledError:wZe,isCancel:xZe,CancelToken:_Ze,VERSION:SZe,all:CZe,Cancel:EZe,isAxiosError:TZe,spread:DZe,toFormData:AZe,AxiosHeaders:kZe,HttpStatusCode:NZe,formToJSON:OZe,getAdapter:RZe,mergeConfig:IZe}=hr,UR={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid rosybrown",boxShadow:24,pt:2,px:4,pb:3,color:"rosybrown"},Ite={position:"absolute",top:"4%",right:"3%",color:"rosybrown"};class KS extends Error{}KS.prototype.name="InvalidTokenError";function cEe(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function hEe(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return cEe(e)}catch{return atob(e)}}function Fte(n,e){if(typeof n!="string")throw new KS("Invalid token specified: must be a string");e||(e={});const t=e.header===!0?0:1,r=n.split(".")[t];if(typeof r!="string")throw new KS(`Invalid token specified: missing part #${t+1}`);let i;try{i=hEe(r)}catch(a){throw new KS(`Invalid token specified: invalid base64 for part #${t+1} (${a.message})`)}try{return JSON.parse(i)}catch(a){throw new KS(`Invalid token specified: invalid json for part #${t+1} (${a.message})`)}}const r1=sessionStorage.getItem("userToken"),fEe=(()=>{const n=r1;if(n)try{return Fte(n).userId}catch(e){return console.error("Invalid token",e),null}return null})(),dEe=()=>{const[n,e]=pe.useState(!0),[t,r]=pe.useState({email:null,phone:null}),i=pe.useRef(null),a=pe.useRef(null),o=pe.useRef(null),s=pe.useRef(null),u=()=>{var c;const h=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return(c=o.current)!=null&&c.value?h.test(o.current.value)?(r(f=>({...f,email:null})),!0):(r(f=>({...f,email:"Invalid email address."})),!1):!0},l=async h=>{var f,d,p,m;if(h.preventDefault(),!u()){alert("  ");return}try{await hr.put(`http://localhost:5077/api/user/update-profile/${fEe}`,{FirstName:(f=i.current)==null?void 0:f.value,LastName:(d=a.current)==null?void 0:d.value,Email:(p=o.current)==null?void 0:p.value,Password:(m=s.current)==null?void 0:m.value},{headers:{Authorization:`Bearer ${r1}`}}),e(!1)}catch(g){g.status==404&&alert("user don't found ")}};return Ie.jsx(Ie.Fragment,{children:Ie.jsx(uD,{open:n,children:Ie.jsx(xl,{sx:UR,children:Ie.jsxs("form",{onSubmit:l,style:{direction:"ltr"},children:[Ie.jsx(t1,{variant:"h5",sx:{color:"rosybrown",margin:"10px",fontWeight:"bold",textAlign:"center"},children:"Update"}),Ie.jsx(Ef,{label:"firstName",variant:"filled",margin:"normal",fullWidth:!0,inputRef:i}),Ie.jsx(Ef,{label:"lastName",variant:"filled",margin:"normal",fullWidth:!0,inputRef:a}),Ie.jsx(Ef,{label:"email",variant:"filled",margin:"normal",fullWidth:!0,type:"email",inputRef:o}),t.email&&Ie.jsx("p",{style:{color:"red"},children:t.email}),Ie.jsx(Ef,{label:"password",variant:"filled",margin:"normal",fullWidth:!0,type:"password",inputRef:s}),Ie.jsx(Go,{sx:{backgroundColor:"rosybrown"},variant:"contained",fullWidth:!0,type:"submit",children:"Save Change"})]})})})})},pEe=()=>{const[n,e]=pe.useState(!1);return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(xl,{sx:Ite,children:Ie.jsx(rte,{container:!0,children:Ie.jsxs(xl,{sx:{display:"flex",marginTop:"4vh",marginRight:"20px"},children:[Ie.jsx(Go,{style:{color:"rosybrown",border:"2px solid rosybrown"},sx:{marginLeft:"30px"},variant:"outlined",onClick:()=>e(!n),children:"Update"}),Ie.jsx(Go,{style:{color:"rosybrown",border:"2px solid rosybrown"},sx:{marginLeft:"35px"},variant:"outlined",children:"logout"})]})})}),n&&Ie.jsx(dEe,{})]})},Pte=()=>{const n=sR();return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx("div",{children:"HomePage"}),Ie.jsx(pEe,{}),Ie.jsx("hr",{}),Ie.jsx(Go,{onClick:()=>{n("/createInvitation")},children:" "}),Ie.jsx("hr",{}),Ie.jsx(Go,{onClick:()=>{n("/MyCompletedInvitation")},children:" "}),Ie.jsx("hr",{})]})},gEe=TR(Ie.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),mEe=({status:n,setHideBtns:e,handleCloseModal:t})=>{const[r,i]=pe.useState(!0),a=pe.useRef(null),o=pe.useRef(null),s=pe.useRef(null),u=pe.useRef(null),l=sR(),h=async c=>{var f,d,p,m;c.preventDefault();try{let g=null;n=="register"?(console.log("register****"),g=await hr.post("http://localhost:5077/api/user/register",{FirstName:(f=s.current)==null?void 0:f.value,LastName:(d=u.current)==null?void 0:d.value,Email:(p=o.current)==null?void 0:p.value,Password:a.current.value,Role:"user",UpdatedAt:new Date})):(console.log("login****"),g=await hr.post("http://localhost:5077/api/user/login",{Email:(m=o.current)==null?void 0:m.value,Password:a.current.value})),sessionStorage.setItem("userToken",g.data),i(!1),e(!0),l("/homePage")}catch(g){g.status===400||g.status===422&&n=="register"?alert("user already sign up "):g.status==401&&n=="login"&&alert("user is not register "),t()}};return Ie.jsx(Ie.Fragment,{children:Ie.jsx(uD,{open:r,children:Ie.jsxs(xl,{sx:UR,children:[Ie.jsx(Qwe,{onClick:()=>t(),sx:{position:"absolute",top:13,right:13},children:Ie.jsx(gEe,{})}),Ie.jsxs("form",{onSubmit:h,style:{direction:"ltr"},children:[Ie.jsx(t1,{variant:"h5",sx:{color:"rosybrown",margin:"20px",fontWeight:"bold",textAlign:"center"},children:n==="login"?"sign in":"sign up"}),n=="login"?Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(Ef,{label:"Email",variant:"filled",margin:"normal",type:"email",fullWidth:!0,inputRef:o,required:!0}),Ie.jsx(Ef,{label:"Password",variant:"filled",margin:"normal",type:"password",fullWidth:!0,inputRef:a,required:!0})]}):Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(Ef,{label:"Email",variant:"filled",margin:"normal",type:"email",fullWidth:!0,inputRef:o,required:!0}),Ie.jsx(Ef,{label:"Password",variant:"filled",margin:"normal",type:"password",fullWidth:!0,inputRef:a,required:!0}),Ie.jsx(Ef,{label:"FisrtName",variant:"filled",margin:"normal",type:"text",fullWidth:!0,inputRef:s,required:!0}),Ie.jsx(Ef,{label:"LastName",variant:"filled",margin:"normal",type:"text",fullWidth:!0,inputRef:u,required:!0})]}),Ie.jsx(Go,{sx:{marginTop:"2px",backgroundColor:"rosybrown"},fullWidth:!0,variant:"contained",type:"submit",children:""})]})]})})})},yEe=()=>{const[n,e]=pe.useState(null),[t,r]=pe.useState(!1),i=o=>{e(o)},a=()=>{e(null)};return Ie.jsxs(Ie.Fragment,{children:[t?Ie.jsx(Pte,{}):Ie.jsx(Ie.Fragment,{children:Ie.jsx(xl,{sx:Ite,children:Ie.jsx(rte,{container:!0,children:Ie.jsxs(xl,{sx:{display:"flex",marginTop:"4vh",marginRight:"20px"},children:[Ie.jsx(Go,{style:{color:"rosybrown",border:"2px solid rosybrown"},sx:{marginLeft:"50px"},variant:"outlined",onClick:()=>i("login"),children:"sign in"}),Ie.jsx(Go,{style:{color:"rosybrown",border:"2px solid rosybrown"},sx:{marginLeft:"30px"},variant:"outlined",onClick:()=>i("register"),children:"sign up"})]})})})}),n&&Ie.jsx(mEe,{status:n,setHideBtns:r,handleCloseModal:a})]})},vEe=({fileName:n})=>{const[e,t]=pe.useState(null);return pe.useEffect(()=>{console.log("inshoeTemplte useEffect 1"),(async()=>{try{console.log("fileName"),console.log(n);const i=await hr.get(`http://localhost:5077/api/upload/download-url/${n}`);console.log("inshoeTemplte useEffect 2"),console.log("******************************"),console.log(i.data),console.log("******************************"),t(i.data)}catch(i){console.error("  -URL:",i),alert(`  -URL: ${i}`)}})()},[n]),Ie.jsx("div",{children:Ie.jsx(ete,{sx:{width:350,boxShadow:4,borderRadius:3,overflow:"hidden",position:"relative"},children:e?Ie.jsx(Ie.Fragment,{children:Ie.jsx(tte,{component:"img",height:"200",image:e,alt:n,sx:{objectFit:"contain",paddingTop:"25px"}})}):Ie.jsx(t1,{variant:"body1",align:"center",sx:{padding:2},children:" ..."})})})};var R5={exports:{}},Zq;function bEe(){return Zq||(Zq=1,function(n){var e=function(t){var r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(z,j,M){z[j]=M.value},o,s=typeof Symbol=="function"?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function c(z,j,M){return Object.defineProperty(z,j,{value:M,enumerable:!0,configurable:!0,writable:!0}),z[j]}try{c({},"")}catch{c=function(j,M,q){return j[M]=q}}function f(z,j,M,q){var H=j&&j.prototype instanceof b?j:b,K=Object.create(H.prototype),Z=new B(q||[]);return a(K,"_invoke",{value:F(z,M,Z)}),K}t.wrap=f;function d(z,j,M){try{return{type:"normal",arg:z.call(j,M)}}catch(q){return{type:"throw",arg:q}}}var p="suspendedStart",m="suspendedYield",g="executing",y="completed",v={};function b(){}function w(){}function x(){}var S={};c(S,u,function(){return this});var E=Object.getPrototypeOf,A=E&&E(E(W([])));A&&A!==r&&i.call(A,u)&&(S=A);var k=x.prototype=b.prototype=Object.create(S);w.prototype=x,a(k,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=c(x,h,"GeneratorFunction");function T(z){["next","throw","return"].forEach(function(j){c(z,j,function(M){return this._invoke(j,M)})})}t.isGeneratorFunction=function(z){var j=typeof z=="function"&&z.constructor;return j?j===w||(j.displayName||j.name)==="GeneratorFunction":!1},t.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,x):(z.__proto__=x,c(z,h,"GeneratorFunction")),z.prototype=Object.create(k),z},t.awrap=function(z){return{__await:z}};function O(z,j){function M(K,Z,J,X){var ae=d(z[K],z,Z);if(ae.type==="throw")X(ae.arg);else{var ie=ae.arg,ce=ie.value;return ce&&typeof ce=="object"&&i.call(ce,"__await")?j.resolve(ce.__await).then(function(ge){M("next",ge,J,X)},function(ge){M("throw",ge,J,X)}):j.resolve(ce).then(function(ge){ie.value=ge,J(ie)},function(ge){return M("throw",ge,J,X)})}}var q;function H(K,Z){function J(){return new j(function(X,ae){M(K,Z,X,ae)})}return q=q?q.then(J,J):J()}a(this,"_invoke",{value:H})}T(O.prototype),c(O.prototype,l,function(){return this}),t.AsyncIterator=O,t.async=function(z,j,M,q,H){H===void 0&&(H=Promise);var K=new O(f(z,j,M,q),H);return t.isGeneratorFunction(j)?K:K.next().then(function(Z){return Z.done?Z.value:K.next()})};function F(z,j,M){var q=p;return function(K,Z){if(q===g)throw new Error("Generator is already running");if(q===y){if(K==="throw")throw Z;return Y()}for(M.method=K,M.arg=Z;;){var J=M.delegate;if(J){var X=I(J,M);if(X){if(X===v)continue;return X}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(q===p)throw q=y,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);q=g;var ae=d(z,j,M);if(ae.type==="normal"){if(q=M.done?y:m,ae.arg===v)continue;return{value:ae.arg,done:M.done}}else ae.type==="throw"&&(q=y,M.method="throw",M.arg=ae.arg)}}}function I(z,j){var M=j.method,q=z.iterator[M];if(q===o)return j.delegate=null,M==="throw"&&z.iterator.return&&(j.method="return",j.arg=o,I(z,j),j.method==="throw")||M!=="return"&&(j.method="throw",j.arg=new TypeError("The iterator does not provide a '"+M+"' method")),v;var H=d(q,z.iterator,j.arg);if(H.type==="throw")return j.method="throw",j.arg=H.arg,j.delegate=null,v;var K=H.arg;if(!K)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,v;if(K.done)j[z.resultName]=K.value,j.next=z.nextLoc,j.method!=="return"&&(j.method="next",j.arg=o);else return K;return j.delegate=null,v}T(k),c(k,h,"Generator"),c(k,u,function(){return this}),c(k,"toString",function(){return"[object Generator]"});function R(z){var j={tryLoc:z[0]};1 in z&&(j.catchLoc=z[1]),2 in z&&(j.finallyLoc=z[2],j.afterLoc=z[3]),this.tryEntries.push(j)}function U(z){var j=z.completion||{};j.type="normal",delete j.arg,z.completion=j}function B(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(R,this),this.reset(!0)}t.keys=function(z){var j=Object(z),M=[];for(var q in j)M.push(q);return M.reverse(),function H(){for(;M.length;){var K=M.pop();if(K in j)return H.value=K,H.done=!1,H}return H.done=!0,H}};function W(z){if(z){var j=z[u];if(j)return j.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var M=-1,q=function H(){for(;++M<z.length;)if(i.call(z,M))return H.value=z[M],H.done=!1,H;return H.value=o,H.done=!0,H};return q.next=q}}return{next:Y}}t.values=W;function Y(){return{value:o,done:!0}}return B.prototype={constructor:B,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(U),!z)for(var j in this)j.charAt(0)==="t"&&i.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=o)},stop:function(){this.done=!0;var z=this.tryEntries[0],j=z.completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var j=this;function M(X,ae){return K.type="throw",K.arg=z,j.next=X,ae&&(j.method="next",j.arg=o),!!ae}for(var q=this.tryEntries.length-1;q>=0;--q){var H=this.tryEntries[q],K=H.completion;if(H.tryLoc==="root")return M("end");if(H.tryLoc<=this.prev){var Z=i.call(H,"catchLoc"),J=i.call(H,"finallyLoc");if(Z&&J){if(this.prev<H.catchLoc)return M(H.catchLoc,!0);if(this.prev<H.finallyLoc)return M(H.finallyLoc)}else if(Z){if(this.prev<H.catchLoc)return M(H.catchLoc,!0)}else if(J){if(this.prev<H.finallyLoc)return M(H.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(z,j){for(var M=this.tryEntries.length-1;M>=0;--M){var q=this.tryEntries[M];if(q.tryLoc<=this.prev&&i.call(q,"finallyLoc")&&this.prev<q.finallyLoc){var H=q;break}}H&&(z==="break"||z==="continue")&&H.tryLoc<=j&&j<=H.finallyLoc&&(H=null);var K=H?H.completion:{};return K.type=z,K.arg=j,H?(this.method="next",this.next=H.finallyLoc,v):this.complete(K)},complete:function(z,j){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&j&&(this.next=j),v},finish:function(z){for(var j=this.tryEntries.length-1;j>=0;--j){var M=this.tryEntries[j];if(M.finallyLoc===z)return this.complete(M.completion,M.afterLoc),U(M),v}},catch:function(z){for(var j=this.tryEntries.length-1;j>=0;--j){var M=this.tryEntries[j];if(M.tryLoc===z){var q=M.completion;if(q.type==="throw"){var H=q.arg;U(M)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(z,j,M){return this.delegate={iterator:W(z),resultName:j,nextLoc:M},this.method==="next"&&(this.arg=o),v}},t}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(R5)),R5.exports}var I5,Jq;function b9(){return Jq||(Jq=1,I5=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`),I5}var F5,eV;function Lte(){if(eV)return F5;eV=1;const n=b9();let e=0;return F5=({id:t,action:r,payload:i={}})=>{let a=t;return typeof a>"u"&&(a=n("Job",e),e+=1),{id:a,action:r,payload:i}},F5}var F_={},tV;function w9(){if(tV)return F_;tV=1;let n=!1;return F_.logging=n,F_.setLogging=e=>{n=e},F_.log=(...e)=>n?console.log.apply(this,e):null,F_}var P5,nV;function wEe(){if(nV)return P5;nV=1;const n=Lte(),{log:e}=w9(),t=b9();let r=0;return P5=()=>{const i=t("Scheduler",r),a={},o={};let s=[];r+=1;const u=()=>s.length,l=()=>Object.keys(a).length,h=()=>{if(s.length!==0){const m=Object.keys(a);for(let g=0;g<m.length;g+=1)if(typeof o[m[g]]>"u"){s[0](a[m[g]]);break}}},c=(m,g)=>new Promise((y,v)=>{const b=n({action:m,payload:g});s.push(async w=>{s.shift(),o[w.id]=b;try{y(await w[m].apply(this,[...g,b.id]))}catch(x){v(x)}finally{delete o[w.id],h()}}),e(`[${i}]: Add ${b.id} to JobQueue`),e(`[${i}]: JobQueue length=${s.length}`),h()});return{addWorker:m=>(a[m.id]=m,e(`[${i}]: Add ${m.id}`),e(`[${i}]: Number of workers=${l()}`),h(),m.id),addJob:async(m,...g)=>{if(l()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return c(m,g)},terminate:async()=>{Object.keys(a).forEach(async m=>{await a[m].terminate()}),s=[]},getQueueLen:u,getNumWorkers:l}},P5}function YS(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var L5,rV;function xEe(){return rV||(rV=1,L5=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof YS=="function"&&(e.type="node"),typeof n>"u"?e:e[n]}),L5}var M5,iV;function _Ee(){if(iV)return M5;iV=1;const e=xEe()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return M5=t=>{const r={...t};return["corePath","workerPath","langPath"].forEach(i=>{t[i]&&(r[i]=e(r[i]))}),r},M5}var U5,aV;function Mte(){return aV||(aV=1,U5={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),U5}const SEe="6.0.0",CEe={version:SEe};var B5,sV;function EEe(){return sV||(sV=1,B5={workerBlobURL:!0,logger:()=>{}}),B5}var z5,oV;function TEe(){if(oV)return z5;oV=1;const n=CEe.version;return z5={...EEe(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},z5}var W5,uV;function DEe(){return uV||(uV=1,W5=({workerPath:n,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(r))}else t=new Worker(n);return t}),W5}var j5,lV;function AEe(){return lV||(lV=1,j5=n=>{n.terminate()}),j5}var $5,cV;function kEe(){return cV||(cV=1,$5=(n,e)=>{n.onmessage=({data:t})=>{e(t)}}),$5}var q5,hV;function NEe(){return hV||(hV=1,q5=async(n,e)=>{n.postMessage(e)}),q5}var V5,fV;function OEe(){if(fV)return V5;fV=1;const n=t=>new Promise((r,i)=>{const a=new FileReader;a.onload=()=>{r(a.result)},a.onerror=({target:{error:{code:o}}})=>{i(Error(`File could not be read! Code=${o}`))},a.readAsArrayBuffer(t)}),e=async t=>{let r=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?r=atob(t.split(",")[1]).split("").map(i=>i.charCodeAt(0)):r=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(r=await e(t.src)),t.tagName==="VIDEO"&&(r=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(i=>{t.toBlob(async a=>{r=await n(a),i()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const i=await t.convertToBlob();r=await n(i)}else(t instanceof File||t instanceof Blob)&&(r=await n(t));return new Uint8Array(r)};return V5=e,V5}var H5,dV;function REe(){if(dV)return H5;dV=1;const n=TEe(),e=DEe(),t=AEe(),r=kEe(),i=NEe(),a=OEe();return H5={defaultOptions:n,spawnWorker:e,terminateWorker:t,onMessage:r,send:i,loadImage:a},H5}var G5,pV;function Ute(){if(pV)return G5;pV=1;const n=_Ee(),e=Lte(),{log:t}=w9(),r=b9(),i=Mte(),{defaultOptions:a,spawnWorker:o,terminateWorker:s,onMessage:u,loadImage:l,send:h}=REe();let c=0;return G5=async(f="eng",d=i.LSTM_ONLY,p={},m={})=>{const g=r("Worker",c),{logger:y,errorHandler:v,...b}=n({...a,...p}),w={},x=typeof f=="string"?f.split("+"):f;let S=d,E=m;const A=[i.DEFAULT,i.LSTM_ONLY].includes(d)&&!b.legacyCore;let k,T;const O=new Promise((ie,ce)=>{T=ie,k=ce}),F=ie=>{k(ie.message)};let I=o(b);I.onerror=F,c+=1;const R=({id:ie,action:ce,payload:ge})=>new Promise((Ce,Ee)=>{t(`[${g}]: Start ${ie}, action=${ce}`);const G=`${ce}-${ie}`;w[G]={resolve:Ce,reject:Ee},h(I,{workerId:g,jobId:ie,action:ce,payload:ge})}),U=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),B=ie=>R(e({id:ie,action:"load",payload:{options:{lstmOnly:A,corePath:b.corePath,logging:b.logging}}})),W=(ie,ce,ge)=>R(e({id:ge,action:"FS",payload:{method:"writeFile",args:[ie,ce]}})),Y=(ie,ce)=>R(e({id:ce,action:"FS",payload:{method:"readFile",args:[ie,{encoding:"utf8"}]}})),z=(ie,ce)=>R(e({id:ce,action:"FS",payload:{method:"unlink",args:[ie]}})),j=(ie,ce,ge)=>R(e({id:ge,action:"FS",payload:{method:ie,args:ce}})),M=(ie,ce)=>R(e({id:ce,action:"loadLanguage",payload:{langs:ie,options:{langPath:b.langPath,dataPath:b.dataPath,cachePath:b.cachePath,cacheMethod:b.cacheMethod,gzip:b.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(S)&&!b.legacyLang}}})),q=(ie,ce,ge,Ce)=>R(e({id:Ce,action:"initialize",payload:{langs:ie,oem:ce,config:ge}})),H=(ie="eng",ce,ge,Ce)=>{if(A&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(ce))throw Error("Legacy model requested but code missing.");const Ee=ce||S;S=Ee;const G=ge||E;E=G;const ye=(typeof ie=="string"?ie.split("+"):ie).filter(le=>!x.includes(le));return x.push(...ye),ye.length>0?M(ye,Ce).then(()=>q(ie,Ee,G,Ce)):q(ie,Ee,G,Ce)},K=(ie={},ce)=>R(e({id:ce,action:"setParameters",payload:{params:ie}})),Z=async(ie,ce={},ge={text:!0},Ce)=>R(e({id:Ce,action:"recognize",payload:{image:await l(ie),options:ce,output:ge}})),J=async(ie,ce)=>{if(A)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return R(e({id:ce,action:"detect",payload:{image:await l(ie)}}))},X=async()=>(I!==null&&(s(I),I=null),Promise.resolve());u(I,({workerId:ie,jobId:ce,status:ge,action:Ce,data:Ee})=>{const G=`${Ce}-${ce}`;if(ge==="resolve")t(`[${ie}]: Complete ${ce}`),w[G].resolve({jobId:ce,data:Ee}),delete w[G];else if(ge==="reject")if(w[G].reject(Ee),delete w[G],Ce==="load"&&k(Ee),v)v(Ee);else throw Error(Ee);else ge==="progress"&&y({...Ee,userJobId:ce})});const ae={id:g,worker:I,load:U,writeText:W,readText:Y,removeFile:z,FS:j,reinitialize:H,setParameters:K,recognize:Z,detect:J,terminate:X};return B().then(()=>M(f)).then(()=>q(f,d,m)).then(()=>T(ae)).catch(()=>{}),O},G5}var X5,gV;function IEe(){if(gV)return X5;gV=1;const n=Ute();return X5={recognize:async(r,i,a)=>{const o=await n(i,1,a);return o.recognize(r).finally(async()=>{await o.terminate()})},detect:async(r,i)=>{const a=await n("osd",0,i);return a.detect(r).finally(async()=>{await a.terminate()})}},X5}var K5,mV;function FEe(){return mV||(mV=1,K5={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),K5}var Y5,yV;function PEe(){return yV||(yV=1,Y5={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Y5}var Q5,vV;function LEe(){if(vV)return Q5;vV=1,bEe();const n=wEe(),e=Ute(),t=IEe(),r=FEe(),i=Mte(),a=PEe(),{setLogging:o}=w9();return Q5={languages:r,OEM:i,PSM:a,createScheduler:n,createWorker:e,setLogging:o,...t},Q5}var MEe=LEe();const UEe=Fp(MEe);var $l={},x9="1.13.7",bV=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},BR=Array.prototype,_9=Object.prototype,wV=typeof Symbol<"u"?Symbol.prototype:null,BEe=BR.push,hD=BR.slice,HC=_9.toString,zEe=_9.hasOwnProperty,Bte=typeof ArrayBuffer<"u",WEe=typeof DataView<"u",jEe=Array.isArray,xV=Object.keys,_V=Object.create,SV=Bte&&ArrayBuffer.isView,$Ee=isNaN,qEe=isFinite,zte=!{toString:null}.propertyIsEnumerable("toString"),CV=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],VEe=Math.pow(2,53)-1;function Xo(n,e){return e=e==null?n.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),r=Array(t),i=0;i<t;i++)r[i]=arguments[i+e];switch(e){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r);case 2:return n.call(this,arguments[0],arguments[1],r)}var a=Array(e+1);for(i=0;i<e;i++)a[i]=arguments[i];return a[e]=r,n.apply(this,a)}}function oy(n){var e=typeof n;return e==="function"||e==="object"&&!!n}function Wte(n){return n===null}function S9(n){return n===void 0}function C9(n){return n===!0||n===!1||HC.call(n)==="[object Boolean]"}function jte(n){return!!(n&&n.nodeType===1)}function xo(n){var e="[object "+n+"]";return function(t){return HC.call(t)===e}}const zR=xo("String"),E9=xo("Number"),$te=xo("Date"),qte=xo("RegExp"),Vte=xo("Error"),T9=xo("Symbol"),D9=xo("ArrayBuffer");var Hte=xo("Function"),HEe=bV.document&&bV.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof HEe!="function"&&(Hte=function(n){return typeof n=="function"||!1});const wo=Hte,Gte=xo("Object");var Xte=WEe&&(!/\[native code\]/.test(String(DataView))||Gte(new DataView(new ArrayBuffer(8)))),A9=typeof Map<"u"&&Gte(new Map),GEe=xo("DataView");function XEe(n){return n!=null&&wo(n.getInt8)&&D9(n.buffer)}const GC=Xte?XEe:GEe,uy=jEe||xo("Array");function ly(n,e){return n!=null&&zEe.call(n,e)}var P6=xo("Arguments");(function(){P6(arguments)||(P6=function(n){return ly(n,"callee")})})();const WR=P6;function Kte(n){return!T9(n)&&qEe(n)&&!isNaN(parseFloat(n))}function k9(n){return E9(n)&&$Ee(n)}function N9(n){return function(){return n}}function Yte(n){return function(e){var t=n(e);return typeof t=="number"&&t>=0&&t<=VEe}}function Qte(n){return function(e){return e==null?void 0:e[n]}}const NN=Qte("byteLength"),KEe=Yte(NN);var YEe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function QEe(n){return SV?SV(n)&&!GC(n):KEe(n)&&YEe.test(HC.call(n))}const O9=Bte?QEe:N9(!1),Nu=Qte("length");function ZEe(n){for(var e={},t=n.length,r=0;r<t;++r)e[n[r]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,n.push(i)}}}function Zte(n,e){e=ZEe(e);var t=CV.length,r=n.constructor,i=wo(r)&&r.prototype||_9,a="constructor";for(ly(n,a)&&!e.contains(a)&&e.push(a);t--;)a=CV[t],a in n&&n[a]!==i[a]&&!e.contains(a)&&e.push(a)}function ns(n){if(!oy(n))return[];if(xV)return xV(n);var e=[];for(var t in n)ly(n,t)&&e.push(t);return zte&&Zte(n,e),e}function Jte(n){if(n==null)return!0;var e=Nu(n);return typeof e=="number"&&(uy(n)||zR(n)||WR(n))?e===0:Nu(ns(n))===0}function R9(n,e){var t=ns(e),r=t.length;if(n==null)return!r;for(var i=Object(n),a=0;a<r;a++){var o=t[a];if(e[o]!==i[o]||!(o in i))return!1}return!0}function Mr(n){if(n instanceof Mr)return n;if(!(this instanceof Mr))return new Mr(n);this._wrapped=n}Mr.VERSION=x9;Mr.prototype.value=function(){return this._wrapped};Mr.prototype.valueOf=Mr.prototype.toJSON=Mr.prototype.value;Mr.prototype.toString=function(){return String(this._wrapped)};function EV(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,NN(n))}var TV="[object DataView]";function L6(n,e,t,r){if(n===e)return n!==0||1/n===1/e;if(n==null||e==null)return!1;if(n!==n)return e!==e;var i=typeof n;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:ene(n,e,t,r)}function ene(n,e,t,r){n instanceof Mr&&(n=n._wrapped),e instanceof Mr&&(e=e._wrapped);var i=HC.call(n);if(i!==HC.call(e))return!1;if(Xte&&i=="[object Object]"&&GC(n)){if(!GC(e))return!1;i=TV}switch(i){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:+n==0?1/+n===1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return wV.valueOf.call(n)===wV.valueOf.call(e);case"[object ArrayBuffer]":case TV:return ene(EV(n),EV(e),t,r)}var a=i==="[object Array]";if(!a&&O9(n)){var o=NN(n);if(o!==NN(e))return!1;if(n.buffer===e.buffer&&n.byteOffset===e.byteOffset)return!0;a=!0}if(!a){if(typeof n!="object"||typeof e!="object")return!1;var s=n.constructor,u=e.constructor;if(s!==u&&!(wo(s)&&s instanceof s&&wo(u)&&u instanceof u)&&"constructor"in n&&"constructor"in e)return!1}t=t||[],r=r||[];for(var l=t.length;l--;)if(t[l]===n)return r[l]===e;if(t.push(n),r.push(e),a){if(l=n.length,l!==e.length)return!1;for(;l--;)if(!L6(n[l],e[l],t,r))return!1}else{var h=ns(n),c;if(l=h.length,ns(e).length!==l)return!1;for(;l--;)if(c=h[l],!(ly(e,c)&&L6(n[c],e[c],t,r)))return!1}return t.pop(),r.pop(),!0}function tne(n,e){return L6(n,e)}function gx(n){if(!oy(n))return[];var e=[];for(var t in n)e.push(t);return zte&&Zte(n,e),e}function I9(n){var e=Nu(n);return function(t){if(t==null)return!1;var r=gx(t);if(Nu(r))return!1;for(var i=0;i<e;i++)if(!wo(t[n[i]]))return!1;return n!==ine||!wo(t[F9])}}var F9="forEach",nne="has",P9=["clear","delete"],rne=["get",nne,"set"],JEe=P9.concat(F9,rne),ine=P9.concat(rne),eTe=["add"].concat(P9,F9,nne);const ane=A9?I9(JEe):xo("Map"),sne=A9?I9(ine):xo("WeakMap"),one=A9?I9(eTe):xo("Set"),une=xo("WeakSet");function T1(n){for(var e=ns(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=n[e[i]];return r}function lne(n){for(var e=ns(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=[e[i],n[e[i]]];return r}function L9(n){for(var e={},t=ns(n),r=0,i=t.length;r<i;r++)e[n[t[r]]]=t[r];return e}function XC(n){var e=[];for(var t in n)wo(n[t])&&e.push(t);return e.sort()}function M9(n,e){return function(t){var r=arguments.length;if(e&&(t=Object(t)),r<2||t==null)return t;for(var i=1;i<r;i++)for(var a=arguments[i],o=n(a),s=o.length,u=0;u<s;u++){var l=o[u];(!e||t[l]===void 0)&&(t[l]=a[l])}return t}}const U9=M9(gx),$w=M9(ns),B9=M9(gx,!0);function tTe(){return function(){}}function cne(n){if(!oy(n))return{};if(_V)return _V(n);var e=tTe();e.prototype=n;var t=new e;return e.prototype=null,t}function hne(n,e){var t=cne(n);return e&&$w(t,e),t}function fne(n){return oy(n)?uy(n)?n.slice():U9({},n):n}function dne(n,e){return e(n),n}function z9(n){return uy(n)?n:[n]}Mr.toPath=z9;function fD(n){return Mr.toPath(n)}function W9(n,e){for(var t=e.length,r=0;r<t;r++){if(n==null)return;n=n[e[r]]}return t?n:void 0}function j9(n,e,t){var r=W9(n,fD(e));return S9(r)?t:r}function pne(n,e){e=fD(e);for(var t=e.length,r=0;r<t;r++){var i=e[r];if(!ly(n,i))return!1;n=n[i]}return!!t}function jR(n){return n}function i1(n){return n=$w({},n),function(e){return R9(e,n)}}function $R(n){return n=fD(n),function(e){return W9(e,n)}}function dD(n,e,t){if(e===void 0)return n;switch(t??3){case 1:return function(r){return n.call(e,r)};case 3:return function(r,i,a){return n.call(e,r,i,a)};case 4:return function(r,i,a,o){return n.call(e,r,i,a,o)}}return function(){return n.apply(e,arguments)}}function gne(n,e,t){return n==null?jR:wo(n)?dD(n,e,t):oy(n)&&!uy(n)?i1(n):$R(n)}function qR(n,e){return gne(n,e,1/0)}Mr.iteratee=qR;function Fu(n,e,t){return Mr.iteratee!==qR?Mr.iteratee(n,e):gne(n,e,t)}function mne(n,e,t){e=Fu(e,t);for(var r=ns(n),i=r.length,a={},o=0;o<i;o++){var s=r[o];a[s]=e(n[s],s,n)}return a}function $9(){}function yne(n){return n==null?$9:function(e){return j9(n,e)}}function vne(n,e,t){var r=Array(Math.max(0,n));e=dD(e,t,1);for(var i=0;i<n;i++)r[i]=e(i);return r}function ON(n,e){return e==null&&(e=n,n=0),n+Math.floor(Math.random()*(e-n+1))}const qw=Date.now||function(){return new Date().getTime()};function bne(n){var e=function(a){return n[a]},t="(?:"+ns(n).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(a){return a=a==null?"":""+a,r.test(a)?a.replace(i,e):a}}const wne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},xne=bne(wne),nTe=L9(wne),_ne=bne(nTe),Sne=Mr.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Z5=/(.)^/,rTe={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},iTe=/\\|'|\r|\n|\u2028|\u2029/g;function aTe(n){return"\\"+rTe[n]}var sTe=/^\s*(\w|\$)+\s*$/;function Cne(n,e,t){!e&&t&&(e=t),e=B9({},e,Mr.templateSettings);var r=RegExp([(e.escape||Z5).source,(e.interpolate||Z5).source,(e.evaluate||Z5).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(r,function(l,h,c,f,d){return a+=n.slice(i,d).replace(iTe,aTe),i=d+l.length,h?a+=`'+
((__t=(`+h+`))==null?'':_.escape(__t))+
'`:c?a+=`'+
((__t=(`+c+`))==null?'':__t)+
'`:f&&(a+=`';
`+f+`
__p+='`),l}),a+=`';
`;var o=e.variable;if(o){if(!sTe.test(o))throw new Error("variable is not a bare identifier: "+o)}else a=`with(obj||{}){
`+a+`}
`,o="obj";a=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+a+`return __p;
`;var s;try{s=new Function(o,"_",a)}catch(l){throw l.source=a,l}var u=function(l){return s.call(this,l,Mr)};return u.source="function("+o+`){
`+a+"}",u}function Ene(n,e,t){e=fD(e);var r=e.length;if(!r)return wo(t)?t.call(n):t;for(var i=0;i<r;i++){var a=n==null?void 0:n[e[i]];a===void 0&&(a=t,i=r),n=wo(a)?a.call(n):a}return n}var oTe=0;function Tne(n){var e=++oTe+"";return n?n+e:e}function Dne(n){var e=Mr(n);return e._chain=!0,e}function Ane(n,e,t,r,i){if(!(r instanceof e))return n.apply(t,i);var a=cne(n.prototype),o=n.apply(a,i);return oy(o)?o:a}var D1=Xo(function(n,e){var t=D1.placeholder,r=function(){for(var i=0,a=e.length,o=Array(a),s=0;s<a;s++)o[s]=e[s]===t?arguments[i++]:e[s];for(;i<arguments.length;)o.push(arguments[i++]);return Ane(n,r,this,this,o)};return r});D1.placeholder=Mr;const q9=Xo(function(n,e,t){if(!wo(n))throw new TypeError("Bind must be called on a function");var r=Xo(function(i){return Ane(n,r,e,this,t.concat(i))});return r}),Tl=Yte(Nu);function A1(n,e,t,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(n);for(var i=r.length,a=0,o=Nu(n);a<o;a++){var s=n[a];if(Tl(s)&&(uy(s)||WR(s)))if(e>1)A1(s,e-1,t,r),i=r.length;else for(var u=0,l=s.length;u<l;)r[i++]=s[u++];else t||(r[i++]=s)}return r}const kne=Xo(function(n,e){e=A1(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var r=e[t];n[r]=q9(n[r],n)}return n});function Nne(n,e){var t=function(r){var i=t.cache,a=""+(e?e.apply(this,arguments):r);return ly(i,a)||(i[a]=n.apply(this,arguments)),i[a]};return t.cache={},t}const V9=Xo(function(n,e,t){return setTimeout(function(){return n.apply(null,t)},e)}),One=D1(V9,Mr,1);function Rne(n,e,t){var r,i,a,o,s=0;t||(t={});var u=function(){s=t.leading===!1?0:qw(),r=null,o=n.apply(i,a),r||(i=a=null)},l=function(){var h=qw();!s&&t.leading===!1&&(s=h);var c=e-(h-s);return i=this,a=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=h,o=n.apply(i,a),r||(i=a=null)):!r&&t.trailing!==!1&&(r=setTimeout(u,c)),o};return l.cancel=function(){clearTimeout(r),s=0,r=i=a=null},l}function Ine(n,e,t){var r,i,a,o,s,u=function(){var h=qw()-i;e>h?r=setTimeout(u,e-h):(r=null,t||(o=n.apply(s,a)),r||(a=s=null))},l=Xo(function(h){return s=this,a=h,i=qw(),r||(r=setTimeout(u,e),t&&(o=n.apply(s,a))),o});return l.cancel=function(){clearTimeout(r),r=a=s=null},l}function Fne(n,e){return D1(e,n)}function VR(n){return function(){return!n.apply(this,arguments)}}function Pne(){var n=arguments,e=n.length-1;return function(){for(var t=e,r=n[e].apply(this,arguments);t--;)r=n[t].call(this,r);return r}}function Lne(n,e){return function(){if(--n<1)return e.apply(this,arguments)}}function H9(n,e){var t;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=null),t}}const Mne=D1(H9,2);function G9(n,e,t){e=Fu(e,t);for(var r=ns(n),i,a=0,o=r.length;a<o;a++)if(i=r[a],e(n[i],i,n))return i}function Une(n){return function(e,t,r){t=Fu(t,r);for(var i=Nu(e),a=n>0?0:i-1;a>=0&&a<i;a+=n)if(t(e[a],a,e))return a;return-1}}const HR=Une(1),X9=Une(-1);function K9(n,e,t,r){t=Fu(t,r,1);for(var i=t(e),a=0,o=Nu(n);a<o;){var s=Math.floor((a+o)/2);t(n[s])<i?a=s+1:o=s}return a}function Bne(n,e,t){return function(r,i,a){var o=0,s=Nu(r);if(typeof a=="number")n>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(t&&a&&s)return a=t(r,i),r[a]===i?a:-1;if(i!==i)return a=e(hD.call(r,o,s),k9),a>=0?a+o:-1;for(a=n>0?o:s-1;a>=0&&a<s;a+=n)if(r[a]===i)return a;return-1}}const Y9=Bne(1,HR,K9),zne=Bne(-1,X9);function KC(n,e,t){var r=Tl(n)?HR:G9,i=r(n,e,t);if(i!==void 0&&i!==-1)return n[i]}function Wne(n,e){return KC(n,i1(e))}function dh(n,e,t){e=dD(e,t);var r,i;if(Tl(n))for(r=0,i=n.length;r<i;r++)e(n[r],r,n);else{var a=ns(n);for(r=0,i=a.length;r<i;r++)e(n[a[r]],a[r],n)}return n}function Ep(n,e,t){e=Fu(e,t);for(var r=!Tl(n)&&ns(n),i=(r||n).length,a=Array(i),o=0;o<i;o++){var s=r?r[o]:o;a[o]=e(n[s],s,n)}return a}function jne(n){var e=function(t,r,i,a){var o=!Tl(t)&&ns(t),s=(o||t).length,u=n>0?0:s-1;for(a||(i=t[o?o[u]:u],u+=n);u>=0&&u<s;u+=n){var l=o?o[u]:u;i=r(i,t[l],l,t)}return i};return function(t,r,i,a){var o=arguments.length>=3;return e(t,dD(r,a,4),i,o)}}const _2=jne(1),RN=jne(-1);function jm(n,e,t){var r=[];return e=Fu(e,t),dh(n,function(i,a,o){e(i,a,o)&&r.push(i)}),r}function $ne(n,e,t){return jm(n,VR(Fu(e)),t)}function IN(n,e,t){e=Fu(e,t);for(var r=!Tl(n)&&ns(n),i=(r||n).length,a=0;a<i;a++){var o=r?r[a]:a;if(!e(n[o],o,n))return!1}return!0}function FN(n,e,t){e=Fu(e,t);for(var r=!Tl(n)&&ns(n),i=(r||n).length,a=0;a<i;a++){var o=r?r[a]:a;if(e(n[o],o,n))return!0}return!1}function cc(n,e,t,r){return Tl(n)||(n=T1(n)),(typeof t!="number"||r)&&(t=0),Y9(n,e,t)>=0}const qne=Xo(function(n,e,t){var r,i;return wo(e)?i=e:(e=fD(e),r=e.slice(0,-1),e=e[e.length-1]),Ep(n,function(a){var o=i;if(!o){if(r&&r.length&&(a=W9(a,r)),a==null)return;o=a[e]}return o==null?o:o.apply(a,t)})});function GR(n,e){return Ep(n,$R(e))}function Vne(n,e){return jm(n,i1(e))}function Q9(n,e,t){var r=-1/0,i=-1/0,a,o;if(e==null||typeof e=="number"&&typeof n[0]!="object"&&n!=null){n=Tl(n)?n:T1(n);for(var s=0,u=n.length;s<u;s++)a=n[s],a!=null&&a>r&&(r=a)}else e=Fu(e,t),dh(n,function(l,h,c){o=e(l,h,c),(o>i||o===-1/0&&r===-1/0)&&(r=l,i=o)});return r}function Hne(n,e,t){var r=1/0,i=1/0,a,o;if(e==null||typeof e=="number"&&typeof n[0]!="object"&&n!=null){n=Tl(n)?n:T1(n);for(var s=0,u=n.length;s<u;s++)a=n[s],a!=null&&a<r&&(r=a)}else e=Fu(e,t),dh(n,function(l,h,c){o=e(l,h,c),(o<i||o===1/0&&r===1/0)&&(r=l,i=o)});return r}var uTe=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Z9(n){return n?uy(n)?hD.call(n):zR(n)?n.match(uTe):Tl(n)?Ep(n,jR):T1(n):[]}function J9(n,e,t){if(e==null||t)return Tl(n)||(n=T1(n)),n[ON(n.length-1)];var r=Z9(n),i=Nu(r);e=Math.max(Math.min(e,i),0);for(var a=i-1,o=0;o<e;o++){var s=ON(o,a),u=r[o];r[o]=r[s],r[s]=u}return r.slice(0,e)}function Gne(n){return J9(n,1/0)}function Xne(n,e,t){var r=0;return e=Fu(e,t),GR(Ep(n,function(i,a,o){return{value:i,index:r++,criteria:e(i,a,o)}}).sort(function(i,a){var o=i.criteria,s=a.criteria;if(o!==s){if(o>s||o===void 0)return 1;if(o<s||s===void 0)return-1}return i.index-a.index}),"value")}function XR(n,e){return function(t,r,i){var a=e?[[],[]]:{};return r=Fu(r,i),dh(t,function(o,s){var u=r(o,s,t);n(a,o,u)}),a}}const Kne=XR(function(n,e,t){ly(n,t)?n[t].push(e):n[t]=[e]}),Yne=XR(function(n,e,t){n[t]=e}),Qne=XR(function(n,e,t){ly(n,t)?n[t]++:n[t]=1}),Zne=XR(function(n,e,t){n[t?0:1].push(e)},!0);function Jne(n){return n==null?0:Tl(n)?n.length:ns(n).length}function lTe(n,e,t){return e in t}const e7=Xo(function(n,e){var t={},r=e[0];if(n==null)return t;wo(r)?(e.length>1&&(r=dD(r,e[1])),e=gx(n)):(r=lTe,e=A1(e,!1,!1),n=Object(n));for(var i=0,a=e.length;i<a;i++){var o=e[i],s=n[o];r(s,o,n)&&(t[o]=s)}return t}),ere=Xo(function(n,e){var t=e[0],r;return wo(t)?(t=VR(t),e.length>1&&(r=e[1])):(e=Ep(A1(e,!1,!1),String),t=function(i,a){return!cc(e,a)}),e7(n,t,r)});function t7(n,e,t){return hD.call(n,0,Math.max(0,n.length-(e==null||t?1:e)))}function S2(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[0]:t7(n,n.length-e)}function q0(n,e,t){return hD.call(n,e==null||t?1:e)}function tre(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[n.length-1]:q0(n,Math.max(0,n.length-e))}function nre(n){return jm(n,Boolean)}function rre(n,e){return A1(n,e,!1)}const n7=Xo(function(n,e){return e=A1(e,!0,!0),jm(n,function(t){return!cc(e,t)})}),ire=Xo(function(n,e){return n7(n,e)});function YC(n,e,t,r){C9(e)||(r=t,t=e,e=!1),t!=null&&(t=Fu(t,r));for(var i=[],a=[],o=0,s=Nu(n);o<s;o++){var u=n[o],l=t?t(u,o,n):u;e&&!t?((!o||a!==l)&&i.push(u),a=l):t?cc(a,l)||(a.push(l),i.push(u)):cc(i,u)||i.push(u)}return i}const are=Xo(function(n){return YC(A1(n,!0,!0))});function sre(n){for(var e=[],t=arguments.length,r=0,i=Nu(n);r<i;r++){var a=n[r];if(!cc(e,a)){var o;for(o=1;o<t&&cc(arguments[o],a);o++);o===t&&e.push(a)}}return e}function QC(n){for(var e=n&&Q9(n,Nu).length||0,t=Array(e),r=0;r<e;r++)t[r]=GR(n,r);return t}const ore=Xo(QC);function ure(n,e){for(var t={},r=0,i=Nu(n);r<i;r++)e?t[n[r]]=e[r]:t[n[r][0]]=n[r][1];return t}function lre(n,e,t){e==null&&(e=n||0,n=0),t||(t=e<n?-1:1);for(var r=Math.max(Math.ceil((e-n)/t),0),i=Array(r),a=0;a<r;a++,n+=t)i[a]=n;return i}function cre(n,e){if(e==null||e<1)return[];for(var t=[],r=0,i=n.length;r<i;)t.push(hD.call(n,r,r+=e));return t}function r7(n,e){return n._chain?Mr(e).chain():e}function i7(n){return dh(XC(n),function(e){var t=Mr[e]=n[e];Mr.prototype[e]=function(){var r=[this._wrapped];return BEe.apply(r,arguments),r7(this,t.apply(Mr,r))}}),Mr}dh(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=BR[n];Mr.prototype[n]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(n==="shift"||n==="splice")&&t.length===0&&delete t[0]),r7(this,t)}});dh(["concat","join","slice"],function(n){var e=BR[n];Mr.prototype[n]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),r7(this,t)}});const cTe=Object.freeze(Object.defineProperty({__proto__:null,VERSION:x9,after:Lne,all:IN,allKeys:gx,any:FN,assign:$w,before:H9,bind:q9,bindAll:kne,chain:Dne,chunk:cre,clone:fne,collect:Ep,compact:nre,compose:Pne,constant:N9,contains:cc,countBy:Qne,create:hne,debounce:Ine,default:Mr,defaults:B9,defer:One,delay:V9,detect:KC,difference:n7,drop:q0,each:dh,escape:xne,every:IN,extend:U9,extendOwn:$w,filter:jm,find:KC,findIndex:HR,findKey:G9,findLastIndex:X9,findWhere:Wne,first:S2,flatten:rre,foldl:_2,foldr:RN,forEach:dh,functions:XC,get:j9,groupBy:Kne,has:pne,head:S2,identity:jR,include:cc,includes:cc,indexBy:Yne,indexOf:Y9,initial:t7,inject:_2,intersection:sre,invert:L9,invoke:qne,isArguments:WR,isArray:uy,isArrayBuffer:D9,isBoolean:C9,isDataView:GC,isDate:$te,isElement:jte,isEmpty:Jte,isEqual:tne,isError:Vte,isFinite:Kte,isFunction:wo,isMap:ane,isMatch:R9,isNaN:k9,isNull:Wte,isNumber:E9,isObject:oy,isRegExp:qte,isSet:one,isString:zR,isSymbol:T9,isTypedArray:O9,isUndefined:S9,isWeakMap:sne,isWeakSet:une,iteratee:qR,keys:ns,last:tre,lastIndexOf:zne,map:Ep,mapObject:mne,matcher:i1,matches:i1,max:Q9,memoize:Nne,methods:XC,min:Hne,mixin:i7,negate:VR,noop:$9,now:qw,object:ure,omit:ere,once:Mne,pairs:lne,partial:D1,partition:Zne,pick:e7,pluck:GR,property:$R,propertyOf:yne,random:ON,range:lre,reduce:_2,reduceRight:RN,reject:$ne,rest:q0,restArguments:Xo,result:Ene,sample:J9,select:jm,shuffle:Gne,size:Jne,some:FN,sortBy:Xne,sortedIndex:K9,tail:q0,take:S2,tap:dne,template:Cne,templateSettings:Sne,throttle:Rne,times:vne,toArray:Z9,toPath:z9,transpose:QC,unescape:_ne,union:are,uniq:YC,unique:YC,uniqueId:Tne,unzip:QC,values:T1,where:Vne,without:ire,wrap:Fne,zip:ore},Symbol.toStringTag,{value:"Module"}));var M6=i7(cTe);M6._=M6;const hTe=Object.freeze(Object.defineProperty({__proto__:null,VERSION:x9,after:Lne,all:IN,allKeys:gx,any:FN,assign:$w,before:H9,bind:q9,bindAll:kne,chain:Dne,chunk:cre,clone:fne,collect:Ep,compact:nre,compose:Pne,constant:N9,contains:cc,countBy:Qne,create:hne,debounce:Ine,default:M6,defaults:B9,defer:One,delay:V9,detect:KC,difference:n7,drop:q0,each:dh,escape:xne,every:IN,extend:U9,extendOwn:$w,filter:jm,find:KC,findIndex:HR,findKey:G9,findLastIndex:X9,findWhere:Wne,first:S2,flatten:rre,foldl:_2,foldr:RN,forEach:dh,functions:XC,get:j9,groupBy:Kne,has:pne,head:S2,identity:jR,include:cc,includes:cc,indexBy:Yne,indexOf:Y9,initial:t7,inject:_2,intersection:sre,invert:L9,invoke:qne,isArguments:WR,isArray:uy,isArrayBuffer:D9,isBoolean:C9,isDataView:GC,isDate:$te,isElement:jte,isEmpty:Jte,isEqual:tne,isError:Vte,isFinite:Kte,isFunction:wo,isMap:ane,isMatch:R9,isNaN:k9,isNull:Wte,isNumber:E9,isObject:oy,isRegExp:qte,isSet:one,isString:zR,isSymbol:T9,isTypedArray:O9,isUndefined:S9,isWeakMap:sne,isWeakSet:une,iteratee:qR,keys:ns,last:tre,lastIndexOf:zne,map:Ep,mapObject:mne,matcher:i1,matches:i1,max:Q9,memoize:Nne,methods:XC,min:Hne,mixin:i7,negate:VR,noop:$9,now:qw,object:ure,omit:ere,once:Mne,pairs:lne,partial:D1,partition:Zne,pick:e7,pluck:GR,property:$R,propertyOf:yne,random:ON,range:lre,reduce:_2,reduceRight:RN,reject:$ne,rest:q0,restArguments:Xo,result:Ene,sample:J9,select:jm,shuffle:Gne,size:Jne,some:FN,sortBy:Xne,sortedIndex:K9,tail:q0,take:S2,tap:dne,template:Cne,templateSettings:Sne,throttle:Rne,times:vne,toArray:Z9,toPath:z9,transpose:QC,unescape:_ne,union:are,uniq:YC,unique:YC,uniqueId:Tne,unzip:QC,values:T1,where:Vne,without:ire,wrap:Fne,zip:ore},Symbol.toStringTag,{value:"Module"})),ba=nR(hTe);var ik={},ql={},J5={exports:{}},ak={exports:{}},DV;function mx(){if(DV)return ak.exports;DV=1;var n=function(){return this===void 0}();if(n)ak.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(h,c){var f=Object.getOwnPropertyDescriptor(h,c);return!!(!f||f.writable||f.set)}};else{var e={}.hasOwnProperty,t={}.toString,r={}.constructor.prototype,i=function(h){var c=[];for(var f in h)e.call(h,f)&&c.push(f);return c},a=function(h,c){return{value:h[c]}},o=function(h,c,f){return h[c]=f.value,h},s=function(h){return h},u=function(h){try{return Object(h).constructor.prototype}catch{return r}},l=function(h){try{return t.call(h)==="[object Array]"}catch{return!1}};ak.exports={isArray:l,keys:i,names:i,defineProperty:o,getDescriptor:a,freeze:s,getPrototypeOf:u,isES5:n,propertyIsWritable:function(){return!0}}}return ak.exports}var P_,AV;function Si(){if(AV)return P_;AV=1;var n={},e=mx(),t=typeof navigator>"u",r={e:{}},i,a=typeof self<"u"?self:typeof window<"u"?window:typeof Eu<"u"?Eu:P_!==void 0?P_:null;function o(){try{var H=i;return i=null,H.apply(this,arguments)}catch(K){return r.e=K,r}}function s(H){return i=H,o}var u=function(H,K){var Z={}.hasOwnProperty;function J(){this.constructor=H,this.constructor$=K;for(var X in K.prototype)Z.call(K.prototype,X)&&X.charAt(X.length-1)!=="$"&&(this[X+"$"]=K.prototype[X])}return J.prototype=K.prototype,H.prototype=new J,H.prototype};function l(H){return H==null||H===!0||H===!1||typeof H=="string"||typeof H=="number"}function h(H){return typeof H=="function"||typeof H=="object"&&H!==null}function c(H){return l(H)?new Error(E(H)):H}function f(H,K){var Z=H.length,J=new Array(Z+1),X;for(X=0;X<Z;++X)J[X]=H[X];return J[X]=K,J}function d(H,K,Z){if(e.isES5){var J=Object.getOwnPropertyDescriptor(H,K);if(J!=null)return J.get==null&&J.set==null?J.value:Z}else return{}.hasOwnProperty.call(H,K)?H[K]:void 0}function p(H,K,Z){if(l(H))return H;var J={value:Z,configurable:!0,enumerable:!1,writable:!0};return e.defineProperty(H,K,J),H}function m(H){throw H}var g=function(){var H=[Array.prototype,Object.prototype,Function.prototype],K=function(X){for(var ae=0;ae<H.length;++ae)if(H[ae]===X)return!0;return!1};if(e.isES5){var Z=Object.getOwnPropertyNames;return function(X){for(var ae=[],ie=Object.create(null);X!=null&&!K(X);){var ce;try{ce=Z(X)}catch{return ae}for(var ge=0;ge<ce.length;++ge){var Ce=ce[ge];if(!ie[Ce]){ie[Ce]=!0;var Ee=Object.getOwnPropertyDescriptor(X,Ce);Ee!=null&&Ee.get==null&&Ee.set==null&&ae.push(Ce)}}X=e.getPrototypeOf(X)}return ae}}else{var J={}.hasOwnProperty;return function(X){if(K(X))return[];var ae=[];e:for(var ie in X)if(J.call(X,ie))ae.push(ie);else{for(var ce=0;ce<H.length;++ce)if(J.call(H[ce],ie))continue e;ae.push(ie)}return ae}}}(),y=/this\s*\.\s*\S+\s*=/;function v(H){try{if(typeof H=="function"){var K=e.names(H.prototype),Z=e.isES5&&K.length>1,J=K.length>0&&!(K.length===1&&K[0]==="constructor"),X=y.test(H+"")&&e.names(H).length>0;if(Z||J||X)return!0}return!1}catch{return!1}}function b(H){return H}var w=/^[a-z$_][a-z$_0-9]*$/i;function x(H){return w.test(H)}function S(H,K,Z){for(var J=new Array(H),X=0;X<H;++X)J[X]=K+X+Z;return J}function E(H){try{return H+""}catch{return"[no string representation]"}}function A(H){return H!==null&&typeof H=="object"&&typeof H.message=="string"&&typeof H.name=="string"}function k(H){try{p(H,"isOperational",!0)}catch{}}function T(H){return H==null?!1:H instanceof Error.__BluebirdErrorTypes__.OperationalError||H.isOperational===!0}function O(H){return A(H)&&e.propertyIsWritable(H,"stack")}var F=function(){return"stack"in new Error?function(H){return O(H)?H:new Error(E(H))}:function(H){if(O(H))return H;try{throw new Error(E(H))}catch(K){return K}}}();function I(H){return{}.toString.call(H)}function R(H,K,Z){for(var J=e.names(H),X=0;X<J.length;++X){var ae=J[X];if(Z(ae))try{e.defineProperty(K,ae,e.getDescriptor(H,ae))}catch{}}}var U=function(H){return e.isArray(H)?H:null};if(typeof Symbol<"u"&&Symbol.iterator){var B=typeof Array.from=="function"?function(H){return Array.from(H)}:function(H){for(var K=[],Z=H[Symbol.iterator](),J;!(J=Z.next()).done;)K.push(J.value);return K};U=function(H){return e.isArray(H)?H:H!=null&&typeof H[Symbol.iterator]=="function"?B(H):null}}var W=typeof process<"u"&&I(process).toLowerCase()==="[object process]",Y=typeof process<"u"&&typeof n<"u";function z(H){return Y?n[H]:void 0}function j(){if(typeof Promise=="function")try{var H=new Promise(function(){});if({}.toString.call(H)==="[object Promise]")return Promise}catch{}}function M(H,K){return H.bind(K)}var q={isClass:v,isIdentifier:x,inheritedDataKeys:g,getDataPropertyOrDefault:d,thrower:m,isArray:e.isArray,asArray:U,notEnumerableProp:p,isPrimitive:l,isObject:h,isError:A,canEvaluate:t,errorObj:r,tryCatch:s,inherits:u,withAppended:f,maybeWrapAsError:c,toFastProperties:b,filledRange:S,toString:E,canAttachTrace:O,ensureErrorObject:F,originatesFromRejection:T,markAsOriginatingFromRejection:k,classString:I,copyDescriptors:R,hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode:W,hasEnvVariables:Y,env:z,global:a,getNativePromise:j,domainBind:M};q.isRecentNode=q.isNode&&function(){var H=process.versions.node.split(".").map(Number);return H[0]===0&&H[1]>10||H[0]>0}(),q.isNode&&q.toFastProperties(process);try{throw new Error}catch(H){q.lastLineError=H}return P_=q,P_}var sk={exports:{}},eF,kV;function fTe(){if(kV)return eF;kV=1;var n=Si(),e,t=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},r=n.getNativePromise();if(n.isNode&&typeof MutationObserver>"u"){var i=Eu.setImmediate,a=process.nextTick;e=n.isRecentNode?function(s){i.call(Eu,s)}:function(s){a.call(process,s)}}else if(typeof r=="function"&&typeof r.resolve=="function"){var o=r.resolve();e=function(s){o.then(s)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))?e=function(){var s=document.createElement("div"),u={attributes:!0},l=!1,h=document.createElement("div"),c=new MutationObserver(function(){s.classList.toggle("foo"),l=!1});c.observe(h,u);var f=function(){l||(l=!0,h.classList.toggle("foo"))};return function(p){var m=new MutationObserver(function(){m.disconnect(),p()});m.observe(s,u),f()}}():typeof setImmediate<"u"?e=function(s){setImmediate(s)}:typeof setTimeout<"u"?e=function(s){setTimeout(s,0)}:e=t;return eF=e,eF}var tF,NV;function dTe(){if(NV)return tF;NV=1;function n(t,r,i,a,o){for(var s=0;s<o;++s)i[s+a]=t[s+r],t[s+r]=void 0}function e(t){this._capacity=t,this._length=0,this._front=0}return e.prototype._willBeOverCapacity=function(t){return this._capacity<t},e.prototype._pushOne=function(t){var r=this.length();this._checkCapacity(r+1);var i=this._front+r&this._capacity-1;this[i]=t,this._length=r+1},e.prototype.push=function(t,r,i){var a=this.length()+3;if(this._willBeOverCapacity(a)){this._pushOne(t),this._pushOne(r),this._pushOne(i);return}var o=this._front+a-3;this._checkCapacity(a);var s=this._capacity-1;this[o+0&s]=t,this[o+1&s]=r,this[o+2&s]=i,this._length=a},e.prototype.shift=function(){var t=this._front,r=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,r},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(t){var r=this._capacity;this._capacity=t;var i=this._front,a=this._length,o=i+a&r-1;n(this,0,this,r,o)},tF=e,tF}var OV;function pTe(){if(OV)return sk.exports;OV=1;var n;try{throw new Error}catch(u){n=u}var e=fTe(),t=dTe(),r=Si();function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new t(16),this._normalQueue=new t(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var u=this;this.drainQueues=function(){u._drainQueues()},this._schedule=e}i.prototype.setScheduler=function(u){var l=this._schedule;return this._schedule=u,this._customScheduler=!0,l},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){r.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(u,l){l?(process.stderr.write("Fatal "+(u instanceof Error?u.stack:u)+`
`),process.exit(2)):this.throwLater(u)},i.prototype.throwLater=function(u,l){if(arguments.length===1&&(l=u,u=function(){throw l}),typeof setTimeout<"u")setTimeout(function(){u(l)},0);else try{this._schedule(function(){u(l)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function a(u,l,h){this._lateQueue.push(u,l,h),this._queueTick()}function o(u,l,h){this._normalQueue.push(u,l,h),this._queueTick()}function s(u){this._normalQueue._pushOne(u),this._queueTick()}return r.hasDevTools?(i.prototype.invokeLater=function(u,l,h){this._trampolineEnabled?a.call(this,u,l,h):this._schedule(function(){setTimeout(function(){u.call(l,h)},100)})},i.prototype.invoke=function(u,l,h){this._trampolineEnabled?o.call(this,u,l,h):this._schedule(function(){u.call(l,h)})},i.prototype.settlePromises=function(u){this._trampolineEnabled?s.call(this,u):this._schedule(function(){u._settlePromises()})}):(i.prototype.invokeLater=a,i.prototype.invoke=o,i.prototype.settlePromises=s),i.prototype._drainQueue=function(u){for(;u.length()>0;){var l=u.shift();if(typeof l!="function"){l._settlePromises();continue}var h=u.shift(),c=u.shift();l.call(h,c)}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},sk.exports=i,sk.exports.firstLineError=n,sk.exports}var nF,RV;function $m(){if(RV)return nF;RV=1;var n=mx(),e=n.freeze,t=Si(),r=t.inherits,i=t.notEnumerableProp;function a(y,v){function b(w){if(!(this instanceof b))return new b(w);i(this,"message",typeof w=="string"?w:v),i(this,"name",y),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return r(b,Error),b}var o,s,u=a("Warning","warning"),l=a("CancellationError","cancellation error"),h=a("TimeoutError","timeout error"),c=a("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch{o=a("TypeError","type error"),s=a("RangeError","range error")}for(var f="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),d=0;d<f.length;++d)typeof Array.prototype[f[d]]=="function"&&(c.prototype[f[d]]=Array.prototype[f[d]]);n.defineProperty(c.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),c.prototype.isOperational=!0;var p=0;c.prototype.toString=function(){var y=Array(p*4+1).join(" "),v=`
`+y+`AggregateError of:
`;p++,y=Array(p*4+1).join(" ");for(var b=0;b<this.length;++b){for(var w=this[b]===this?"[Circular AggregateError]":this[b]+"",x=w.split(`
`),S=0;S<x.length;++S)x[S]=y+x[S];w=x.join(`
`),v+=w+`
`}return p--,v};function m(y){if(!(this instanceof m))return new m(y);i(this,"name","OperationalError"),i(this,"message",y),this.cause=y,this.isOperational=!0,y instanceof Error?(i(this,"message",y.message),i(this,"stack",y.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}r(m,Error);var g=Error.__BluebirdErrorTypes__;return g||(g=e({CancellationError:l,TimeoutError:h,OperationalError:m,RejectionError:m,AggregateError:c}),n.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:!1,enumerable:!1,configurable:!1})),nF={Error,TypeError:o,RangeError:s,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:u},nF}var rF,IV;function gTe(){return IV||(IV=1,rF=function(n,e){var t=Si(),r=t.errorObj,i=t.isObject;function a(c,f){if(i(c)){if(c instanceof n)return c;var d=s(c);if(d===r){f&&f._pushContext();var p=n.reject(d.e);return f&&f._popContext(),p}else if(typeof d=="function"){if(l(c)){var p=new n(e);return c._then(p._fulfill,p._reject,void 0,p,null),p}return h(c,d,f)}}return c}function o(c){return c.then}function s(c){try{return o(c)}catch(f){return r.e=f,r}}var u={}.hasOwnProperty;function l(c){try{return u.call(c,"_promise0")}catch{return!1}}function h(c,f,d){var p=new n(e),m=p;d&&d._pushContext(),p._captureStackTrace(),d&&d._popContext();var g=!0,y=t.tryCatch(f).call(c,v,b);g=!1,p&&y===r&&(p._rejectCallback(y.e,!0,!0),p=null);function v(w){p&&(p._resolveCallback(w),p=null)}function b(w){p&&(p._rejectCallback(w,g,!0),p=null)}return m}return a}),rF}var iF,FV;function mTe(){return FV||(FV=1,iF=function(n,e,t,r,i){var a=Si();a.isArray;function o(u){switch(u){case-2:return[];case-3:return{}}}function s(u){var l=this._promise=new n(e);u instanceof n&&l._propagateFrom(u,3),l._setOnCancel(this),this._values=u,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.inherits(s,i),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function u(l,h){var c=t(this._values,this._promise);if(c instanceof n){c=c._target();var f=c._bitField;if(this._values=c,(f&50397184)===0)return this._promise._setAsyncGuaranteed(),c._then(u,this._reject,void 0,this,h);if((f&33554432)!==0)c=c._value();else return(f&16777216)!==0?this._reject(c._reason()):this._cancel()}if(c=a.asArray(c),c===null){var d=r("expecting an array or an iterable object but got "+a.classString(c)).reason();this._promise._rejectCallback(d,!1);return}if(c.length===0){h===-5?this._resolveEmptyArray():this._resolve(o(h));return}this._iterate(c)},s.prototype._iterate=function(u){var l=this.getActualLength(u.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var h=this._promise,c=!1,f=null,d=0;d<l;++d){var p=t(u[d],h);p instanceof n?(p=p._target(),f=p._bitField):f=null,c?f!==null&&p.suppressUnhandledRejections():f!==null?(f&50397184)===0?(p._proxy(this,d),this._values[d]=p):(f&33554432)!==0?c=this._promiseFulfilled(p._value(),d):(f&16777216)!==0?c=this._promiseRejected(p._reason(),d):c=this._promiseCancelled(d):c=this._promiseFulfilled(p,d)}c||h._setAsyncGuaranteed()},s.prototype._isResolved=function(){return this._values===null},s.prototype._resolve=function(u){this._values=null,this._promise._fulfill(u)},s.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},s.prototype._reject=function(u){this._values=null,this._promise._rejectCallback(u,!1)},s.prototype._promiseFulfilled=function(u,l){this._values[l]=u;var h=++this._totalResolved;return h>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(u){return this._totalResolved++,this._reject(u),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var u=this._values;if(this._cancel(),u instanceof n)u.cancel();else for(var l=0;l<u.length;++l)u[l]instanceof n&&u[l].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(u){return u},s}),iF}var aF,PV;function yTe(){return PV||(PV=1,aF=function(n){var e=!1,t=[];n.prototype._promiseCreated=function(){},n.prototype._pushContext=function(){},n.prototype._popContext=function(){return null},n._peekContext=n.prototype._peekContext=function(){};function r(){this._trace=new r.CapturedTrace(a())}r.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,t.push(this._trace))},r.prototype._popContext=function(){if(this._trace!==void 0){var o=t.pop(),s=o._promiseCreated;return o._promiseCreated=null,s}return null};function i(){if(e)return new r}function a(){var o=t.length-1;if(o>=0)return t[o]}return r.CapturedTrace=null,r.create=i,r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var o=n.prototype._pushContext,s=n.prototype._popContext,u=n._peekContext,l=n.prototype._peekContext,h=n.prototype._promiseCreated;r.deactivateLongStackTraces=function(){n.prototype._pushContext=o,n.prototype._popContext=s,n._peekContext=u,n.prototype._peekContext=l,n.prototype._promiseCreated=h,e=!1},e=!0,n.prototype._pushContext=r.prototype._pushContext,n.prototype._popContext=r.prototype._popContext,n._peekContext=n.prototype._peekContext=a,n.prototype._promiseCreated=function(){var c=this._peekContext();c&&c._promiseCreated==null&&(c._promiseCreated=this)}},r}),aF}var sF,LV;function vTe(){return LV||(LV=1,sF=function(n,e){var t=n._getDomain,r=n._async,i=$m().Warning,a=Si(),o=a.canAttachTrace,s,u,l=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,h=/\((?:timers\.js):\d+:\d+\)/,c=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,f=null,d=null,p=!1,m,g=!!(a.env("BLUEBIRD_DEBUG")!=0&&(a.env("BLUEBIRD_DEBUG")||a.env("NODE_ENV")==="development")),y=!!(a.env("BLUEBIRD_WARNINGS")!=0&&(g||a.env("BLUEBIRD_WARNINGS"))),v=!!(a.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(g||a.env("BLUEBIRD_LONG_STACK_TRACES"))),b=a.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(y||!!a.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var me=this._target();me._bitField=me._bitField&-1048577|524288},n.prototype._ensurePossibleRejectionHandled=function(){(this._bitField&524288)===0&&(this._setRejectionIsUnhandled(),r.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){Ce("rejectionHandled",s,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},n.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var me=this._settledValue();this._setUnhandledRejectionIsNotified(),Ce("unhandledRejection",u,me,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},n.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},n.prototype._warn=function(me,Se,Re){return K(me,Se,Re||this)},n.onPossiblyUnhandledRejection=function(me){var Se=t();u=typeof me=="function"?Se===null?me:a.domainBind(Se,me):void 0},n.onUnhandledRejectionHandled=function(me){var Se=t();s=typeof me=="function"?Se===null?me:a.domainBind(Se,me):void 0};var w=function(){};n.longStackTraces=function(){if(r.haveItemsQueued()&&!ue.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!ue.longStackTraces&&de()){var me=n.prototype._captureStackTrace,Se=n.prototype._attachExtraTrace;ue.longStackTraces=!0,w=function(){if(r.haveItemsQueued()&&!ue.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);n.prototype._captureStackTrace=me,n.prototype._attachExtraTrace=Se,e.deactivateLongStackTraces(),r.enableTrampoline(),ue.longStackTraces=!1},n.prototype._captureStackTrace=j,n.prototype._attachExtraTrace=M,e.activateLongStackTraces(),r.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return ue.longStackTraces&&de()};var x=function(){try{if(typeof CustomEvent=="function"){var me=new CustomEvent("CustomEvent");return a.global.dispatchEvent(me),function(Se,Re){var je=new CustomEvent(Se.toLowerCase(),{detail:Re,cancelable:!0});return!a.global.dispatchEvent(je)}}else if(typeof Event=="function"){var me=new Event("CustomEvent");return a.global.dispatchEvent(me),function(Re,je){var rt=new Event(Re.toLowerCase(),{cancelable:!0});return rt.detail=je,!a.global.dispatchEvent(rt)}}else{var me=document.createEvent("CustomEvent");return me.initCustomEvent("testingtheevent",!1,!0,{}),a.global.dispatchEvent(me),function(Re,je){var rt=document.createEvent("CustomEvent");return rt.initCustomEvent(Re.toLowerCase(),!1,!0,je),!a.global.dispatchEvent(rt)}}}catch{}return function(){return!1}}(),S=function(){return a.isNode?function(){return process.emit.apply(process,arguments)}:a.global?function(me){var Se="on"+me.toLowerCase(),Re=a.global[Se];return Re?(Re.apply(a.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function E(me,Se){return{promise:Se}}var A={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(me,Se,Re){return{promise:Se,child:Re}},warning:function(me,Se){return{warning:Se}},unhandledRejection:function(me,Se,Re){return{reason:Se,promise:Re}},rejectionHandled:E},k=function(me){var Se=!1;try{Se=S.apply(null,arguments)}catch(je){r.throwLater(je),Se=!0}var Re=!1;try{Re=x(me,A[me].apply(null,arguments))}catch(je){r.throwLater(je),Re=!0}return Re||Se};n.config=function(me){if(me=Object(me),"longStackTraces"in me&&(me.longStackTraces?n.longStackTraces():!me.longStackTraces&&n.hasLongStackTraces()&&w()),"warnings"in me){var Se=me.warnings;ue.warnings=!!Se,b=ue.warnings,a.isObject(Se)&&"wForgottenReturn"in Se&&(b=!!Se.wForgottenReturn)}if("cancellation"in me&&me.cancellation&&!ue.cancellation){if(r.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=U,n.prototype._propagateFrom=B,n.prototype._onCancel=I,n.prototype._setOnCancel=R,n.prototype._attachCancellationCallback=F,n.prototype._execute=O,Y=B,ue.cancellation=!0}return"monitoring"in me&&(me.monitoring&&!ue.monitoring?(ue.monitoring=!0,n.prototype._fireEvent=k):!me.monitoring&&ue.monitoring&&(ue.monitoring=!1,n.prototype._fireEvent=T)),n};function T(){return!1}n.prototype._fireEvent=T,n.prototype._execute=function(me,Se,Re){try{me(Se,Re)}catch(je){return je}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(me){},n.prototype._attachCancellationCallback=function(me){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(me,Se){};function O(me,Se,Re){var je=this;try{me(Se,Re,function(rt){if(typeof rt!="function")throw new TypeError("onCancel must be a function, got: "+a.toString(rt));je._attachCancellationCallback(rt)})}catch(rt){return rt}}function F(me){if(!this._isCancellable())return this;var Se=this._onCancel();Se!==void 0?a.isArray(Se)?Se.push(me):this._setOnCancel([Se,me]):this._setOnCancel(me)}function I(){return this._onCancelField}function R(me){this._onCancelField=me}function U(){this._cancellationParent=void 0,this._onCancelField=void 0}function B(me,Se){if((Se&1)!==0){this._cancellationParent=me;var Re=me._branchesRemainingToCancel;Re===void 0&&(Re=0),me._branchesRemainingToCancel=Re+1}(Se&2)!==0&&me._isBound()&&this._setBoundTo(me._boundTo)}function W(me,Se){(Se&2)!==0&&me._isBound()&&this._setBoundTo(me._boundTo)}var Y=W;function z(){var me=this._boundTo;return me!==void 0&&me instanceof n?me.isFulfilled()?me.value():void 0:me}function j(){this._trace=new Ne(this._peekContext())}function M(me,Se){if(o(me)){var Re=this._trace;if(Re!==void 0&&Se&&(Re=Re._parent),Re!==void 0)Re.attachExtraTrace(me);else if(!me.__stackCleaned__){var je=ce(me);a.notEnumerableProp(me,"stack",je.message+`
`+je.stack.join(`
`)),a.notEnumerableProp(me,"__stackCleaned__",!0)}}}function q(me,Se,Re,je,rt){if(me===void 0&&Se!==null&&b){if(rt!==void 0&&rt._returnedNonUndefined()||(je._bitField&65535)===0)return;Re&&(Re=Re+" ");var at="",yt="";if(Se._trace){for(var pt=Se._trace.stack.split(`
`),Le=ae(pt),tt=Le.length-1;tt>=0;--tt){var ft=Le[tt];if(!h.test(ft)){var Et=ft.match(c);Et&&(at="at "+Et[1]+":"+Et[2]+":"+Et[3]+" ");break}}if(Le.length>0){for(var xt=Le[0],tt=0;tt<pt.length;++tt)if(pt[tt]===xt){tt>0&&(yt=`
`+pt[tt-1]);break}}}var Ot="a promise was created in a "+Re+"handler "+at+"but was not returned from it, see http://goo.gl/rRqMUw"+yt;je._warn(Ot,!0,Se)}}function H(me,Se){var Re=me+" is deprecated and will be removed in a future version.";return Se&&(Re+=" Use "+Se+" instead."),K(Re)}function K(me,Se,Re){if(ue.warnings){var je=new i(me),rt;if(Se)Re._attachExtraTrace(je);else if(ue.longStackTraces&&(rt=n._peekContext()))rt.attachExtraTrace(je);else{var at=ce(je);je.stack=at.message+`
`+at.stack.join(`
`)}k("warning",je)||ge(je,"",!0)}}function Z(me,Se){for(var Re=0;Re<Se.length-1;++Re)Se[Re].push("From previous event:"),Se[Re]=Se[Re].join(`
`);return Re<Se.length&&(Se[Re]=Se[Re].join(`
`)),me+`
`+Se.join(`
`)}function J(me){for(var Se=0;Se<me.length;++Se)(me[Se].length===0||Se+1<me.length&&me[Se][0]===me[Se+1][0])&&(me.splice(Se,1),Se--)}function X(me){for(var Se=me[0],Re=1;Re<me.length;++Re){for(var je=me[Re],rt=Se.length-1,at=Se[rt],yt=-1,pt=je.length-1;pt>=0;--pt)if(je[pt]===at){yt=pt;break}for(var pt=yt;pt>=0;--pt){var Le=je[pt];if(Se[rt]===Le)Se.pop(),rt--;else break}Se=je}}function ae(me){for(var Se=[],Re=0;Re<me.length;++Re){var je=me[Re],rt=je==="    (No stack trace)"||f.test(je),at=rt&&ye(je);rt&&!at&&(p&&je.charAt(0)!==" "&&(je="    "+je),Se.push(je))}return Se}function ie(me){for(var Se=me.stack.replace(/\s+$/g,"").split(`
`),Re=0;Re<Se.length;++Re){var je=Se[Re];if(je==="    (No stack trace)"||f.test(je))break}return Re>0&&me.name!="SyntaxError"&&(Se=Se.slice(Re)),Se}function ce(me){var Se=me.stack,Re=me.toString();return Se=typeof Se=="string"&&Se.length>0?ie(me):["    (No stack trace)"],{message:Re,stack:me.name=="SyntaxError"?Se:ae(Se)}}function ge(me,Se,Re){if(typeof console<"u"){var je;if(a.isObject(me)){var rt=me.stack;je=Se+d(rt,me)}else je=Se+String(me);typeof m=="function"?m(je,Re):(typeof console.log=="function"||typeof console.log=="object")&&console.log(je)}}function Ce(me,Se,Re,je){var rt=!1;try{typeof Se=="function"&&(rt=!0,me==="rejectionHandled"?Se(je):Se(Re,je))}catch(at){r.throwLater(at)}me==="unhandledRejection"?!k(me,Re,je)&&!rt&&ge(Re,"Unhandled rejection "):k(me,je)}function Ee(me){var Se;if(typeof me=="function")Se="[function "+(me.name||"anonymous")+"]";else{Se=me&&typeof me.toString=="function"?me.toString():a.toString(me);var Re=/\[object [a-zA-Z0-9$_]+\]/;if(Re.test(Se))try{var je=JSON.stringify(me);Se=je}catch{}Se.length===0&&(Se="(empty array)")}return"(<"+G(Se)+">, no stack trace)"}function G(me){var Se=41;return me.length<Se?me:me.substr(0,Se-3)+"..."}function de(){return typeof Ae=="function"}var ye=function(){return!1},le=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function ne(me){var Se=me.match(le);if(Se)return{fileName:Se[1],line:parseInt(Se[2],10)}}function fe(me,Se){if(de()){for(var Re=me.stack.split(`
`),je=Se.stack.split(`
`),rt=-1,at=-1,yt,pt,Le=0;Le<Re.length;++Le){var tt=ne(Re[Le]);if(tt){yt=tt.fileName,rt=tt.line;break}}for(var Le=0;Le<je.length;++Le){var tt=ne(je[Le]);if(tt){pt=tt.fileName,at=tt.line;break}}rt<0||at<0||!yt||!pt||yt!==pt||rt>=at||(ye=function(ft){if(l.test(ft))return!0;var Et=ne(ft);return!!(Et&&Et.fileName===yt&&rt<=Et.line&&Et.line<=at)})}}function Ne(me){this._parent=me,this._promisesCreated=0;var Se=this._length=1+(me===void 0?0:me._length);Ae(this,Ne),Se>32&&this.uncycle()}a.inherits(Ne,Error),e.CapturedTrace=Ne,Ne.prototype.uncycle=function(){var me=this._length;if(!(me<2)){for(var Se=[],Re={},je=0,rt=this;rt!==void 0;++je)Se.push(rt),rt=rt._parent;me=this._length=je;for(var je=me-1;je>=0;--je){var at=Se[je].stack;Re[at]===void 0&&(Re[at]=je)}for(var je=0;je<me;++je){var yt=Se[je].stack,pt=Re[yt];if(pt!==void 0&&pt!==je){pt>0&&(Se[pt-1]._parent=void 0,Se[pt-1]._length=1),Se[je]._parent=void 0,Se[je]._length=1;var Le=je>0?Se[je-1]:this;pt<me-1?(Le._parent=Se[pt+1],Le._parent.uncycle(),Le._length=Le._parent._length+1):(Le._parent=void 0,Le._length=1);for(var tt=Le._length+1,ft=je-2;ft>=0;--ft)Se[ft]._length=tt,tt++;return}}}},Ne.prototype.attachExtraTrace=function(me){if(!me.__stackCleaned__){this.uncycle();for(var Se=ce(me),Re=Se.message,je=[Se.stack],rt=this;rt!==void 0;)je.push(ae(rt.stack.split(`
`))),rt=rt._parent;X(je),J(je),a.notEnumerableProp(me,"stack",Z(Re,je)),a.notEnumerableProp(me,"__stackCleaned__",!0)}};var Ae=function(){var Se=/^\s*at\s*/,Re=function(yt,pt){return typeof yt=="string"?yt:pt.name!==void 0&&pt.message!==void 0?pt.toString():Ee(pt)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,f=Se,d=Re;var je=Error.captureStackTrace;return ye=function(yt){return l.test(yt)},function(yt,pt){Error.stackTraceLimit+=6,je(yt,pt),Error.stackTraceLimit-=6}}var rt=new Error;if(typeof rt.stack=="string"&&rt.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return f=/@/,d=Re,p=!0,function(pt){pt.stack=new Error().stack};var at;try{throw new Error}catch(yt){at="stack"in yt}return!("stack"in rt)&&at&&typeof Error.stackTraceLimit=="number"?(f=Se,d=Re,function(pt){Error.stackTraceLimit+=6;try{throw new Error}catch(Le){pt.stack=Le.stack}Error.stackTraceLimit-=6}):(d=function(yt,pt){return typeof yt=="string"?yt:(typeof pt=="object"||typeof pt=="function")&&pt.name!==void 0&&pt.message!==void 0?pt.toString():Ee(pt)},null)}();typeof console<"u"&&typeof console.warn<"u"&&(m=function(me){console.warn(me)},a.isNode&&process.stderr.isTTY?m=function(me,Se){var Re=Se?"\x1B[33m":"\x1B[31m";console.warn(Re+me+`\x1B[0m
`)}:!a.isNode&&typeof new Error().stack=="string"&&(m=function(me,Se){console.warn("%c"+me,Se?"color: darkorange":"color: red")}));var ue={warnings:y,longStackTraces:!1,cancellation:!1,monitoring:!1};return v&&n.longStackTraces(),{longStackTraces:function(){return ue.longStackTraces},warnings:function(){return ue.warnings},cancellation:function(){return ue.cancellation},monitoring:function(){return ue.monitoring},propagateFromFunction:function(){return Y},boundValueFunction:function(){return z},checkForgottenReturns:q,setBounds:fe,warn:K,deprecated:H,CapturedTrace:Ne,fireDomEvent:x,fireGlobalEvent:S}}),sF}var oF,MV;function bTe(){return MV||(MV=1,oF=function(n,e){var t=Si(),r=n.CancellationError,i=t.errorObj;function a(c,f,d){this.promise=c,this.type=f,this.handler=d,this.called=!1,this.cancelPromise=null}a.prototype.isFinallyHandler=function(){return this.type===0};function o(c){this.finallyHandler=c}o.prototype._resultCancelled=function(){s(this.finallyHandler)};function s(c,f){return c.cancelPromise!=null?(arguments.length>1?c.cancelPromise._reject(f):c.cancelPromise._cancel(),c.cancelPromise=null,!0):!1}function u(){return h.call(this,this.promise._target()._settledValue())}function l(c){if(!s(this,c))return i.e=c,i}function h(c){var f=this.promise,d=this.handler;if(!this.called){this.called=!0;var p=this.isFinallyHandler()?d.call(f._boundValue()):d.call(f._boundValue(),c);if(p!==void 0){f._setReturnedNonUndefined();var m=e(p,f);if(m instanceof n){if(this.cancelPromise!=null)if(m._isCancelled()){var g=new r("late cancellation observer");return f._attachExtraTrace(g),i.e=g,i}else m.isPending()&&m._attachCancellationCallback(new o(this));return m._then(u,l,void 0,this,void 0)}}}return f.isRejected()?(s(this),i.e=c,i):(s(this),c)}return n.prototype._passThrough=function(c,f,d,p){return typeof c!="function"?this.then():this._then(d,p,void 0,new a(this,f,c),void 0)},n.prototype.lastly=n.prototype.finally=function(c){return this._passThrough(c,0,h,h)},n.prototype.tap=function(c){return this._passThrough(c,1,h)},a}),oF}var uF,UV;function wTe(){return UV||(UV=1,uF=function(n){var e=Si(),t=mx().keys,r=e.tryCatch,i=e.errorObj;function a(o,s,u){return function(l){var h=u._boundValue();e:for(var c=0;c<o.length;++c){var f=o[c];if(f===Error||f!=null&&f.prototype instanceof Error){if(l instanceof f)return r(s).call(h,l)}else if(typeof f=="function"){var d=r(f).call(h,l);if(d===i)return d;if(d)return r(s).call(h,l)}else if(e.isObject(l)){for(var p=t(f),m=0;m<p.length;++m){var g=p[m];if(f[g]!=l[g])continue e}return r(s).call(h,l)}}return n}}return a}),uF}var lF,BV;function hre(){if(BV)return lF;BV=1;var n=Si(),e=n.maybeWrapAsError,t=$m(),r=t.OperationalError,i=mx();function a(l){return l instanceof Error&&i.getPrototypeOf(l)===Error.prototype}var o=/^(?:name|message|stack|cause)$/;function s(l){var h;if(a(l)){h=new r(l),h.name=l.name,h.message=l.message,h.stack=l.stack;for(var c=i.keys(l),f=0;f<c.length;++f){var d=c[f];o.test(d)||(h[d]=l[d])}return h}return n.markAsOriginatingFromRejection(l),l}function u(l,h){return function(c,f){if(l!==null){if(c){var d=s(e(c));l._attachExtraTrace(d),l._reject(d)}else if(!h)l._fulfill(f);else{for(var p=arguments.length,m=new Array(Math.max(p-1,0)),g=1;g<p;++g)m[g-1]=arguments[g];l._fulfill(m)}l=null}}}return lF=u,lF}var cF,zV;function xTe(){return zV||(zV=1,cF=function(n,e,t,r,i){var a=Si(),o=a.tryCatch;n.method=function(s){if(typeof s!="function")throw new n.TypeError("expecting a function but got "+a.classString(s));return function(){var u=new n(e);u._captureStackTrace(),u._pushContext();var l=o(s).apply(this,arguments),h=u._popContext();return i.checkForgottenReturns(l,h,"Promise.method",u),u._resolveFromSyncValue(l),u}},n.attempt=n.try=function(s){if(typeof s!="function")return r("expecting a function but got "+a.classString(s));var u=new n(e);u._captureStackTrace(),u._pushContext();var l;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var h=arguments[1],c=arguments[2];l=a.isArray(h)?o(s).apply(c,h):o(s).call(c,h)}else l=o(s)();var f=u._popContext();return i.checkForgottenReturns(l,f,"Promise.try",u),u._resolveFromSyncValue(l),u},n.prototype._resolveFromSyncValue=function(s){s===a.errorObj?this._rejectCallback(s.e,!1):this._resolveCallback(s,!0)}}),cF}var hF,WV;function _Te(){return WV||(WV=1,hF=function(n,e,t,r){var i=!1,a=function(l,h){this._reject(h)},o=function(l,h){h.promiseRejectionQueued=!0,h.bindingPromise._then(a,a,null,this,l)},s=function(l,h){(this._bitField&50397184)===0&&this._resolveCallback(h.target)},u=function(l,h){h.promiseRejectionQueued||this._reject(l)};n.prototype.bind=function(l){i||(i=!0,n.prototype._propagateFrom=r.propagateFromFunction(),n.prototype._boundValue=r.boundValueFunction());var h=t(l),c=new n(e);c._propagateFrom(this,1);var f=this._target();if(c._setBoundTo(h),h instanceof n){var d={promiseRejectionQueued:!1,promise:c,target:f,bindingPromise:h};f._then(e,o,void 0,c,d),h._then(s,u,void 0,c,d),c._setOnCancel(h)}else c._resolveCallback(f);return c},n.prototype._setBoundTo=function(l){l!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=l):this._bitField=this._bitField&-2097153},n.prototype._isBound=function(){return(this._bitField&2097152)===2097152},n.bind=function(l,h){return n.resolve(h).bind(l)}}),hF}var fF,jV;function STe(){return jV||(jV=1,fF=function(n,e,t,r){var i=Si(),a=i.tryCatch,o=i.errorObj,s=n._async;n.prototype.break=n.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var u=this,l=u;u._isCancellable();){if(!u._cancelBy(l)){l._isFollowing()?l._followee().cancel():l._cancelBranched();break}var h=u._cancellationParent;if(h==null||!h._isCancellable()){u._isFollowing()?u._followee().cancel():u._cancelBranched();break}else u._isFollowing()&&u._followee().cancel(),u._setWillBeCancelled(),l=u,u=h}},n.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},n.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},n.prototype._cancelBy=function(u){return u===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},n.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},n.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},n.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},n.prototype._unsetOnCancel=function(){this._onCancelField=void 0},n.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},n.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},n.prototype._doInvokeOnCancel=function(u,l){if(i.isArray(u))for(var h=0;h<u.length;++h)this._doInvokeOnCancel(u[h],l);else if(u!==void 0)if(typeof u=="function"){if(!l){var c=a(u).call(this._boundValue());c===o&&(this._attachExtraTrace(c.e),s.throwLater(c.e))}}else u._resultCancelled(this)},n.prototype._invokeOnCancel=function(){var u=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,u)},n.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},n.prototype._resultCancelled=function(){this.cancel()}}),fF}var dF,$V;function CTe(){return $V||($V=1,dF=function(n){function e(){return this.value}function t(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(r){return r instanceof n&&r.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:r},void 0)},n.prototype.throw=n.prototype.thenThrow=function(r){return this._then(t,void 0,void 0,{reason:r},void 0)},n.prototype.catchThrow=function(r){if(arguments.length<=1)return this._then(void 0,t,void 0,{reason:r},void 0);var i=arguments[1],a=function(){throw i};return this.caught(r,a)},n.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof n&&r.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:r},void 0);var i=arguments[1];i instanceof n&&i.suppressUnhandledRejections();var a=function(){return i};return this.caught(r,a)}}),dF}var pF,qV;function ETe(){return qV||(qV=1,pF=function(n){function e(u){u!==void 0?(u=u._target(),this._bitField=u._bitField,this._settledValueField=u._isFateSealed()?u._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var t=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},i=e.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},a=e.prototype.isRejected=function(){return(this._bitField&16777216)!==0},o=e.prototype.isPending=function(){return(this._bitField&50397184)===0},s=e.prototype.isResolved=function(){return(this._bitField&50331648)!==0};e.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},n.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},n.prototype._isCancelled=function(){return this._target().__isCancelled()},n.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},n.prototype.isPending=function(){return o.call(this._target())},n.prototype.isRejected=function(){return a.call(this._target())},n.prototype.isFulfilled=function(){return i.call(this._target())},n.prototype.isResolved=function(){return s.call(this._target())},n.prototype.value=function(){return t.call(this._target())},n.prototype.reason=function(){var u=this._target();return u._unsetRejectionIsUnhandled(),r.call(u)},n.prototype._value=function(){return this._settledValue()},n.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},n.PromiseInspection=e}),pF}var gF,VV;function TTe(){return VV||(VV=1,gF=function(n,e,t,r,i,a){var o=Si(),s=o.canEvaluate,u=o.tryCatch,l=o.errorObj,h;if(s){for(var c=function(v){return new Function("value","holder",`                             
	            'use strict';                                                    
	            holder.pIndex = value;                                           
	            holder.checkFulfillment(this);                                   
	            `.replace(/Index/g,v))},f=function(v){return new Function("promise","holder",`                           
	            'use strict';                                                    
	            holder.pIndex = promise;                                         
	            `.replace(/Index/g,v))},d=function(v){for(var b=new Array(v),w=0;w<b.length;++w)b[w]="this.p"+(w+1);var x=b.join(" = ")+" = null;",S=`var promise;
`+b.map(function(T){return`                                                         
	                promise = `+T+`;                                      
	                if (promise instanceof Promise) {                            
	                    promise.cancel();                                        
	                }                                                            
	            `}).join(`
`),E=b.join(", "),A="Holder$"+v,k=`return function(tryCatch, errorObj, Promise, async) {    
	            'use strict';                                                    
	            function [TheName](fn) {                                         
	                [TheProperties]                                              
	                this.fn = fn;                                                
	                this.asyncNeeded = true;                                     
	                this.now = 0;                                                
	            }                                                                
	                                                                             
	            [TheName].prototype._callFunction = function(promise) {          
	                promise._pushContext();                                      
	                var ret = tryCatch(this.fn)([ThePassedArguments]);           
	                promise._popContext();                                       
	                if (ret === errorObj) {                                      
	                    promise._rejectCallback(ret.e, false);                   
	                } else {                                                     
	                    promise._resolveCallback(ret);                           
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype.checkFulfillment = function(promise) {       
	                var now = ++this.now;                                        
	                if (now === [TheTotal]) {                                    
	                    if (this.asyncNeeded) {                                  
	                        async.invoke(this._callFunction, this, promise);     
	                    } else {                                                 
	                        this._callFunction(promise);                         
	                    }                                                        
	                                                                             
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype._resultCancelled = function() {              
	                [CancellationCode]                                           
	            };                                                               
	                                                                             
	            return [TheName];                                                
	        }(tryCatch, errorObj, Promise, async);                               
	        `;return k=k.replace(/\[TheName\]/g,A).replace(/\[TheTotal\]/g,v).replace(/\[ThePassedArguments\]/g,E).replace(/\[TheProperties\]/g,x).replace(/\[CancellationCode\]/g,S),new Function("tryCatch","errorObj","Promise","async",k)(u,l,n,i)},p=[],m=[],g=[],y=0;y<8;++y)p.push(d(y+1)),m.push(c(y+1)),g.push(f(y+1));h=function(v){this._reject(v)}}n.join=function(){var v=arguments.length-1,b;if(v>0&&typeof arguments[v]=="function"&&(b=arguments[v],v<=8&&s)){var R=new n(r);R._captureStackTrace();for(var w=p[v-1],x=new w(b),S=m,E=0;E<v;++E){var A=t(arguments[E],R);if(A instanceof n){A=A._target();var k=A._bitField;(k&50397184)===0?(A._then(S[E],h,void 0,R,x),g[E](A,x),x.asyncNeeded=!1):(k&33554432)!==0?S[E].call(R,A._value(),x):(k&16777216)!==0?R._reject(A._reason()):R._cancel()}else S[E].call(R,A,x)}if(!R._isFateSealed()){if(x.asyncNeeded){var T=a();T!==null&&(x.fn=o.domainBind(T,x.fn))}R._setAsyncGuaranteed(),R._setOnCancel(x)}return R}for(var O=arguments.length,F=new Array(O),I=0;I<O;++I)F[I]=arguments[I];b&&F.pop();var R=new e(F).promise();return b!==void 0?R.spread(b):R}}),gF}var mF,HV;function DTe(){return HV||(HV=1,mF=function(n,e,t,r,i,a){var o=n._getDomain,s=Si(),u=s.tryCatch,l=s.errorObj,h=n._async;function c(d,p,m,g){this.constructor$(d),this._promise._captureStackTrace();var y=o();this._callback=y===null?p:s.domainBind(y,p),this._preservedValues=g===i?new Array(this.length()):null,this._limit=m,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}s.inherits(c,e),c.prototype._asyncInit=function(){this._init$(void 0,-2)},c.prototype._init=function(){},c.prototype._promiseFulfilled=function(d,p){var m=this._values,g=this.length(),y=this._preservedValues,v=this._limit;if(p<0){if(p=p*-1-1,m[p]=d,v>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(v>=1&&this._inFlight>=v)return m[p]=d,this._queue.push(p),!1;y!==null&&(y[p]=d);var b=this._promise,w=this._callback,x=b._boundValue();b._pushContext();var S=u(w).call(x,d,p,g),E=b._popContext();if(a.checkForgottenReturns(S,E,y!==null?"Promise.filter":"Promise.map",b),S===l)return this._reject(S.e),!0;var A=r(S,this._promise);if(A instanceof n){A=A._target();var k=A._bitField;if((k&50397184)===0)return v>=1&&this._inFlight++,m[p]=A,A._proxy(this,(p+1)*-1),!1;if((k&33554432)!==0)S=A._value();else return(k&16777216)!==0?(this._reject(A._reason()),!0):(this._cancel(),!0)}m[p]=S}var T=++this._totalResolved;return T>=g?(y!==null?this._filter(m,y):this._resolve(m),!0):!1},c.prototype._drainQueue=function(){for(var d=this._queue,p=this._limit,m=this._values;d.length>0&&this._inFlight<p;){if(this._isResolved())return;var g=d.pop();this._promiseFulfilled(m[g],g)}},c.prototype._filter=function(d,p){for(var m=p.length,g=new Array(m),y=0,v=0;v<m;++v)d[v]&&(g[y++]=p[v]);g.length=y,this._resolve(g)},c.prototype.preservedValues=function(){return this._preservedValues};function f(d,p,m,g){if(typeof p!="function")return t("expecting a function but got "+s.classString(p));var y=0;if(m!==void 0)if(typeof m=="object"&&m!==null){if(typeof m.concurrency!="number")return n.reject(new TypeError("'concurrency' must be a number but it is "+s.classString(m.concurrency)));y=m.concurrency}else return n.reject(new TypeError("options argument must be an object but it is "+s.classString(m)));return y=typeof y=="number"&&isFinite(y)&&y>=1?y:0,new c(d,p,y,g).promise()}n.prototype.map=function(d,p){return f(this,d,p,null)},n.map=function(d,p,m,g){return f(d,p,m,g)}}),mF}var yF,GV;function ATe(){if(GV)return yF;GV=1;var n=Object.create;if(n){var e=n(null),t=n(null);e[" size"]=t[" size"]=0}return yF=function(r){var i=Si(),a=i.canEvaluate,o=i.isIdentifier,s,u;{var l=function(g){return new Function("ensureMethod",`                                    
	        return function(obj) {                                               
	            'use strict'                                                     
	            var len = this.length;                                           
	            ensureMethod(obj, 'methodName');                                 
	            switch(len) {                                                    
	                case 1: return obj.methodName(this[0]);                      
	                case 2: return obj.methodName(this[0], this[1]);             
	                case 3: return obj.methodName(this[0], this[1], this[2]);    
	                case 0: return obj.methodName();                             
	                default:                                                     
	                    return obj.methodName.apply(obj, this);                  
	            }                                                                
	        };                                                                   
	        `.replace(/methodName/g,g))(f)},h=function(g){return new Function("obj",`                                             
	        'use strict';                                                        
	        return obj.propertyName;                                             
	        `.replace("propertyName",g))},c=function(g,y,v){var b=v[g];if(typeof b!="function"){if(!o(g))return null;if(b=y(g),v[g]=b,v[" size"]++,v[" size"]>512){for(var w=Object.keys(v),x=0;x<256;++x)delete v[w[x]];v[" size"]=w.length-256}}return b};s=function(g){return c(g,l,e)},u=function(g){return c(g,h,t)}}function f(g,y){var v;if(g!=null&&(v=g[y]),typeof v!="function"){var b="Object "+i.classString(g)+" has no method '"+i.toString(y)+"'";throw new r.TypeError(b)}return v}function d(g){var y=this.pop(),v=f(g,y);return v.apply(g,this)}r.prototype.call=function(g){for(var y=arguments.length,v=new Array(Math.max(y-1,0)),b=1;b<y;++b)v[b-1]=arguments[b];if(a){var w=s(g);if(w!==null)return this._then(w,void 0,void 0,v,void 0)}return v.push(g),this._then(d,void 0,void 0,v,void 0)};function p(g){return g[this]}function m(g){var y=+this;return y<0&&(y=Math.max(0,y+g.length)),g[y]}r.prototype.get=function(g){var y=typeof g=="number",v;if(y)v=m;else if(a){var b=u(g);v=b!==null?b:p}else v=p;return this._then(v,void 0,void 0,g,void 0)}},yF}var vF,XV;function kTe(){return XV||(XV=1,vF=function(n,e,t,r,i,a){var o=Si(),s=$m().TypeError,u=Si().inherits,l=o.errorObj,h=o.tryCatch,c={};function f(b){setTimeout(function(){throw b},0)}function d(b){var w=t(b);return w!==b&&typeof b._isDisposable=="function"&&typeof b._getDisposer=="function"&&b._isDisposable()&&w._setDisposable(b._getDisposer()),w}function p(b,w){var x=0,S=b.length,E=new n(i);function A(){if(x>=S)return E._fulfill();var k=d(b[x++]);if(k instanceof n&&k._isDisposable()){try{k=t(k._getDisposer().tryDispose(w),b.promise)}catch(T){return f(T)}if(k instanceof n)return k._then(A,f,null,null,null)}A()}return A(),E}function m(b,w,x){this._data=b,this._promise=w,this._context=x}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():c},m.prototype.tryDispose=function(b){var w=this.resource(),x=this._context;x!==void 0&&x._pushContext();var S=w!==c?this.doDispose(w,b):null;return x!==void 0&&x._popContext(),this._promise._unsetDisposable(),this._data=null,S},m.isDisposer=function(b){return b!=null&&typeof b.resource=="function"&&typeof b.tryDispose=="function"};function g(b,w,x){this.constructor$(b,w,x)}u(g,m),g.prototype.doDispose=function(b,w){var x=this.data();return x.call(b,b,w)};function y(b){return m.isDisposer(b)?(this.resources[this.index]._setDisposable(b),b.promise()):b}function v(b){this.length=b,this.promise=null,this[b-1]=null}v.prototype._resultCancelled=function(){for(var b=this.length,w=0;w<b;++w){var x=this[w];x instanceof n&&x.cancel()}},n.using=function(){var b=arguments.length;if(b<2)return e("you must pass at least 2 arguments to Promise.using");var w=arguments[b-1];if(typeof w!="function")return e("expecting a function but got "+o.classString(w));var x,S=!0;b===2&&Array.isArray(arguments[0])?(x=arguments[0],b=x.length,S=!1):(x=arguments,b--);for(var E=new v(b),A=0;A<b;++A){var k=x[A];if(m.isDisposer(k)){var T=k;k=k.promise(),k._setDisposable(T)}else{var O=t(k);O instanceof n&&(k=O._then(y,null,null,{resources:E,index:A},void 0))}E[A]=k}for(var F=new Array(E.length),A=0;A<F.length;++A)F[A]=n.resolve(E[A]).reflect();var I=n.all(F).then(function(U){for(var B=0;B<U.length;++B){var W=U[B];if(W.isRejected())return l.e=W.error(),l;if(!W.isFulfilled()){I.cancel();return}U[B]=W.value()}R._pushContext(),w=h(w);var Y=S?w.apply(void 0,U):w(U),z=R._popContext();return a.checkForgottenReturns(Y,z,"Promise.using",R),Y}),R=I.lastly(function(){var U=new n.PromiseInspection(I);return p(E,U)});return E.promise=R,R._setOnCancel(E),R},n.prototype._setDisposable=function(b){this._bitField=this._bitField|131072,this._disposer=b},n.prototype._isDisposable=function(){return(this._bitField&131072)>0},n.prototype._getDisposer=function(){return this._disposer},n.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},n.prototype.disposer=function(b){if(typeof b=="function")return new g(b,this,r());throw new s}}),vF}var bF,KV;function NTe(){return KV||(KV=1,bF=function(n,e,t){var r=Si(),i=n.TimeoutError;function a(c){this.handle=c}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var o=function(c){return s(+this).thenReturn(c)},s=n.delay=function(c,f){var d,p;return f!==void 0?(d=n.resolve(f)._then(o,null,null,c,void 0),t.cancellation()&&f instanceof n&&d._setOnCancel(f)):(d=new n(e),p=setTimeout(function(){d._fulfill()},+c),t.cancellation()&&d._setOnCancel(new a(p)),d._captureStackTrace()),d._setAsyncGuaranteed(),d};n.prototype.delay=function(c){return s(c,this)};var u=function(c,f,d){var p;typeof f!="string"?f instanceof Error?p=f:p=new i("operation timed out"):p=new i(f),r.markAsOriginatingFromRejection(p),c._attachExtraTrace(p),c._reject(p),d!=null&&d.cancel()};function l(c){return clearTimeout(this.handle),c}function h(c){throw clearTimeout(this.handle),c}n.prototype.timeout=function(c,f){c=+c;var d,p,m=new a(setTimeout(function(){d.isPending()&&u(d,f,p)},c));return t.cancellation()?(p=this.then(),d=p._then(l,h,void 0,m,void 0),d._setOnCancel(m)):d=this._then(l,h,void 0,m,void 0),d}}),bF}var wF,YV;function OTe(){return YV||(YV=1,wF=function(n,e,t,r,i,a){var o=$m(),s=o.TypeError,u=Si(),l=u.errorObj,h=u.tryCatch,c=[];function f(p,m,g){for(var y=0;y<m.length;++y){g._pushContext();var v=h(m[y])(p);if(g._popContext(),v===l){g._pushContext();var b=n.reject(l.e);return g._popContext(),b}var w=r(v,g);if(w instanceof n)return w}return null}function d(p,m,g,y){if(a.cancellation()){var v=new n(t),b=this._finallyPromise=new n(t);this._promise=v.lastly(function(){return b}),v._captureStackTrace(),v._setOnCancel(this)}else{var w=this._promise=new n(t);w._captureStackTrace()}this._stack=y,this._generatorFunction=p,this._receiver=m,this._generator=void 0,this._yieldHandlers=typeof g=="function"?[g].concat(c):c,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(d,i),d.prototype._isResolved=function(){return this._promise===null},d.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var p=typeof this._generator.return<"u",m;if(p)this._promise._pushContext(),m=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var g=new n.CancellationError("generator .return() sentinel");n.coroutine.returnSentinel=g,this._promise._attachExtraTrace(g),this._promise._pushContext(),m=h(this._generator.throw).call(this._generator,g),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(m)}},d.prototype._promiseFulfilled=function(p){this._yieldedPromise=null,this._promise._pushContext();var m=h(this._generator.next).call(this._generator,p);this._promise._popContext(),this._continue(m)},d.prototype._promiseRejected=function(p){this._yieldedPromise=null,this._promise._attachExtraTrace(p),this._promise._pushContext();var m=h(this._generator.throw).call(this._generator,p);this._promise._popContext(),this._continue(m)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof n){var p=this._yieldedPromise;this._yieldedPromise=null,p.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(p){var m=this._promise;if(p===l)return this._cleanup(),this._cancellationPhase?m.cancel():m._rejectCallback(p.e,!1);var g=p.value;if(p.done===!0)return this._cleanup(),this._cancellationPhase?m.cancel():m._resolveCallback(g);var y=r(g,this._promise);if(!(y instanceof n)&&(y=f(y,this._yieldHandlers,this._promise),y===null)){this._promiseRejected(new s(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",g)+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}y=y._target();var v=y._bitField;(v&50397184)===0?(this._yieldedPromise=y,y._proxy(this,null)):(v&33554432)!==0?n._async.invoke(this._promiseFulfilled,this,y._value()):(v&16777216)!==0?n._async.invoke(this._promiseRejected,this,y._reason()):this._promiseCancelled()},n.coroutine=function(p,m){if(typeof p!="function")throw new s(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var g=Object(m).yieldHandler,y=d,v=new Error().stack;return function(){var b=p.apply(this,arguments),w=new y(void 0,void 0,g,v),x=w.promise();return w._generator=b,w._promiseFulfilled(void 0),x}},n.coroutine.addYieldHandler=function(p){if(typeof p!="function")throw new s("expecting a function but got "+u.classString(p));c.push(p)},n.spawn=function(p){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),typeof p!="function")return e(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var m=new d(p,this),g=m.promise();return m._run(n.spawn),g}}),wF}var xF,QV;function RTe(){return QV||(QV=1,xF=function(n){var e=Si(),t=n._async,r=e.tryCatch,i=e.errorObj;function a(u,l){var h=this;if(!e.isArray(u))return o.call(h,u,l);var c=r(l).apply(h._boundValue(),[null].concat(u));c===i&&t.throwLater(c.e)}function o(u,l){var h=this,c=h._boundValue(),f=u===void 0?r(l).call(c,null):r(l).call(c,null,u);f===i&&t.throwLater(f.e)}function s(u,l){var h=this;if(!u){var c=new Error(u+"");c.cause=u,u=c}var f=r(l).call(h._boundValue(),u);f===i&&t.throwLater(f.e)}n.prototype.asCallback=n.prototype.nodeify=function(u,l){if(typeof u=="function"){var h=o;l!==void 0&&Object(l).spread&&(h=a),this._then(h,s,void 0,this,u)}return this}}),xF}var _F,ZV;function ITe(){return ZV||(ZV=1,_F=function(n,e){var t={},r=Si(),i=hre(),a=r.withAppended,o=r.maybeWrapAsError,s=r.canEvaluate,u=$m().TypeError,l="Async",h={__isPromisified__:!0},c=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],f=new RegExp("^(?:"+c.join("|")+")$"),d=function(I){return r.isIdentifier(I)&&I.charAt(0)!=="_"&&I!=="constructor"};function p(I){return!f.test(I)}function m(I){try{return I.__isPromisified__===!0}catch{return!1}}function g(I,R,U){var B=r.getDataPropertyOrDefault(I,R+U,h);return B?m(B):!1}function y(I,R,U){for(var B=0;B<I.length;B+=2){var W=I[B];if(U.test(W)){for(var Y=W.replace(U,""),z=0;z<I.length;z+=2)if(I[z]===Y)throw new u(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",R))}}}function v(I,R,U,B){for(var W=r.inheritedDataKeys(I),Y=[],z=0;z<W.length;++z){var j=W[z],M=I[j],q=B===d?!0:d(j);typeof M=="function"&&!m(M)&&!g(I,j,R)&&B(j,M,I,q)&&Y.push(j,M)}return y(Y,R,U),Y}var b=function(I){return I.replace(/([$])/,"\\$")},w;{var x=function(I){for(var R=[I],U=Math.max(0,I-1-3),B=I-1;B>=U;--B)R.push(B);for(var B=I+1;B<=3;++B)R.push(B);return R},S=function(I){return r.filledRange(I,"_arg","")},E=function(I){return r.filledRange(Math.max(I,3),"_arg","")},A=function(I){return typeof I.length=="number"?Math.max(Math.min(I.length,1024),0):0};w=function(I,R,U,B,W,Y){var z=Math.max(0,A(B)-1),j=x(z),M=typeof I=="string"||R===t;function q(J){var X=S(J).join(", "),ae=J>0?", ":"",ie;return M?ie=`ret = callback.call(this, {{args}}, nodeback); break;
`:ie=R===void 0?`ret = callback({{args}}, nodeback); break;
`:`ret = callback.call(receiver, {{args}}, nodeback); break;
`,ie.replace("{{args}}",X).replace(", ",ae)}function H(){for(var J="",X=0;X<j.length;++X)J+="case "+j[X]+":"+q(j[X]);return J+=`                                                             
	        default:                                                             
	            var args = new Array(len + 1);                                   
	            var i = 0;                                                       
	            for (var i = 0; i < len; ++i) {                                  
	               args[i] = arguments[i];                                       
	            }                                                                
	            args[i] = nodeback;                                              
	            [CodeForCall]                                                    
	            break;                                                           
	        `.replace("[CodeForCall]",M?`ret = callback.apply(this, args);
`:`ret = callback.apply(receiver, args);
`),J}var K=typeof I=="string"?"this != null ? this['"+I+"'] : fn":"fn",Z=`'use strict';                                                
	        var ret = function (Parameters) {                                    
	            'use strict';                                                    
	            var len = arguments.length;                                      
	            var promise = new Promise(INTERNAL);                             
	            promise._captureStackTrace();                                    
	            var nodeback = nodebackForPromise(promise, `+Y+`);   
	            var ret;                                                         
	            var callback = tryCatch([GetFunctionCode]);                      
	            switch(len) {                                                    
	                [CodeForSwitchCase]                                          
	            }                                                                
	            if (ret === errorObj) {                                          
	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);
	            }                                                                
	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     
	            return promise;                                                  
	        };                                                                   
	        notEnumerableProp(ret, '__isPromisified__', true);                   
	        return ret;                                                          
	    `.replace("[CodeForSwitchCase]",H()).replace("[GetFunctionCode]",K);return Z=Z.replace("Parameters",E(z)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",Z)(n,B,R,a,o,i,r.tryCatch,r.errorObj,r.notEnumerableProp,e)}}function k(I,R,U,B,W,Y){var z=function(){return this}(),j=I;typeof j=="string"&&(I=B);function M(){var q=R;R===t&&(q=this);var H=new n(e);H._captureStackTrace();var K=typeof j=="string"&&this!==z?this[j]:I,Z=i(H,Y);try{K.apply(q,a(arguments,Z))}catch(J){H._rejectCallback(o(J),!0,!0)}return H._isFateSealed()||H._setAsyncGuaranteed(),H}return r.notEnumerableProp(M,"__isPromisified__",!0),M}var T=s?w:k;function O(I,R,U,B,W){for(var Y=new RegExp(b(R)+"$"),z=v(I,R,Y,U),j=0,M=z.length;j<M;j+=2){var q=z[j],H=z[j+1],K=q+R;if(B===T)I[K]=T(q,t,q,H,R,W);else{var Z=B(H,function(){return T(q,t,q,H,R,W)});r.notEnumerableProp(Z,"__isPromisified__",!0),I[K]=Z}}return r.toFastProperties(I),I}function F(I,R,U){return T(I,R,void 0,I,null,U)}n.promisify=function(I,R){if(typeof I!="function")throw new u("expecting a function but got "+r.classString(I));if(m(I))return I;R=Object(R);var U=R.context===void 0?t:R.context,B=!!R.multiArgs,W=F(I,U,B);return r.copyDescriptors(I,W,p),W},n.promisifyAll=function(I,R){if(typeof I!="function"&&typeof I!="object")throw new u(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);R=Object(R);var U=!!R.multiArgs,B=R.suffix;typeof B!="string"&&(B=l);var W=R.filter;typeof W!="function"&&(W=d);var Y=R.promisifier;if(typeof Y!="function"&&(Y=T),!r.isIdentifier(B))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var z=r.inheritedDataKeys(I),j=0;j<z.length;++j){var M=I[z[j]];z[j]!=="constructor"&&r.isClass(M)&&(O(M.prototype,B,W,Y,U),O(M,B,W,Y,U))}return O(I,B,W,Y,U)}}),_F}var SF,JV;function FTe(){return JV||(JV=1,SF=function(n,e,t,r){var i=Si(),a=i.isObject,o=mx(),s;typeof Map=="function"&&(s=Map);var u=function(){var f=0,d=0;function p(m,g){this[f]=m,this[f+d]=g,f++}return function(g){d=g.size,f=0;var y=new Array(g.size*2);return g.forEach(p,y),y}}(),l=function(f){for(var d=new s,p=f.length/2|0,m=0;m<p;++m){var g=f[p+m],y=f[m];d.set(g,y)}return d};function h(f){var d=!1,p;if(s!==void 0&&f instanceof s)p=u(f),d=!0;else{var m=o.keys(f),g=m.length;p=new Array(g*2);for(var y=0;y<g;++y){var v=m[y];p[y]=f[v],p[y+g]=v}}this.constructor$(p),this._isMap=d,this._init$(void 0,-3)}i.inherits(h,e),h.prototype._init=function(){},h.prototype._promiseFulfilled=function(f,d){this._values[d]=f;var p=++this._totalResolved;if(p>=this._length){var m;if(this._isMap)m=l(this._values);else{m={};for(var g=this.length(),y=0,v=this.length();y<v;++y)m[this._values[y+g]]=this._values[y]}return this._resolve(m),!0}return!1},h.prototype.shouldCopyValues=function(){return!1},h.prototype.getActualLength=function(f){return f>>1};function c(f){var d,p=t(f);if(a(p))p instanceof n?d=p._then(n.props,void 0,void 0,void 0,void 0):d=new h(p).promise();else return r(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return p instanceof n&&d._propagateFrom(p,2),d}n.prototype.props=function(){return c(this)},n.props=function(f){return c(f)}}),SF}var CF,eH;function PTe(){return eH||(eH=1,CF=function(n,e,t,r){var i=Si(),a=function(s){return s.then(function(u){return o(u,s)})};function o(s,u){var l=t(s);if(l instanceof n)return a(l);if(s=i.asArray(s),s===null)return r("expecting an array or an iterable object but got "+i.classString(s));var h=new n(e);u!==void 0&&h._propagateFrom(u,3);for(var c=h._fulfill,f=h._reject,d=0,p=s.length;d<p;++d){var m=s[d];m===void 0&&!(d in s)||n.cast(m)._then(c,f,void 0,h,null)}return h}n.race=function(s){return o(s,void 0)},n.prototype.race=function(){return o(this,void 0)}}),CF}var EF,tH;function LTe(){return tH||(tH=1,EF=function(n,e,t,r,i,a){var o=n._getDomain,s=Si(),u=s.tryCatch;function l(p,m,g,y){this.constructor$(p);var v=o();this._fn=v===null?m:s.domainBind(v,m),g!==void 0&&(g=n.resolve(g),g._attachCancellationCallback(this)),this._initialValue=g,this._currentCancellable=null,y===i?this._eachValues=Array(this._length):y===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}s.inherits(l,e),l.prototype._gotAccum=function(p){this._eachValues!==void 0&&this._eachValues!==null&&p!==i&&this._eachValues.push(p)},l.prototype._eachComplete=function(p){return this._eachValues!==null&&this._eachValues.push(p),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(p){this._promise._resolveCallback(p),this._values=null},l.prototype._resultCancelled=function(p){if(p===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof n&&this._currentCancellable.cancel(),this._initialValue instanceof n&&this._initialValue.cancel())},l.prototype._iterate=function(p){this._values=p;var m,g,y=p.length;if(this._initialValue!==void 0?(m=this._initialValue,g=0):(m=n.resolve(p[0]),g=1),this._currentCancellable=m,!m.isRejected())for(;g<y;++g){var v={accum:null,value:p[g],index:g,length:y,array:this};m=m._then(f,void 0,void 0,v,void 0)}this._eachValues!==void 0&&(m=m._then(this._eachComplete,void 0,void 0,this,void 0)),m._then(h,h,void 0,m,this)},n.prototype.reduce=function(p,m){return c(this,p,m,null)},n.reduce=function(p,m,g,y){return c(p,m,g,y)};function h(p,m){this.isFulfilled()?m._resolve(p):m._reject(p)}function c(p,m,g,y){if(typeof m!="function")return t("expecting a function but got "+s.classString(m));var v=new l(p,m,g,y);return v.promise()}function f(p){this.accum=p,this.array._gotAccum(p);var m=r(this.value,this.array._promise);return m instanceof n?(this.array._currentCancellable=m,m._then(d,void 0,void 0,this,void 0)):d.call(this,m)}function d(p){var m=this.array,g=m._promise,y=u(m._fn);g._pushContext();var v;m._eachValues!==void 0?v=y.call(g._boundValue(),p,this.index,this.length):v=y.call(g._boundValue(),this.accum,p,this.index,this.length),v instanceof n&&(m._currentCancellable=v);var b=g._popContext();return a.checkForgottenReturns(v,b,m._eachValues!==void 0?"Promise.each":"Promise.reduce",g),v}}),EF}var TF,nH;function MTe(){return nH||(nH=1,TF=function(n,e,t){var r=n.PromiseInspection,i=Si();function a(o){this.constructor$(o)}i.inherits(a,e),a.prototype._promiseResolved=function(o,s){this._values[o]=s;var u=++this._totalResolved;return u>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseFulfilled=function(o,s){var u=new r;return u._bitField=33554432,u._settledValueField=o,this._promiseResolved(s,u)},a.prototype._promiseRejected=function(o,s){var u=new r;return u._bitField=16777216,u._settledValueField=o,this._promiseResolved(s,u)},n.settle=function(o){return t.deprecated(".settle()",".reflect()"),new a(o).promise()},n.prototype.settle=function(){return n.settle(this)}}),TF}var DF,rH;function UTe(){return rH||(rH=1,DF=function(n,e,t){var r=Si(),i=$m().RangeError,a=$m().AggregateError,o=r.isArray,s={};function u(h){this.constructor$(h),this._howMany=0,this._unwrap=!1,this._initialized=!1}r.inherits(u,e),u.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var h=o(this._values);!this._isResolved()&&h&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(h){this._howMany=h},u.prototype._promiseFulfilled=function(h){return this._addFulfilled(h),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},u.prototype._promiseRejected=function(h){return this._addRejected(h),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof n||this._values==null?this._cancel():(this._addRejected(s),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var h=new a,c=this.length();c<this._values.length;++c)this._values[c]!==s&&h.push(this._values[c]);return h.length>0?this._reject(h):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(h){this._values.push(h)},u.prototype._addFulfilled=function(h){this._values[this._totalResolved++]=h},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(h){var c="Input array must contain at least "+this._howMany+" items but contains only "+h+" items";return new i(c)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function l(h,c){if((c|0)!==c||c<0)return t(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var f=new u(h),d=f.promise();return f.setHowMany(c),f.init(),d}n.some=function(h,c){return l(h,c)},n.prototype.some=function(h){return l(this,h)},n._SomePromiseArray=u}),DF}var AF,iH;function BTe(){return iH||(iH=1,AF=function(n,e){var t=n.map;n.prototype.filter=function(r,i){return t(this,r,i,e)},n.filter=function(r,i,a){return t(r,i,a,e)}}),AF}var kF,aH;function zTe(){return aH||(aH=1,kF=function(n,e){var t=n.reduce,r=n.all;function i(){return r(this)}function a(o,s){return t(o,s,e,e)}n.prototype.each=function(o){return t(this,o,e,0)._then(i,void 0,void 0,this,void 0)},n.prototype.mapSeries=function(o){return t(this,o,e,e)},n.each=function(o,s){return t(o,s,e,0)._then(i,void 0,void 0,o,void 0)},n.mapSeries=a}),kF}var NF,sH;function WTe(){return sH||(sH=1,NF=function(n){var e=n._SomePromiseArray;function t(r){var i=new e(r),a=i.promise();return i.setHowMany(1),i.setUnwrap(),i.init(),a}n.any=function(r){return t(r)},n.prototype.any=function(){return t(this)}}),NF}var oH;function jTe(){return oH||(oH=1,function(n){n.exports=function(){var e=function(){return new f(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},t=function(){return new F.PromiseInspection(this._target())},r=function(B){return F.reject(new f(B))};function i(){}var a={},o=Si(),s;o.isNode?s=function(){var B=process.domain;return B===void 0&&(B=null),B}:s=function(){return null},o.notEnumerableProp(F,"_getDomain",s);var u=mx(),l=pTe(),h=new l;u.defineProperty(F,"_async",{value:h});var c=$m(),f=F.TypeError=c.TypeError;F.RangeError=c.RangeError;var d=F.CancellationError=c.CancellationError;F.TimeoutError=c.TimeoutError,F.OperationalError=c.OperationalError,F.RejectionError=c.OperationalError,F.AggregateError=c.AggregateError;var p=function(){},m={},g={},y=gTe()(F,p),v=mTe()(F,p,y,r,i),b=yTe()(F),w=b.create,x=vTe()(F,b);x.CapturedTrace;var S=bTe()(F,y),E=wTe()(g),A=hre(),k=o.errorObj,T=o.tryCatch;function O(B,W){if(typeof W!="function")throw new f("expecting a function but got "+o.classString(W));if(B.constructor!==F)throw new f(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`)}function F(B){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,B!==p&&(O(this,B),this._resolveFromExecutor(B)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}F.prototype.toString=function(){return"[object Promise]"},F.prototype.caught=F.prototype.catch=function(B){var W=arguments.length;if(W>1){var Y=new Array(W-1),z=0,j;for(j=0;j<W-1;++j){var M=arguments[j];if(o.isObject(M))Y[z++]=M;else return r("expecting an object but got A catch statement predicate "+o.classString(M))}return Y.length=z,B=arguments[j],this.then(void 0,E(Y,B,this))}return this.then(void 0,B)},F.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},F.prototype.then=function(B,W){if(x.warnings()&&arguments.length>0&&typeof B!="function"&&typeof W!="function"){var Y=".then() only accepts functions but was passed: "+o.classString(B);arguments.length>1&&(Y+=", "+o.classString(W)),this._warn(Y)}return this._then(B,W,void 0,void 0,void 0)},F.prototype.done=function(B,W){var Y=this._then(B,W,void 0,void 0,void 0);Y._setIsFinal()},F.prototype.spread=function(B){return typeof B!="function"?r("expecting a function but got "+o.classString(B)):this.all()._then(B,void 0,void 0,m,void 0)},F.prototype.toJSON=function(){var B={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(B.fulfillmentValue=this.value(),B.isFulfilled=!0):this.isRejected()&&(B.rejectionReason=this.reason(),B.isRejected=!0),B},F.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new v(this).promise()},F.prototype.error=function(B){return this.caught(o.originatesFromRejection,B)},F.getNewLibraryCopy=n.exports,F.is=function(B){return B instanceof F},F.fromNode=F.fromCallback=function(B){var W=new F(p);W._captureStackTrace();var Y=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,z=T(B)(A(W,Y));return z===k&&W._rejectCallback(z.e,!0),W._isFateSealed()||W._setAsyncGuaranteed(),W},F.all=function(B){return new v(B).promise()},F.cast=function(B){var W=y(B);return W instanceof F||(W=new F(p),W._captureStackTrace(),W._setFulfilled(),W._rejectionHandler0=B),W},F.resolve=F.fulfilled=F.cast,F.reject=F.rejected=function(B){var W=new F(p);return W._captureStackTrace(),W._rejectCallback(B,!0),W},F.setScheduler=function(B){if(typeof B!="function")throw new f("expecting a function but got "+o.classString(B));return h.setScheduler(B)},F.prototype._then=function(B,W,Y,z,j){var M=j!==void 0,q=M?j:new F(p),H=this._target(),K=H._bitField;M||(q._propagateFrom(this,3),q._captureStackTrace(),z===void 0&&(this._bitField&2097152)!==0&&((K&50397184)!==0?z=this._boundValue():z=H===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,q));var Z=s();if((K&50397184)!==0){var J,X,ae=H._settlePromiseCtx;(K&33554432)!==0?(X=H._rejectionHandler0,J=B):(K&16777216)!==0?(X=H._fulfillmentHandler0,J=W,H._unsetRejectionIsUnhandled()):(ae=H._settlePromiseLateCancellationObserver,X=new d("late cancellation observer"),H._attachExtraTrace(X),J=W),h.invoke(ae,H,{handler:Z===null?J:typeof J=="function"&&o.domainBind(Z,J),promise:q,receiver:z,value:X})}else H._addCallbacks(B,W,q,z,Z);return q},F.prototype._length=function(){return this._bitField&65535},F.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},F.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},F.prototype._setLength=function(B){this._bitField=this._bitField&-65536|B&65535},F.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},F.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},F.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},F.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},F.prototype._isFinal=function(){return(this._bitField&4194304)>0},F.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},F.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},F.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},F.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=this._bitField|134217728)},F.prototype._receiverAt=function(B){var W=B===0?this._receiver0:this[B*4-4+3];if(W!==a)return W===void 0&&this._isBound()?this._boundValue():W},F.prototype._promiseAt=function(B){return this[B*4-4+2]},F.prototype._fulfillmentHandlerAt=function(B){return this[B*4-4+0]},F.prototype._rejectionHandlerAt=function(B){return this[B*4-4+1]},F.prototype._boundValue=function(){},F.prototype._migrateCallback0=function(B){B._bitField;var W=B._fulfillmentHandler0,Y=B._rejectionHandler0,z=B._promise0,j=B._receiverAt(0);j===void 0&&(j=a),this._addCallbacks(W,Y,z,j,null)},F.prototype._migrateCallbackAt=function(B,W){var Y=B._fulfillmentHandlerAt(W),z=B._rejectionHandlerAt(W),j=B._promiseAt(W),M=B._receiverAt(W);M===void 0&&(M=a),this._addCallbacks(Y,z,j,M,null)},F.prototype._addCallbacks=function(B,W,Y,z,j){var M=this._length();if(M>=65531&&(M=0,this._setLength(0)),M===0)this._promise0=Y,this._receiver0=z,typeof B=="function"&&(this._fulfillmentHandler0=j===null?B:o.domainBind(j,B)),typeof W=="function"&&(this._rejectionHandler0=j===null?W:o.domainBind(j,W));else{var q=M*4-4;this[q+2]=Y,this[q+3]=z,typeof B=="function"&&(this[q+0]=j===null?B:o.domainBind(j,B)),typeof W=="function"&&(this[q+1]=j===null?W:o.domainBind(j,W))}return this._setLength(M+1),M},F.prototype._proxy=function(B,W){this._addCallbacks(void 0,void 0,W,B,null)},F.prototype._resolveCallback=function(B,W){if((this._bitField&117506048)===0){if(B===this)return this._rejectCallback(e(),!1);var Y=y(B,this);if(!(Y instanceof F))return this._fulfill(B);W&&this._propagateFrom(Y,2);var z=Y._target();if(z===this){this._reject(e());return}var j=z._bitField;if((j&50397184)===0){var M=this._length();M>0&&z._migrateCallback0(this);for(var q=1;q<M;++q)z._migrateCallbackAt(this,q);this._setFollowing(),this._setLength(0),this._setFollowee(z)}else if((j&33554432)!==0)this._fulfill(z._value());else if((j&16777216)!==0)this._reject(z._reason());else{var H=new d("late cancellation observer");z._attachExtraTrace(H),this._reject(H)}}},F.prototype._rejectCallback=function(B,W,Y){var z=o.ensureErrorObject(B),j=z===B;if(!j&&!Y&&x.warnings()){var M="a promise was rejected with a non-error: "+o.classString(B);this._warn(M,!0)}this._attachExtraTrace(z,W?j:!1),this._reject(B)},F.prototype._resolveFromExecutor=function(B){var W=this;this._captureStackTrace(),this._pushContext();var Y=!0,z=this._execute(B,function(j){W._resolveCallback(j)},function(j){W._rejectCallback(j,Y)});Y=!1,this._popContext(),z!==void 0&&W._rejectCallback(z,!0)},F.prototype._settlePromiseFromHandler=function(B,W,Y,z){var j=z._bitField;if((j&65536)===0){z._pushContext();var M;W===m?!Y||typeof Y.length!="number"?(M=k,M.e=new f("cannot .spread() a non-array: "+o.classString(Y))):M=T(B).apply(this._boundValue(),Y):M=T(B).call(W,Y);var q=z._popContext();j=z._bitField,(j&65536)===0&&(M===g?z._reject(Y):M===k?z._rejectCallback(M.e,!1):(x.checkForgottenReturns(M,q,"",z,this),z._resolveCallback(M)))}},F.prototype._target=function(){for(var B=this;B._isFollowing();)B=B._followee();return B},F.prototype._followee=function(){return this._rejectionHandler0},F.prototype._setFollowee=function(B){this._rejectionHandler0=B},F.prototype._settlePromise=function(B,W,Y,z){var j=B instanceof F,M=this._bitField,q=(M&134217728)!==0;(M&65536)!==0?(j&&B._invokeInternalOnCancel(),Y instanceof S&&Y.isFinallyHandler()?(Y.cancelPromise=B,T(W).call(Y,z)===k&&B._reject(k.e)):W===t?B._fulfill(t.call(Y)):Y instanceof i?Y._promiseCancelled(B):j||B instanceof v?B._cancel():Y.cancel()):typeof W=="function"?j?(q&&B._setAsyncGuaranteed(),this._settlePromiseFromHandler(W,Y,z,B)):W.call(Y,z,B):Y instanceof i?Y._isResolved()||((M&33554432)!==0?Y._promiseFulfilled(z,B):Y._promiseRejected(z,B)):j&&(q&&B._setAsyncGuaranteed(),(M&33554432)!==0?B._fulfill(z):B._reject(z))},F.prototype._settlePromiseLateCancellationObserver=function(B){var W=B.handler,Y=B.promise,z=B.receiver,j=B.value;typeof W=="function"?Y instanceof F?this._settlePromiseFromHandler(W,z,j,Y):W.call(z,j,Y):Y instanceof F&&Y._reject(j)},F.prototype._settlePromiseCtx=function(B){this._settlePromise(B.promise,B.handler,B.receiver,B.value)},F.prototype._settlePromise0=function(B,W,Y){var z=this._promise0,j=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(z,B,j,W)},F.prototype._clearCallbackDataAtIndex=function(B){var W=B*4-4;this[W+2]=this[W+3]=this[W+0]=this[W+1]=void 0},F.prototype._fulfill=function(B){var W=this._bitField;if(!((W&117506048)>>>16)){if(B===this){var Y=e();return this._attachExtraTrace(Y),this._reject(Y)}this._setFulfilled(),this._rejectionHandler0=B,(W&65535)>0&&((W&134217728)!==0?this._settlePromises():h.settlePromises(this))}},F.prototype._reject=function(B){var W=this._bitField;if(!((W&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=B,this._isFinal())return h.fatalError(B,o.isNode);(W&65535)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},F.prototype._fulfillPromises=function(B,W){for(var Y=1;Y<B;Y++){var z=this._fulfillmentHandlerAt(Y),j=this._promiseAt(Y),M=this._receiverAt(Y);this._clearCallbackDataAtIndex(Y),this._settlePromise(j,z,M,W)}},F.prototype._rejectPromises=function(B,W){for(var Y=1;Y<B;Y++){var z=this._rejectionHandlerAt(Y),j=this._promiseAt(Y),M=this._receiverAt(Y);this._clearCallbackDataAtIndex(Y),this._settlePromise(j,z,M,W)}},F.prototype._settlePromises=function(){var B=this._bitField,W=B&65535;if(W>0){if((B&16842752)!==0){var Y=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,Y,B),this._rejectPromises(W,Y)}else{var z=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,z,B),this._fulfillPromises(W,z)}this._setLength(0)}this._clearCancellationData()},F.prototype._settledValue=function(){var B=this._bitField;if((B&33554432)!==0)return this._rejectionHandler0;if((B&16777216)!==0)return this._fulfillmentHandler0};function I(B){this.promise._resolveCallback(B)}function R(B){this.promise._rejectCallback(B,!1)}F.defer=F.pending=function(){x.deprecated("Promise.defer","new Promise");var B=new F(p);return{promise:B,resolve:I,reject:R}},o.notEnumerableProp(F,"_makeSelfResolutionError",e),xTe()(F,p,y,r,x),_Te()(F,p,y,x),STe()(F,v,r,x),CTe()(F),ETe()(F),TTe()(F,v,y,p,h,s),F.Promise=F,F.version="3.4.7",DTe()(F,v,r,y,p,x),ATe()(F),kTe()(F,r,y,w,p,x),NTe()(F,p,x),OTe()(F,r,p,y,i,x),RTe()(F),ITe()(F,p),FTe()(F,v,y,r),PTe()(F,p,y,r),LTe()(F,v,r,y,p,x),MTe()(F,v,x),UTe()(F,v,r),BTe()(F,p),zTe()(F,p),WTe()(F),o.toFastProperties(F),o.toFastProperties(F.prototype);function U(B){var W=new F(p);W._fulfillmentHandler0=B,W._rejectionHandler0=B,W._promise0=B,W._receiver0=B}return U({a:1}),U({b:2}),U({c:3}),U(1),U(function(){}),U(void 0),U(!1),U(new F(p)),x.setBounds(l.firstLineError,o.lastLineError),F}}(J5)),J5.exports}var uH;function cy(){if(uH)return ql;uH=1;var n=ba,e=jTe()();ql.defer=t,ql.when=e.resolve,ql.resolve=e.resolve,ql.all=e.all,ql.props=e.props,ql.reject=e.reject,ql.promisify=e.promisify,ql.mapSeries=e.mapSeries,ql.attempt=e.attempt,ql.nfcall=function(r){var i=Array.prototype.slice.call(arguments,1),a=e.promisify(r);return a.apply(null,i)},e.prototype.fail=e.prototype.caught,e.prototype.also=function(r){return this.then(function(i){var a=n.extend({},i,r(i));return e.props(a)})};function t(){var r,i,a=new e.Promise(function(o,s){r=o,i=s});return{resolve:r,reject:i,promise:a}}return ql}var Er={},lH;function k1(){if(lH)return Er;lH=1;var n=ba,e=Er.types={document:"document",paragraph:"paragraph",run:"run",text:"text",tab:"tab",checkbox:"checkbox",hyperlink:"hyperlink",noteReference:"noteReference",image:"image",note:"note",commentReference:"commentReference",comment:"comment",table:"table",tableRow:"tableRow",tableCell:"tableCell",break:"break",bookmarkStart:"bookmarkStart"};function t(S,E){return E=E||{},{type:e.document,children:S,notes:E.notes||new c({}),comments:E.comments||[]}}function r(S,E){E=E||{};var A=E.indent||{};return{type:e.paragraph,children:S,styleId:E.styleId||null,styleName:E.styleName||null,numbering:E.numbering||null,alignment:E.alignment||null,indent:{start:A.start||null,end:A.end||null,firstLine:A.firstLine||null,hanging:A.hanging||null}}}function i(S,E){return E=E||{},{type:e.run,children:S,styleId:E.styleId||null,styleName:E.styleName||null,isBold:!!E.isBold,isUnderline:!!E.isUnderline,isItalic:!!E.isItalic,isStrikethrough:!!E.isStrikethrough,isAllCaps:!!E.isAllCaps,isSmallCaps:!!E.isSmallCaps,verticalAlignment:E.verticalAlignment||a.baseline,font:E.font||null,fontSize:E.fontSize||null,highlight:E.highlight||null}}var a={baseline:"baseline",superscript:"superscript",subscript:"subscript"};function o(S){return{type:e.text,value:S}}function s(){return{type:e.tab}}function u(S){return{type:e.checkbox,checked:S.checked}}function l(S,E){return{type:e.hyperlink,children:S,href:E.href,anchor:E.anchor,targetFrame:E.targetFrame}}function h(S){return{type:e.noteReference,noteType:S.noteType,noteId:S.noteId}}function c(S){this._notes=n.indexBy(S,function(E){return m(E.noteType,E.noteId)})}c.prototype.resolve=function(S){return this.findNoteByKey(m(S.noteType,S.noteId))},c.prototype.findNoteByKey=function(S){return this._notes[S]||null};function f(S){return{type:e.note,noteType:S.noteType,noteId:S.noteId,body:S.body}}function d(S){return{type:e.commentReference,commentId:S.commentId}}function p(S){return{type:e.comment,commentId:S.commentId,body:S.body,authorName:S.authorName,authorInitials:S.authorInitials}}function m(S,E){return S+"-"+E}function g(S){return{type:e.image,read:function(E){return E?S.readImage(E):S.readImage().then(function(A){return Buffer.from(A)})},readAsArrayBuffer:function(){return S.readImage()},readAsBase64String:function(){return S.readImage("base64")},readAsBuffer:function(){return S.readImage().then(function(E){return Buffer.from(E)})},altText:S.altText,contentType:S.contentType}}function y(S,E){return E=E||{},{type:e.table,children:S,styleId:E.styleId||null,styleName:E.styleName||null}}function v(S,E){return E=E||{},{type:e.tableRow,children:S,isHeader:E.isHeader||!1}}function b(S,E){return E=E||{},{type:e.tableCell,children:S,colSpan:E.colSpan==null?1:E.colSpan,rowSpan:E.rowSpan==null?1:E.rowSpan}}function w(S){return{type:e.break,breakType:S}}function x(S){return{type:e.bookmarkStart,name:S.name}}return Er.document=Er.Document=t,Er.paragraph=Er.Paragraph=r,Er.run=Er.Run=i,Er.text=Er.Text=o,Er.tab=Er.Tab=s,Er.checkbox=Er.Checkbox=u,Er.Hyperlink=l,Er.noteReference=Er.NoteReference=h,Er.Notes=c,Er.Note=f,Er.commentReference=d,Er.comment=p,Er.Image=g,Er.Table=y,Er.TableRow=v,Er.TableCell=b,Er.lineBreak=w("line"),Er.pageBreak=w("page"),Er.columnBreak=w("column"),Er.BookmarkStart=x,Er.verticalAlignment=a,Er}var $b={},cH;function Tp(){if(cH)return $b;cH=1;var n=ba;$b.Result=e,$b.success=t,$b.warning=r,$b.error=i;function e(u,l){this.value=u,this.messages=l||[]}e.prototype.map=function(u){return new e(u(this.value),this.messages)},e.prototype.flatMap=function(u){var l=u(this.value);return new e(l.value,a([this,l]))},e.prototype.flatMapThen=function(u){var l=this;return u(this.value).then(function(h){return new e(h.value,a([l,h]))})},e.combine=function(u){var l=n.flatten(n.pluck(u,"value")),h=a(u);return new e(l,h)};function t(u){return new e(u,[])}function r(u){return{type:"warning",message:u}}function i(u){return{type:"error",message:u.message,error:u}}function a(u){var l=[];return n.flatten(n.pluck(u,"messages"),!0).forEach(function(h){o(l,h)||l.push(h)}),l}function o(u,l){return n.find(u,s.bind(null,l))!==void 0}function s(u,l){return u.type===l.type&&u.message===l.message}return $b}var L_={},M_={},hH;function $Te(){if(hH)return M_;hH=1,M_.byteLength=s,M_.toByteArray=l,M_.fromByteArray=f;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function o(d){var p=d.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=d.indexOf("=");m===-1&&(m=p);var g=m===p?0:4-m%4;return[m,g]}function s(d){var p=o(d),m=p[0],g=p[1];return(m+g)*3/4-g}function u(d,p,m){return(p+m)*3/4-m}function l(d){var p,m=o(d),g=m[0],y=m[1],v=new t(u(d,g,y)),b=0,w=y>0?g-4:g,x;for(x=0;x<w;x+=4)p=e[d.charCodeAt(x)]<<18|e[d.charCodeAt(x+1)]<<12|e[d.charCodeAt(x+2)]<<6|e[d.charCodeAt(x+3)],v[b++]=p>>16&255,v[b++]=p>>8&255,v[b++]=p&255;return y===2&&(p=e[d.charCodeAt(x)]<<2|e[d.charCodeAt(x+1)]>>4,v[b++]=p&255),y===1&&(p=e[d.charCodeAt(x)]<<10|e[d.charCodeAt(x+1)]<<4|e[d.charCodeAt(x+2)]>>2,v[b++]=p>>8&255,v[b++]=p&255),v}function h(d){return n[d>>18&63]+n[d>>12&63]+n[d>>6&63]+n[d&63]}function c(d,p,m){for(var g,y=[],v=p;v<m;v+=3)g=(d[v]<<16&16711680)+(d[v+1]<<8&65280)+(d[v+2]&255),y.push(h(g));return y.join("")}function f(d){for(var p,m=d.length,g=m%3,y=[],v=16383,b=0,w=m-g;b<w;b+=v)y.push(c(d,b,b+v>w?w:b+v));return g===1?(p=d[m-1],y.push(n[p>>2]+n[p<<4&63]+"==")):g===2&&(p=(d[m-2]<<8)+d[m-1],y.push(n[p>>10]+n[p>>4&63]+n[p<<2&63]+"=")),y.join("")}return M_}var OF={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var fH;function qTe(){return fH||(fH=1,function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,a){function o(l,h){if(!i[l]){if(!r[l]){var c=typeof YS=="function"&&YS;if(!h&&c)return c(l,!0);if(s)return s(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var d=i[l]={exports:{}};r[l][0].call(d.exports,function(p){var m=r[l][1][p];return o(m||p)},d,d.exports,t,r,i,a)}return i[l].exports}for(var s=typeof YS=="function"&&YS,u=0;u<a.length;u++)o(a[u]);return o}({1:[function(t,r,i){var a=t("./utils"),o=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var l,h,c,f,d,p,m,g=[],y=0,v=u.length,b=v,w=a.getTypeOf(u)!=="string";y<u.length;)b=v-y,c=w?(l=u[y++],h=y<v?u[y++]:0,y<v?u[y++]:0):(l=u.charCodeAt(y++),h=y<v?u.charCodeAt(y++):0,y<v?u.charCodeAt(y++):0),f=l>>2,d=(3&l)<<4|h>>4,p=1<b?(15&h)<<2|c>>6:64,m=2<b?63&c:64,g.push(s.charAt(f)+s.charAt(d)+s.charAt(p)+s.charAt(m));return g.join("")},i.decode=function(u){var l,h,c,f,d,p,m=0,g=0,y="data:";if(u.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,b=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&b--,u.charAt(u.length-2)===s.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|b):new Array(0|b);m<u.length;)l=s.indexOf(u.charAt(m++))<<2|(f=s.indexOf(u.charAt(m++)))>>4,h=(15&f)<<4|(d=s.indexOf(u.charAt(m++)))>>2,c=(3&d)<<6|(p=s.indexOf(u.charAt(m++))),v[g++]=l,d!==64&&(v[g++]=h),p!==64&&(v[g++]=c);return v}},{"./support":30,"./utils":32}],2:[function(t,r,i){var a=t("./external"),o=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function l(h,c,f,d,p){this.compressedSize=h,this.uncompressedSize=c,this.crc32=f,this.compression=d,this.compressedContent=p}l.prototype={getContentWorker:function(){var h=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),c=this;return h.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(h,c,f){return h.pipe(new s).pipe(new u("uncompressedSize")).pipe(c.compressWorker(f)).pipe(new u("compressedSize")).withStreamInfo("compression",c)},r.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var a=t("./utils"),o=function(){for(var s,u=[],l=0;l<256;l++){s=l;for(var h=0;h<8;h++)s=1&s?3988292384^s>>>1:s>>>1;u[l]=s}return u}();r.exports=function(s,u){return s!==void 0&&s.length?a.getTypeOf(s)!=="string"?function(l,h,c,f){var d=o,p=f+c;l^=-1;for(var m=f;m<p;m++)l=l>>>8^d[255&(l^h[m])];return-1^l}(0|u,s,s.length,0):function(l,h,c,f){var d=o,p=f+c;l^=-1;for(var m=f;m<p;m++)l=l>>>8^d[255&(l^h.charCodeAt(m))];return-1^l}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:a}},{lie:37}],7:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),s=t("./utils"),u=t("./stream/GenericWorker"),l=a?"uint8array":"array";function h(c,f){u.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=f,this.meta={}}i.magic="\b\0",s.inherits(h,u),h.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(l,c.data),!1)},h.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(f){c.push({data:f,meta:c.meta})}},i.compressWorker=function(c){return new h("Deflate",c)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function a(d,p){var m,g="";for(m=0;m<p;m++)g+=String.fromCharCode(255&d),d>>>=8;return g}function o(d,p,m,g,y,v){var b,w,x=d.file,S=d.compression,E=v!==l.utf8encode,A=s.transformTo("string",v(x.name)),k=s.transformTo("string",l.utf8encode(x.name)),T=x.comment,O=s.transformTo("string",v(T)),F=s.transformTo("string",l.utf8encode(T)),I=k.length!==x.name.length,R=F.length!==T.length,U="",B="",W="",Y=x.dir,z=x.date,j={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(j.crc32=d.crc32,j.compressedSize=d.compressedSize,j.uncompressedSize=d.uncompressedSize);var M=0;p&&(M|=8),E||!I&&!R||(M|=2048);var q=0,H=0;Y&&(q|=16),y==="UNIX"?(H=798,q|=function(Z,J){var X=Z;return Z||(X=J?16893:33204),(65535&X)<<16}(x.unixPermissions,Y)):(H=20,q|=function(Z){return 63&(Z||0)}(x.dosPermissions)),b=z.getUTCHours(),b<<=6,b|=z.getUTCMinutes(),b<<=5,b|=z.getUTCSeconds()/2,w=z.getUTCFullYear()-1980,w<<=4,w|=z.getUTCMonth()+1,w<<=5,w|=z.getUTCDate(),I&&(B=a(1,1)+a(h(A),4)+k,U+="up"+a(B.length,2)+B),R&&(W=a(1,1)+a(h(O),4)+F,U+="uc"+a(W.length,2)+W);var K="";return K+=`
\0`,K+=a(M,2),K+=S.magic,K+=a(b,2),K+=a(w,2),K+=a(j.crc32,4),K+=a(j.compressedSize,4),K+=a(j.uncompressedSize,4),K+=a(A.length,2),K+=a(U.length,2),{fileRecord:c.LOCAL_FILE_HEADER+K+A+U,dirRecord:c.CENTRAL_FILE_HEADER+a(H,2)+K+a(O.length,2)+"\0\0\0\0"+a(q,4)+a(g,4)+A+U+O}}var s=t("../utils"),u=t("../stream/GenericWorker"),l=t("../utf8"),h=t("../crc32"),c=t("../signature");function f(d,p,m,g){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=g,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(f,u),f.prototype.push=function(d){var p=d.meta.percent||0,m=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,u.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-g-1))/m:100}}))},f.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var p=this.streamFiles&&!d.file.dir;if(p){var m=o(d,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(d){this.accumulate=!1;var p=this.streamFiles&&!d.file.dir,m=o(d,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:function(g){return c.DATA_DESCRIPTOR+a(g.crc32,4)+a(g.compressedSize,4)+a(g.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var d=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-d,g=function(y,v,b,w,x){var S=s.transformTo("string",x(w));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(y,2)+a(y,2)+a(v,4)+a(b,4)+a(S.length,2)+S}(this.dirRecords.length,m,d,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(d){this._sources.push(d);var p=this;return d.on("data",function(m){p.processChunk(m)}),d.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),d.on("error",function(m){p.error(m)}),this},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(d){var p=this._sources;if(!u.prototype.error.call(this,d))return!1;for(var m=0;m<p.length;m++)try{p[m].error(d)}catch{}return!0},f.prototype.lock=function(){u.prototype.lock.call(this);for(var d=this._sources,p=0;p<d.length;p++)d[p].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var a=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(s,u,l){var h=new o(u.streamFiles,l,u.platform,u.encodeFileName),c=0;try{s.forEach(function(f,d){c++;var p=function(v,b){var w=v||b,x=a[w];if(!x)throw new Error(w+" is not a valid compression method !");return x}(d.options.compression,u.compression),m=d.options.compressionOptions||u.compressionOptions||{},g=d.dir,y=d.date;d._compressWorker(p,m).withStreamInfo("file",{name:f,dir:g,date:y,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(h)}),h.entriesCount=c}catch(f){h.error(f)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(o,s){return new a().loadAsync(o,s)},a.external=t("./external"),r.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var a=t("./utils"),o=t("./external"),s=t("./utf8"),u=t("./zipEntries"),l=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function c(f){return new o.Promise(function(d,p){var m=f.decompressed.getContentWorker().pipe(new l);m.on("error",function(g){p(g)}).on("end",function(){m.streamInfo.crc32!==f.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}r.exports=function(f,d){var p=this;return d=a.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),h.isNode&&h.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",f,!0,d.optimizedBinaryString,d.base64).then(function(m){var g=new u(d);return g.load(m),g}).then(function(m){var g=[o.Promise.resolve(m)],y=m.files;if(d.checkCRC32)for(var v=0;v<y.length;v++)g.push(c(y[v]));return o.Promise.all(g)}).then(function(m){for(var g=m.shift(),y=g.files,v=0;v<y.length;v++){var b=y[v],w=b.fileNameStr,x=a.resolve(b.fileNameStr);p.file(x,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:d.createFolders}),b.dir||(p.file(x).unsafeOriginalName=w)}return g.zipComment.length&&(p.comment=g.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var a=t("../utils"),o=t("../stream/GenericWorker");function s(u,l){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}a.inherits(s,o),s.prototype._bindStream=function(u){var l=this;(this._stream=u).pause(),u.on("data",function(h){l.push({data:h,meta:{percent:0}})}).on("error",function(h){l.isPaused?this.generatedError=h:l.error(h)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var a=t("readable-stream").Readable;function o(s,u,l){a.call(this,u),this._helper=s;var h=this;s.on("data",function(c,f){h.push(c)||h._helper.pause(),l&&l(f)}).on("error",function(c){h.emit("error",c)}).on("end",function(){h.push(null)})}t("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,r,i){function a(x,S,E){var A,k=s.getTypeOf(S),T=s.extend(E||{},h);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&16384&T.unixPermissions&&(T.dir=!0),T.dosPermissions&&16&T.dosPermissions&&(T.dir=!0),T.dir&&(x=y(x)),T.createFolders&&(A=g(x))&&v.call(this,A,!0);var O=k==="string"&&T.binary===!1&&T.base64===!1;E&&E.binary!==void 0||(T.binary=!O),(S instanceof c&&S.uncompressedSize===0||T.dir||!S||S.length===0)&&(T.base64=!1,T.binary=!0,S="",T.compression="STORE",k="string");var F=null;F=S instanceof c||S instanceof u?S:p.isNode&&p.isStream(S)?new m(x,S):s.prepareContent(x,S,T.binary,T.optimizedBinaryString,T.base64);var I=new f(x,F,T);this.files[x]=I}var o=t("./utf8"),s=t("./utils"),u=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),h=t("./defaults"),c=t("./compressedObject"),f=t("./zipObject"),d=t("./generate"),p=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),g=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var S=x.lastIndexOf("/");return 0<S?x.substring(0,S):""},y=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},v=function(x,S){return S=S!==void 0?S:h.createFolders,x=y(x),this.files[x]||a.call(this,x,null,{dir:!0,createFolders:S}),this.files[x]};function b(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var S,E,A;for(S in this.files)A=this.files[S],(E=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&x(E,A)},filter:function(x){var S=[];return this.forEach(function(E,A){x(E,A)&&S.push(A)}),S},file:function(x,S,E){if(arguments.length!==1)return x=this.root+x,a.call(this,x,S,E),this;if(b(x)){var A=x;return this.filter(function(T,O){return!O.dir&&A.test(T)})}var k=this.files[this.root+x];return k&&!k.dir?k:null},folder:function(x){if(!x)return this;if(b(x))return this.filter(function(k,T){return T.dir&&x.test(k)});var S=this.root+x,E=v.call(this,S),A=this.clone();return A.root=E.name,A},remove:function(x){x=this.root+x;var S=this.files[x];if(S||(x.slice(-1)!=="/"&&(x+="/"),S=this.files[x]),S&&!S.dir)delete this.files[x];else for(var E=this.filter(function(k,T){return T.name.slice(0,x.length)===x}),A=0;A<E.length;A++)delete this.files[E[A].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var S,E={};try{if((E=s.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");s.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var A=E.comment||this.comment||"";S=d.generateWorker(this,E,A)}catch(k){(S=new u("error")).error(k)}return new l(S,E.type||"string",E.mimeType)},generateAsync:function(x,S){return this.generateInternalStream(x).accumulate(S)},generateNodeStream:function(x,S){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(S)}};r.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var a=t("./DataReader");function o(s){a.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),l=s.charCodeAt(1),h=s.charCodeAt(2),c=s.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===u&&this.data[f+1]===l&&this.data[f+2]===h&&this.data[f+3]===c)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),l=s.charCodeAt(1),h=s.charCodeAt(2),c=s.charCodeAt(3),f=this.readData(4);return u===f[0]&&l===f[1]&&h===f[2]&&c===f[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var a=t("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,l=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=s,l},readString:function(s){return a.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,i){var a=t("./Uint8ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var a=t("./DataReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var a=t("./ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var a=t("../utils"),o=t("../support"),s=t("./ArrayReader"),u=t("./StringReader"),l=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");r.exports=function(c){var f=a.getTypeOf(c);return a.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new l(c):o.uint8array?new h(a.transformTo("uint8array",c)):new s(a.transformTo("array",c)):new u(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var a=t("./GenericWorker"),o=t("../utils");function s(u){a.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,a),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var a=t("./GenericWorker"),o=t("../crc32");function s(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,a),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var a=t("../utils"),o=t("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}a.inherits(s,o),s.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var a=t("../utils"),o=t("./GenericWorker");function s(u){o.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(h){l.dataIsReady=!0,l.data=h,l.max=h&&h.length||0,l.type=a.getTypeOf(h),l.isPaused||l._tickAndRepeat()},function(h){l.error(h)})}a.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,l);break;case"uint8array":u=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":u=this.data.slice(this.index,l)}return this.index=l,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=a},{}],29:[function(t,r,i){var a=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),u=t("../base64"),l=t("../support"),h=t("../external"),c=null;if(l.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(p,m){return new h.Promise(function(g,y){var v=[],b=p._internalType,w=p._outputType,x=p._mimeType;p.on("data",function(S,E){v.push(S),m&&m(E)}).on("error",function(S){v=[],y(S)}).on("end",function(){try{var S=function(E,A,k){switch(E){case"blob":return a.newBlob(a.transformTo("arraybuffer",A),k);case"base64":return u.encode(A);default:return a.transformTo(E,A)}}(w,function(E,A){var k,T=0,O=null,F=0;for(k=0;k<A.length;k++)F+=A[k].length;switch(E){case"string":return A.join("");case"array":return Array.prototype.concat.apply([],A);case"uint8array":for(O=new Uint8Array(F),k=0;k<A.length;k++)O.set(A[k],T),T+=A[k].length;return O;case"nodebuffer":return Buffer.concat(A);default:throw new Error("concat : unsupported type '"+E+"'")}}(b,v),x);g(S)}catch(E){y(E)}v=[]}).resume()})}function d(p,m,g){var y=m;switch(m){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=m,this._mimeType=g,a.checkSupport(y),this._worker=p.pipe(new o(y)),p.lock()}catch(v){this._worker=new s("error"),this._worker.error(v)}}d.prototype={accumulate:function(p){return f(this,p)},on:function(p,m){var g=this;return p==="data"?this._worker.on(p,function(y){m.call(g,y.data,y.meta)}):this._worker.on(p,function(){a.delay(m,arguments,g)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var a=t("./utils"),o=t("./support"),s=t("./nodejsUtils"),u=t("./stream/GenericWorker"),l=new Array(256),h=0;h<256;h++)l[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;l[254]=l[254]=1;function c(){u.call(this,"utf-8 decode"),this.leftOver=null}function f(){u.call(this,"utf-8 encode")}i.utf8encode=function(d){return o.nodebuffer?s.newBufferFrom(d,"utf-8"):function(p){var m,g,y,v,b,w=p.length,x=0;for(v=0;v<w;v++)(64512&(g=p.charCodeAt(v)))==55296&&v+1<w&&(64512&(y=p.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),v++),x+=g<128?1:g<2048?2:g<65536?3:4;for(m=o.uint8array?new Uint8Array(x):new Array(x),v=b=0;b<x;v++)(64512&(g=p.charCodeAt(v)))==55296&&v+1<w&&(64512&(y=p.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),v++),g<128?m[b++]=g:(g<2048?m[b++]=192|g>>>6:(g<65536?m[b++]=224|g>>>12:(m[b++]=240|g>>>18,m[b++]=128|g>>>12&63),m[b++]=128|g>>>6&63),m[b++]=128|63&g);return m}(d)},i.utf8decode=function(d){return o.nodebuffer?a.transformTo("nodebuffer",d).toString("utf-8"):function(p){var m,g,y,v,b=p.length,w=new Array(2*b);for(m=g=0;m<b;)if((y=p[m++])<128)w[g++]=y;else if(4<(v=l[y]))w[g++]=65533,m+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&m<b;)y=y<<6|63&p[m++],v--;1<v?w[g++]=65533:y<65536?w[g++]=y:(y-=65536,w[g++]=55296|y>>10&1023,w[g++]=56320|1023&y)}return w.length!==g&&(w.subarray?w=w.subarray(0,g):w.length=g),a.applyFromCharCode(w)}(d=a.transformTo(o.uint8array?"uint8array":"array",d))},a.inherits(c,u),c.prototype.processChunk=function(d){var p=a.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var g=function(v,b){var w;for((b=b||v.length)>v.length&&(b=v.length),w=b-1;0<=w&&(192&v[w])==128;)w--;return w<0||w===0?b:w+l[v[w]]>b?w:b}(p),y=p;g!==p.length&&(o.uint8array?(y=p.subarray(0,g),this.leftOver=p.subarray(g,p.length)):(y=p.slice(0,g),this.leftOver=p.slice(g,p.length))),this.push({data:i.utf8decode(y),meta:d.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,a.inherits(f,u),f.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var a=t("./support"),o=t("./base64"),s=t("./nodejsUtils"),u=t("./external");function l(m){return m}function h(m,g){for(var y=0;y<m.length;++y)g[y]=255&m.charCodeAt(y);return g}t("setimmediate"),i.newBlob=function(m,g){i.checkSupport("blob");try{return new Blob([m],{type:g})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(m),y.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(m,g,y){var v=[],b=0,w=m.length;if(w<=y)return String.fromCharCode.apply(null,m);for(;b<w;)g==="array"||g==="nodebuffer"?v.push(String.fromCharCode.apply(null,m.slice(b,Math.min(b+y,w)))):v.push(String.fromCharCode.apply(null,m.subarray(b,Math.min(b+y,w)))),b+=y;return v.join("")},stringifyByChar:function(m){for(var g="",y=0;y<m.length;y++)g+=String.fromCharCode(m[y]);return g},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function f(m){var g=65536,y=i.getTypeOf(m),v=!0;if(y==="uint8array"?v=c.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=c.applyCanBeUsed.nodebuffer),v)for(;1<g;)try{return c.stringifyByChunk(m,y,g)}catch{g=Math.floor(g/2)}return c.stringifyByChar(m)}function d(m,g){for(var y=0;y<m.length;y++)g[y]=m[y];return g}i.applyFromCharCode=f;var p={};p.string={string:l,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return h(m,new Uint8Array(m.length))},nodebuffer:function(m){return h(m,s.allocBuffer(m.length))}},p.array={string:f,array:l,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return s.newBufferFrom(m)}},p.arraybuffer={string:function(m){return f(new Uint8Array(m))},array:function(m){return d(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:l,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return s.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:f,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:l,nodebuffer:function(m){return s.newBufferFrom(m)}},p.nodebuffer={string:f,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return d(m,new Uint8Array(m.length))},nodebuffer:l},i.transformTo=function(m,g){if(g=g||"",!m)return g;i.checkSupport(m);var y=i.getTypeOf(g);return p[y][m](g)},i.resolve=function(m){for(var g=m.split("/"),y=[],v=0;v<g.length;v++){var b=g[v];b==="."||b===""&&v!==0&&v!==g.length-1||(b===".."?y.pop():y.push(b))}return y.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":a.nodebuffer&&s.isBuffer(m)?"nodebuffer":a.uint8array&&m instanceof Uint8Array?"uint8array":a.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!a[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var g,y,v="";for(y=0;y<(m||"").length;y++)v+="\\x"+((g=m.charCodeAt(y))<16?"0":"")+g.toString(16).toUpperCase();return v},i.delay=function(m,g,y){setImmediate(function(){m.apply(y||null,g||[])})},i.inherits=function(m,g){function y(){}y.prototype=g.prototype,m.prototype=new y},i.extend=function(){var m,g,y={};for(m=0;m<arguments.length;m++)for(g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&y[g]===void 0&&(y[g]=arguments[m][g]);return y},i.prepareContent=function(m,g,y,v,b){return u.Promise.resolve(g).then(function(w){return a.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new u.Promise(function(x,S){var E=new FileReader;E.onload=function(A){x(A.target.result)},E.onerror=function(A){S(A.target.error)},E.readAsArrayBuffer(w)}):w}).then(function(w){var x=i.getTypeOf(w);return x?(x==="arraybuffer"?w=i.transformTo("uint8array",w):x==="string"&&(b?w=o.decode(w):y&&v!==!0&&(w=function(S){return h(S,a.uint8array?new Uint8Array(S.length):new Array(S.length))}(w))),w):u.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./signature"),u=t("./zipEntry"),l=t("./support");function h(c){this.files=[],this.loadOptions=c}h.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(c)+")")}},isSignature:function(c,f){var d=this.reader.index;this.reader.setIndex(c);var p=this.reader.readString(4)===f;return this.reader.setIndex(d),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),f=l.uint8array?"uint8array":"array",d=o.transformTo(f,c);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,f,d,p=this.zip64EndOfCentralSize-44;0<p;)c=this.reader.readInt(2),f=this.reader.readInt(4),d=this.reader.readData(f),this.zip64ExtensibleData[c]={id:c,length:f,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,f;for(c=0;c<this.files.length;c++)f=this.files[c],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(c=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var f=c;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var p=f-d;if(0<p)this.isSignature(f,s.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(c){this.reader=a(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./compressedObject"),u=t("./crc32"),l=t("./utf8"),h=t("./compressions"),c=t("./support");function f(d,p){this.options=d,this.loadOptions=p}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var p,m;if(d.skip(22),this.fileNameLength=d.readInt(2),m=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(g){for(var y in h)if(Object.prototype.hasOwnProperty.call(h,y)&&h[y].magic===g)return h[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,p,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var p=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(p),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var p,m,g,y=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<y;)p=d.readInt(2),m=d.readInt(2),g=d.readData(m),this.extraFields[p]={id:p,length:m,value:g};d.setIndex(y)},handleUTF8:function(){var d=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var y=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var p=a(d.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:l.utf8decode(p.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var p=a(d.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:l.utf8decode(p.readData(d.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function a(p,m,g){this.name=p,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=m,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),u=t("./utf8"),l=t("./compressedObject"),h=t("./stream/GenericWorker");a.prototype={internalStream:function(p){var m=null,g="string";try{if(!p)throw new Error("No output type specified.");var y=(g=p.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(m=m.pipe(new u.Utf8EncodeWorker)),!v&&y&&(m=m.pipe(new u.Utf8DecodeWorker))}catch(b){(m=new h("error")).error(b)}return new o(m,g,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof l&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(g,p,m)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof h?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)a.prototype[c[d]]=f;r.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(a){var o,s,u=a.MutationObserver||a.WebKitMutationObserver;if(u){var l=0,h=new u(p),c=a.document.createTextNode("");h.observe(c,{characterData:!0}),o=function(){c.data=l=++l%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var m=a.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},a.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var f=new a.MessageChannel;f.port1.onmessage=p,o=function(){f.port2.postMessage(0)}}var d=[];function p(){var m,g;s=!0;for(var y=d.length;y;){for(g=d,d=[],m=-1;++m<y;)g[m]();y=d.length}s=!1}r.exports=function(m){d.push(m)!==1||s||o()}}).call(this,typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var a=t("immediate");function o(){}var s={},u=["REJECTED"],l=["FULFILLED"],h=["PENDING"];function c(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,y!==o&&m(this,y)}function f(y,v,b){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function d(y,v,b){a(function(){var w;try{w=v(b)}catch(x){return s.reject(y,x)}w===y?s.reject(y,new TypeError("Cannot resolve promise with itself")):s.resolve(y,w)})}function p(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function m(y,v){var b=!1;function w(E){b||(b=!0,s.reject(y,E))}function x(E){b||(b=!0,s.resolve(y,E))}var S=g(function(){v(x,w)});S.status==="error"&&w(S.value)}function g(y,v){var b={};try{b.value=y(v),b.status="success"}catch(w){b.status="error",b.value=w}return b}(r.exports=c).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(b){return v.resolve(y()).then(function(){return b})},function(b){return v.resolve(y()).then(function(){throw b})})},c.prototype.catch=function(y){return this.then(null,y)},c.prototype.then=function(y,v){if(typeof y!="function"&&this.state===l||typeof v!="function"&&this.state===u)return this;var b=new this.constructor(o);return this.state!==h?d(b,this.state===l?y:v,this.outcome):this.queue.push(new f(b,y,v)),b},f.prototype.callFulfilled=function(y){s.resolve(this.promise,y)},f.prototype.otherCallFulfilled=function(y){d(this.promise,this.onFulfilled,y)},f.prototype.callRejected=function(y){s.reject(this.promise,y)},f.prototype.otherCallRejected=function(y){d(this.promise,this.onRejected,y)},s.resolve=function(y,v){var b=g(p,v);if(b.status==="error")return s.reject(y,b.value);var w=b.value;if(w)m(y,w);else{y.state=l,y.outcome=v;for(var x=-1,S=y.queue.length;++x<S;)y.queue[x].callFulfilled(v)}return y},s.reject=function(y,v){y.state=u,y.outcome=v;for(var b=-1,w=y.queue.length;++b<w;)y.queue[b].callRejected(v);return y},c.resolve=function(y){return y instanceof this?y:s.resolve(new this(o),y)},c.reject=function(y){var v=new this(o);return s.reject(v,y)},c.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,w=!1;if(!b)return this.resolve([]);for(var x=new Array(b),S=0,E=-1,A=new this(o);++E<b;)k(y[E],E);return A;function k(T,O){v.resolve(T).then(function(F){x[O]=F,++S!==b||w||(w=!0,s.resolve(A,x))},function(F){w||(w=!0,s.reject(A,F))})}},c.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,w=!1;if(!b)return this.resolve([]);for(var x=-1,S=new this(o);++x<b;)E=y[x],v.resolve(E).then(function(A){w||(w=!0,s.resolve(S,A))},function(A){w||(w=!0,s.reject(S,A))});var E;return S}},{immediate:36}],38:[function(t,r,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var a=t("./zlib/deflate"),o=t("./utils/common"),s=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),h=Object.prototype.toString,c=0,f=-1,d=0,p=8;function m(y){if(!(this instanceof m))return new m(y);this.options=o.assign({level:f,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var b=a.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(b!==c)throw new Error(u[b]);if(v.header&&a.deflateSetHeader(this.strm,v.header),v.dictionary){var w;if(w=typeof v.dictionary=="string"?s.string2buf(v.dictionary):h.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(b=a.deflateSetDictionary(this.strm,w))!==c)throw new Error(u[b]);this._dict_set=!0}}function g(y,v){var b=new m(v);if(b.push(y,!0),b.err)throw b.msg||u[b.err];return b.result}m.prototype.push=function(y,v){var b,w,x=this.strm,S=this.options.chunkSize;if(this.ended)return!1;w=v===~~v?v:v===!0?4:0,typeof y=="string"?x.input=s.string2buf(y):h.call(y)==="[object ArrayBuffer]"?x.input=new Uint8Array(y):x.input=y,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new o.Buf8(S),x.next_out=0,x.avail_out=S),(b=a.deflate(x,w))!==1&&b!==c)return this.onEnd(b),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(x.output,x.next_out))):this.onData(o.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&b!==1);return w===4?(b=a.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===c):w!==2||(this.onEnd(c),!(x.avail_out=0))},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=m,i.deflate=g,i.deflateRaw=function(y,v){return(v=v||{}).raw=!0,g(y,v)},i.gzip=function(y,v){return(v=v||{}).gzip=!0,g(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var a=t("./zlib/inflate"),o=t("./utils/common"),s=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),h=t("./zlib/zstream"),c=t("./zlib/gzheader"),f=Object.prototype.toString;function d(m){if(!(this instanceof d))return new d(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||m&&m.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var y=a.inflateInit2(this.strm,g.windowBits);if(y!==u.Z_OK)throw new Error(l[y]);this.header=new c,a.inflateGetHeader(this.strm,this.header)}function p(m,g){var y=new d(g);if(y.push(m,!0),y.err)throw y.msg||l[y.err];return y.result}d.prototype.push=function(m,g){var y,v,b,w,x,S,E=this.strm,A=this.options.chunkSize,k=this.options.dictionary,T=!1;if(this.ended)return!1;v=g===~~g?g:g===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof m=="string"?E.input=s.binstring2buf(m):f.call(m)==="[object ArrayBuffer]"?E.input=new Uint8Array(m):E.input=m,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(A),E.next_out=0,E.avail_out=A),(y=a.inflate(E,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&k&&(S=typeof k=="string"?s.string2buf(k):f.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,y=a.inflateSetDictionary(this.strm,S)),y===u.Z_BUF_ERROR&&T===!0&&(y=u.Z_OK,T=!1),y!==u.Z_STREAM_END&&y!==u.Z_OK)return this.onEnd(y),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&y!==u.Z_STREAM_END&&(E.avail_in!==0||v!==u.Z_FINISH&&v!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=s.utf8border(E.output,E.next_out),w=E.next_out-b,x=s.buf2string(E.output,b),E.next_out=w,E.avail_out=A-w,w&&o.arraySet(E.output,E.output,b,w,0),this.onData(x)):this.onData(o.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(T=!0)}while((0<E.avail_in||E.avail_out===0)&&y!==u.Z_STREAM_END);return y===u.Z_STREAM_END&&(v=u.Z_FINISH),v===u.Z_FINISH?(y=a.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===u.Z_OK):v!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(E.avail_out=0))},d.prototype.onData=function(m){this.chunks.push(m)},d.prototype.onEnd=function(m){m===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=d,i.inflate=p,i.inflateRaw=function(m,g){return(g=g||{}).raw=!0,p(m,g)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var h=l.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var c in h)h.hasOwnProperty(c)&&(u[c]=h[c])}}return u},i.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var o={arraySet:function(u,l,h,c,f){if(l.subarray&&u.subarray)u.set(l.subarray(h,h+c),f);else for(var d=0;d<c;d++)u[f+d]=l[h+d]},flattenChunks:function(u){var l,h,c,f,d,p;for(l=c=0,h=u.length;l<h;l++)c+=u[l].length;for(p=new Uint8Array(c),l=f=0,h=u.length;l<h;l++)d=u[l],p.set(d,f),f+=d.length;return p}},s={arraySet:function(u,l,h,c,f){for(var d=0;d<c;d++)u[f+d]=l[h+d]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(a)},{}],42:[function(t,r,i){var a=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new a.Buf8(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function h(c,f){if(f<65537&&(c.subarray&&s||!c.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(c,f));for(var d="",p=0;p<f;p++)d+=String.fromCharCode(c[p]);return d}u[254]=u[254]=1,i.string2buf=function(c){var f,d,p,m,g,y=c.length,v=0;for(m=0;m<y;m++)(64512&(d=c.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=c.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),m++),v+=d<128?1:d<2048?2:d<65536?3:4;for(f=new a.Buf8(v),m=g=0;g<v;m++)(64512&(d=c.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=c.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),m++),d<128?f[g++]=d:(d<2048?f[g++]=192|d>>>6:(d<65536?f[g++]=224|d>>>12:(f[g++]=240|d>>>18,f[g++]=128|d>>>12&63),f[g++]=128|d>>>6&63),f[g++]=128|63&d);return f},i.buf2binstring=function(c){return h(c,c.length)},i.binstring2buf=function(c){for(var f=new a.Buf8(c.length),d=0,p=f.length;d<p;d++)f[d]=c.charCodeAt(d);return f},i.buf2string=function(c,f){var d,p,m,g,y=f||c.length,v=new Array(2*y);for(d=p=0;d<y;)if((m=c[d++])<128)v[p++]=m;else if(4<(g=u[m]))v[p++]=65533,d+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&d<y;)m=m<<6|63&c[d++],g--;1<g?v[p++]=65533:m<65536?v[p++]=m:(m-=65536,v[p++]=55296|m>>10&1023,v[p++]=56320|1023&m)}return h(v,p)},i.utf8border=function(c,f){var d;for((f=f||c.length)>c.length&&(f=c.length),d=f-1;0<=d&&(192&c[d])==128;)d--;return d<0||d===0?f:d+u[c[d]]>f?d:f}},{"./common":41}],43:[function(t,r,i){r.exports=function(a,o,s,u){for(var l=65535&a|0,h=a>>>16&65535|0,c=0;s!==0;){for(s-=c=2e3<s?2e3:s;h=h+(l=l+o[u++]|0)|0,--c;);l%=65521,h%=65521}return l|h<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var a=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();r.exports=function(o,s,u,l){var h=a,c=l+u;o^=-1;for(var f=l;f<c;f++)o=o>>>8^h[255&(o^s[f])];return-1^o}},{}],46:[function(t,r,i){var a,o=t("../utils/common"),s=t("./trees"),u=t("./adler32"),l=t("./crc32"),h=t("./messages"),c=0,f=4,d=0,p=-2,m=-1,g=4,y=2,v=8,b=9,w=286,x=30,S=19,E=2*w+1,A=15,k=3,T=258,O=T+k+1,F=42,I=113,R=1,U=2,B=3,W=4;function Y(G,de){return G.msg=h[de],de}function z(G){return(G<<1)-(4<G?9:0)}function j(G){for(var de=G.length;0<=--de;)G[de]=0}function M(G){var de=G.state,ye=de.pending;ye>G.avail_out&&(ye=G.avail_out),ye!==0&&(o.arraySet(G.output,de.pending_buf,de.pending_out,ye,G.next_out),G.next_out+=ye,de.pending_out+=ye,G.total_out+=ye,G.avail_out-=ye,de.pending-=ye,de.pending===0&&(de.pending_out=0))}function q(G,de){s._tr_flush_block(G,0<=G.block_start?G.block_start:-1,G.strstart-G.block_start,de),G.block_start=G.strstart,M(G.strm)}function H(G,de){G.pending_buf[G.pending++]=de}function K(G,de){G.pending_buf[G.pending++]=de>>>8&255,G.pending_buf[G.pending++]=255&de}function Z(G,de){var ye,le,ne=G.max_chain_length,fe=G.strstart,Ne=G.prev_length,Ae=G.nice_match,ue=G.strstart>G.w_size-O?G.strstart-(G.w_size-O):0,me=G.window,Se=G.w_mask,Re=G.prev,je=G.strstart+T,rt=me[fe+Ne-1],at=me[fe+Ne];G.prev_length>=G.good_match&&(ne>>=2),Ae>G.lookahead&&(Ae=G.lookahead);do if(me[(ye=de)+Ne]===at&&me[ye+Ne-1]===rt&&me[ye]===me[fe]&&me[++ye]===me[fe+1]){fe+=2,ye++;do;while(me[++fe]===me[++ye]&&me[++fe]===me[++ye]&&me[++fe]===me[++ye]&&me[++fe]===me[++ye]&&me[++fe]===me[++ye]&&me[++fe]===me[++ye]&&me[++fe]===me[++ye]&&me[++fe]===me[++ye]&&fe<je);if(le=T-(je-fe),fe=je-T,Ne<le){if(G.match_start=de,Ae<=(Ne=le))break;rt=me[fe+Ne-1],at=me[fe+Ne]}}while((de=Re[de&Se])>ue&&--ne!=0);return Ne<=G.lookahead?Ne:G.lookahead}function J(G){var de,ye,le,ne,fe,Ne,Ae,ue,me,Se,Re=G.w_size;do{if(ne=G.window_size-G.lookahead-G.strstart,G.strstart>=Re+(Re-O)){for(o.arraySet(G.window,G.window,Re,Re,0),G.match_start-=Re,G.strstart-=Re,G.block_start-=Re,de=ye=G.hash_size;le=G.head[--de],G.head[de]=Re<=le?le-Re:0,--ye;);for(de=ye=Re;le=G.prev[--de],G.prev[de]=Re<=le?le-Re:0,--ye;);ne+=Re}if(G.strm.avail_in===0)break;if(Ne=G.strm,Ae=G.window,ue=G.strstart+G.lookahead,me=ne,Se=void 0,Se=Ne.avail_in,me<Se&&(Se=me),ye=Se===0?0:(Ne.avail_in-=Se,o.arraySet(Ae,Ne.input,Ne.next_in,Se,ue),Ne.state.wrap===1?Ne.adler=u(Ne.adler,Ae,Se,ue):Ne.state.wrap===2&&(Ne.adler=l(Ne.adler,Ae,Se,ue)),Ne.next_in+=Se,Ne.total_in+=Se,Se),G.lookahead+=ye,G.lookahead+G.insert>=k)for(fe=G.strstart-G.insert,G.ins_h=G.window[fe],G.ins_h=(G.ins_h<<G.hash_shift^G.window[fe+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[fe+k-1])&G.hash_mask,G.prev[fe&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=fe,fe++,G.insert--,!(G.lookahead+G.insert<k)););}while(G.lookahead<O&&G.strm.avail_in!==0)}function X(G,de){for(var ye,le;;){if(G.lookahead<O){if(J(G),G.lookahead<O&&de===c)return R;if(G.lookahead===0)break}if(ye=0,G.lookahead>=k&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+k-1])&G.hash_mask,ye=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),ye!==0&&G.strstart-ye<=G.w_size-O&&(G.match_length=Z(G,ye)),G.match_length>=k)if(le=s._tr_tally(G,G.strstart-G.match_start,G.match_length-k),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=k){for(G.match_length--;G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+k-1])&G.hash_mask,ye=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart,--G.match_length!=0;);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else le=s._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(le&&(q(G,!1),G.strm.avail_out===0))return R}return G.insert=G.strstart<k-1?G.strstart:k-1,de===f?(q(G,!0),G.strm.avail_out===0?B:W):G.last_lit&&(q(G,!1),G.strm.avail_out===0)?R:U}function ae(G,de){for(var ye,le,ne;;){if(G.lookahead<O){if(J(G),G.lookahead<O&&de===c)return R;if(G.lookahead===0)break}if(ye=0,G.lookahead>=k&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+k-1])&G.hash_mask,ye=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=k-1,ye!==0&&G.prev_length<G.max_lazy_match&&G.strstart-ye<=G.w_size-O&&(G.match_length=Z(G,ye),G.match_length<=5&&(G.strategy===1||G.match_length===k&&4096<G.strstart-G.match_start)&&(G.match_length=k-1)),G.prev_length>=k&&G.match_length<=G.prev_length){for(ne=G.strstart+G.lookahead-k,le=s._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-k),G.lookahead-=G.prev_length-1,G.prev_length-=2;++G.strstart<=ne&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+k-1])&G.hash_mask,ye=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),--G.prev_length!=0;);if(G.match_available=0,G.match_length=k-1,G.strstart++,le&&(q(G,!1),G.strm.avail_out===0))return R}else if(G.match_available){if((le=s._tr_tally(G,0,G.window[G.strstart-1]))&&q(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return R}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(le=s._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<k-1?G.strstart:k-1,de===f?(q(G,!0),G.strm.avail_out===0?B:W):G.last_lit&&(q(G,!1),G.strm.avail_out===0)?R:U}function ie(G,de,ye,le,ne){this.good_length=G,this.max_lazy=de,this.nice_length=ye,this.max_chain=le,this.func=ne}function ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*E),this.dyn_dtree=new o.Buf16(2*(2*x+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),j(this.dyn_ltree),j(this.dyn_dtree),j(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(A+1),this.heap=new o.Buf16(2*w+1),j(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),j(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ge(G){var de;return G&&G.state?(G.total_in=G.total_out=0,G.data_type=y,(de=G.state).pending=0,de.pending_out=0,de.wrap<0&&(de.wrap=-de.wrap),de.status=de.wrap?F:I,G.adler=de.wrap===2?0:1,de.last_flush=c,s._tr_init(de),d):Y(G,p)}function Ce(G){var de=ge(G);return de===d&&function(ye){ye.window_size=2*ye.w_size,j(ye.head),ye.max_lazy_match=a[ye.level].max_lazy,ye.good_match=a[ye.level].good_length,ye.nice_match=a[ye.level].nice_length,ye.max_chain_length=a[ye.level].max_chain,ye.strstart=0,ye.block_start=0,ye.lookahead=0,ye.insert=0,ye.match_length=ye.prev_length=k-1,ye.match_available=0,ye.ins_h=0}(G.state),de}function Ee(G,de,ye,le,ne,fe){if(!G)return p;var Ne=1;if(de===m&&(de=6),le<0?(Ne=0,le=-le):15<le&&(Ne=2,le-=16),ne<1||b<ne||ye!==v||le<8||15<le||de<0||9<de||fe<0||g<fe)return Y(G,p);le===8&&(le=9);var Ae=new ce;return(G.state=Ae).strm=G,Ae.wrap=Ne,Ae.gzhead=null,Ae.w_bits=le,Ae.w_size=1<<Ae.w_bits,Ae.w_mask=Ae.w_size-1,Ae.hash_bits=ne+7,Ae.hash_size=1<<Ae.hash_bits,Ae.hash_mask=Ae.hash_size-1,Ae.hash_shift=~~((Ae.hash_bits+k-1)/k),Ae.window=new o.Buf8(2*Ae.w_size),Ae.head=new o.Buf16(Ae.hash_size),Ae.prev=new o.Buf16(Ae.w_size),Ae.lit_bufsize=1<<ne+6,Ae.pending_buf_size=4*Ae.lit_bufsize,Ae.pending_buf=new o.Buf8(Ae.pending_buf_size),Ae.d_buf=1*Ae.lit_bufsize,Ae.l_buf=3*Ae.lit_bufsize,Ae.level=de,Ae.strategy=fe,Ae.method=ye,Ce(G)}a=[new ie(0,0,0,0,function(G,de){var ye=65535;for(ye>G.pending_buf_size-5&&(ye=G.pending_buf_size-5);;){if(G.lookahead<=1){if(J(G),G.lookahead===0&&de===c)return R;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var le=G.block_start+ye;if((G.strstart===0||G.strstart>=le)&&(G.lookahead=G.strstart-le,G.strstart=le,q(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-O&&(q(G,!1),G.strm.avail_out===0))return R}return G.insert=0,de===f?(q(G,!0),G.strm.avail_out===0?B:W):(G.strstart>G.block_start&&(q(G,!1),G.strm.avail_out),R)}),new ie(4,4,8,4,X),new ie(4,5,16,8,X),new ie(4,6,32,32,X),new ie(4,4,16,16,ae),new ie(8,16,32,32,ae),new ie(8,16,128,128,ae),new ie(8,32,128,256,ae),new ie(32,128,258,1024,ae),new ie(32,258,258,4096,ae)],i.deflateInit=function(G,de){return Ee(G,de,v,15,8,0)},i.deflateInit2=Ee,i.deflateReset=Ce,i.deflateResetKeep=ge,i.deflateSetHeader=function(G,de){return G&&G.state?G.state.wrap!==2?p:(G.state.gzhead=de,d):p},i.deflate=function(G,de){var ye,le,ne,fe;if(!G||!G.state||5<de||de<0)return G?Y(G,p):p;if(le=G.state,!G.output||!G.input&&G.avail_in!==0||le.status===666&&de!==f)return Y(G,G.avail_out===0?-5:p);if(le.strm=G,ye=le.last_flush,le.last_flush=de,le.status===F)if(le.wrap===2)G.adler=0,H(le,31),H(le,139),H(le,8),le.gzhead?(H(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),H(le,255&le.gzhead.time),H(le,le.gzhead.time>>8&255),H(le,le.gzhead.time>>16&255),H(le,le.gzhead.time>>24&255),H(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),H(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(H(le,255&le.gzhead.extra.length),H(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(G.adler=l(G.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(H(le,0),H(le,0),H(le,0),H(le,0),H(le,0),H(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),H(le,3),le.status=I);else{var Ne=v+(le.w_bits-8<<4)<<8;Ne|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(Ne|=32),Ne+=31-Ne%31,le.status=I,K(le,Ne),le.strstart!==0&&(K(le,G.adler>>>16),K(le,65535&G.adler)),G.adler=1}if(le.status===69)if(le.gzhead.extra){for(ne=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>ne&&(G.adler=l(G.adler,le.pending_buf,le.pending-ne,ne)),M(G),ne=le.pending,le.pending!==le.pending_buf_size));)H(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>ne&&(G.adler=l(G.adler,le.pending_buf,le.pending-ne,ne)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){ne=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>ne&&(G.adler=l(G.adler,le.pending_buf,le.pending-ne,ne)),M(G),ne=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,H(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>ne&&(G.adler=l(G.adler,le.pending_buf,le.pending-ne,ne)),fe===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){ne=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>ne&&(G.adler=l(G.adler,le.pending_buf,le.pending-ne,ne)),M(G),ne=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,H(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>ne&&(G.adler=l(G.adler,le.pending_buf,le.pending-ne,ne)),fe===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&M(G),le.pending+2<=le.pending_buf_size&&(H(le,255&G.adler),H(le,G.adler>>8&255),G.adler=0,le.status=I)):le.status=I),le.pending!==0){if(M(G),G.avail_out===0)return le.last_flush=-1,d}else if(G.avail_in===0&&z(de)<=z(ye)&&de!==f)return Y(G,-5);if(le.status===666&&G.avail_in!==0)return Y(G,-5);if(G.avail_in!==0||le.lookahead!==0||de!==c&&le.status!==666){var Ae=le.strategy===2?function(ue,me){for(var Se;;){if(ue.lookahead===0&&(J(ue),ue.lookahead===0)){if(me===c)return R;break}if(ue.match_length=0,Se=s._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++,Se&&(q(ue,!1),ue.strm.avail_out===0))return R}return ue.insert=0,me===f?(q(ue,!0),ue.strm.avail_out===0?B:W):ue.last_lit&&(q(ue,!1),ue.strm.avail_out===0)?R:U}(le,de):le.strategy===3?function(ue,me){for(var Se,Re,je,rt,at=ue.window;;){if(ue.lookahead<=T){if(J(ue),ue.lookahead<=T&&me===c)return R;if(ue.lookahead===0)break}if(ue.match_length=0,ue.lookahead>=k&&0<ue.strstart&&(Re=at[je=ue.strstart-1])===at[++je]&&Re===at[++je]&&Re===at[++je]){rt=ue.strstart+T;do;while(Re===at[++je]&&Re===at[++je]&&Re===at[++je]&&Re===at[++je]&&Re===at[++je]&&Re===at[++je]&&Re===at[++je]&&Re===at[++je]&&je<rt);ue.match_length=T-(rt-je),ue.match_length>ue.lookahead&&(ue.match_length=ue.lookahead)}if(ue.match_length>=k?(Se=s._tr_tally(ue,1,ue.match_length-k),ue.lookahead-=ue.match_length,ue.strstart+=ue.match_length,ue.match_length=0):(Se=s._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++),Se&&(q(ue,!1),ue.strm.avail_out===0))return R}return ue.insert=0,me===f?(q(ue,!0),ue.strm.avail_out===0?B:W):ue.last_lit&&(q(ue,!1),ue.strm.avail_out===0)?R:U}(le,de):a[le.level].func(le,de);if(Ae!==B&&Ae!==W||(le.status=666),Ae===R||Ae===B)return G.avail_out===0&&(le.last_flush=-1),d;if(Ae===U&&(de===1?s._tr_align(le):de!==5&&(s._tr_stored_block(le,0,0,!1),de===3&&(j(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),M(G),G.avail_out===0))return le.last_flush=-1,d}return de!==f?d:le.wrap<=0?1:(le.wrap===2?(H(le,255&G.adler),H(le,G.adler>>8&255),H(le,G.adler>>16&255),H(le,G.adler>>24&255),H(le,255&G.total_in),H(le,G.total_in>>8&255),H(le,G.total_in>>16&255),H(le,G.total_in>>24&255)):(K(le,G.adler>>>16),K(le,65535&G.adler)),M(G),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?d:1)},i.deflateEnd=function(G){var de;return G&&G.state?(de=G.state.status)!==F&&de!==69&&de!==73&&de!==91&&de!==103&&de!==I&&de!==666?Y(G,p):(G.state=null,de===I?Y(G,-3):d):p},i.deflateSetDictionary=function(G,de){var ye,le,ne,fe,Ne,Ae,ue,me,Se=de.length;if(!G||!G.state||(fe=(ye=G.state).wrap)===2||fe===1&&ye.status!==F||ye.lookahead)return p;for(fe===1&&(G.adler=u(G.adler,de,Se,0)),ye.wrap=0,Se>=ye.w_size&&(fe===0&&(j(ye.head),ye.strstart=0,ye.block_start=0,ye.insert=0),me=new o.Buf8(ye.w_size),o.arraySet(me,de,Se-ye.w_size,ye.w_size,0),de=me,Se=ye.w_size),Ne=G.avail_in,Ae=G.next_in,ue=G.input,G.avail_in=Se,G.next_in=0,G.input=de,J(ye);ye.lookahead>=k;){for(le=ye.strstart,ne=ye.lookahead-(k-1);ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[le+k-1])&ye.hash_mask,ye.prev[le&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=le,le++,--ne;);ye.strstart=le,ye.lookahead=k-1,J(ye)}return ye.strstart+=ye.lookahead,ye.block_start=ye.strstart,ye.insert=ye.lookahead,ye.lookahead=0,ye.match_length=ye.prev_length=k-1,ye.match_available=0,G.next_in=Ae,G.input=ue,G.avail_in=Ne,ye.wrap=fe,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(a,o){var s,u,l,h,c,f,d,p,m,g,y,v,b,w,x,S,E,A,k,T,O,F,I,R,U;s=a.state,u=a.next_in,R=a.input,l=u+(a.avail_in-5),h=a.next_out,U=a.output,c=h-(o-a.avail_out),f=h+(a.avail_out-257),d=s.dmax,p=s.wsize,m=s.whave,g=s.wnext,y=s.window,v=s.hold,b=s.bits,w=s.lencode,x=s.distcode,S=(1<<s.lenbits)-1,E=(1<<s.distbits)-1;e:do{b<15&&(v+=R[u++]<<b,b+=8,v+=R[u++]<<b,b+=8),A=w[v&S];t:for(;;){if(v>>>=k=A>>>24,b-=k,(k=A>>>16&255)===0)U[h++]=65535&A;else{if(!(16&k)){if((64&k)==0){A=w[(65535&A)+(v&(1<<k)-1)];continue t}if(32&k){s.mode=12;break e}a.msg="invalid literal/length code",s.mode=30;break e}T=65535&A,(k&=15)&&(b<k&&(v+=R[u++]<<b,b+=8),T+=v&(1<<k)-1,v>>>=k,b-=k),b<15&&(v+=R[u++]<<b,b+=8,v+=R[u++]<<b,b+=8),A=x[v&E];n:for(;;){if(v>>>=k=A>>>24,b-=k,!(16&(k=A>>>16&255))){if((64&k)==0){A=x[(65535&A)+(v&(1<<k)-1)];continue n}a.msg="invalid distance code",s.mode=30;break e}if(O=65535&A,b<(k&=15)&&(v+=R[u++]<<b,(b+=8)<k&&(v+=R[u++]<<b,b+=8)),d<(O+=v&(1<<k)-1)){a.msg="invalid distance too far back",s.mode=30;break e}if(v>>>=k,b-=k,(k=h-c)<O){if(m<(k=O-k)&&s.sane){a.msg="invalid distance too far back",s.mode=30;break e}if(I=y,(F=0)===g){if(F+=p-k,k<T){for(T-=k;U[h++]=y[F++],--k;);F=h-O,I=U}}else if(g<k){if(F+=p+g-k,(k-=g)<T){for(T-=k;U[h++]=y[F++],--k;);if(F=0,g<T){for(T-=k=g;U[h++]=y[F++],--k;);F=h-O,I=U}}}else if(F+=g-k,k<T){for(T-=k;U[h++]=y[F++],--k;);F=h-O,I=U}for(;2<T;)U[h++]=I[F++],U[h++]=I[F++],U[h++]=I[F++],T-=3;T&&(U[h++]=I[F++],1<T&&(U[h++]=I[F++]))}else{for(F=h-O;U[h++]=U[F++],U[h++]=U[F++],U[h++]=U[F++],2<(T-=3););T&&(U[h++]=U[F++],1<T&&(U[h++]=U[F++]))}break}}break}}while(u<l&&h<f);u-=T=b>>3,v&=(1<<(b-=T<<3))-1,a.next_in=u,a.next_out=h,a.avail_in=u<l?l-u+5:5-(u-l),a.avail_out=h<f?f-h+257:257-(h-f),s.hold=v,s.bits=b}},{}],49:[function(t,r,i){var a=t("../utils/common"),o=t("./adler32"),s=t("./crc32"),u=t("./inffast"),l=t("./inftrees"),h=1,c=2,f=0,d=-2,p=1,m=852,g=592;function y(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(F){var I;return F&&F.state?(I=F.state,F.total_in=F.total_out=I.total=0,F.msg="",I.wrap&&(F.adler=1&I.wrap),I.mode=p,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new a.Buf32(m),I.distcode=I.distdyn=new a.Buf32(g),I.sane=1,I.back=-1,f):d}function w(F){var I;return F&&F.state?((I=F.state).wsize=0,I.whave=0,I.wnext=0,b(F)):d}function x(F,I){var R,U;return F&&F.state?(U=F.state,I<0?(R=0,I=-I):(R=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?d:(U.window!==null&&U.wbits!==I&&(U.window=null),U.wrap=R,U.wbits=I,w(F))):d}function S(F,I){var R,U;return F?(U=new v,(F.state=U).window=null,(R=x(F,I))!==f&&(F.state=null),R):d}var E,A,k=!0;function T(F){if(k){var I;for(E=new a.Buf32(512),A=new a.Buf32(32),I=0;I<144;)F.lens[I++]=8;for(;I<256;)F.lens[I++]=9;for(;I<280;)F.lens[I++]=7;for(;I<288;)F.lens[I++]=8;for(l(h,F.lens,0,288,E,0,F.work,{bits:9}),I=0;I<32;)F.lens[I++]=5;l(c,F.lens,0,32,A,0,F.work,{bits:5}),k=!1}F.lencode=E,F.lenbits=9,F.distcode=A,F.distbits=5}function O(F,I,R,U){var B,W=F.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new a.Buf8(W.wsize)),U>=W.wsize?(a.arraySet(W.window,I,R-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(U<(B=W.wsize-W.wnext)&&(B=U),a.arraySet(W.window,I,R-U,B,W.wnext),(U-=B)?(a.arraySet(W.window,I,R-U,U,0),W.wnext=U,W.whave=W.wsize):(W.wnext+=B,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=B))),0}i.inflateReset=w,i.inflateReset2=x,i.inflateResetKeep=b,i.inflateInit=function(F){return S(F,15)},i.inflateInit2=S,i.inflate=function(F,I){var R,U,B,W,Y,z,j,M,q,H,K,Z,J,X,ae,ie,ce,ge,Ce,Ee,G,de,ye,le,ne=0,fe=new a.Buf8(4),Ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return d;(R=F.state).mode===12&&(R.mode=13),Y=F.next_out,B=F.output,j=F.avail_out,W=F.next_in,U=F.input,z=F.avail_in,M=R.hold,q=R.bits,H=z,K=j,de=f;e:for(;;)switch(R.mode){case p:if(R.wrap===0){R.mode=13;break}for(;q<16;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if(2&R.wrap&&M===35615){fe[R.check=0]=255&M,fe[1]=M>>>8&255,R.check=s(R.check,fe,2,0),q=M=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&M)<<8)+(M>>8))%31){F.msg="incorrect header check",R.mode=30;break}if((15&M)!=8){F.msg="unknown compression method",R.mode=30;break}if(q-=4,G=8+(15&(M>>>=4)),R.wbits===0)R.wbits=G;else if(G>R.wbits){F.msg="invalid window size",R.mode=30;break}R.dmax=1<<G,F.adler=R.check=1,R.mode=512&M?10:12,q=M=0;break;case 2:for(;q<16;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if(R.flags=M,(255&R.flags)!=8){F.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){F.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=M>>8&1),512&R.flags&&(fe[0]=255&M,fe[1]=M>>>8&255,R.check=s(R.check,fe,2,0)),q=M=0,R.mode=3;case 3:for(;q<32;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}R.head&&(R.head.time=M),512&R.flags&&(fe[0]=255&M,fe[1]=M>>>8&255,fe[2]=M>>>16&255,fe[3]=M>>>24&255,R.check=s(R.check,fe,4,0)),q=M=0,R.mode=4;case 4:for(;q<16;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}R.head&&(R.head.xflags=255&M,R.head.os=M>>8),512&R.flags&&(fe[0]=255&M,fe[1]=M>>>8&255,R.check=s(R.check,fe,2,0)),q=M=0,R.mode=5;case 5:if(1024&R.flags){for(;q<16;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}R.length=M,R.head&&(R.head.extra_len=M),512&R.flags&&(fe[0]=255&M,fe[1]=M>>>8&255,R.check=s(R.check,fe,2,0)),q=M=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(z<(Z=R.length)&&(Z=z),Z&&(R.head&&(G=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),a.arraySet(R.head.extra,U,W,Z,G)),512&R.flags&&(R.check=s(R.check,U,Z,W)),z-=Z,W+=Z,R.length-=Z),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(z===0)break e;for(Z=0;G=U[W+Z++],R.head&&G&&R.length<65536&&(R.head.name+=String.fromCharCode(G)),G&&Z<z;);if(512&R.flags&&(R.check=s(R.check,U,Z,W)),z-=Z,W+=Z,G)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(z===0)break e;for(Z=0;G=U[W+Z++],R.head&&G&&R.length<65536&&(R.head.comment+=String.fromCharCode(G)),G&&Z<z;);if(512&R.flags&&(R.check=s(R.check,U,Z,W)),z-=Z,W+=Z,G)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;q<16;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if(M!==(65535&R.check)){F.msg="header crc mismatch",R.mode=30;break}q=M=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),F.adler=R.check=0,R.mode=12;break;case 10:for(;q<32;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}F.adler=R.check=y(M),q=M=0,R.mode=11;case 11:if(R.havedict===0)return F.next_out=Y,F.avail_out=j,F.next_in=W,F.avail_in=z,R.hold=M,R.bits=q,2;F.adler=R.check=1,R.mode=12;case 12:if(I===5||I===6)break e;case 13:if(R.last){M>>>=7&q,q-=7&q,R.mode=27;break}for(;q<3;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}switch(R.last=1&M,q-=1,3&(M>>>=1)){case 0:R.mode=14;break;case 1:if(T(R),R.mode=20,I!==6)break;M>>>=2,q-=2;break e;case 2:R.mode=17;break;case 3:F.msg="invalid block type",R.mode=30}M>>>=2,q-=2;break;case 14:for(M>>>=7&q,q-=7&q;q<32;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if((65535&M)!=(M>>>16^65535)){F.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&M,q=M=0,R.mode=15,I===6)break e;case 15:R.mode=16;case 16:if(Z=R.length){if(z<Z&&(Z=z),j<Z&&(Z=j),Z===0)break e;a.arraySet(B,U,W,Z,Y),z-=Z,W+=Z,j-=Z,Y+=Z,R.length-=Z;break}R.mode=12;break;case 17:for(;q<14;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if(R.nlen=257+(31&M),M>>>=5,q-=5,R.ndist=1+(31&M),M>>>=5,q-=5,R.ncode=4+(15&M),M>>>=4,q-=4,286<R.nlen||30<R.ndist){F.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;q<3;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}R.lens[Ne[R.have++]]=7&M,M>>>=3,q-=3}for(;R.have<19;)R.lens[Ne[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,ye={bits:R.lenbits},de=l(0,R.lens,0,19,R.lencode,0,R.work,ye),R.lenbits=ye.bits,de){F.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;ie=(ne=R.lencode[M&(1<<R.lenbits)-1])>>>16&255,ce=65535&ne,!((ae=ne>>>24)<=q);){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if(ce<16)M>>>=ae,q-=ae,R.lens[R.have++]=ce;else{if(ce===16){for(le=ae+2;q<le;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if(M>>>=ae,q-=ae,R.have===0){F.msg="invalid bit length repeat",R.mode=30;break}G=R.lens[R.have-1],Z=3+(3&M),M>>>=2,q-=2}else if(ce===17){for(le=ae+3;q<le;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}q-=ae,G=0,Z=3+(7&(M>>>=ae)),M>>>=3,q-=3}else{for(le=ae+7;q<le;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}q-=ae,G=0,Z=11+(127&(M>>>=ae)),M>>>=7,q-=7}if(R.have+Z>R.nlen+R.ndist){F.msg="invalid bit length repeat",R.mode=30;break}for(;Z--;)R.lens[R.have++]=G}}if(R.mode===30)break;if(R.lens[256]===0){F.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,ye={bits:R.lenbits},de=l(h,R.lens,0,R.nlen,R.lencode,0,R.work,ye),R.lenbits=ye.bits,de){F.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,ye={bits:R.distbits},de=l(c,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,ye),R.distbits=ye.bits,de){F.msg="invalid distances set",R.mode=30;break}if(R.mode=20,I===6)break e;case 20:R.mode=21;case 21:if(6<=z&&258<=j){F.next_out=Y,F.avail_out=j,F.next_in=W,F.avail_in=z,R.hold=M,R.bits=q,u(F,K),Y=F.next_out,B=F.output,j=F.avail_out,W=F.next_in,U=F.input,z=F.avail_in,M=R.hold,q=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;ie=(ne=R.lencode[M&(1<<R.lenbits)-1])>>>16&255,ce=65535&ne,!((ae=ne>>>24)<=q);){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if(ie&&(240&ie)==0){for(ge=ae,Ce=ie,Ee=ce;ie=(ne=R.lencode[Ee+((M&(1<<ge+Ce)-1)>>ge)])>>>16&255,ce=65535&ne,!(ge+(ae=ne>>>24)<=q);){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}M>>>=ge,q-=ge,R.back+=ge}if(M>>>=ae,q-=ae,R.back+=ae,R.length=ce,ie===0){R.mode=26;break}if(32&ie){R.back=-1,R.mode=12;break}if(64&ie){F.msg="invalid literal/length code",R.mode=30;break}R.extra=15&ie,R.mode=22;case 22:if(R.extra){for(le=R.extra;q<le;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}R.length+=M&(1<<R.extra)-1,M>>>=R.extra,q-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;ie=(ne=R.distcode[M&(1<<R.distbits)-1])>>>16&255,ce=65535&ne,!((ae=ne>>>24)<=q);){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if((240&ie)==0){for(ge=ae,Ce=ie,Ee=ce;ie=(ne=R.distcode[Ee+((M&(1<<ge+Ce)-1)>>ge)])>>>16&255,ce=65535&ne,!(ge+(ae=ne>>>24)<=q);){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}M>>>=ge,q-=ge,R.back+=ge}if(M>>>=ae,q-=ae,R.back+=ae,64&ie){F.msg="invalid distance code",R.mode=30;break}R.offset=ce,R.extra=15&ie,R.mode=24;case 24:if(R.extra){for(le=R.extra;q<le;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}R.offset+=M&(1<<R.extra)-1,M>>>=R.extra,q-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){F.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(j===0)break e;if(Z=K-j,R.offset>Z){if((Z=R.offset-Z)>R.whave&&R.sane){F.msg="invalid distance too far back",R.mode=30;break}J=Z>R.wnext?(Z-=R.wnext,R.wsize-Z):R.wnext-Z,Z>R.length&&(Z=R.length),X=R.window}else X=B,J=Y-R.offset,Z=R.length;for(j<Z&&(Z=j),j-=Z,R.length-=Z;B[Y++]=X[J++],--Z;);R.length===0&&(R.mode=21);break;case 26:if(j===0)break e;B[Y++]=R.length,j--,R.mode=21;break;case 27:if(R.wrap){for(;q<32;){if(z===0)break e;z--,M|=U[W++]<<q,q+=8}if(K-=j,F.total_out+=K,R.total+=K,K&&(F.adler=R.check=R.flags?s(R.check,B,K,Y-K):o(R.check,B,K,Y-K)),K=j,(R.flags?M:y(M))!==R.check){F.msg="incorrect data check",R.mode=30;break}q=M=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;q<32;){if(z===0)break e;z--,M+=U[W++]<<q,q+=8}if(M!==(4294967295&R.total)){F.msg="incorrect length check",R.mode=30;break}q=M=0}R.mode=29;case 29:de=1;break e;case 30:de=-3;break e;case 31:return-4;case 32:default:return d}return F.next_out=Y,F.avail_out=j,F.next_in=W,F.avail_in=z,R.hold=M,R.bits=q,(R.wsize||K!==F.avail_out&&R.mode<30&&(R.mode<27||I!==4))&&O(F,F.output,F.next_out,K-F.avail_out)?(R.mode=31,-4):(H-=F.avail_in,K-=F.avail_out,F.total_in+=H,F.total_out+=K,R.total+=K,R.wrap&&K&&(F.adler=R.check=R.flags?s(R.check,B,K,F.next_out-K):o(R.check,B,K,F.next_out-K)),F.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(H==0&&K===0||I===4)&&de===f&&(de=-5),de)},i.inflateEnd=function(F){if(!F||!F.state)return d;var I=F.state;return I.window&&(I.window=null),F.state=null,f},i.inflateGetHeader=function(F,I){var R;return F&&F.state?(2&(R=F.state).wrap)==0?d:((R.head=I).done=!1,f):d},i.inflateSetDictionary=function(F,I){var R,U=I.length;return F&&F.state?(R=F.state).wrap!==0&&R.mode!==11?d:R.mode===11&&o(1,I,U,0)!==R.check?-3:O(F,I,U,U)?(R.mode=31,-4):(R.havedict=1,f):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var a=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,c,f,d,p,m,g,y){var v,b,w,x,S,E,A,k,T,O=y.bits,F=0,I=0,R=0,U=0,B=0,W=0,Y=0,z=0,j=0,M=0,q=null,H=0,K=new a.Buf16(16),Z=new a.Buf16(16),J=null,X=0;for(F=0;F<=15;F++)K[F]=0;for(I=0;I<d;I++)K[c[f+I]]++;for(B=O,U=15;1<=U&&K[U]===0;U--);if(U<B&&(B=U),U===0)return p[m++]=20971520,p[m++]=20971520,y.bits=1,0;for(R=1;R<U&&K[R]===0;R++);for(B<R&&(B=R),F=z=1;F<=15;F++)if(z<<=1,(z-=K[F])<0)return-1;if(0<z&&(h===0||U!==1))return-1;for(Z[1]=0,F=1;F<15;F++)Z[F+1]=Z[F]+K[F];for(I=0;I<d;I++)c[f+I]!==0&&(g[Z[c[f+I]]++]=I);if(E=h===0?(q=J=g,19):h===1?(q=o,H-=257,J=s,X-=257,256):(q=u,J=l,-1),F=R,S=m,Y=I=M=0,w=-1,x=(j=1<<(W=B))-1,h===1&&852<j||h===2&&592<j)return 1;for(;;){for(A=F-Y,T=g[I]<E?(k=0,g[I]):g[I]>E?(k=J[X+g[I]],q[H+g[I]]):(k=96,0),v=1<<F-Y,R=b=1<<W;p[S+(M>>Y)+(b-=v)]=A<<24|k<<16|T|0,b!==0;);for(v=1<<F-1;M&v;)v>>=1;if(v!==0?(M&=v-1,M+=v):M=0,I++,--K[F]==0){if(F===U)break;F=c[f+g[I]]}if(B<F&&(M&x)!==w){for(Y===0&&(Y=B),S+=R,z=1<<(W=F-Y);W+Y<U&&!((z-=K[W+Y])<=0);)W++,z<<=1;if(j+=1<<W,h===1&&852<j||h===2&&592<j)return 1;p[w=M&x]=B<<24|W<<16|S-m|0}}return M!==0&&(p[S+M]=F-Y<<24|64<<16|0),y.bits=B,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var a=t("../utils/common"),o=0,s=1;function u(ne){for(var fe=ne.length;0<=--fe;)ne[fe]=0}var l=0,h=29,c=256,f=c+1+h,d=30,p=19,m=2*f+1,g=15,y=16,v=7,b=256,w=16,x=17,S=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=new Array(2*(f+2));u(O);var F=new Array(2*d);u(F);var I=new Array(512);u(I);var R=new Array(256);u(R);var U=new Array(h);u(U);var B,W,Y,z=new Array(d);function j(ne,fe,Ne,Ae,ue){this.static_tree=ne,this.extra_bits=fe,this.extra_base=Ne,this.elems=Ae,this.max_length=ue,this.has_stree=ne&&ne.length}function M(ne,fe){this.dyn_tree=ne,this.max_code=0,this.stat_desc=fe}function q(ne){return ne<256?I[ne]:I[256+(ne>>>7)]}function H(ne,fe){ne.pending_buf[ne.pending++]=255&fe,ne.pending_buf[ne.pending++]=fe>>>8&255}function K(ne,fe,Ne){ne.bi_valid>y-Ne?(ne.bi_buf|=fe<<ne.bi_valid&65535,H(ne,ne.bi_buf),ne.bi_buf=fe>>y-ne.bi_valid,ne.bi_valid+=Ne-y):(ne.bi_buf|=fe<<ne.bi_valid&65535,ne.bi_valid+=Ne)}function Z(ne,fe,Ne){K(ne,Ne[2*fe],Ne[2*fe+1])}function J(ne,fe){for(var Ne=0;Ne|=1&ne,ne>>>=1,Ne<<=1,0<--fe;);return Ne>>>1}function X(ne,fe,Ne){var Ae,ue,me=new Array(g+1),Se=0;for(Ae=1;Ae<=g;Ae++)me[Ae]=Se=Se+Ne[Ae-1]<<1;for(ue=0;ue<=fe;ue++){var Re=ne[2*ue+1];Re!==0&&(ne[2*ue]=J(me[Re]++,Re))}}function ae(ne){var fe;for(fe=0;fe<f;fe++)ne.dyn_ltree[2*fe]=0;for(fe=0;fe<d;fe++)ne.dyn_dtree[2*fe]=0;for(fe=0;fe<p;fe++)ne.bl_tree[2*fe]=0;ne.dyn_ltree[2*b]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function ie(ne){8<ne.bi_valid?H(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function ce(ne,fe,Ne,Ae){var ue=2*fe,me=2*Ne;return ne[ue]<ne[me]||ne[ue]===ne[me]&&Ae[fe]<=Ae[Ne]}function ge(ne,fe,Ne){for(var Ae=ne.heap[Ne],ue=Ne<<1;ue<=ne.heap_len&&(ue<ne.heap_len&&ce(fe,ne.heap[ue+1],ne.heap[ue],ne.depth)&&ue++,!ce(fe,Ae,ne.heap[ue],ne.depth));)ne.heap[Ne]=ne.heap[ue],Ne=ue,ue<<=1;ne.heap[Ne]=Ae}function Ce(ne,fe,Ne){var Ae,ue,me,Se,Re=0;if(ne.last_lit!==0)for(;Ae=ne.pending_buf[ne.d_buf+2*Re]<<8|ne.pending_buf[ne.d_buf+2*Re+1],ue=ne.pending_buf[ne.l_buf+Re],Re++,Ae===0?Z(ne,ue,fe):(Z(ne,(me=R[ue])+c+1,fe),(Se=E[me])!==0&&K(ne,ue-=U[me],Se),Z(ne,me=q(--Ae),Ne),(Se=A[me])!==0&&K(ne,Ae-=z[me],Se)),Re<ne.last_lit;);Z(ne,b,fe)}function Ee(ne,fe){var Ne,Ae,ue,me=fe.dyn_tree,Se=fe.stat_desc.static_tree,Re=fe.stat_desc.has_stree,je=fe.stat_desc.elems,rt=-1;for(ne.heap_len=0,ne.heap_max=m,Ne=0;Ne<je;Ne++)me[2*Ne]!==0?(ne.heap[++ne.heap_len]=rt=Ne,ne.depth[Ne]=0):me[2*Ne+1]=0;for(;ne.heap_len<2;)me[2*(ue=ne.heap[++ne.heap_len]=rt<2?++rt:0)]=1,ne.depth[ue]=0,ne.opt_len--,Re&&(ne.static_len-=Se[2*ue+1]);for(fe.max_code=rt,Ne=ne.heap_len>>1;1<=Ne;Ne--)ge(ne,me,Ne);for(ue=je;Ne=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],ge(ne,me,1),Ae=ne.heap[1],ne.heap[--ne.heap_max]=Ne,ne.heap[--ne.heap_max]=Ae,me[2*ue]=me[2*Ne]+me[2*Ae],ne.depth[ue]=(ne.depth[Ne]>=ne.depth[Ae]?ne.depth[Ne]:ne.depth[Ae])+1,me[2*Ne+1]=me[2*Ae+1]=ue,ne.heap[1]=ue++,ge(ne,me,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],function(at,yt){var pt,Le,tt,ft,Et,xt,Ot=yt.dyn_tree,dn=yt.max_code,Kr=yt.stat_desc.static_tree,Ba=yt.stat_desc.has_stree,Mu=yt.stat_desc.extra_bits,xe=yt.stat_desc.extra_base,De=yt.stat_desc.max_length,Ue=0;for(ft=0;ft<=g;ft++)at.bl_count[ft]=0;for(Ot[2*at.heap[at.heap_max]+1]=0,pt=at.heap_max+1;pt<m;pt++)De<(ft=Ot[2*Ot[2*(Le=at.heap[pt])+1]+1]+1)&&(ft=De,Ue++),Ot[2*Le+1]=ft,dn<Le||(at.bl_count[ft]++,Et=0,xe<=Le&&(Et=Mu[Le-xe]),xt=Ot[2*Le],at.opt_len+=xt*(ft+Et),Ba&&(at.static_len+=xt*(Kr[2*Le+1]+Et)));if(Ue!==0){do{for(ft=De-1;at.bl_count[ft]===0;)ft--;at.bl_count[ft]--,at.bl_count[ft+1]+=2,at.bl_count[De]--,Ue-=2}while(0<Ue);for(ft=De;ft!==0;ft--)for(Le=at.bl_count[ft];Le!==0;)dn<(tt=at.heap[--pt])||(Ot[2*tt+1]!==ft&&(at.opt_len+=(ft-Ot[2*tt+1])*Ot[2*tt],Ot[2*tt+1]=ft),Le--)}}(ne,fe),X(me,rt,ne.bl_count)}function G(ne,fe,Ne){var Ae,ue,me=-1,Se=fe[1],Re=0,je=7,rt=4;for(Se===0&&(je=138,rt=3),fe[2*(Ne+1)+1]=65535,Ae=0;Ae<=Ne;Ae++)ue=Se,Se=fe[2*(Ae+1)+1],++Re<je&&ue===Se||(Re<rt?ne.bl_tree[2*ue]+=Re:ue!==0?(ue!==me&&ne.bl_tree[2*ue]++,ne.bl_tree[2*w]++):Re<=10?ne.bl_tree[2*x]++:ne.bl_tree[2*S]++,me=ue,rt=(Re=0)===Se?(je=138,3):ue===Se?(je=6,3):(je=7,4))}function de(ne,fe,Ne){var Ae,ue,me=-1,Se=fe[1],Re=0,je=7,rt=4;for(Se===0&&(je=138,rt=3),Ae=0;Ae<=Ne;Ae++)if(ue=Se,Se=fe[2*(Ae+1)+1],!(++Re<je&&ue===Se)){if(Re<rt)for(;Z(ne,ue,ne.bl_tree),--Re!=0;);else ue!==0?(ue!==me&&(Z(ne,ue,ne.bl_tree),Re--),Z(ne,w,ne.bl_tree),K(ne,Re-3,2)):Re<=10?(Z(ne,x,ne.bl_tree),K(ne,Re-3,3)):(Z(ne,S,ne.bl_tree),K(ne,Re-11,7));me=ue,rt=(Re=0)===Se?(je=138,3):ue===Se?(je=6,3):(je=7,4)}}u(z);var ye=!1;function le(ne,fe,Ne,Ae){K(ne,(l<<1)+(Ae?1:0),3),function(ue,me,Se,Re){ie(ue),H(ue,Se),H(ue,~Se),a.arraySet(ue.pending_buf,ue.window,me,Se,ue.pending),ue.pending+=Se}(ne,fe,Ne)}i._tr_init=function(ne){ye||(function(){var fe,Ne,Ae,ue,me,Se=new Array(g+1);for(ue=Ae=0;ue<h-1;ue++)for(U[ue]=Ae,fe=0;fe<1<<E[ue];fe++)R[Ae++]=ue;for(R[Ae-1]=ue,ue=me=0;ue<16;ue++)for(z[ue]=me,fe=0;fe<1<<A[ue];fe++)I[me++]=ue;for(me>>=7;ue<d;ue++)for(z[ue]=me<<7,fe=0;fe<1<<A[ue]-7;fe++)I[256+me++]=ue;for(Ne=0;Ne<=g;Ne++)Se[Ne]=0;for(fe=0;fe<=143;)O[2*fe+1]=8,fe++,Se[8]++;for(;fe<=255;)O[2*fe+1]=9,fe++,Se[9]++;for(;fe<=279;)O[2*fe+1]=7,fe++,Se[7]++;for(;fe<=287;)O[2*fe+1]=8,fe++,Se[8]++;for(X(O,f+1,Se),fe=0;fe<d;fe++)F[2*fe+1]=5,F[2*fe]=J(fe,5);B=new j(O,E,c+1,f,g),W=new j(F,A,0,d,g),Y=new j(new Array(0),k,0,p,v)}(),ye=!0),ne.l_desc=new M(ne.dyn_ltree,B),ne.d_desc=new M(ne.dyn_dtree,W),ne.bl_desc=new M(ne.bl_tree,Y),ne.bi_buf=0,ne.bi_valid=0,ae(ne)},i._tr_stored_block=le,i._tr_flush_block=function(ne,fe,Ne,Ae){var ue,me,Se=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=function(Re){var je,rt=4093624447;for(je=0;je<=31;je++,rt>>>=1)if(1&rt&&Re.dyn_ltree[2*je]!==0)return o;if(Re.dyn_ltree[18]!==0||Re.dyn_ltree[20]!==0||Re.dyn_ltree[26]!==0)return s;for(je=32;je<c;je++)if(Re.dyn_ltree[2*je]!==0)return s;return o}(ne)),Ee(ne,ne.l_desc),Ee(ne,ne.d_desc),Se=function(Re){var je;for(G(Re,Re.dyn_ltree,Re.l_desc.max_code),G(Re,Re.dyn_dtree,Re.d_desc.max_code),Ee(Re,Re.bl_desc),je=p-1;3<=je&&Re.bl_tree[2*T[je]+1]===0;je--);return Re.opt_len+=3*(je+1)+5+5+4,je}(ne),ue=ne.opt_len+3+7>>>3,(me=ne.static_len+3+7>>>3)<=ue&&(ue=me)):ue=me=Ne+5,Ne+4<=ue&&fe!==-1?le(ne,fe,Ne,Ae):ne.strategy===4||me===ue?(K(ne,2+(Ae?1:0),3),Ce(ne,O,F)):(K(ne,4+(Ae?1:0),3),function(Re,je,rt,at){var yt;for(K(Re,je-257,5),K(Re,rt-1,5),K(Re,at-4,4),yt=0;yt<at;yt++)K(Re,Re.bl_tree[2*T[yt]+1],3);de(Re,Re.dyn_ltree,je-1),de(Re,Re.dyn_dtree,rt-1)}(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,Se+1),Ce(ne,ne.dyn_ltree,ne.dyn_dtree)),ae(ne),Ae&&ie(ne)},i._tr_tally=function(ne,fe,Ne){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=fe>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&fe,ne.pending_buf[ne.l_buf+ne.last_lit]=255&Ne,ne.last_lit++,fe===0?ne.dyn_ltree[2*Ne]++:(ne.matches++,fe--,ne.dyn_ltree[2*(R[Ne]+c+1)]++,ne.dyn_dtree[2*q(fe)]++),ne.last_lit===ne.lit_bufsize-1},i._tr_align=function(ne){K(ne,2,3),Z(ne,b,O),function(fe){fe.bi_valid===16?(H(fe,fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0):8<=fe.bi_valid&&(fe.pending_buf[fe.pending++]=255&fe.bi_buf,fe.bi_buf>>=8,fe.bi_valid-=8)}(ne)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(a){(function(o,s){if(!o.setImmediate){var u,l,h,c,f=1,d={},p=!1,m=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,u={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){v(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,x=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=x,w}}()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",b,!1):o.attachEvent("onmessage",b),function(w){o.postMessage(c+w,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(w){v(w.data)},function(w){h.port2.postMessage(w)}):m&&"onreadystatechange"in m.createElement("script")?(l=m.documentElement,function(w){var x=m.createElement("script");x.onreadystatechange=function(){v(w),x.onreadystatechange=null,l.removeChild(x),x=null},l.appendChild(x)}):function(w){setTimeout(v,0,w)},g.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var x=new Array(arguments.length-1),S=0;S<x.length;S++)x[S]=arguments[S+1];var E={callback:w,args:x};return d[f]=E,u(f),f++},g.clearImmediate=y}function y(w){delete d[w]}function v(w){if(p)setTimeout(v,0,w);else{var x=d[w];if(x){p=!0;try{(function(S){var E=S.callback,A=S.args;switch(A.length){case 0:E();break;case 1:E(A[0]);break;case 2:E(A[0],A[1]);break;case 3:E(A[0],A[1],A[2]);break;default:E.apply(s,A)}})(x)}finally{y(w),p=!1}}}}function b(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(c)===0&&v(+w.data.slice(c.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(OF)),OF.exports}var dH;function fre(){if(dH)return L_;dH=1;var n=$Te(),e=qTe();L_.openArrayBuffer=t,L_.splitPath=r,L_.joinPath=i;function t(a){return e.loadAsync(a).then(function(o){function s(c){return o.file(c)!==null}function u(c,f){return o.file(c).async("uint8array").then(function(d){if(f==="base64")return n.fromByteArray(d);if(f){var p=new TextDecoder(f);return p.decode(d)}else return d})}function l(c,f){o.file(c,f)}function h(){return o.generateAsync({type:"arraybuffer"})}return{exists:s,read:u,write:l,toArrayBuffer:h}})}function r(a){var o=a.lastIndexOf("/");return o===-1?{dirname:"",basename:a}:{dirname:a.substring(0,o),basename:a.substring(o+1)}}function i(){var a=Array.prototype.filter.call(arguments,function(s){return s}),o=[];return a.forEach(function(s){/^\//.test(s)?o=[s]:o.push(s)}),o.join("/")}return L_}var ok={},Ig={},qb={},pH;function dre(){if(pH)return qb;pH=1;var n=ba;qb.Element=t,qb.element=function(a,o,s){return new t(a,o,s)},qb.text=function(a){return{type:"text",value:a}};var e=qb.emptyElement={first:function(){return null},firstOrEmpty:function(){return e},attributes:{},children:[]};function t(a,o,s){this.type="element",this.name=a,this.attributes=o||{},this.children=s||[]}t.prototype.first=function(a){return n.find(this.children,function(o){return o.name===a})},t.prototype.firstOrEmpty=function(a){return this.first(a)||e},t.prototype.getElementsByTagName=function(a){var o=n.filter(this.children,function(s){return s.name===a});return i(o)},t.prototype.text=function(){if(this.children.length===0)return"";if(this.children.length!==1||this.children[0].type!=="text")throw new Error("Not implemented");return this.children[0].value};var r={getElementsByTagName:function(a){return i(n.flatten(this.map(function(o){return o.getElementsByTagName(a)},!0)))}};function i(a){return n.extend(a,r)}return qb}var RF={},uk={},U_={},_d={},tv={},gH;function KR(){if(gH)return tv;gH=1;function n(a,o,s){if(s===void 0&&(s=Array.prototype),a&&typeof s.find=="function")return s.find.call(a,o);for(var u=0;u<a.length;u++)if(Object.prototype.hasOwnProperty.call(a,u)){var l=a[u];if(o.call(void 0,l,u,a))return l}}function e(a,o){return o===void 0&&(o=Object),o&&typeof o.freeze=="function"?o.freeze(a):a}function t(a,o){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=o[s]);return a}var r=e({HTML:"text/html",isHTML:function(a){return a===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return tv.assign=t,tv.find=n,tv.freeze=e,tv.MIME_TYPE=r,tv.NAMESPACE=i,tv}var mH;function a7(){if(mH)return _d;mH=1;var n=KR(),e=n.find,t=n.NAMESPACE;function r(xe){return xe!==""}function i(xe){return xe?xe.split(/[\t\n\f\r ]+/).filter(r):[]}function a(xe,De){return xe.hasOwnProperty(De)||(xe[De]=!0),xe}function o(xe){if(!xe)return[];var De=i(xe);return Object.keys(De.reduce(a,{}))}function s(xe){return function(De){return xe&&xe.indexOf(De)!==-1}}function u(xe,De){for(var Ue in xe)Object.prototype.hasOwnProperty.call(xe,Ue)&&(De[Ue]=xe[Ue])}function l(xe,De){var Ue=xe.prototype;if(!(Ue instanceof De)){let et=function(){};et.prototype=De.prototype,et=new et,u(Ue,et),xe.prototype=Ue=et}Ue.constructor!=xe&&(typeof xe!="function"&&console.error("unknown Class:"+xe),Ue.constructor=xe)}var h={},c=h.ELEMENT_NODE=1,f=h.ATTRIBUTE_NODE=2,d=h.TEXT_NODE=3,p=h.CDATA_SECTION_NODE=4,m=h.ENTITY_REFERENCE_NODE=5,g=h.ENTITY_NODE=6,y=h.PROCESSING_INSTRUCTION_NODE=7,v=h.COMMENT_NODE=8,b=h.DOCUMENT_NODE=9,w=h.DOCUMENT_TYPE_NODE=10,x=h.DOCUMENT_FRAGMENT_NODE=11,S=h.NOTATION_NODE=12,E={},A={};E.INDEX_SIZE_ERR=(A[1]="Index size error",1),E.DOMSTRING_SIZE_ERR=(A[2]="DOMString size error",2);var k=E.HIERARCHY_REQUEST_ERR=(A[3]="Hierarchy request error",3);E.WRONG_DOCUMENT_ERR=(A[4]="Wrong document",4),E.INVALID_CHARACTER_ERR=(A[5]="Invalid character",5),E.NO_DATA_ALLOWED_ERR=(A[6]="No data allowed",6),E.NO_MODIFICATION_ALLOWED_ERR=(A[7]="No modification allowed",7);var T=E.NOT_FOUND_ERR=(A[8]="Not found",8);E.NOT_SUPPORTED_ERR=(A[9]="Not supported",9);var O=E.INUSE_ATTRIBUTE_ERR=(A[10]="Attribute in use",10);E.INVALID_STATE_ERR=(A[11]="Invalid state",11),E.SYNTAX_ERR=(A[12]="Syntax error",12),E.INVALID_MODIFICATION_ERR=(A[13]="Invalid modification",13),E.NAMESPACE_ERR=(A[14]="Invalid namespace",14),E.INVALID_ACCESS_ERR=(A[15]="Invalid access",15);function F(xe,De){if(De instanceof Error)var Ue=De;else Ue=this,Error.call(this,A[xe]),this.message=A[xe],Error.captureStackTrace&&Error.captureStackTrace(this,F);return Ue.code=xe,De&&(this.message=this.message+": "+De),Ue}F.prototype=Error.prototype,u(E,F);function I(){}I.prototype={length:0,item:function(xe){return xe>=0&&xe<this.length?this[xe]:null},toString:function(xe,De){for(var Ue=[],et=0;et<this.length;et++)dn(this[et],Ue,xe,De);return Ue.join("")},filter:function(xe){return Array.prototype.filter.call(this,xe)},indexOf:function(xe){return Array.prototype.indexOf.call(this,xe)}};function R(xe,De){this._node=xe,this._refresh=De,U(this)}function U(xe){var De=xe._node._inc||xe._node.ownerDocument._inc;if(xe._inc!==De){var Ue=xe._refresh(xe._node);if(Mu(xe,"length",Ue.length),!xe.$$length||Ue.length<xe.$$length)for(var et=Ue.length;et in xe;et++)Object.prototype.hasOwnProperty.call(xe,et)&&delete xe[et];u(Ue,xe),xe._inc=De}}R.prototype.item=function(xe){return U(this),this[xe]||null},l(R,I);function B(){}function W(xe,De){for(var Ue=xe.length;Ue--;)if(xe[Ue]===De)return Ue}function Y(xe,De,Ue,et){if(et?De[W(De,et)]=Ue:De[De.length++]=Ue,xe){Ue.ownerElement=xe;var Nt=xe.ownerDocument;Nt&&(et&&J(Nt,xe,et),Z(Nt,xe,Ue))}}function z(xe,De,Ue){var et=W(De,Ue);if(et>=0){for(var Nt=De.length-1;et<Nt;)De[et]=De[++et];if(De.length=Nt,xe){var pn=xe.ownerDocument;pn&&(J(pn,xe,Ue),Ue.ownerElement=null)}}else throw new F(T,new Error(xe.tagName+"@"+Ue))}B.prototype={length:0,item:I.prototype.item,getNamedItem:function(xe){for(var De=this.length;De--;){var Ue=this[De];if(Ue.nodeName==xe)return Ue}},setNamedItem:function(xe){var De=xe.ownerElement;if(De&&De!=this._ownerElement)throw new F(O);var Ue=this.getNamedItem(xe.nodeName);return Y(this._ownerElement,this,xe,Ue),Ue},setNamedItemNS:function(xe){var De=xe.ownerElement,Ue;if(De&&De!=this._ownerElement)throw new F(O);return Ue=this.getNamedItemNS(xe.namespaceURI,xe.localName),Y(this._ownerElement,this,xe,Ue),Ue},removeNamedItem:function(xe){var De=this.getNamedItem(xe);return z(this._ownerElement,this,De),De},removeNamedItemNS:function(xe,De){var Ue=this.getNamedItemNS(xe,De);return z(this._ownerElement,this,Ue),Ue},getNamedItemNS:function(xe,De){for(var Ue=this.length;Ue--;){var et=this[Ue];if(et.localName==De&&et.namespaceURI==xe)return et}return null}};function j(){}j.prototype={hasFeature:function(xe,De){return!0},createDocument:function(xe,De,Ue){var et=new K;if(et.implementation=this,et.childNodes=new I,et.doctype=Ue||null,Ue&&et.appendChild(Ue),De){var Nt=et.createElementNS(xe,De);et.appendChild(Nt)}return et},createDocumentType:function(xe,De,Ue){var et=new rt;return et.name=xe,et.nodeName=xe,et.publicId=De||"",et.systemId=Ue||"",et}};function M(){}M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(xe,De){return fe(this,xe,De)},replaceChild:function(xe,De){fe(this,xe,De,ne),De&&this.removeChild(De)},removeChild:function(xe){return ae(this,xe)},appendChild:function(xe){return this.insertBefore(xe,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(xe){return Ba(this.ownerDocument||this,this,xe)},normalize:function(){for(var xe=this.firstChild;xe;){var De=xe.nextSibling;De&&De.nodeType==d&&xe.nodeType==d?(this.removeChild(De),xe.appendData(De.data)):(xe.normalize(),xe=De)}},isSupported:function(xe,De){return this.ownerDocument.implementation.hasFeature(xe,De)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(xe){for(var De=this;De;){var Ue=De._nsMap;if(Ue){for(var et in Ue)if(Object.prototype.hasOwnProperty.call(Ue,et)&&Ue[et]===xe)return et}De=De.nodeType==f?De.ownerDocument:De.parentNode}return null},lookupNamespaceURI:function(xe){for(var De=this;De;){var Ue=De._nsMap;if(Ue&&Object.prototype.hasOwnProperty.call(Ue,xe))return Ue[xe];De=De.nodeType==f?De.ownerDocument:De.parentNode}return null},isDefaultNamespace:function(xe){var De=this.lookupPrefix(xe);return De==null}};function q(xe){return xe=="<"&&"&lt;"||xe==">"&&"&gt;"||xe=="&"&&"&amp;"||xe=='"'&&"&quot;"||"&#"+xe.charCodeAt()+";"}u(h,M),u(h,M.prototype);function H(xe,De){if(De(xe))return!0;if(xe=xe.firstChild)do if(H(xe,De))return!0;while(xe=xe.nextSibling)}function K(){this.ownerDocument=this}function Z(xe,De,Ue){xe&&xe._inc++;var et=Ue.namespaceURI;et===t.XMLNS&&(De._nsMap[Ue.prefix?Ue.localName:""]=Ue.value)}function J(xe,De,Ue,et){xe&&xe._inc++;var Nt=Ue.namespaceURI;Nt===t.XMLNS&&delete De._nsMap[Ue.prefix?Ue.localName:""]}function X(xe,De,Ue){if(xe&&xe._inc){xe._inc++;var et=De.childNodes;if(Ue)et[et.length++]=Ue;else{for(var Nt=De.firstChild,pn=0;Nt;)et[pn++]=Nt,Nt=Nt.nextSibling;et.length=pn,delete et[et.length]}}}function ae(xe,De){var Ue=De.previousSibling,et=De.nextSibling;return Ue?Ue.nextSibling=et:xe.firstChild=et,et?et.previousSibling=Ue:xe.lastChild=Ue,De.parentNode=null,De.previousSibling=null,De.nextSibling=null,X(xe.ownerDocument,xe),De}function ie(xe){return xe&&(xe.nodeType===M.DOCUMENT_NODE||xe.nodeType===M.DOCUMENT_FRAGMENT_NODE||xe.nodeType===M.ELEMENT_NODE)}function ce(xe){return xe&&(Ce(xe)||Ee(xe)||ge(xe)||xe.nodeType===M.DOCUMENT_FRAGMENT_NODE||xe.nodeType===M.COMMENT_NODE||xe.nodeType===M.PROCESSING_INSTRUCTION_NODE)}function ge(xe){return xe&&xe.nodeType===M.DOCUMENT_TYPE_NODE}function Ce(xe){return xe&&xe.nodeType===M.ELEMENT_NODE}function Ee(xe){return xe&&xe.nodeType===M.TEXT_NODE}function G(xe,De){var Ue=xe.childNodes||[];if(e(Ue,Ce)||ge(De))return!1;var et=e(Ue,ge);return!(De&&et&&Ue.indexOf(et)>Ue.indexOf(De))}function de(xe,De){var Ue=xe.childNodes||[];function et(pn){return Ce(pn)&&pn!==De}if(e(Ue,et))return!1;var Nt=e(Ue,ge);return!(De&&Nt&&Ue.indexOf(Nt)>Ue.indexOf(De))}function ye(xe,De,Ue){if(!ie(xe))throw new F(k,"Unexpected parent node type "+xe.nodeType);if(Ue&&Ue.parentNode!==xe)throw new F(T,"child not in parent");if(!ce(De)||ge(De)&&xe.nodeType!==M.DOCUMENT_NODE)throw new F(k,"Unexpected node type "+De.nodeType+" for parent node type "+xe.nodeType)}function le(xe,De,Ue){var et=xe.childNodes||[],Nt=De.childNodes||[];if(De.nodeType===M.DOCUMENT_FRAGMENT_NODE){var pn=Nt.filter(Ce);if(pn.length>1||e(Nt,Ee))throw new F(k,"More than one element or text in fragment");if(pn.length===1&&!G(xe,Ue))throw new F(k,"Element in fragment can not be inserted before doctype")}if(Ce(De)&&!G(xe,Ue))throw new F(k,"Only one element can be added and only after doctype");if(ge(De)){if(e(et,ge))throw new F(k,"Only one doctype is allowed");var Be=e(et,Ce);if(Ue&&et.indexOf(Be)<et.indexOf(Ue))throw new F(k,"Doctype can only be inserted before an element");if(!Ue&&Be)throw new F(k,"Doctype can not be appended since element is present")}}function ne(xe,De,Ue){var et=xe.childNodes||[],Nt=De.childNodes||[];if(De.nodeType===M.DOCUMENT_FRAGMENT_NODE){var pn=Nt.filter(Ce);if(pn.length>1||e(Nt,Ee))throw new F(k,"More than one element or text in fragment");if(pn.length===1&&!de(xe,Ue))throw new F(k,"Element in fragment can not be inserted before doctype")}if(Ce(De)&&!de(xe,Ue))throw new F(k,"Only one element can be added and only after doctype");if(ge(De)){if(e(et,function(nt){return ge(nt)&&nt!==Ue}))throw new F(k,"Only one doctype is allowed");var Be=e(et,Ce);if(Ue&&et.indexOf(Be)<et.indexOf(Ue))throw new F(k,"Doctype can only be inserted before an element")}}function fe(xe,De,Ue,et){ye(xe,De,Ue),xe.nodeType===M.DOCUMENT_NODE&&(et||le)(xe,De,Ue);var Nt=De.parentNode;if(Nt&&Nt.removeChild(De),De.nodeType===x){var pn=De.firstChild;if(pn==null)return De;var Be=De.lastChild}else pn=Be=De;var Ge=Ue?Ue.previousSibling:xe.lastChild;pn.previousSibling=Ge,Be.nextSibling=Ue,Ge?Ge.nextSibling=pn:xe.firstChild=pn,Ue==null?xe.lastChild=Be:Ue.previousSibling=Be;do pn.parentNode=xe;while(pn!==Be&&(pn=pn.nextSibling));return X(xe.ownerDocument||xe,xe),De.nodeType==x&&(De.firstChild=De.lastChild=null),De}function Ne(xe,De){return De.parentNode&&De.parentNode.removeChild(De),De.parentNode=xe,De.previousSibling=xe.lastChild,De.nextSibling=null,De.previousSibling?De.previousSibling.nextSibling=De:xe.firstChild=De,xe.lastChild=De,X(xe.ownerDocument,xe,De),De}K.prototype={nodeName:"#document",nodeType:b,doctype:null,documentElement:null,_inc:1,insertBefore:function(xe,De){if(xe.nodeType==x){for(var Ue=xe.firstChild;Ue;){var et=Ue.nextSibling;this.insertBefore(Ue,De),Ue=et}return xe}return fe(this,xe,De),xe.ownerDocument=this,this.documentElement===null&&xe.nodeType===c&&(this.documentElement=xe),xe},removeChild:function(xe){return this.documentElement==xe&&(this.documentElement=null),ae(this,xe)},replaceChild:function(xe,De){fe(this,xe,De,ne),xe.ownerDocument=this,De&&this.removeChild(De),Ce(xe)&&(this.documentElement=xe)},importNode:function(xe,De){return Kr(this,xe,De)},getElementById:function(xe){var De=null;return H(this.documentElement,function(Ue){if(Ue.nodeType==c&&Ue.getAttribute("id")==xe)return De=Ue,!0}),De},getElementsByClassName:function(xe){var De=o(xe);return new R(this,function(Ue){var et=[];return De.length>0&&H(Ue.documentElement,function(Nt){if(Nt!==Ue&&Nt.nodeType===c){var pn=Nt.getAttribute("class");if(pn){var Be=xe===pn;if(!Be){var Ge=o(pn);Be=De.every(s(Ge))}Be&&et.push(Nt)}}}),et})},createElement:function(xe){var De=new Ae;De.ownerDocument=this,De.nodeName=xe,De.tagName=xe,De.localName=xe,De.childNodes=new I;var Ue=De.attributes=new B;return Ue._ownerElement=De,De},createDocumentFragment:function(){var xe=new Le;return xe.ownerDocument=this,xe.childNodes=new I,xe},createTextNode:function(xe){var De=new Se;return De.ownerDocument=this,De.appendData(xe),De},createComment:function(xe){var De=new Re;return De.ownerDocument=this,De.appendData(xe),De},createCDATASection:function(xe){var De=new je;return De.ownerDocument=this,De.appendData(xe),De},createProcessingInstruction:function(xe,De){var Ue=new tt;return Ue.ownerDocument=this,Ue.tagName=Ue.nodeName=Ue.target=xe,Ue.nodeValue=Ue.data=De,Ue},createAttribute:function(xe){var De=new ue;return De.ownerDocument=this,De.name=xe,De.nodeName=xe,De.localName=xe,De.specified=!0,De},createEntityReference:function(xe){var De=new pt;return De.ownerDocument=this,De.nodeName=xe,De},createElementNS:function(xe,De){var Ue=new Ae,et=De.split(":"),Nt=Ue.attributes=new B;return Ue.childNodes=new I,Ue.ownerDocument=this,Ue.nodeName=De,Ue.tagName=De,Ue.namespaceURI=xe,et.length==2?(Ue.prefix=et[0],Ue.localName=et[1]):Ue.localName=De,Nt._ownerElement=Ue,Ue},createAttributeNS:function(xe,De){var Ue=new ue,et=De.split(":");return Ue.ownerDocument=this,Ue.nodeName=De,Ue.name=De,Ue.namespaceURI=xe,Ue.specified=!0,et.length==2?(Ue.prefix=et[0],Ue.localName=et[1]):Ue.localName=De,Ue}},l(K,M);function Ae(){this._nsMap={}}Ae.prototype={nodeType:c,hasAttribute:function(xe){return this.getAttributeNode(xe)!=null},getAttribute:function(xe){var De=this.getAttributeNode(xe);return De&&De.value||""},getAttributeNode:function(xe){return this.attributes.getNamedItem(xe)},setAttribute:function(xe,De){var Ue=this.ownerDocument.createAttribute(xe);Ue.value=Ue.nodeValue=""+De,this.setAttributeNode(Ue)},removeAttribute:function(xe){var De=this.getAttributeNode(xe);De&&this.removeAttributeNode(De)},appendChild:function(xe){return xe.nodeType===x?this.insertBefore(xe,null):Ne(this,xe)},setAttributeNode:function(xe){return this.attributes.setNamedItem(xe)},setAttributeNodeNS:function(xe){return this.attributes.setNamedItemNS(xe)},removeAttributeNode:function(xe){return this.attributes.removeNamedItem(xe.nodeName)},removeAttributeNS:function(xe,De){var Ue=this.getAttributeNodeNS(xe,De);Ue&&this.removeAttributeNode(Ue)},hasAttributeNS:function(xe,De){return this.getAttributeNodeNS(xe,De)!=null},getAttributeNS:function(xe,De){var Ue=this.getAttributeNodeNS(xe,De);return Ue&&Ue.value||""},setAttributeNS:function(xe,De,Ue){var et=this.ownerDocument.createAttributeNS(xe,De);et.value=et.nodeValue=""+Ue,this.setAttributeNode(et)},getAttributeNodeNS:function(xe,De){return this.attributes.getNamedItemNS(xe,De)},getElementsByTagName:function(xe){return new R(this,function(De){var Ue=[];return H(De,function(et){et!==De&&et.nodeType==c&&(xe==="*"||et.tagName==xe)&&Ue.push(et)}),Ue})},getElementsByTagNameNS:function(xe,De){return new R(this,function(Ue){var et=[];return H(Ue,function(Nt){Nt!==Ue&&Nt.nodeType===c&&(xe==="*"||Nt.namespaceURI===xe)&&(De==="*"||Nt.localName==De)&&et.push(Nt)}),et})}},K.prototype.getElementsByTagName=Ae.prototype.getElementsByTagName,K.prototype.getElementsByTagNameNS=Ae.prototype.getElementsByTagNameNS,l(Ae,M);function ue(){}ue.prototype.nodeType=f,l(ue,M);function me(){}me.prototype={data:"",substringData:function(xe,De){return this.data.substring(xe,xe+De)},appendData:function(xe){xe=this.data+xe,this.nodeValue=this.data=xe,this.length=xe.length},insertData:function(xe,De){this.replaceData(xe,0,De)},appendChild:function(xe){throw new Error(A[k])},deleteData:function(xe,De){this.replaceData(xe,De,"")},replaceData:function(xe,De,Ue){var et=this.data.substring(0,xe),Nt=this.data.substring(xe+De);Ue=et+Ue+Nt,this.nodeValue=this.data=Ue,this.length=Ue.length}},l(me,M);function Se(){}Se.prototype={nodeName:"#text",nodeType:d,splitText:function(xe){var De=this.data,Ue=De.substring(xe);De=De.substring(0,xe),this.data=this.nodeValue=De,this.length=De.length;var et=this.ownerDocument.createTextNode(Ue);return this.parentNode&&this.parentNode.insertBefore(et,this.nextSibling),et}},l(Se,me);function Re(){}Re.prototype={nodeName:"#comment",nodeType:v},l(Re,me);function je(){}je.prototype={nodeName:"#cdata-section",nodeType:p},l(je,me);function rt(){}rt.prototype.nodeType=w,l(rt,M);function at(){}at.prototype.nodeType=S,l(at,M);function yt(){}yt.prototype.nodeType=g,l(yt,M);function pt(){}pt.prototype.nodeType=m,l(pt,M);function Le(){}Le.prototype.nodeName="#document-fragment",Le.prototype.nodeType=x,l(Le,M);function tt(){}tt.prototype.nodeType=y,l(tt,M);function ft(){}ft.prototype.serializeToString=function(xe,De,Ue){return Et.call(xe,De,Ue)},M.prototype.toString=Et;function Et(xe,De){var Ue=[],et=this.nodeType==9&&this.documentElement||this,Nt=et.prefix,pn=et.namespaceURI;if(pn&&Nt==null){var Nt=et.lookupPrefix(pn);if(Nt==null)var Be=[{namespace:pn,prefix:null}]}return dn(this,Ue,xe,De,Be),Ue.join("")}function xt(xe,De,Ue){var et=xe.prefix||"",Nt=xe.namespaceURI;if(!Nt||et==="xml"&&Nt===t.XML||Nt===t.XMLNS)return!1;for(var pn=Ue.length;pn--;){var Be=Ue[pn];if(Be.prefix===et)return Be.namespace!==Nt}return!0}function Ot(xe,De,Ue){xe.push(" ",De,'="',Ue.replace(/[<>&"\t\n\r]/g,q),'"')}function dn(xe,De,Ue,et,Nt){if(Nt||(Nt=[]),et)if(xe=et(xe),xe){if(typeof xe=="string"){De.push(xe);return}}else return;switch(xe.nodeType){case c:var pn=xe.attributes,Be=pn.length,Vt=xe.firstChild,Ge=xe.tagName;Ue=t.isHTML(xe.namespaceURI)||Ue;var nt=Ge;if(!Ue&&!xe.prefix&&xe.namespaceURI){for(var bt,kt=0;kt<pn.length;kt++)if(pn.item(kt).name==="xmlns"){bt=pn.item(kt).value;break}if(!bt)for(var tn=Nt.length-1;tn>=0;tn--){var an=Nt[tn];if(an.prefix===""&&an.namespace===xe.namespaceURI){bt=an.namespace;break}}if(bt!==xe.namespaceURI)for(var tn=Nt.length-1;tn>=0;tn--){var an=Nt[tn];if(an.namespace===xe.namespaceURI){an.prefix&&(nt=an.prefix+":"+Ge);break}}}De.push("<",nt);for(var Mt=0;Mt<Be;Mt++){var Bt=pn.item(Mt);Bt.prefix=="xmlns"?Nt.push({prefix:Bt.localName,namespace:Bt.value}):Bt.nodeName=="xmlns"&&Nt.push({prefix:"",namespace:Bt.value})}for(var Mt=0;Mt<Be;Mt++){var Bt=pn.item(Mt);if(xt(Bt,Ue,Nt)){var Rt=Bt.prefix||"",zt=Bt.namespaceURI;Ot(De,Rt?"xmlns:"+Rt:"xmlns",zt),Nt.push({prefix:Rt,namespace:zt})}dn(Bt,De,Ue,et,Nt)}if(Ge===nt&&xt(xe,Ue,Nt)){var Rt=xe.prefix||"",zt=xe.namespaceURI;Ot(De,Rt?"xmlns:"+Rt:"xmlns",zt),Nt.push({prefix:Rt,namespace:zt})}if(Vt||Ue&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ge)){if(De.push(">"),Ue&&/^script$/i.test(Ge))for(;Vt;)Vt.data?De.push(Vt.data):dn(Vt,De,Ue,et,Nt.slice()),Vt=Vt.nextSibling;else for(;Vt;)dn(Vt,De,Ue,et,Nt.slice()),Vt=Vt.nextSibling;De.push("</",nt,">")}else De.push("/>");return;case b:case x:for(var Vt=xe.firstChild;Vt;)dn(Vt,De,Ue,et,Nt.slice()),Vt=Vt.nextSibling;return;case f:return Ot(De,xe.name,xe.value);case d:return De.push(xe.data.replace(/[<&>]/g,q));case p:return De.push("<![CDATA[",xe.data,"]]>");case v:return De.push("<!--",xe.data,"-->");case w:var $n=xe.publicId,fr=xe.systemId;if(De.push("<!DOCTYPE ",xe.name),$n)De.push(" PUBLIC ",$n),fr&&fr!="."&&De.push(" ",fr),De.push(">");else if(fr&&fr!=".")De.push(" SYSTEM ",fr,">");else{var Wr=xe.internalSubset;Wr&&De.push(" [",Wr,"]"),De.push(">")}return;case y:return De.push("<?",xe.target," ",xe.data,"?>");case m:return De.push("&",xe.nodeName,";");default:De.push("??",xe.nodeName)}}function Kr(xe,De,Ue){var et;switch(De.nodeType){case c:et=De.cloneNode(!1),et.ownerDocument=xe;case x:break;case f:Ue=!0;break}if(et||(et=De.cloneNode(!1)),et.ownerDocument=xe,et.parentNode=null,Ue)for(var Nt=De.firstChild;Nt;)et.appendChild(Kr(xe,Nt,Ue)),Nt=Nt.nextSibling;return et}function Ba(xe,De,Ue){var et=new De.constructor;for(var Nt in De)if(Object.prototype.hasOwnProperty.call(De,Nt)){var pn=De[Nt];typeof pn!="object"&&pn!=et[Nt]&&(et[Nt]=pn)}switch(De.childNodes&&(et.childNodes=new I),et.ownerDocument=xe,et.nodeType){case c:var Be=De.attributes,Ge=et.attributes=new B,nt=Be.length;Ge._ownerElement=et;for(var bt=0;bt<nt;bt++)et.setAttributeNode(Ba(xe,Be.item(bt),!0));break;case f:Ue=!0}if(Ue)for(var kt=De.firstChild;kt;)et.appendChild(Ba(xe,kt,Ue)),kt=kt.nextSibling;return et}function Mu(xe,De,Ue){xe[De]=Ue}try{if(Object.defineProperty){let xe=function(De){switch(De.nodeType){case c:case x:var Ue=[];for(De=De.firstChild;De;)De.nodeType!==7&&De.nodeType!==8&&Ue.push(xe(De)),De=De.nextSibling;return Ue.join("");default:return De.nodeValue}};Object.defineProperty(R.prototype,"length",{get:function(){return U(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return xe(this)},set:function(De){switch(this.nodeType){case c:case x:for(;this.firstChild;)this.removeChild(this.firstChild);(De||String(De))&&this.appendChild(this.ownerDocument.createTextNode(De));break;default:this.data=De,this.value=De,this.nodeValue=De}}}),Mu=function(De,Ue,et){De["$$"+Ue]=et}}}catch{}return _d.DocumentType=rt,_d.DOMException=F,_d.DOMImplementation=j,_d.Element=Ae,_d.Node=M,_d.NodeList=I,_d.XMLSerializer=ft,_d}var B_={},IF={},yH;function VTe(){return yH||(yH=1,function(n){var e=KR().freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),n.entityMap=n.HTML_ENTITIES}(IF)),IF}var lk={},vH;function HTe(){if(vH)return lk;vH=1;var n=KR().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,a=1,o=2,s=3,u=4,l=5,h=6,c=7;function f(k,T){this.message=k,this.locator=T,Error.captureStackTrace&&Error.captureStackTrace(this,f)}f.prototype=new Error,f.prototype.name=f.name;function d(){}d.prototype={parse:function(k,T,O){var F=this.domBuilder;F.startDocument(),w(T,T={}),p(k,T,O,F,this.errorHandler),F.endDocument()}};function p(k,T,O,F,I){function R(Ae){if(Ae>65535){Ae-=65536;var ue=55296+(Ae>>10),me=56320+(Ae&1023);return String.fromCharCode(ue,me)}else return String.fromCharCode(Ae)}function U(Ae){var ue=Ae.slice(1,-1);return Object.hasOwnProperty.call(O,ue)?O[ue]:ue.charAt(0)==="#"?R(parseInt(ue.substr(1).replace("x","0x"))):(I.error("entity not found:"+Ae),Ae)}function B(Ae){if(Ae>K){var ue=k.substring(K,Ae).replace(/&#?\w+;/g,U);M&&W(K),F.characters(ue,0,Ae-K),K=Ae}}function W(Ae,ue){for(;Ae>=z&&(ue=j.exec(k));)Y=ue.index,z=Y+ue[0].length,M.lineNumber++;M.columnNumber=Ae-Y+1}for(var Y=0,z=0,j=/.*(?:\r\n?|\n)|.*$/g,M=F.locator,q=[{currentNSMap:T}],H={},K=0;;){try{var Z=k.indexOf("<",K);if(Z<0){if(!k.substr(K).match(/^\s*$/)){var J=F.doc,X=J.createTextNode(k.substr(K));J.appendChild(X),F.currentElement=X}return}switch(Z>K&&B(Z),k.charAt(Z+1)){case"/":var ye=k.indexOf(">",Z+3),ae=k.substring(Z+2,ye).replace(/[ \t\n\r]+$/g,""),ie=q.pop();ye<0?(ae=k.substring(Z+2).replace(/[\s<].*/,""),I.error("end tag name: "+ae+" is not complete:"+ie.tagName),ye=Z+1+ae.length):ae.match(/\s</)&&(ae=ae.replace(/[\s<].*/,""),I.error("end tag name: "+ae+" maybe not complete"),ye=Z+1+ae.length);var ce=ie.localNSMap,ge=ie.tagName==ae,Ce=ge||ie.tagName&&ie.tagName.toLowerCase()==ae.toLowerCase();if(Ce){if(F.endElement(ie.uri,ie.localName,ae),ce)for(var Ee in ce)Object.prototype.hasOwnProperty.call(ce,Ee)&&F.endPrefixMapping(Ee);ge||I.fatalError("end tag name: "+ae+" is not match the current start tagName:"+ie.tagName)}else q.push(ie);ye++;break;case"?":M&&W(Z),ye=S(k,Z,F);break;case"!":M&&W(Z),ye=x(k,Z,F,I);break;default:M&&W(Z);var G=new E,de=q[q.length-1].currentNSMap,ye=g(k,Z,G,de,U,I),le=G.length;if(!G.closed&&b(k,ye,G.tagName,H)&&(G.closed=!0,O.nbsp||I.warning("unclosed xml attribute")),M&&le){for(var ne=m(M,{}),fe=0;fe<le;fe++){var Ne=G[fe];W(Ne.offset),Ne.locator=m(M,{})}F.locator=ne,y(G,F,de)&&q.push(G),F.locator=M}else y(G,F,de)&&q.push(G);n.isHTML(G.uri)&&!G.closed?ye=v(k,ye,G.tagName,U,F):ye++}}catch(Ae){if(Ae instanceof f)throw Ae;I.error("element parse error: "+Ae),ye=-1}ye>K?K=ye:B(Math.max(Z,K)+1)}}function m(k,T){return T.lineNumber=k.lineNumber,T.columnNumber=k.columnNumber,T}function g(k,T,O,F,I,R){function U(M,q,H){O.attributeNames.hasOwnProperty(M)&&R.fatalError("Attribute "+M+" redefined"),O.addValue(M,q.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,I),H)}for(var B,W,Y=++T,z=i;;){var j=k.charAt(Y);switch(j){case"=":if(z===a)B=k.slice(T,Y),z=s;else if(z===o)z=s;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(z===s||z===a)if(z===a&&(R.warning('attribute value must after "="'),B=k.slice(T,Y)),T=Y+1,Y=k.indexOf(j,T),Y>0)W=k.slice(T,Y),U(B,W,T-1),z=l;else throw new Error("attribute value no end '"+j+"' match");else if(z==u)W=k.slice(T,Y),U(B,W,T),R.warning('attribute "'+B+'" missed start quot('+j+")!!"),T=Y+1,z=l;else throw new Error('attribute value must after "="');break;case"/":switch(z){case i:O.setTagName(k.slice(T,Y));case l:case h:case c:z=c,O.closed=!0;case u:case a:break;case o:O.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return R.error("unexpected end of input"),z==i&&O.setTagName(k.slice(T,Y)),Y;case">":switch(z){case i:O.setTagName(k.slice(T,Y));case l:case h:case c:break;case u:case a:W=k.slice(T,Y),W.slice(-1)==="/"&&(O.closed=!0,W=W.slice(0,-1));case o:z===o&&(W=B),z==u?(R.warning('attribute "'+W+'" missed quot(")!'),U(B,W,T)):((!n.isHTML(F[""])||!W.match(/^(?:disabled|checked|selected)$/i))&&R.warning('attribute "'+W+'" missed value!! "'+W+'" instead!!'),U(W,W,T));break;case s:throw new Error("attribute value missed!!")}return Y;case"":j=" ";default:if(j<=" ")switch(z){case i:O.setTagName(k.slice(T,Y)),z=h;break;case a:B=k.slice(T,Y),z=o;break;case u:var W=k.slice(T,Y);R.warning('attribute "'+W+'" missed quot(")!!'),U(B,W,T);case l:z=h;break}else switch(z){case o:O.tagName,(!n.isHTML(F[""])||!B.match(/^(?:disabled|checked|selected)$/i))&&R.warning('attribute "'+B+'" missed value!! "'+B+'" instead2!!'),U(B,B,T),T=Y,z=a;break;case l:R.warning('attribute space is required"'+B+'"!!');case h:z=a,T=Y;break;case s:z=u,T=Y;break;case c:throw new Error("elements closed character '/' and '>' must be connected to")}}Y++}}function y(k,T,O){for(var F=k.tagName,I=null,j=k.length;j--;){var R=k[j],U=R.qName,B=R.value,M=U.indexOf(":");if(M>0)var W=R.prefix=U.slice(0,M),Y=U.slice(M+1),z=W==="xmlns"&&Y;else Y=U,W=null,z=U==="xmlns"&&"";R.localName=Y,z!==!1&&(I==null&&(I={},w(O,O={})),O[z]=I[z]=B,R.uri=n.XMLNS,T.startPrefixMapping(z,B))}for(var j=k.length;j--;){R=k[j];var W=R.prefix;W&&(W==="xml"&&(R.uri=n.XML),W!=="xmlns"&&(R.uri=O[W||""]))}var M=F.indexOf(":");M>0?(W=k.prefix=F.slice(0,M),Y=k.localName=F.slice(M+1)):(W=null,Y=k.localName=F);var q=k.uri=O[W||""];if(T.startElement(q,Y,F,k),k.closed){if(T.endElement(q,Y,F),I)for(W in I)Object.prototype.hasOwnProperty.call(I,W)&&T.endPrefixMapping(W)}else return k.currentNSMap=O,k.localNSMap=I,!0}function v(k,T,O,F,I){if(/^(?:script|textarea)$/i.test(O)){var R=k.indexOf("</"+O+">",T),U=k.substring(T+1,R);if(/[&<]/.test(U))return/^script$/i.test(O)?(I.characters(U,0,U.length),R):(U=U.replace(/&#?\w+;/g,F),I.characters(U,0,U.length),R)}return T+1}function b(k,T,O,F){var I=F[O];return I==null&&(I=k.lastIndexOf("</"+O+">"),I<T&&(I=k.lastIndexOf("</"+O)),F[O]=I),I<T}function w(k,T){for(var O in k)Object.prototype.hasOwnProperty.call(k,O)&&(T[O]=k[O])}function x(k,T,O,F){var I=k.charAt(T+2);switch(I){case"-":if(k.charAt(T+3)==="-"){var R=k.indexOf("-->",T+4);return R>T?(O.comment(k,T+4,R-T-4),R+3):(F.error("Unclosed comment"),-1)}else return-1;default:if(k.substr(T+3,6)=="CDATA["){var R=k.indexOf("]]>",T+9);return O.startCDATA(),O.characters(k,T+9,R-T-9),O.endCDATA(),R+3}var U=A(k,T),B=U.length;if(B>1&&/!doctype/i.test(U[0][0])){var W=U[1][0],Y=!1,z=!1;B>3&&(/^public$/i.test(U[2][0])?(Y=U[3][0],z=B>4&&U[4][0]):/^system$/i.test(U[2][0])&&(z=U[3][0]));var j=U[B-1];return O.startDTD(W,Y,z),O.endDTD(),j.index+j[0].length}}return-1}function S(k,T,O){var F=k.indexOf("?>",T);if(F){var I=k.substring(T,F).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return I?(I[0].length,O.processingInstruction(I[1],I[2]),F+2):-1}return-1}function E(){this.attributeNames={}}E.prototype={setTagName:function(k){if(!r.test(k))throw new Error("invalid tagName:"+k);this.tagName=k},addValue:function(k,T,O){if(!r.test(k))throw new Error("invalid attribute:"+k);this.attributeNames[k]=this.length,this[this.length++]={qName:k,value:T,offset:O}},length:0,getLocalName:function(k){return this[k].localName},getLocator:function(k){return this[k].locator},getQName:function(k){return this[k].qName},getURI:function(k){return this[k].uri},getValue:function(k){return this[k].value}};function A(k,T){var O,F=[],I=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(I.lastIndex=T,I.exec(k);O=I.exec(k);)if(F.push(O),O[1])return F}return lk.XMLReader=d,lk.ParseError=f,lk}var bH;function GTe(){if(bH)return B_;bH=1;var n=KR(),e=a7(),t=VTe(),r=HTe(),i=e.DOMImplementation,a=n.NAMESPACE,o=r.ParseError,s=r.XMLReader;function u(g){return g.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function l(g){this.options=g||{locator:{}}}l.prototype.parseFromString=function(g,y){var v=this.options,b=new s,w=v.domBuilder||new c,x=v.errorHandler,S=v.locator,E=v.xmlns||{},A=/\/x?html?$/.test(y),k=A?t.HTML_ENTITIES:t.XML_ENTITIES;S&&w.setDocumentLocator(S),b.errorHandler=h(x,w,S),b.domBuilder=v.domBuilder||w,A&&(E[""]=a.HTML),E.xml=E.xml||a.XML;var T=v.normalizeLineEndings||u;return g&&typeof g=="string"?b.parse(T(g),E,k):b.errorHandler.error("invalid doc source"),w.doc};function h(g,y,v){if(!g){if(y instanceof c)return y;g=y}var b={},w=g instanceof Function;v=v||{};function x(S){var E=g[S];!E&&w&&(E=g.length==2?function(A){g(S,A)}:g),b[S]=E&&function(A){E("[xmldom "+S+"]	"+A+d(v))}||function(){}}return x("warning"),x("error"),x("fatalError"),b}function c(){this.cdata=!1}function f(g,y){y.lineNumber=g.lineNumber,y.columnNumber=g.columnNumber}c.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(g,y,v,b){var w=this.doc,x=w.createElementNS(g,v||y),S=b.length;m(this,x),this.currentElement=x,this.locator&&f(this.locator,x);for(var E=0;E<S;E++){var g=b.getURI(E),A=b.getValue(E),v=b.getQName(E),k=w.createAttributeNS(g,v);this.locator&&f(b.getLocator(E),k),k.value=k.nodeValue=A,x.setAttributeNode(k)}},endElement:function(g,y,v){var b=this.currentElement;b.tagName,this.currentElement=b.parentNode},startPrefixMapping:function(g,y){},endPrefixMapping:function(g){},processingInstruction:function(g,y){var v=this.doc.createProcessingInstruction(g,y);this.locator&&f(this.locator,v),m(this,v)},ignorableWhitespace:function(g,y,v){},characters:function(g,y,v){if(g=p.apply(this,arguments),g){if(this.cdata)var b=this.doc.createCDATASection(g);else var b=this.doc.createTextNode(g);this.currentElement?this.currentElement.appendChild(b):/^\s*$/.test(g)&&this.doc.appendChild(b),this.locator&&f(this.locator,b)}},skippedEntity:function(g){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(g){(this.locator=g)&&(g.lineNumber=0)},comment:function(g,y,v){g=p.apply(this,arguments);var b=this.doc.createComment(g);this.locator&&f(this.locator,b),m(this,b)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(g,y,v){var b=this.doc.implementation;if(b&&b.createDocumentType){var w=b.createDocumentType(g,y,v);this.locator&&f(this.locator,w),m(this,w),this.doc.doctype=w}},warning:function(g){console.warn("[xmldom warning]	"+g,d(this.locator))},error:function(g){console.error("[xmldom error]	"+g,d(this.locator))},fatalError:function(g){throw new o(g,this.locator)}};function d(g){if(g)return`
@`+(g.systemId||"")+"#[line:"+g.lineNumber+",col:"+g.columnNumber+"]"}function p(g,y,v){return typeof g=="string"?g.substr(y,v):g.length>=y+v||y?new java.lang.String(g,y,v)+"":g}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(g){c.prototype[g]=function(){return null}});function m(g,y){g.currentElement?g.currentElement.appendChild(y):g.doc.appendChild(y)}return B_.__DOMHandler=c,B_.normalizeLineEndings=u,B_.DOMParser=l,B_}var wH;function XTe(){if(wH)return U_;wH=1;var n=a7();return U_.DOMImplementation=n.DOMImplementation,U_.XMLSerializer=n.XMLSerializer,U_.DOMParser=GTe().DOMParser,U_}var xH;function KTe(){if(xH)return uk;xH=1;var n=XTe(),e=a7();function t(r){var i=null,a=new n.DOMParser({errorHandler:function(s,u){i={level:s,message:u}}}),o=a.parseFromString(r);if(i===null)return o;throw new Error(i.level+": "+i.message)}return uk.parseFromString=t,uk.Node=e.Node,uk}var _H;function YTe(){if(_H)return RF;_H=1;var n=cy(),e=ba,t=KTe(),r=dre(),i=r.Element;RF.readString=o;var a=t.Node;function o(s,u){u=u||{};try{var l=t.parseFromString(s,"text/xml")}catch(d){return n.reject(d)}if(l.documentElement.tagName==="parsererror")return n.resolve(new Error(l.documentElement.textContent));function h(d){switch(d.nodeType){case a.ELEMENT_NODE:return c(d);case a.TEXT_NODE:return r.text(d.nodeValue)}}function c(d){var p=f(d),m=[];e.forEach(d.childNodes,function(y){var v=h(y);v&&m.push(v)});var g={};return e.forEach(d.attributes,function(y){g[f(y)]=y.value}),new i(p,g,m)}function f(d){if(d.namespaceURI){var p=u[d.namespaceURI],m;return p?m=p+":":m="{"+d.namespaceURI+"}",m+d.localName}else return d.localName}return n.resolve(h(l.documentElement))}return RF}var FF={},nv={},ef={},SH;function hy(){return SH||(SH=1,(function(){var n,e,t,r,i,a,o,s=[].slice,u={}.hasOwnProperty;n=function(){var l,h,c,f,d,p;if(p=arguments[0],d=2<=arguments.length?s.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(l=0,c=d.length;l<c;l++)if(f=d[l],f!=null)for(h in f)u.call(f,h)&&(p[h]=f[h]);return p},i=function(l){return!!l&&Object.prototype.toString.call(l)==="[object Function]"},a=function(l){var h;return!!l&&((h=typeof l)=="function"||h==="object")},t=function(l){return i(Array.isArray)?Array.isArray(l):Object.prototype.toString.call(l)==="[object Array]"},r=function(l){var h;if(t(l))return!l.length;for(h in l)if(u.call(l,h))return!1;return!0},o=function(l){var h,c;return a(l)&&(c=Object.getPrototypeOf(l))&&(h=c.constructor)&&typeof h=="function"&&h instanceof h&&Function.prototype.toString.call(h)===Function.prototype.toString.call(Object)},e=function(l){return i(l.valueOf)?l.valueOf():l},ef.assign=n,ef.isFunction=i,ef.isObject=a,ef.isArray=t,ef.isEmpty=r,ef.isPlainObject=o,ef.getValue=e}).call(ef)),ef}var n3={exports:{}},r3={exports:{}},i3={exports:{}},a3={exports:{}},QTe=a3.exports,CH;function pre(){return CH||(CH=1,(function(){a3.exports=function(){function n(e,t,r){if(this.options=e.options,this.stringify=e.stringify,this.parent=e,t==null)throw new Error("Missing attribute name. "+this.debugInfo(t));if(r==null)throw new Error("Missing attribute value. "+this.debugInfo(t));this.name=this.stringify.attName(t),this.value=this.stringify.attValue(r)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},n.prototype.debugInfo=function(e){return e=e||this.name,e==null?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},n}()}).call(QTe)),a3.exports}var ZTe=i3.exports,EH;function YR(){return EH||(EH=1,(function(){var n,e,t,r,i,a,o=function(u,l){for(var h in l)s.call(l,h)&&(u[h]=l[h]);function c(){this.constructor=u}return c.prototype=l.prototype,u.prototype=new c,u.__super__=l.prototype,u},s={}.hasOwnProperty;a=hy(),i=a.isObject,r=a.isFunction,t=a.getValue,e=Pu(),n=pre(),i3.exports=function(u){o(l,u);function l(h,c,f){if(l.__super__.constructor.call(this,h),c==null)throw new Error("Missing element name. "+this.debugInfo());this.name=this.stringify.eleName(c),this.attributes={},f!=null&&this.attribute(f),h.isDocument&&(this.isRoot=!0,this.documentObject=h,h.rootObject=this)}return l.prototype.clone=function(){var h,c,f,d;f=Object.create(this),f.isRoot&&(f.documentObject=null),f.attributes={},d=this.attributes;for(c in d)s.call(d,c)&&(h=d[c],f.attributes[c]=h.clone());return f.children=[],this.children.forEach(function(p){var m;return m=p.clone(),m.parent=f,f.children.push(m)}),f},l.prototype.attribute=function(h,c){var f,d;if(h!=null&&(h=t(h)),i(h))for(f in h)s.call(h,f)&&(d=h[f],this.attribute(f,d));else r(c)&&(c=c.apply()),(!this.options.skipNullAttributes||c!=null)&&(this.attributes[h]=new n(this,h,c));return this},l.prototype.removeAttribute=function(h){var c,f,d;if(h==null)throw new Error("Missing attribute name. "+this.debugInfo());if(h=t(h),Array.isArray(h))for(f=0,d=h.length;f<d;f++)c=h[f],delete this.attributes[c];else delete this.attributes[h];return this},l.prototype.toString=function(h){return this.options.writer.set(h).element(this)},l.prototype.att=function(h,c){return this.attribute(h,c)},l.prototype.a=function(h,c){return this.attribute(h,c)},l}(e)}).call(ZTe)),i3.exports}var s3={exports:{}},JTe=s3.exports,TH;function QR(){return TH||(TH=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=Pu(),s3.exports=function(r){e(i,r);function i(a,o){if(i.__super__.constructor.call(this,a),o==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.text=this.stringify.cdata(o)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).cdata(this)},i}(n)}).call(JTe)),s3.exports}var o3={exports:{}},eDe=o3.exports,DH;function ZR(){return DH||(DH=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=Pu(),o3.exports=function(r){e(i,r);function i(a,o){if(i.__super__.constructor.call(this,a),o==null)throw new Error("Missing comment text. "+this.debugInfo());this.text=this.stringify.comment(o)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).comment(this)},i}(n)}).call(eDe)),o3.exports}var u3={exports:{}},tDe=u3.exports,AH;function JR(){return AH||(AH=1,(function(){var n,e,t=function(i,a){for(var o in a)r.call(a,o)&&(i[o]=a[o]);function s(){this.constructor=i}return s.prototype=a.prototype,i.prototype=new s,i.__super__=a.prototype,i},r={}.hasOwnProperty;e=hy().isObject,n=Pu(),u3.exports=function(i){t(a,i);function a(o,s,u,l){var h;a.__super__.constructor.call(this,o),e(s)&&(h=s,s=h.version,u=h.encoding,l=h.standalone),s||(s="1.0"),this.version=this.stringify.xmlVersion(s),u!=null&&(this.encoding=this.stringify.xmlEncoding(u)),l!=null&&(this.standalone=this.stringify.xmlStandalone(l))}return a.prototype.toString=function(o){return this.options.writer.set(o).declaration(this)},a}(n)}).call(tDe)),u3.exports}var l3={exports:{}},c3={exports:{}},nDe=c3.exports,kH;function eI(){return kH||(kH=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=Pu(),c3.exports=function(r){e(i,r);function i(a,o,s,u,l,h){if(i.__super__.constructor.call(this,a),o==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(s==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(o));if(!u)throw new Error("Missing DTD attribute type. "+this.debugInfo(o));if(!l)throw new Error("Missing DTD attribute default. "+this.debugInfo(o));if(l.indexOf("#")!==0&&(l="#"+l),!l.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(o));if(h&&!l.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(o));this.elementName=this.stringify.eleName(o),this.attributeName=this.stringify.attName(s),this.attributeType=this.stringify.dtdAttType(u),this.defaultValue=this.stringify.dtdAttDefault(h),this.defaultValueType=l}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdAttList(this)},i}(n)}).call(nDe)),c3.exports}var h3={exports:{}},rDe=h3.exports,NH;function tI(){return NH||(NH=1,(function(){var n,e,t=function(i,a){for(var o in a)r.call(a,o)&&(i[o]=a[o]);function s(){this.constructor=i}return s.prototype=a.prototype,i.prototype=new s,i.__super__=a.prototype,i},r={}.hasOwnProperty;e=hy().isObject,n=Pu(),h3.exports=function(i){t(a,i);function a(o,s,u,l){if(a.__super__.constructor.call(this,o),u==null)throw new Error("Missing DTD entity name. "+this.debugInfo(u));if(l==null)throw new Error("Missing DTD entity value. "+this.debugInfo(u));if(this.pe=!!s,this.name=this.stringify.eleName(u),!e(l))this.value=this.stringify.dtdEntityValue(l);else{if(!l.pubID&&!l.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(u));if(l.pubID&&!l.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(u));if(l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID)),l.nData!=null&&(this.nData=this.stringify.dtdNData(l.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(u))}}return a.prototype.toString=function(o){return this.options.writer.set(o).dtdEntity(this)},a}(n)}).call(rDe)),h3.exports}var f3={exports:{}},iDe=f3.exports,OH;function nI(){return OH||(OH=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=Pu(),f3.exports=function(r){e(i,r);function i(a,o,s){if(i.__super__.constructor.call(this,a),o==null)throw new Error("Missing DTD element name. "+this.debugInfo());s||(s="(#PCDATA)"),Array.isArray(s)&&(s="("+s.join(",")+")"),this.name=this.stringify.eleName(o),this.value=this.stringify.dtdElementValue(s)}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdElement(this)},i}(n)}).call(iDe)),f3.exports}var d3={exports:{}},aDe=d3.exports,RH;function rI(){return RH||(RH=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=Pu(),d3.exports=function(r){e(i,r);function i(a,o,s){if(i.__super__.constructor.call(this,a),o==null)throw new Error("Missing DTD notation name. "+this.debugInfo(o));if(!s.pubID&&!s.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(o));this.name=this.stringify.eleName(o),s.pubID!=null&&(this.pubID=this.stringify.dtdPubID(s.pubID)),s.sysID!=null&&(this.sysID=this.stringify.dtdSysID(s.sysID))}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdNotation(this)},i}(n)}).call(aDe)),d3.exports}var sDe=l3.exports,IH;function iI(){return IH||(IH=1,(function(){var n,e,t,r,i,a,o=function(u,l){for(var h in l)s.call(l,h)&&(u[h]=l[h]);function c(){this.constructor=u}return c.prototype=l.prototype,u.prototype=new c,u.__super__=l.prototype,u},s={}.hasOwnProperty;a=hy().isObject,i=Pu(),n=eI(),t=tI(),e=nI(),r=rI(),l3.exports=function(u){o(l,u);function l(h,c,f){var d,p;l.__super__.constructor.call(this,h),this.name="!DOCTYPE",this.documentObject=h,a(c)&&(d=c,c=d.pubID,f=d.sysID),f==null&&(p=[c,f],f=p[0],c=p[1]),c!=null&&(this.pubID=this.stringify.dtdPubID(c)),f!=null&&(this.sysID=this.stringify.dtdSysID(f))}return l.prototype.element=function(h,c){var f;return f=new e(this,h,c),this.children.push(f),this},l.prototype.attList=function(h,c,f,d,p){var m;return m=new n(this,h,c,f,d,p),this.children.push(m),this},l.prototype.entity=function(h,c){var f;return f=new t(this,!1,h,c),this.children.push(f),this},l.prototype.pEntity=function(h,c){var f;return f=new t(this,!0,h,c),this.children.push(f),this},l.prototype.notation=function(h,c){var f;return f=new r(this,h,c),this.children.push(f),this},l.prototype.toString=function(h){return this.options.writer.set(h).docType(this)},l.prototype.ele=function(h,c){return this.element(h,c)},l.prototype.att=function(h,c,f,d,p){return this.attList(h,c,f,d,p)},l.prototype.ent=function(h,c){return this.entity(h,c)},l.prototype.pent=function(h,c){return this.pEntity(h,c)},l.prototype.not=function(h,c){return this.notation(h,c)},l.prototype.up=function(){return this.root()||this.documentObject},l}(i)}).call(sDe)),l3.exports}var p3={exports:{}},oDe=p3.exports,FH;function aI(){return FH||(FH=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=Pu(),p3.exports=function(r){e(i,r);function i(a,o){if(i.__super__.constructor.call(this,a),o==null)throw new Error("Missing raw text. "+this.debugInfo());this.value=this.stringify.raw(o)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).raw(this)},i}(n)}).call(oDe)),p3.exports}var g3={exports:{}},uDe=g3.exports,PH;function sI(){return PH||(PH=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=Pu(),g3.exports=function(r){e(i,r);function i(a,o){if(i.__super__.constructor.call(this,a),o==null)throw new Error("Missing element text. "+this.debugInfo());this.value=this.stringify.eleText(o)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).text(this)},i}(n)}).call(uDe)),g3.exports}var m3={exports:{}},lDe=m3.exports,LH;function oI(){return LH||(LH=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=Pu(),m3.exports=function(r){e(i,r);function i(a,o,s){if(i.__super__.constructor.call(this,a),o==null)throw new Error("Missing instruction target. "+this.debugInfo());this.target=this.stringify.insTarget(o),s&&(this.value=this.stringify.insValue(s))}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).processingInstruction(this)},i}(n)}).call(lDe)),m3.exports}var y3={exports:{}},cDe=y3.exports,MH;function s7(){return MH||(MH=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=Pu(),y3.exports=function(r){e(i,r);function i(a){i.__super__.constructor.call(this,a),this.isDummy=!0}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return""},i}(n)}).call(cDe)),y3.exports}var hDe=r3.exports,UH;function Pu(){return UH||(UH=1,(function(){var n,e,t,r,i,a,o,s,u,l,h,c,f,d,p={}.hasOwnProperty;d=hy(),f=d.isObject,c=d.isFunction,h=d.isEmpty,l=d.getValue,a=null,n=null,e=null,t=null,r=null,s=null,u=null,o=null,i=null,r3.exports=function(){function m(g){this.parent=g,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],a||(a=YR(),n=QR(),e=ZR(),t=JR(),r=iI(),s=aI(),u=sI(),o=oI(),i=s7())}return m.prototype.element=function(g,y,v){var b,w,x,S,E,A,k,T,O,F,I;if(A=null,y===null&&v==null&&(O=[{},null],y=O[0],v=O[1]),y==null&&(y={}),y=l(y),f(y)||(F=[y,v],v=F[0],y=F[1]),g!=null&&(g=l(g)),Array.isArray(g))for(x=0,k=g.length;x<k;x++)w=g[x],A=this.element(w);else if(c(g))A=this.element(g.apply());else if(f(g)){for(E in g)if(p.call(g,E))if(I=g[E],c(I)&&(I=I.apply()),f(I)&&h(I)&&(I=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&E.indexOf(this.stringify.convertAttKey)===0)A=this.attribute(E.substr(this.stringify.convertAttKey.length),I);else if(!this.options.separateArrayItems&&Array.isArray(I))for(S=0,T=I.length;S<T;S++)w=I[S],b={},b[E]=w,A=this.element(b);else f(I)?(A=this.element(E),A.element(I)):A=this.element(E,I)}else this.options.skipNullNodes&&v===null?A=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&g.indexOf(this.stringify.convertTextKey)===0?A=this.text(v):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&g.indexOf(this.stringify.convertCDataKey)===0?A=this.cdata(v):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&g.indexOf(this.stringify.convertCommentKey)===0?A=this.comment(v):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&g.indexOf(this.stringify.convertRawKey)===0?A=this.raw(v):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&g.indexOf(this.stringify.convertPIKey)===0?A=this.instruction(g.substr(this.stringify.convertPIKey.length),v):A=this.node(g,y,v);if(A==null)throw new Error("Could not create any elements with: "+g+". "+this.debugInfo());return A},m.prototype.insertBefore=function(g,y,v){var b,w,x;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return w=this.parent.children.indexOf(this),x=this.parent.children.splice(w),b=this.parent.element(g,y,v),Array.prototype.push.apply(this.parent.children,x),b},m.prototype.insertAfter=function(g,y,v){var b,w,x;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return w=this.parent.children.indexOf(this),x=this.parent.children.splice(w+1),b=this.parent.element(g,y,v),Array.prototype.push.apply(this.parent.children,x),b},m.prototype.remove=function(){var g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return g=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[g,g-g+1].concat([])),this.parent},m.prototype.node=function(g,y,v){var b,w;return g!=null&&(g=l(g)),y||(y={}),y=l(y),f(y)||(w=[y,v],v=w[0],y=w[1]),b=new a(this,g,y),v!=null&&b.text(v),this.children.push(b),b},m.prototype.text=function(g){var y;return y=new u(this,g),this.children.push(y),this},m.prototype.cdata=function(g){var y;return y=new n(this,g),this.children.push(y),this},m.prototype.comment=function(g){var y;return y=new e(this,g),this.children.push(y),this},m.prototype.commentBefore=function(g){var y,v;return y=this.parent.children.indexOf(this),v=this.parent.children.splice(y),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,v),this},m.prototype.commentAfter=function(g){var y,v;return y=this.parent.children.indexOf(this),v=this.parent.children.splice(y+1),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,v),this},m.prototype.raw=function(g){var y;return y=new s(this,g),this.children.push(y),this},m.prototype.dummy=function(){var g;return g=new i(this),this.children.push(g),g},m.prototype.instruction=function(g,y){var v,b,w,x,S;if(g!=null&&(g=l(g)),y!=null&&(y=l(y)),Array.isArray(g))for(x=0,S=g.length;x<S;x++)v=g[x],this.instruction(v);else if(f(g))for(v in g)p.call(g,v)&&(b=g[v],this.instruction(v,b));else c(y)&&(y=y.apply()),w=new o(this,g,y),this.children.push(w);return this},m.prototype.instructionBefore=function(g,y){var v,b;return v=this.parent.children.indexOf(this),b=this.parent.children.splice(v),this.parent.instruction(g,y),Array.prototype.push.apply(this.parent.children,b),this},m.prototype.instructionAfter=function(g,y){var v,b;return v=this.parent.children.indexOf(this),b=this.parent.children.splice(v+1),this.parent.instruction(g,y),Array.prototype.push.apply(this.parent.children,b),this},m.prototype.declaration=function(g,y,v){var b,w;return b=this.document(),w=new t(b,g,y,v),b.children[0]instanceof t?b.children[0]=w:b.children.unshift(w),b.root()||b},m.prototype.doctype=function(g,y){var v,b,w,x,S,E,A,k,T,O;for(b=this.document(),w=new r(b,g,y),T=b.children,x=S=0,A=T.length;S<A;x=++S)if(v=T[x],v instanceof r)return b.children[x]=w,w;for(O=b.children,x=E=0,k=O.length;E<k;x=++E)if(v=O[x],v.isRoot)return b.children.splice(x,0,w),w;return b.children.push(w),w},m.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},m.prototype.root=function(){var g;for(g=this;g;){if(g.isDocument)return g.rootObject;if(g.isRoot)return g;g=g.parent}},m.prototype.document=function(){var g;for(g=this;g;){if(g.isDocument)return g;g=g.parent}},m.prototype.end=function(g){return this.document().end(g)},m.prototype.prev=function(){var g;for(g=this.parent.children.indexOf(this);g>0&&this.parent.children[g-1].isDummy;)g=g-1;if(g<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[g-1]},m.prototype.next=function(){var g;for(g=this.parent.children.indexOf(this);g<this.parent.children.length-1&&this.parent.children[g+1].isDummy;)g=g+1;if(g===-1||g===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[g+1]},m.prototype.importDocument=function(g){var y;return y=g.root().clone(),y.parent=this,y.isRoot=!1,this.children.push(y),this},m.prototype.debugInfo=function(g){var y,v;return g=g||this.name,g==null&&!((y=this.parent)!=null&&y.name)?"":g==null?"parent: <"+this.parent.name+">":(v=this.parent)!=null&&v.name?"node: <"+g+">, parent: <"+this.parent.name+">":"node: <"+g+">"},m.prototype.ele=function(g,y,v){return this.element(g,y,v)},m.prototype.nod=function(g,y,v){return this.node(g,y,v)},m.prototype.txt=function(g){return this.text(g)},m.prototype.dat=function(g){return this.cdata(g)},m.prototype.com=function(g){return this.comment(g)},m.prototype.ins=function(g,y){return this.instruction(g,y)},m.prototype.doc=function(){return this.document()},m.prototype.dec=function(g,y,v){return this.declaration(g,y,v)},m.prototype.dtd=function(g,y){return this.doctype(g,y)},m.prototype.e=function(g,y,v){return this.element(g,y,v)},m.prototype.n=function(g,y,v){return this.node(g,y,v)},m.prototype.t=function(g){return this.text(g)},m.prototype.d=function(g){return this.cdata(g)},m.prototype.c=function(g){return this.comment(g)},m.prototype.r=function(g){return this.raw(g)},m.prototype.i=function(g,y){return this.instruction(g,y)},m.prototype.u=function(){return this.up()},m.prototype.importXMLBuilder=function(g){return this.importDocument(g)},m}()}).call(hDe)),r3.exports}var v3={exports:{}},fDe=v3.exports,BH;function gre(){return BH||(BH=1,(function(){var n=function(t,r){return function(){return t.apply(r,arguments)}},e={}.hasOwnProperty;v3.exports=function(){function t(r){this.assertLegalChar=n(this.assertLegalChar,this);var i,a,o;r||(r={}),this.noDoubleEncoding=r.noDoubleEncoding,a=r.stringify||{};for(i in a)e.call(a,i)&&(o=a[i],this[i]=o)}return t.prototype.eleName=function(r){return r=""+r||"",this.assertLegalChar(r)},t.prototype.eleText=function(r){return r=""+r||"",this.assertLegalChar(this.elEscape(r))},t.prototype.cdata=function(r){return r=""+r||"",r=r.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(r)},t.prototype.comment=function(r){if(r=""+r||"",r.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+r);return this.assertLegalChar(r)},t.prototype.raw=function(r){return""+r||""},t.prototype.attName=function(r){return r=""+r||""},t.prototype.attValue=function(r){return r=""+r||"",this.attEscape(r)},t.prototype.insTarget=function(r){return""+r||""},t.prototype.insValue=function(r){if(r=""+r||"",r.match(/\?>/))throw new Error("Invalid processing instruction value: "+r);return r},t.prototype.xmlVersion=function(r){if(r=""+r||"",!r.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+r);return r},t.prototype.xmlEncoding=function(r){if(r=""+r||"",!r.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+r);return r},t.prototype.xmlStandalone=function(r){return r?"yes":"no"},t.prototype.dtdPubID=function(r){return""+r||""},t.prototype.dtdSysID=function(r){return""+r||""},t.prototype.dtdElementValue=function(r){return""+r||""},t.prototype.dtdAttType=function(r){return""+r||""},t.prototype.dtdAttDefault=function(r){return r!=null?""+r||"":r},t.prototype.dtdEntityValue=function(r){return""+r||""},t.prototype.dtdNData=function(r){return""+r||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(r){var i;if(i=r.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),i)throw new Error("Invalid character in string: "+r+" at index "+i.index);return r},t.prototype.elEscape=function(r){var i;return i=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(i,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(r){var i;return i=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(i,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t}()}).call(fDe)),v3.exports}var b3={exports:{}},w3={exports:{}},dDe=w3.exports,zH;function mre(){return zH||(zH=1,(function(){var n={}.hasOwnProperty;w3.exports=function(){function e(t){var r,i,a,o,s,u,l,h,c;t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=(i=t.allowEmpty)!=null?i:!1,this.pretty?(this.indent=(a=t.indent)!=null?a:"  ",this.newline=(o=t.newline)!=null?o:`
`,this.offset=(s=t.offset)!=null?s:0,this.dontprettytextnodes=(u=t.dontprettytextnodes)!=null?u:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=(l=t.spacebeforeslash)!=null?l:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,h=t.writer||{};for(r in h)n.call(h,r)&&(c=h[r],this[r]=c)}return e.prototype.set=function(t){var r,i,a;t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:`
`,this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,i=t.writer||{};for(r in i)n.call(i,r)&&(a=i[r],this[r]=a);return this},e.prototype.space=function(t){var r;return this.pretty?(r=(t||0)+this.offset+1,r>0?new Array(r).join(this.indent):""):""},e}()}).call(dDe)),w3.exports}var pDe=b3.exports,WH;function o7(){return WH||(WH=1,(function(){var n,e,t,r,i,a,o,s,u,l,h,c,f,d,p=function(g,y){for(var v in y)m.call(y,v)&&(g[v]=y[v]);function b(){this.constructor=g}return b.prototype=y.prototype,g.prototype=new b,g.__super__=y.prototype,g},m={}.hasOwnProperty;o=JR(),s=iI(),n=QR(),e=ZR(),l=YR(),c=aI(),f=sI(),h=oI(),u=s7(),t=eI(),r=nI(),i=tI(),a=rI(),d=mre(),b3.exports=function(g){p(y,g);function y(v){y.__super__.constructor.call(this,v)}return y.prototype.document=function(v){var b,w,x,S,E;for(this.textispresent=!1,S="",E=v.children,w=0,x=E.length;w<x;w++)b=E[w],!(b instanceof u)&&(S+=(function(){switch(!1){case!(b instanceof o):return this.declaration(b);case!(b instanceof s):return this.docType(b);case!(b instanceof e):return this.comment(b);case!(b instanceof h):return this.processingInstruction(b);default:return this.element(b,0)}}).call(this));return this.pretty&&S.slice(-this.newline.length)===this.newline&&(S=S.slice(0,-this.newline.length)),S},y.prototype.attribute=function(v){return" "+v.name+'="'+v.value+'"'},y.prototype.cdata=function(v,b){return this.space(b)+"<![CDATA["+v.text+"]]>"+this.newline},y.prototype.comment=function(v,b){return this.space(b)+"<!-- "+v.text+" -->"+this.newline},y.prototype.declaration=function(v,b){var w;return w=this.space(b),w+='<?xml version="'+v.version+'"',v.encoding!=null&&(w+=' encoding="'+v.encoding+'"'),v.standalone!=null&&(w+=' standalone="'+v.standalone+'"'),w+=this.spacebeforeslash+"?>",w+=this.newline,w},y.prototype.docType=function(v,b){var w,x,S,E,A;if(b||(b=0),E=this.space(b),E+="<!DOCTYPE "+v.root().name,v.pubID&&v.sysID?E+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(E+=' SYSTEM "'+v.sysID+'"'),v.children.length>0){for(E+=" [",E+=this.newline,A=v.children,x=0,S=A.length;x<S;x++)w=A[x],E+=(function(){switch(!1){case!(w instanceof t):return this.dtdAttList(w,b+1);case!(w instanceof r):return this.dtdElement(w,b+1);case!(w instanceof i):return this.dtdEntity(w,b+1);case!(w instanceof a):return this.dtdNotation(w,b+1);case!(w instanceof n):return this.cdata(w,b+1);case!(w instanceof e):return this.comment(w,b+1);case!(w instanceof h):return this.processingInstruction(w,b+1);default:throw new Error("Unknown DTD node type: "+w.constructor.name)}}).call(this);E+="]"}return E+=this.spacebeforeslash+">",E+=this.newline,E},y.prototype.element=function(v,b){var w,x,S,E,A,k,T,O,F,I,R,U,B;b||(b=0),B=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),U=this.space(b),O="",O+=U+"<"+v.name,F=v.attributes;for(T in F)m.call(F,T)&&(w=F[T],O+=this.attribute(w));if(v.children.length===0||v.children.every(function(W){return W.value===""}))this.allowEmpty?O+="></"+v.name+">"+this.newline:O+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&v.children.length===1&&v.children[0].value!=null)O+=">",O+=v.children[0].value,O+="</"+v.name+">"+this.newline;else{if(this.dontprettytextnodes){for(I=v.children,S=0,A=I.length;S<A;S++)if(x=I[S],x.value!=null){this.textispresent++,B=!0;break}}for(this.textispresent&&(this.newline="",this.pretty=!1,U=this.space(b)),O+=">"+this.newline,R=v.children,E=0,k=R.length;E<k;E++)x=R[E],O+=(function(){switch(!1){case!(x instanceof n):return this.cdata(x,b+1);case!(x instanceof e):return this.comment(x,b+1);case!(x instanceof l):return this.element(x,b+1);case!(x instanceof c):return this.raw(x,b+1);case!(x instanceof f):return this.text(x,b+1);case!(x instanceof h):return this.processingInstruction(x,b+1);case!(x instanceof u):return"";default:throw new Error("Unknown XML node type: "+x.constructor.name)}}).call(this);B&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),O+=U+"</"+v.name+">"+this.newline}return O},y.prototype.processingInstruction=function(v,b){var w;return w=this.space(b)+"<?"+v.target,v.value&&(w+=" "+v.value),w+=this.spacebeforeslash+"?>"+this.newline,w},y.prototype.raw=function(v,b){return this.space(b)+v.value+this.newline},y.prototype.text=function(v,b){return this.space(b)+v.value+this.newline},y.prototype.dtdAttList=function(v,b){var w;return w=this.space(b)+"<!ATTLIST "+v.elementName+" "+v.attributeName+" "+v.attributeType,v.defaultValueType!=="#DEFAULT"&&(w+=" "+v.defaultValueType),v.defaultValue&&(w+=' "'+v.defaultValue+'"'),w+=this.spacebeforeslash+">"+this.newline,w},y.prototype.dtdElement=function(v,b){return this.space(b)+"<!ELEMENT "+v.name+" "+v.value+this.spacebeforeslash+">"+this.newline},y.prototype.dtdEntity=function(v,b){var w;return w=this.space(b)+"<!ENTITY",v.pe&&(w+=" %"),w+=" "+v.name,v.value?w+=' "'+v.value+'"':(v.pubID&&v.sysID?w+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(w+=' SYSTEM "'+v.sysID+'"'),v.nData&&(w+=" NDATA "+v.nData)),w+=this.spacebeforeslash+">"+this.newline,w},y.prototype.dtdNotation=function(v,b){var w;return w=this.space(b)+"<!NOTATION "+v.name,v.pubID&&v.sysID?w+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.pubID?w+=' PUBLIC "'+v.pubID+'"':v.sysID&&(w+=' SYSTEM "'+v.sysID+'"'),w+=this.spacebeforeslash+">"+this.newline,w},y.prototype.openNode=function(v,b){var w,x,S,E;if(b||(b=0),v instanceof l){S=this.space(b)+"<"+v.name,E=v.attributes;for(x in E)m.call(E,x)&&(w=E[x],S+=this.attribute(w));return S+=(v.children?">":"/>")+this.newline,S}else return S=this.space(b)+"<!DOCTYPE "+v.rootNodeName,v.pubID&&v.sysID?S+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(S+=' SYSTEM "'+v.sysID+'"'),S+=(v.children?" [":">")+this.newline,S},y.prototype.closeNode=function(v,b){switch(b||(b=0),!1){case!(v instanceof l):return this.space(b)+"</"+v.name+">"+this.newline;case!(v instanceof s):return this.space(b)+"]>"+this.newline}},y}(d)}).call(pDe)),b3.exports}var gDe=n3.exports,jH;function mDe(){return jH||(jH=1,(function(){var n,e,t,r,i=function(o,s){for(var u in s)a.call(s,u)&&(o[u]=s[u]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},a={}.hasOwnProperty;r=hy().isPlainObject,n=Pu(),t=gre(),e=o7(),n3.exports=function(o){i(s,o);function s(u){s.__super__.constructor.call(this,null),this.name="?xml",u||(u={}),u.writer||(u.writer=new e),this.options=u,this.stringify=new t(u),this.isDocument=!0}return s.prototype.end=function(u){var l;return u?r(u)&&(l=u,u=this.options.writer.set(l)):u=this.options.writer,u.document(this)},s.prototype.toString=function(u){return this.options.writer.set(u).document(this)},s}(n)}).call(gDe)),n3.exports}var x3={exports:{}},yDe=x3.exports,$H;function vDe(){return $H||($H=1,(function(){var n,e,t,r,i,a,o,s,u,l,h,c,f,d,p,m,g,y,v,b,w={}.hasOwnProperty;b=hy(),y=b.isObject,g=b.isFunction,v=b.isPlainObject,m=b.getValue,l=YR(),e=QR(),t=ZR(),c=aI(),p=sI(),h=oI(),s=JR(),u=iI(),r=eI(),a=tI(),i=nI(),o=rI(),n=pre(),d=gre(),f=o7(),x3.exports=function(){function x(S,E,A){var k;this.name="?xml",S||(S={}),S.writer?v(S.writer)&&(k=S.writer,S.writer=new f(k)):S.writer=new f(S),this.options=S,this.writer=S.writer,this.stringify=new d(S),this.onDataCallback=E||function(){},this.onEndCallback=A||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return x.prototype.node=function(S,E,A){var k,T;if(S==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(S));return this.openCurrent(),S=m(S),E===null&&A==null&&(k=[{},null],E=k[0],A=k[1]),E==null&&(E={}),E=m(E),y(E)||(T=[E,A],A=T[0],E=T[1]),this.currentNode=new l(this,S,E),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,A!=null&&this.text(A),this},x.prototype.element=function(S,E,A){return this.currentNode&&this.currentNode instanceof u?this.dtdElement.apply(this,arguments):this.node(S,E,A)},x.prototype.attribute=function(S,E){var A,k;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(S));if(S!=null&&(S=m(S)),y(S))for(A in S)w.call(S,A)&&(k=S[A],this.attribute(A,k));else g(E)&&(E=E.apply()),(!this.options.skipNullAttributes||E!=null)&&(this.currentNode.attributes[S]=new n(this,S,E));return this},x.prototype.text=function(S){var E;return this.openCurrent(),E=new p(this,S),this.onData(this.writer.text(E,this.currentLevel+1),this.currentLevel+1),this},x.prototype.cdata=function(S){var E;return this.openCurrent(),E=new e(this,S),this.onData(this.writer.cdata(E,this.currentLevel+1),this.currentLevel+1),this},x.prototype.comment=function(S){var E;return this.openCurrent(),E=new t(this,S),this.onData(this.writer.comment(E,this.currentLevel+1),this.currentLevel+1),this},x.prototype.raw=function(S){var E;return this.openCurrent(),E=new c(this,S),this.onData(this.writer.raw(E,this.currentLevel+1),this.currentLevel+1),this},x.prototype.instruction=function(S,E){var A,k,T,O,F;if(this.openCurrent(),S!=null&&(S=m(S)),E!=null&&(E=m(E)),Array.isArray(S))for(A=0,O=S.length;A<O;A++)k=S[A],this.instruction(k);else if(y(S))for(k in S)w.call(S,k)&&(T=S[k],this.instruction(k,T));else g(E)&&(E=E.apply()),F=new h(this,S,E),this.onData(this.writer.processingInstruction(F,this.currentLevel+1),this.currentLevel+1);return this},x.prototype.declaration=function(S,E,A){var k;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return k=new s(this,S,E,A),this.onData(this.writer.declaration(k,this.currentLevel+1),this.currentLevel+1),this},x.prototype.doctype=function(S,E,A){if(this.openCurrent(),S==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new u(this,E,A),this.currentNode.rootNodeName=S,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},x.prototype.dtdElement=function(S,E){var A;return this.openCurrent(),A=new i(this,S,E),this.onData(this.writer.dtdElement(A,this.currentLevel+1),this.currentLevel+1),this},x.prototype.attList=function(S,E,A,k,T){var O;return this.openCurrent(),O=new r(this,S,E,A,k,T),this.onData(this.writer.dtdAttList(O,this.currentLevel+1),this.currentLevel+1),this},x.prototype.entity=function(S,E){var A;return this.openCurrent(),A=new a(this,!1,S,E),this.onData(this.writer.dtdEntity(A,this.currentLevel+1),this.currentLevel+1),this},x.prototype.pEntity=function(S,E){var A;return this.openCurrent(),A=new a(this,!0,S,E),this.onData(this.writer.dtdEntity(A,this.currentLevel+1),this.currentLevel+1),this},x.prototype.notation=function(S,E){var A;return this.openCurrent(),A=new o(this,S,E),this.onData(this.writer.dtdNotation(A,this.currentLevel+1),this.currentLevel+1),this},x.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},x.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},x.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},x.prototype.openNode=function(S){if(!S.isOpen)return!this.root&&this.currentLevel===0&&S instanceof l&&(this.root=S),this.onData(this.writer.openNode(S,this.currentLevel),this.currentLevel),S.isOpen=!0},x.prototype.closeNode=function(S){if(!S.isClosed)return this.onData(this.writer.closeNode(S,this.currentLevel),this.currentLevel),S.isClosed=!0},x.prototype.onData=function(S,E){return this.documentStarted=!0,this.onDataCallback(S,E+1)},x.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},x.prototype.debugInfo=function(S){return S==null?"":"node: <"+S+">"},x.prototype.ele=function(){return this.element.apply(this,arguments)},x.prototype.nod=function(S,E,A){return this.node(S,E,A)},x.prototype.txt=function(S){return this.text(S)},x.prototype.dat=function(S){return this.cdata(S)},x.prototype.com=function(S){return this.comment(S)},x.prototype.ins=function(S,E){return this.instruction(S,E)},x.prototype.dec=function(S,E,A){return this.declaration(S,E,A)},x.prototype.dtd=function(S,E,A){return this.doctype(S,E,A)},x.prototype.e=function(S,E,A){return this.element(S,E,A)},x.prototype.n=function(S,E,A){return this.node(S,E,A)},x.prototype.t=function(S){return this.text(S)},x.prototype.d=function(S){return this.cdata(S)},x.prototype.c=function(S){return this.comment(S)},x.prototype.r=function(S){return this.raw(S)},x.prototype.i=function(S,E){return this.instruction(S,E)},x.prototype.att=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},x.prototype.a=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},x.prototype.ent=function(S,E){return this.entity(S,E)},x.prototype.pent=function(S,E){return this.pEntity(S,E)},x.prototype.not=function(S,E){return this.notation(S,E)},x}()}).call(yDe)),x3.exports}var _3={exports:{}},bDe=_3.exports,qH;function wDe(){return qH||(qH=1,(function(){var n,e,t,r,i,a,o,s,u,l,h,c,f,d,p=function(g,y){for(var v in y)m.call(y,v)&&(g[v]=y[v]);function b(){this.constructor=g}return b.prototype=y.prototype,g.prototype=new b,g.__super__=y.prototype,g},m={}.hasOwnProperty;o=JR(),s=iI(),n=QR(),e=ZR(),l=YR(),c=aI(),f=sI(),h=oI(),u=s7(),t=eI(),r=nI(),i=tI(),a=rI(),d=mre(),_3.exports=function(g){p(y,g);function y(v,b){y.__super__.constructor.call(this,b),this.stream=v}return y.prototype.document=function(v){var b,w,x,S,E,A,k,T;for(A=v.children,w=0,S=A.length;w<S;w++)b=A[w],b.isLastRootNode=!1;for(v.children[v.children.length-1].isLastRootNode=!0,k=v.children,T=[],x=0,E=k.length;x<E;x++)if(b=k[x],!(b instanceof u))switch(!1){case!(b instanceof o):T.push(this.declaration(b));break;case!(b instanceof s):T.push(this.docType(b));break;case!(b instanceof e):T.push(this.comment(b));break;case!(b instanceof h):T.push(this.processingInstruction(b));break;default:T.push(this.element(b))}return T},y.prototype.attribute=function(v){return this.stream.write(" "+v.name+'="'+v.value+'"')},y.prototype.cdata=function(v,b){return this.stream.write(this.space(b)+"<![CDATA["+v.text+"]]>"+this.endline(v))},y.prototype.comment=function(v,b){return this.stream.write(this.space(b)+"<!-- "+v.text+" -->"+this.endline(v))},y.prototype.declaration=function(v,b){return this.stream.write(this.space(b)),this.stream.write('<?xml version="'+v.version+'"'),v.encoding!=null&&this.stream.write(' encoding="'+v.encoding+'"'),v.standalone!=null&&this.stream.write(' standalone="'+v.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(v))},y.prototype.docType=function(v,b){var w,x,S,E;if(b||(b=0),this.stream.write(this.space(b)),this.stream.write("<!DOCTYPE "+v.root().name),v.pubID&&v.sysID?this.stream.write(' PUBLIC "'+v.pubID+'" "'+v.sysID+'"'):v.sysID&&this.stream.write(' SYSTEM "'+v.sysID+'"'),v.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(v)),E=v.children,x=0,S=E.length;x<S;x++)switch(w=E[x],!1){case!(w instanceof t):this.dtdAttList(w,b+1);break;case!(w instanceof r):this.dtdElement(w,b+1);break;case!(w instanceof i):this.dtdEntity(w,b+1);break;case!(w instanceof a):this.dtdNotation(w,b+1);break;case!(w instanceof n):this.cdata(w,b+1);break;case!(w instanceof e):this.comment(w,b+1);break;case!(w instanceof h):this.processingInstruction(w,b+1);break;default:throw new Error("Unknown DTD node type: "+w.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(v))},y.prototype.element=function(v,b){var w,x,S,E,A,k,T,O;b||(b=0),O=this.space(b),this.stream.write(O+"<"+v.name),k=v.attributes;for(A in k)m.call(k,A)&&(w=k[A],this.attribute(w));if(v.children.length===0||v.children.every(function(F){return F.value===""}))this.allowEmpty?this.stream.write("></"+v.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&v.children.length===1&&v.children[0].value!=null)this.stream.write(">"),this.stream.write(v.children[0].value),this.stream.write("</"+v.name+">");else{for(this.stream.write(">"+this.newline),T=v.children,S=0,E=T.length;S<E;S++)switch(x=T[S],!1){case!(x instanceof n):this.cdata(x,b+1);break;case!(x instanceof e):this.comment(x,b+1);break;case!(x instanceof l):this.element(x,b+1);break;case!(x instanceof c):this.raw(x,b+1);break;case!(x instanceof f):this.text(x,b+1);break;case!(x instanceof h):this.processingInstruction(x,b+1);break;case!(x instanceof u):break;default:throw new Error("Unknown XML node type: "+x.constructor.name)}this.stream.write(O+"</"+v.name+">")}return this.stream.write(this.endline(v))},y.prototype.processingInstruction=function(v,b){return this.stream.write(this.space(b)+"<?"+v.target),v.value&&this.stream.write(" "+v.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(v))},y.prototype.raw=function(v,b){return this.stream.write(this.space(b)+v.value+this.endline(v))},y.prototype.text=function(v,b){return this.stream.write(this.space(b)+v.value+this.endline(v))},y.prototype.dtdAttList=function(v,b){return this.stream.write(this.space(b)+"<!ATTLIST "+v.elementName+" "+v.attributeName+" "+v.attributeType),v.defaultValueType!=="#DEFAULT"&&this.stream.write(" "+v.defaultValueType),v.defaultValue&&this.stream.write(' "'+v.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(v))},y.prototype.dtdElement=function(v,b){return this.stream.write(this.space(b)+"<!ELEMENT "+v.name+" "+v.value),this.stream.write(this.spacebeforeslash+">"+this.endline(v))},y.prototype.dtdEntity=function(v,b){return this.stream.write(this.space(b)+"<!ENTITY"),v.pe&&this.stream.write(" %"),this.stream.write(" "+v.name),v.value?this.stream.write(' "'+v.value+'"'):(v.pubID&&v.sysID?this.stream.write(' PUBLIC "'+v.pubID+'" "'+v.sysID+'"'):v.sysID&&this.stream.write(' SYSTEM "'+v.sysID+'"'),v.nData&&this.stream.write(" NDATA "+v.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(v))},y.prototype.dtdNotation=function(v,b){return this.stream.write(this.space(b)+"<!NOTATION "+v.name),v.pubID&&v.sysID?this.stream.write(' PUBLIC "'+v.pubID+'" "'+v.sysID+'"'):v.pubID?this.stream.write(' PUBLIC "'+v.pubID+'"'):v.sysID&&this.stream.write(' SYSTEM "'+v.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(v))},y.prototype.endline=function(v){return v.isLastRootNode?"":this.newline},y}(d)}).call(bDe)),_3.exports}var VH;function xDe(){return VH||(VH=1,(function(){var n,e,t,r,i,a,o;o=hy(),i=o.assign,a=o.isFunction,n=mDe(),e=vDe(),r=o7(),t=wDe(),nv.create=function(s,u,l,h){var c,f;if(s==null)throw new Error("Root element needs a name.");return h=i({},u,l,h),c=new n(h),f=c.element(s),h.headless||(c.declaration(h),(h.pubID!=null||h.sysID!=null)&&c.doctype(h)),f},nv.begin=function(s,u,l){var h;return a(s)&&(h=[s,u],u=h[0],l=h[1],s={}),u?new e(s,u,l):new n(s)},nv.stringWriter=function(s){return new r(s)},nv.streamWriter=function(s,u){return new t(s,u)}}).call(nv)),nv}var HH;function _De(){if(HH)return FF;HH=1;var n=ba,e=xDe();FF.writeString=t;function t(i,a){var o=n.invert(a),s={element:l,text:r};function u(f,d){return s[d.type](f,d)}function l(f,d){var p=f.element(h(d.name),d.attributes);d.children.forEach(function(m){u(p,m)})}function h(f){var d=/^\{(.*)\}(.*)$/.exec(f);if(d){var p=o[d[1]];return p+(p===""?"":":")+d[2]}else return f}function c(f){var d=e.create(h(f.name),{version:"1.0",encoding:"UTF-8",standalone:!0});return n.forEach(a,function(p,m){var g="xmlns"+(m===""?"":":"+m);d.attribute(g,p)}),f.children.forEach(function(p){u(d,p)}),d.end()}return c(i)}function r(i,a){i.text(a.value)}return FF}var GH;function u7(){if(GH)return Ig;GH=1;var n=dre();return Ig.Element=n.Element,Ig.element=n.element,Ig.emptyElement=n.emptyElement,Ig.text=n.text,Ig.readString=YTe().readString,Ig.writeString=_De().writeString,Ig}var XH;function SDe(){if(XH)return ok;XH=1;var n=ba,e=cy(),t=u7();ok.read=i,ok.readXmlFromZipFile=a;var r={"http://schemas.openxmlformats.org/wordprocessingml/2006/main":"w","http://schemas.openxmlformats.org/officeDocument/2006/relationships":"r","http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing":"wp","http://schemas.openxmlformats.org/drawingml/2006/main":"a","http://schemas.openxmlformats.org/drawingml/2006/picture":"pic","http://purl.oclc.org/ooxml/wordprocessingml/main":"w","http://purl.oclc.org/ooxml/officeDocument/relationships":"r","http://purl.oclc.org/ooxml/drawingml/wordprocessingDrawing":"wp","http://purl.oclc.org/ooxml/drawingml/main":"a","http://purl.oclc.org/ooxml/drawingml/picture":"pic","http://schemas.openxmlformats.org/package/2006/content-types":"content-types","http://schemas.openxmlformats.org/package/2006/relationships":"relationships","http://schemas.openxmlformats.org/markup-compatibility/2006":"mc","urn:schemas-microsoft-com:vml":"v","urn:schemas-microsoft-com:office:word":"office-word","http://schemas.microsoft.com/office/word/2010/wordml":"wordml"};function i(u){return t.readString(u,r).then(function(l){return s(l)[0]})}function a(u,l){return u.exists(l)?u.read(l,"utf-8").then(o).then(i):e.resolve(null)}function o(u){return u.replace(/^\uFEFF/g,"")}function s(u){return u.type==="element"?u.name==="mc:AlternateContent"?u.first("mc:Fallback").children:(u.children=n.flatten(u.children.map(s,!0)),[u]):[u]}return ok}var ck={},Mc={},hk={},KH;function CDe(){if(KH)return hk;KH=1,Object.defineProperty(hk,"__esModule",{value:!0});var n=[{"Typeface name":"Symbol","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Symbol","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"33","Unicode hex":"21"},{"Typeface name":"Symbol","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"8704","Unicode hex":"2200"},{"Typeface name":"Symbol","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"35","Unicode hex":"23"},{"Typeface name":"Symbol","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"8707","Unicode hex":"2203"},{"Typeface name":"Symbol","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"37","Unicode hex":"25"},{"Typeface name":"Symbol","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"38","Unicode hex":"26"},{"Typeface name":"Symbol","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"8717","Unicode hex":"220D"},{"Typeface name":"Symbol","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"40","Unicode hex":"28"},{"Typeface name":"Symbol","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"41","Unicode hex":"29"},{"Typeface name":"Symbol","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"42","Unicode hex":"2A"},{"Typeface name":"Symbol","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"43","Unicode hex":"2B"},{"Typeface name":"Symbol","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"44","Unicode hex":"2C"},{"Typeface name":"Symbol","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"8722","Unicode hex":"2212"},{"Typeface name":"Symbol","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"46","Unicode hex":"2E"},{"Typeface name":"Symbol","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"47","Unicode hex":"2F"},{"Typeface name":"Symbol","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"48","Unicode hex":"30"},{"Typeface name":"Symbol","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"49","Unicode hex":"31"},{"Typeface name":"Symbol","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"50","Unicode hex":"32"},{"Typeface name":"Symbol","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"51","Unicode hex":"33"},{"Typeface name":"Symbol","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"52","Unicode hex":"34"},{"Typeface name":"Symbol","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"53","Unicode hex":"35"},{"Typeface name":"Symbol","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"54","Unicode hex":"36"},{"Typeface name":"Symbol","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"55","Unicode hex":"37"},{"Typeface name":"Symbol","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"56","Unicode hex":"38"},{"Typeface name":"Symbol","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"57","Unicode hex":"39"},{"Typeface name":"Symbol","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"58","Unicode hex":"3A"},{"Typeface name":"Symbol","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"59","Unicode hex":"3B"},{"Typeface name":"Symbol","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"60","Unicode hex":"3C"},{"Typeface name":"Symbol","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"61","Unicode hex":"3D"},{"Typeface name":"Symbol","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"62","Unicode hex":"3E"},{"Typeface name":"Symbol","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"63","Unicode hex":"3F"},{"Typeface name":"Symbol","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"8773","Unicode hex":"2245"},{"Typeface name":"Symbol","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"913","Unicode hex":"391"},{"Typeface name":"Symbol","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"914","Unicode hex":"392"},{"Typeface name":"Symbol","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"935","Unicode hex":"3A7"},{"Typeface name":"Symbol","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"916","Unicode hex":"394"},{"Typeface name":"Symbol","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"917","Unicode hex":"395"},{"Typeface name":"Symbol","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"934","Unicode hex":"3A6"},{"Typeface name":"Symbol","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"915","Unicode hex":"393"},{"Typeface name":"Symbol","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"919","Unicode hex":"397"},{"Typeface name":"Symbol","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"921","Unicode hex":"399"},{"Typeface name":"Symbol","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"977","Unicode hex":"3D1"},{"Typeface name":"Symbol","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"922","Unicode hex":"39A"},{"Typeface name":"Symbol","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"923","Unicode hex":"39B"},{"Typeface name":"Symbol","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"924","Unicode hex":"39C"},{"Typeface name":"Symbol","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"925","Unicode hex":"39D"},{"Typeface name":"Symbol","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"927","Unicode hex":"39F"},{"Typeface name":"Symbol","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"928","Unicode hex":"3A0"},{"Typeface name":"Symbol","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"920","Unicode hex":"398"},{"Typeface name":"Symbol","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"929","Unicode hex":"3A1"},{"Typeface name":"Symbol","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"931","Unicode hex":"3A3"},{"Typeface name":"Symbol","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"932","Unicode hex":"3A4"},{"Typeface name":"Symbol","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"933","Unicode hex":"3A5"},{"Typeface name":"Symbol","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"962","Unicode hex":"3C2"},{"Typeface name":"Symbol","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"937","Unicode hex":"3A9"},{"Typeface name":"Symbol","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"926","Unicode hex":"39E"},{"Typeface name":"Symbol","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"936","Unicode hex":"3A8"},{"Typeface name":"Symbol","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"918","Unicode hex":"396"},{"Typeface name":"Symbol","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"91","Unicode hex":"5B"},{"Typeface name":"Symbol","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"8756","Unicode hex":"2234"},{"Typeface name":"Symbol","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"93","Unicode hex":"5D"},{"Typeface name":"Symbol","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"8869","Unicode hex":"22A5"},{"Typeface name":"Symbol","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"95","Unicode hex":"5F"},{"Typeface name":"Symbol","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"8254","Unicode hex":"203E"},{"Typeface name":"Symbol","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"945","Unicode hex":"3B1"},{"Typeface name":"Symbol","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"946","Unicode hex":"3B2"},{"Typeface name":"Symbol","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"967","Unicode hex":"3C7"},{"Typeface name":"Symbol","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"948","Unicode hex":"3B4"},{"Typeface name":"Symbol","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"949","Unicode hex":"3B5"},{"Typeface name":"Symbol","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"966","Unicode hex":"3C6"},{"Typeface name":"Symbol","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"947","Unicode hex":"3B3"},{"Typeface name":"Symbol","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"951","Unicode hex":"3B7"},{"Typeface name":"Symbol","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"953","Unicode hex":"3B9"},{"Typeface name":"Symbol","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"981","Unicode hex":"3D5"},{"Typeface name":"Symbol","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"954","Unicode hex":"3BA"},{"Typeface name":"Symbol","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"955","Unicode hex":"3BB"},{"Typeface name":"Symbol","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"956","Unicode hex":"3BC"},{"Typeface name":"Symbol","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"957","Unicode hex":"3BD"},{"Typeface name":"Symbol","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"959","Unicode hex":"3BF"},{"Typeface name":"Symbol","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"960","Unicode hex":"3C0"},{"Typeface name":"Symbol","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"952","Unicode hex":"3B8"},{"Typeface name":"Symbol","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"961","Unicode hex":"3C1"},{"Typeface name":"Symbol","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"963","Unicode hex":"3C3"},{"Typeface name":"Symbol","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"964","Unicode hex":"3C4"},{"Typeface name":"Symbol","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"965","Unicode hex":"3C5"},{"Typeface name":"Symbol","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"982","Unicode hex":"3D6"},{"Typeface name":"Symbol","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"969","Unicode hex":"3C9"},{"Typeface name":"Symbol","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"958","Unicode hex":"3BE"},{"Typeface name":"Symbol","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"968","Unicode hex":"3C8"},{"Typeface name":"Symbol","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"950","Unicode hex":"3B6"},{"Typeface name":"Symbol","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"123","Unicode hex":"7B"},{"Typeface name":"Symbol","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"124","Unicode hex":"7C"},{"Typeface name":"Symbol","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"125","Unicode hex":"7D"},{"Typeface name":"Symbol","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"126","Unicode hex":"7E"},{"Typeface name":"Symbol","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"8364","Unicode hex":"20AC"},{"Typeface name":"Symbol","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"978","Unicode hex":"3D2"},{"Typeface name":"Symbol","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"8242","Unicode hex":"2032"},{"Typeface name":"Symbol","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"8804","Unicode hex":"2264"},{"Typeface name":"Symbol","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"8260","Unicode hex":"2044"},{"Typeface name":"Symbol","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"8734","Unicode hex":"221E"},{"Typeface name":"Symbol","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"402","Unicode hex":"192"},{"Typeface name":"Symbol","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9827","Unicode hex":"2663"},{"Typeface name":"Symbol","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9830","Unicode hex":"2666"},{"Typeface name":"Symbol","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"9829","Unicode hex":"2665"},{"Typeface name":"Symbol","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"9824","Unicode hex":"2660"},{"Typeface name":"Symbol","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"8596","Unicode hex":"2194"},{"Typeface name":"Symbol","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"8592","Unicode hex":"2190"},{"Typeface name":"Symbol","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"8593","Unicode hex":"2191"},{"Typeface name":"Symbol","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"8594","Unicode hex":"2192"},{"Typeface name":"Symbol","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"8595","Unicode hex":"2193"},{"Typeface name":"Symbol","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"176","Unicode hex":"B0"},{"Typeface name":"Symbol","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"177","Unicode hex":"B1"},{"Typeface name":"Symbol","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"8243","Unicode hex":"2033"},{"Typeface name":"Symbol","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"8805","Unicode hex":"2265"},{"Typeface name":"Symbol","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"215","Unicode hex":"D7"},{"Typeface name":"Symbol","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"8733","Unicode hex":"221D"},{"Typeface name":"Symbol","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"8706","Unicode hex":"2202"},{"Typeface name":"Symbol","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Symbol","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"247","Unicode hex":"F7"},{"Typeface name":"Symbol","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"8800","Unicode hex":"2260"},{"Typeface name":"Symbol","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"8801","Unicode hex":"2261"},{"Typeface name":"Symbol","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"8776","Unicode hex":"2248"},{"Typeface name":"Symbol","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"8230","Unicode hex":"2026"},{"Typeface name":"Symbol","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Symbol","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"9135","Unicode hex":"23AF"},{"Typeface name":"Symbol","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"8629","Unicode hex":"21B5"},{"Typeface name":"Symbol","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"8501","Unicode hex":"2135"},{"Typeface name":"Symbol","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"8465","Unicode hex":"2111"},{"Typeface name":"Symbol","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"8476","Unicode hex":"211C"},{"Typeface name":"Symbol","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"8472","Unicode hex":"2118"},{"Typeface name":"Symbol","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"8855","Unicode hex":"2297"},{"Typeface name":"Symbol","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"8853","Unicode hex":"2295"},{"Typeface name":"Symbol","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"8709","Unicode hex":"2205"},{"Typeface name":"Symbol","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"8745","Unicode hex":"2229"},{"Typeface name":"Symbol","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"8746","Unicode hex":"222A"},{"Typeface name":"Symbol","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"8835","Unicode hex":"2283"},{"Typeface name":"Symbol","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"8839","Unicode hex":"2287"},{"Typeface name":"Symbol","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"8836","Unicode hex":"2284"},{"Typeface name":"Symbol","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"8834","Unicode hex":"2282"},{"Typeface name":"Symbol","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"8838","Unicode hex":"2286"},{"Typeface name":"Symbol","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"8712","Unicode hex":"2208"},{"Typeface name":"Symbol","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"8713","Unicode hex":"2209"},{"Typeface name":"Symbol","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"8736","Unicode hex":"2220"},{"Typeface name":"Symbol","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"8711","Unicode hex":"2207"},{"Typeface name":"Symbol","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"8719","Unicode hex":"220F"},{"Typeface name":"Symbol","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8730","Unicode hex":"221A"},{"Typeface name":"Symbol","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Symbol","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"172","Unicode hex":"AC"},{"Typeface name":"Symbol","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"8743","Unicode hex":"2227"},{"Typeface name":"Symbol","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"8744","Unicode hex":"2228"},{"Typeface name":"Symbol","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"8660","Unicode hex":"21D4"},{"Typeface name":"Symbol","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"8656","Unicode hex":"21D0"},{"Typeface name":"Symbol","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"8657","Unicode hex":"21D1"},{"Typeface name":"Symbol","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"8658","Unicode hex":"21D2"},{"Typeface name":"Symbol","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"8659","Unicode hex":"21D3"},{"Typeface name":"Symbol","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Symbol","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"12296","Unicode hex":"3008"},{"Typeface name":"Symbol","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"8721","Unicode hex":"2211"},{"Typeface name":"Symbol","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"9115","Unicode hex":"239B"},{"Typeface name":"Symbol","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"9116","Unicode hex":"239C"},{"Typeface name":"Symbol","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9117","Unicode hex":"239D"},{"Typeface name":"Symbol","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9121","Unicode hex":"23A1"},{"Typeface name":"Symbol","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"9122","Unicode hex":"23A2"},{"Typeface name":"Symbol","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"9123","Unicode hex":"23A3"},{"Typeface name":"Symbol","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"9127","Unicode hex":"23A7"},{"Typeface name":"Symbol","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"9128","Unicode hex":"23A8"},{"Typeface name":"Symbol","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"9129","Unicode hex":"23A9"},{"Typeface name":"Symbol","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"9130","Unicode hex":"23AA"},{"Typeface name":"Symbol","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"63743","Unicode hex":"F8FF"},{"Typeface name":"Symbol","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"12297","Unicode hex":"3009"},{"Typeface name":"Symbol","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8747","Unicode hex":"222B"},{"Typeface name":"Symbol","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"8992","Unicode hex":"2320"},{"Typeface name":"Symbol","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"9134","Unicode hex":"23AE"},{"Typeface name":"Symbol","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"8993","Unicode hex":"2321"},{"Typeface name":"Symbol","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"9118","Unicode hex":"239E"},{"Typeface name":"Symbol","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"9119","Unicode hex":"239F"},{"Typeface name":"Symbol","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"9120","Unicode hex":"23A0"},{"Typeface name":"Symbol","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"9124","Unicode hex":"23A4"},{"Typeface name":"Symbol","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"9125","Unicode hex":"23A5"},{"Typeface name":"Symbol","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"9126","Unicode hex":"23A6"},{"Typeface name":"Symbol","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"9131","Unicode hex":"23AB"},{"Typeface name":"Symbol","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"9132","Unicode hex":"23AC"},{"Typeface name":"Symbol","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"9133","Unicode hex":"23AD"},{"Typeface name":"Webdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Webdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128375","Unicode hex":"1F577"},{"Typeface name":"Webdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128376","Unicode hex":"1F578"},{"Typeface name":"Webdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128370","Unicode hex":"1F572"},{"Typeface name":"Webdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128374","Unicode hex":"1F576"},{"Typeface name":"Webdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"127942","Unicode hex":"1F3C6"},{"Typeface name":"Webdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"127894","Unicode hex":"1F396"},{"Typeface name":"Webdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128391","Unicode hex":"1F587"},{"Typeface name":"Webdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128488","Unicode hex":"1F5E8"},{"Typeface name":"Webdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128489","Unicode hex":"1F5E9"},{"Typeface name":"Webdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128496","Unicode hex":"1F5F0"},{"Typeface name":"Webdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128497","Unicode hex":"1F5F1"},{"Typeface name":"Webdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"127798","Unicode hex":"1F336"},{"Typeface name":"Webdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"127895","Unicode hex":"1F397"},{"Typeface name":"Webdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128638","Unicode hex":"1F67E"},{"Typeface name":"Webdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128636","Unicode hex":"1F67C"},{"Typeface name":"Webdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128469","Unicode hex":"1F5D5"},{"Typeface name":"Webdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128470","Unicode hex":"1F5D6"},{"Typeface name":"Webdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128471","Unicode hex":"1F5D7"},{"Typeface name":"Webdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"9204","Unicode hex":"23F4"},{"Typeface name":"Webdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"9205","Unicode hex":"23F5"},{"Typeface name":"Webdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"9206","Unicode hex":"23F6"},{"Typeface name":"Webdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"9207","Unicode hex":"23F7"},{"Typeface name":"Webdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"9194","Unicode hex":"23EA"},{"Typeface name":"Webdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"9193","Unicode hex":"23E9"},{"Typeface name":"Webdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"9198","Unicode hex":"23EE"},{"Typeface name":"Webdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"9197","Unicode hex":"23ED"},{"Typeface name":"Webdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"9208","Unicode hex":"23F8"},{"Typeface name":"Webdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"9209","Unicode hex":"23F9"},{"Typeface name":"Webdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"9210","Unicode hex":"23FA"},{"Typeface name":"Webdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128474","Unicode hex":"1F5DA"},{"Typeface name":"Webdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128499","Unicode hex":"1F5F3"},{"Typeface name":"Webdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128736","Unicode hex":"1F6E0"},{"Typeface name":"Webdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"127959","Unicode hex":"1F3D7"},{"Typeface name":"Webdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"127960","Unicode hex":"1F3D8"},{"Typeface name":"Webdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"127961","Unicode hex":"1F3D9"},{"Typeface name":"Webdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"127962","Unicode hex":"1F3DA"},{"Typeface name":"Webdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"127964","Unicode hex":"1F3DC"},{"Typeface name":"Webdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"127981","Unicode hex":"1F3ED"},{"Typeface name":"Webdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"127963","Unicode hex":"1F3DB"},{"Typeface name":"Webdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"127968","Unicode hex":"1F3E0"},{"Typeface name":"Webdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"127958","Unicode hex":"1F3D6"},{"Typeface name":"Webdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"127965","Unicode hex":"1F3DD"},{"Typeface name":"Webdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128739","Unicode hex":"1F6E3"},{"Typeface name":"Webdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128269","Unicode hex":"1F50D"},{"Typeface name":"Webdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"127956","Unicode hex":"1F3D4"},{"Typeface name":"Webdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128065","Unicode hex":"1F441"},{"Typeface name":"Webdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128066","Unicode hex":"1F442"},{"Typeface name":"Webdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127966","Unicode hex":"1F3DE"},{"Typeface name":"Webdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"127957","Unicode hex":"1F3D5"},{"Typeface name":"Webdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"128740","Unicode hex":"1F6E4"},{"Typeface name":"Webdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127967","Unicode hex":"1F3DF"},{"Typeface name":"Webdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"128755","Unicode hex":"1F6F3"},{"Typeface name":"Webdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128364","Unicode hex":"1F56C"},{"Typeface name":"Webdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"128363","Unicode hex":"1F56B"},{"Typeface name":"Webdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128360","Unicode hex":"1F568"},{"Typeface name":"Webdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"128264","Unicode hex":"1F508"},{"Typeface name":"Webdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"127892","Unicode hex":"1F394"},{"Typeface name":"Webdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"127893","Unicode hex":"1F395"},{"Typeface name":"Webdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128492","Unicode hex":"1F5EC"},{"Typeface name":"Webdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128637","Unicode hex":"1F67D"},{"Typeface name":"Webdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"128493","Unicode hex":"1F5ED"},{"Typeface name":"Webdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128490","Unicode hex":"1F5EA"},{"Typeface name":"Webdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128491","Unicode hex":"1F5EB"},{"Typeface name":"Webdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"11156","Unicode hex":"2B94"},{"Typeface name":"Webdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"10004","Unicode hex":"2714"},{"Typeface name":"Webdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128690","Unicode hex":"1F6B2"},{"Typeface name":"Webdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"11036","Unicode hex":"2B1C"},{"Typeface name":"Webdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128737","Unicode hex":"1F6E1"},{"Typeface name":"Webdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128230","Unicode hex":"1F4E6"},{"Typeface name":"Webdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128753","Unicode hex":"1F6F1"},{"Typeface name":"Webdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"11035","Unicode hex":"2B1B"},{"Typeface name":"Webdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128657","Unicode hex":"1F691"},{"Typeface name":"Webdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"128712","Unicode hex":"1F6C8"},{"Typeface name":"Webdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128745","Unicode hex":"1F6E9"},{"Typeface name":"Webdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128752","Unicode hex":"1F6F0"},{"Typeface name":"Webdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"128968","Unicode hex":"1F7C8"},{"Typeface name":"Webdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128372","Unicode hex":"1F574"},{"Typeface name":"Webdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"11044","Unicode hex":"2B24"},{"Typeface name":"Webdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128741","Unicode hex":"1F6E5"},{"Typeface name":"Webdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128660","Unicode hex":"1F694"},{"Typeface name":"Webdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"128472","Unicode hex":"1F5D8"},{"Typeface name":"Webdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"128473","Unicode hex":"1F5D9"},{"Typeface name":"Webdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"10067","Unicode hex":"2753"},{"Typeface name":"Webdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"128754","Unicode hex":"1F6F2"},{"Typeface name":"Webdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"128647","Unicode hex":"1F687"},{"Typeface name":"Webdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"128653","Unicode hex":"1F68D"},{"Typeface name":"Webdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9971","Unicode hex":"26F3"},{"Typeface name":"Webdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Webdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"8854","Unicode hex":"2296"},{"Typeface name":"Webdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"128685","Unicode hex":"1F6AD"},{"Typeface name":"Webdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"128494","Unicode hex":"1F5EE"},{"Typeface name":"Webdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Webdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128495","Unicode hex":"1F5EF"},{"Typeface name":"Webdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128498","Unicode hex":"1F5F2"},{"Typeface name":"Webdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128697","Unicode hex":"1F6B9"},{"Typeface name":"Webdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"128698","Unicode hex":"1F6BA"},{"Typeface name":"Webdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"128713","Unicode hex":"1F6C9"},{"Typeface name":"Webdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"128714","Unicode hex":"1F6CA"},{"Typeface name":"Webdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"128700","Unicode hex":"1F6BC"},{"Typeface name":"Webdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"128125","Unicode hex":"1F47D"},{"Typeface name":"Webdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"127947","Unicode hex":"1F3CB"},{"Typeface name":"Webdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"9975","Unicode hex":"26F7"},{"Typeface name":"Webdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"127938","Unicode hex":"1F3C2"},{"Typeface name":"Webdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"127948","Unicode hex":"1F3CC"},{"Typeface name":"Webdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"127946","Unicode hex":"1F3CA"},{"Typeface name":"Webdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127940","Unicode hex":"1F3C4"},{"Typeface name":"Webdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"127949","Unicode hex":"1F3CD"},{"Typeface name":"Webdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"127950","Unicode hex":"1F3CE"},{"Typeface name":"Webdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128664","Unicode hex":"1F698"},{"Typeface name":"Webdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128480","Unicode hex":"1F5E0"},{"Typeface name":"Webdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128738","Unicode hex":"1F6E2"},{"Typeface name":"Webdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128176","Unicode hex":"1F4B0"},{"Typeface name":"Webdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"127991","Unicode hex":"1F3F7"},{"Typeface name":"Webdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128179","Unicode hex":"1F4B3"},{"Typeface name":"Webdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128106","Unicode hex":"1F46A"},{"Typeface name":"Webdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"128481","Unicode hex":"1F5E1"},{"Typeface name":"Webdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128482","Unicode hex":"1F5E2"},{"Typeface name":"Webdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128483","Unicode hex":"1F5E3"},{"Typeface name":"Webdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Webdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128388","Unicode hex":"1F584"},{"Typeface name":"Webdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128389","Unicode hex":"1F585"},{"Typeface name":"Webdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Webdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128390","Unicode hex":"1F586"},{"Typeface name":"Webdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128441","Unicode hex":"1F5B9"},{"Typeface name":"Webdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"128442","Unicode hex":"1F5BA"},{"Typeface name":"Webdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128443","Unicode hex":"1F5BB"},{"Typeface name":"Webdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128373","Unicode hex":"1F575"},{"Typeface name":"Webdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"128368","Unicode hex":"1F570"},{"Typeface name":"Webdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128445","Unicode hex":"1F5BD"},{"Typeface name":"Webdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128446","Unicode hex":"1F5BE"},{"Typeface name":"Webdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Webdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128466","Unicode hex":"1F5D2"},{"Typeface name":"Webdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128467","Unicode hex":"1F5D3"},{"Typeface name":"Webdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Webdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128218","Unicode hex":"1F4DA"},{"Typeface name":"Webdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128478","Unicode hex":"1F5DE"},{"Typeface name":"Webdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128479","Unicode hex":"1F5DF"},{"Typeface name":"Webdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128451","Unicode hex":"1F5C3"},{"Typeface name":"Webdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128450","Unicode hex":"1F5C2"},{"Typeface name":"Webdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128444","Unicode hex":"1F5BC"},{"Typeface name":"Webdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"127917","Unicode hex":"1F3AD"},{"Typeface name":"Webdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"127900","Unicode hex":"1F39C"},{"Typeface name":"Webdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"127896","Unicode hex":"1F398"},{"Typeface name":"Webdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"127897","Unicode hex":"1F399"},{"Typeface name":"Webdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"127911","Unicode hex":"1F3A7"},{"Typeface name":"Webdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128191","Unicode hex":"1F4BF"},{"Typeface name":"Webdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"127902","Unicode hex":"1F39E"},{"Typeface name":"Webdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128247","Unicode hex":"1F4F7"},{"Typeface name":"Webdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"127903","Unicode hex":"1F39F"},{"Typeface name":"Webdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"127916","Unicode hex":"1F3AC"},{"Typeface name":"Webdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128253","Unicode hex":"1F4FD"},{"Typeface name":"Webdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128249","Unicode hex":"1F4F9"},{"Typeface name":"Webdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128254","Unicode hex":"1F4FE"},{"Typeface name":"Webdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128251","Unicode hex":"1F4FB"},{"Typeface name":"Webdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"127898","Unicode hex":"1F39A"},{"Typeface name":"Webdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"127899","Unicode hex":"1F39B"},{"Typeface name":"Webdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128250","Unicode hex":"1F4FA"},{"Typeface name":"Webdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128187","Unicode hex":"1F4BB"},{"Typeface name":"Webdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128421","Unicode hex":"1F5A5"},{"Typeface name":"Webdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128422","Unicode hex":"1F5A6"},{"Typeface name":"Webdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128423","Unicode hex":"1F5A7"},{"Typeface name":"Webdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"128377","Unicode hex":"1F579"},{"Typeface name":"Webdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"127918","Unicode hex":"1F3AE"},{"Typeface name":"Webdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"128379","Unicode hex":"1F57B"},{"Typeface name":"Webdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128380","Unicode hex":"1F57C"},{"Typeface name":"Webdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128223","Unicode hex":"1F4DF"},{"Typeface name":"Webdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128385","Unicode hex":"1F581"},{"Typeface name":"Webdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128384","Unicode hex":"1F580"},{"Typeface name":"Webdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128424","Unicode hex":"1F5A8"},{"Typeface name":"Webdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128425","Unicode hex":"1F5A9"},{"Typeface name":"Webdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128447","Unicode hex":"1F5BF"},{"Typeface name":"Webdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128426","Unicode hex":"1F5AA"},{"Typeface name":"Webdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128476","Unicode hex":"1F5DC"},{"Typeface name":"Webdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128274","Unicode hex":"1F512"},{"Typeface name":"Webdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128275","Unicode hex":"1F513"},{"Typeface name":"Webdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128477","Unicode hex":"1F5DD"},{"Typeface name":"Webdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128229","Unicode hex":"1F4E5"},{"Typeface name":"Webdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128228","Unicode hex":"1F4E4"},{"Typeface name":"Webdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128371","Unicode hex":"1F573"},{"Typeface name":"Webdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"127779","Unicode hex":"1F323"},{"Typeface name":"Webdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"127780","Unicode hex":"1F324"},{"Typeface name":"Webdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"127781","Unicode hex":"1F325"},{"Typeface name":"Webdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"127782","Unicode hex":"1F326"},{"Typeface name":"Webdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"9729","Unicode hex":"2601"},{"Typeface name":"Webdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"127784","Unicode hex":"1F328"},{"Typeface name":"Webdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"127783","Unicode hex":"1F327"},{"Typeface name":"Webdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"127785","Unicode hex":"1F329"},{"Typeface name":"Webdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"127786","Unicode hex":"1F32A"},{"Typeface name":"Webdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"127788","Unicode hex":"1F32C"},{"Typeface name":"Webdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"127787","Unicode hex":"1F32B"},{"Typeface name":"Webdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"127772","Unicode hex":"1F31C"},{"Typeface name":"Webdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"127777","Unicode hex":"1F321"},{"Typeface name":"Webdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128715","Unicode hex":"1F6CB"},{"Typeface name":"Webdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128719","Unicode hex":"1F6CF"},{"Typeface name":"Webdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"127869","Unicode hex":"1F37D"},{"Typeface name":"Webdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"127864","Unicode hex":"1F378"},{"Typeface name":"Webdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128718","Unicode hex":"1F6CE"},{"Typeface name":"Webdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128717","Unicode hex":"1F6CD"},{"Typeface name":"Webdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9413","Unicode hex":"24C5"},{"Typeface name":"Webdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9855","Unicode hex":"267F"},{"Typeface name":"Webdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128710","Unicode hex":"1F6C6"},{"Typeface name":"Webdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"128392","Unicode hex":"1F588"},{"Typeface name":"Webdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"127891","Unicode hex":"1F393"},{"Typeface name":"Webdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128484","Unicode hex":"1F5E4"},{"Typeface name":"Webdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128485","Unicode hex":"1F5E5"},{"Typeface name":"Webdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128486","Unicode hex":"1F5E6"},{"Typeface name":"Webdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"128487","Unicode hex":"1F5E7"},{"Typeface name":"Webdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128746","Unicode hex":"1F6EA"},{"Typeface name":"Webdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128063","Unicode hex":"1F43F"},{"Typeface name":"Webdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"128038","Unicode hex":"1F426"},{"Typeface name":"Webdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128031","Unicode hex":"1F41F"},{"Typeface name":"Webdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128021","Unicode hex":"1F415"},{"Typeface name":"Webdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"128008","Unicode hex":"1F408"},{"Typeface name":"Webdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"128620","Unicode hex":"1F66C"},{"Typeface name":"Webdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"128622","Unicode hex":"1F66E"},{"Typeface name":"Webdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"128621","Unicode hex":"1F66D"},{"Typeface name":"Webdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"128623","Unicode hex":"1F66F"},{"Typeface name":"Webdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128506","Unicode hex":"1F5FA"},{"Typeface name":"Webdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"127757","Unicode hex":"1F30D"},{"Typeface name":"Webdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"127759","Unicode hex":"1F30F"},{"Typeface name":"Webdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"127758","Unicode hex":"1F30E"},{"Typeface name":"Webdings","Dingbat dec":"255","Dingbat hex":"FF","Unicode dec":"128330","Unicode hex":"1F54A"},{"Typeface name":"Wingdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128393","Unicode hex":"1F589"},{"Typeface name":"Wingdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"9986","Unicode hex":"2702"},{"Typeface name":"Wingdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"9985","Unicode hex":"2701"},{"Typeface name":"Wingdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128083","Unicode hex":"1F453"},{"Typeface name":"Wingdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"128365","Unicode hex":"1F56D"},{"Typeface name":"Wingdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Wingdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128367","Unicode hex":"1F56F"},{"Typeface name":"Wingdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128383","Unicode hex":"1F57F"},{"Typeface name":"Wingdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"9990","Unicode hex":"2706"},{"Typeface name":"Wingdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128386","Unicode hex":"1F582"},{"Typeface name":"Wingdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Wingdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128234","Unicode hex":"1F4EA"},{"Typeface name":"Wingdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128235","Unicode hex":"1F4EB"},{"Typeface name":"Wingdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128236","Unicode hex":"1F4EC"},{"Typeface name":"Wingdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128237","Unicode hex":"1F4ED"},{"Typeface name":"Wingdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128448","Unicode hex":"1F5C0"},{"Typeface name":"Wingdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128449","Unicode hex":"1F5C1"},{"Typeface name":"Wingdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128462","Unicode hex":"1F5CE"},{"Typeface name":"Wingdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128463","Unicode hex":"1F5CF"},{"Typeface name":"Wingdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128464","Unicode hex":"1F5D0"},{"Typeface name":"Wingdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128452","Unicode hex":"1F5C4"},{"Typeface name":"Wingdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"8987","Unicode hex":"231B"},{"Typeface name":"Wingdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128430","Unicode hex":"1F5AE"},{"Typeface name":"Wingdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128432","Unicode hex":"1F5B0"},{"Typeface name":"Wingdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128434","Unicode hex":"1F5B2"},{"Typeface name":"Wingdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128435","Unicode hex":"1F5B3"},{"Typeface name":"Wingdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128436","Unicode hex":"1F5B4"},{"Typeface name":"Wingdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128427","Unicode hex":"1F5AB"},{"Typeface name":"Wingdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128428","Unicode hex":"1F5AC"},{"Typeface name":"Wingdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"9991","Unicode hex":"2707"},{"Typeface name":"Wingdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"9997","Unicode hex":"270D"},{"Typeface name":"Wingdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128398","Unicode hex":"1F58E"},{"Typeface name":"Wingdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"9996","Unicode hex":"270C"},{"Typeface name":"Wingdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128399","Unicode hex":"1F58F"},{"Typeface name":"Wingdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128077","Unicode hex":"1F44D"},{"Typeface name":"Wingdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128078","Unicode hex":"1F44E"},{"Typeface name":"Wingdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"9756","Unicode hex":"261C"},{"Typeface name":"Wingdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"9758","Unicode hex":"261E"},{"Typeface name":"Wingdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"9757","Unicode hex":"261D"},{"Typeface name":"Wingdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"9759","Unicode hex":"261F"},{"Typeface name":"Wingdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128400","Unicode hex":"1F590"},{"Typeface name":"Wingdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"9786","Unicode hex":"263A"},{"Typeface name":"Wingdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128528","Unicode hex":"1F610"},{"Typeface name":"Wingdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"9785","Unicode hex":"2639"},{"Typeface name":"Wingdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128163","Unicode hex":"1F4A3"},{"Typeface name":"Wingdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128369","Unicode hex":"1F571"},{"Typeface name":"Wingdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"127987","Unicode hex":"1F3F3"},{"Typeface name":"Wingdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127985","Unicode hex":"1F3F1"},{"Typeface name":"Wingdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"9992","Unicode hex":"2708"},{"Typeface name":"Wingdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9788","Unicode hex":"263C"},{"Typeface name":"Wingdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127778","Unicode hex":"1F322"},{"Typeface name":"Wingdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"10052","Unicode hex":"2744"},{"Typeface name":"Wingdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128326","Unicode hex":"1F546"},{"Typeface name":"Wingdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"10014","Unicode hex":"271E"},{"Typeface name":"Wingdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128328","Unicode hex":"1F548"},{"Typeface name":"Wingdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10016","Unicode hex":"2720"},{"Typeface name":"Wingdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"10017","Unicode hex":"2721"},{"Typeface name":"Wingdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"9770","Unicode hex":"262A"},{"Typeface name":"Wingdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"9775","Unicode hex":"262F"},{"Typeface name":"Wingdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128329","Unicode hex":"1F549"},{"Typeface name":"Wingdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"9784","Unicode hex":"2638"},{"Typeface name":"Wingdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"9800","Unicode hex":"2648"},{"Typeface name":"Wingdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"9801","Unicode hex":"2649"},{"Typeface name":"Wingdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"9802","Unicode hex":"264A"},{"Typeface name":"Wingdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"9803","Unicode hex":"264B"},{"Typeface name":"Wingdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"9804","Unicode hex":"264C"},{"Typeface name":"Wingdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"9805","Unicode hex":"264D"},{"Typeface name":"Wingdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"9806","Unicode hex":"264E"},{"Typeface name":"Wingdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"9807","Unicode hex":"264F"},{"Typeface name":"Wingdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"9808","Unicode hex":"2650"},{"Typeface name":"Wingdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"9809","Unicode hex":"2651"},{"Typeface name":"Wingdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"9810","Unicode hex":"2652"},{"Typeface name":"Wingdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9811","Unicode hex":"2653"},{"Typeface name":"Wingdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128624","Unicode hex":"1F670"},{"Typeface name":"Wingdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128629","Unicode hex":"1F675"},{"Typeface name":"Wingdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9899","Unicode hex":"26AB"},{"Typeface name":"Wingdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128318","Unicode hex":"1F53E"},{"Typeface name":"Wingdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9724","Unicode hex":"25FC"},{"Typeface name":"Wingdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128911","Unicode hex":"1F78F"},{"Typeface name":"Wingdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128912","Unicode hex":"1F790"},{"Typeface name":"Wingdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"10065","Unicode hex":"2751"},{"Typeface name":"Wingdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"10066","Unicode hex":"2752"},{"Typeface name":"Wingdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"128927","Unicode hex":"1F79F"},{"Typeface name":"Wingdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"10731","Unicode hex":"29EB"},{"Typeface name":"Wingdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9670","Unicode hex":"25C6"},{"Typeface name":"Wingdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10070","Unicode hex":"2756"},{"Typeface name":"Wingdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"8999","Unicode hex":"2327"},{"Typeface name":"Wingdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"11193","Unicode hex":"2BB9"},{"Typeface name":"Wingdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"8984","Unicode hex":"2318"},{"Typeface name":"Wingdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"127989","Unicode hex":"1F3F5"},{"Typeface name":"Wingdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"127990","Unicode hex":"1F3F6"},{"Typeface name":"Wingdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128630","Unicode hex":"1F676"},{"Typeface name":"Wingdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128631","Unicode hex":"1F677"},{"Typeface name":"Wingdings","Dingbat dec":"127","Dingbat hex":"7F","Unicode dec":"9647","Unicode hex":"25AF"},{"Typeface name":"Wingdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"127243","Unicode hex":"1F10B"},{"Typeface name":"Wingdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"10112","Unicode hex":"2780"},{"Typeface name":"Wingdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"10113","Unicode hex":"2781"},{"Typeface name":"Wingdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"10114","Unicode hex":"2782"},{"Typeface name":"Wingdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"10115","Unicode hex":"2783"},{"Typeface name":"Wingdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10116","Unicode hex":"2784"},{"Typeface name":"Wingdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"10117","Unicode hex":"2785"},{"Typeface name":"Wingdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"10118","Unicode hex":"2786"},{"Typeface name":"Wingdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"10119","Unicode hex":"2787"},{"Typeface name":"Wingdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"10120","Unicode hex":"2788"},{"Typeface name":"Wingdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"10121","Unicode hex":"2789"},{"Typeface name":"Wingdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127244","Unicode hex":"1F10C"},{"Typeface name":"Wingdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"10122","Unicode hex":"278A"},{"Typeface name":"Wingdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"10123","Unicode hex":"278B"},{"Typeface name":"Wingdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"10124","Unicode hex":"278C"},{"Typeface name":"Wingdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"10125","Unicode hex":"278D"},{"Typeface name":"Wingdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"10126","Unicode hex":"278E"},{"Typeface name":"Wingdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"10127","Unicode hex":"278F"},{"Typeface name":"Wingdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"10128","Unicode hex":"2790"},{"Typeface name":"Wingdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"10129","Unicode hex":"2791"},{"Typeface name":"Wingdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"10130","Unicode hex":"2792"},{"Typeface name":"Wingdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"10131","Unicode hex":"2793"},{"Typeface name":"Wingdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128610","Unicode hex":"1F662"},{"Typeface name":"Wingdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128608","Unicode hex":"1F660"},{"Typeface name":"Wingdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"128609","Unicode hex":"1F661"},{"Typeface name":"Wingdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128611","Unicode hex":"1F663"},{"Typeface name":"Wingdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128606","Unicode hex":"1F65E"},{"Typeface name":"Wingdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128604","Unicode hex":"1F65C"},{"Typeface name":"Wingdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128605","Unicode hex":"1F65D"},{"Typeface name":"Wingdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128607","Unicode hex":"1F65F"},{"Typeface name":"Wingdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"8729","Unicode hex":"2219"},{"Typeface name":"Wingdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Wingdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"11037","Unicode hex":"2B1D"},{"Typeface name":"Wingdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"11096","Unicode hex":"2B58"},{"Typeface name":"Wingdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128902","Unicode hex":"1F786"},{"Typeface name":"Wingdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128904","Unicode hex":"1F788"},{"Typeface name":"Wingdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128906","Unicode hex":"1F78A"},{"Typeface name":"Wingdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128907","Unicode hex":"1F78B"},{"Typeface name":"Wingdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128319","Unicode hex":"1F53F"},{"Typeface name":"Wingdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9642","Unicode hex":"25AA"},{"Typeface name":"Wingdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128910","Unicode hex":"1F78E"},{"Typeface name":"Wingdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128961","Unicode hex":"1F7C1"},{"Typeface name":"Wingdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128965","Unicode hex":"1F7C5"},{"Typeface name":"Wingdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"9733","Unicode hex":"2605"},{"Typeface name":"Wingdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128971","Unicode hex":"1F7CB"},{"Typeface name":"Wingdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128975","Unicode hex":"1F7CF"},{"Typeface name":"Wingdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"128979","Unicode hex":"1F7D3"},{"Typeface name":"Wingdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"128977","Unicode hex":"1F7D1"},{"Typeface name":"Wingdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"11216","Unicode hex":"2BD0"},{"Typeface name":"Wingdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"8982","Unicode hex":"2316"},{"Typeface name":"Wingdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"11214","Unicode hex":"2BCE"},{"Typeface name":"Wingdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"11215","Unicode hex":"2BCF"},{"Typeface name":"Wingdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"11217","Unicode hex":"2BD1"},{"Typeface name":"Wingdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"10026","Unicode hex":"272A"},{"Typeface name":"Wingdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"10032","Unicode hex":"2730"},{"Typeface name":"Wingdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"128336","Unicode hex":"1F550"},{"Typeface name":"Wingdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128337","Unicode hex":"1F551"},{"Typeface name":"Wingdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128338","Unicode hex":"1F552"},{"Typeface name":"Wingdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128339","Unicode hex":"1F553"},{"Typeface name":"Wingdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128340","Unicode hex":"1F554"},{"Typeface name":"Wingdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"128341","Unicode hex":"1F555"},{"Typeface name":"Wingdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"128342","Unicode hex":"1F556"},{"Typeface name":"Wingdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128343","Unicode hex":"1F557"},{"Typeface name":"Wingdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128344","Unicode hex":"1F558"},{"Typeface name":"Wingdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128345","Unicode hex":"1F559"},{"Typeface name":"Wingdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128346","Unicode hex":"1F55A"},{"Typeface name":"Wingdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128347","Unicode hex":"1F55B"},{"Typeface name":"Wingdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11184","Unicode hex":"2BB0"},{"Typeface name":"Wingdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11185","Unicode hex":"2BB1"},{"Typeface name":"Wingdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11186","Unicode hex":"2BB2"},{"Typeface name":"Wingdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"11187","Unicode hex":"2BB3"},{"Typeface name":"Wingdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"11188","Unicode hex":"2BB4"},{"Typeface name":"Wingdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"11189","Unicode hex":"2BB5"},{"Typeface name":"Wingdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11190","Unicode hex":"2BB6"},{"Typeface name":"Wingdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11191","Unicode hex":"2BB7"},{"Typeface name":"Wingdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128618","Unicode hex":"1F66A"},{"Typeface name":"Wingdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128619","Unicode hex":"1F66B"},{"Typeface name":"Wingdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128597","Unicode hex":"1F655"},{"Typeface name":"Wingdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128596","Unicode hex":"1F654"},{"Typeface name":"Wingdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128599","Unicode hex":"1F657"},{"Typeface name":"Wingdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128598","Unicode hex":"1F656"},{"Typeface name":"Wingdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128592","Unicode hex":"1F650"},{"Typeface name":"Wingdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128593","Unicode hex":"1F651"},{"Typeface name":"Wingdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128594","Unicode hex":"1F652"},{"Typeface name":"Wingdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128595","Unicode hex":"1F653"},{"Typeface name":"Wingdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"9003","Unicode hex":"232B"},{"Typeface name":"Wingdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8998","Unicode hex":"2326"},{"Typeface name":"Wingdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"11160","Unicode hex":"2B98"},{"Typeface name":"Wingdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"11162","Unicode hex":"2B9A"},{"Typeface name":"Wingdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"11161","Unicode hex":"2B99"},{"Typeface name":"Wingdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"11163","Unicode hex":"2B9B"},{"Typeface name":"Wingdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"11144","Unicode hex":"2B88"},{"Typeface name":"Wingdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"11146","Unicode hex":"2B8A"},{"Typeface name":"Wingdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"11145","Unicode hex":"2B89"},{"Typeface name":"Wingdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"11147","Unicode hex":"2B8B"},{"Typeface name":"Wingdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129128","Unicode hex":"1F868"},{"Typeface name":"Wingdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129130","Unicode hex":"1F86A"},{"Typeface name":"Wingdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129129","Unicode hex":"1F869"},{"Typeface name":"Wingdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129131","Unicode hex":"1F86B"},{"Typeface name":"Wingdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129132","Unicode hex":"1F86C"},{"Typeface name":"Wingdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129133","Unicode hex":"1F86D"},{"Typeface name":"Wingdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129135","Unicode hex":"1F86F"},{"Typeface name":"Wingdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129134","Unicode hex":"1F86E"},{"Typeface name":"Wingdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129144","Unicode hex":"1F878"},{"Typeface name":"Wingdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129146","Unicode hex":"1F87A"},{"Typeface name":"Wingdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129145","Unicode hex":"1F879"},{"Typeface name":"Wingdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129147","Unicode hex":"1F87B"},{"Typeface name":"Wingdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129148","Unicode hex":"1F87C"},{"Typeface name":"Wingdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129149","Unicode hex":"1F87D"},{"Typeface name":"Wingdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129151","Unicode hex":"1F87F"},{"Typeface name":"Wingdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129150","Unicode hex":"1F87E"},{"Typeface name":"Wingdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"8678","Unicode hex":"21E6"},{"Typeface name":"Wingdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"8680","Unicode hex":"21E8"},{"Typeface name":"Wingdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"8679","Unicode hex":"21E7"},{"Typeface name":"Wingdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8681","Unicode hex":"21E9"},{"Typeface name":"Wingdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"11012","Unicode hex":"2B04"},{"Typeface name":"Wingdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"8691","Unicode hex":"21F3"},{"Typeface name":"Wingdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"11009","Unicode hex":"2B01"},{"Typeface name":"Wingdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11008","Unicode hex":"2B00"},{"Typeface name":"Wingdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11011","Unicode hex":"2B03"},{"Typeface name":"Wingdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"11010","Unicode hex":"2B02"},{"Typeface name":"Wingdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"129196","Unicode hex":"1F8AC"},{"Typeface name":"Wingdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"129197","Unicode hex":"1F8AD"},{"Typeface name":"Wingdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128502","Unicode hex":"1F5F6"},{"Typeface name":"Wingdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"10003","Unicode hex":"2713"},{"Typeface name":"Wingdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"128503","Unicode hex":"1F5F7"},{"Typeface name":"Wingdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"128505","Unicode hex":"1F5F9"},{"Typeface name":"Wingdings 2","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 2","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128394","Unicode hex":"1F58A"},{"Typeface name":"Wingdings 2","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128395","Unicode hex":"1F58B"},{"Typeface name":"Wingdings 2","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128396","Unicode hex":"1F58C"},{"Typeface name":"Wingdings 2","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128397","Unicode hex":"1F58D"},{"Typeface name":"Wingdings 2","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"9988","Unicode hex":"2704"},{"Typeface name":"Wingdings 2","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"9984","Unicode hex":"2700"},{"Typeface name":"Wingdings 2","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128382","Unicode hex":"1F57E"},{"Typeface name":"Wingdings 2","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128381","Unicode hex":"1F57D"},{"Typeface name":"Wingdings 2","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128453","Unicode hex":"1F5C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128454","Unicode hex":"1F5C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128455","Unicode hex":"1F5C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128456","Unicode hex":"1F5C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128457","Unicode hex":"1F5C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128458","Unicode hex":"1F5CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128459","Unicode hex":"1F5CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128460","Unicode hex":"1F5CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128461","Unicode hex":"1F5CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128465","Unicode hex":"1F5D1"},{"Typeface name":"Wingdings 2","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128468","Unicode hex":"1F5D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128437","Unicode hex":"1F5B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"128438","Unicode hex":"1F5B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128439","Unicode hex":"1F5B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128440","Unicode hex":"1F5B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128429","Unicode hex":"1F5AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128431","Unicode hex":"1F5AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128433","Unicode hex":"1F5B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128402","Unicode hex":"1F592"},{"Typeface name":"Wingdings 2","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128403","Unicode hex":"1F593"},{"Typeface name":"Wingdings 2","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128408","Unicode hex":"1F598"},{"Typeface name":"Wingdings 2","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128409","Unicode hex":"1F599"},{"Typeface name":"Wingdings 2","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128410","Unicode hex":"1F59A"},{"Typeface name":"Wingdings 2","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"128411","Unicode hex":"1F59B"},{"Typeface name":"Wingdings 2","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128072","Unicode hex":"1F448"},{"Typeface name":"Wingdings 2","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128073","Unicode hex":"1F449"},{"Typeface name":"Wingdings 2","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128412","Unicode hex":"1F59C"},{"Typeface name":"Wingdings 2","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"128413","Unicode hex":"1F59D"},{"Typeface name":"Wingdings 2","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"128414","Unicode hex":"1F59E"},{"Typeface name":"Wingdings 2","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"128415","Unicode hex":"1F59F"},{"Typeface name":"Wingdings 2","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"128416","Unicode hex":"1F5A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128417","Unicode hex":"1F5A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"128070","Unicode hex":"1F446"},{"Typeface name":"Wingdings 2","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128071","Unicode hex":"1F447"},{"Typeface name":"Wingdings 2","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128418","Unicode hex":"1F5A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128419","Unicode hex":"1F5A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128401","Unicode hex":"1F591"},{"Typeface name":"Wingdings 2","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128500","Unicode hex":"1F5F4"},{"Typeface name":"Wingdings 2","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"128504","Unicode hex":"1F5F8"},{"Typeface name":"Wingdings 2","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"128501","Unicode hex":"1F5F5"},{"Typeface name":"Wingdings 2","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9745","Unicode hex":"2611"},{"Typeface name":"Wingdings 2","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"11197","Unicode hex":"2BBD"},{"Typeface name":"Wingdings 2","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"9746","Unicode hex":"2612"},{"Typeface name":"Wingdings 2","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"11198","Unicode hex":"2BBE"},{"Typeface name":"Wingdings 2","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"11199","Unicode hex":"2BBF"},{"Typeface name":"Wingdings 2","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128711","Unicode hex":"1F6C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"128625","Unicode hex":"1F671"},{"Typeface name":"Wingdings 2","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"128628","Unicode hex":"1F674"},{"Typeface name":"Wingdings 2","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128626","Unicode hex":"1F672"},{"Typeface name":"Wingdings 2","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128627","Unicode hex":"1F673"},{"Typeface name":"Wingdings 2","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"8253","Unicode hex":"203D"},{"Typeface name":"Wingdings 2","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128633","Unicode hex":"1F679"},{"Typeface name":"Wingdings 2","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128634","Unicode hex":"1F67A"},{"Typeface name":"Wingdings 2","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"128635","Unicode hex":"1F67B"},{"Typeface name":"Wingdings 2","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"128614","Unicode hex":"1F666"},{"Typeface name":"Wingdings 2","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128612","Unicode hex":"1F664"},{"Typeface name":"Wingdings 2","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"128613","Unicode hex":"1F665"},{"Typeface name":"Wingdings 2","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128615","Unicode hex":"1F667"},{"Typeface name":"Wingdings 2","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128602","Unicode hex":"1F65A"},{"Typeface name":"Wingdings 2","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128600","Unicode hex":"1F658"},{"Typeface name":"Wingdings 2","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"128601","Unicode hex":"1F659"},{"Typeface name":"Wingdings 2","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128603","Unicode hex":"1F65B"},{"Typeface name":"Wingdings 2","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9450","Unicode hex":"24EA"},{"Typeface name":"Wingdings 2","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"9312","Unicode hex":"2460"},{"Typeface name":"Wingdings 2","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"9313","Unicode hex":"2461"},{"Typeface name":"Wingdings 2","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9314","Unicode hex":"2462"},{"Typeface name":"Wingdings 2","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"9315","Unicode hex":"2463"},{"Typeface name":"Wingdings 2","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9316","Unicode hex":"2464"},{"Typeface name":"Wingdings 2","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"9317","Unicode hex":"2465"},{"Typeface name":"Wingdings 2","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9318","Unicode hex":"2466"},{"Typeface name":"Wingdings 2","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9319","Unicode hex":"2467"},{"Typeface name":"Wingdings 2","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9320","Unicode hex":"2468"},{"Typeface name":"Wingdings 2","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9321","Unicode hex":"2469"},{"Typeface name":"Wingdings 2","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9471","Unicode hex":"24FF"},{"Typeface name":"Wingdings 2","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"10102","Unicode hex":"2776"},{"Typeface name":"Wingdings 2","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10103","Unicode hex":"2777"},{"Typeface name":"Wingdings 2","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"10104","Unicode hex":"2778"},{"Typeface name":"Wingdings 2","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10105","Unicode hex":"2779"},{"Typeface name":"Wingdings 2","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"10106","Unicode hex":"277A"},{"Typeface name":"Wingdings 2","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"10107","Unicode hex":"277B"},{"Typeface name":"Wingdings 2","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"10108","Unicode hex":"277C"},{"Typeface name":"Wingdings 2","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"10109","Unicode hex":"277D"},{"Typeface name":"Wingdings 2","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"10110","Unicode hex":"277E"},{"Typeface name":"Wingdings 2","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"10111","Unicode hex":"277F"},{"Typeface name":"Wingdings 2","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"9737","Unicode hex":"2609"},{"Typeface name":"Wingdings 2","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"127765","Unicode hex":"1F315"},{"Typeface name":"Wingdings 2","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"9789","Unicode hex":"263D"},{"Typeface name":"Wingdings 2","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"9790","Unicode hex":"263E"},{"Typeface name":"Wingdings 2","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11839","Unicode hex":"2E3F"},{"Typeface name":"Wingdings 2","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10013","Unicode hex":"271D"},{"Typeface name":"Wingdings 2","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"128327","Unicode hex":"1F547"},{"Typeface name":"Wingdings 2","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"128348","Unicode hex":"1F55C"},{"Typeface name":"Wingdings 2","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"128349","Unicode hex":"1F55D"},{"Typeface name":"Wingdings 2","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"128350","Unicode hex":"1F55E"},{"Typeface name":"Wingdings 2","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"128351","Unicode hex":"1F55F"},{"Typeface name":"Wingdings 2","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"128352","Unicode hex":"1F560"},{"Typeface name":"Wingdings 2","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"128353","Unicode hex":"1F561"},{"Typeface name":"Wingdings 2","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"128354","Unicode hex":"1F562"},{"Typeface name":"Wingdings 2","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128355","Unicode hex":"1F563"},{"Typeface name":"Wingdings 2","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128356","Unicode hex":"1F564"},{"Typeface name":"Wingdings 2","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128357","Unicode hex":"1F565"},{"Typeface name":"Wingdings 2","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128358","Unicode hex":"1F566"},{"Typeface name":"Wingdings 2","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"128359","Unicode hex":"1F567"},{"Typeface name":"Wingdings 2","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128616","Unicode hex":"1F668"},{"Typeface name":"Wingdings 2","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128617","Unicode hex":"1F669"},{"Typeface name":"Wingdings 2","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128900","Unicode hex":"1F784"},{"Typeface name":"Wingdings 2","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"10625","Unicode hex":"2981"},{"Typeface name":"Wingdings 2","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"9679","Unicode hex":"25CF"},{"Typeface name":"Wingdings 2","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"9675","Unicode hex":"25CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128901","Unicode hex":"1F785"},{"Typeface name":"Wingdings 2","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128903","Unicode hex":"1F787"},{"Typeface name":"Wingdings 2","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128905","Unicode hex":"1F789"},{"Typeface name":"Wingdings 2","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"8857","Unicode hex":"2299"},{"Typeface name":"Wingdings 2","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"10687","Unicode hex":"29BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128908","Unicode hex":"1F78C"},{"Typeface name":"Wingdings 2","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128909","Unicode hex":"1F78D"},{"Typeface name":"Wingdings 2","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"9726","Unicode hex":"25FE"},{"Typeface name":"Wingdings 2","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"9632","Unicode hex":"25A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"9633","Unicode hex":"25A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128913","Unicode hex":"1F791"},{"Typeface name":"Wingdings 2","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128914","Unicode hex":"1F792"},{"Typeface name":"Wingdings 2","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128915","Unicode hex":"1F793"},{"Typeface name":"Wingdings 2","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128916","Unicode hex":"1F794"},{"Typeface name":"Wingdings 2","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9635","Unicode hex":"25A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128917","Unicode hex":"1F795"},{"Typeface name":"Wingdings 2","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128918","Unicode hex":"1F796"},{"Typeface name":"Wingdings 2","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128919","Unicode hex":"1F797"},{"Typeface name":"Wingdings 2","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128920","Unicode hex":"1F798"},{"Typeface name":"Wingdings 2","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings 2","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"11045","Unicode hex":"2B25"},{"Typeface name":"Wingdings 2","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"9671","Unicode hex":"25C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"128922","Unicode hex":"1F79A"},{"Typeface name":"Wingdings 2","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"9672","Unicode hex":"25C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"128923","Unicode hex":"1F79B"},{"Typeface name":"Wingdings 2","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128924","Unicode hex":"1F79C"},{"Typeface name":"Wingdings 2","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"128925","Unicode hex":"1F79D"},{"Typeface name":"Wingdings 2","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128926","Unicode hex":"1F79E"},{"Typeface name":"Wingdings 2","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"11050","Unicode hex":"2B2A"},{"Typeface name":"Wingdings 2","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"11047","Unicode hex":"2B27"},{"Typeface name":"Wingdings 2","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128928","Unicode hex":"1F7A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"9686","Unicode hex":"25D6"},{"Typeface name":"Wingdings 2","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"9687","Unicode hex":"25D7"},{"Typeface name":"Wingdings 2","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"11210","Unicode hex":"2BCA"},{"Typeface name":"Wingdings 2","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"11211","Unicode hex":"2BCB"},{"Typeface name":"Wingdings 2","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"11200","Unicode hex":"2BC0"},{"Typeface name":"Wingdings 2","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"11201","Unicode hex":"2BC1"},{"Typeface name":"Wingdings 2","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"11039","Unicode hex":"2B1F"},{"Typeface name":"Wingdings 2","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"11202","Unicode hex":"2BC2"},{"Typeface name":"Wingdings 2","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"11043","Unicode hex":"2B23"},{"Typeface name":"Wingdings 2","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11042","Unicode hex":"2B22"},{"Typeface name":"Wingdings 2","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11203","Unicode hex":"2BC3"},{"Typeface name":"Wingdings 2","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11204","Unicode hex":"2BC4"},{"Typeface name":"Wingdings 2","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128929","Unicode hex":"1F7A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128930","Unicode hex":"1F7A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128931","Unicode hex":"1F7A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128932","Unicode hex":"1F7A4"},{"Typeface name":"Wingdings 2","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128933","Unicode hex":"1F7A5"},{"Typeface name":"Wingdings 2","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128934","Unicode hex":"1F7A6"},{"Typeface name":"Wingdings 2","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128935","Unicode hex":"1F7A7"},{"Typeface name":"Wingdings 2","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128936","Unicode hex":"1F7A8"},{"Typeface name":"Wingdings 2","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128937","Unicode hex":"1F7A9"},{"Typeface name":"Wingdings 2","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128938","Unicode hex":"1F7AA"},{"Typeface name":"Wingdings 2","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128939","Unicode hex":"1F7AB"},{"Typeface name":"Wingdings 2","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128940","Unicode hex":"1F7AC"},{"Typeface name":"Wingdings 2","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128941","Unicode hex":"1F7AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128942","Unicode hex":"1F7AE"},{"Typeface name":"Wingdings 2","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128943","Unicode hex":"1F7AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"128944","Unicode hex":"1F7B0"},{"Typeface name":"Wingdings 2","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"128945","Unicode hex":"1F7B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"128946","Unicode hex":"1F7B2"},{"Typeface name":"Wingdings 2","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"128947","Unicode hex":"1F7B3"},{"Typeface name":"Wingdings 2","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"128948","Unicode hex":"1F7B4"},{"Typeface name":"Wingdings 2","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"128949","Unicode hex":"1F7B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"128950","Unicode hex":"1F7B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"128951","Unicode hex":"1F7B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"128952","Unicode hex":"1F7B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"128953","Unicode hex":"1F7B9"},{"Typeface name":"Wingdings 2","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"128954","Unicode hex":"1F7BA"},{"Typeface name":"Wingdings 2","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"128955","Unicode hex":"1F7BB"},{"Typeface name":"Wingdings 2","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"128956","Unicode hex":"1F7BC"},{"Typeface name":"Wingdings 2","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128957","Unicode hex":"1F7BD"},{"Typeface name":"Wingdings 2","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128958","Unicode hex":"1F7BE"},{"Typeface name":"Wingdings 2","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"128959","Unicode hex":"1F7BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"128960","Unicode hex":"1F7C0"},{"Typeface name":"Wingdings 2","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128962","Unicode hex":"1F7C2"},{"Typeface name":"Wingdings 2","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128964","Unicode hex":"1F7C4"},{"Typeface name":"Wingdings 2","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"128966","Unicode hex":"1F7C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"128969","Unicode hex":"1F7C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128970","Unicode hex":"1F7CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"10038","Unicode hex":"2736"},{"Typeface name":"Wingdings 2","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"128972","Unicode hex":"1F7CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128974","Unicode hex":"1F7CE"},{"Typeface name":"Wingdings 2","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128976","Unicode hex":"1F7D0"},{"Typeface name":"Wingdings 2","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128978","Unicode hex":"1F7D2"},{"Typeface name":"Wingdings 2","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"10041","Unicode hex":"2739"},{"Typeface name":"Wingdings 2","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128963","Unicode hex":"1F7C3"},{"Typeface name":"Wingdings 2","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128967","Unicode hex":"1F7C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Wingdings 2","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128973","Unicode hex":"1F7CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128980","Unicode hex":"1F7D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11212","Unicode hex":"2BCC"},{"Typeface name":"Wingdings 2","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11213","Unicode hex":"2BCD"},{"Typeface name":"Wingdings 2","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"8251","Unicode hex":"203B"},{"Typeface name":"Wingdings 2","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"8258","Unicode hex":"2042"},{"Typeface name":"Wingdings 3","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 3","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"11104","Unicode hex":"2B60"},{"Typeface name":"Wingdings 3","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"11106","Unicode hex":"2B62"},{"Typeface name":"Wingdings 3","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"11105","Unicode hex":"2B61"},{"Typeface name":"Wingdings 3","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"11107","Unicode hex":"2B63"},{"Typeface name":"Wingdings 3","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"11110","Unicode hex":"2B66"},{"Typeface name":"Wingdings 3","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"11111","Unicode hex":"2B67"},{"Typeface name":"Wingdings 3","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"11113","Unicode hex":"2B69"},{"Typeface name":"Wingdings 3","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"11112","Unicode hex":"2B68"},{"Typeface name":"Wingdings 3","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"11120","Unicode hex":"2B70"},{"Typeface name":"Wingdings 3","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"11122","Unicode hex":"2B72"},{"Typeface name":"Wingdings 3","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"11121","Unicode hex":"2B71"},{"Typeface name":"Wingdings 3","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"11123","Unicode hex":"2B73"},{"Typeface name":"Wingdings 3","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"11126","Unicode hex":"2B76"},{"Typeface name":"Wingdings 3","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"11128","Unicode hex":"2B78"},{"Typeface name":"Wingdings 3","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"11131","Unicode hex":"2B7B"},{"Typeface name":"Wingdings 3","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"11133","Unicode hex":"2B7D"},{"Typeface name":"Wingdings 3","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"11108","Unicode hex":"2B64"},{"Typeface name":"Wingdings 3","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"11109","Unicode hex":"2B65"},{"Typeface name":"Wingdings 3","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"11114","Unicode hex":"2B6A"},{"Typeface name":"Wingdings 3","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"11116","Unicode hex":"2B6C"},{"Typeface name":"Wingdings 3","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"11115","Unicode hex":"2B6B"},{"Typeface name":"Wingdings 3","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"11117","Unicode hex":"2B6D"},{"Typeface name":"Wingdings 3","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"11085","Unicode hex":"2B4D"},{"Typeface name":"Wingdings 3","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"11168","Unicode hex":"2BA0"},{"Typeface name":"Wingdings 3","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"11169","Unicode hex":"2BA1"},{"Typeface name":"Wingdings 3","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"11170","Unicode hex":"2BA2"},{"Typeface name":"Wingdings 3","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"11171","Unicode hex":"2BA3"},{"Typeface name":"Wingdings 3","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"11172","Unicode hex":"2BA4"},{"Typeface name":"Wingdings 3","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"11173","Unicode hex":"2BA5"},{"Typeface name":"Wingdings 3","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"11174","Unicode hex":"2BA6"},{"Typeface name":"Wingdings 3","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"11175","Unicode hex":"2BA7"},{"Typeface name":"Wingdings 3","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"11152","Unicode hex":"2B90"},{"Typeface name":"Wingdings 3","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"11153","Unicode hex":"2B91"},{"Typeface name":"Wingdings 3","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"11154","Unicode hex":"2B92"},{"Typeface name":"Wingdings 3","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"11155","Unicode hex":"2B93"},{"Typeface name":"Wingdings 3","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"11136","Unicode hex":"2B80"},{"Typeface name":"Wingdings 3","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"11139","Unicode hex":"2B83"},{"Typeface name":"Wingdings 3","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"11134","Unicode hex":"2B7E"},{"Typeface name":"Wingdings 3","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"11135","Unicode hex":"2B7F"},{"Typeface name":"Wingdings 3","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"11140","Unicode hex":"2B84"},{"Typeface name":"Wingdings 3","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"11142","Unicode hex":"2B86"},{"Typeface name":"Wingdings 3","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"11141","Unicode hex":"2B85"},{"Typeface name":"Wingdings 3","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"11143","Unicode hex":"2B87"},{"Typeface name":"Wingdings 3","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"11151","Unicode hex":"2B8F"},{"Typeface name":"Wingdings 3","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"11149","Unicode hex":"2B8D"},{"Typeface name":"Wingdings 3","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"11150","Unicode hex":"2B8E"},{"Typeface name":"Wingdings 3","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"11148","Unicode hex":"2B8C"},{"Typeface name":"Wingdings 3","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"11118","Unicode hex":"2B6E"},{"Typeface name":"Wingdings 3","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"11119","Unicode hex":"2B6F"},{"Typeface name":"Wingdings 3","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9099","Unicode hex":"238B"},{"Typeface name":"Wingdings 3","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"8996","Unicode hex":"2324"},{"Typeface name":"Wingdings 3","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"8963","Unicode hex":"2303"},{"Typeface name":"Wingdings 3","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"8997","Unicode hex":"2325"},{"Typeface name":"Wingdings 3","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"9251","Unicode hex":"2423"},{"Typeface name":"Wingdings 3","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"9085","Unicode hex":"237D"},{"Typeface name":"Wingdings 3","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"8682","Unicode hex":"21EA"},{"Typeface name":"Wingdings 3","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"11192","Unicode hex":"2BB8"},{"Typeface name":"Wingdings 3","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"129184","Unicode hex":"1F8A0"},{"Typeface name":"Wingdings 3","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"129185","Unicode hex":"1F8A1"},{"Typeface name":"Wingdings 3","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"129186","Unicode hex":"1F8A2"},{"Typeface name":"Wingdings 3","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"129187","Unicode hex":"1F8A3"},{"Typeface name":"Wingdings 3","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"129188","Unicode hex":"1F8A4"},{"Typeface name":"Wingdings 3","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"129189","Unicode hex":"1F8A5"},{"Typeface name":"Wingdings 3","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"129190","Unicode hex":"1F8A6"},{"Typeface name":"Wingdings 3","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"129191","Unicode hex":"1F8A7"},{"Typeface name":"Wingdings 3","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"129192","Unicode hex":"1F8A8"},{"Typeface name":"Wingdings 3","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"129193","Unicode hex":"1F8A9"},{"Typeface name":"Wingdings 3","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"129194","Unicode hex":"1F8AA"},{"Typeface name":"Wingdings 3","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"129195","Unicode hex":"1F8AB"},{"Typeface name":"Wingdings 3","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"129104","Unicode hex":"1F850"},{"Typeface name":"Wingdings 3","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"129106","Unicode hex":"1F852"},{"Typeface name":"Wingdings 3","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"129105","Unicode hex":"1F851"},{"Typeface name":"Wingdings 3","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"129107","Unicode hex":"1F853"},{"Typeface name":"Wingdings 3","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"129108","Unicode hex":"1F854"},{"Typeface name":"Wingdings 3","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"129109","Unicode hex":"1F855"},{"Typeface name":"Wingdings 3","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"129111","Unicode hex":"1F857"},{"Typeface name":"Wingdings 3","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"129110","Unicode hex":"1F856"},{"Typeface name":"Wingdings 3","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"129112","Unicode hex":"1F858"},{"Typeface name":"Wingdings 3","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"129113","Unicode hex":"1F859"},{"Typeface name":"Wingdings 3","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9650","Unicode hex":"25B2"},{"Typeface name":"Wingdings 3","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9660","Unicode hex":"25BC"},{"Typeface name":"Wingdings 3","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9651","Unicode hex":"25B3"},{"Typeface name":"Wingdings 3","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9661","Unicode hex":"25BD"},{"Typeface name":"Wingdings 3","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9664","Unicode hex":"25C0"},{"Typeface name":"Wingdings 3","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9654","Unicode hex":"25B6"},{"Typeface name":"Wingdings 3","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"9665","Unicode hex":"25C1"},{"Typeface name":"Wingdings 3","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9655","Unicode hex":"25B7"},{"Typeface name":"Wingdings 3","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"9699","Unicode hex":"25E3"},{"Typeface name":"Wingdings 3","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"9698","Unicode hex":"25E2"},{"Typeface name":"Wingdings 3","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"9700","Unicode hex":"25E4"},{"Typeface name":"Wingdings 3","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"9701","Unicode hex":"25E5"},{"Typeface name":"Wingdings 3","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"128896","Unicode hex":"1F780"},{"Typeface name":"Wingdings 3","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128898","Unicode hex":"1F782"},{"Typeface name":"Wingdings 3","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128897","Unicode hex":"1F781"},{"Typeface name":"Wingdings 3","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128899","Unicode hex":"1F783"},{"Typeface name":"Wingdings 3","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"11205","Unicode hex":"2BC5"},{"Typeface name":"Wingdings 3","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"11206","Unicode hex":"2BC6"},{"Typeface name":"Wingdings 3","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"11207","Unicode hex":"2BC7"},{"Typeface name":"Wingdings 3","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11208","Unicode hex":"2BC8"},{"Typeface name":"Wingdings 3","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"11164","Unicode hex":"2B9C"},{"Typeface name":"Wingdings 3","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"11166","Unicode hex":"2B9E"},{"Typeface name":"Wingdings 3","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"11165","Unicode hex":"2B9D"},{"Typeface name":"Wingdings 3","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"11167","Unicode hex":"2B9F"},{"Typeface name":"Wingdings 3","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"129040","Unicode hex":"1F810"},{"Typeface name":"Wingdings 3","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"129042","Unicode hex":"1F812"},{"Typeface name":"Wingdings 3","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"129041","Unicode hex":"1F811"},{"Typeface name":"Wingdings 3","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"129043","Unicode hex":"1F813"},{"Typeface name":"Wingdings 3","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"129044","Unicode hex":"1F814"},{"Typeface name":"Wingdings 3","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"129046","Unicode hex":"1F816"},{"Typeface name":"Wingdings 3","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"129045","Unicode hex":"1F815"},{"Typeface name":"Wingdings 3","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"129047","Unicode hex":"1F817"},{"Typeface name":"Wingdings 3","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"129048","Unicode hex":"1F818"},{"Typeface name":"Wingdings 3","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"129050","Unicode hex":"1F81A"},{"Typeface name":"Wingdings 3","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"129049","Unicode hex":"1F819"},{"Typeface name":"Wingdings 3","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"129051","Unicode hex":"1F81B"},{"Typeface name":"Wingdings 3","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"129052","Unicode hex":"1F81C"},{"Typeface name":"Wingdings 3","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"129054","Unicode hex":"1F81E"},{"Typeface name":"Wingdings 3","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"129053","Unicode hex":"1F81D"},{"Typeface name":"Wingdings 3","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"129055","Unicode hex":"1F81F"},{"Typeface name":"Wingdings 3","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"129024","Unicode hex":"1F800"},{"Typeface name":"Wingdings 3","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"129026","Unicode hex":"1F802"},{"Typeface name":"Wingdings 3","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"129025","Unicode hex":"1F801"},{"Typeface name":"Wingdings 3","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"129027","Unicode hex":"1F803"},{"Typeface name":"Wingdings 3","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"129028","Unicode hex":"1F804"},{"Typeface name":"Wingdings 3","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"129030","Unicode hex":"1F806"},{"Typeface name":"Wingdings 3","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"129029","Unicode hex":"1F805"},{"Typeface name":"Wingdings 3","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"129031","Unicode hex":"1F807"},{"Typeface name":"Wingdings 3","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"129032","Unicode hex":"1F808"},{"Typeface name":"Wingdings 3","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"129034","Unicode hex":"1F80A"},{"Typeface name":"Wingdings 3","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"129033","Unicode hex":"1F809"},{"Typeface name":"Wingdings 3","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"129035","Unicode hex":"1F80B"},{"Typeface name":"Wingdings 3","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"129056","Unicode hex":"1F820"},{"Typeface name":"Wingdings 3","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"129058","Unicode hex":"1F822"},{"Typeface name":"Wingdings 3","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"129060","Unicode hex":"1F824"},{"Typeface name":"Wingdings 3","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"129062","Unicode hex":"1F826"},{"Typeface name":"Wingdings 3","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"129064","Unicode hex":"1F828"},{"Typeface name":"Wingdings 3","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"129066","Unicode hex":"1F82A"},{"Typeface name":"Wingdings 3","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"129068","Unicode hex":"1F82C"},{"Typeface name":"Wingdings 3","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"129180","Unicode hex":"1F89C"},{"Typeface name":"Wingdings 3","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"129181","Unicode hex":"1F89D"},{"Typeface name":"Wingdings 3","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"129182","Unicode hex":"1F89E"},{"Typeface name":"Wingdings 3","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"129183","Unicode hex":"1F89F"},{"Typeface name":"Wingdings 3","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"129070","Unicode hex":"1F82E"},{"Typeface name":"Wingdings 3","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"129072","Unicode hex":"1F830"},{"Typeface name":"Wingdings 3","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"129074","Unicode hex":"1F832"},{"Typeface name":"Wingdings 3","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"129076","Unicode hex":"1F834"},{"Typeface name":"Wingdings 3","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"129078","Unicode hex":"1F836"},{"Typeface name":"Wingdings 3","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"129080","Unicode hex":"1F838"},{"Typeface name":"Wingdings 3","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"129082","Unicode hex":"1F83A"},{"Typeface name":"Wingdings 3","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"129081","Unicode hex":"1F839"},{"Typeface name":"Wingdings 3","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"129083","Unicode hex":"1F83B"},{"Typeface name":"Wingdings 3","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"129176","Unicode hex":"1F898"},{"Typeface name":"Wingdings 3","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"129178","Unicode hex":"1F89A"},{"Typeface name":"Wingdings 3","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"129177","Unicode hex":"1F899"},{"Typeface name":"Wingdings 3","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"129179","Unicode hex":"1F89B"},{"Typeface name":"Wingdings 3","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"129084","Unicode hex":"1F83C"},{"Typeface name":"Wingdings 3","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"129086","Unicode hex":"1F83E"},{"Typeface name":"Wingdings 3","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"129085","Unicode hex":"1F83D"},{"Typeface name":"Wingdings 3","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"129087","Unicode hex":"1F83F"},{"Typeface name":"Wingdings 3","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"129088","Unicode hex":"1F840"},{"Typeface name":"Wingdings 3","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"129090","Unicode hex":"1F842"},{"Typeface name":"Wingdings 3","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"129089","Unicode hex":"1F841"},{"Typeface name":"Wingdings 3","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"129091","Unicode hex":"1F843"},{"Typeface name":"Wingdings 3","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"129092","Unicode hex":"1F844"},{"Typeface name":"Wingdings 3","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"129094","Unicode hex":"1F846"},{"Typeface name":"Wingdings 3","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"129093","Unicode hex":"1F845"},{"Typeface name":"Wingdings 3","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"129095","Unicode hex":"1F847"},{"Typeface name":"Wingdings 3","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11176","Unicode hex":"2BA8"},{"Typeface name":"Wingdings 3","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11177","Unicode hex":"2BA9"},{"Typeface name":"Wingdings 3","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"11178","Unicode hex":"2BAA"},{"Typeface name":"Wingdings 3","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"11179","Unicode hex":"2BAB"},{"Typeface name":"Wingdings 3","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"11180","Unicode hex":"2BAC"},{"Typeface name":"Wingdings 3","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"11181","Unicode hex":"2BAD"},{"Typeface name":"Wingdings 3","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"11182","Unicode hex":"2BAE"},{"Typeface name":"Wingdings 3","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"11183","Unicode hex":"2BAF"},{"Typeface name":"Wingdings 3","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"129120","Unicode hex":"1F860"},{"Typeface name":"Wingdings 3","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"129122","Unicode hex":"1F862"},{"Typeface name":"Wingdings 3","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"129121","Unicode hex":"1F861"},{"Typeface name":"Wingdings 3","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"129123","Unicode hex":"1F863"},{"Typeface name":"Wingdings 3","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"129124","Unicode hex":"1F864"},{"Typeface name":"Wingdings 3","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"129125","Unicode hex":"1F865"},{"Typeface name":"Wingdings 3","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"129127","Unicode hex":"1F867"},{"Typeface name":"Wingdings 3","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"129126","Unicode hex":"1F866"},{"Typeface name":"Wingdings 3","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"129136","Unicode hex":"1F870"},{"Typeface name":"Wingdings 3","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"129138","Unicode hex":"1F872"},{"Typeface name":"Wingdings 3","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"129137","Unicode hex":"1F871"},{"Typeface name":"Wingdings 3","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"129139","Unicode hex":"1F873"},{"Typeface name":"Wingdings 3","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"129140","Unicode hex":"1F874"},{"Typeface name":"Wingdings 3","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"129141","Unicode hex":"1F875"},{"Typeface name":"Wingdings 3","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129143","Unicode hex":"1F877"},{"Typeface name":"Wingdings 3","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129142","Unicode hex":"1F876"},{"Typeface name":"Wingdings 3","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129152","Unicode hex":"1F880"},{"Typeface name":"Wingdings 3","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129154","Unicode hex":"1F882"},{"Typeface name":"Wingdings 3","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129153","Unicode hex":"1F881"},{"Typeface name":"Wingdings 3","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129155","Unicode hex":"1F883"},{"Typeface name":"Wingdings 3","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129156","Unicode hex":"1F884"},{"Typeface name":"Wingdings 3","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129157","Unicode hex":"1F885"},{"Typeface name":"Wingdings 3","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129159","Unicode hex":"1F887"},{"Typeface name":"Wingdings 3","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129158","Unicode hex":"1F886"},{"Typeface name":"Wingdings 3","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129168","Unicode hex":"1F890"},{"Typeface name":"Wingdings 3","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129170","Unicode hex":"1F892"},{"Typeface name":"Wingdings 3","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129169","Unicode hex":"1F891"},{"Typeface name":"Wingdings 3","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129171","Unicode hex":"1F893"},{"Typeface name":"Wingdings 3","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129172","Unicode hex":"1F894"},{"Typeface name":"Wingdings 3","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129174","Unicode hex":"1F896"},{"Typeface name":"Wingdings 3","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"129173","Unicode hex":"1F895"},{"Typeface name":"Wingdings 3","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"129175","Unicode hex":"1F897"}];return hk.default=n,hk}var YH;function EDe(){if(YH)return Mc;YH=1;var n=Mc&&Mc.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.hex=Mc.dec=Mc.codePoint=void 0;for(var e=n(CDe()),t={},r=String.fromCodePoint?String.fromCodePoint:f,i=0,a=e.default;i<a.length;i++){var o=a[i],s=parseInt(o["Unicode dec"],10),u={codePoint:s,string:r(s)};t[o["Typeface name"].toUpperCase()+"_"+o["Dingbat dec"]]=u}function l(d,p){return t[d.toUpperCase()+"_"+p]}Mc.codePoint=l;function h(d,p){return l(d,parseInt(p,10))}Mc.dec=h;function c(d,p){return l(d,parseInt(p,16))}Mc.hex=c;function f(d){if(d<=65535)return String.fromCharCode(d);var p=Math.floor((d-65536)/1024)+55296,m=(d-65536)%1024+56320;return String.fromCharCode(p,m)}return Mc}var fk={},QH;function TDe(){if(QH)return fk;QH=1,fk.uriToZipEntryName=n,fk.replaceFragment=e;function n(t,r){return r.charAt(0)==="/"?r.substr(1):t+"/"+r}function e(t,r){var i=t.indexOf("#");return i!==-1&&(t=t.substring(0,i)),t+"#"+r}return fk}var ZH;function DDe(){if(ZH)return ck;ZH=1,ck.createBodyReader=s,ck._readNumberingProperties=l;var n=EDe(),e=ba,t=k1(),r=Tp().Result,i=Tp().warning,a=u7(),o=TDe();function s(w){return{readXmlElement:function(x){return new u(w).readXmlElement(x)},readXmlElements:function(x){return new u(w).readXmlElements(x)}}}function u(w){var x=[],S=[],E=[],A=w.relationships,k=w.contentTypes,T=w.docxFile,O=w.files,F=w.numbering,I=w.styles;function R(Le){var tt=Le.map(U);return y(tt)}function U(Le){if(Le.type==="element"){var tt=ye[Le.name];if(tt)return tt(Le);if(!Object.prototype.hasOwnProperty.call(c,Le.name)){var ft=i("An unrecognised element was ignored: "+Le.name);return f([ft])}}return d()}function B(Le){return H(Le).map(function(tt){return{type:"paragraphProperties",styleId:tt.styleId,styleName:tt.name,alignment:Le.firstOrEmpty("w:jc").attributes["w:val"],numbering:l(tt.styleId,Le.firstOrEmpty("w:numPr"),F),indent:W(Le.firstOrEmpty("w:ind"))}})}function W(Le){return{start:Le.attributes["w:start"]||Le.attributes["w:left"],end:Le.attributes["w:end"]||Le.attributes["w:right"],firstLine:Le.attributes["w:firstLine"],hanging:Le.attributes["w:hanging"]}}function Y(Le){return K(Le).map(function(tt){var ft=Le.firstOrEmpty("w:sz").attributes["w:val"],Et=/^[0-9]+$/.test(ft)?parseInt(ft,10)/2:null;return{type:"runProperties",styleId:tt.styleId,styleName:tt.name,verticalAlignment:Le.firstOrEmpty("w:vertAlign").attributes["w:val"],font:Le.firstOrEmpty("w:rFonts").attributes["w:ascii"],fontSize:Et,isBold:j(Le.first("w:b")),isUnderline:z(Le.first("w:u")),isItalic:j(Le.first("w:i")),isStrikethrough:j(Le.first("w:strike")),isAllCaps:j(Le.first("w:caps")),isSmallCaps:j(Le.first("w:smallCaps")),highlight:q(Le.firstOrEmpty("w:highlight").attributes["w:val"])}})}function z(Le){if(Le){var tt=Le.attributes["w:val"];return tt!==void 0&&tt!=="false"&&tt!=="0"&&tt!=="none"}else return!1}function j(Le){if(Le){var tt=Le.attributes["w:val"];return tt!=="false"&&tt!=="0"}else return!1}function M(Le){return Le!=="false"&&Le!=="0"}function q(Le){return!Le||Le==="none"?null:Le}function H(Le){return J(Le,"w:pStyle","Paragraph",I.findParagraphStyleById)}function K(Le){return J(Le,"w:rStyle","Run",I.findCharacterStyleById)}function Z(Le){return J(Le,"w:tblStyle","Table",I.findTableStyleById)}function J(Le,tt,ft,Et){var xt=[],Ot=Le.first(tt),dn=null,Kr=null;if(Ot&&(dn=Ot.attributes["w:val"],dn)){var Ba=Et(dn);Ba?Kr=Ba.name:xt.push(pt(ft,dn))}return m({styleId:dn,name:Kr},xt)}function X(Le){var tt=Le.attributes["w:fldCharType"];if(tt==="begin")x.push({type:"begin",fldChar:Le}),S=[];else if(tt==="end"){var ft=x.pop();if(ft.type==="begin"&&(ft=ie(ft)),ft.type==="checkbox")return p(t.checkbox({checked:ft.checked}))}else if(tt==="separate"){var Et=x.pop(),xt=ie(Et);x.push(xt)}return d()}function ae(){var Le=e.last(x.filter(function(tt){return tt.type==="hyperlink"}));return Le?Le.options:null}function ie(Le){return ce(S.join(""),Le.type==="begin"?Le.fldChar:a.emptyElement)}function ce(Le,tt){var ft=/\s*HYPERLINK "(.*)"/.exec(Le);if(ft)return{type:"hyperlink",options:{href:ft[1]}};var Et=/\s*HYPERLINK\s+\\l\s+"(.*)"/.exec(Le);if(Et)return{type:"hyperlink",options:{anchor:Et[1]}};var xt=/\s*FORMCHECKBOX\s*/.exec(Le);if(xt){var Ot=tt.firstOrEmpty("w:ffData").firstOrEmpty("w:checkBox"),dn=Ot.first("w:checked"),Kr=dn==null?j(Ot.first("w:default")):j(dn);return{type:"checkbox",checked:Kr}}return{type:"unknown"}}function ge(Le){return S.push(Le.text()),d()}function Ce(Le){var tt=Le.attributes["w:font"],ft=Le.attributes["w:char"],Et=n.hex(tt,ft);return Et==null&&/^F0..$/.test(ft)&&(Et=n.hex(tt,ft.substring(2))),Et==null?f([i("A w:sym element with an unsupported character was ignored: char "+ft+" in font "+tt)]):p(new t.Text(Et.string))}function Ee(Le){return function(tt){var ft=tt.attributes["w:id"];return p(new t.NoteReference({noteType:Le,noteId:ft}))}}function G(Le){return p(t.commentReference({commentId:Le.attributes["w:id"]}))}function de(Le){return R(Le.children)}var ye={"w:p":function(Le){var tt=Le.firstOrEmpty("w:pPr"),ft=!!tt.firstOrEmpty("w:rPr").first("w:del");if(ft)return Le.children.forEach(function(xt){E.push(xt)}),d();var Et=Le.children;return E.length>0&&(Et=E.concat(Et),E=[]),g.map(B(tt),R(Et),function(xt,Ot){return new t.Paragraph(Ot,xt)}).insertExtra()},"w:r":function(Le){return g.map(Y(Le.firstOrEmpty("w:rPr")),R(Le.children),function(tt,ft){var Et=ae();return Et!==null&&(ft=[new t.Hyperlink(ft,Et)]),new t.Run(ft,tt)})},"w:fldChar":X,"w:instrText":ge,"w:t":function(Le){return p(new t.Text(Le.text()))},"w:tab":function(Le){return p(new t.Tab)},"w:noBreakHyphen":function(){return p(new t.Text(""))},"w:softHyphen":function(Le){return p(new t.Text(""))},"w:sym":Ce,"w:hyperlink":function(Le){var tt=Le.attributes["r:id"],ft=Le.attributes["w:anchor"];return R(Le.children).map(function(Et){function xt(dn){var Kr=Le.attributes["w:tgtFrame"]||null;return new t.Hyperlink(Et,e.extend({targetFrame:Kr},dn))}if(tt){var Ot=A.findTargetByRelationshipId(tt);return ft&&(Ot=o.replaceFragment(Ot,ft)),xt({href:Ot})}else return ft?xt({anchor:ft}):Et})},"w:tbl":le,"w:tr":fe,"w:tc":Ne,"w:footnoteReference":Ee("footnote"),"w:endnoteReference":Ee("endnote"),"w:commentReference":G,"w:br":function(Le){var tt=Le.attributes["w:type"];return tt==null||tt==="textWrapping"?p(t.lineBreak):tt==="page"?p(t.pageBreak):tt==="column"?p(t.columnBreak):f([i("Unsupported break type: "+tt)])},"w:bookmarkStart":function(Le){var tt=Le.attributes["w:name"];return tt==="_GoBack"?d():p(new t.BookmarkStart({name:tt}))},"mc:AlternateContent":function(Le){return de(Le.first("mc:Fallback"))},"w:sdt":function(Le){var tt=Le.firstOrEmpty("w:sdtPr").first("wordml:checkbox");if(tt){var ft=tt.first("wordml:checked"),Et=!!ft&&M(ft.attributes["wordml:val"]);return p(t.checkbox({checked:Et}))}else return R(Le.firstOrEmpty("w:sdtContent").children)},"w:ins":de,"w:object":de,"w:smartTag":de,"w:drawing":de,"w:pict":function(Le){return de(Le).toExtra()},"v:roundrect":de,"v:shape":de,"v:textbox":de,"w:txbxContent":de,"wp:inline":me,"wp:anchor":me,"v:imagedata":rt,"v:group":de,"v:rect":de};return{readXmlElement:U,readXmlElements:R};function le(Le){var tt=ne(Le.firstOrEmpty("w:tblPr"));return R(Le.children).flatMap(ue).flatMap(function(ft){return tt.map(function(Et){return t.Table(ft,Et)})})}function ne(Le){return Z(Le).map(function(tt){return{styleId:tt.styleId,styleName:tt.name}})}function fe(Le){var tt=Le.firstOrEmpty("w:trPr"),ft=!!tt.first("w:tblHeader");return R(Le.children).map(function(Et){return t.TableRow(Et,{isHeader:ft})})}function Ne(Le){return R(Le.children).map(function(tt){var ft=Le.firstOrEmpty("w:tcPr"),Et=ft.firstOrEmpty("w:gridSpan").attributes["w:val"],xt=Et?parseInt(Et,10):1,Ot=t.TableCell(tt,{colSpan:xt});return Ot._vMerge=Ae(ft),Ot})}function Ae(Le){var tt=Le.first("w:vMerge");if(tt){var ft=tt.attributes["w:val"];return ft==="continue"||!ft}else return null}function ue(Le){var tt=e.any(Le,function(xt){return xt.type!==t.types.tableRow});if(tt)return m(Le,[i("unexpected non-row element in table, cell merging may be incorrect")]);var ft=e.any(Le,function(xt){return e.any(xt.children,function(Ot){return Ot.type!==t.types.tableCell})});if(ft)return m(Le,[i("unexpected non-cell element in table row, cell merging may be incorrect")]);var Et={};return Le.forEach(function(xt){var Ot=0;xt.children.forEach(function(dn){dn._vMerge&&Et[Ot]?Et[Ot].rowSpan++:(Et[Ot]=dn,dn._vMerge=!1),Ot+=dn.colSpan})}),Le.forEach(function(xt){xt.children=xt.children.filter(function(Ot){return!Ot._vMerge}),xt.children.forEach(function(Ot){delete Ot._vMerge})}),p(Le)}function me(Le){var tt=Le.getElementsByTagName("a:graphic").getElementsByTagName("a:graphicData").getElementsByTagName("pic:pic").getElementsByTagName("pic:blipFill").getElementsByTagName("a:blip");return y(tt.map(Se.bind(null,Le)))}function Se(Le,tt){var ft=Le.first("wp:docPr").attributes,Et=Re(ft.descr)?ft.title:ft.descr,xt=je(tt);return xt===null?f([i("Could not find image file for a:blip element")]):yt(xt,Et)}function Re(Le){return Le==null||/^\s*$/.test(Le)}function je(Le){var tt=Le.attributes["r:embed"],ft=Le.attributes["r:link"];if(tt)return at(tt);if(ft){var Et=A.findTargetByRelationshipId(ft);return{path:Et,read:O.read.bind(O,Et)}}else return null}function rt(Le){var tt=Le.attributes["r:id"];return tt?yt(at(tt),Le.attributes["o:title"]):f([i("A v:imagedata element without a relationship ID was ignored")])}function at(Le){var tt=o.uriToZipEntryName("word",A.findTargetByRelationshipId(Le));return{path:tt,read:T.read.bind(T,tt)}}function yt(Le,tt){var ft=k.findContentType(Le.path),Et=t.Image({readImage:Le.read,altText:tt,contentType:ft}),xt=h[ft]?[]:i("Image of type "+ft+" is unlikely to display in web browsers");return m(Et,xt)}function pt(Le,tt){return i(Le+" style with ID "+tt+" was referenced but not defined in the document")}}function l(w,x,S){var E=x.firstOrEmpty("w:ilvl").attributes["w:val"],A=x.firstOrEmpty("w:numId").attributes["w:val"];if(E!==void 0&&A!==void 0)return S.findLevel(A,E);if(w!=null){var k=S.findLevelByParagraphStyleId(w);if(k!=null)return k}return null}var h={"image/png":!0,"image/gif":!0,"image/jpeg":!0,"image/svg+xml":!0,"image/tiff":!0},c={"office-word:wrap":!0,"v:shadow":!0,"v:shapetype":!0,"w:annotationRef":!0,"w:bookmarkEnd":!0,"w:sectPr":!0,"w:proofErr":!0,"w:lastRenderedPageBreak":!0,"w:commentRangeStart":!0,"w:commentRangeEnd":!0,"w:del":!0,"w:footnoteRef":!0,"w:endnoteRef":!0,"w:pPr":!0,"w:rPr":!0,"w:tblPr":!0,"w:tblGrid":!0,"w:trPr":!0,"w:tcPr":!0};function f(w){return new g(null,null,w)}function d(){return new g(null)}function p(w){return new g(w)}function m(w,x){return new g(w,null,x)}function g(w,x,S){this.value=w||[],this.extra=x||[],this._result=new r({element:this.value,extra:x},S),this.messages=this._result.messages}g.prototype.toExtra=function(){return new g(null,v(this.extra,this.value),this.messages)},g.prototype.insertExtra=function(){var w=this.extra;return w&&w.length?new g(v(this.value,w),null,this.messages):this},g.prototype.map=function(w){var x=this._result.map(function(S){return w(S.element)});return new g(x.value,this.extra,x.messages)},g.prototype.flatMap=function(w){var x=this._result.flatMap(function(S){return w(S.element)._result});return new g(x.value.element,v(this.extra,x.value.extra),x.messages)},g.map=function(w,x,S){return new g(S(w.value,x.value),v(w.extra,x.extra),w.messages.concat(x.messages))};function y(w){var x=r.combine(e.pluck(w,"_result"));return new g(e.flatten(e.pluck(x.value,"element")),e.filter(e.flatten(e.pluck(x.value,"extra")),b),x.messages)}function v(w,x){return e.flatten([w,x])}function b(w){return w}return ck}var PF={},JH;function ADe(){if(JH)return PF;JH=1,PF.DocumentXmlReader=t;var n=k1(),e=Tp().Result;function t(r){var i=r.bodyReader;function a(o){var s=o.first("w:body");if(s==null)throw new Error("Could not find the body element: are you sure this is a docx file?");var u=i.readXmlElements(s.children).map(function(l){return new n.Document(l,{notes:r.notes,comments:r.comments})});return new e(u.value,u.messages)}return{convertXmlToDocument:a}}return PF}var z_={},eG;function kDe(){if(eG)return z_;eG=1,z_.readRelationships=n,z_.defaultValue=new e([]),z_.Relationships=e;function n(t){var r=[];return t.children.forEach(function(i){if(i.name==="relationships:Relationship"){var a={relationshipId:i.attributes.Id,target:i.attributes.Target,type:i.attributes.Type};r.push(a)}}),new e(r)}function e(t){var r={};t.forEach(function(a){r[a.relationshipId]=a.target});var i={};return t.forEach(function(a){i[a.type]||(i[a.type]=[]),i[a.type].push(a.target)}),{findTargetByRelationshipId:function(a){return r[a]},findTargetsByType:function(a){return i[a]||[]}}}return z_}var dk={},tG;function NDe(){if(tG)return dk;tG=1,dk.readContentTypesFromXml=e;var n={png:"png",gif:"gif",jpeg:"jpeg",jpg:"jpeg",tif:"tiff",tiff:"tiff",bmp:"bmp"};dk.defaultContentTypes=t({},{});function e(r){var i={},a={};return r.children.forEach(function(o){if(o.name==="content-types:Default"&&(i[o.attributes.Extension]=o.attributes.ContentType),o.name==="content-types:Override"){var s=o.attributes.PartName;s.charAt(0)==="/"&&(s=s.substring(1)),a[s]=o.attributes.ContentType}}),t(a,i)}function t(r,i){return{findContentType:function(a){var o=r[a];if(o)return o;var s=a.split("."),u=s[s.length-1];if(i.hasOwnProperty(u))return i[u];var l=n[u.toLowerCase()];return l?"image/"+l:null}}}return dk}var W_={},nG;function ODe(){if(nG)return W_;nG=1;var n=ba;W_.readNumberingXml=t,W_.Numbering=e,W_.defaultNumbering=new e({},{});function e(o,s,u){var l=n.flatten(n.values(s).map(function(d){return n.values(d.levels)})),h=n.indexBy(l.filter(function(d){return d.paragraphStyleId!=null}),"paragraphStyleId");function c(d,p){var m=o[d];if(m){var g=s[m.abstractNumId];if(g){if(g.numStyleLink==null)return s[m.abstractNumId].levels[p];var y=u.findNumberingStyleById(g.numStyleLink);return c(y.numId,p)}else return null}else return null}function f(d){return h[d]||null}return{findLevel:c,findLevelByParagraphStyleId:f}}function t(o,s){if(!s||!s.styles)throw new Error("styles is missing");var u=r(o),l=a(o);return new e(l,u,s.styles)}function r(o){var s={};return o.getElementsByTagName("w:abstractNum").forEach(function(u){var l=u.attributes["w:abstractNumId"];s[l]=i(u)}),s}function i(o){var s={};o.getElementsByTagName("w:lvl").forEach(function(l){var h=l.attributes["w:ilvl"],c=l.firstOrEmpty("w:numFmt").attributes["w:val"],f=l.firstOrEmpty("w:pStyle").attributes["w:val"];s[h]={isOrdered:c!=="bullet",level:h,paragraphStyleId:f}});var u=o.firstOrEmpty("w:numStyleLink").attributes["w:val"];return{levels:s,numStyleLink:u}}function a(o){var s={};return o.getElementsByTagName("w:num").forEach(function(u){var l=u.attributes["w:numId"],h=u.first("w:abstractNumId").attributes["w:val"];s[l]={abstractNumId:h}}),s}return W_}var j_={},rG;function RDe(){if(rG)return j_;rG=1,j_.readStylesXml=e,j_.Styles=n,j_.defaultStyles=new n({},{});function n(a,o,s,u){return{findParagraphStyleById:function(l){return a[l]},findCharacterStyleById:function(l){return o[l]},findTableStyleById:function(l){return s[l]},findNumberingStyleById:function(l){return u[l]}}}n.EMPTY=new n({},{},{},{});function e(a){var o={},s={},u={},l={},h={paragraph:o,character:s,table:u};return a.getElementsByTagName("w:style").forEach(function(c){var f=t(c);if(f.type==="numbering")l[f.styleId]=i(c);else{var d=h[f.type];d&&(d[f.styleId]=f)}}),new n(o,s,u,l)}function t(a){var o=a.attributes["w:type"],s=a.attributes["w:styleId"],u=r(a);return{type:o,styleId:s,name:u}}function r(a){var o=a.first("w:name");return o?o.attributes["w:val"]:null}function i(a){var o=a.firstOrEmpty("w:pPr").firstOrEmpty("w:numPr").firstOrEmpty("w:numId").attributes["w:val"];return{numId:o}}return j_}var Vb={},iG;function IDe(){if(iG)return Vb;iG=1;var n=k1(),e=Tp().Result;Vb.createFootnotesReader=t.bind(Vb,"footnote"),Vb.createEndnotesReader=t.bind(Vb,"endnote");function t(r,i){function a(u){return e.combine(u.getElementsByTagName("w:"+r).filter(o).map(s))}function o(u){var l=u.attributes["w:type"];return l!=="continuationSeparator"&&l!=="separator"}function s(u){var l=u.attributes["w:id"];return i.readXmlElements(u.children).map(function(h){return n.Note({noteType:r,noteId:l,body:h})})}return a}return Vb}var LF={},aG;function FDe(){if(aG)return LF;aG=1;var n=k1(),e=Tp().Result;function t(r){function i(o){return e.combine(o.getElementsByTagName("w:comment").map(a))}function a(o){var s=o.attributes["w:id"];function u(l){return(o.attributes[l]||"").trim()||null}return r.readXmlElements(o.children).map(function(l){return n.comment({commentId:s,body:l,authorName:u("w:author"),authorInitials:u("w:initials")})})}return i}return LF.createCommentsReader=t,LF}var MF={},sG;function PDe(){if(sG)return MF;sG=1;var n=cy();MF.Files=e;function e(){function t(r){return n.reject(new Error("could not open external image: '"+r+`'
cannot open linked files from a web browser`))}return{read:t}}return MF}var oG;function LDe(){if(oG)return ik;oG=1,ik.read=p,ik._findPartPaths=m;var n=cy(),e=k1(),t=Tp().Result,r=fre(),i=SDe().readXmlFromZipFile,a=DDe().createBodyReader,o=ADe().DocumentXmlReader,s=kDe(),u=NDe(),l=ODe(),h=RDe(),c=IDe(),f=FDe(),d=PDe().Files;function p(k,T){return T=T||{},n.props({contentTypes:x(k),partPaths:m(k),docxFile:k,files:T.path?d.relativeToFile(T.path):new d(null)}).also(function(O){return{styles:E(k,O.partPaths.styles)}}).also(function(O){return{numbering:S(k,O.partPaths.numbering,O.styles)}}).also(function(O){return{footnotes:b(O.partPaths.footnotes,O,function(F,I){return I?c.createFootnotesReader(F)(I):new t([])}),endnotes:b(O.partPaths.endnotes,O,function(F,I){return I?c.createEndnotesReader(F)(I):new t([])}),comments:b(O.partPaths.comments,O,function(F,I){return I?f.createCommentsReader(F)(I):new t([])})}}).also(function(O){return{notes:O.footnotes.flatMap(function(F){return O.endnotes.map(function(I){return new e.Notes(F.concat(I))})})}}).then(function(O){return b(O.partPaths.mainDocument,O,function(F,I){return O.notes.flatMap(function(R){return O.comments.flatMap(function(U){var B=new o({bodyReader:F,notes:R,comments:U});return B.convertXmlToDocument(I)})})})})}function m(k){return A(k).then(function(T){var O=g({docxFile:k,relationships:T,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",basePath:"",fallbackPath:"word/document.xml"});if(!k.exists(O))throw new Error("Could not find main document part. Are you sure this is a valid .docx file?");return v({filename:w(O),readElement:s.readRelationships,defaultValue:s.defaultValue})(k).then(function(F){function I(R){return g({docxFile:k,relationships:F,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+R,basePath:r.splitPath(O).dirname,fallbackPath:"word/"+R+".xml"})}return{mainDocument:O,comments:I("comments"),endnotes:I("endnotes"),footnotes:I("footnotes"),numbering:I("numbering"),styles:I("styles")}})})}function g(k){var T=k.docxFile,O=k.relationships,F=k.relationshipType,I=k.basePath,R=k.fallbackPath,U=O.findTargetsByType(F),B=U.map(function(Y){return y(r.joinPath(I,Y),"/")}),W=B.filter(function(Y){return T.exists(Y)});return W.length===0?R:W[0]}function y(k,T){return k.substring(0,T.length)===T?k.substring(T.length):k}function v(k){return function(T){return i(T,k.filename).then(function(O){return O?k.readElement(O):k.defaultValue})}}function b(k,T,O){var F=v({filename:w(k),readElement:s.readRelationships,defaultValue:s.defaultValue});return F(T.docxFile).then(function(I){var R=new a({relationships:I,contentTypes:T.contentTypes,docxFile:T.docxFile,numbering:T.numbering,styles:T.styles,files:T.files});return i(T.docxFile,k).then(function(U){return O(R,U)})})}function w(k){var T=r.splitPath(k);return r.joinPath(T.dirname,"_rels",T.basename+".rels")}var x=v({filename:"[Content_Types].xml",readElement:u.readContentTypesFromXml,defaultValue:u.defaultContentTypes});function S(k,T,O){return v({filename:T,readElement:function(F){return l.readNumberingXml(F,{styles:O})},defaultValue:l.defaultNumbering})(k)}function E(k,T){return v({filename:T,readElement:h.readStylesXml,defaultValue:h.defaultStyles})(k)}var A=v({filename:"_rels/.rels",readElement:s.readRelationships,defaultValue:s.defaultValue});return ik}var pk={},uG;function MDe(){if(uG)return pk;uG=1;var n=ba,e=cy(),t=u7();pk.writeStyleMap=o,pk.readStyleMap=h;var r="http://schemas.zwobble.org/mammoth/style-map",i="mammoth/style-map",a="/"+i;function o(c,f){return c.write(i,f),s(c).then(function(){return u(c)})}function s(c){var f="word/_rels/document.xml.rels",d="http://schemas.openxmlformats.org/package/2006/relationships",p="{"+d+"}Relationship";return c.read(f,"utf8").then(t.readString).then(function(m){var g=m.children;l(g,p,"Id",{Id:"rMammothStyleMap",Type:r,Target:a});var y={"":d};return c.write(f,t.writeString(m,y))})}function u(c){var f="[Content_Types].xml",d="http://schemas.openxmlformats.org/package/2006/content-types",p="{"+d+"}Override";return c.read(f,"utf8").then(t.readString).then(function(m){var g=m.children;l(g,p,"PartName",{PartName:a,ContentType:"text/prs.mammoth.style-map"});var y={"":d};return c.write(f,t.writeString(m,y))})}function l(c,f,d,p){var m=n.find(c,function(g){return g.name===f&&g.attributes[d]===p[d]});m?m.attributes=p:c.push(t.element(f,p))}function h(c){return c.exists(i)?c.read(i,"utf8"):e.resolve(null)}return pk}var gk={},rv={},Sd={},Fg={},lG;function yre(){if(lG)return Fg;lG=1;var n=lI();function e(u,l,h){return r(n.element(u,l,{fresh:!1}),h)}function t(u,l,h){var c=n.element(u,l,{fresh:!0});return r(c,h)}function r(u,l){return{type:"element",tag:u,children:l||[]}}function i(u){return{type:"text",value:u}}var a={type:"forceWrite"};Fg.freshElement=t,Fg.nonFreshElement=e,Fg.elementWithTag=r,Fg.text=i,Fg.forceWrite=a;var o={br:!0,hr:!0,img:!0,input:!0};function s(u){return u.children.length===0&&o[u.tag.tagName]}return Fg.isVoidElement=s,Fg}var UF,cG;function UDe(){if(cG)return UF;cG=1;var n=ba,e=yre();function t(m){return r(l(m))}function r(m){var g=[];return m.map(i).forEach(function(y){u(g,y)}),g}function i(m){return a[m.type](m)}var a={element:o,text:s,forceWrite:s};function o(m){return e.elementWithTag(m.tag,r(m.children))}function s(m){return m}function u(m,g){var y=m[m.length-1];g.type==="element"&&!g.tag.fresh&&y&&y.type==="element"&&g.tag.matchesElement(y.tag)?(g.tag.separator&&u(y.children,e.text(g.tag.separator)),g.children.forEach(function(v){u(y.children,v)})):m.push(g)}function l(m){return h(m,function(g){return c[g.type](g)})}function h(m,g){return n.flatten(n.map(m,g),!0)}var c={element:d,text:p,forceWrite:f};function f(m){return[m]}function d(m){var g=l(m.children);return g.length===0&&!e.isVoidElement(m)?[]:[e.elementWithTag(m.tag,g)]}function p(m){return m.value.length===0?[]:[m]}return UF=t,UF}var hG;function uI(){if(hG)return Sd;hG=1;var n=yre();Sd.freshElement=n.freshElement,Sd.nonFreshElement=n.nonFreshElement,Sd.elementWithTag=n.elementWithTag,Sd.text=n.text,Sd.forceWrite=n.forceWrite,Sd.simplify=UDe();function e(o,s){s.forEach(function(u){t(o,u)})}function t(o,s){r[s.type](o,s)}var r={element:i,text:a,forceWrite:function(){}};function i(o,s){n.isVoidElement(s)?o.selfClosing(s.tag.tagName,s.tag.attributes):(o.open(s.tag.tagName,s.tag.attributes),e(o,s.children),o.close(s.tag.tagName))}function a(o,s){o.text(s.value)}return Sd.write=e,Sd}var fG;function lI(){if(fG)return rv;fG=1;var n=ba,e=uI();rv.topLevelElement=t,rv.elements=r,rv.element=a;function t(s,u){return r([a(s,u,{fresh:!0})])}function r(s){return new i(s.map(function(u){return n.isString(u)?a(u):u}))}function i(s){this._elements=s}i.prototype.wrap=function(u){for(var l=u(),h=this._elements.length-1;h>=0;h--)l=this._elements[h].wrapNodes(l);return l};function a(s,u,l){return l=l||{},new o(s,u,l)}function o(s,u,l){var h={};n.isArray(s)?(s.forEach(function(c){h[c]=!0}),s=s[0]):h[s]=!0,this.tagName=s,this.tagNames=h,this.attributes=u||{},this.fresh=l.fresh,this.separator=l.separator}return o.prototype.matchesElement=function(s){return this.tagNames[s.tagName]&&n.isEqual(this.attributes||{},s.attributes||{})},o.prototype.wrap=function(u){return this.wrapNodes(u())},o.prototype.wrapNodes=function(u){return[e.elementWithTag(this,u)]},rv.empty=r([]),rv.ignore={wrap:function(){return[]}},rv}var BF={},dG;function vre(){return dG||(dG=1,function(n){var e=ba,t=cy(),r=uI();n.imgElement=i;function i(a){return function(o,s){return t.when(a(o)).then(function(u){var l={};return o.altText&&(l.alt=o.altText),e.extend(l,u),[r.freshElement("img",l)]})}}n.inline=n.imgElement,n.dataUri=i(function(a){return a.readAsBase64String().then(function(o){return{src:"data:"+a.contentType+";base64,"+o}})})}(BF)),BF}var zF={},WF={},pG;function BDe(){if(pG)return WF;pG=1;var n=ba;WF.writer=e;function e(s){return s=s||{},s.prettyPrint?r():i()}var t={div:!0,p:!0,ul:!0,li:!0};function r(){var s=0,u="  ",l=[],h=!0,c=!1,f=i();function d(x,S){t[x]&&b(),l.push(x),f.open(x,S),t[x]&&s++,h=!1}function p(x){t[x]&&(s--,b()),l.pop(),f.close(x)}function m(x){v();var S=w()?x:x.replace(`
`,`
`+u);f.text(S)}function g(x,S){b(),f.selfClosing(x,S)}function y(){return l.length===0||t[l[l.length-1]]}function v(){c||(b(),c=!0)}function b(){if(c=!1,!h&&y()&&!w()){f._append(`
`);for(var x=0;x<s;x++)f._append(u)}}function w(){return n.some(l,function(x){return x==="pre"})}return{asString:f.asString,open:d,close:p,text:m,selfClosing:g}}function i(){var s=[];function u(m,g){var y=c(g);s.push("<"+m+y+">")}function l(m){s.push("</"+m+">")}function h(m,g){var y=c(g);s.push("<"+m+y+" />")}function c(m){return n.map(m,function(g,y){return" "+y+'="'+o(g)+'"'}).join("")}function f(m){s.push(a(m))}function d(m){s.push(m)}function p(){return s.join("")}return{asString:p,open:u,close:l,text:f,selfClosing:h,_append:d}}function a(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(s){return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return WF}var jF={},gG;function zDe(){if(gG)return jF;gG=1;var n=ba;function e(c){return t(c,c)}function t(c,f){return function(){return{start:c,end:f}}}function r(c){var f=c.href||"";return f?{start:"[",end:"]("+f+")",anchorPosition:"before"}:{}}function i(c){var f=c.src||"",d=c.alt||"";return f||d?{start:"!["+d+"]("+f+")"}:{}}function a(c){return function(f,d){return{start:d?`
`:"",end:d?"":`
`,list:{isOrdered:c.isOrdered,indent:d?d.indent+1:0,count:0}}}}function o(c,f,d){f=f||{indent:0,isOrdered:!1,count:0},f.count++,d.hasClosed=!1;var p=f.isOrdered?f.count+".":"-",m=u("	",f.indent)+p+" ";return{start:m,end:function(){if(!d.hasClosed)return d.hasClosed=!0,`
`}}}var s={p:t("",`

`),br:t("",`  
`),ul:a({isOrdered:!1}),ol:a({isOrdered:!0}),li:o,strong:e("__"),em:e("*"),a:r,img:i};(function(){for(var c=1;c<=6;c++)s["h"+c]=t(u("#",c)+" ",`

`)})();function u(c,f){return new Array(f+1).join(c)}function l(){var c=[],f=[],d=null,p={};function m(x,S){S=S||{};var E=s[x]||function(){return{}},A=E(S,d,p);f.push({end:A.end,list:d}),A.list&&(d=A.list);var k=A.anchorPosition==="before";k&&g(S),c.push(A.start||""),k||g(S)}function g(x){x.id&&c.push('<a id="'+x.id+'"></a>')}function y(x){var S=f.pop();d=S.list;var E=n.isFunction(S.end)?S.end():S.end;c.push(E||"")}function v(x,S){m(x,S),y()}function b(x){c.push(h(x))}function w(){return c.join("")}return{asString:w,open:m,close:y,text:b,selfClosing:v}}jF.writer=l;function h(c){return c.replace(/\\/g,"\\\\").replace(/([\`\*_\{\}\[\]\(\)\#\+\-\.\!])/g,"\\$1")}return jF}var mG;function WDe(){if(mG)return zF;mG=1;var n=BDe(),e=zDe();zF.writer=t;function t(r){return r=r||{},r.outputFormat==="markdown"?e.writer():n.writer(r)}return zF}var yG;function jDe(){if(yG)return gk;yG=1;var n=ba,e=cy(),t=k1(),r=lI(),i=Tp(),a=vre(),o=uI(),s=WDe();gk.DocumentConverter=u;function u(g){return{convertToHtml:function(y){var v=n.indexBy(y.type===t.types.document?y.comments:[],"commentId"),b=new l(g,v);return b.convertToHtml(y)}}}function l(g,y){var v=1,b=[],w=[];g=n.extend({ignoreEmptyParagraphs:!0},g);var x=g.idPrefix===void 0?"":g.idPrefix,S=g.ignoreEmptyParagraphs,E=r.topLevelElement("p"),A=g.styleMap||[];function k(G){var de=[],ye=O(G,de,{}),le=[];p(ye,function(fe){fe.type==="deferred"&&le.push(fe)});var ne={};return e.mapSeries(le,function(fe){return fe.value().then(function(Ne){ne[fe.id]=Ne})}).then(function(){function fe(Ae){return d(Ae,function(ue){return ue.type==="deferred"?ne[ue.id]:ue.children?[n.extend({},ue,{children:fe(ue.children)})]:[ue]})}var Ne=s.writer({prettyPrint:g.prettyPrint,outputFormat:g.outputFormat});return o.write(Ne,o.simplify(fe(ye))),new i.Result(Ne.asString(),de)})}function T(G,de,ye){return d(G,function(le){return O(le,de,ye)})}function O(G,de,ye){if(!ye)throw new Error("options not set");var le=Ee[G.type];return le?le(G,de,ye):[]}function F(G,de,ye){return I(G,de).wrap(function(){var le=T(G.children,de,ye);return S?le:[o.forceWrite].concat(le)})}function I(G,de){var ye=W(G);return ye?ye.to:(G.styleId&&de.push(f("paragraph",G)),E)}function R(G,de,ye){var le=function(){return T(G.children,de,ye)},ne=[];if(G.highlight!==null){var fe=B({type:"highlight",color:G.highlight});fe&&ne.push(fe)}G.isSmallCaps&&ne.push(U("smallCaps")),G.isAllCaps&&ne.push(U("allCaps")),G.isStrikethrough&&ne.push(U("strikethrough","s")),G.isUnderline&&ne.push(U("underline")),G.verticalAlignment===t.verticalAlignment.subscript&&ne.push(r.element("sub",{},{fresh:!1})),G.verticalAlignment===t.verticalAlignment.superscript&&ne.push(r.element("sup",{},{fresh:!1})),G.isItalic&&ne.push(U("italic","em")),G.isBold&&ne.push(U("bold","strong"));var Ne=r.empty,Ae=W(G);return Ae?Ne=Ae.to:G.styleId&&de.push(f("run",G)),ne.push(Ne),ne.forEach(function(ue){le=ue.wrap.bind(ue,le)}),le()}function U(G,de){var ye=B({type:G});return ye||(de?r.element(de,{},{fresh:!1}):r.empty)}function B(G,de){var ye=W(G);return ye?ye.to:de}function W(G){for(var de=0;de<A.length;de++)if(A[de].from.matches(G))return A[de]}function Y(G){return function(de,ye){return e.attempt(function(){return G(de,ye)}).caught(function(le){return ye.push(i.error(le)),[]})}}function z(G){return M(G.noteType,G.noteId)}function j(G){return q(G.noteType,G.noteId)}function M(G,de){return H(G+"-"+de)}function q(G,de){return H(G+"-ref-"+de)}function H(G){return x+G}var K=r.elements([r.element("table",{},{fresh:!0})]);function Z(G,de,ye){return B(G,K).wrap(function(){return J(G,de,ye)})}function J(G,de,ye){var le=n.findIndex(G.children,function(Ae){return!Ae.type===t.types.tableRow||!Ae.isHeader});le===-1&&(le=G.children.length);var ne;if(le===0)ne=T(G.children,de,n.extend({},ye,{isTableHeader:!1}));else{var fe=T(G.children.slice(0,le),de,n.extend({},ye,{isTableHeader:!0})),Ne=T(G.children.slice(le),de,n.extend({},ye,{isTableHeader:!1}));ne=[o.freshElement("thead",{},fe),o.freshElement("tbody",{},Ne)]}return[o.forceWrite].concat(ne)}function X(G,de,ye){var le=T(G.children,de,ye);return[o.freshElement("tr",{},[o.forceWrite].concat(le))]}function ae(G,de,ye){var le=ye.isTableHeader?"th":"td",ne=T(G.children,de,ye),fe={};return G.colSpan!==1&&(fe.colspan=G.colSpan.toString()),G.rowSpan!==1&&(fe.rowspan=G.rowSpan.toString()),[o.freshElement(le,fe,[o.forceWrite].concat(ne))]}function ie(G,de,ye){return B(G,r.ignore).wrap(function(){var le=y[G.commentId],ne=w.length+1,fe="["+m(le)+ne+"]";return w.push({label:fe,comment:le}),[o.freshElement("a",{href:"#"+M("comment",G.commentId),id:q("comment",G.commentId)},[o.text(fe)])]})}function ce(G,de,ye){var le=G.label,ne=G.comment,fe=T(ne.body,de,ye).concat([o.nonFreshElement("p",{},[o.text(" "),o.freshElement("a",{href:"#"+q("comment",ne.commentId)},[o.text("")])])]);return[o.freshElement("dt",{id:M("comment",ne.commentId)},[o.text("Comment "+le)]),o.freshElement("dd",{},fe)]}function ge(G,de,ye){return Ce(G).wrap(function(){return[]})}function Ce(G){var de=W(G);return de?de.to:G.breakType==="line"?r.topLevelElement("br"):r.empty}var Ee={document:function(G,de,ye){var le=T(G.children,de,ye),ne=b.map(function(Ne){return G.notes.resolve(Ne)}),fe=T(ne,de,ye);return le.concat([o.freshElement("ol",{},fe),o.freshElement("dl",{},d(w,function(Ne){return ce(Ne,de,ye)}))])},paragraph:F,run:R,text:function(G,de,ye){return[o.text(G.value)]},tab:function(G,de,ye){return[o.text("	")]},hyperlink:function(G,de,ye){var le=G.anchor?"#"+H(G.anchor):G.href,ne={href:le};G.targetFrame!=null&&(ne.target=G.targetFrame);var fe=T(G.children,de,ye);return[o.nonFreshElement("a",ne,fe)]},checkbox:function(G){var de={type:"checkbox"};return G.checked&&(de.checked="checked"),[o.freshElement("input",de)]},bookmarkStart:function(G,de,ye){var le=o.freshElement("a",{id:H(G.name)},[o.forceWrite]);return[le]},noteReference:function(G,de,ye){b.push(G);var le=o.freshElement("a",{href:"#"+z(G),id:j(G)},[o.text("["+v+++"]")]);return[o.freshElement("sup",{},[le])]},note:function(G,de,ye){var le=T(G.body,de,ye),ne=o.elementWithTag(r.element("p",{},{fresh:!1}),[o.text(" "),o.freshElement("a",{href:"#"+j(G)},[o.text("")])]),fe=le.concat([ne]);return o.freshElement("li",{id:z(G)},fe)},commentReference:ie,comment:ce,image:c(Y(g.convertImage||a.dataUri)),table:Z,tableRow:X,tableCell:ae,break:ge};return{convertToHtml:k}}var h=1;function c(g){return function(y,v,b){return[{type:"deferred",id:h++,value:function(){return g(y,v,b)}}]}}function f(g,y){return i.warning("Unrecognised "+g+" style: '"+y.styleName+"' (Style ID: "+y.styleId+")")}function d(g,y){return n.flatten(g.map(y),!0)}function p(g,y){g.forEach(function(v){y(v),v.children&&p(v.children,y)})}var m=gk.commentAuthorLabel=function(y){return y.authorInitials||""};return gk}var $F={},vG;function $De(){if(vG)return $F;vG=1;var n=k1();function e(t){if(t.type==="text")return t.value;if(t.type===n.types.tab)return"	";var r=t.type==="paragraph"?`

`:"";return(t.children||[]).map(e).join("")+r}return $F.convertElementToRawText=e,$F}var $_={},Uc={},qF={},VF={exports:{}},bG;function qDe(){if(bG)return VF.exports;bG=1;var n=VF.exports=function(e,t){this._tokens=e,this._startIndex=t||0};return n.prototype.head=function(){return this._tokens[this._startIndex]},n.prototype.tail=function(e){return new n(this._tokens,this._startIndex+1)},n.prototype.toArray=function(){return this._tokens.slice(this._startIndex)},n.prototype.end=function(){return this._tokens[this._tokens.length-1]},n.prototype.to=function(e){var t=this.head().source,r=e.head()||e.end();return t.to(r.source)},VF.exports}var wG;function VDe(){if(wG)return qF;wG=1;var n=qDe();return qF.Parser=function(e){var t=function(r,i){return r(new n(i))};return{parseTokens:t}},qF}var HF={},GF={},xG;function HDe(){return xG||(xG=1,function(n){n.none=Object.create({value:function(){throw new Error("Called value on none")},isNone:function(){return!0},isSome:function(){return!1},map:function(){return n.none},flatMap:function(){return n.none},filter:function(){return n.none},toArray:function(){return[]},orElse:e,valueOrElse:e});function e(r){return typeof r=="function"?r():r}n.some=function(r){return new t(r)};var t=function(r){this._value=r};t.prototype.value=function(){return this._value},t.prototype.isNone=function(){return!1},t.prototype.isSome=function(){return!0},t.prototype.map=function(r){return new t(r(this._value))},t.prototype.flatMap=function(r){return r(this._value)},t.prototype.filter=function(r){return r(this._value)?this:n.none},t.prototype.toArray=function(){return[this._value]},t.prototype.orElse=function(r){return this},t.prototype.valueOrElse=function(r){return this._value},n.isOption=function(r){return r===n.none||r instanceof t},n.fromNullable=function(r){return r==null?n.none:new t(r)}}(GF)),GF}var XF,_G;function l7(){if(_G)return XF;_G=1,XF={failure:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new n({status:"failure",remaining:t,errors:e})},error:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new n({status:"error",remaining:t,errors:e})},success:function(e,t,r){return new n({status:"success",value:e,source:r,remaining:t,errors:[]})},cut:function(e){return new n({status:"cut",remaining:e,errors:[]})}};var n=function(e){this._value=e.value,this._status=e.status,this._hasValue=e.value!==void 0,this._remaining=e.remaining,this._source=e.source,this._errors=e.errors};return n.prototype.map=function(e){return this._hasValue?new n({value:e(this._value,this._source),status:this._status,remaining:this._remaining,source:this._source,errors:this._errors}):this},n.prototype.changeRemaining=function(e){return new n({value:this._value,status:this._status,remaining:e,source:this._source,errors:this._errors})},n.prototype.isSuccess=function(){return this._status==="success"||this._status==="cut"},n.prototype.isFailure=function(){return this._status==="failure"},n.prototype.isError=function(){return this._status==="error"},n.prototype.isCut=function(){return this._status==="cut"},n.prototype.value=function(){return this._value},n.prototype.remaining=function(){return this._remaining},n.prototype.source=function(){return this._source},n.prototype.errors=function(){return this._errors},XF}var KF={},SG;function bre(){if(SG)return KF;SG=1,KF.error=function(e){return new n(e)};var n=function(e){this.expected=e.expected,this.actual=e.actual,this._location=e.location};return n.prototype.describe=function(){var e=this._location?this._location.describe()+`:
`:"";return e+"Expected "+this.expected+`
but got `+this.actual},n.prototype.lineNumber=function(){return this._location.lineNumber()},n.prototype.characterNumber=function(){return this._location.characterNumber()},KF}var YF={},CG;function GDe(){if(CG)return YF;CG=1,YF.fromArray=function(e){var t=0,r=function(){return t<e.length};return new n({hasNext:r,next:function(){if(r())return e[t++];throw new Error("No more elements")}})};var n=function(e){this._iterator=e};return n.prototype.map=function(e){var t=this._iterator;return new n({hasNext:function(){return t.hasNext()},next:function(){return e(t.next())}})},n.prototype.filter=function(e){var t=this._iterator,r=!1,i=!1,a,o=function(){if(!r)for(r=!0,i=!1;t.hasNext()&&!i;)a=t.next(),i=e(a)};return new n({hasNext:function(){return o(),i},next:function(){o();var s=a;return r=!1,s}})},n.prototype.first=function(){var e=this._iterator;return this._iterator.hasNext()?e.next():null},n.prototype.toArray=function(){for(var e=[];this._iterator.hasNext();)e.push(this._iterator.next());return e},YF}var EG;function wre(){return EG||(EG=1,function(n){var e=ba,t=HDe(),r=l7(),i=bre(),a=GDe();n.token=function(f,d){var p=d!==void 0;return function(m){var g=m.head();if(g&&g.name===f&&(!p||g.value===d))return r.success(g.value,m.tail(),g.source);var y=h({name:f,value:d});return c(m,y)}},n.tokenOfType=function(f){return n.token(f)},n.firstOf=function(f,d){return e.isArray(d)||(d=Array.prototype.slice.call(arguments,1)),function(p){return a.fromArray(d).map(function(m){return m(p)}).filter(function(m){return m.isSuccess()||m.isError()}).first()||c(p,f)}},n.then=function(f,d){return function(p){var m=f(p);return m.map||console.log(m),m.map(d)}},n.sequence=function(){var f=Array.prototype.slice.call(arguments,0),d=function(m){var g=e.foldl(f,function(v,b){var w=v.result,x=v.hasCut;if(!w.isSuccess())return{result:w,hasCut:x};var S=b(w.remaining());if(S.isCut())return{result:w,hasCut:!0};if(S.isSuccess()){var E;b.isCaptured?E=w.value().withValue(b,S.value()):E=w.value();var A=S.remaining(),k=m.to(A);return{result:r.success(E,A,k),hasCut:x}}else return x?{result:r.error(S.errors(),S.remaining()),hasCut:x}:{result:S,hasCut:x}},{result:r.success(new o,m),hasCut:!1}).result,y=m.to(g.remaining());return g.map(function(v){return v.withValue(n.sequence.source,y)})};d.head=function(){var m=e.find(f,p);return n.then(d,n.sequence.extract(m))},d.map=function(m){return n.then(d,function(g){return m.apply(this,g.toArray())})};function p(m){return m.isCaptured}return d};var o=function(f,d){this._values=f||{},this._valuesArray=d||[]};o.prototype.withValue=function(f,d){if(f.captureName&&f.captureName in this._values)throw new Error('Cannot add second value for capture "'+f.captureName+'"');var p=e.clone(this._values);p[f.captureName]=d;var m=this._valuesArray.concat([d]);return new o(p,m)},o.prototype.get=function(f){if(f.captureName in this._values)return this._values[f.captureName];throw new Error('No value for capture "'+f.captureName+'"')},o.prototype.toArray=function(){return this._valuesArray},n.sequence.capture=function(f,d){var p=function(){return f.apply(this,arguments)};return p.captureName=d,p.isCaptured=!0,p},n.sequence.extract=function(f){return function(d){return d.get(f)}},n.sequence.applyValues=function(f){var d=Array.prototype.slice.call(arguments,1);return function(p){var m=d.map(function(g){return p.get(g)});return f.apply(this,m)}},n.sequence.source={captureName:"source"},n.sequence.cut=function(){return function(f){return r.cut(f)}},n.optional=function(f){return function(d){var p=f(d);return p.isSuccess()?p.map(t.some):p.isFailure()?r.success(t.none,d):p}},n.zeroOrMoreWithSeparator=function(f,d){return l(f,d,!1)},n.oneOrMoreWithSeparator=function(f,d){return l(f,d,!0)};var s=n.zeroOrMore=function(f){return function(d){for(var p=[],m;(m=f(d))&&m.isSuccess();)d=m.remaining(),p.push(m.value());return m.isError()?m:r.success(p,d)}};n.oneOrMore=function(f){return n.oneOrMoreWithSeparator(f,u)};function u(f){return r.success(null,f)}var l=function(f,d,p){return function(m){var g=f(m);if(g.isSuccess()){var y=n.sequence.capture(f,"main"),v=s(n.then(n.sequence(d,y),n.sequence.extract(y))),b=v(g.remaining());return r.success([g.value()].concat(b.value()),b.remaining())}else return p||g.isError()?g:r.success([],m)}};n.leftAssociative=function(f,d,p){var m;p?m=[{func:p,rule:d}]:m=d,m=m.map(function(y){return n.then(y.rule,function(v){return function(b,w){return y.func(b,v,w)}})});var g=n.firstOf.apply(null,["rules"].concat(m));return function(y){var v=y,b=f(y);if(!b.isSuccess())return b;for(var w=g(b.remaining());w.isSuccess();){var x=w.remaining(),S=v.to(w.remaining()),E=w.value();b=r.success(E(b.value(),S),x,S),w=g(b.remaining())}return w.isError()?w:b}},n.leftAssociative.firstOf=function(){return Array.prototype.slice.call(arguments,0)},n.nonConsuming=function(f){return function(d){return f(d).changeRemaining(d)}};var h=function(f){return f.value?f.name+' "'+f.value+'"':f.name};function c(f,d){var p,m=f.head();return m?p=i.error({expected:d,actual:h(m),location:m.source}):p=i.error({expected:d,actual:"end of tokens"}),r.failure([p],f)}}(HF)),HF}var QF={exports:{}},TG;function xre(){if(TG)return QF.exports;TG=1,QF.exports=function(e,t){var r={asString:function(){return e},range:function(i,a){return new n(e,t,i,a)}};return r};var n=function(e,t,r,i){this._string=e,this._description=t,this._startIndex=r,this._endIndex=i};return n.prototype.to=function(e){return new n(this._string,this._description,this._startIndex,e._endIndex)},n.prototype.describe=function(){var e=this._position(),t=this._description?this._description+`
`:"";return t+"Line number: "+e.lineNumber+`
Character number: `+e.characterNumber},n.prototype.lineNumber=function(){return this._position().lineNumber},n.prototype.characterNumber=function(){return this._position().characterNumber},n.prototype._position=function(){for(var e=this,t=0,r=function(){return e._string.indexOf(`
`,t)},i=1;r()!==-1&&r()<this._startIndex;)t=r()+1,i+=1;var a=this._startIndex-t+1;return{lineNumber:i,characterNumber:a}},QF.exports}var ZF,DG;function _re(){return DG||(DG=1,ZF=function(n,e,t){this.name=n,this.value=e,t&&(this.source=t)}),ZF}var JF={},AG;function XDe(){return AG||(AG=1,function(n){var e=wre(),t=l7();n.parser=function(a,o,s){var u={rule:f,leftAssociative:d,rightAssociative:p},l=new r(s.map(c)),h=e.firstOf(a,o);function c(y){return{name:y.name,rule:i(y.ruleBuilder.bind(null,u))}}function f(){return m(l)}function d(y){return m(l.untilExclusive(y))}function p(y){return m(l.untilInclusive(y))}function m(y){return g.bind(null,y)}function g(y,v){var b=h(v);return b.isSuccess()?y.apply(b):b}return u};function r(a){function o(c){return new r(a.slice(0,u().indexOf(c)))}function s(c){return new r(a.slice(0,u().indexOf(c)+1))}function u(){return a.map(function(c){return c.name})}function l(c){for(var f,d;;)if(f=h(c.remaining()),f.isSuccess())d=c.source().to(f.source()),c=t.success(f.value()(c.value(),d),f.remaining(),d);else return f.isFailure()?c:f}function h(c){return e.firstOf("infix",a.map(function(f){return f.rule}))(c)}return{apply:l,untilExclusive:o,untilInclusive:s}}n.infix=function(a,o){function s(u){return n.infix(a,function(l){var h=o(l);return function(c){var f=h(c);return f.map(function(d){return function(p,m){return u(p,d,m)}})}})}return{name:a,ruleBuilder:o,map:s}};var i=function(a){var o;return function(s){return o||(o=a()),o(s)}}}(JF)),JF}var eP={},kG;function KDe(){if(kG)return eP;kG=1;var n=_re(),e=xre();eP.RegexTokeniser=t;function t(r){r=r.map(function(s){return{name:s.name,regex:new RegExp(s.regex.source,"g")}});function i(s,u){for(var l=new e(s,u),h=0,c=[];h<s.length;){var f=a(s,h,l);h=f.endIndex,c.push(f.token)}return c.push(o(s,l)),c}function a(s,u,l){for(var h=0;h<r.length;h++){var c=r[h].regex;c.lastIndex=u;var f=c.exec(s);if(f){var p=u+f[0].length;if(f.index===u&&p>u){var d=f[1],m=new n(r[h].name,d,l.range(u,p));return{token:m,endIndex:p}}}}var p=u+1,m=new n("unrecognisedCharacter",s.substring(u,p),l.range(u,p));return{token:m,endIndex:p}}function o(s,u){return new n("end",null,u.range(s.length,s.length))}return{tokenise:i}}return eP}var NG;function Sre(){return NG||(NG=1,Uc.Parser=VDe().Parser,Uc.rules=wre(),Uc.errors=bre(),Uc.results=l7(),Uc.StringSource=xre(),Uc.Token=_re(),Uc.bottomUp=XDe(),Uc.RegexTokeniser=KDe().RegexTokeniser,Uc.rule=function(n){var e;return function(t){return e||(e=n()),e(t)}}),Uc}var ds={},OG;function YDe(){if(OG)return ds;OG=1,ds.paragraph=n,ds.run=e,ds.table=t,ds.bold=new i("bold"),ds.italic=new i("italic"),ds.underline=new i("underline"),ds.strikethrough=new i("strikethrough"),ds.allCaps=new i("allCaps"),ds.smallCaps=new i("smallCaps"),ds.highlight=r,ds.commentReference=new i("commentReference"),ds.lineBreak=new o({breakType:"line"}),ds.pageBreak=new o({breakType:"page"}),ds.columnBreak=new o({breakType:"column"}),ds.equalTo=u,ds.startsWith=l;function n(f){return new i("paragraph",f)}function e(f){return new i("run",f)}function t(f){return new i("table",f)}function r(f){return new a(f)}function i(f,d){d=d||{},this._elementType=f,this._styleId=d.styleId,this._styleName=d.styleName,d.list&&(this._listIndex=d.list.levelIndex,this._listIsOrdered=d.list.isOrdered)}i.prototype.matches=function(f){return f.type===this._elementType&&(this._styleId===void 0||f.styleId===this._styleId)&&(this._styleName===void 0||f.styleName&&this._styleName.operator(this._styleName.operand,f.styleName))&&(this._listIndex===void 0||s(f,this._listIndex,this._listIsOrdered))&&(this._breakType===void 0||this._breakType===f.breakType)};function a(f){f=f||{},this._color=f.color}a.prototype.matches=function(f){return f.type==="highlight"&&(this._color===void 0||f.color===this._color)};function o(f){f=f||{},this._breakType=f.breakType}o.prototype.matches=function(f){return f.type==="break"&&(this._breakType===void 0||f.breakType===this._breakType)};function s(f,d,p){return f.numbering&&f.numbering.level==d&&f.numbering.isOrdered==p}function u(f){return{operator:h,operand:f}}function l(f){return{operator:c,operand:f}}function h(f,d){return f.toUpperCase()===d.toUpperCase()}function c(f,d){return d.toUpperCase().indexOf(f.toUpperCase())===0}return ds}var tP={},RG;function QDe(){if(RG)return tP;RG=1;var n=Sre(),e=n.RegexTokeniser;tP.tokenise=r;var t="'((?:\\\\.|[^'])*)";function r(i){var a="(?:[a-zA-Z\\-_]|\\\\.)",o=new e([{name:"identifier",regex:new RegExp("("+a+"(?:"+a+"|[0-9])*)")},{name:"dot",regex:/\./},{name:"colon",regex:/:/},{name:"gt",regex:/>/},{name:"whitespace",regex:/\s+/},{name:"arrow",regex:/=>/},{name:"equals",regex:/=/},{name:"startsWith",regex:/\^=/},{name:"open-paren",regex:/\(/},{name:"close-paren",regex:/\)/},{name:"open-square-bracket",regex:/\[/},{name:"close-square-bracket",regex:/\]/},{name:"string",regex:new RegExp(t+"'")},{name:"unterminated-string",regex:new RegExp(t)},{name:"integer",regex:/([0-9]+)/},{name:"choice",regex:/\|/},{name:"bang",regex:/(!)/}]);return o.tokenise(i)}return tP}var IG;function ZDe(){if(IG)return $_;IG=1;var n=ba,e=Sre(),t=YDe(),r=lI(),i=QDe().tokenise,a=Tp();$_.readHtmlPath=h,$_.readDocumentMatcher=u,$_.readStyle=o;function o(A){return w(E,A)}function s(){return e.rules.sequence(e.rules.sequence.capture(l()),e.rules.tokenOfType("whitespace"),e.rules.tokenOfType("arrow"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("whitespace"),e.rules.sequence.capture(c())).head())),e.rules.tokenOfType("end")).map(function(A,k){return{from:A,to:k.valueOrElse(r.empty)}})}function u(A){return w(l(),A)}function l(){var A=e.rules.sequence,k=function(ce,ge){return e.rules.then(e.rules.token("identifier",ce),function(){return ge})},T=k("p",t.paragraph),O=k("r",t.run),F=e.rules.firstOf("p or r or table",T,O),I=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(f)).map(function(ce){return{styleId:ce}}),R=e.rules.firstOf("style name matcher",e.rules.then(e.rules.sequence(e.rules.tokenOfType("equals"),e.rules.sequence.cut(),e.rules.sequence.capture(p)).head(),function(ce){return{styleName:t.equalTo(ce)}}),e.rules.then(e.rules.sequence(e.rules.tokenOfType("startsWith"),e.rules.sequence.cut(),e.rules.sequence.capture(p)).head(),function(ce){return{styleName:t.startsWith(ce)}})),U=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","style-name"),e.rules.sequence.capture(R),e.rules.tokenOfType("close-square-bracket")).head(),B=e.rules.firstOf("list type",k("ordered-list",{isOrdered:!0}),k("unordered-list",{isOrdered:!1})),W=A(e.rules.tokenOfType("colon"),A.capture(B),A.cut(),e.rules.tokenOfType("open-paren"),A.capture(d),e.rules.tokenOfType("close-paren")).map(function(ce,ge){return{list:{isOrdered:ce.isOrdered,levelIndex:ge-1}}});function Y(ce){var ge=e.rules.firstOf.apply(e.rules.firstOf,["matcher suffix"].concat(ce)),Ce=e.rules.zeroOrMore(ge);return e.rules.then(Ce,function(Ee){var G={};return Ee.forEach(function(de){n.extend(G,de)}),G})}var z=A(A.capture(F),A.capture(Y([I,U,W]))).map(function(ce,ge){return ce(ge)}),j=A(e.rules.token("identifier","table"),A.capture(Y([I,U]))).map(function(ce){return t.table(ce)}),M=k("b",t.bold),q=k("i",t.italic),H=k("u",t.underline),K=k("strike",t.strikethrough),Z=k("all-caps",t.allCaps),J=k("small-caps",t.smallCaps),X=A(e.rules.token("identifier","highlight"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","color"),e.rules.tokenOfType("equals"),e.rules.sequence.capture(p),e.rules.tokenOfType("close-square-bracket")).head()))).map(function(ce){return t.highlight({color:ce.valueOrElse(void 0)})}),ae=k("comment-reference",t.commentReference),ie=A(e.rules.token("identifier","br"),A.cut(),e.rules.tokenOfType("open-square-bracket"),e.rules.token("identifier","type"),e.rules.tokenOfType("equals"),A.capture(p),e.rules.tokenOfType("close-square-bracket")).map(function(ce){switch(ce){case"line":return t.lineBreak;case"page":return t.pageBreak;case"column":return t.columnBreak}});return e.rules.firstOf("element type",z,j,M,q,H,K,Z,J,X,ae,ie)}function h(A){return w(c(),A)}function c(){var A=e.rules.sequence.capture,k=e.rules.tokenOfType("whitespace"),T=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","fresh"))),function(R){return R.map(function(){return!0}).valueOrElse(!1)}),O=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","separator"),e.rules.tokenOfType("open-paren"),A(p),e.rules.tokenOfType("close-paren")).head()),function(R){return R.valueOrElse("")}),F=e.rules.oneOrMoreWithSeparator(f,e.rules.tokenOfType("choice")),I=e.rules.sequence(A(F),A(e.rules.zeroOrMore(b)),A(T),A(O)).map(function(R,U,B,W){var Y={},z={};return U.forEach(function(j){j.append&&Y[j.name]?Y[j.name]+=" "+j.value:Y[j.name]=j.value}),B&&(z.fresh=!0),W&&(z.separator=W),r.element(R,Y,z)});return e.rules.firstOf("html path",e.rules.then(e.rules.tokenOfType("bang"),function(){return r.ignore}),e.rules.then(e.rules.zeroOrMoreWithSeparator(I,e.rules.sequence(k,e.rules.tokenOfType("gt"),k)),r.elements))}var f=e.rules.then(e.rules.tokenOfType("identifier"),g),d=e.rules.tokenOfType("integer"),p=e.rules.then(e.rules.tokenOfType("string"),g),m={n:`
`,r:"\r",t:"	"};function g(A){return A.replace(/\\(.)/g,function(k,T){return m[T]||T})}var y=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.sequence.capture(f),e.rules.tokenOfType("equals"),e.rules.sequence.capture(p),e.rules.tokenOfType("close-square-bracket")).map(function(A,k){return{name:A,value:k,append:!1}}),v=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(f)).map(function(A){return{name:"class",value:A,append:!0}}),b=e.rules.firstOf("attribute or class",y,v);function w(A,k){var T=i(k),O=e.Parser(),F=O.parseTokens(A,T);return F.isSuccess()?a.success(F.value()):new a.Result(null,[a.warning(x(k,F))])}function x(A,k){return"Did not understand this style mapping, so ignored it: "+A+`
`+k.errors().map(S).join(`
`)}function S(A){return"Error was at character number "+A.characterNumber()+": Expected "+A.expected+" but got "+A.actual}var E=s();return $_}var q_={},FG;function JDe(){if(FG)return q_;FG=1,q_.readOptions=r;var n=ba,e=q_._defaultStyleMap=["p.Heading1 => h1:fresh","p.Heading2 => h2:fresh","p.Heading3 => h3:fresh","p.Heading4 => h4:fresh","p.Heading5 => h5:fresh","p.Heading6 => h6:fresh","p[style-name='Heading 1'] => h1:fresh","p[style-name='Heading 2'] => h2:fresh","p[style-name='Heading 3'] => h3:fresh","p[style-name='Heading 4'] => h4:fresh","p[style-name='Heading 5'] => h5:fresh","p[style-name='Heading 6'] => h6:fresh","p[style-name='heading 1'] => h1:fresh","p[style-name='heading 2'] => h2:fresh","p[style-name='heading 3'] => h3:fresh","p[style-name='heading 4'] => h4:fresh","p[style-name='heading 5'] => h5:fresh","p[style-name='heading 6'] => h6:fresh","r[style-name='Strong'] => strong","p[style-name='footnote text'] => p:fresh","r[style-name='footnote reference'] =>","p[style-name='endnote text'] => p:fresh","r[style-name='endnote reference'] =>","p[style-name='annotation text'] => p:fresh","r[style-name='annotation reference'] =>","p[style-name='Footnote'] => p:fresh","r[style-name='Footnote anchor'] =>","p[style-name='Endnote'] => p:fresh","r[style-name='Endnote anchor'] =>","p:unordered-list(1) => ul > li:fresh","p:unordered-list(2) => ul|ol > li > ul > li:fresh","p:unordered-list(3) => ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:ordered-list(1) => ol > li:fresh","p:ordered-list(2) => ul|ol > li > ol > li:fresh","p:ordered-list(3) => ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","r[style-name='Hyperlink'] =>","p[style-name='Normal'] => p:fresh"],t=q_._standardOptions={transformDocument:a,includeDefaultStyleMap:!0,includeEmbeddedStyleMap:!0};function r(o){return o=o||{},n.extend({},t,o,{customStyleMap:i(o.styleMap),readStyleMap:function(){var s=this.customStyleMap;return this.includeEmbeddedStyleMap&&(s=s.concat(i(this.embeddedStyleMap))),this.includeDefaultStyleMap&&(s=s.concat(e)),s}})}function i(o){return o?n.isString(o)?o.split(`
`).map(function(s){return s.trim()}).filter(function(s){return s!==""&&s.charAt(0)!=="#"}):o:[]}function a(o){return o}return q_}var nP={},PG;function eAe(){if(PG)return nP;PG=1;var n=cy(),e=fre();nP.openZip=t;function t(r){return r.arrayBuffer?n.resolve(e.openArrayBuffer(r.arrayBuffer)):n.reject(new Error("Could not find file in options"))}return nP}var iv={},LG;function tAe(){if(LG)return iv;LG=1;var n=ba;iv.paragraph=e,iv.run=t,iv._elements=i,iv.getDescendantsOfType=a,iv.getDescendants=o;function e(u){return r("paragraph",u)}function t(u){return r("run",u)}function r(u,l){return i(function(h){return h.type===u?l(h):h})}function i(u){return function l(h){if(h.children){var c=n.map(h.children,l);h=n.extend(h,{children:c})}return u(h)}}function a(u,l){return o(u).filter(function(h){return h.type===l})}function o(u){var l=[];return s(u,function(h){l.push(h)}),l}function s(u,l){u.children&&u.children.forEach(function(h){s(h,l),l(h)})}return iv}var rP={},MG;function nAe(){if(MG)return rP;MG=1;var n=lI(),e=uI();rP.element=t;function t(r){return function(i){return e.elementWithTag(n.element(r),[i])}}return rP}var UG;function rAe(){if(UG)return $l;UG=1;var n=ba,e=LDe(),t=MDe(),r=jDe().DocumentConverter,i=$De().convertElementToRawText,a=ZDe().readStyle,o=JDe().readOptions,s=eAe(),u=Tp().Result;$l.convertToHtml=l,$l.convertToMarkdown=h,$l.convert=c,$l.extractRawText=m,$l.images=vre(),$l.transforms=tAe(),$l.underline=nAe(),$l.embedStyleMap=g,$l.readEmbeddedStyleMap=f;function l(y,v){return c(y,v)}function h(y,v){var b=Object.create(v||{});return b.outputFormat="markdown",c(y,b)}function c(y,v){return v=o(v),s.openZip(y).tap(function(b){return t.readStyleMap(b).then(function(w){v.embeddedStyleMap=w})}).then(function(b){return e.read(b,y).then(function(w){return w.map(v.transformDocument)}).then(function(w){return d(w,v)})})}function f(y){return s.openZip(y).then(t.readStyleMap)}function d(y,v){var b=p(v.readStyleMap()),w=n.extend({},v,{styleMap:b.value}),x=new r(w);return y.flatMapThen(function(S){return b.flatMapThen(function(E){return x.convertToHtml(S)})})}function p(y){return u.combine((y||[]).map(a)).map(function(v){return v.filter(function(b){return!!b})})}function m(y){return s.openZip(y).then(e.read).then(function(v){return v.map(i)})}function g(y,v){return s.openZip(y).tap(function(b){return t.writeStyleMap(b,v)}).then(function(b){return b.toArrayBuffer()}).then(function(b){return{toArrayBuffer:function(){return b},toBuffer:function(){return Buffer.from(b)}}})}return $l.styleMapping=function(){throw new Error(`Use a raw string instead of mammoth.styleMapping e.g. "p[style-name='Title'] => h1" instead of mammoth.styleMapping("p[style-name='Title'] => h1")`)},$l}var iAe=rAe();const aAe=Fp(iAe);var DC={};DC.d=(n,e)=>{for(var t in e)DC.o(e,t)&&!DC.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};DC.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var bn=globalThis.pdfjsLib={};DC.d(bn,{AbortException:()=>qm,AnnotationEditorLayer:()=>Y8,AnnotationEditorParamsType:()=>or,AnnotationEditorType:()=>An,AnnotationEditorUIManager:()=>s1,AnnotationLayer:()=>E8,AnnotationMode:()=>Wg,AnnotationType:()=>Aa,ColorPicker:()=>zN,DOMSVGFactory:()=>UN,DrawLayer:()=>J8,FeatureTest:()=>Gs,GlobalWorkerOptions:()=>lp,ImageKind:()=>S3,InvalidPDFException:()=>B6,MathClamp:()=>ul,OPS:()=>jc,OutputScale:()=>Dp,PDFDataRangeTransport:()=>Tie,PDFDateString:()=>p7,PDFWorker:()=>E2,PasswordResponses:()=>uAe,PermissionFlag:()=>oAe,PixelsPerInch:()=>Vm,RenderingCancelledException:()=>f7,ResponseException:()=>PN,SignatureExtractor:()=>cp,SupportedImageMimeTypes:()=>W6,TextLayer:()=>ZC,TouchManager:()=>MN,Util:()=>cn,VerbosityLevel:()=>cI,XfaLayer:()=>Aie,build:()=>Nke,createValidAbsoluteUrl:()=>fAe,fetchData:()=>gD,getDocument:()=>bke,getFilenameFromUrl:()=>xAe,getPdfFilenameFromUrl:()=>_Ae,getUuid:()=>Tre,getXfaPageViewport:()=>SAe,isDataScheme:()=>dI,isPdfFile:()=>d7,isValidExplicitDest:()=>Ske,noContextMenu:()=>ph,normalizeUnicode:()=>vAe,setLayerDimensions:()=>a1,shadow:()=>Zn,stopEvent:()=>ka,version:()=>kke});const Ws=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Cre=[1,0,0,1,0,0],U6=[.001,0,0,.001,0,0],iP=1.35,sl={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Wg={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},sAe="pdfjs_internal_editor_",An={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},or={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},oAe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ro={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},S3={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Aa={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e2={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},cI={ERRORS:0,WARNINGS:1,INFOS:5},jc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},uAe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let hI=cI.WARNINGS;function lAe(n){Number.isInteger(n)&&(hI=n)}function cAe(){return hI}function fI(n){hI>=cI.INFOS&&console.log(`Info: ${n}`)}function In(n){hI>=cI.WARNINGS&&console.log(`Warning: ${n}`)}function ri(n){throw new Error(n)}function Ra(n,e){n||ri(e)}function hAe(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fAe(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=yAe(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return hAe(r)?r:null}function Zn(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const N1=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class BG extends N1{constructor(e,t){super(e,"PasswordException"),this.code=t}}class aP extends N1{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class B6 extends N1{constructor(e){super(e,"InvalidPDFException")}}class PN extends N1{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class dAe extends N1{constructor(e){super(e,"FormatError")}}class qm extends N1{constructor(e){super(e,"AbortException")}}function Ere(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ri("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),o=n.subarray(i,a);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function pD(n){typeof n!="string"&&ri("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function pAe(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function c7(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function gAe(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function mAe(){try{return new Function(""),!0}catch{return!1}}class Gs{static get isLittleEndian(){return Zn(this,"isLittleEndian",gAe())}static get isEvalSupported(){return Zn(this,"isEvalSupported",mAe())}static get isOffscreenCanvasSupported(){return Zn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Zn(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:e,userAgent:t}=navigator;return Zn(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}return Zn(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Zn(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const sP=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var wp,a6,C3,z6;let cn=(a6=class{static makeHexColor(e,t,r){return`#${sP[e]}${sP[t]}${sP[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[r,i]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,a=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[i,a]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],a[0],o[0]),Math.min(r[1],i[1],a[1],o[1]),Math.max(r[0],i[0],a[0],o[0]),Math.max(r[1],i[1],a[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],s=(r+o)/2,u=Math.sqrt((r+o)**2-4*(r*o-a*i))/2,l=s+u||1,h=s-u||1;return[Math.sqrt(l),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>o?null:[r,a,i,o]}static bezierBoundingBox(e,t,r,i,a,o,s,u,l){return l?(l[0]=Math.min(l[0],e,s),l[1]=Math.min(l[1],t,u),l[2]=Math.max(l[2],e,s),l[3]=Math.max(l[3],t,u)):l=[Math.min(e,s),Math.min(t,u),Math.max(e,s),Math.max(t,u)],be(this,wp,z6).call(this,e,r,a,s,t,i,o,u,3*(-e+3*(r-a)+s),6*(e-2*r+a),3*(r-e),l),be(this,wp,z6).call(this,e,r,a,s,t,i,o,u,3*(-t+3*(i-o)+u),6*(t-2*i+o),3*(i-t),l),l}},wp=new WeakSet,C3=function(e,t,r,i,a,o,s,u,l,h){if(l<=0||l>=1)return;const c=1-l,f=l*l,d=f*l,p=c*(c*(c*e+3*l*t)+3*f*r)+d*i,m=c*(c*(c*a+3*l*o)+3*f*s)+d*u;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],m),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],m)},z6=function(e,t,r,i,a,o,s,u,l,h,c,f){if(Math.abs(l)<1e-12){Math.abs(h)>=1e-12&&be(this,wp,C3).call(this,e,t,r,i,a,o,s,u,-c/h,f);return}const d=h**2-4*c*l;if(d<0)return;const p=Math.sqrt(d),m=2*l;be(this,wp,C3).call(this,e,t,r,i,a,o,s,u,(-h+p)/m,f),be(this,wp,C3).call(this,e,t,r,i,a,o,s,u,(-h-p)/m,f)},ve(a6,wp),a6);function yAe(n){return decodeURIComponent(escape(n))}let oP=null,zG=null;function vAe(n){return oP||(oP=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zG=new Map([["","t"]])),n.replaceAll(oP,(e,t,r)=>t?t.normalize("NFKC"):zG.get(r))}function Tre(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),Ere(n)}const h7="pdfjs_internal_id_";function bAe(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,i,...a]=t;if(!n(r)&&!Number.isInteger(r)||!e(i))return!1;const o=a.length;let s=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;s=!1;break;default:return!1}for(const u of a)if(!(typeof u=="number"||s&&u===null))return!1;return!0}function ul(n,e,t){return Math.min(Math.max(n,e),t)}function Dre(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(Ere(n))}function wAe(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):pD(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const Dd="http://www.w3.org/2000/svg",Tv=class Tv{};nn(Tv,"CSS",96),nn(Tv,"PDF",72),nn(Tv,"PDF_TO_CSS_UNITS",Tv.CSS/Tv.PDF);let Vm=Tv;async function gD(n,e="text"){if(t2(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class mD{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:a=0,offsetY:o=0,dontFlip:s=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=a,this.offsetY=o,r*=t;const u=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let h,c,f,d;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,c=0,f=0,d=1;break;case 90:h=0,c=1,f=1,d=0;break;case 270:h=0,c=-1,f=-1,d=0;break;case 0:h=1,c=0,f=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}s&&(f=-f,d=-d);let p,m,g,y;h===0?(p=Math.abs(l-e[1])*r+a,m=Math.abs(u-e[0])*r+o,g=(e[3]-e[1])*r,y=(e[2]-e[0])*r):(p=Math.abs(u-e[0])*r+a,m=Math.abs(l-e[1])*r+o,g=(e[2]-e[0])*r,y=(e[3]-e[1])*r),this.transform=[h*r,c*r,f*r,d*r,p-h*r*u-f*r*l,m-c*r*u-d*r*l],this.width=g,this.height=y}get rawDims(){const e=this.viewBox;return Zn(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new mD({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){return cn.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=cn.applyTransform([e[0],e[1]],this.transform),r=cn.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return cn.applyInverseTransform([e,t],this.transform)}}class f7 extends N1{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function dI(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function d7(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function xAe(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function _Ae(n,e="document.pdf"){if(typeof n!="string")return e;if(dI(n))return In('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let a=r.exec(i[1])||r.exec(i[2])||r.exec(i[3]);if(a&&(a=a[0],a.includes("%")))try{a=r.exec(decodeURIComponent(a))[0]}catch{}return a||e}class WG{constructor(){nn(this,"started",Object.create(null));nn(this,"times",[])}time(e){e in this.started&&In(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||In(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:a}of this.times)e.push(`${r.padEnd(t)} ${a-i}ms
`);return e.join("")}}function t2(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ph(n){n.preventDefault()}function ka(n){n.preventDefault(),n.stopPropagation()}var AE;class p7{static toDateObject(e){if(!e||typeof e!="string")return null;P(this,AE)||he(this,AE,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=P(this,AE).exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const l=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let c=parseInt(t[9],10)||0;return c=c>=0&&c<=59?c:0,l==="-"?(o+=h,s+=c):l==="+"&&(o-=h,s-=c),new Date(Date.UTC(r,i,a,o,s,u))}}AE=new WeakMap,ve(p7,AE);function SAe(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new mD({viewBox:a,userUnit:1,scale:e,rotation:t})}function g7(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(In(`Not a valid color format: "${n}"`),[0,0,0])}function CAe(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,g7(r))}e.remove()}function Mi(n){const{a:e,b:t,c:r,d:i,e:a,f:o}=n.getTransform();return[e,t,r,i,a,o]}function tf(n){const{a:e,b:t,c:r,d:i,e:a,f:o}=n.getTransform().invertSelf();return[e,t,r,i,a,o]}function a1(n,e,t=!1,r=!0){if(e instanceof mD){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:o}=n,s=Gs.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,l=`var(--total-scale-factor) * ${a}px`,h=s?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,c=s?`round(down, ${l}, var(--scale-round-y))`:`calc(${l})`;!t||e.rotation%180===0?(o.width=h,o.height=c):(o.width=c,o.height=h)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Dp{constructor(){const{pixelRatio:e}=Dp;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,i){let a=1/0,o=1/0,s=1/0;r>0&&(a=Math.sqrt(r/(e*t))),i!==-1&&(o=i/e,s=i/t);const u=Math.min(a,o,s);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const W6=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Vg,Pv,Xl,Hg,kE,P2,NE,MO,Are,Hs,kre,Nre,QS,Ore,E3;const Nd=class Nd{constructor(e){ve(this,Hs);ve(this,Vg,null);ve(this,Pv,null);ve(this,Xl);ve(this,Hg,null);ve(this,kE,null);ve(this,P2,null);he(this,Xl,e),P(Nd,NE)||he(Nd,NE,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=he(this,Vg,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=P(this,Xl)._uiManager._signal;e.addEventListener("contextmenu",ph,{signal:t}),e.addEventListener("pointerdown",be(Nd,MO,Are),{signal:t});const r=he(this,Hg,document.createElement("div"));r.className="buttons",e.append(r);const i=P(this,Xl).toolbarPosition;if(i){const{style:a}=e,o=P(this,Xl)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return be(this,Hs,Ore).call(this),e}get div(){return P(this,Vg)}hide(){var e;P(this,Vg).classList.add("hidden"),(e=P(this,Pv))==null||e.hideDropdown()}show(){var e;P(this,Vg).classList.remove("hidden"),(e=P(this,kE))==null||e.shown()}async addAltText(e){const t=await e.render();be(this,Hs,QS).call(this,t),P(this,Hg).prepend(t,P(this,Hs,E3)),he(this,kE,e)}addColorPicker(e){he(this,Pv,e);const t=e.renderButton();be(this,Hs,QS).call(this,t),P(this,Hg).prepend(t,P(this,Hs,E3))}async addEditSignatureButton(e){const t=he(this,P2,await e.renderEditButton(P(this,Xl)));be(this,Hs,QS).call(this,t),P(this,Hg).prepend(t,P(this,Hs,E3))}updateEditSignatureButton(e){P(this,P2)&&(P(this,P2).title=e)}remove(){var e;P(this,Vg).remove(),(e=P(this,Pv))==null||e.destroy(),he(this,Pv,null)}};Vg=new WeakMap,Pv=new WeakMap,Xl=new WeakMap,Hg=new WeakMap,kE=new WeakMap,P2=new WeakMap,NE=new WeakMap,MO=new WeakSet,Are=function(e){e.stopPropagation()},Hs=new WeakSet,kre=function(e){P(this,Xl)._focusEventsAllowed=!1,ka(e)},Nre=function(e){P(this,Xl)._focusEventsAllowed=!0,ka(e)},QS=function(e){const t=P(this,Xl)._uiManager._signal;e.addEventListener("focusin",be(this,Hs,kre).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",be(this,Hs,Nre).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ph,{signal:t})},Ore=function(){const{editorType:e,_uiManager:t}=P(this,Xl),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",P(Nd,NE)[e]),be(this,Hs,QS).call(this,r),r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),P(this,Hg).append(r)},E3=function(){const e=document.createElement("div");return e.className="divider",e},ve(Nd,MO),ve(Nd,NE,null);let j6=Nd;var OE,Lv,Mv,ny,Rre,Ire,Fre;class EAe{constructor(e){ve(this,ny);ve(this,OE,null);ve(this,Lv,null);ve(this,Mv);he(this,Mv,e)}show(e,t,r){const[i,a]=be(this,ny,Ire).call(this,t,r),{style:o}=P(this,Lv)||he(this,Lv,be(this,ny,Rre).call(this));e.append(P(this,Lv)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){P(this,Lv).remove()}}OE=new WeakMap,Lv=new WeakMap,Mv=new WeakMap,ny=new WeakSet,Rre=function(){const e=he(this,Lv,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ph,{signal:P(this,Mv)._signal});const t=he(this,OE,document.createElement("div"));return t.className="buttons",e.append(t),be(this,ny,Fre).call(this),e},Ire=function(e,t){let r=0,i=0;for(const a of e){const o=a.y+a.height;if(o<r)continue;const s=a.x+(t?a.width:0);if(o>r){i=s,r=o;continue}t?s>i&&(i=s):s<i&&(i=s)}return[t?1-i:i,r]},Fre=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=P(this,Mv)._signal;e.addEventListener("contextmenu",ph,{signal:r}),e.addEventListener("click",()=>{P(this,Mv).highlightSelection("floating_button")},{signal:r}),P(this,OE).append(e)};function m7(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var UO;class TAe{constructor(){ve(this,UO,0)}get id(){return`${sAe}${Mo(this,UO)._++}`}}UO=new WeakMap;var L2,RE,ao,M2,T3;const wj=class wj{constructor(){ve(this,M2);ve(this,L2,Tre());ve(this,RE,0);ve(this,ao,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Zn(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:r,size:i,type:a}=e;return be(this,M2,T3).call(this,`${t}_${r}_${i}_${a}`,e)}async getFromUrl(e){return be(this,M2,T3).call(this,e,e)}async getFromBlob(e,t){const r=await t;return be(this,M2,T3).call(this,e,r)}async getFromId(e){P(this,ao)||he(this,ao,new Map);const t=P(this,ao).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){P(this,ao)||he(this,ao,new Map);let r=P(this,ao).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${P(this,L2)}_${Mo(this,RE)._++}`,refCounter:1,isSvg:!1},P(this,ao).set(e,r),P(this,ao).set(r.id,r),r}getSvgUrl(e){const t=P(this,ao).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;P(this,ao)||he(this,ao,new Map);const t=P(this,ao).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(r.width,r.height);a.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=a.convertToBlob()}(i=r.close)==null||i.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${P(this,L2)}_`)}};L2=new WeakMap,RE=new WeakMap,ao=new WeakMap,M2=new WeakSet,T3=async function(e,t){P(this,ao)||he(this,ao,new Map);let r=P(this,ao).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${P(this,L2)}_${Mo(this,RE)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(r.url=t,i=await gD(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=wj._isSVGFittingCanvas,o=new FileReader,s=new Image,u=new Promise((l,h)=>{s.onload=()=>{r.bitmap=s,r.isSvg=!0,l()},o.onload=async()=>{const c=r.svgUrl=o.result;s.src=await a?`${c}#svgView(preserveAspectRatio(none))`:c},s.onerror=o.onerror=h});o.readAsDataURL(i),await u}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){In(i),r=null}return P(this,ao).set(e,r),r&&P(this,ao).set(r.id,r),r};let $6=wj;var fa,Gg,IE,Hi;class DAe{constructor(e=128){ve(this,fa,[]);ve(this,Gg,!1);ve(this,IE);ve(this,Hi,-1);he(this,IE,e)}add({cmd:e,undo:t,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:s=!1}){if(i&&e(),P(this,Gg))return;const u={cmd:e,undo:t,post:r,type:a};if(P(this,Hi)===-1){P(this,fa).length>0&&(P(this,fa).length=0),he(this,Hi,0),P(this,fa).push(u);return}if(o&&P(this,fa)[P(this,Hi)].type===a){s&&(u.undo=P(this,fa)[P(this,Hi)].undo),P(this,fa)[P(this,Hi)]=u;return}const l=P(this,Hi)+1;l===P(this,IE)?P(this,fa).splice(0,1):(he(this,Hi,l),l<P(this,fa).length&&P(this,fa).splice(l)),P(this,fa).push(u)}undo(){if(P(this,Hi)===-1)return;he(this,Gg,!0);const{undo:e,post:t}=P(this,fa)[P(this,Hi)];e(),t==null||t(),he(this,Gg,!1),he(this,Hi,P(this,Hi)-1)}redo(){if(P(this,Hi)<P(this,fa).length-1){he(this,Hi,P(this,Hi)+1),he(this,Gg,!0);const{cmd:e,post:t}=P(this,fa)[P(this,Hi)];e(),t==null||t(),he(this,Gg,!1)}}hasSomethingToUndo(){return P(this,Hi)!==-1}hasSomethingToRedo(){return P(this,Hi)<P(this,fa).length-1}cleanType(e){if(P(this,Hi)!==-1){for(let t=P(this,Hi);t>=0;t--)if(P(this,fa)[t].type!==e){P(this,fa).splice(t+1,P(this,Hi)-t),he(this,Hi,t);return}P(this,fa).length=0,he(this,Hi,-1)}}destroy(){he(this,fa,null)}}fa=new WeakMap,Gg=new WeakMap,IE=new WeakMap,Hi=new WeakMap;var BO,Pre;class yD{constructor(e){ve(this,BO);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Gs.platform;for(const[r,i,a={}]of e)for(const o of r){const s=o.startsWith("mac+");t&&s?(this.callbacks.set(o.slice(4),{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1))):!t&&!s&&(this.callbacks.set(o,{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(be(this,BO,Pre).call(this,t));if(!r)return;const{callback:i,options:{bubbles:a=!1,args:o=[],checker:s=null}}=r;s&&!s(e,t)||(i.bind(e,...o,t)(),a||ka(t))}}BO=new WeakSet,Pre=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const zO=class zO{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return CAe(e),Zn(this,"_colors",e)}convert(e){const t=g7(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((a,o)=>a===t[o]))return zO._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?cn.makeHexColor(...t):e}};nn(zO,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let q6=zO;var U2,Gu,Xa,Ls,B2,Ld,z2,Kl,Xg,Uv,W2,Bv,of,$c,zv,FE,PE,j2,LE,uf,Kg,$2,Yg,lf,WO,Qg,ME,Zg,Wv,jv,Jg,UE,ps,qr,Md,em,$v,BE,zE,tm,cf,Ud,WE,Yl,Ft,D3,V6,Lre,Mre,A3,Ure,Bre,zre,H6,Wre,G6,X6,jre,Uo,Ad,$re,qre,K6,Vre,ZS,Y6;const y2=class y2{constructor(e,t,r,i,a,o,s,u,l,h,c,f,d,p){ve(this,Ft);ve(this,U2,new AbortController);ve(this,Gu,null);ve(this,Xa,new Map);ve(this,Ls,new Map);ve(this,B2,null);ve(this,Ld,null);ve(this,z2,null);ve(this,Kl,new DAe);ve(this,Xg,null);ve(this,Uv,null);ve(this,W2,0);ve(this,Bv,new Set);ve(this,of,null);ve(this,$c,null);ve(this,zv,new Set);nn(this,"_editorUndoBar",null);ve(this,FE,!1);ve(this,PE,!1);ve(this,j2,!1);ve(this,LE,null);ve(this,uf,null);ve(this,Kg,null);ve(this,$2,null);ve(this,Yg,!1);ve(this,lf,null);ve(this,WO,new TAe);ve(this,Qg,!1);ve(this,ME,!1);ve(this,Zg,null);ve(this,Wv,null);ve(this,jv,null);ve(this,Jg,null);ve(this,UE,null);ve(this,ps,An.NONE);ve(this,qr,new Set);ve(this,Md,null);ve(this,em,null);ve(this,$v,null);ve(this,BE,null);ve(this,zE,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});ve(this,tm,[0,0]);ve(this,cf,null);ve(this,Ud,null);ve(this,WE,null);ve(this,Yl,null);const m=this._signal=P(this,U2).signal;he(this,Ud,e),he(this,WE,t),he(this,B2,r),he(this,em,i),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:m}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),a._on("setpreference",this.onSetPreference.bind(this),{signal:m}),a._on("switchannotationeditorparams",g=>this.updateParams(g.type,g.value),{signal:m}),be(this,Ft,Ure).call(this),be(this,Ft,jre).call(this),be(this,Ft,H6).call(this),he(this,Ld,o.annotationStorage),he(this,LE,o.filterFactory),he(this,$v,s),he(this,$2,u||null),he(this,FE,l),he(this,PE,h),he(this,j2,c),he(this,UE,f||null),this.viewParameters={realScale:Vm.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=d||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const e=y2.prototype,t=o=>P(o,Ud).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:s})=>{if(s instanceof HTMLInputElement){const{type:u}=s;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Zn(this,"_keyboardManager",new yD([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:s})=>!(s instanceof HTMLButtonElement)&&P(o,Ud).contains(s)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:s})=>!(s instanceof HTMLButtonElement)&&P(o,Ud).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,r,i,a,o,s,u;(e=P(this,Yl))==null||e.resolve(),he(this,Yl,null),(t=P(this,U2))==null||t.abort(),he(this,U2,null),this._signal=null;for(const l of P(this,Ls).values())l.destroy();P(this,Ls).clear(),P(this,Xa).clear(),P(this,zv).clear(),(r=P(this,Jg))==null||r.clear(),he(this,Gu,null),P(this,qr).clear(),P(this,Kl).destroy(),(i=P(this,B2))==null||i.destroy(),(a=P(this,em))==null||a.destroy(),(o=P(this,lf))==null||o.hide(),he(this,lf,null),(s=P(this,jv))==null||s.destroy(),he(this,jv,null),P(this,uf)&&(clearTimeout(P(this,uf)),he(this,uf,null)),P(this,cf)&&(clearTimeout(P(this,cf)),he(this,cf,null)),(u=this._editorUndoBar)==null||u.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return P(this,UE)}get useNewAltTextFlow(){return P(this,PE)}get useNewAltTextWhenAddingImage(){return P(this,j2)}get hcmFilter(){return Zn(this,"hcmFilter",P(this,$v)?P(this,LE).addHCMFilter(P(this,$v).foreground,P(this,$v).background):"none")}get direction(){return Zn(this,"direction",getComputedStyle(P(this,Ud)).direction)}get highlightColors(){return Zn(this,"highlightColors",P(this,$2)?new Map(P(this,$2).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Zn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),he(this,Uv,e)}setMainHighlightColorPicker(e){he(this,jv,e)}editAltText(e,t=!1){var r;(r=P(this,B2))==null||r.editAltText(this,e,t)}getSignature(e){var t;(t=P(this,em))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return P(this,em)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":he(this,j2,t);break}}onPageChanging({pageNumber:e}){he(this,W2,e-1)}focusMainContainer(){P(this,Ud).focus()}findParent(e,t){for(const r of P(this,Ls).values()){const{x:i,y:a,width:o,height:s}=r.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=a&&t<=a+s)return r}return null}disableUserSelect(e=!1){P(this,WE).classList.toggle("noUserSelect",e)}addShouldRescale(e){P(this,zv).add(e)}removeShouldRescale(e){P(this,zv).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Vm.PDF_TO_CSS_UNITS;for(const r of P(this,zv))r.onScaleChanging();(t=P(this,Uv))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o}=t,s=t.toString(),l=be(this,Ft,D3).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(l);if(!h)return;t.empty();const c=be(this,Ft,V6).call(this,l),f=P(this,ps)===An.NONE,d=()=>{c==null||c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o,text:s}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(An.HIGHLIGHT,d);return}d()}addToAnnotationStorage(e){!e.isEmpty()&&P(this,Ld)&&!P(this,Ld).has(e.id)&&P(this,Ld).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,P(this,Yg)&&(he(this,Yg,!1),be(this,Ft,A3).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of P(this,qr))if(t.div.contains(e)){he(this,Wv,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!P(this,Wv))return;const[e,t]=P(this,Wv);he(this,Wv,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){be(this,Ft,H6).call(this),be(this,Ft,G6).call(this)}removeEditListeners(){be(this,Ft,Wre).call(this),be(this,Ft,X6).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of P(this,$c))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of P(this,$c))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=P(this,Gu))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of P(this,qr)){const a=i.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const o of P(this,$c))if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){In(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const u of r){const l=await i.deserialize(u);if(!l)return;a.push(l)}const o=()=>{for(const u of a)be(this,Ft,K6).call(this,u);be(this,Ft,Y6).call(this,a)},s=()=>{for(const u of a)u.remove()};this.addCommands({cmd:o,undo:s,mustExec:!0})}catch(a){In(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),P(this,ps)!==An.NONE&&!this.isEditorHandlingKeyboard&&y2._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,P(this,Yg)&&(he(this,Yg,!1),be(this,Ft,A3).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(be(this,Ft,Bre).call(this),be(this,Ft,G6).call(this),be(this,Ft,Uo).call(this,{isEditing:P(this,ps)!==An.NONE,isEmpty:be(this,Ft,ZS).call(this),hasSomethingToUndo:P(this,Kl).hasSomethingToUndo(),hasSomethingToRedo:P(this,Kl).hasSomethingToRedo(),hasSelectedEditor:!1})):(be(this,Ft,zre).call(this),be(this,Ft,X6).call(this),be(this,Ft,Uo).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!P(this,$c)){he(this,$c,e);for(const t of P(this,$c))be(this,Ft,Ad).call(this,t.defaultPropertiesToUpdate)}}getId(){return P(this,WO).id}get currentLayer(){return P(this,Ls).get(P(this,W2))}getLayer(e){return P(this,Ls).get(e)}get currentPageIndex(){return P(this,W2)}addLayer(e){P(this,Ls).set(e.pageIndex,e),P(this,Qg)?e.enable():e.disable()}removeLayer(e){P(this,Ls).delete(e.pageIndex)}async updateMode(e,t=null,r=!1){var i,a;if(P(this,ps)!==e&&!(P(this,Yl)&&(await P(this,Yl).promise,!P(this,Yl)))){if(he(this,Yl,Promise.withResolvers()),he(this,ps,e),e===An.NONE){this.setEditingState(!1),be(this,Ft,qre).call(this),(i=this._editorUndoBar)==null||i.hide(),P(this,Yl).resolve();return}e===An.SIGNATURE&&await((a=P(this,em))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await be(this,Ft,$re).call(this),this.unselectAll();for(const o of P(this,Ls).values())o.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),P(this,Yl).resolve();return}for(const o of P(this,Xa).values())o.annotationElementId===t?(this.setSelected(o),o.enterInEditMode()):o.unselect();P(this,Yl).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==P(this,ps)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var r;if(P(this,$c)){switch(e){case or.CREATE:this.currentLayer.addNewEditor(t);return;case or.HIGHLIGHT_DEFAULT_COLOR:(r=P(this,jv))==null||r.updateColor(t);break;case or.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(P(this,BE)||he(this,BE,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of P(this,qr))i.updateParams(e,t);for(const i of P(this,$c))i.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var a;for(const o of P(this,Xa).values())o.editorType===e&&o.show(t);(((a=P(this,BE))==null?void 0:a.get(or.HIGHLIGHT_SHOW_ALL))??!0)!==t&&be(this,Ft,Ad).call(this,[[or.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(P(this,ME)!==e){he(this,ME,e);for(const t of P(this,Ls).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of P(this,Xa).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return P(this,Xa).get(e)}addEditor(e){P(this,Xa).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(P(this,uf)&&clearTimeout(P(this,uf)),he(this,uf,setTimeout(()=>{this.focusMainContainer(),he(this,uf,null)},0))),P(this,Xa).delete(e.id),e.annotationElementId&&((t=P(this,Jg))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!P(this,Bv).has(e.annotationElementId))&&((r=P(this,Ld))==null||r.remove(e.id))}addDeletedAnnotationElement(e){P(this,Bv).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return P(this,Bv).has(e)}removeDeletedAnnotationElement(e){P(this,Bv).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){P(this,Gu)!==e&&(he(this,Gu,e),e&&be(this,Ft,Ad).call(this,e.propertiesToUpdate))}updateUI(e){P(this,Ft,Vre)===e&&be(this,Ft,Ad).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){be(this,Ft,Ad).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(P(this,qr).has(e)){P(this,qr).delete(e),e.unselect(),be(this,Ft,Uo).call(this,{hasSelectedEditor:this.hasSelection});return}P(this,qr).add(e),e.select(),be(this,Ft,Ad).call(this,e.propertiesToUpdate),be(this,Ft,Uo).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=P(this,Uv))==null||t.commitOrRemove();for(const r of P(this,qr))r!==e&&r.unselect();P(this,qr).clear(),P(this,qr).add(e),e.select(),be(this,Ft,Ad).call(this,e.propertiesToUpdate),be(this,Ft,Uo).call(this,{hasSelectedEditor:!0})}isSelected(e){return P(this,qr).has(e)}get firstSelectedEditor(){return P(this,qr).values().next().value}unselect(e){e.unselect(),P(this,qr).delete(e),be(this,Ft,Uo).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return P(this,qr).size!==0}get isEnterHandled(){return P(this,qr).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;P(this,Kl).undo(),be(this,Ft,Uo).call(this,{hasSomethingToUndo:P(this,Kl).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:be(this,Ft,ZS).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){P(this,Kl).redo(),be(this,Ft,Uo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:P(this,Kl).hasSomethingToRedo(),isEmpty:be(this,Ft,ZS).call(this)})}addCommands(e){P(this,Kl).add(e),be(this,Ft,Uo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:be(this,Ft,ZS).call(this)})}cleanUndoStack(e){P(this,Kl).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...P(this,qr)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const s of t)s.remove()},i=()=>{for(const o of t)be(this,Ft,K6).call(this,o)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=P(this,Gu))==null||e.commitOrRemove()}hasSomethingToControl(){return P(this,Gu)||this.hasSelection}selectAll(){for(const e of P(this,qr))e.commit();be(this,Ft,Y6).call(this,P(this,Xa).values())}unselectAll(){var e;if(!(P(this,Gu)&&(P(this,Gu).commitOrRemove(),P(this,ps)!==An.NONE))&&!((e=P(this,Uv))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of P(this,qr))t.unselect();P(this,qr).clear(),be(this,Ft,Uo).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;P(this,tm)[0]+=e,P(this,tm)[1]+=t;const[i,a]=P(this,tm),o=[...P(this,qr)],s=1e3;P(this,cf)&&clearTimeout(P(this,cf)),he(this,cf,setTimeout(()=>{he(this,cf,null),P(this,tm)[0]=P(this,tm)[1]=0,this.addCommands({cmd:()=>{for(const u of o)P(this,Xa).has(u.id)&&(u.translateInPage(i,a),u.translationDone())},undo:()=>{for(const u of o)P(this,Xa).has(u.id)&&(u.translateInPage(-i,-a),u.translationDone())},mustExec:!1})},s));for(const u of o)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),he(this,of,new Map);for(const e of P(this,qr))P(this,of).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!P(this,of))return!1;this.disableUserSelect(!1);const e=P(this,of);he(this,of,null);let t=!1;for(const[{x:i,y:a,pageIndex:o},s]of e)s.newX=i,s.newY=a,s.newPageIndex=o,t||(t=i!==s.savedX||a!==s.savedY||o!==s.savedPageIndex);if(!t)return!1;const r=(i,a,o,s)=>{if(P(this,Xa).has(i.id)){const u=P(this,Ls).get(s);u?i._setParentAndPosition(u,a,o):(i.pageIndex=s,i.x=a,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:o,newPageIndex:s}]of e)r(i,a,o,s)},undo:()=>{for(const[i,{savedX:a,savedY:o,savedPageIndex:s}]of e)r(i,a,o,s)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(P(this,of))for(const r of P(this,of).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||P(this,qr).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return P(this,Gu)===e}getActive(){return P(this,Gu)}getMode(){return P(this,ps)}get imageManager(){return Zn(this,"imageManager",new $6)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,h=t.rangeCount;l<h;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:r,y:i,width:a,height:o}=e.getBoundingClientRect();let s;switch(e.getAttribute("data-main-rotation")){case"90":s=(l,h,c,f)=>({x:(h-i)/o,y:1-(l+c-r)/a,width:f/o,height:c/a});break;case"180":s=(l,h,c,f)=>({x:1-(l+c-r)/a,y:1-(h+f-i)/o,width:c/a,height:f/o});break;case"270":s=(l,h,c,f)=>({x:1-(h+f-i)/o,y:(l-r)/a,width:f/o,height:c/a});break;default:s=(l,h,c,f)=>({x:(l-r)/a,y:(h-i)/o,width:c/a,height:f/o});break}const u=[];for(let l=0,h=t.rangeCount;l<h;l++){const c=t.getRangeAt(l);if(!c.collapsed)for(const{x:f,y:d,width:p,height:m}of c.getClientRects())p===0||m===0||u.push(s(f,d,p,m))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(P(this,z2)||he(this,z2,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=P(this,z2))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=P(this,z2))==null?void 0:i.get(e.data.id);if(!t)return;const r=P(this,Ld).getRawValue(t);r&&(P(this,ps)===An.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var a;const i=(a=P(this,Jg))==null?void 0:a.get(e);i&&(i.setCanvas(t,r),P(this,Jg).delete(e))}addMissingCanvas(e,t){(P(this,Jg)||he(this,Jg,new Map)).set(e,t)}};U2=new WeakMap,Gu=new WeakMap,Xa=new WeakMap,Ls=new WeakMap,B2=new WeakMap,Ld=new WeakMap,z2=new WeakMap,Kl=new WeakMap,Xg=new WeakMap,Uv=new WeakMap,W2=new WeakMap,Bv=new WeakMap,of=new WeakMap,$c=new WeakMap,zv=new WeakMap,FE=new WeakMap,PE=new WeakMap,j2=new WeakMap,LE=new WeakMap,uf=new WeakMap,Kg=new WeakMap,$2=new WeakMap,Yg=new WeakMap,lf=new WeakMap,WO=new WeakMap,Qg=new WeakMap,ME=new WeakMap,Zg=new WeakMap,Wv=new WeakMap,jv=new WeakMap,Jg=new WeakMap,UE=new WeakMap,ps=new WeakMap,qr=new WeakMap,Md=new WeakMap,em=new WeakMap,$v=new WeakMap,BE=new WeakMap,zE=new WeakMap,tm=new WeakMap,cf=new WeakMap,Ud=new WeakMap,WE=new WeakMap,Yl=new WeakMap,Ft=new WeakSet,D3=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},V6=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of P(this,Ls).values())if(r.hasTextLayer(e))return r;return null},Lre=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=be(this,Ft,D3).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(P(this,lf)||he(this,lf,new EAe(this)),P(this,lf).show(r,i,this.direction==="ltr"))},Mre=function(){var a,o,s;const e=document.getSelection();if(!e||e.isCollapsed){P(this,Md)&&((a=P(this,lf))==null||a.hide(),he(this,Md,null),be(this,Ft,Uo).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===P(this,Md))return;const i=be(this,Ft,D3).call(this,e).closest(".textLayer");if(!i){P(this,Md)&&((o=P(this,lf))==null||o.hide(),he(this,Md,null),be(this,Ft,Uo).call(this,{hasSelectedText:!1}));return}if((s=P(this,lf))==null||s.hide(),he(this,Md,t),be(this,Ft,Uo).call(this,{hasSelectedText:!0}),!(P(this,ps)!==An.HIGHLIGHT&&P(this,ps)!==An.NONE)&&(P(this,ps)===An.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),he(this,Yg,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=P(this,ps)===An.HIGHLIGHT?be(this,Ft,V6).call(this,i):null;u==null||u.toggleDrawing();const l=new AbortController,h=this.combinedSignal(l),c=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),u==null||u.toggleDrawing(!0),f.type==="pointerup"&&be(this,Ft,A3).call(this,"main_toolbar"))};window.addEventListener("pointerup",c,{signal:h}),window.addEventListener("blur",c,{signal:h})}},A3=function(e=""){P(this,ps)===An.HIGHLIGHT?this.highlightSelection(e):P(this,FE)&&be(this,Ft,Lre).call(this)},Ure=function(){document.addEventListener("selectionchange",be(this,Ft,Mre).bind(this),{signal:this._signal})},Bre=function(){if(P(this,Kg))return;he(this,Kg,new AbortController);const e=this.combinedSignal(P(this,Kg));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},zre=function(){var e;(e=P(this,Kg))==null||e.abort(),he(this,Kg,null)},H6=function(){if(P(this,Zg))return;he(this,Zg,new AbortController);const e=this.combinedSignal(P(this,Zg));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Wre=function(){var e;(e=P(this,Zg))==null||e.abort(),he(this,Zg,null)},G6=function(){if(P(this,Xg))return;he(this,Xg,new AbortController);const e=this.combinedSignal(P(this,Xg));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},X6=function(){var e;(e=P(this,Xg))==null||e.abort(),he(this,Xg,null)},jre=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Uo=function(e){Object.entries(e).some(([r,i])=>P(this,zE)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(P(this,zE),e)}),P(this,ps)===An.HIGHLIGHT&&e.hasSelectedEditor===!1&&be(this,Ft,Ad).call(this,[[or.HIGHLIGHT_FREE,!0]]))},Ad=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},$re=async function(){if(!P(this,Qg)){he(this,Qg,!0);const e=[];for(const t of P(this,Ls).values())e.push(t.enable());await Promise.all(e);for(const t of P(this,Xa).values())t.enable()}},qre=function(){if(this.unselectAll(),P(this,Qg)){he(this,Qg,!1);for(const e of P(this,Ls).values())e.disable();for(const e of P(this,Xa).values())e.disable()}},K6=function(e){const t=P(this,Ls).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Vre=function(){let e=null;for(e of P(this,qr));return e},ZS=function(){if(P(this,Xa).size===0)return!0;if(P(this,Xa).size===1)for(const e of P(this,Xa).values())return e.isEmpty();return!1},Y6=function(e){for(const t of P(this,qr))t.unselect();P(this,qr).clear();for(const t of e)t.isEmpty()||(P(this,qr).add(t),t.select());be(this,Ft,Uo).call(this,{hasSelectedEditor:this.hasSelection})},nn(y2,"TRANSLATE_SMALL",1),nn(y2,"TRANSLATE_BIG",10);let s1=y2;var gs,hf,qc,q2,ff,Xu,V2,df,mu,Bd,qv,pf,nm,oh,JS,k3;const Bo=class Bo{constructor(e){ve(this,oh);ve(this,gs,null);ve(this,hf,!1);ve(this,qc,null);ve(this,q2,null);ve(this,ff,null);ve(this,Xu,null);ve(this,V2,!1);ve(this,df,null);ve(this,mu,null);ve(this,Bd,null);ve(this,qv,null);ve(this,pf,!1);he(this,mu,e),he(this,pf,e._uiManager.useNewAltTextFlow),P(Bo,nm)||he(Bo,nm,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Bo._l10n??(Bo._l10n=e)}async render(){const e=he(this,qc,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=he(this,q2,document.createElement("span"));e.append(t),P(this,pf)?(e.classList.add("new"),e.setAttribute("data-l10n-id",P(Bo,nm).missing),t.setAttribute("data-l10n-id",P(Bo,nm)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=P(this,mu)._uiManager._signal;e.addEventListener("contextmenu",ph,{signal:r}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),P(this,mu)._uiManager.editAltText(P(this,mu)),P(this,pf)&&P(this,mu)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:P(this,oh,JS)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(he(this,V2,!0),i(a))},{signal:r}),await be(this,oh,k3).call(this),e}finish(){P(this,qc)&&(P(this,qc).focus({focusVisible:P(this,V2)}),he(this,V2,!1))}isEmpty(){return P(this,pf)?P(this,gs)===null:!P(this,gs)&&!P(this,hf)}hasData(){return P(this,pf)?P(this,gs)!==null||!!P(this,Bd):this.isEmpty()}get guessedText(){return P(this,Bd)}async setGuessedText(e){P(this,gs)===null&&(he(this,Bd,e),he(this,qv,await Bo._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),be(this,oh,k3).call(this))}toggleAltTextBadge(e=!1){var t;if(!P(this,pf)||P(this,gs)){(t=P(this,df))==null||t.remove(),he(this,df,null);return}if(!P(this,df)){const r=he(this,df,document.createElement("div"));r.className="noAltTextBadge",P(this,mu).div.append(r)}P(this,df).classList.toggle("hidden",!e)}serialize(e){let t=P(this,gs);return!e&&P(this,Bd)===t&&(t=P(this,qv)),{altText:t,decorative:P(this,hf),guessedText:P(this,Bd),textWithDisclaimer:P(this,qv)}}get data(){return{altText:P(this,gs),decorative:P(this,hf)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:a=!1}){r&&(he(this,Bd,r),he(this,qv,i)),!(P(this,gs)===e&&P(this,hf)===t)&&(a||(he(this,gs,e),he(this,hf,t)),be(this,oh,k3).call(this))}toggle(e=!1){P(this,qc)&&(!e&&P(this,Xu)&&(clearTimeout(P(this,Xu)),he(this,Xu,null)),P(this,qc).disabled=!e)}shown(){P(this,mu)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:P(this,oh,JS)}})}destroy(){var e,t;(e=P(this,qc))==null||e.remove(),he(this,qc,null),he(this,q2,null),he(this,ff,null),(t=P(this,df))==null||t.remove(),he(this,df,null)}};gs=new WeakMap,hf=new WeakMap,qc=new WeakMap,q2=new WeakMap,ff=new WeakMap,Xu=new WeakMap,V2=new WeakMap,df=new WeakMap,mu=new WeakMap,Bd=new WeakMap,qv=new WeakMap,pf=new WeakMap,nm=new WeakMap,oh=new WeakSet,JS=function(){return P(this,gs)&&"added"||P(this,gs)===null&&this.guessedText&&"review"||"missing"},k3=async function(){var i,a,o;const e=P(this,qc);if(!e)return;if(P(this,pf)){if(e.classList.toggle("done",!!P(this,gs)),e.setAttribute("data-l10n-id",P(Bo,nm)[P(this,oh,JS)]),(i=P(this,q2))==null||i.setAttribute("data-l10n-id",P(Bo,nm)[`${P(this,oh,JS)}-label`]),!P(this,gs)){(a=P(this,ff))==null||a.remove();return}}else{if(!P(this,gs)&&!P(this,hf)){e.classList.remove("done"),(o=P(this,ff))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=P(this,ff);if(!t){he(this,ff,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${P(this,mu).id}`;const s=100,u=P(this,mu)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(P(this,Xu)),he(this,Xu,null)},{once:!0}),e.addEventListener("mouseenter",()=>{he(this,Xu,setTimeout(()=>{he(this,Xu,null),P(this,ff).classList.add("show"),P(this,mu)._reportTelemetry({action:"alt_text_tooltip"})},s))},{signal:u}),e.addEventListener("mouseleave",()=>{var l;P(this,Xu)&&(clearTimeout(P(this,Xu)),he(this,Xu,null)),(l=P(this,ff))==null||l.classList.remove("show")},{signal:u})}P(this,hf)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=P(this,gs)),t.parentNode||e.append(t);const r=P(this,mu).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},ve(Bo,nm,null),nn(Bo,"_l10n",null);let LN=Bo;var H2,Vv,jE,$E,qE,VE,HE,zd,Hv,Wd,Gv,rm,ry,Hre,Gre,Xre;const xj=class xj{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:o=null,signal:s}){ve(this,ry);ve(this,H2);ve(this,Vv,!1);ve(this,jE,null);ve(this,$E);ve(this,qE);ve(this,VE);ve(this,HE);ve(this,zd,null);ve(this,Hv);ve(this,Wd,null);ve(this,Gv);ve(this,rm,null);he(this,H2,e),he(this,jE,r),he(this,$E,t),he(this,qE,i),he(this,VE,a),he(this,HE,o),he(this,Gv,new AbortController),he(this,Hv,AbortSignal.any([s,P(this,Gv).signal])),e.addEventListener("touchstart",be(this,ry,Hre).bind(this),{passive:!1,signal:P(this,Hv)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Dp.pixelRatio}destroy(){var e,t;(e=P(this,Gv))==null||e.abort(),he(this,Gv,null),(t=P(this,zd))==null||t.abort(),he(this,zd,null)}};H2=new WeakMap,Vv=new WeakMap,jE=new WeakMap,$E=new WeakMap,qE=new WeakMap,VE=new WeakMap,HE=new WeakMap,zd=new WeakMap,Hv=new WeakMap,Wd=new WeakMap,Gv=new WeakMap,rm=new WeakMap,ry=new WeakSet,Hre=function(e){var i,a,o;if((i=P(this,$E))!=null&&i.call(this))return;if(e.touches.length===1){if(P(this,zd))return;const s=he(this,zd,new AbortController),u=AbortSignal.any([P(this,Hv),s.signal]),l=P(this,H2),h={capture:!0,signal:u,passive:!1},c=f=>{var d;f.pointerType==="touch"&&((d=P(this,zd))==null||d.abort(),he(this,zd,null))};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ka(f),c(f))},h),l.addEventListener("pointerup",c,h),l.addEventListener("pointercancel",c,h);return}if(!P(this,rm)){he(this,rm,new AbortController);const s=AbortSignal.any([P(this,Hv),P(this,rm).signal]),u=P(this,H2),l={signal:s,capture:!1,passive:!1};u.addEventListener("touchmove",be(this,ry,Gre).bind(this),l);const h=be(this,ry,Xre).bind(this);u.addEventListener("touchend",h,l),u.addEventListener("touchcancel",h,l),l.capture=!0,u.addEventListener("pointerdown",ka,l),u.addEventListener("pointermove",ka,l),u.addEventListener("pointercancel",ka,l),u.addEventListener("pointerup",ka,l),(a=P(this,qE))==null||a.call(this)}if(ka(e),e.touches.length!==2||(o=P(this,jE))!=null&&o.call(this)){he(this,Wd,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),he(this,Wd,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},Gre=function(e){var w;if(!P(this,Wd)||e.touches.length!==2)return;ka(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:a}=t,{screenX:o,screenY:s}=r,u=P(this,Wd),{touch0X:l,touch0Y:h,touch1X:c,touch1Y:f}=u,d=c-l,p=f-h,m=o-i,g=s-a,y=Math.hypot(m,g)||1,v=Math.hypot(d,p)||1;if(!P(this,Vv)&&Math.abs(v-y)<=xj.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=a,u.touch1X=o,u.touch1Y=s,!P(this,Vv)){he(this,Vv,!0);return}const b=[(i+o)/2,(a+s)/2];(w=P(this,VE))==null||w.call(this,b,v,y)},Xre=function(e){var t;e.touches.length>=2||(P(this,rm).abort(),he(this,rm,null),(t=P(this,HE))==null||t.call(this),P(this,Wd)&&(ka(e),he(this,Wd,null),he(this,Vv,!1)))};let MN=xj;var Xv,Vc,Ai,G2,im,GE,Kv,Ms,Yv,jd,am,XE,Qv,Ku,KE,Zv,$d,gf,X2,K2,Ql,Jv,YE,jO,vn,Q6,QE,Z6,N3,Kre,Yre,J6,O3,e8,Qre,Zre,Jre,t8,eie,n8,tie,nie,rie,r8,eC;const zn=class zn{constructor(e){ve(this,vn);ve(this,Xv,null);ve(this,Vc,null);ve(this,Ai,null);ve(this,G2,!1);ve(this,im,null);ve(this,GE,"");ve(this,Kv,!1);ve(this,Ms,null);ve(this,Yv,null);ve(this,jd,null);ve(this,am,null);ve(this,XE,"");ve(this,Qv,!1);ve(this,Ku,null);ve(this,KE,!1);ve(this,Zv,!1);ve(this,$d,!1);ve(this,gf,null);ve(this,X2,0);ve(this,K2,0);ve(this,Ql,null);ve(this,Jv,null);nn(this,"_isCopy",!1);nn(this,"_editToolbar",null);nn(this,"_initialOptions",Object.create(null));nn(this,"_initialData",null);nn(this,"_isVisible",!0);nn(this,"_uiManager",null);nn(this,"_focusEventsAllowed",!0);ve(this,YE,!1);ve(this,jO,zn._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[a,o];const[s,u]=this.parentDimensions;this.x=e.x/s,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=zn.prototype._resizeWithKeyboard,t=s1.TRANSLATE_SMALL,r=s1.TRANSLATE_BIG;return Zn(this,"_resizerKeyboardManager",new yD([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],zn.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Zn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new AAe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(zn._l10n??(zn._l10n=e),zn._l10nResizer||(zn._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),zn._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);zn._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ri("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return P(this,YE)}set _isDraggable(e){var t;he(this,YE,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=P(this,jO)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):be(this,vn,eC).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(P(this,Qv)?he(this,Qv,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[a,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/a,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i),this._onTranslated()}translate(e,t){be(this,vn,Q6).call(this,this.parentDimensions,e,t)}translateInPage(e,t){P(this,Ku)||he(this,Ku,[this.x,this.y,this.width,this.height]),be(this,vn,Q6).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){P(this,Ku)||he(this,Ku,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:s}=this;const[u,l]=this.getBaseTranslation();o+=u,s+=l;const{style:h}=r;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*s).toFixed(2)}%`,this._onTranslating(o,s),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!P(this,Ku)&&(P(this,Ku)[0]!==this.x||P(this,Ku)[1]!==this.y)}get _hasBeenResized(){return!!P(this,Ku)&&(P(this,Ku)[2]!==this.width||P(this,Ku)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=zn,i=r/e,a=r/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:a,y:o,width:s,height:u}=this;if(s*=r,u*=i,a*=r,o*=i,this._mustFixPosition)switch(e){case 0:a=ul(a,0,r-s),o=ul(o,0,i-u);break;case 90:a=ul(a,0,r-u),o=ul(o,s,i);break;case 180:a=ul(a,s,r),o=ul(o,u,i);break;case 270:a=ul(a,u,r),o=ul(o,0,i-s);break}this.x=a/=r,this.y=o/=i;const[l,h]=this.getBaseTranslation();a+=l,o+=h,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return be(r=zn,QE,Z6).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return be(r=zn,QE,Z6).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/r).toFixed(2)}%`,P(this,Kv)||(a.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),a=!P(this,Kv)&&t.endsWith("%");if(i&&a)return;const[o,s]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!P(this,Kv)&&!a&&(e.height=`${(100*parseFloat(t)/s).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=P(this,Ai))==null||e.finish()}async addEditToolbar(){return this._editToolbar||P(this,Zv)?this._editToolbar:(this._editToolbar=new j6(this),this.div.append(this._editToolbar.render()),P(this,Ai)&&await this._editToolbar.addAltText(P(this,Ai)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=P(this,Ai))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){P(this,Ai)||(LN.initialize(zn._l10n),he(this,Ai,new LN(this)),P(this,Xv)&&(P(this,Ai).data=P(this,Xv),he(this,Xv,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=P(this,Ai))==null?void 0:e.data}set altTextData(e){P(this,Ai)&&(P(this,Ai).data=e)}get guessedAltText(){var e;return(e=P(this,Ai))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=P(this,Ai))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=P(this,Ai))==null?void 0:t.serialize(e)}hasAltText(){return!!P(this,Ai)&&!P(this,Ai).isEmpty()}hasAltTextData(){var e;return((e=P(this,Ai))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=P(this,G2)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),be(this,vn,n8).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),m7(this,e,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(P(this,Jv)||he(this,Jv,new MN({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:be(this,vn,Qre).bind(this),onPinching:be(this,vn,Zre).bind(this),onPinchEnd:be(this,vn,Jre).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Gs.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(he(this,Qv,!0),this._isDraggable){be(this,vn,eie).call(this,e);return}be(this,vn,t8).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){P(this,gf)&&clearTimeout(P(this,gf)),he(this,gf,setTimeout(()=>{var e;he(this,gf,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[a,o]=this.pageDimensions,[s,u]=this.pageTranslation,l=e/i,h=t/i,c=this.x*a,f=this.y*o,d=this.width*a,p=this.height*o;switch(r){case 0:return[c+l+s,o-f-h-p+u,c+l+d+s,o-f-h+u];case 90:return[c+h+s,o-f+l+u,c+h+p+s,o-f+l+d+u];case 180:return[c-l-d+s,o-f+h+u,c-l+s,o-f+h+p+u];case 270:return[c-h-p+s,o-f-l-d+u,c-h+s,o-f-l+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,a,o]=e,s=a-r,u=o-i;switch(this.rotation){case 0:return[r,t-o,s,u];case 90:return[r,t-i,u,s];case 180:return[a,t-i,s,u];case 270:return[a,t-o,u,s];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){he(this,Zv,!0)}disableEditMode(){he(this,Zv,!1)}isInEditMode(){return P(this,Zv)}shouldGetKeyboardEvents(){return P(this,$d)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return t<o&&i>0&&e<a&&r>0}rebuild(){be(this,vn,n8).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){ri("An editor must be serializable")}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});i.rotation=e.rotation,he(i,Xv,e.accessibilityData),i._isCopy=e.isCopy||!1;const[a,o]=i.pageDimensions,[s,u,l,h]=i.getRectInCurrentCoords(e.rect,o);return i.x=s/a,i.y=u/o,i.width=l/a,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=P(this,am))==null||e.abort(),he(this,am,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),P(this,gf)&&(clearTimeout(P(this,gf)),he(this,gf,null)),be(this,vn,eC).call(this),this.removeEditToolbar(),P(this,Ql)){for(const r of P(this,Ql).values())clearTimeout(r);he(this,Ql,null)}this.parent=null,(t=P(this,Jv))==null||t.destroy(),he(this,Jv,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(be(this,vn,Kre).call(this),P(this,Ms).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),he(this,jd,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=P(this,Ms).children;if(!P(this,Vc)){he(this,Vc,Array.from(t));const o=be(this,vn,tie).bind(this),s=be(this,vn,nie).bind(this),u=this._uiManager._signal;for(const l of P(this,Vc)){const h=l.getAttribute("data-resizer-name");l.setAttribute("role","spinbutton"),l.addEventListener("keydown",o,{signal:u}),l.addEventListener("blur",s,{signal:u}),l.addEventListener("focus",be(this,vn,rie).bind(this,h),{signal:u}),l.setAttribute("data-l10n-id",zn._l10nResizer[h])}}const r=P(this,Vc)[0];let i=0;for(const o of t){if(o===r)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(P(this,Vc).length/4);if(a!==i){if(a<i)for(let s=0;s<i-a;s++)P(this,Ms).append(P(this,Ms).firstChild);else if(a>i)for(let s=0;s<a-i;s++)P(this,Ms).firstChild.before(P(this,Ms).lastChild);let o=0;for(const s of t){const l=P(this,Vc)[o++].getAttribute("data-resizer-name");s.setAttribute("data-l10n-id",zn._l10nResizer[l])}}be(this,vn,r8).call(this,0),he(this,$d,!0),P(this,Ms).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){P(this,$d)&&be(this,vn,e8).call(this,P(this,XE),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){be(this,vn,eC).call(this),this.div.focus()}select(){var e,t,r;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(r=P(this,Ai))==null||r.toggleAltTextBadge(!1)}unselect(){var e,t,r,i,a;(e=P(this,Ms))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=P(this,Ai))==null||a.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return P(this,KE)}set isEditing(e){he(this,KE,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){he(this,Kv,!0);const r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){P(this,Ql)||he(this,Ql,new Map);const{action:r}=e;let i=P(this,Ql).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),P(this,Ql).delete(r),P(this,Ql).size===0&&he(this,Ql,null)},zn._telemetryTimeout),P(this,Ql).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),he(this,G2,!1)}disable(){this.div&&(this.div.tabIndex=-1),he(this,G2,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Xv=new WeakMap,Vc=new WeakMap,Ai=new WeakMap,G2=new WeakMap,im=new WeakMap,GE=new WeakMap,Kv=new WeakMap,Ms=new WeakMap,Yv=new WeakMap,jd=new WeakMap,am=new WeakMap,XE=new WeakMap,Qv=new WeakMap,Ku=new WeakMap,KE=new WeakMap,Zv=new WeakMap,$d=new WeakMap,gf=new WeakMap,X2=new WeakMap,K2=new WeakMap,Ql=new WeakMap,Jv=new WeakMap,YE=new WeakMap,jO=new WeakMap,vn=new WeakSet,Q6=function([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},QE=new WeakSet,Z6=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},N3=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},Kre=function(){if(P(this,Ms))return;he(this,Ms,document.createElement("div")),P(this,Ms).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");P(this,Ms).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",be(this,vn,Yre).bind(this,r),{signal:t}),i.addEventListener("contextmenu",ph,{signal:t}),i.tabIndex=-1}this.div.prepend(P(this,Ms))},Yre=function(e,t){var h;t.preventDefault();const{isMac:r}=Gs.platform;if(t.button!==0||t.ctrlKey&&r)return;(h=P(this,Ai))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,he(this,Yv,[t.screenX,t.screenY]);const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",be(this,vn,e8).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ka,{passive:!1,signal:o}),window.addEventListener("contextmenu",ph,{signal:o}),he(this,jd,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const s=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const l=()=>{var c;a.abort(),this.parent.togglePointerEvents(!0),(c=P(this,Ai))==null||c.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=s,this.div.style.cursor=u,be(this,vn,O3).call(this)};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})},J6=function(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t;const[a,o]=this.parentDimensions;this.setDims(a*r,o*i),this.fixAndSetPosition(),this._onResized()},O3=function(){if(!P(this,jd))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=P(this,jd);he(this,jd,null);const a=this.x,o=this.y,s=this.width,u=this.height;a===e&&o===t&&s===r&&u===i||this.addCommands({cmd:be(this,vn,J6).bind(this,a,o,s,u),undo:be(this,vn,J6).bind(this,e,t,r,i),mustExec:!0})},e8=function(e,t){const[r,i]=this.parentDimensions,a=this.x,o=this.y,s=this.width,u=this.height,l=zn.MIN_SIZE/r,h=zn.MIN_SIZE/i,c=be(this,vn,N3).call(this,this.rotation),f=(B,W)=>[c[0]*B+c[2]*W,c[1]*B+c[3]*W],d=be(this,vn,N3).call(this,360-this.rotation),p=(B,W)=>[d[0]*B+d[2]*W,d[1]*B+d[3]*W];let m,g,y=!1,v=!1;switch(e){case"topLeft":y=!0,m=(B,W)=>[0,0],g=(B,W)=>[B,W];break;case"topMiddle":m=(B,W)=>[B/2,0],g=(B,W)=>[B/2,W];break;case"topRight":y=!0,m=(B,W)=>[B,0],g=(B,W)=>[0,W];break;case"middleRight":v=!0,m=(B,W)=>[B,W/2],g=(B,W)=>[0,W/2];break;case"bottomRight":y=!0,m=(B,W)=>[B,W],g=(B,W)=>[0,0];break;case"bottomMiddle":m=(B,W)=>[B/2,W],g=(B,W)=>[B/2,0];break;case"bottomLeft":y=!0,m=(B,W)=>[0,W],g=(B,W)=>[B,0];break;case"middleLeft":v=!0,m=(B,W)=>[0,W/2],g=(B,W)=>[B,W/2];break}const b=m(s,u),w=g(s,u);let x=f(...w);const S=zn._round(a+x[0]),E=zn._round(o+x[1]);let A=1,k=1,T,O;if(t.fromKeyboard)({deltaX:T,deltaY:O}=t);else{const{screenX:B,screenY:W}=t,[Y,z]=P(this,Yv);[T,O]=this.screenToPageTranslation(B-Y,W-z),P(this,Yv)[0]=B,P(this,Yv)[1]=W}if([T,O]=p(T/r,O/i),y){const B=Math.hypot(s,u);A=k=Math.max(Math.min(Math.hypot(w[0]-b[0]-T,w[1]-b[1]-O)/B,1/s,1/u),l/s,h/u)}else v?A=Math.max(l,Math.min(1,Math.abs(w[0]-b[0]-T)))/s:k=Math.max(h,Math.min(1,Math.abs(w[1]-b[1]-O)))/u;const F=zn._round(s*A),I=zn._round(u*k);x=f(...g(F,I));const R=S-x[0],U=E-x[1];P(this,Ku)||he(this,Ku,[this.x,this.y,this.width,this.height]),this.width=F,this.height=I,this.x=R,this.y=U,this.setDims(r*F,i*I),this.fixAndSetPosition(),this._onResizing()},Qre=function(){var e;he(this,jd,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=P(this,Ai))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Zre=function(e,t,r){let a=.7*(r/t)+1-.7;if(a===1)return;const o=be(this,vn,N3).call(this,this.rotation),s=(S,E)=>[o[0]*S+o[2]*E,o[1]*S+o[3]*E],[u,l]=this.parentDimensions,h=this.x,c=this.y,f=this.width,d=this.height,p=zn.MIN_SIZE/u,m=zn.MIN_SIZE/l;a=Math.max(Math.min(a,1/f,1/d),p/f,m/d);const g=zn._round(f*a),y=zn._round(d*a);if(g===f&&y===d)return;P(this,Ku)||he(this,Ku,[h,c,f,d]);const v=s(f/2,d/2),b=zn._round(h+v[0]),w=zn._round(c+v[1]),x=s(g/2,y/2);this.x=b-x[0],this.y=w-x[1],this.width=g,this.height=y,this.setDims(u*g,l*y),this.fixAndSetPosition(),this._onResizing()},Jre=function(){var e;(e=P(this,Ai))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),be(this,vn,O3).call(this)},t8=function(e){const{isMac:t}=Gs.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},eie=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:a},s=l=>{i.abort(),he(this,im,null),he(this,Qv,!1),this._uiManager.endDragSession()||be(this,vn,t8).call(this,l),r&&this._onStopDragging()};t&&(he(this,X2,e.clientX),he(this,K2,e.clientY),he(this,im,e.pointerId),he(this,GE,e.pointerType),window.addEventListener("pointermove",l=>{r||(r=!0,this._onStartDragging());const{clientX:h,clientY:c,pointerId:f}=l;if(f!==P(this,im)){ka(l);return}const[d,p]=this.screenToPageTranslation(h-P(this,X2),c-P(this,K2));he(this,X2,h),he(this,K2,c),this._uiManager.dragSelectedEditors(d,p)},o),window.addEventListener("touchmove",ka,o),window.addEventListener("pointerdown",l=>{l.pointerType===P(this,GE)&&(P(this,Jv)||l.isPrimary)&&s(l),ka(l)},o));const u=l=>{if(!P(this,im)||P(this,im)===l.pointerId){s(l);return}ka(l)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},n8=function(){if(P(this,am)||!this.div)return;he(this,am,new AbortController);const e=this._uiManager.combinedSignal(P(this,am));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},tie=function(e){zn._resizerKeyboardManager.exec(this,e)},nie=function(e){var t;P(this,$d)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==P(this,Ms)&&be(this,vn,eC).call(this)},rie=function(e){he(this,XE,P(this,$d)?e:"")},r8=function(e){if(P(this,Vc))for(const t of P(this,Vc))t.tabIndex=e},eC=function(){he(this,$d,!1),be(this,vn,r8).call(this,-1),be(this,vn,O3).call(this)},ve(zn,QE),nn(zn,"_l10n",null),nn(zn,"_l10nResizer",null),nn(zn,"_borderLineWidth",-1),nn(zn,"_colorManager",new q6),nn(zn,"_zIndex",1),nn(zn,"_telemetryTimeout",1e3);let zi=zn;class AAe extends zi{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const jG=3285377520,Vl=4294901760,nf=65535;class iie{constructor(e){this.h1=e?e&4294967295:jG,this.h2=e?e&4294967295:jG}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let m=0,g=e.length;m<g;m++){const y=e.charCodeAt(m);y<=255?t[r++]=y:(t[r++]=y>>>8,t[r++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,a=r-i*4,o=new Uint32Array(t.buffer,0,i);let s=0,u=0,l=this.h1,h=this.h2;const c=3432918353,f=461845907,d=c&nf,p=f&nf;for(let m=0;m<i;m++)m&1?(s=o[m],s=s*c&Vl|s*d&nf,s=s<<15|s>>>17,s=s*f&Vl|s*p&nf,l^=s,l=l<<13|l>>>19,l=l*5+3864292196):(u=o[m],u=u*c&Vl|u*d&nf,u=u<<15|u>>>17,u=u*f&Vl|u*p&nf,h^=u,h=h<<13|h>>>19,h=h*5+3864292196);switch(s=0,a){case 3:s^=t[i*4+2]<<16;case 2:s^=t[i*4+1]<<8;case 1:s^=t[i*4],s=s*c&Vl|s*d&nf,s=s<<15|s>>>17,s=s*f&Vl|s*p&nf,i&1?l^=s:h^=s}this.h1=l,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Vl|e*36045&nf,t=t*4283543511&Vl|((t<<16|e>>>16)*2950163797&Vl)>>>16,e^=t>>>1,e=e*444984403&Vl|e*60499&nf,t=t*3301882366&Vl|((t<<16|e>>>16)*3120437893&Vl)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const i8=Object.freeze({map:null,hash:"",transfer:void 0});var e0,t0,ms,$O,aie;class y7{constructor(){ve(this,$O);ve(this,e0,!1);ve(this,t0,null);ve(this,ms,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=P(this,ms).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return P(this,ms).get(e)}remove(e){if(P(this,ms).delete(e),P(this,ms).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of P(this,ms).values())if(t instanceof zi)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=P(this,ms).get(e);let i=!1;if(r!==void 0)for(const[a,o]of Object.entries(t))r[a]!==o&&(i=!0,r[a]=o);else i=!0,P(this,ms).set(e,t);i&&be(this,$O,aie).call(this),t instanceof zi&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return P(this,ms).has(e)}getAll(){return P(this,ms).size>0?c7(P(this,ms)):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return P(this,ms).size}resetModified(){P(this,e0)&&(he(this,e0,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new sie(this)}get serializable(){if(P(this,ms).size===0)return i8;const e=new Map,t=new iie,r=[],i=Object.create(null);let a=!1;for(const[o,s]of P(this,ms)){const u=s instanceof zi?s.serialize(!1,i):s;u&&(e.set(o,u),t.update(`${o}:${JSON.stringify(u)}`),a||(a=!!u.bitmap))}if(a)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:i8}get editorStats(){let e=null;const t=new Map;for(const r of P(this,ms).values()){if(!(r instanceof zi))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:a}=i;t.has(a)||t.set(a,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=e[a]||(e[a]=new Map);for(const[s,u]of Object.entries(i)){if(s==="type")continue;let l=o.get(s);l||(l=new Map,o.set(s,l));const h=l.get(u)??0;l.set(u,h+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){he(this,t0,null)}get modifiedIds(){if(P(this,t0))return P(this,t0);const e=[];for(const t of P(this,ms).values())!(t instanceof zi)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return he(this,t0,{ids:new Set(e),hash:e.join(",")})}}e0=new WeakMap,t0=new WeakMap,ms=new WeakMap,$O=new WeakSet,aie=function(){P(this,e0)||(he(this,e0,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ZE;class sie extends y7{constructor(t){super();ve(this,ZE);const{map:r,hash:i,transfer:a}=t.serializable,o=structuredClone(r,a?{transfer:a}:null);he(this,ZE,{map:o,hash:i,transfer:a})}get print(){ri("Should not call PrintAnnotationStorage.print")}get serializable(){return P(this,ZE)}get modifiedIds(){return Zn(this,"modifiedIds",{ids:new Set,hash:""})}}ZE=new WeakMap;var Y2;class kAe{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){ve(this,Y2,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),P(this,Y2).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||P(this,Y2).has(e.loadedName))){if(Ra(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:o}=e,s=new FontFace(i,a,o);this.addNativeFontFace(s);try{await s.load(),P(this,Y2).add(i),r==null||r(e)}catch{In(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(s)}return}ri("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw In(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Zn(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Zn(this,"isSyncFontLoadingSupported",Ws||Gs.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ra(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const a=r.shift();setTimeout(a.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Zn(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(w,x){return w.charCodeAt(x)<<24|w.charCodeAt(x+1)<<16|w.charCodeAt(x+2)<<8|w.charCodeAt(x+3)&255}function i(w,x,S,E){const A=w.substring(0,x),k=w.substring(x+S);return A+E+k}let a,o;const s=this._document.createElement("canvas");s.width=1,s.height=1;const u=s.getContext("2d");let l=0;function h(w,x){if(++l>30){In("Load test font never loaded."),x();return}if(u.font="30px "+w,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(h.bind(null,w,x))}const c=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,c.length,c);const p=16,m=1482184792;let g=r(f,p);for(a=0,o=c.length-3;a<o;a+=4)g=g-m+r(c,a)|0;a<c.length&&(g=g-m+r(c+"XXX",a)|0),f=i(f,p,4,pAe(g));const y=`url(data:font/opentype;base64,${btoa(f)});`,v=`@font-face {font-family:"${c}";src:${y}}`;this.insertRule(v);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const w of[e.loadedName,c]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=w,b.append(x)}this._document.body.append(b),h(c,()=>{b.remove(),t.complete()})}}Y2=new WeakMap;class NAe{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Dre(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(o){In(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=a}}const mk={DATA:1,ERROR:2},Da={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $G(){}function du(n){if(n instanceof qm||n instanceof B6||n instanceof BG||n instanceof PN||n instanceof aP)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||ri('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new qm(n.message);case"InvalidPDFException":return new B6(n.message);case"PasswordException":return new BG(n.message,n.code);case"ResponseException":return new PN(n.message,n.status,n.missing);case"UnknownErrorException":return new aP(n.message,n.details)}return new aP(n.message,n.toString())}var Q2,fc,oie,uie,lie,R3;class tC{constructor(e,t,r){ve(this,fc);ve(this,Q2,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",be(this,fc,oie).bind(this),{signal:P(this,Q2).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(o){a.reject(o)}return a.promise}sendWithStream(e,t,r,i){const a=this.streamId++,o=this.sourceName,s=this.targetName,u=this.comObj;return new ReadableStream({start:l=>{const h=Promise.withResolvers();return this.streamControllers[a]={controller:l,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:o,targetName:s,action:e,streamId:a,data:t,desiredSize:l.desiredSize},i),h.promise},pull:l=>{const h=Promise.withResolvers();return this.streamControllers[a].pullCall=h,u.postMessage({sourceName:o,targetName:s,stream:Da.PULL,streamId:a,desiredSize:l.desiredSize}),h.promise},cancel:l=>{Ra(l instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[a].cancelCall=h,this.streamControllers[a].isClosed=!0,u.postMessage({sourceName:o,targetName:s,stream:Da.CANCEL,streamId:a,reason:du(l)}),h.promise}},r)}destroy(){var e;(e=P(this,Q2))==null||e.abort(),he(this,Q2,null)}}Q2=new WeakMap,fc=new WeakSet,oie=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){be(this,fc,lie).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===mk.DATA)i.resolve(e.data);else if(e.callback===mk.ERROR)i.reject(du(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(o){a.postMessage({sourceName:r,targetName:i,callback:mk.DATA,callbackId:e.callbackId,data:o})},function(o){a.postMessage({sourceName:r,targetName:i,callback:mk.ERROR,callbackId:e.callbackId,reason:du(o)})});return}if(e.streamId){be(this,fc,uie).call(this,e);return}t(e.data)},uie=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,o=this,s=this.actionHandler[e.action],u={enqueue(l,h=1,c){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:i,stream:Da.ENQUEUE,streamId:t,chunk:l},c)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:Da.CLOSE,streamId:t}),delete o.streamSinks[t])},error(l){Ra(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:Da.ERROR,streamId:t,reason:du(l)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(s,e.data,u).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Da.START_COMPLETE,streamId:t,success:!0})},function(l){a.postMessage({sourceName:r,targetName:i,stream:Da.START_COMPLETE,streamId:t,reason:du(l)})})},lie=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,o=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case Da.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(du(e.reason));break;case Da.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(du(e.reason));break;case Da.PULL:if(!s){a.postMessage({sourceName:r,targetName:i,stream:Da.PULL_COMPLETE,streamId:t,success:!0});break}s.desiredSize<=0&&e.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=e.desiredSize,Promise.try(s.onPull||$G).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Da.PULL_COMPLETE,streamId:t,success:!0})},function(l){a.postMessage({sourceName:r,targetName:i,stream:Da.PULL_COMPLETE,streamId:t,reason:du(l)})});break;case Da.ENQUEUE:if(Ra(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Da.CLOSE:if(Ra(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),be(this,fc,R3).call(this,o,t);break;case Da.ERROR:Ra(o,"error should have stream controller"),o.controller.error(du(e.reason)),be(this,fc,R3).call(this,o,t);break;case Da.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(du(e.reason)),be(this,fc,R3).call(this,o,t);break;case Da.CANCEL:if(!s)break;const u=du(e.reason);Promise.try(s.onCancel||$G,u).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Da.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){a.postMessage({sourceName:r,targetName:i,stream:Da.CANCEL_COMPLETE,streamId:t,reason:du(l)})}),s.sinkCapability.reject(u),s.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},R3=async function(e,t){var r,i,a;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var JE;class cie{constructor({enableHWA:e=!1}){ve(this,JE,!1);he(this,JE,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!P(this,JE)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ri("Abstract method `_createCanvas` called.")}}JE=new WeakMap;class OAe extends cie{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class hie{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ri("Abstract method `_fetch` called.")}}class qG extends hie{async _fetch(e){const t=await gD(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):pD(t)}}class fie{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,a){return"none"}destroy(e=!1){}}var n0,Z2,qd,Vd,so,r0,i0,Ht,io,nC,n2,I3,r2,die,a8,i2,rC,iC,s8,aC;class RAe extends fie{constructor({docId:t,ownerDocument:r=globalThis.document}){super();ve(this,Ht);ve(this,n0);ve(this,Z2);ve(this,qd);ve(this,Vd);ve(this,so);ve(this,r0);ve(this,i0,0);he(this,Vd,t),he(this,so,r)}addFilter(t){if(!t)return"none";let r=P(this,Ht,io).get(t);if(r)return r;const[i,a,o]=be(this,Ht,I3).call(this,t),s=t.length===1?i:`${i}${a}${o}`;if(r=P(this,Ht,io).get(s),r)return P(this,Ht,io).set(t,r),r;const u=`g_${P(this,Vd)}_transfer_map_${Mo(this,i0)._++}`,l=be(this,Ht,r2).call(this,u);P(this,Ht,io).set(t,l),P(this,Ht,io).set(s,l);const h=be(this,Ht,i2).call(this,u);return be(this,Ht,iC).call(this,i,a,o,h),l}addHCMFilter(t,r){var p;const i=`${t}-${r}`,a="base";let o=P(this,Ht,nC).get(a);if((o==null?void 0:o.key)===i||(o?((p=o.filter)==null||p.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},P(this,Ht,nC).set(a,o)),!t||!r))return o.url;const s=be(this,Ht,aC).call(this,t);t=cn.makeHexColor(...s);const u=be(this,Ht,aC).call(this,r);if(r=cn.makeHexColor(...u),P(this,Ht,n2).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const l=new Array(256);for(let m=0;m<=255;m++){const g=m/255;l[m]=g<=.03928?g/12.92:((g+.055)/1.055)**2.4}const h=l.join(","),c=`g_${P(this,Vd)}_hcm_filter`,f=o.filter=be(this,Ht,i2).call(this,c);be(this,Ht,iC).call(this,h,h,h,f),be(this,Ht,a8).call(this,f);const d=(m,g)=>{const y=s[m]/255,v=u[m]/255,b=new Array(g+1);for(let w=0;w<=g;w++)b[w]=y+w/g*(v-y);return b.join(",")};return be(this,Ht,iC).call(this,d(0,5),d(1,5),d(2,5),f),o.url=be(this,Ht,r2).call(this,c),o.url}addAlphaFilter(t){let r=P(this,Ht,io).get(t);if(r)return r;const[i]=be(this,Ht,I3).call(this,[t]),a=`alpha_${i}`;if(r=P(this,Ht,io).get(a),r)return P(this,Ht,io).set(t,r),r;const o=`g_${P(this,Vd)}_alpha_map_${Mo(this,i0)._++}`,s=be(this,Ht,r2).call(this,o);P(this,Ht,io).set(t,s),P(this,Ht,io).set(a,s);const u=be(this,Ht,i2).call(this,o);return be(this,Ht,s8).call(this,i,u),s}addLuminosityFilter(t){let r=P(this,Ht,io).get(t||"luminosity");if(r)return r;let i,a;if(t?([i]=be(this,Ht,I3).call(this,[t]),a=`luminosity_${i}`):a="luminosity",r=P(this,Ht,io).get(a),r)return P(this,Ht,io).set(t,r),r;const o=`g_${P(this,Vd)}_luminosity_map_${Mo(this,i0)._++}`,s=be(this,Ht,r2).call(this,o);P(this,Ht,io).set(t,s),P(this,Ht,io).set(a,s);const u=be(this,Ht,i2).call(this,o);return be(this,Ht,die).call(this,u),t&&be(this,Ht,s8).call(this,i,u),s}addHighlightHCMFilter(t,r,i,a,o){var v;const s=`${r}-${i}-${a}-${o}`;let u=P(this,Ht,nC).get(t);if((u==null?void 0:u.key)===s||(u?((v=u.filter)==null||v.remove(),u.key=s,u.url="none",u.filter=null):(u={key:s,url:"none",filter:null},P(this,Ht,nC).set(t,u)),!r||!i))return u.url;const[l,h]=[r,i].map(be(this,Ht,aC).bind(this));let c=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[d,p]=[a,o].map(be(this,Ht,aC).bind(this));f<c&&([c,f,d,p]=[f,c,p,d]),P(this,Ht,n2).style.color="";const m=(b,w,x)=>{const S=new Array(256),E=(f-c)/x,A=b/255,k=(w-b)/(255*x);let T=0;for(let O=0;O<=x;O++){const F=Math.round(c+O*E),I=A+O*k;for(let R=T;R<=F;R++)S[R]=I;T=F+1}for(let O=T;O<256;O++)S[O]=S[T-1];return S.join(",")},g=`g_${P(this,Vd)}_hcm_${t}_filter`,y=u.filter=be(this,Ht,i2).call(this,g);return be(this,Ht,a8).call(this,y),be(this,Ht,iC).call(this,m(d[0],p[0],5),m(d[1],p[1],5),m(d[2],p[2],5),y),u.url=be(this,Ht,r2).call(this,g),u.url}destroy(t=!1){var r,i,a,o;t&&((r=P(this,r0))!=null&&r.size)||((i=P(this,qd))==null||i.parentNode.parentNode.remove(),he(this,qd,null),(a=P(this,Z2))==null||a.clear(),he(this,Z2,null),(o=P(this,r0))==null||o.clear(),he(this,r0,null),he(this,i0,0))}}n0=new WeakMap,Z2=new WeakMap,qd=new WeakMap,Vd=new WeakMap,so=new WeakMap,r0=new WeakMap,i0=new WeakMap,Ht=new WeakSet,io=function(){return P(this,Z2)||he(this,Z2,new Map)},nC=function(){return P(this,r0)||he(this,r0,new Map)},n2=function(){if(!P(this,qd)){const t=P(this,so).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=P(this,so).createElementNS(Dd,"svg");i.setAttribute("width",0),i.setAttribute("height",0),he(this,qd,P(this,so).createElementNS(Dd,"defs")),t.append(i),i.append(P(this,qd)),P(this,so).body.append(t)}return P(this,qd)},I3=function(t){if(t.length===1){const l=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=l[f]/255;const c=h.join(",");return[c,c,c]}const[r,i,a]=t,o=new Array(256),s=new Array(256),u=new Array(256);for(let l=0;l<256;l++)o[l]=r[l]/255,s[l]=i[l]/255,u[l]=a[l]/255;return[o.join(","),s.join(","),u.join(",")]},r2=function(t){if(P(this,n0)===void 0){he(this,n0,"");const r=P(this,so).URL;r!==P(this,so).baseURI&&(dI(r)?In('#createUrl: ignore "data:"-URL for performance reasons.'):he(this,n0,r.split("#",1)[0]))}return`url(${P(this,n0)}#${t})`},die=function(t){const r=P(this,so).createElementNS(Dd,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},a8=function(t){const r=P(this,so).createElementNS(Dd,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},i2=function(t){const r=P(this,so).createElementNS(Dd,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),P(this,Ht,n2).append(r),r},rC=function(t,r,i){const a=P(this,so).createElementNS(Dd,r);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)},iC=function(t,r,i,a){const o=P(this,so).createElementNS(Dd,"feComponentTransfer");a.append(o),be(this,Ht,rC).call(this,o,"feFuncR",t),be(this,Ht,rC).call(this,o,"feFuncG",r),be(this,Ht,rC).call(this,o,"feFuncB",i)},s8=function(t,r){const i=P(this,so).createElementNS(Dd,"feComponentTransfer");r.append(i),be(this,Ht,rC).call(this,i,"feFuncA",t)},aC=function(t){return P(this,Ht,n2).style.color=t,g7(getComputedStyle(P(this,Ht,n2)).getPropertyValue("color"))};class pie{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ri("Abstract method `_fetch` called.")}}class VG extends pie{async _fetch(e){const t=await gD(e,"arraybuffer");return new Uint8Array(t)}}class gie{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){ri("Abstract method `_fetch` called.")}}class HG extends gie{async _fetch(e){const t=await gD(e,"arraybuffer");return new Uint8Array(t)}}Ws&&In("Please use the `legacy` build in Node.js environments.");async function v7(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class IAe extends fie{}class FAe extends cie{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class PAe extends hie{async _fetch(e){return v7(e)}}class LAe extends pie{async _fetch(e){return v7(e)}}class MAe extends gie{async _fetch(e){return v7(e)}}const co={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function o8(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class b7{getPattern(){ri("Abstract method `getPattern` called.")}}class UAe extends b7{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let a;if(i===co.STROKE||i===co.FILL){const o=t.current.getClippedPathBoundingBox(i,Mi(e))||[0,0,0,0],s=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,l=t.cachedCanvases.getCanvas("pattern",s,u),h=l.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),r=cn.transform(r,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),o8(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),a=e.createPattern(l.canvas,"no-repeat");const c=new DOMMatrix(r);a.setTransform(c)}else o8(e,this._bbox),a=this._createGradient(e);return a}}function uP(n,e,t,r,i,a,o,s){const u=e.coords,l=e.colors,h=n.data,c=n.width*4;let f;u[t+1]>u[r+1]&&(f=t,t=r,r=f,f=a,a=o,o=f),u[r+1]>u[i+1]&&(f=r,r=i,i=f,f=o,o=s,s=f),u[t+1]>u[r+1]&&(f=t,t=r,r=f,f=a,a=o,o=f);const d=(u[t]+e.offsetX)*e.scaleX,p=(u[t+1]+e.offsetY)*e.scaleY,m=(u[r]+e.offsetX)*e.scaleX,g=(u[r+1]+e.offsetY)*e.scaleY,y=(u[i]+e.offsetX)*e.scaleX,v=(u[i+1]+e.offsetY)*e.scaleY;if(p>=v)return;const b=l[a],w=l[a+1],x=l[a+2],S=l[o],E=l[o+1],A=l[o+2],k=l[s],T=l[s+1],O=l[s+2],F=Math.round(p),I=Math.round(v);let R,U,B,W,Y,z,j,M;for(let q=F;q<=I;q++){if(q<g){const X=q<p?0:(p-q)/(p-g);R=d-(d-m)*X,U=b-(b-S)*X,B=w-(w-E)*X,W=x-(x-A)*X}else{let X;q>v?X=1:g===v?X=0:X=(g-q)/(g-v),R=m-(m-y)*X,U=S-(S-k)*X,B=E-(E-T)*X,W=A-(A-O)*X}let H;q<p?H=0:q>v?H=1:H=(p-q)/(p-v),Y=d-(d-y)*H,z=b-(b-k)*H,j=w-(w-T)*H,M=x-(x-O)*H;const K=Math.round(Math.min(R,Y)),Z=Math.round(Math.max(R,Y));let J=c*q+K*4;for(let X=K;X<=Z;X++)H=(R-X)/(R-Y),H<0?H=0:H>1&&(H=1),h[J++]=U-(U-z)*H|0,h[J++]=B-(B-j)*H|0,h[J++]=W-(W-M)*H|0,h[J++]=255}}function BAe(n,e,t){const r=e.coords,i=e.colors;let a,o;switch(e.type){case"lattice":const s=e.verticesPerRow,u=Math.floor(r.length/s)-1,l=s-1;for(a=0;a<u;a++){let h=a*s;for(let c=0;c<l;c++,h++)uP(n,t,r[h],r[h+1],r[h+s],i[h],i[h+1],i[h+s]),uP(n,t,r[h+s+1],r[h+1],r[h+s],i[h+s+1],i[h+1],i[h+s])}break;case"triangles":for(a=0,o=r.length;a<o;a+=3)uP(n,t,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class zAe extends b7{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const s=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-s,h=Math.ceil(this._bounds[3])-u,c=Math.min(Math.ceil(Math.abs(l*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),d=l/c,p=h/f,m={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-u,scaleX:1/d,scaleY:1/p},g=c+2*2,y=f+2*2,v=r.getCanvas("mesh",g,y),b=v.context,w=b.createImageData(c,f);if(t){const S=w.data;for(let E=0,A=S.length;E<A;E+=4)S[E]=t[0],S[E+1]=t[1],S[E+2]=t[2],S[E+3]=255}for(const S of this._figures)BAe(w,S,m);return b.putImageData(w,2,2),{canvas:v.canvas,offsetX:s-2*d,offsetY:u-2*p,scaleX:d,scaleY:p}}getPattern(e,t,r,i){o8(e,this._bbox);let a;if(i===co.SHADING)a=cn.singularValueDecompose2dScale(Mi(e));else if(a=cn.singularValueDecompose2dScale(t.baseTransform),this.matrix){const s=cn.singularValueDecompose2dScale(this.matrix);a=[a[0]*s[0],a[1]*s[1]]}const o=this._createMeshCanvas(a,i===co.SHADING?null:this._background,t.cachedCanvases);return i!==co.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class WAe extends b7{getPattern(){return"hotpink"}}function jAe(n){switch(n[0]){case"RadialAxial":return new UAe(n);case"Mesh":return new zAe(n);case"Dummy":return new WAe}throw new Error(`Unknown IR type: ${n[0]}`)}const GG={COLORED:1,UNCOLORED:2},qO=class qO{constructor(e,t,r,i,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:i,tilingType:a,color:o,canvasGraphicsFactory:s}=this;let{xstep:u,ystep:l}=this;u=Math.abs(u),l=Math.abs(l),fI("TilingType: "+a);const h=t[0],c=t[1],f=t[2],d=t[3],p=f-h,m=d-c,g=cn.singularValueDecompose2dScale(this.matrix),y=cn.singularValueDecompose2dScale(this.baseTransform),v=g[0]*y[0],b=g[1]*y[1];let w=p,x=m,S=!1,E=!1;const A=Math.ceil(u*v),k=Math.ceil(l*b),T=Math.ceil(p*v),O=Math.ceil(m*b);A>=T?w=u:S=!0,k>=O?x=l:E=!0;const F=this.getSizeAndScale(w,this.ctx.canvas.width,v),I=this.getSizeAndScale(x,this.ctx.canvas.height,b),R=e.cachedCanvases.getCanvas("pattern",F.size,I.size),U=R.context,B=s.createCanvasGraphics(U);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,i,o),U.translate(-F.scale*h,-I.scale*c),B.transform(F.scale,0,0,I.scale,0,0),U.save(),this.clipBbox(B,h,c,f,d),B.baseTransform=Mi(B.ctx),B.executeOperatorList(r),B.endDrawing(),U.restore(),S||E){const W=R.canvas;S&&(w=u),E&&(x=l);const Y=this.getSizeAndScale(w,this.ctx.canvas.width,v),z=this.getSizeAndScale(x,this.ctx.canvas.height,b),j=Y.size,M=z.size,q=e.cachedCanvases.getCanvas("pattern-workaround",j,M),H=q.context,K=S?Math.floor(p/u):0,Z=E?Math.floor(m/l):0;for(let J=0;J<=K;J++)for(let X=0;X<=Z;X++)H.drawImage(W,j*J,M*X,j,M,0,0,j,M);return{canvas:q.canvas,scaleX:Y.scale,scaleY:z.scale,offsetX:h,offsetY:c}}return{canvas:R.canvas,scaleX:F.scale,scaleY:I.scale,offsetX:h,offsetY:c}}getSizeAndScale(e,t,r){const i=Math.max(qO.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*r);return a>=i?a=i:r=a/e,{scale:r,size:a}}clipBbox(e,t,r,i,a){const o=i-t,s=a-r;e.ctx.rect(t,r,o,s),e.current.updateRectMinMax(Mi(e.ctx),[t,r,i,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,a=e.current;switch(t){case GG.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,a.fillColor=o.fillStyle,a.strokeColor=o.strokeStyle;break;case GG.UNCOLORED:const s=cn.makeHexColor(r[0],r[1],r[2]);i.fillStyle=s,i.strokeStyle=s,a.fillColor=s,a.strokeColor=s;break;default:throw new dAe(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,i){let a=r;i!==co.SHADING&&(a=cn.transform(a,t.baseTransform),this.matrix&&(a=cn.transform(a,this.matrix)));const o=this.createPatternCanvas(t);let s=new DOMMatrix(a);s=s.translate(o.offsetX,o.offsetY),s=s.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(s),u}};nn(qO,"MAX_PATTERN_SIZE",3e3);let u8=qO;function $Ae({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const s=Gs.isLittleEndian?4278190080:255,[u,l]=o?[a,s]:[s,a],h=r>>3,c=r&7,f=n.length;t=new Uint32Array(t.buffer);let d=0;for(let p=0;p<i;p++){for(const g=e+h;e<g;e++){const y=e<f?n[e]:255;t[d++]=y&128?l:u,t[d++]=y&64?l:u,t[d++]=y&32?l:u,t[d++]=y&16?l:u,t[d++]=y&8?l:u,t[d++]=y&4?l:u,t[d++]=y&2?l:u,t[d++]=y&1?l:u}if(c===0)continue;const m=e<f?n[e++]:255;for(let g=0;g<c;g++)t[d++]=m&1<<7-g?l:u}return{srcPos:e,destPos:d}}const XG=16,KG=100,qAe=15,YG=10,QG=1e3,bu=16;function VAe(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,i){e.translate(r,i),this.__originalTranslate(r,i)},n.scale=function(r,i){e.scale(r,i),this.__originalScale(r,i)},n.transform=function(r,i,a,o,s,u){e.transform(r,i,a,o,s,u),this.__originalTransform(r,i,a,o,s,u)},n.setTransform=function(r,i,a,o,s,u){e.setTransform(r,i,a,o,s,u),this.__originalSetTransform(r,i,a,o,s,u)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,a,o,s){e.bezierCurveTo(t,r,i,a,o,s),this.__originalBezierCurveTo(t,r,i,a,o,s)},n.rect=function(t,r,i,a){e.rect(t,r,i,a),this.__originalRect(t,r,i,a)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class HAe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function yk(n,e,t,r,i,a,o,s,u,l){const[h,c,f,d,p,m]=Mi(n);if(c===0&&f===0){const v=o*h+p,b=Math.round(v),w=s*d+m,x=Math.round(w),S=(o+u)*h+p,E=Math.abs(Math.round(S)-b)||1,A=(s+l)*d+m,k=Math.abs(Math.round(A)-x)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(d),b,x),n.drawImage(e,t,r,i,a,0,0,E,k),n.setTransform(h,c,f,d,p,m),[E,k]}if(h===0&&d===0){const v=s*f+p,b=Math.round(v),w=o*c+m,x=Math.round(w),S=(s+l)*f+p,E=Math.abs(Math.round(S)-b)||1,A=(o+u)*c+m,k=Math.abs(Math.round(A)-x)||1;return n.setTransform(0,Math.sign(c),Math.sign(f),0,b,x),n.drawImage(e,t,r,i,a,0,0,k,E),n.setTransform(h,c,f,d,p,m),[k,E]}n.drawImage(e,t,r,i,a,o,s,u,l);const g=Math.hypot(h,c),y=Math.hypot(f,d);return[g*u,y*l]}function GAe(n){const{width:e,height:t}=n;if(e>QG||t>QG)return null;const r=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=e+1;let o=new Uint8Array(a*(t+1)),s,u,l;const h=e+7&-8;let c=new Uint8Array(h*t),f=0;for(const y of n.data){let v=128;for(;v>0;)c[f++]=y&v?0:255,v>>=1}let d=0;for(f=0,c[f]!==0&&(o[0]=1,++d),u=1;u<e;u++)c[f]!==c[f+1]&&(o[u]=c[f]?2:1,++d),f++;for(c[f]!==0&&(o[u]=2,++d),s=1;s<t;s++){f=s*h,l=s*a,c[f-h]!==c[f]&&(o[l]=c[f]?1:8,++d);let y=(c[f]?4:0)+(c[f-h]?8:0);for(u=1;u<e;u++)y=(y>>2)+(c[f+1]?4:0)+(c[f-h+1]?8:0),i[y]&&(o[l+u]=i[y],++d),f++;if(c[f-h]!==c[f]&&(o[l+u]=c[f]?2:4,++d),d>r)return null}for(f=h*(t-1),l=s*a,c[f]!==0&&(o[l]=8,++d),u=1;u<e;u++)c[f]!==c[f+1]&&(o[l+u]=c[f]?4:8,++d),f++;if(c[f]!==0&&(o[l+u]=4,++d),d>r)return null;const p=new Int32Array([0,a,-1,0,-a,0,0,0,1]),m=new Path2D;for(s=0;d&&s<=t;s++){let y=s*a;const v=y+e;for(;y<v&&!o[y];)y++;if(y===v)continue;m.moveTo(y%a,s);const b=y;let w=o[y];do{const x=p[w];do y+=x;while(!o[y]);const S=o[y];S!==5&&S!==10?(w=S,o[y]=0):(w=S&51*w>>4,o[y]&=w>>2|w<<2),m.lineTo(y%a,y/a|0),o[y]||--d}while(b!==y);--s}return c=null,o=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(m),y.beginPath(),y.restore()}}class ZG{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Cre,this.textMatrixScale=1,this.fontMatrix=U6,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=ro.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=cn.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=cn.applyTransform(t,e),i=cn.applyTransform(t.slice(2),e),a=cn.applyTransform([t[0],t[3]],e),o=cn.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],i[0],a[0],o[0]),this.minY=Math.min(this.minY,r[1],i[1],a[1],o[1]),this.maxX=Math.max(this.maxX,r[0],i[0],a[0],o[0]),this.maxY=Math.max(this.maxY,r[1],i[1],a[1],o[1])}updateScalingPathMinMax(e,t){cn.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,a,o,s,u,l,h){const c=cn.bezierBoundingBox(t,r,i,a,o,s,u,l,h);h||this.updateRectMinMax(e,c)}getPathBoundingBox(e=co.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===co.STROKE){t||ri("Stroke bounding box must include transform.");const i=cn.singularValueDecompose2dScale(t),a=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;r[0]-=a,r[1]-=o,r[2]+=a,r[3]+=o}return r}updateClipFromPath(){const e=cn.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=co.FILL,t=null){return cn.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function JG(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%bu,a=(t-i)/bu,o=i===0?a:a+1,s=n.createImageData(r,bu);let u=0,l;const h=e.data,c=s.data;let f,d,p,m;if(e.kind===S3.GRAYSCALE_1BPP){const g=h.byteLength,y=new Uint32Array(c.buffer,0,c.byteLength>>2),v=y.length,b=r+7>>3,w=4294967295,x=Gs.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(p=f<a?bu:i,l=0,d=0;d<p;d++){const S=g-u;let E=0;const A=S>b?r:S*8-7,k=A&-8;let T=0,O=0;for(;E<k;E+=8)O=h[u++],y[l++]=O&128?w:x,y[l++]=O&64?w:x,y[l++]=O&32?w:x,y[l++]=O&16?w:x,y[l++]=O&8?w:x,y[l++]=O&4?w:x,y[l++]=O&2?w:x,y[l++]=O&1?w:x;for(;E<A;E++)T===0&&(O=h[u++],T=128),y[l++]=O&T?w:x,T>>=1}for(;l<v;)y[l++]=0;n.putImageData(s,0,f*bu)}}else if(e.kind===S3.RGBA_32BPP){for(d=0,m=r*bu*4,f=0;f<a;f++)c.set(h.subarray(u,u+m)),u+=m,n.putImageData(s,0,d),d+=bu;f<o&&(m=r*i*4,c.set(h.subarray(u,u+m)),n.putImageData(s,0,d))}else if(e.kind===S3.RGB_24BPP)for(p=bu,m=r*p,f=0;f<o;f++){for(f>=a&&(p=i,m=r*p),l=0,d=m;d--;)c[l++]=h[u++],c[l++]=h[u++],c[l++]=h[u++],c[l++]=255;n.putImageData(s,0,f*bu)}else throw new Error(`bad image kind: ${e.kind}`)}function eX(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%bu,a=(t-i)/bu,o=i===0?a:a+1,s=n.createImageData(r,bu);let u=0;const l=e.data,h=s.data;for(let c=0;c<o;c++){const f=c<a?bu:i;({srcPos:u}=$Ae({src:l,srcPos:u,dest:h,width:r,height:f,nonBlackColor:0})),n.putImageData(s,0,c*bu)}}function V_(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function vk(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Ws){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function tX(n,e){if(e)return!0;const t=cn.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround(Dp.pixelRatio*Vm.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const XAe=["butt","round","square"],KAe=["miter","round","bevel"],YAe={},nX={};var bh,l8,c8,h8;const _j=class _j{constructor(e,t,r,i,a,{optionalContentConfig:o,markedContentStack:s=null},u,l){ve(this,bh);this.ctx=e,this.current=new ZG(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=s||[],this.optionalContentConfig=o,this.cachedCanvases=new HAe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,s=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=s,r){const u=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Mi(this.compositeCtx))}this.ctx.save(),vk(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Mi(this.ctx)}executeOperatorList(e,t,r,i){const a=e.argsArray,o=e.fnArray;let s=t||0;const u=a.length;if(u===s)return s;const l=u-s>YG&&typeof r=="function",h=l?Date.now()+qAe:0;let c=0;const f=this.commonObjs,d=this.objs;let p;for(;;){if(i!==void 0&&s===i.nextBreakPoint)return i.breakIt(s,r),s;if(p=o[s],p!==jc.dependency)this[p].apply(this,a[s]);else for(const m of a[s]){const g=m.startsWith("g_")?f:d;if(!g.has(m))return g.get(m,r),s}if(s++,s===u)return s;if(l&&++c>YG){if(Date.now()>h)return r(),s;c=0}}}endDrawing(){be(this,bh,l8).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),be(this,bh,c8).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),s=r,u=i,l="prescale1",h,c;for(;a>2&&s>1||o>2&&u>1;){let f=s,d=u;a>2&&s>1&&(f=s>=16384?Math.floor(s/2)-1||1:Math.ceil(s/2),a/=s/f),o>2&&u>1&&(d=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,o/=u/d),h=this.cachedCanvases.getCanvas(l,f,d),c=h.context,c.clearRect(0,0,f,d),c.drawImage(e,0,0,s,u,0,0,f,d),e=h.canvas,s=f,u=d,l=l==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:s,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:i}=e,a=this.current.fillColor,o=this.current.patternFill,s=Mi(t);let u,l,h,c;if((e.bitmap||e.data)&&e.count>1){const A=e.bitmap||e.data.buffer;l=JSON.stringify(o?s:[s.slice(0,4),a]),u=this._cachedBitmapsMap.get(A),u||(u=new Map,this._cachedBitmapsMap.set(A,u));const k=u.get(l);if(k&&!o){const T=Math.round(Math.min(s[0],s[2])+s[4]),O=Math.round(Math.min(s[1],s[3])+s[5]);return{canvas:k,offsetX:T,offsetY:O}}h=k}h||(c=this.cachedCanvases.getCanvas("maskCanvas",r,i),eX(c.context,e));let f=cn.transform(s,[1/r,0,0,-1/i,0,0]);f=cn.transform(f,[1,0,0,1,0,-i]);const[d,p,m,g]=cn.getAxialAlignedBoundingBox([0,0,r,i],f),y=Math.round(m-d)||1,v=Math.round(g-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",y,v),w=b.context,x=d,S=p;w.translate(-x,-S),w.transform(...f),h||(h=this._scaleImage(c.canvas,tf(w)),h=h.img,u&&o&&u.set(l,h)),w.imageSmoothingEnabled=tX(Mi(w),e.interpolate),yk(w,h,0,0,h.width,h.height,0,0,r,i),w.globalCompositeOperation="source-in";const E=cn.transform(tf(w),[1,0,0,1,-x,-S]);return w.fillStyle=o?a.getPattern(t,this,E,co.FILL):a,w.fillRect(0,0,r,i),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(l,b.canvas)),{canvas:b.canvas,offsetX:Math.round(x),offsetY:Math.round(S)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=XAe[e]}setLineJoin(e){this.ctx.lineJoin=KAe[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const a=this.ctx;a.setTransform(...Mi(this.suspendedCtx)),V_(this.suspendedCtx,a),VAe(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),V_(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const a=i[0],o=i[1],s=i[2]-a,u=i[3]-o;s===0||u===0||(this.genericComposeSMask(t.context,r,s,u,t.subtype,t.backdrop,t.transferMap,a,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,a,o,s,u,l,h,c){let f=e.canvas,d=u-h,p=l-c;if(o){const g=cn.makeHexColor(...o);if(d<0||p<0||d+r>f.width||p+i>f.height){const y=this.cachedCanvases.getCanvas("maskExtension",r,i),v=y.context;v.drawImage(f,-d,-p),v.globalCompositeOperation="destination-atop",v.fillStyle=g,v.fillRect(0,0,r,i),v.globalCompositeOperation="source-over",f=y.canvas,d=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(d,p,r,i),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=g,e.fillRect(d,p,r,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&s?t.filter=this.filterFactory.addAlphaFilter(s):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(s));const m=new Path2D;m.rect(u,l,r,i),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(f,d,p,r,i,u,l,r,i),t.restore()}save(){this.inSMaskMode?(V_(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),V_(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,i,a,o){this.ctx.transform(e,t,r,i,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const i=this.ctx,a=this.current;let o=a.x,s=a.y,u,l;const h=Mi(i),c=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=c?r.slice(0):null;for(let d=0,p=0,m=e.length;d<m;d++)switch(e[d]|0){case jc.rectangle:o=t[p++],s=t[p++];const g=t[p++],y=t[p++],v=o+g,b=s+y;i.moveTo(o,s),g===0||y===0?i.lineTo(v,b):(i.lineTo(v,s),i.lineTo(v,b),i.lineTo(o,b)),c||a.updateRectMinMax(h,[o,s,v,b]),i.closePath();break;case jc.moveTo:o=t[p++],s=t[p++],i.moveTo(o,s),c||a.updatePathMinMax(h,o,s);break;case jc.lineTo:o=t[p++],s=t[p++],i.lineTo(o,s),c||a.updatePathMinMax(h,o,s);break;case jc.curveTo:u=o,l=s,o=t[p+4],s=t[p+5],i.bezierCurveTo(t[p],t[p+1],t[p+2],t[p+3],o,s),a.updateCurvePathMinMax(h,u,l,t[p],t[p+1],t[p+2],t[p+3],o,s,f),p+=6;break;case jc.curveTo2:u=o,l=s,i.bezierCurveTo(o,s,t[p],t[p+1],t[p+2],t[p+3]),a.updateCurvePathMinMax(h,u,l,o,s,t[p],t[p+1],t[p+2],t[p+3],f),o=t[p+2],s=t[p+3],p+=4;break;case jc.curveTo3:u=o,l=s,o=t[p+2],s=t[p+3],i.bezierCurveTo(t[p],t[p+1],o,s,o,s),a.updateCurvePathMinMax(h,u,l,t[p],t[p+1],o,s,o,s,f),p+=4;break;case jc.closePath:i.closePath();break}c&&a.updateScalingPathMinMax(h,f),a.setCurrentPoint(o,s)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&(r!=null&&r.getPattern)?(t.save(),t.strokeStyle=r.getPattern(t,this,tf(t),co.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let a=!1;i&&(t.save(),t.fillStyle=r.getPattern(t,this,tf(t),co.FILL),a=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=YAe}eoClip(){this.pendingClip=nX}beginText(){this.current.textMatrix=Cre,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const r=new Path2D,i=t.getTransform().invertSelf();for(const{transform:a,x:o,y:s,fontSize:u,path:l}of e)r.addPath(l,new DOMMatrix(a).preMultiplySelf(i).translate(o,s).scale(u,-u));t.clip(r),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||U6,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&In("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const a=r.loadedName||"sans-serif",o=((h=r.systemFontInfo)==null?void 0:h.css)||`"${a}", ${r.fallbackName}`;let s="normal";r.black?s="900":r.bold&&(s="bold");const u=r.italic?"italic":"normal";let l=t;t<XG?l=XG:t>KG&&(l=KG),this.current.fontSizeScale=t/l,this.ctx.font=`${u} ${s} ${l}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,i,a,o){this.current.textMatrix=[e,t,r,i,a,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,i,a){const o=this.ctx,s=this.current,u=s.font,l=s.textRenderingMode,h=s.fontSize/s.fontSizeScale,c=l&ro.FILL_STROKE_MASK,f=!!(l&ro.ADD_TO_PATH_FLAG),d=s.patternFill&&!u.missingFile,p=s.patternStroke&&!u.missingFile;let m;if((u.disableFontFace||f||d||p)&&(m=u.getPathGenerator(this.commonObjs,e)),u.disableFontFace||d||p){o.save(),o.translate(t,r),o.scale(h,-h);let g;if((c===ro.FILL||c===ro.FILL_STROKE)&&(i?(g=o.getTransform(),o.setTransform(...i),o.fill(be(this,bh,h8).call(this,m,g,i))):o.fill(m)),c===ro.STROKE||c===ro.FILL_STROKE)if(a){g||(g=o.getTransform()),o.setTransform(...a);const{a:y,b:v,c:b,d:w}=g,x=cn.inverseTransform(a),S=cn.transform([y,v,b,w,0,0],x),[E,A]=cn.singularValueDecompose2dScale(S);o.lineWidth*=Math.max(E,A)/h,o.stroke(be(this,bh,h8).call(this,m,g,a))}else o.lineWidth/=h,o.stroke(m);o.restore()}else(c===ro.FILL||c===ro.FILL_STROKE)&&o.fillText(e,t,r),(c===ro.STROKE||c===ro.FILL_STROKE)&&o.strokeText(e,t,r);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Mi(o),x:t,y:r,fontSize:h,path:m})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return Zn(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const a=this.ctx,o=t.fontSizeScale,s=t.charSpacing,u=t.wordSpacing,l=t.fontDirection,h=t.textHScale*l,c=e.length,f=r.vertical,d=f?1:-1,p=r.defaultVMetrics,m=i*t.fontMatrix[0],g=t.textRenderingMode===ro.FILL&&!r.disableFontFace&&!t.patternFill;a.save(),a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),l>0?a.scale(h,-1):a.scale(h,1);let y,v;if(t.patternFill){a.save();const E=t.fillColor.getPattern(a,this,tf(a),co.FILL);y=Mi(a),a.restore(),a.fillStyle=E}if(t.patternStroke){a.save();const E=t.strokeColor.getPattern(a,this,tf(a),co.STROKE);v=Mi(a),a.restore(),a.strokeStyle=E}let b=t.lineWidth;const w=t.textMatrixScale;if(w===0||b===0){const E=t.textRenderingMode&ro.FILL_STROKE_MASK;(E===ro.STROKE||E===ro.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=w;if(o!==1&&(a.scale(o,o),b/=o),a.lineWidth=b,r.isInvalidPDFjsFont){const E=[];let A=0;for(const k of e)E.push(k.unicode),A+=k.width;a.fillText(E.join(""),0,0),t.x+=A*m*h,a.restore(),this.compose();return}let x=0,S;for(S=0;S<c;++S){const E=e[S];if(typeof E=="number"){x+=d*E*i/1e3;continue}let A=!1;const k=(E.isSpace?u:0)+s,T=E.fontChar,O=E.accent;let F,I,R=E.width;if(f){const B=E.vmetric||p,W=-(E.vmetric?B[1]:R*.5)*m,Y=B[2]*m;R=B?-B[0]:R,F=W/o,I=(x+Y)/o}else F=x/o,I=0;if(r.remeasure&&R>0){const B=a.measureText(T).width*1e3/i*o;if(R<B&&this.isFontSubpixelAAEnabled){const W=R/B;A=!0,a.save(),a.scale(W,1),F/=W}else R!==B&&(F+=(R-B)/2e3*i/o)}if(this.contentVisible&&(E.isInFont||r.missingFile)){if(g&&!O)a.fillText(T,F,I);else if(this.paintChar(T,F,I,y,v),O){const B=F+i*O.offset.x/o,W=I-i*O.offset.y/o;this.paintChar(O.fontChar,B,W,y,v)}}const U=f?R*m-k*l:R*m+k*l;x+=U,A&&a.restore()}f?t.y-=x:t.x+=x*h,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,i=r.font,a=r.fontSize,o=r.fontDirection,s=i.vertical?1:-1,u=r.charSpacing,l=r.wordSpacing,h=r.textHScale*o,c=r.fontMatrix||U6,f=e.length,d=r.textRenderingMode===ro.INVISIBLE;let p,m,g,y;if(!(d||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y+r.textRise),t.scale(h,o),p=0;p<f;++p){if(m=e[p],typeof m=="number"){y=s*m*a/1e3,this.ctx.translate(y,0),r.x+=y*h;continue}const v=(m.isSpace?l:0)+u,b=i.charProcOperatorList[m.operatorListId];if(!b){In(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),t.scale(a,a),t.transform(...c),this.executeOperatorList(b),this.restore()),g=cn.applyTransform([m.width,0],c)[0]*a+v,t.translate(g,0),r.x+=g*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,a,o){this.ctx.rect(r,i,a-r,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],i=this.baseTransform||Mi(this.ctx),a={createCanvasGraphics:o=>new _j(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new u8(e,r,this.ctx,a,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=cn.makeHexColor(e,t,r),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=cn.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=jAe(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,tf(t),co.SHADING);const i=tf(t);if(i){const{width:a,height:o}=t.canvas,[s,u,l,h]=cn.getAxialAlignedBoundingBox([0,0,a,o],i);this.ctx.fillRect(s,u,l-s,h-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ri("Should not call beginInlineImage")}beginImageData(){ri("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Mi(this.ctx),t)){const r=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],r,i),this.current.updateRectMinMax(Mi(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||fI("TODO: Support non-isolated groups."),e.knockout&&In("Knockout groups not supported.");const r=Mi(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=cn.getAxialAlignedBoundingBox(e.bbox,Mi(t));const a=[0,0,t.canvas.width,t.canvas.height];i=cn.intersect(i,a)||[0,0,0,0];const o=Math.floor(i[0]),s=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-o,1),l=Math.max(Math.ceil(i[3])-s,1);this.current.startNewPathAndClipBox([0,0,u,l]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const c=this.cachedCanvases.getCanvas(h,u,l),f=c.context;f.translate(-o,-s),f.transform(...r),e.smask?this.smaskStack.push({canvas:c.canvas,context:f,offsetX:o,offsetY:s,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,s),t.save()),V_(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Mi(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const a=cn.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,r,i,a){if(be(this,bh,l8).call(this),vk(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],s=t[3]-t[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=s;const[u,l]=cn.singularValueDecompose2dScale(Mi(this.ctx)),{viewportScale:h}=this,c=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(s*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(c,f);const{canvas:d,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(u,0,0,-l,0,s*l),vk(this.ctx)}else vk(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,s),this.ctx.clip(),this.ctx.beginPath()}this.current=new ZG(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),be(this,bh,c8).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=GAe(e)),i.compiled)){i.compiled(r);return}const a=this._createMaskCanvas(e),o=a.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,a.offsetX,a.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,a,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const s=this.ctx;s.save();const u=Mi(s);s.transform(t,r,i,a,0,0);const l=this._createMaskCanvas(e);s.setTransform(1,0,0,1,l.offsetX-u[4],l.offsetY-u[5]);for(let h=0,c=o.length;h<c;h+=2){const f=cn.transform(u,[t,r,i,a,o[h],o[h+1]]),[d,p]=cn.applyTransform([0,0],f);s.drawImage(l.canvas,d,p)}s.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const a of e){const{data:o,width:s,height:u,transform:l}=a,h=this.cachedCanvases.getCanvas("maskCanvas",s,u),c=h.context;c.save();const f=this.getObject(o,a);eX(c,f),c.globalCompositeOperation="source-in",c.fillStyle=i?r.getPattern(c,this,tf(t),co.FILL):r,c.fillRect(0,0,s,u),c.restore(),t.save(),t.transform(...l),t.scale(1,-1),yk(t,h.canvas,0,0,s,u,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){In("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){In("Dependent image isn't ready yet");return}const o=a.width,s=a.height,u=[];for(let l=0,h=i.length;l<h;l+=2)u.push({transform:[t,0,0,r,i[l],i[l+1]],x:0,y:0,w:o,h:s});this.paintInlineImageXObjectGroup(a,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",r,i),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,i=this.ctx;if(this.save(),!Ws){const{filter:s}=i;s!=="none"&&s!==""&&(i.filter="none")}i.scale(1/t,-1/r);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",t,r).context;JG(u,e),a=this.applyTransferMapsToCanvas(u)}const o=this._scaleImage(a,tf(i));i.imageSmoothingEnabled=tX(Mi(i),e.interpolate),yk(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const a=e.width,o=e.height,u=this.cachedCanvases.getCanvas("inlineImage",a,o).context;JG(u,e),i=this.applyTransferMapsToCanvas(u)}for(const a of t)r.save(),r.transform(...a.transform),r.scale(1,-1),yk(r,i,a.x,a.y,a.w,a.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===nX?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Mi(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:a}=this.ctx.getTransform();let o,s;if(r===0&&i===0){const u=Math.abs(t),l=Math.abs(a);if(u===l)if(e===0)o=s=1/u;else{const h=u*e;o=s=h<1?1/h:1}else if(e===0)o=1/u,s=1/l;else{const h=u*e,c=l*e;o=h<1?1/h:1,s=c<1?1/c:1}}else{const u=Math.abs(t*a-r*i),l=Math.hypot(t,r),h=Math.hypot(i,a);if(e===0)o=h/u,s=l/u;else{const c=e*u;o=h>c?h/c:1,s=l>c?l/c:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=s}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[i,a]=this.getScaleForStroking();if(t.lineWidth=r||1,i===1&&a===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(i,a),o.length>0){const s=Math.max(i,a);t.setLineDash(o.map(u=>u/s)),t.lineDashOffset/=s}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};bh=new WeakSet,l8=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},c8=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},h8=function(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i};let C2=_j;for(const n in jc)C2.prototype[n]!==void 0&&(C2.prototype[jc[n]]=C2.prototype[n]);var eT,tT;class lp{static get workerPort(){return P(this,eT)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");he(this,eT,e)}static get workerSrc(){return P(this,tT)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");he(this,tT,e)}}eT=new WeakMap,tT=new WeakMap,ve(lp,eT,null),ve(lp,tT,"");var a0,nT;class QAe{constructor({parsedData:e,rawData:t}){ve(this,a0);ve(this,nT);he(this,a0,e),he(this,nT,t)}getRaw(){return P(this,nT)}get(e){return P(this,a0).get(e)??null}getAll(){return c7(P(this,a0))}has(e){return P(this,a0).has(e)}}a0=new WeakMap,nT=new WeakMap;const a2=Symbol("INTERNAL");var rT,iT,aT,J2;class ZAe{constructor(e,{name:t,intent:r,usage:i,rbGroups:a}){ve(this,rT,!1);ve(this,iT,!1);ve(this,aT,!1);ve(this,J2,!0);he(this,rT,!!(e&sl.DISPLAY)),he(this,iT,!!(e&sl.PRINT)),this.name=t,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){if(P(this,aT))return P(this,J2);if(!P(this,J2))return!1;const{print:e,view:t}=this.usage;return P(this,rT)?(t==null?void 0:t.viewState)!=="OFF":P(this,iT)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==a2&&ri("Internal method `_setVisible` called."),he(this,aT,r),he(this,J2,t)}}rT=new WeakMap,iT=new WeakMap,aT=new WeakMap,J2=new WeakMap;var sm,Vr,ew,tw,sT,f8;class JAe{constructor(e,t=sl.DISPLAY){ve(this,sT);ve(this,sm,null);ve(this,Vr,new Map);ve(this,ew,null);ve(this,tw,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,he(this,tw,e.order);for(const r of e.groups)P(this,Vr).set(r.id,new ZAe(t,r));if(e.baseState==="OFF")for(const r of P(this,Vr).values())r._setVisible(a2,!1);for(const r of e.on)P(this,Vr).get(r)._setVisible(a2,!0);for(const r of e.off)P(this,Vr).get(r)._setVisible(a2,!1);he(this,ew,this.getHash())}}isVisible(e){if(P(this,Vr).size===0)return!0;if(!e)return fI("Optional content group not defined."),!0;if(e.type==="OCG")return P(this,Vr).has(e.id)?P(this,Vr).get(e.id).visible:(In(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return be(this,sT,f8).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!P(this,Vr).has(t))return In(`Optional content group not found: ${t}`),!0;if(P(this,Vr).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!P(this,Vr).has(t))return In(`Optional content group not found: ${t}`),!0;if(!P(this,Vr).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!P(this,Vr).has(t))return In(`Optional content group not found: ${t}`),!0;if(!P(this,Vr).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!P(this,Vr).has(t))return In(`Optional content group not found: ${t}`),!0;if(P(this,Vr).get(t).visible)return!1}return!0}return In(`Unknown optional content policy ${e.policy}.`),!0}return In(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var a;const i=P(this,Vr).get(e);if(!i){In(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const s of o)s!==e&&((a=P(this,Vr).get(s))==null||a._setVisible(a2,!1,!0));i._setVisible(a2,!!t,!0),he(this,sm,null)}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const a=P(this,Vr).get(i);if(a)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}he(this,sm,null)}get hasInitialVisibility(){return P(this,ew)===null||this.getHash()===P(this,ew)}getOrder(){return P(this,Vr).size?P(this,tw)?P(this,tw).slice():[...P(this,Vr).keys()]:null}getGroups(){return P(this,Vr).size>0?c7(P(this,Vr)):null}getGroup(e){return P(this,Vr).get(e)||null}getHash(){if(P(this,sm)!==null)return P(this,sm);const e=new iie;for(const[t,r]of P(this,Vr))e.update(`${t}:${r.visible}`);return he(this,sm,e.hexdigest())}}sm=new WeakMap,Vr=new WeakMap,ew=new WeakMap,tw=new WeakMap,sT=new WeakSet,f8=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const a=e[i];let o;if(Array.isArray(a))o=be(this,sT,f8).call(this,a);else if(P(this,Vr).has(a))o=P(this,Vr).get(a).visible;else return In(`Optional content group not found: ${a}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class eke{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Ra(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:o,contentDispositionFilename:s}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=s,(a==null?void 0:a.length)>0){const u=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,l)=>{this._onReceiveData({begin:u,chunk:l})}),e.addProgressListener((u,l)=>{this._onProgress({loaded:u,total:l})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(r),!0)});Ra(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,i,a;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ra(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new tke(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new nke(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class tke{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=d7(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nke{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function rke(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let h=s(t);return h=unescape(h),h=u(h),h=l(h),a(h)}if(t=o(n),t){const h=l(t);return a(h)}if(t=r("filename","i").exec(n),t){t=t[1];let h=s(t);return h=l(h),a(h)}function r(h,c){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',c)}function i(h,c){if(h){if(!/^[\x00-\xFF]+$/.test(c))return c;try{const f=new TextDecoder(h,{fatal:!0}),d=pD(c);c=f.decode(d),e=!1}catch{}}return c}function a(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function o(h){const c=[];let f;const d=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=d.exec(h))!==null;){let[,m,g,y]=f;if(m=parseInt(m,10),m in c){if(m===0)break;continue}c[m]=[g,y]}const p=[];for(let m=0;m<c.length&&m in c;++m){let[g,y]=c[m];y=s(y),g&&(y=unescape(y),m===0&&(y=u(y))),p.push(y)}return p.join("")}function s(h){if(h.startsWith('"')){const c=h.slice(1).split('\\"');for(let f=0;f<c.length;++f){const d=c[f].indexOf('"');d!==-1&&(c[f]=c[f].slice(0,d),c.length=f+1),c[f]=c[f].replaceAll(/\\(.)/g,"$1")}h=c.join('"')}return h}function u(h){const c=h.indexOf("'");if(c===-1)return h;const f=h.slice(0,c),p=h.slice(c+1).replace(/^[^']*'/,"");return i(f,p)}function l(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(c,f,d,p){if(d==="q"||d==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,g){return String.fromCharCode(parseInt(g,16))}),i(f,p);try{p=atob(p)}catch{}return i(f,p)})}return""}function mie(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function pI(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function yie({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(n.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function vie(n){const e=n.get("Content-Disposition");if(e){let t=rke(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(d7(t))return t}return null}function vD(n,e){return new PN(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function bie(n){return n===200||n===206}function wie(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function xie(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(In(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class rX{constructor(e){nn(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=mie(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ra(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ike(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new ake(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class ike{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,wie(r,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=pI(a.url),!bie(a.status))throw vD(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:s,suggestedLength:u}=yie({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=u||this._contentLength,this._filename=vie(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new qm("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:xie(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class ake{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${r-1}`);const o=i.url;fetch(o,wie(a,this._withCredentials,this._abortController)).then(s=>{const u=pI(s.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!bie(s.status))throw vD(s.status,o);this._readCapability.resolve(),this._reader=s.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:xie(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const lP=200,cP=206;function ske(n){const e=n.response;return typeof e!="string"?e:pD(e).buffer}class oke{constructor({url:e,httpHeaders:t,withCredentials:r}){nn(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=mie(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,o]of this.headers)t.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=cP):i.expectedStatus=lP,t.responseType="arraybuffer",Ra(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const a=i.status||lP;if(!(a===lP&&r.expectedStatus===cP)&&a!==r.expectedStatus){r.onError(i.status);return}const s=ske(i);if(a===cP){const u=i.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);l?r.onDone({begin:parseInt(l[1],10),chunk:s}):(In('Missing or invalid "Content-Range" header.'),r.onError(0))}else s?r.onDone({begin:0,chunk:s}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class uke{constructor(e){this._source=e,this._manager=new oke(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ra(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new lke(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new cke(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class lke{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=pI(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(s=>{const[u,...l]=s.split(": ");return[u,l.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=yie({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=vie(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=vD(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class cke{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=pI((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=vD(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const hke=/^[a-z][a-z0-9\-+.]+:/i;function fke(n){if(hke.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class dke{constructor(e){this.source=e,this.url=fke(e.url),Ra(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ra(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new pke(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new gke(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class pke{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=vD(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new qm("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class gke{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const mke=1e5,iX=30;var zJ,om,yu,oT,uT,s0,Hd,lT,cT,o0,nw,rw,um,iw,hT,aw,u0,fT,dT,sw,l0,pT,lm,ow,Ip,_ie,Sie,d8,wl,F3,p8,Cie,Eie;const Ha=class Ha{constructor({textContentSource:e,container:t,viewport:r}){ve(this,Ip);ve(this,om,Promise.withResolvers());ve(this,yu,null);ve(this,oT,!1);ve(this,uT,!!((zJ=globalThis.FontInspector)!=null&&zJ.enabled));ve(this,s0,null);ve(this,Hd,null);ve(this,lT,0);ve(this,cT,0);ve(this,o0,null);ve(this,nw,null);ve(this,rw,0);ve(this,um,0);ve(this,iw,Object.create(null));ve(this,hT,[]);ve(this,aw,null);ve(this,u0,[]);ve(this,fT,new WeakMap);ve(this,dT,null);var u;if(e instanceof ReadableStream)he(this,aw,e);else if(typeof e=="object")he(this,aw,new ReadableStream({start(l){l.enqueue(e),l.close()}}));else throw new Error('No "textContentSource" parameter specified.');he(this,yu,he(this,nw,t)),he(this,um,r.scale*Dp.pixelRatio),he(this,rw,r.rotation),he(this,Hd,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:o,pageY:s}=r.rawDims;he(this,dT,[1,0,0,-1,-o,s+a]),he(this,cT,i),he(this,lT,a),be(u=Ha,wl,Cie).call(u),a1(t,r),P(this,om).promise.finally(()=>{P(Ha,ow).delete(this),he(this,Hd,null),he(this,iw,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Gs.platform;return Zn(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{P(this,o0).read().then(({value:t,done:r})=>{if(r){P(this,om).resolve();return}P(this,s0)??he(this,s0,t.lang),Object.assign(P(this,iw),t.styles),be(this,Ip,_ie).call(this,t.items),e()},P(this,om).reject)};return he(this,o0,P(this,aw).getReader()),P(Ha,ow).add(this),e(),P(this,om).promise}update({viewport:e,onBefore:t=null}){var a;const r=e.scale*Dp.pixelRatio,i=e.rotation;if(i!==P(this,rw)&&(t==null||t(),he(this,rw,i),a1(P(this,nw),{rotation:i})),r!==P(this,um)){t==null||t(),he(this,um,r);const o={div:null,properties:null,ctx:be(a=Ha,wl,F3).call(a,P(this,s0))};for(const s of P(this,u0))o.properties=P(this,fT).get(s),o.div=s,be(this,Ip,d8).call(this,o)}}cancel(){var t;const e=new qm("TextLayer task cancelled.");(t=P(this,o0))==null||t.cancel(e).catch(()=>{}),he(this,o0,null),P(this,om).reject(e)}get textDivs(){return P(this,u0)}get textContentItemsStr(){return P(this,hT)}static cleanup(){if(!(P(this,ow).size>0)){P(this,sw).clear();for(const{canvas:e}of P(this,l0).values())e.remove();P(this,l0).clear()}}};om=new WeakMap,yu=new WeakMap,oT=new WeakMap,uT=new WeakMap,s0=new WeakMap,Hd=new WeakMap,lT=new WeakMap,cT=new WeakMap,o0=new WeakMap,nw=new WeakMap,rw=new WeakMap,um=new WeakMap,iw=new WeakMap,hT=new WeakMap,aw=new WeakMap,u0=new WeakMap,fT=new WeakMap,dT=new WeakMap,sw=new WeakMap,l0=new WeakMap,pT=new WeakMap,lm=new WeakMap,ow=new WeakMap,Ip=new WeakSet,_ie=function(e){var i,a;if(P(this,oT))return;(a=P(this,Hd)).ctx??(a.ctx=be(i=Ha,wl,F3).call(i,P(this,s0)));const t=P(this,u0),r=P(this,hT);for(const o of e){if(t.length>mke){In("Ignoring additional textDivs for performance reasons."),he(this,oT,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const s=P(this,yu);he(this,yu,document.createElement("span")),P(this,yu).classList.add("markedContent"),o.id!==null&&P(this,yu).setAttribute("id",`${o.id}`),s.append(P(this,yu))}else o.type==="endMarkedContent"&&he(this,yu,P(this,yu).parentNode);continue}r.push(o.str),be(this,Ip,Sie).call(this,o)}},Sie=function(e){var m;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};P(this,u0).push(t);const i=cn.transform(P(this,dT),e.transform);let a=Math.atan2(i[1],i[0]);const o=P(this,iw)[e.fontName];o.vertical&&(a+=Math.PI/2);let s=P(this,uT)&&o.fontSubstitution||o.fontFamily;s=Ha.fontFamilyMap.get(s)||s;const u=Math.hypot(i[2],i[3]),l=u*be(m=Ha,wl,Eie).call(m,s,o,P(this,s0));let h,c;a===0?(h=i[4],c=i[5]-l):(h=i[4]+l*Math.sin(a),c=i[5]-l*Math.cos(a));const f="calc(var(--total-scale-factor) *",d=t.style;P(this,yu)===P(this,nw)?(d.left=`${(100*h/P(this,cT)).toFixed(2)}%`,d.top=`${(100*c/P(this,lT)).toFixed(2)}%`):(d.left=`${f}${h.toFixed(2)}px)`,d.top=`${f}${c.toFixed(2)}px)`),d.fontSize=`${f}${(P(Ha,lm)*u).toFixed(2)}px)`,d.fontFamily=s,r.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,P(this,uT)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),a!==0&&(r.angle=a*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const g=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);g!==y&&Math.max(g,y)/Math.min(g,y)>1.5&&(p=!0)}if(p&&(r.canvasWidth=o.vertical?e.height:e.width),P(this,fT).set(t,r),P(this,Hd).div=t,P(this,Hd).properties=r,be(this,Ip,d8).call(this,P(this,Hd)),r.hasText&&P(this,yu).append(t),r.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),P(this,yu).append(g)}},d8=function(e){var s;const{div:t,properties:r,ctx:i}=e,{style:a}=t;let o="";if(P(Ha,lm)>1&&(o=`scale(${1/P(Ha,lm)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:u}=a,{canvasWidth:l,fontSize:h}=r;be(s=Ha,wl,p8).call(s,i,h*P(this,um),u);const{width:c}=i.measureText(t.textContent);c>0&&(o=`scaleX(${l*P(this,um)/c}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(a.transform=o)},wl=new WeakSet,F3=function(e=null){let t=P(this,l0).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),P(this,l0).set(e,t),P(this,pT).set(t,{size:0,family:""})}return t},p8=function(e,t,r){const i=P(this,pT).get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)},Cie=function(){if(P(this,lm)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),he(this,lm,e.getBoundingClientRect().height),e.remove()},Eie=function(e,t,r){const i=P(this,sw).get(e);if(i)return i;const a=be(this,wl,F3).call(this,r);a.canvas.width=a.canvas.height=iX,be(this,wl,p8).call(this,a,iX,e);const o=a.measureText(""),s=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let l=.8;return s?l=s/(s+u):(Gs.platform.isFirefox&&In("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),P(this,sw).set(e,l),l},ve(Ha,wl),ve(Ha,sw,new Map),ve(Ha,l0,new Map),ve(Ha,pT,new WeakMap),ve(Ha,lm,null),ve(Ha,ow,new Set);let ZC=Ha;class JC{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(a){var u;if(!a)return;let o=null;const s=a.name;if(s==="#text")o=a.value;else if(JC.shouldBuildText(s))(u=a==null?void 0:a.attributes)!=null&&u.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&t.push({str:o}),!!a.children)for(const l of a.children)i(l)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const yke=65536,vke=100;function bke(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new m8,{docId:t}=e,r=n.url?wke(n.url):null,i=n.data?xke(n.data):null,a=n.httpHeaders||null,o=n.withCredentials===!0,s=n.password??null,u=n.range instanceof Tie?n.range:null,l=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:yke;let h=n.worker instanceof E2?n.worker:null;const c=n.verbosity,f=typeof n.docBaseUrl=="string"&&!dI(n.docBaseUrl)?n.docBaseUrl:null,d=bk(n.cMapUrl),p=n.cMapPacked!==!1,m=n.CMapReaderFactory||(Ws?PAe:qG),g=bk(n.iccUrl),y=bk(n.standardFontDataUrl),v=n.StandardFontDataFactory||(Ws?LAe:VG),b=bk(n.wasmUrl),w=n.WasmFactory||(Ws?MAe:HG),x=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,E=n.isEvalSupported!==!1,A=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ws,k=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Ws&&(Gs.platform.isFirefox||!globalThis.chrome),T=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,O=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ws,F=n.fontExtraProperties===!0,I=n.enableXfa===!0,R=n.ownerDocument||globalThis.document,U=n.disableRange===!0,B=n.disableStream===!0,W=n.disableAutoFetch===!0,Y=n.pdfBug===!0,z=n.CanvasFactory||(Ws?FAe:OAe),j=n.FilterFactory||(Ws?IAe:RAe),M=n.enableHWA===!0,q=n.useWasm!==!1,H=u?u.length:n.length??NaN,K=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ws&&!O,Z=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===qG&&v===VG&&w===HG&&d&&y&&b&&t2(d,document.baseURI)&&t2(y,document.baseURI)&&t2(b,document.baseURI)),J=null;lAe(c);const X={canvasFactory:new z({ownerDocument:R,enableHWA:M}),filterFactory:new j({docId:t,ownerDocument:R}),cMapReaderFactory:Z?null:new m({baseUrl:d,isCompressed:p}),standardFontDataFactory:Z?null:new v({baseUrl:y}),wasmFactory:Z?null:new w({baseUrl:b})};if(!h){const ce={verbosity:c,port:lp.workerPort};h=ce.port?E2.fromPort(ce):new E2(ce),e._worker=h}const ae={docId:t,apiVersion:"5.0.375",data:i,password:s,disableAutoFetch:W,rangeChunkSize:l,length:H,docBaseUrl:f,enableXfa:I,evaluatorOptions:{maxImageSize:S,disableFontFace:O,ignoreErrors:x,isEvalSupported:E,isOffscreenCanvasSupported:A,isImageDecoderSupported:k,canvasMaxAreaInBytes:T,fontExtraProperties:F,useSystemFonts:K,useWasm:q,useWorkerFetch:Z,cMapUrl:d,iccUrl:g,standardFontDataUrl:y,wasmUrl:b}},ie={ownerDocument:R,pdfBug:Y,styleElement:J,loadingParams:{disableAutoFetch:W,enableXfa:I}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ce=h.messageHandler.sendWithPromise("GetDocRequest",ae,i?[i.buffer]:null);let ge;if(u)ge=new eke(u,{disableRange:U,disableStream:B});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let Ce;if(Ws)if(t2(r)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ce=rX}else Ce=dke;else Ce=t2(r)?rX:uke;ge=new Ce({url:r,length:H,httpHeaders:a,withCredentials:o,rangeChunkSize:l,disableRange:U,disableStream:B})}return ce.then(Ce=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ee=new tC(t,Ce,h.port),G=new Dke(Ee,e,ge,ie,X);e._transport=G,Ee.send("Ready",null)})}).catch(e._capability.reject),e}function wke(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Ws)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function xke(n){if(Ws&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return pD(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function bk(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const g8=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,_ke=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",Ske=bAe.bind(null,g8,_ke);var VO;const HO=class HO{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Mo(HO,VO)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(a){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};VO=new WeakMap,ve(HO,VO,0);let m8=HO;class Tie{constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ri("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Cke{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Zn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Gd,c0,sC;class Eke{constructor(e,t,r,i=!1){ve(this,c0);ve(this,Gd,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new WG:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new Die,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}={}){return new mD({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Zn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=Wg.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:s=null,annotationCanvasMap:u=null,pageColors:l=null,printAnnotationStorage:h=null,isEditing:c=!1}){var w,x;(w=this._stats)==null||w.time("Overall");const f=this._transport.getRenderingIntent(r,i,h,c),{renderingIntent:d,cacheKey:p}=f;he(this,Gd,!1),s||(s=this._transport.getOptionalContentConfig(d));let m=this._intentStates.get(p);m||(m=Object.create(null),this._intentStates.set(p,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const g=!!(d&sl.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(x=this._stats)==null||x.time("Page Request"),this._pumpOperatorList(f));const y=S=>{var E;m.renderTasks.delete(v),g&&he(this,Gd,!0),be(this,c0,sC).call(this),S?(v.capability.reject(S),this._abortOperatorList({intentState:m,reason:S instanceof Error?S:new Error(S)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(E=globalThis.Stats)!=null&&E.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new v8({callback:y,params:{canvasContext:e,viewport:t,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:l});(m.renderTasks||(m.renderTasks=new Set)).add(v);const b=v.task;return Promise.all([m.displayReadyCapability.promise,s]).then(([S,E])=>{var A;if(this.destroyed){y();return}if((A=this._stats)==null||A.time("Rendering"),!(E.renderingIntent&d))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:S,optionalContentConfig:E}),v.operatorListChanged()}).catch(y),b}getOperatorList({intent:e="display",annotationMode:t=Wg.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var l;function a(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(e,t,r,i,!0);let s=this._intentStates.get(o.cacheKey);s||(s=Object.create(null),this._intentStates.set(o.cacheKey,s));let u;return s.opListReadCapability||(u=Object.create(null),u.operatorListChanged=a,s.opListReadCapability=Promise.withResolvers(),(s.renderTasks||(s.renderTasks=new Set)).add(u),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(o)),s.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>JC.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function a(){o.read().then(function({value:u,done:l}){if(l){r(s);return}s.lang??(s.lang=u.lang),Object.assign(s.styles,u.styles),s.items.push(...u.items),a()},i)}const o=t.getReader(),s={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),he(this,Gd,!1),Promise.all(e)}cleanup(e=!1){he(this,Gd,!0);const t=be(this,c0,sC).call(this);return e&&t&&this._stats&&(this._stats=new WG),t}_startRenderPage(e,t){var i,a;const r=this._intentStates.get(t);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=r.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&be(this,c0,sC).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:a,transfer:o}=r,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},o).getReader(),l=this._intentStates.get(t);l.streamReader=u;const h=()=>{u.read().then(({value:c,done:f})=>{if(f){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(c,l),h())},c=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const f of l.renderTasks)f.operatorListChanged();be(this,c0,sC).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(c);else if(l.opListReadCapability)l.opListReadCapability.reject(c);else throw c}})};h()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof f7){let i=vke;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new qm(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Gd=new WeakMap,c0=new WeakSet,sC=function(){if(!P(this,Gd)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),he(this,Gd,!1),!0};var Xd,GO;class Tke{constructor(){ve(this,Xd,new Map);ve(this,GO,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};P(this,GO).then(()=>{for(const[i]of P(this,Xd))i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:a}=r;if(a.aborted){In("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}P(this,Xd).set(t,i)}removeEventListener(e,t){const r=P(this,Xd).get(t);r==null||r(),P(this,Xd).delete(t)}terminate(){for(const[,e]of P(this,Xd))e==null||e();P(this,Xd).clear()}}Xd=new WeakMap,GO=new WeakMap;var XO,h0,f0,uw,P3,lw,L3;const Pi=class Pi{constructor({name:e=null,port:t=null,verbosity:r=cAe()}={}){ve(this,uw);var i;if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=P(Pi,f0))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(P(Pi,f0)||he(Pi,f0,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new tC("main","worker",e),this._messageHandler.on("ready",function(){}),be(this,uw,P3).call(this)}_initialize(){if(P(Pi,h0)||P(Pi,lw,L3)){this._setupFakeWorker();return}let{workerSrc:e}=Pi;try{Pi._isSameOrigin(window.location,e)||(e=Pi._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new tC("main","worker",t),i=()=>{a.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:a.signal}),r.on("test",s=>{if(a.abort(),this.destroyed||!s){i();return}this._messageHandler=r,this._port=t,this._webWorker=t,be(this,uw,P3).call(this)}),r.on("ready",s=>{if(a.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const s=new Uint8Array;r.send("test",s,[s.buffer])};o();return}catch{fI("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){P(Pi,h0)||(In("Setting up fake worker."),he(Pi,h0,!0)),Pi._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new Tke;this._port=t;const r=`fake${Mo(Pi,XO)._++}`,i=new tC(r+"_worker",r,t);e.setup(i,t),this._messageHandler=new tC(r,r+"_worker",t),be(this,uw,P3).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,r;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=P(Pi,f0))==null||t.delete(this._port),this._port=null,(r=this._messageHandler)==null||r.destroy(),this._messageHandler=null}static fromPort(e){var r;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(r=P(this,f0))==null?void 0:r.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Pi(e)}static get workerSrc(){if(lp.workerSrc)return lp.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Zn(this,"_setupFakeWorkerGlobal",(async()=>P(this,lw,L3)?P(this,lw,L3):(await import(this.workerSrc)).WorkerMessageHandler)())}};XO=new WeakMap,h0=new WeakMap,f0=new WeakMap,uw=new WeakSet,P3=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},lw=new WeakSet,L3=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},ve(Pi,lw),ve(Pi,XO,0),ve(Pi,h0,!1),ve(Pi,f0),Ws&&(he(Pi,h0,!0),lp.workerSrc||(lp.workerSrc="./pdf.worker.mjs")),Pi._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(t,r);return r.origin===i.origin},Pi._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let E2=Pi;var Kd,mf,cw,hw,Yd,d0,oC;class Dke{constructor(e,t,r,i,a){ve(this,d0);ve(this,Kd,new Map);ve(this,mf,new Map);ve(this,cw,new Map);ve(this,hw,new Map);ve(this,Yd,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Die,this.fontLoader=new kAe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Zn(this,"annotationStorage",new y7)}getRenderingIntent(e,t=Wg.ENABLE,r=null,i=!1,a=!1){let o=sl.DISPLAY,s=i8;switch(e){case"any":o=sl.ANY;break;case"display":break;case"print":o=sl.PRINT;break;default:In(`getRenderingIntent - invalid intent: ${e}`)}const u=o&sl.PRINT&&r instanceof sie?r:this.annotationStorage;switch(t){case Wg.DISABLE:o+=sl.ANNOTATIONS_DISABLE;break;case Wg.ENABLE:break;case Wg.ENABLE_FORMS:o+=sl.ANNOTATIONS_FORMS;break;case Wg.ENABLE_STORAGE:o+=sl.ANNOTATIONS_STORAGE,s=u.serializable;break;default:In(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=sl.IS_EDITING),a&&(o+=sl.OPLIST);const{ids:l,hash:h}=u.modifiedIds,c=[o,s.hash,h];return{renderingIntent:o,cacheKey:c.join("_"),annotationStorageSerializable:s,modifiedIds:l}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=P(this,Yd))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of P(this,mf).values())e.push(i._destroy());P(this,mf).clear(),P(this,cw).clear(),P(this,hw).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),P(this,Kd).clear(),this.filterFactory.destroy(),ZC.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new qm("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{Ra(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){i.close();return}Ra(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var s;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:o}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((s=t.onProgress)==null||s.call(t,this._lastProgress)),this._fullReader.onProgress=u=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:o}}),e.on("GetRangeReader",(r,i)=>{Ra(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:o,done:s}){if(s){i.close();return}Ra(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{a.cancel(o),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new Cke(r,this))}),e.on("DocException",r=>{t._capability.reject(du(r))}),e.on("PasswordRequest",r=>{he(this,Yd,Promise.withResolvers());try{if(!t.onPassword)throw du(r);const i=a=>{a instanceof Error?P(this,Yd).reject(a):P(this,Yd).resolve({password:a})};t.onPassword(i,r.code)}catch(i){P(this,Yd).reject(i)}return P(this,Yd).promise}),e.on("DataLoaded",r=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;P(this,mf).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,a])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in a){const h=a.error;In(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const s=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,c)=>globalThis.FontInspector.fontAdded(h,c):null,u=new NAe(a,s);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(r,u)});break;case"CopyLocalImage":const{imageRef:l}=a;Ra(l,"The imageRef must be defined.");for(const h of P(this,mf).values())for(const[,c]of h.objs)if((c==null?void 0:c.ref)===l)return c.dataLen?(this.commonObjs.resolve(r,structuredClone(c)),c.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,a,o])=>{var u;if(this.destroyed)return;const s=P(this,mf).get(i);if(!s.objs.has(r)){if(s._intentStates.size===0){(u=o==null?void 0:o.bitmap)==null||u.close();return}switch(a){case"Image":case"Pattern":s.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&In("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=P(this,cw).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&P(this,hw).set(a.refStr,e);const o=new Eke(t,a,this,this._params.pdfBug);return P(this,mf).set(t,o),o});return P(this,cw).set(t,i),i}getPageIndex(e){return g8(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return be(this,d0,oC).call(this,"GetFieldObjects")}hasJSActions(){return be(this,d0,oC).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return be(this,d0,oC).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return be(this,d0,oC).call(this,"GetOptionalContentConfig").then(t=>new JAe(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=P(this,Kd).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,o;return{info:i[0],metadata:i[1]?new QAe(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return P(this,Kd).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of P(this,mf).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),P(this,Kd).clear(),this.filterFactory.destroy(!0),ZC.cleanup()}}cachedPageNumber(e){if(!g8(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return P(this,hw).get(t)??null}}Kd=new WeakMap,mf=new WeakMap,cw=new WeakMap,hw=new WeakMap,Yd=new WeakMap,d0=new WeakSet,oC=function(e,t=null){const r=P(this,Kd).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return P(this,Kd).set(e,i),i};const H_=Symbol("INITIAL_DATA");var Yu,gT,y8;class Die{constructor(){ve(this,gT);ve(this,Yu,Object.create(null))}get(e,t=null){if(t){const i=be(this,gT,y8).call(this,e);return i.promise.then(()=>t(i.data)),null}const r=P(this,Yu)[e];if(!r||r.data===H_)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=P(this,Yu)[e];return!!t&&t.data!==H_}delete(e){const t=P(this,Yu)[e];return!t||t.data===H_?!1:(delete P(this,Yu)[e],!0)}resolve(e,t=null){const r=be(this,gT,y8).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in P(this,Yu)){const{data:r}=P(this,Yu)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}he(this,Yu,Object.create(null))}*[Symbol.iterator](){for(const e in P(this,Yu)){const{data:t}=P(this,Yu)[e];t!==H_&&(yield[e,t])}}}Yu=new WeakMap,gT=new WeakSet,y8=function(e){var t;return(t=P(this,Yu))[e]||(t[e]={...Promise.withResolvers(),data:H_})};var cm;class Ake{constructor(e){ve(this,cm,null);nn(this,"onContinue",null);nn(this,"onError",null);he(this,cm,e)}get promise(){return P(this,cm).capability.promise}cancel(e=0){P(this,cm).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=P(this,cm).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=P(this,cm);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}cm=new WeakMap;var hm,p0;const Dv=class Dv{constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:o,pageIndex:s,canvasFactory:u,filterFactory:l,useRequestAnimationFrame:h=!1,pdfBug:c=!1,pageColors:f=null}){ve(this,hm,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=s,this.canvasFactory=u,this.filterFactory=l,this._pdfBug=c,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ake(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var s,u;if(this.cancelled)return;if(this._canvas){if(P(Dv,p0).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");P(Dv,p0).add(this._canvas)}this._pdfBug&&((s=globalThis.StepperManager)!=null&&s.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:a,background:o}=this.params;this.gfx=new C2(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var r,i,a;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),P(this,hm)&&(window.cancelAnimationFrame(P(this,hm)),he(this,hm,null)),P(Dv,p0).delete(this._canvas),e||(e=new f7(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(a=(i=this.task).onError)==null||a.call(i,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?he(this,hm,window.requestAnimationFrame(()=>{he(this,hm,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),P(Dv,p0).delete(this._canvas),this.callback())))}};hm=new WeakMap,p0=new WeakMap,ve(Dv,p0,new WeakSet);let v8=Dv;const kke="5.0.375",Nke="23972e194";function aX(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function G_(n){return Math.max(0,Math.min(255,255*n))}class sX{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=G_(e),[e,e,e]}static G_HTML([e]){const t=aX(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(G_)}static RGB_HTML(e){return`#${e.map(aX).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[G_(1-Math.min(1,e+i)),G_(1-Math.min(1,r+i)),G_(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,a=1-t,o=1-r,s=Math.min(i,a,o);return["CMYK",i,a,o,s]}}class Oke{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ri("Abstract method `_createSVG` called.")}}class UN extends Oke{_createSVG(e){return document.createElementNS(Dd,e)}}class Aie{static setupStorage(e,t,r,i,a){const o=i.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),a==="print")break;e.addEventListener("input",s=>{i.setValue(t,{value:s.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",s=>{i.setValue(t,{value:s.target.checked?s.target.getAttribute("xfaOn"):s.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),a==="print")break;e.addEventListener("input",s=>{i.setValue(t,{value:s.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const s of r.children)s.attributes.value===o.value?s.attributes.selected=!0:s.attributes.hasOwnProperty("selected")&&delete s.attributes.selected}e.addEventListener("input",s=>{const u=s.target.options,l=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:l})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:a}){const{attributes:o}=t,s=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[u,l]of Object.entries(o))if(l!=null)switch(u){case"class":l.length&&e.setAttribute(u,l.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",l);break;case"style":Object.assign(e.style,l);break;case"textContent":e.textContent=l;break;default:(!s||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,l)}s&&a.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var c,f;const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,a=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:a,linkService:r});const s=a!=="richText",u=e.div;if(u.append(o),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=d}s&&u.setAttribute("class","xfaLayer xfaFont");const l=[];if(i.children.length===0){if(i.value){const d=document.createTextNode(i.value);o.append(d),s&&JC.shouldBuildText(i.name)&&l.push(d)}return{textDivs:l}}const h=[[i,-1,o]];for(;h.length>0;){const[d,p,m]=h.at(-1);if(p+1===d.children.length){h.pop();continue}const g=d.children[++h.at(-1)[1]];if(g===null)continue;const{name:y}=g;if(y==="#text"){const b=document.createTextNode(g.value);l.push(b),m.append(b);continue}const v=(c=g==null?void 0:g.attributes)!=null&&c.xmlns?document.createElementNS(g.attributes.xmlns,y):document.createElement(y);if(m.append(v),g.attributes&&this.setAttributes({html:v,element:g,storage:t,intent:a,linkService:r}),((f=g.children)==null?void 0:f.length)>0)h.push([g,-1,v]);else if(g.value){const b=document.createTextNode(g.value);s&&JC.shouldBuildText(y)&&l.push(b),v.append(b)}}for(const d of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const bD=1e3,Rke=9,o1=new WeakSet;class oX{static create(e){switch(e.data.annotationType){case Aa.LINK:return new kie(e);case Aa.TEXT:return new Ike(e);case Aa.WIDGET:switch(e.data.fieldType){case"Tx":return new Fke(e);case"Btn":return e.data.radioButton?new Rie(e):e.data.checkBox?new Lke(e):new Mke(e);case"Ch":return new Uke(e);case"Sig":return new Pke(e)}return new O1(e);case Aa.POPUP:return new w8(e);case Aa.FREETEXT:return new Mie(e);case Aa.LINE:return new zke(e);case Aa.SQUARE:return new Wke(e);case Aa.CIRCLE:return new jke(e);case Aa.POLYLINE:return new Uie(e);case Aa.CARET:return new qke(e);case Aa.INK:return new w7(e);case Aa.POLYGON:return new $ke(e);case Aa.HIGHLIGHT:return new Bie(e);case Aa.UNDERLINE:return new Vke(e);case Aa.SQUIGGLY:return new Hke(e);case Aa.STRIKEOUT:return new Gke(e);case Aa.STAMP:return new zie(e);case Aa.FILEATTACHMENT:return new Xke(e);default:return new ga(e)}}}var g0,fw,dw,mT,b8;const Sj=class Sj{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){ve(this,mT);ve(this,g0,null);ve(this,fw,!1);ve(this,dw,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e!=null&&e.str||t!=null&&t.str||r!=null&&r.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Sj._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;P(this,g0)||he(this,g0,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&be(this,mT,b8).call(this,t),(r=P(this,dw))==null||r.popup.updateEdited(e)}resetEdited(){var e;P(this,g0)&&(be(this,mT,b8).call(this,P(this,g0).rect),(e=P(this,dw))==null||e.popup.resetEdited(),he(this,g0,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof O1||(a.tabIndex=bD);const{style:o}=a;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof w8){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,a),a}const{width:s,height:u}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,g=t.borderStyle.verticalCornerRadius;if(m>0||g>0){const v=`calc(${m}px * var(--total-scale-factor)) / calc(${g}px * var(--total-scale-factor))`;o.borderRadius=v}else if(this instanceof Rie){const v=`calc(${s}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;o.borderRadius=v}switch(t.borderStyle.style){case e2.SOLID:o.borderStyle="solid";break;case e2.DASHED:o.borderStyle="dashed";break;case e2.BEVELED:In("Unimplemented border style: beveled");break;case e2.INSET:In("Unimplemented border style: inset");break;case e2.UNDERLINE:o.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(he(this,fw,!0),o.borderColor=cn.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const l=cn.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:h,pageHeight:c,pageX:f,pageY:d}=i.rawDims;o.left=`${100*(l[0]-f)/h}%`,o.top=`${100*(l[1]-d)/c}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(o.width=`${100*s/h}%`,o.height=`${100*u/c}%`):this.setRotation(p,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:o}=this;e%180!==0&&([a,o]=[o,a]),t.style.width=`${100*a/r}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const a=i.detail[t],o=a[0],s=a.slice(1);i.target.style[r]=sX[`${o}_HTML`](s),this.annotationStorage.setValue(this.data.id,{[r]:sX[`${o}_rgb`](s)})};return Zn(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail)){const a=e[i]||r[i];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,a]of Object.entries(t)){const o=r[i];if(o){const s={detail:{[i]:a},target:e};o(s),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,a]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,g,y,v]=e.subarray(2,6);if(i===m&&a===g&&t===y&&r===v)return}const{style:o}=this.container;let s;if(P(this,fw)){const{borderColor:m,borderWidth:g}=o;o.borderWidth=0,s=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${g}">`],this.container.classList.add("hasBorder")}const u=i-t,l=a-r,{svgFactory:h}=this,c=h.createElement("svg");c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0);const f=h.createElement("defs");c.append(f);const d=h.createElement("clipPath"),p=`clippath_${this.data.id}`;d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),f.append(d);for(let m=2,g=e.length;m<g;m+=8){const y=e[m],v=e[m+1],b=e[m+2],w=e[m+3],x=h.createElement("rect"),S=(b-t)/u,E=(a-v)/l,A=(y-b)/u,k=(v-w)/l;x.setAttribute("x",S),x.setAttribute("y",E),x.setAttribute("width",A),x.setAttribute("height",k),d.append(x),s==null||s.push(`<rect vector-effect="non-scaling-stroke" x="${S}" y="${E}" width="${A}" height="${k}"/>`)}P(this,fw)&&(s.push("</g></svg>')"),o.backgroundImage=s.join("")),this.container.append(c),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{data:e}=this,t=he(this,dw,new w8({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){ri("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:o,exportValues:s}of i){if(a===-1||o===t)continue;const u=typeof s=="string"?s:null,l=document.querySelector(`[data-element-id="${o}"]`);if(l&&!o1.has(l)){In(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:u,domElement:l})}return r}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,o=i.getAttribute("data-element-id");o!==t&&o1.has(i)&&r.push({id:o,exportValue:a,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};g0=new WeakMap,fw=new WeakMap,dw=new WeakMap,mT=new WeakSet,b8=function(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:s,pageY:u}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-s)/a}%`,t.top=`${100*(o-e[3]+u)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let ga=Sj;var fl,hv,Nie,Oie;class kie extends ga{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});ve(this,fl);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(r.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action),a=!0):t.attachment?(be(this,fl,Nie).call(this,i,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(be(this,fl,Oie).call(this,i,t.setOCGState),a=!0):t.dest?(this._bindLink(i,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&be(this,fl,hv).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),be(this,fl,hv).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(r.actions)){const o=i.get(a);o&&(t[o]=()=>{var s;return(s=this.linkService.eventBus)==null||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:a}}),!1})}t.onclick||(t.onclick=()=>!1),be(this,fl,hv).call(this)}_bindResetFormAction(t,r){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),be(this,fl,hv).call(this),!this._fieldObjects){In('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var c;i==null||i();const{fields:a,refs:o,include:s}=r,u=[];if(a.length!==0||o.length!==0){const f=new Set(o);for(const d of a){const p=this._fieldObjects[d]||[];for(const{id:m}of p)f.add(m)}for(const d of Object.values(this._fieldObjects))for(const p of d)f.has(p.id)===s&&u.push(p)}else for(const f of Object.values(this._fieldObjects))u.push(...f);const l=this.annotationStorage,h=[];for(const f of u){const{id:d}=f;switch(h.push(d),f.type){case"text":{const m=f.defaultValue||"";l.setValue(d,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;l.setValue(d,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";l.setValue(d,{value:m});break}default:continue}const p=document.querySelector(`[data-element-id="${d}"]`);if(p){if(!o1.has(p)){In(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}fl=new WeakSet,hv=function(){this.container.setAttribute("data-internal-link","")},Nie=function(t,r,i=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(r.content,r.filename,i),!1},be(this,fl,hv).call(this)},Oie=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),be(this,fl,hv).call(this)};class Ike extends ga{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class O1 extends ga{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Gs.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,a){r.includes("mouse")?e.addEventListener(r,o=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var s;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}a&&((s=this.linkService.eventBus)==null||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o)}}))})}_setEventListeners(e,t,r,i){var a,o,s;for(const[u,l]of r)(l==="Action"||(a=this.data.actions)!=null&&a[l])&&((l==="Focus"||l==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,u,l,i),l==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!((s=this.data.actions)!=null&&s.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":cn.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Rke,a=e.style;let o;const s=2,u=l=>Math.round(10*l)/10;if(this.data.multiLine){const l=Math.abs(this.data.rect[3]-this.data.rect[1]-s),h=Math.round(l/(iP*i))||1,c=l/h;o=Math.min(i,u(c/iP))}else{const l=Math.abs(this.data.rect[3]-this.data.rect[1]-s);o=Math.min(i,u(l/iP))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=cn.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Fke extends O1{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const a=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),a.setValue(o.id,{[i]:r})}render(){var i,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let s=o.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&s.length>u&&(s=s.slice(0,u));let l=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const h={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=l??s,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",l??s),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),o1.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=bD,this._setRequired(r,this.data.required),u&&(r.maxLength=u),r.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(r,"value",f.target.value,"value"),h.formattedValue=null}),r.addEventListener("resetform",f=>{const d=this.data.defaultFieldValue??"";r.value=h.userValue=d,h.formattedValue=null});let c=f=>{const{formattedValue:d}=h;d!=null&&(f.target.value=d),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",d=>{var m;if(h.focused)return;const{target:p}=d;h.userValue&&(p.value=h.userValue),h.lastCommittedValue=p.value,h.commitKey=1,(m=this.data.actions)!=null&&m.Focus||(h.focused=!0)}),r.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);const p={value(m){h.userValue=m.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),m.target.value=h.userValue},formattedValue(m){const{formattedValue:g}=m.detail;h.formattedValue=g,g!=null&&m.target!==document.activeElement&&(m.target.value=g),e.setValue(t,{formattedValue:g})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var b;const{charLimit:g}=m.detail,{target:y}=m;if(g===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",g);let v=h.userValue;!v||v.length<=g||(v=v.slice(0,g),y.value=h.userValue=v,e.setValue(t,{value:v}),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(p,d)}),r.addEventListener("keydown",d=>{var g;h.commitKey=1;let p=-1;if(d.key==="Escape"?p=0:d.key==="Enter"&&!this.data.multiLine?p=2:d.key==="Tab"&&(h.commitKey=3),p===-1)return;const{value:m}=d.target;h.lastCommittedValue!==m&&(h.lastCommittedValue=m,h.userValue=m,(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:p,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});const f=c;c=null,r.addEventListener("blur",d=>{var m,g;if(!h.focused||!d.relatedTarget)return;(m=this.data.actions)!=null&&m.Blur||(h.focused=!1);const{value:p}=d.target;h.userValue=p,h.lastCommittedValue!==p&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,willCommit:!0,commitKey:h.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}})),f(d)}),(a=this.data.actions)!=null&&a.Keystroke&&r.addEventListener("beforeinput",d=>{var x;h.lastCommittedValue=null;const{data:p,target:m}=d,{value:g,selectionStart:y,selectionEnd:v}=m;let b=y,w=v;switch(d.inputType){case"deleteWordBackward":{const S=g.substring(0,y).match(/\w*[^\w]*$/);S&&(b-=S[0].length);break}case"deleteWordForward":{const S=g.substring(y).match(/^[^\w]*\w*/);S&&(w+=S[0].length);break}case"deleteContentBackward":y===v&&(b-=1);break;case"deleteContentForward":y===v&&(w+=1);break}d.preventDefault(),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,change:p||"",willCommit:!1,selStart:b,selEnd:w}})}),this._setEventListeners(r,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&r.addEventListener("blur",c),this.data.comb){const d=(this.data.rect[2]-this.data.rect[0])/u;r.classList.add("comb"),r.style.letterSpacing=`calc(${d}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Pke extends O1{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Lke extends O1{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return o1.add(a),a.setAttribute("data-element-id",r),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=bD,a.addEventListener("change",o=>{const{name:s,checked:u}=o.target;for(const l of this._getElementsByName(s,r)){const h=u&&l.exportValue===t.exportValue;l.domElement&&(l.domElement.checked=h),e.setValue(l.id,{value:h})}e.setValue(r,{value:u})}),a.addEventListener("resetform",o=>{const s=t.defaultFieldValue||"Off";o.target.checked=s===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const s={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(r,{value:u.target.checked})}};this._dispatchEventFromSandbox(s,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Rie extends O1{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const a=document.createElement("input");if(o1.add(a),a.setAttribute("data-element-id",r),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=bD,a.addEventListener("change",o=>{const{name:s,checked:u}=o.target;for(const l of this._getElementsByName(s,r))e.setValue(l.id,{value:!1});e.setValue(r,{value:u})}),a.addEventListener("resetform",o=>{const s=t.defaultFieldValue;o.target.checked=s!=null&&s===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;a.addEventListener("updatefromsandbox",s=>{const u={value:l=>{const h=o===l.detail.value;for(const c of this._getElementsByName(l.target.name)){const f=h&&c.id===r;c.domElement&&(c.domElement.checked=f),e.setValue(c.id,{value:f})}}};this._dispatchEventFromSandbox(u,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Mke extends kie{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Uke extends O1{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");o1.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=bD;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const c=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===c});for(const h of this.data.options){const c=document.createElement("option");c.textContent=h.displayValue,c.value=h.exportValue,r.value.includes(h.exportValue)&&(c.setAttribute("selected",!0),a=!1),i.append(c)}let o=null;if(a){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const s=h=>{const c=h?"value":"textContent",{options:f,multiple:d}=i;return d?Array.prototype.filter.call(f,p=>p.selected).map(p=>p[c]):f.selectedIndex===-1?null:f[f.selectedIndex][c]};let u=s(!1);const l=h=>{const c=h.target.options;return Array.prototype.map.call(c,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const c={value(f){o==null||o();const d=f.detail.value,p=new Set(Array.isArray(d)?d:[d]);for(const m of i.options)m.selected=p.has(m.value);e.setValue(t,{value:s(!0)}),u=s(!1)},multipleSelection(f){i.multiple=!0},remove(f){const d=i.options,p=f.detail.remove;d[p].selected=!1,i.remove(p),d.length>0&&Array.prototype.findIndex.call(d,g=>g.selected)===-1&&(d[0].selected=!0),e.setValue(t,{value:s(!0),items:l(f)}),u=s(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=s(!1)},insert(f){const{index:d,displayValue:p,exportValue:m}=f.detail.insert,g=i.children[d],y=document.createElement("option");y.textContent=p,y.value=m,g?g.before(y):i.append(y),e.setValue(t,{value:s(!0),items:l(f)}),u=s(!1)},items(f){const{items:d}=f.detail;for(;i.length!==0;)i.remove(0);for(const p of d){const{displayValue:m,exportValue:g}=p,y=document.createElement("option");y.textContent=m,y.value=g,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:s(!0),items:l(f)}),u=s(!1)},indices(f){const d=new Set(f.detail.indices);for(const p of f.target.options)p.selected=d.has(p.index);e.setValue(t,{value:s(!0)}),u=s(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(c,h)}),i.addEventListener("input",h=>{var d;const c=s(!0),f=s(!1);e.setValue(t,{value:c}),h.preventDefault(),(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:f,changeEx:c,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:s(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class w8 extends ga{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:ga._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Bke({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${h7}${r}`).join(",")),this.container}}var pw,KO,YO,gw,mw,na,Qd,yw,yT,vT,vw,Zd,Hc,Jd,bT,ep,wT,m0,y0,ii,M3,x8,Iie,Fie,Pie,Lie,U3,B3,_8;class Bke{constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:a,contentsObj:o,richText:s,parent:u,rect:l,parentRect:h,open:c}){ve(this,ii);ve(this,pw,be(this,ii,Pie).bind(this));ve(this,KO,be(this,ii,_8).bind(this));ve(this,YO,be(this,ii,B3).bind(this));ve(this,gw,be(this,ii,U3).bind(this));ve(this,mw,null);ve(this,na,null);ve(this,Qd,null);ve(this,yw,null);ve(this,yT,null);ve(this,vT,null);ve(this,vw,null);ve(this,Zd,!1);ve(this,Hc,null);ve(this,Jd,null);ve(this,bT,null);ve(this,ep,null);ve(this,wT,null);ve(this,m0,null);ve(this,y0,!1);var f;he(this,na,e),he(this,wT,i),he(this,Qd,o),he(this,ep,s),he(this,vT,u),he(this,mw,t),he(this,bT,l),he(this,vw,h),he(this,yT,r),he(this,yw,p7.toDateObject(a)),this.trigger=r.flatMap(d=>d.getElementsToTriggerPopup());for(const d of this.trigger)d.addEventListener("click",P(this,gw)),d.addEventListener("mouseenter",P(this,YO)),d.addEventListener("mouseleave",P(this,KO)),d.classList.add("popupTriggerArea");for(const d of r)(f=d.container)==null||f.addEventListener("keydown",P(this,pw));P(this,na).hidden=!0,c&&be(this,ii,U3).call(this)}render(){if(P(this,Hc))return;const e=he(this,Hc,document.createElement("div"));if(e.className="popup",P(this,mw)){const a=e.style.outlineColor=cn.makeHexColor(...P(this,mw));e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=P(this,wT),e.append(t),P(this,yw)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:P(this,yw).valueOf()})),t.append(a)}const i=P(this,ii,M3);if(i)Aie.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(P(this,Qd));e.append(a)}P(this,na).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let a=0,o=i.length;a<o;++a){const s=i[a];r.append(document.createTextNode(s)),a<o-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;P(this,m0)||he(this,m0,{contentsObj:P(this,Qd),richText:P(this,ep)}),e&&he(this,Jd,null),t&&(he(this,ep,be(this,ii,Fie).call(this,t)),he(this,Qd,null)),(r=P(this,Hc))==null||r.remove(),he(this,Hc,null)}resetEdited(){var e;P(this,m0)&&({contentsObj:Mo(this,Qd)._,richText:Mo(this,ep)._}=P(this,m0),he(this,m0,null),(e=P(this,Hc))==null||e.remove(),he(this,Hc,null),he(this,Jd,null))}forceHide(){he(this,y0,this.isVisible),P(this,y0)&&(P(this,na).hidden=!0)}maybeShow(){P(this,y0)&&(P(this,Hc)||be(this,ii,B3).call(this),he(this,y0,!1),P(this,na).hidden=!1)}get isVisible(){return P(this,na).hidden===!1}}pw=new WeakMap,KO=new WeakMap,YO=new WeakMap,gw=new WeakMap,mw=new WeakMap,na=new WeakMap,Qd=new WeakMap,yw=new WeakMap,yT=new WeakMap,vT=new WeakMap,vw=new WeakMap,Zd=new WeakMap,Hc=new WeakMap,Jd=new WeakMap,bT=new WeakMap,ep=new WeakMap,wT=new WeakMap,m0=new WeakMap,y0=new WeakMap,ii=new WeakSet,M3=function(){const e=P(this,ep),t=P(this,Qd);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&P(this,ep).html||null},x8=function(){var e,t,r;return((r=(t=(e=P(this,ii,M3))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},Iie=function(){var e,t,r;return((r=(t=(e=P(this,ii,M3))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},Fie=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:P(this,ii,Iie),fontSize:P(this,ii,x8)?`calc(${P(this,ii,x8)}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return r},Pie=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&P(this,Zd))&&be(this,ii,U3).call(this)},Lie=function(){if(P(this,Jd)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:a}}}=P(this,vT);let o=!!P(this,vw),s=o?P(this,vw):P(this,bT);for(const p of P(this,yT))if(!s||cn.intersect(p.data.rect,s)!==null){s=p.data.rect,o=!0;break}const u=cn.normalizeRect([s[0],e[3]-s[1]+e[1],s[2],e[3]-s[3]+e[1]]),h=o?s[2]-s[0]+5:0,c=u[0]+h,f=u[1];he(this,Jd,[100*(c-i)/t,100*(f-a)/r]);const{style:d}=P(this,na);d.left=`${P(this,Jd)[0]}%`,d.top=`${P(this,Jd)[1]}%`},U3=function(){he(this,Zd,!P(this,Zd)),P(this,Zd)?(be(this,ii,B3).call(this),P(this,na).addEventListener("click",P(this,gw)),P(this,na).addEventListener("keydown",P(this,pw))):(be(this,ii,_8).call(this),P(this,na).removeEventListener("click",P(this,gw)),P(this,na).removeEventListener("keydown",P(this,pw)))},B3=function(){P(this,Hc)||this.render(),this.isVisible?P(this,Zd)&&P(this,na).classList.add("focused"):(be(this,ii,Lie).call(this),P(this,na).hidden=!1,P(this,na).style.zIndex=parseInt(P(this,na).style.zIndex)+1e3)},_8=function(){P(this,na).classList.remove("focused"),!(P(this,Zd)||!this.isVisible)&&(P(this,na).hidden=!0,P(this,na).style.zIndex=parseInt(P(this,na).style.zIndex)-1e3)};class Mie extends ga{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=An.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var xT;class zke extends ga{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});ve(this,xT,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),o=he(this,xT,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return P(this,xT)}addHighlightArea(){this.container.classList.add("highlightArea")}}xT=new WeakMap;var _T;class Wke extends ga{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});ve(this,_T,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,s=he(this,_T,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",o/2),s.setAttribute("y",o/2),s.setAttribute("width",r-o),s.setAttribute("height",i-o),s.setAttribute("stroke-width",o||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return P(this,_T)}addHighlightArea(){this.container.classList.add("highlightArea")}}_T=new WeakMap;var ST;class jke extends ga{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});ve(this,ST,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,s=he(this,ST,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",r/2),s.setAttribute("cy",i/2),s.setAttribute("rx",r/2-o/2),s.setAttribute("ry",i/2-o/2),s.setAttribute("stroke-width",o||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return P(this,ST)}addHighlightArea(){this.container.classList.add("highlightArea")}}ST=new WeakMap;var CT;class Uie extends ga{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});ve(this,CT,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:i,popupRef:a},width:o,height:s}=this;if(!r)return this.container;const u=this.svgFactory.create(o,s,!0);let l=[];for(let c=0,f=r.length;c<f;c+=2){const d=r[c]-t[0],p=t[3]-r[c+1];l.push(`${d},${p}`)}l=l.join(" ");const h=he(this,CT,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",l),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),u.append(h),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return P(this,CT)}addHighlightArea(){this.container.classList.add("highlightArea")}}CT=new WeakMap;class $ke extends Uie{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qke extends ga{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var ET,v0,TT,S8;class w7 extends ga{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});ve(this,TT);ve(this,ET,null);ve(this,v0,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?An.HIGHLIGHT:An.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:s,width:u,height:l}=be(this,TT,S8).call(this,r,t),h=this.svgFactory.create(u,l,!0),c=he(this,ET,this.svgFactory.createElement("svg:g"));h.append(c),c.setAttribute("stroke-width",a.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",s);for(let f=0,d=i.length;f<d;f++){const p=this.svgFactory.createElement(this.svgElementName);P(this,v0).push(p),p.setAttribute("points",i[f].join(",")),c.append(p)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:i,rect:a}=t,o=P(this,ET);if(r>=0&&o.setAttribute("stroke-width",r||1),i)for(let s=0,u=P(this,v0).length;s<u;s++)P(this,v0)[s].setAttribute("points",i[s].join(","));if(a){const{transform:s,width:u,height:l}=be(this,TT,S8).call(this,this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${l}`),o.setAttribute("transform",s)}}getElementsToTriggerPopup(){return P(this,v0)}addHighlightArea(){this.container.classList.add("highlightArea")}}ET=new WeakMap,v0=new WeakMap,TT=new WeakSet,S8=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class Bie extends ga{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=An.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Vke extends ga{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Hke extends ga{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Gke extends ga{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class zie extends ga{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=An.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var DT,AT,C8;class Xke extends ga{constructor(t){var i;super(t,{isRenderable:!0});ve(this,AT);ve(this,DT,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",be(this,AT,C8).bind(this)),he(this,DT,i);const{isMac:a}=Gs.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&be(this,AT,C8).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return P(this,DT)}addHighlightArea(){this.container.classList.add("highlightArea")}}DT=new WeakMap,AT=new WeakSet,C8=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var kT,b0,fm,NT,iy,T8,D8;const Cj=class Cj{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:o,structTreeLayer:s}){ve(this,iy);ve(this,kT,null);ve(this,b0,null);ve(this,fm,new Map);ve(this,NT,null);this.div=e,he(this,kT,t),he(this,b0,r),he(this,NT,s||null),this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return P(this,fm).size>0}async render(e){var o;const{annotations:t}=e,r=this.div;a1(r,this.viewport);const i=new Map,a={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new UN,annotationStorage:e.annotationStorage||new y7,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const s of t){if(s.noHTML)continue;const u=s.annotationType===Aa.POPUP;if(u){const c=i.get(s.id);if(!c)continue;a.elements=c}else if(s.rect[2]===s.rect[0]||s.rect[3]===s.rect[1])continue;a.data=s;const l=oX.create(a);if(!l.isRenderable)continue;if(!u&&s.popupRef){const c=i.get(s.popupRef);c?c.push(l):i.set(s.popupRef,[l])}const h=l.render();s.hidden&&(h.style.visibility="hidden"),await be(this,iy,T8).call(this,h,s.id),l._isEditable&&(P(this,fm).set(l.data.id,l),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(l))}be(this,iy,D8).call(this)}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new UN,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=Cj._defaultBorderStyle),r.data=i;const a=oX.create(r);if(!a.isRenderable)continue;const o=a.render();await be(this,iy,T8).call(this,o,i.id)}}update({viewport:e}){const t=this.div;this.viewport=e,a1(t,{rotation:e.rotation}),be(this,iy,D8).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(P(this,fm).values())}getEditableAnnotation(e){return P(this,fm).get(e)}static get _defaultBorderStyle(){return Zn(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:e2.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};kT=new WeakMap,b0=new WeakMap,fm=new WeakMap,NT=new WeakMap,iy=new WeakSet,T8=async function(e,t){var o,s;const r=e.firstChild||e,i=r.id=`${h7}${t}`,a=await((o=P(this,NT))==null?void 0:o.getAriaAttributes(i));if(a)for(const[u,l]of a)r.setAttribute(u,l);this.div.append(e),(s=P(this,kT))==null||s.moveElementInDOM(this.div,e,r,!1)},D8=function(){var t;if(!P(this,b0))return;const e=this.div;for(const[r,i]of P(this,b0)){const a=e.querySelector(`[data-annotation-id="${r}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):a.append(i);const s=P(this,fm).get(r);s&&(s._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,a.id,i),s._hasNoCanvas=!1):s.canvas=i)}P(this,b0).clear()};let E8=Cj;const wk=/\r\n?|\n/g;var Gc,Qu,OT,w0,Zu,La,Wie,jie,$ie,z3,xp,W3,j3,qie,k8,Vie;const xi=class xi extends zi{constructor(t){super({...t,name:"freeTextEditor"});ve(this,La);ve(this,Gc);ve(this,Qu,"");ve(this,OT,`${this.id}-editor`);ve(this,w0,null);ve(this,Zu);he(this,Gc,t.color||xi._defaultColor||zi._defaultLineColor),he(this,Zu,t.fontSize||xi._defaultFontSize)}static get _keyboardManager(){const t=xi.prototype,r=o=>o.isEmpty(),i=s1.TRANSLATE_SMALL,a=s1.TRANSLATE_BIG;return Zn(this,"_keyboardManager",new yD([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:r}]]))}static initialize(t,r){zi.initialize(t,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case or.FREETEXT_SIZE:xi._defaultFontSize=r;break;case or.FREETEXT_COLOR:xi._defaultColor=r;break}}updateParams(t,r){switch(t){case or.FREETEXT_SIZE:be(this,La,Wie).call(this,r);break;case or.FREETEXT_COLOR:be(this,La,jie).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[or.FREETEXT_SIZE,xi._defaultFontSize],[or.FREETEXT_COLOR,xi._defaultColor||zi._defaultLineColor]]}get propertiesToUpdate(){return[[or.FREETEXT_SIZE,P(this,Zu)],[or.FREETEXT_COLOR,P(this,Gc)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-xi._internalPadding*t,-(xi._internalPadding+P(this,Zu))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(An.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),he(this,w0,new AbortController);const t=this._uiManager.combinedSignal(P(this,w0));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",P(this,OT)),this._isDraggable=!0,(t=P(this,w0))==null||t.abort(),he(this,w0,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=P(this,Qu),r=he(this,Qu,be(this,La,$ie).call(this).trimEnd());if(t===r)return;const i=a=>{if(he(this,Qu,a),!a){this.remove();return}be(this,La,j3).call(this),this._uiManager.rebuild(this),be(this,La,z3).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(t)},mustExec:!1}),be(this,La,z3).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){xi._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",P(this,OT)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${P(this,Zu)}px * var(--total-scale-factor))`,i.color=P(this,Gc),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),m7(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[u,l]=this.getInitialTranslation();[u,l]=this.pageTranslationToScreen(u,l);const[h,c]=this.pageDimensions,[f,d]=this.pageTranslation;let p,m;switch(this.rotation){case 0:p=t+(s[0]-f)/h,m=r+this.height-(s[1]-d)/c;break;case 90:p=t+(s[0]-f)/h,m=r-(s[1]-d)/c,[u,l]=[l,-u];break;case 180:p=t-this.width+(s[0]-f)/h,m=r-(s[1]-d)/c,[u,l]=[-u,-l];break;case 270:p=t+(s[0]-f-this.height*c)/h,m=r+(s[1]-d-this.width*h)/c,[u,l]=[-l,u];break}this.setAt(p*a,m*o,u,l)}else this._moveAfterPaste(t,r);be(this,La,j3).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var p,m,g;const r=t.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=be(p=xi,xp,k8).call(p,r.getData("text")||"").replaceAll(wk,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const s=o.getRangeAt(0);if(!a.includes(`
`)){s.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:l}=s,h=[],c=[];if(u.nodeType===Node.TEXT_NODE){const y=u.parentElement;if(c.push(u.nodeValue.slice(l).replaceAll(wk,"")),y!==this.editorDiv){let v=h;for(const b of this.editorDiv.childNodes){if(b===y){v=c;continue}v.push(be(m=xi,xp,W3).call(m,b))}}h.push(u.nodeValue.slice(0,l).replaceAll(wk,""))}else if(u===this.editorDiv){let y=h,v=0;for(const b of this.editorDiv.childNodes)v++===l&&(y=c),y.push(be(g=xi,xp,W3).call(g,b))}he(this,Qu,`${h.join(`
`)}${a}${c.join(`
`)}`),be(this,La,j3).call(this);const f=new Range;let d=h.reduce((y,v)=>y+v.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const v=y.nodeValue.length;if(d<=v){f.setStart(y,d),f.setEnd(y,d);break}d-=v}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,r,i){var s;let a=null;if(t instanceof Mie){const{data:{defaultAppearanceData:{fontSize:u,fontColor:l},rect:h,rotation:c,id:f,popupRef:d},textContent:p,textPosition:m,parent:{page:{pageNumber:g}}}=t;if(!p||p.length===0)return null;a=t={annotationType:An.FREETEXT,color:Array.from(l),fontSize:u,value:p.join(`
`),position:m,pageIndex:g-1,rect:h.slice(0),rotation:c,id:f,deleted:!1,popupRef:d}}const o=await super.deserialize(t,r,i);return he(o,Zu,t.fontSize),he(o,Gc,cn.makeHexColor(...t.color)),he(o,Qu,be(s=xi,xp,k8).call(s,t.value)),o.annotationElementId=t.id||null,o._initialData=a,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=xi._internalPadding*this.parentScale,i=this.getRect(r,r),a=zi._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:P(this,Gc)),o={annotationType:An.FREETEXT,color:a,fontSize:P(this,Zu),value:be(this,La,qie).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!be(this,La,Vie).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:i}=r;i.fontSize=`calc(${P(this,Zu)}px * var(--total-scale-factor))`,i.color=P(this,Gc),r.replaceChildren();for(const o of P(this,Qu).split(`
`)){const s=document.createElement("div");s.append(o?document.createTextNode(o):document.createElement("br")),r.append(s)}const a=xi._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:P(this,Qu)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Gc=new WeakMap,Qu=new WeakMap,OT=new WeakMap,w0=new WeakMap,Zu=new WeakMap,La=new WeakSet,Wie=function(t){const r=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-P(this,Zu))*this.parentScale),he(this,Zu,a),be(this,La,z3).call(this)},i=P(this,Zu);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:or.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},jie=function(t){const r=a=>{he(this,Gc,this.editorDiv.style.color=a)},i=P(this,Gc);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:or.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$ie=function(){var i;const t=[];this.editorDiv.normalize();let r=null;for(const a of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(be(i=xi,xp,W3).call(i,a)),r=a);return t.join(`
`)},z3=function(){const[t,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,s=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=s,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/r):(this.width=i.height/t,this.height=i.width/r),this.fixAndSetPosition()},xp=new WeakSet,W3=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(wk,"")},j3=function(){if(this.editorDiv.replaceChildren(),!!P(this,Qu))for(const t of P(this,Qu).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},qie=function(){return P(this,Qu).replaceAll(""," ")},k8=function(t){return t.replaceAll(" ","")},Vie=function(t){const{value:r,fontSize:i,color:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==r||t.fontSize!==i||t.color.some((s,u)=>s!==a[u])||t.pageIndex!==o},ve(xi,xp),nn(xi,"_freeTextDefaultContent",""),nn(xi,"_internalPadding",0),nn(xi,"_defaultColor",null),nn(xi,"_defaultFontSize",10),nn(xi,"_type","freetext"),nn(xi,"_editorType",An.FREETEXT);let A8=xi;class Xt{toSVGPath(){ri("Abstract method `toSVGPath` must be implemented.")}get box(){ri("Abstract getter `box` must be implemented.")}serialize(e,t){ri("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,a,o){o||(o=new Float32Array(e.length));for(let s=0,u=e.length;s<u;s+=2)o[s]=t+e[s]*i,o[s+1]=r+e[s+1]*a;return o}static _rescaleAndSwap(e,t,r,i,a,o){o||(o=new Float32Array(e.length));for(let s=0,u=e.length;s<u;s+=2)o[s]=t+e[s+1]*i,o[s+1]=r+e[s]*a;return o}static _translate(e,t,r,i){i||(i=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)i[a]=t+e[a],i[a+1]=r+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,a){switch(a){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,a,o){return[(e+5*r)/6,(t+5*i)/6,(5*r+a)/6,(5*i+o)/6,(r+a)/2,(i+o)/2]}}nn(Xt,"PRECISION",1e-4);var Ju,Xc,bw,ww,yf,Kn,x0,_0,RT,IT,xw,_w,dm,FT,QO,ZO,es,uC,Hie,Gie,Xie,Kie,Yie,Qie;const Od=class Od{constructor({x:e,y:t},r,i,a,o,s=0){ve(this,es);ve(this,Ju);ve(this,Xc,[]);ve(this,bw);ve(this,ww);ve(this,yf,[]);ve(this,Kn,new Float32Array(18));ve(this,x0);ve(this,_0);ve(this,RT);ve(this,IT);ve(this,xw);ve(this,_w);ve(this,dm,[]);he(this,Ju,r),he(this,_w,a*i),he(this,ww,o),P(this,Kn).set([NaN,NaN,NaN,NaN,e,t],6),he(this,bw,s),he(this,IT,P(Od,FT)*i),he(this,RT,P(Od,ZO)*i),he(this,xw,i),P(this,dm).push(e,t)}isEmpty(){return isNaN(P(this,Kn)[8])}add({x:e,y:t}){var k;he(this,x0,e),he(this,_0,t);const[r,i,a,o]=P(this,Ju);let[s,u,l,h]=P(this,Kn).subarray(8,12);const c=e-l,f=t-h,d=Math.hypot(c,f);if(d<P(this,RT))return!1;const p=d-P(this,IT),m=p/d,g=m*c,y=m*f;let v=s,b=u;s=l,u=h,l+=g,h+=y,(k=P(this,dm))==null||k.push(e,t);const w=-y/p,x=g/p,S=w*P(this,_w),E=x*P(this,_w);return P(this,Kn).set(P(this,Kn).subarray(2,8),0),P(this,Kn).set([l+S,h+E],4),P(this,Kn).set(P(this,Kn).subarray(14,18),12),P(this,Kn).set([l-S,h-E],16),isNaN(P(this,Kn)[6])?(P(this,yf).length===0&&(P(this,Kn).set([s+S,u+E],2),P(this,yf).push(NaN,NaN,NaN,NaN,(s+S-r)/a,(u+E-i)/o),P(this,Kn).set([s-S,u-E],14),P(this,Xc).push(NaN,NaN,NaN,NaN,(s-S-r)/a,(u-E-i)/o)),P(this,Kn).set([v,b,s,u,l,h],6),!this.isEmpty()):(P(this,Kn).set([v,b,s,u,l,h],6),Math.abs(Math.atan2(b-u,v-s)-Math.atan2(y,g))<Math.PI/2?([s,u,l,h]=P(this,Kn).subarray(2,6),P(this,yf).push(NaN,NaN,NaN,NaN,((s+l)/2-r)/a,((u+h)/2-i)/o),[s,u,v,b]=P(this,Kn).subarray(14,18),P(this,Xc).push(NaN,NaN,NaN,NaN,((v+s)/2-r)/a,((b+u)/2-i)/o),!0):([v,b,s,u,l,h]=P(this,Kn).subarray(0,6),P(this,yf).push(((v+5*s)/6-r)/a,((b+5*u)/6-i)/o,((5*s+l)/6-r)/a,((5*u+h)/6-i)/o,((s+l)/2-r)/a,((u+h)/2-i)/o),[l,h,s,u,v,b]=P(this,Kn).subarray(12,18),P(this,Xc).push(((v+5*s)/6-r)/a,((b+5*u)/6-i)/o,((5*s+l)/6-r)/a,((5*u+h)/6-i)/o,((s+l)/2-r)/a,((u+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=P(this,yf),t=P(this,Xc);if(isNaN(P(this,Kn)[6])&&!this.isEmpty())return be(this,es,Hie).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);be(this,es,Xie).call(this,r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return be(this,es,Gie).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,i,a,o){return new Zie(e,t,r,i,a,o)}getOutlines(){var c;const e=P(this,yf),t=P(this,Xc),r=P(this,Kn),[i,a,o,s]=P(this,Ju),u=new Float32Array((((c=P(this,dm))==null?void 0:c.length)??0)+2);for(let f=0,d=u.length-2;f<d;f+=2)u[f]=(P(this,dm)[f]-i)/o,u[f+1]=(P(this,dm)[f+1]-a)/s;if(u[u.length-2]=(P(this,x0)-i)/o,u[u.length-1]=(P(this,_0)-a)/s,isNaN(r[6])&&!this.isEmpty())return be(this,es,Kie).call(this,u);const l=new Float32Array(P(this,yf).length+24+P(this,Xc).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){l[f]=l[f+1]=NaN;continue}l[f]=e[f],l[f+1]=e[f+1]}h=be(this,es,Qie).call(this,l,h);for(let f=t.length-6;f>=6;f-=6)for(let d=0;d<6;d+=2){if(isNaN(t[f+d])){l[h]=l[h+1]=NaN,h+=2;continue}l[h]=t[f+d],l[h+1]=t[f+d+1],h+=2}return be(this,es,Yie).call(this,l,h),this.newFreeDrawOutline(l,u,P(this,Ju),P(this,xw),P(this,bw),P(this,ww))}};Ju=new WeakMap,Xc=new WeakMap,bw=new WeakMap,ww=new WeakMap,yf=new WeakMap,Kn=new WeakMap,x0=new WeakMap,_0=new WeakMap,RT=new WeakMap,IT=new WeakMap,xw=new WeakMap,_w=new WeakMap,dm=new WeakMap,FT=new WeakMap,QO=new WeakMap,ZO=new WeakMap,es=new WeakSet,uC=function(){const e=P(this,Kn).subarray(4,6),t=P(this,Kn).subarray(16,18),[r,i,a,o]=P(this,Ju);return[(P(this,x0)+(e[0]-t[0])/2-r)/a,(P(this,_0)+(e[1]-t[1])/2-i)/o,(P(this,x0)+(t[0]-e[0])/2-r)/a,(P(this,_0)+(t[1]-e[1])/2-i)/o]},Hie=function(){const[e,t,r,i]=P(this,Ju),[a,o,s,u]=be(this,es,uC).call(this);return`M${(P(this,Kn)[2]-e)/r} ${(P(this,Kn)[3]-t)/i} L${(P(this,Kn)[4]-e)/r} ${(P(this,Kn)[5]-t)/i} L${a} ${o} L${s} ${u} L${(P(this,Kn)[16]-e)/r} ${(P(this,Kn)[17]-t)/i} L${(P(this,Kn)[14]-e)/r} ${(P(this,Kn)[15]-t)/i} Z`},Gie=function(e){const t=P(this,Xc);e.push(`L${t[4]} ${t[5]} Z`)},Xie=function(e){const[t,r,i,a]=P(this,Ju),o=P(this,Kn).subarray(4,6),s=P(this,Kn).subarray(16,18),[u,l,h,c]=be(this,es,uC).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-r)/a} L${u} ${l} L${h} ${c} L${(s[0]-t)/i} ${(s[1]-r)/a}`)},Kie=function(e){const t=P(this,Kn),[r,i,a,o]=P(this,Ju),[s,u,l,h]=be(this,es,uC).call(this),c=new Float32Array(36);return c.set([NaN,NaN,NaN,NaN,(t[2]-r)/a,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-r)/a,(t[5]-i)/o,NaN,NaN,NaN,NaN,s,u,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,(t[16]-r)/a,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-r)/a,(t[15]-i)/o],0),this.newFreeDrawOutline(c,e,P(this,Ju),P(this,xw),P(this,bw),P(this,ww))},Yie=function(e,t){const r=P(this,Xc);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},Qie=function(e,t){const r=P(this,Kn).subarray(4,6),i=P(this,Kn).subarray(16,18),[a,o,s,u]=P(this,Ju),[l,h,c,f]=be(this,es,uC).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-a)/s,(r[1]-o)/u,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,(i[0]-a)/s,(i[1]-o)/u],t),t+=24},ve(Od,FT,8),ve(Od,QO,2),ve(Od,ZO,P(Od,FT)+P(Od,QO));let BN=Od;var Sw,S0,tp,PT,el,LT,da,JO,Jie;class Zie extends Xt{constructor(t,r,i,a,o,s){super();ve(this,JO);ve(this,Sw);ve(this,S0,new Float32Array(4));ve(this,tp);ve(this,PT);ve(this,el);ve(this,LT);ve(this,da);he(this,da,t),he(this,el,r),he(this,Sw,i),he(this,LT,a),he(this,tp,o),he(this,PT,s),this.lastPoint=[NaN,NaN],be(this,JO,Jie).call(this,s);const[u,l,h,c]=P(this,S0);for(let f=0,d=t.length;f<d;f+=2)t[f]=(t[f]-u)/h,t[f+1]=(t[f+1]-l)/c;for(let f=0,d=r.length;f<d;f+=2)r[f]=(r[f]-u)/h,r[f+1]=(r[f+1]-l)/c}toSVGPath(){const t=[`M${P(this,da)[4]} ${P(this,da)[5]}`];for(let r=6,i=P(this,da).length;r<i;r+=6){if(isNaN(P(this,da)[r])){t.push(`L${P(this,da)[r+4]} ${P(this,da)[r+5]}`);continue}t.push(`C${P(this,da)[r]} ${P(this,da)[r+1]} ${P(this,da)[r+2]} ${P(this,da)[r+3]} ${P(this,da)[r+4]} ${P(this,da)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,i,a],o){const s=i-t,u=a-r;let l,h;switch(o){case 0:l=Xt._rescale(P(this,da),t,a,s,-u),h=Xt._rescale(P(this,el),t,a,s,-u);break;case 90:l=Xt._rescaleAndSwap(P(this,da),t,r,s,u),h=Xt._rescaleAndSwap(P(this,el),t,r,s,u);break;case 180:l=Xt._rescale(P(this,da),i,r,-s,u),h=Xt._rescale(P(this,el),i,r,-s,u);break;case 270:l=Xt._rescaleAndSwap(P(this,da),i,a,-s,-u),h=Xt._rescaleAndSwap(P(this,el),i,a,-s,-u);break}return{outline:Array.from(l),points:[Array.from(h)]}}get box(){return P(this,S0)}newOutliner(t,r,i,a,o,s=0){return new BN(t,r,i,a,o,s)}getNewOutline(t,r){const[i,a,o,s]=P(this,S0),[u,l,h,c]=P(this,Sw),f=o*h,d=s*c,p=i*h+u,m=a*c+l,g=this.newOutliner({x:P(this,el)[0]*f+p,y:P(this,el)[1]*d+m},P(this,Sw),P(this,LT),t,P(this,PT),r??P(this,tp));for(let y=2;y<P(this,el).length;y+=2)g.add({x:P(this,el)[y]*f+p,y:P(this,el)[y+1]*d+m});return g.getOutlines()}}Sw=new WeakMap,S0=new WeakMap,tp=new WeakMap,PT=new WeakMap,el=new WeakMap,LT=new WeakMap,da=new WeakMap,JO=new WeakSet,Jie=function(t){const r=P(this,da);let i=r[4],a=r[5],o=i,s=a,u=i,l=a,h=i,c=a;const f=t?Math.max:Math.min;for(let p=6,m=r.length;p<m;p+=6){if(isNaN(r[p]))o=Math.min(o,r[p+4]),s=Math.min(s,r[p+5]),u=Math.max(u,r[p+4]),l=Math.max(l,r[p+5]),c<r[p+5]?(h=r[p+4],c=r[p+5]):c===r[p+5]&&(h=f(h,r[p+4]));else{const g=cn.bezierBoundingBox(i,a,...r.slice(p,p+6));o=Math.min(o,g[0]),s=Math.min(s,g[1]),u=Math.max(u,g[2]),l=Math.max(l,g[3]),c<g[3]?(h=g[2],c=g[3]):c===g[3]&&(h=f(h,g[2]))}i=r[p+4],a=r[p+5]}const d=P(this,S0);d[0]=o-P(this,tp),d[1]=s-P(this,tp),d[2]=u-o+2*P(this,tp),d[3]=l-s+2*P(this,tp),this.lastPoint=[h,c]};var MT,UT,pm,Kc,Vo,eae,$3,tae,nae,O8;class N8{constructor(e,t=0,r=0,i=!0){ve(this,Vo);ve(this,MT);ve(this,UT);ve(this,pm,[]);ve(this,Kc,[]);let a=1/0,o=-1/0,s=1/0,u=-1/0;const l=10**-4;for(const{x:g,y,width:v,height:b}of e){const w=Math.floor((g-t)/l)*l,x=Math.ceil((g+v+t)/l)*l,S=Math.floor((y-t)/l)*l,E=Math.ceil((y+b+t)/l)*l,A=[w,S,E,!0],k=[x,S,E,!1];P(this,pm).push(A,k),a=Math.min(a,w),o=Math.max(o,x),s=Math.min(s,S),u=Math.max(u,E)}const h=o-a+2*r,c=u-s+2*r,f=a-r,d=s-r,p=P(this,pm).at(i?-1:-2),m=[p[0],p[2]];for(const g of P(this,pm)){const[y,v,b]=g;g[0]=(y-f)/h,g[1]=(v-d)/c,g[2]=(b-d)/c}he(this,MT,new Float32Array([f,d,h,c])),he(this,UT,m)}getOutlines(){P(this,pm).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of P(this,pm))t[3]?(e.push(...be(this,Vo,O8).call(this,t)),be(this,Vo,tae).call(this,t)):(be(this,Vo,nae).call(this,t),e.push(...be(this,Vo,O8).call(this,t)));return be(this,Vo,eae).call(this,e)}}MT=new WeakMap,UT=new WeakMap,pm=new WeakMap,Kc=new WeakMap,Vo=new WeakSet,eae=function(e){const t=[],r=new Set;for(const o of e){const[s,u,l]=o;t.push([s,u,o],[s,l,o])}t.sort((o,s)=>o[1]-s[1]||o[0]-s[0]);for(let o=0,s=t.length;o<s;o+=2){const u=t[o][2],l=t[o+1][2];u.push(l),l.push(u),r.add(u),r.add(l)}const i=[];let a;for(;r.size>0;){const o=r.values().next().value;let[s,u,l,h,c]=o;r.delete(o);let f=s,d=u;for(a=[s,l],i.push(a);;){let p;if(r.has(h))p=h;else if(r.has(c))p=c;else break;r.delete(p),[s,u,l,h,c]=p,f!==s&&(a.push(f,d,s,d===u?u:l),f=s),d=d===u?l:u}a.push(f,d)}return new Kke(i,P(this,MT),P(this,UT))},$3=function(e){const t=P(this,Kc);let r=0,i=t.length-1;for(;r<=i;){const a=r+i>>1,o=t[a][0];if(o===e)return a;o<e?r=a+1:i=a-1}return i+1},tae=function([,e,t]){const r=be(this,Vo,$3).call(this,e);P(this,Kc).splice(r,0,[e,t])},nae=function([,e,t]){const r=be(this,Vo,$3).call(this,e);for(let i=r;i<P(this,Kc).length;i++){const[a,o]=P(this,Kc)[i];if(a!==e)break;if(a===e&&o===t){P(this,Kc).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[a,o]=P(this,Kc)[i];if(a!==e)break;if(a===e&&o===t){P(this,Kc).splice(i,1);return}}},O8=function(e){const[t,r,i]=e,a=[[t,r,i]],o=be(this,Vo,$3).call(this,i);for(let s=0;s<o;s++){const[u,l]=P(this,Kc)[s];for(let h=0,c=a.length;h<c;h++){const[,f,d]=a[h];if(!(l<=f||d<=u)){if(f>=u){if(d>l)a[h][1]=l;else{if(c===1)return[];a.splice(h,1),h--,c--}continue}a[h][2]=u,d>l&&a.push([t,l,d])}}}return a};var BT,Cw;class Kke extends Xt{constructor(t,r,i){super();ve(this,BT);ve(this,Cw);he(this,Cw,t),he(this,BT,r),this.lastPoint=i}toSVGPath(){const t=[];for(const r of P(this,Cw)){let[i,a]=r;t.push(`M${i} ${a}`);for(let o=2;o<r.length;o+=2){const s=r[o],u=r[o+1];s===i?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${s}`),i=s)}t.push("Z")}return t.join(" ")}serialize([t,r,i,a],o){const s=[],u=i-t,l=a-r;for(const h of P(this,Cw)){const c=new Array(h.length);for(let f=0;f<h.length;f+=2)c[f]=t+h[f]*u,c[f+1]=a-h[f+1]*l;s.push(c)}return s}get box(){return P(this,BT)}get classNamesForOutlining(){return["highlightOutline"]}}BT=new WeakMap,Cw=new WeakMap;class R8 extends BN{newFreeDrawOutline(e,t,r,i,a,o){return new Yke(e,t,r,i,a,o)}}class Yke extends Zie{newOutliner(e,t,r,i,a,o=0){return new R8(e,t,r,i,a,o)}}var Yc,C0,Ew,Ka,zT,Tw,WT,jT,gm,Qc,Dw,$T,ni,I8,F8,P8,fv,rae,Ug;const gu=class gu{constructor({editor:e=null,uiManager:t=null}){ve(this,ni);ve(this,Yc,null);ve(this,C0,null);ve(this,Ew);ve(this,Ka,null);ve(this,zT,!1);ve(this,Tw,!1);ve(this,WT,null);ve(this,jT);ve(this,gm,null);ve(this,Qc,null);ve(this,Dw);var r;e?(he(this,Tw,!1),he(this,Dw,or.HIGHLIGHT_COLOR),he(this,WT,e)):(he(this,Tw,!0),he(this,Dw,or.HIGHLIGHT_DEFAULT_COLOR)),he(this,Qc,(e==null?void 0:e._uiManager)||t),he(this,jT,P(this,Qc)._eventBus),he(this,Ew,(e==null?void 0:e.color)||((r=P(this,Qc))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),P(gu,$T)||he(gu,$T,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Zn(this,"_keyboardManager",new yD([[["Escape","mac+Escape"],gu.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],gu.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],gu.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],gu.prototype._moveToPrevious],[["Home","mac+Home"],gu.prototype._moveToBeginning],[["End","mac+End"],gu.prototype._moveToEnd]]))}renderButton(){const e=he(this,Yc,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=P(this,Qc)._signal;e.addEventListener("click",be(this,ni,fv).bind(this),{signal:t}),e.addEventListener("keydown",be(this,ni,P8).bind(this),{signal:t});const r=he(this,C0,document.createElement("span"));return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=P(this,Ew),e.append(r),e}renderMainDropdown(){const e=he(this,Ka,be(this,ni,I8).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===P(this,Yc)){be(this,ni,fv).call(this,e);return}const t=e.target.getAttribute("data-color");t&&be(this,ni,F8).call(this,t,e)}_moveToNext(e){var t,r;if(!P(this,ni,Ug)){be(this,ni,fv).call(this,e);return}if(e.target===P(this,Yc)){(t=P(this,Ka).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=P(this,Ka))==null?void 0:t.firstChild)||e.target===P(this,Yc)){P(this,ni,Ug)&&this._hideDropdownFromKeyboard();return}P(this,ni,Ug)||be(this,ni,fv).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!P(this,ni,Ug)){be(this,ni,fv).call(this,e);return}(t=P(this,Ka).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!P(this,ni,Ug)){be(this,ni,fv).call(this,e);return}(t=P(this,Ka).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=P(this,Ka))==null||e.classList.add("hidden"),(t=P(this,gm))==null||t.abort(),he(this,gm,null)}_hideDropdownFromKeyboard(){var e;if(!P(this,Tw)){if(!P(this,ni,Ug)){(e=P(this,WT))==null||e.unselect();return}this.hideDropdown(),P(this,Yc).focus({preventScroll:!0,focusVisible:P(this,zT)})}}updateColor(e){if(P(this,C0)&&(P(this,C0).style.backgroundColor=e),!P(this,Ka))return;const t=P(this,Qc).highlightColors.values();for(const r of P(this,Ka).children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=P(this,Yc))==null||e.remove(),he(this,Yc,null),he(this,C0,null),(t=P(this,Ka))==null||t.remove(),he(this,Ka,null)}};Yc=new WeakMap,C0=new WeakMap,Ew=new WeakMap,Ka=new WeakMap,zT=new WeakMap,Tw=new WeakMap,WT=new WeakMap,jT=new WeakMap,gm=new WeakMap,Qc=new WeakMap,Dw=new WeakMap,$T=new WeakMap,ni=new WeakSet,I8=function(){const e=document.createElement("div"),t=P(this,Qc)._signal;e.addEventListener("contextmenu",ph,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,i]of P(this,Qc).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=r,a.setAttribute("data-l10n-id",P(gu,$T)[r]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=i,a.setAttribute("aria-selected",i===P(this,Ew)),a.addEventListener("click",be(this,ni,F8).bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",be(this,ni,P8).bind(this),{signal:t}),e},F8=function(e,t){t.stopPropagation(),P(this,jT).dispatch("switchannotationeditorparams",{source:this,type:P(this,Dw),value:e})},P8=function(e){gu._keyboardManager.exec(this,e)},fv=function(e){if(P(this,ni,Ug)){this.hideDropdown();return}if(he(this,zT,e.detail===0),P(this,gm)||(he(this,gm,new AbortController),window.addEventListener("pointerdown",be(this,ni,rae).bind(this),{signal:P(this,Qc).combinedSignal(P(this,gm))})),P(this,Ka)){P(this,Ka).classList.remove("hidden");return}const t=he(this,Ka,be(this,ni,I8).call(this));P(this,Yc).append(t)},rae=function(e){var t;(t=P(this,Ka))!=null&&t.contains(e.target)||this.hideDropdown()},Ug=function(){return P(this,Ka)&&!P(this,Ka).classList.contains("hidden")},ve(gu,$T,null);let zN=gu;var Aw,qT,np,E0,kw,vu,VT,HT,T0,Zl,tl,Us,Nw,rp,oo,Ow,Jl,GT,Ln,L8,q3,iae,aae,sae,M8,dv,uc,s2,oae,V3,lC,uae,lae,cae,hae,fae;const Dr=class Dr extends zi{constructor(t){super({...t,name:"highlightEditor"});ve(this,Ln);ve(this,Aw,null);ve(this,qT,0);ve(this,np);ve(this,E0,null);ve(this,kw,null);ve(this,vu,null);ve(this,VT,null);ve(this,HT,0);ve(this,T0,null);ve(this,Zl,null);ve(this,tl,null);ve(this,Us,!1);ve(this,Nw,null);ve(this,rp);ve(this,oo,null);ve(this,Ow,"");ve(this,Jl);ve(this,GT,"");this.color=t.color||Dr._defaultColor,he(this,Jl,t.thickness||Dr._defaultThickness),he(this,rp,t.opacity||Dr._defaultOpacity),he(this,np,t.boxes||null),he(this,GT,t.methodOfCreation||""),he(this,Ow,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(he(this,Us,!0),be(this,Ln,q3).call(this,t),be(this,Ln,dv).call(this)):P(this,np)&&(he(this,Aw,t.anchorNode),he(this,qT,t.anchorOffset),he(this,VT,t.focusNode),he(this,HT,t.focusOffset),be(this,Ln,L8).call(this),be(this,Ln,dv).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Dr.prototype;return Zn(this,"_keyboardManager",new yD([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:P(this,Us)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:P(this,Jl),methodOfCreation:P(this,GT)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var i;zi.initialize(t,r),Dr._defaultColor||(Dr._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case or.HIGHLIGHT_DEFAULT_COLOR:Dr._defaultColor=r;break;case or.HIGHLIGHT_THICKNESS:Dr._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return P(this,Nw)}updateParams(t,r){switch(t){case or.HIGHLIGHT_COLOR:be(this,Ln,iae).call(this,r);break;case or.HIGHLIGHT_THICKNESS:be(this,Ln,aae).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[or.HIGHLIGHT_DEFAULT_COLOR,Dr._defaultColor],[or.HIGHLIGHT_THICKNESS,Dr._defaultThickness]]}get propertiesToUpdate(){return[[or.HIGHLIGHT_COLOR,this.color||Dr._defaultColor],[or.HIGHLIGHT_THICKNESS,P(this,Jl)||Dr._defaultThickness],[or.HIGHLIGHT_FREE,P(this,Us)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(he(this,kw,new zN({editor:this})),t.addColorPicker(P(this,kw))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(be(this,Ln,lC).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,be(this,Ln,lC).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){be(this,Ln,M8).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(be(this,Ln,dv).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?be(this,Ln,M8).call(this):t&&(be(this,Ln,dv).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var a,o,s;const{drawLayer:r}=this.parent;let i;P(this,Us)?(t=(t-this.rotation+360)%360,i=be(a=Dr,uc,s2).call(a,P(this,Zl).box,t)):i=be(o=Dr,uc,s2).call(o,[this.x,this.y,this.width,this.height],t),r.updateProperties(P(this,tl),{bbox:i,root:{"data-main-rotation":t}}),r.updateProperties(P(this,oo),{bbox:be(s=Dr,uc,s2).call(s,P(this,vu).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();P(this,Ow)&&(t.setAttribute("aria-label",P(this,Ow)),t.setAttribute("role","mark")),P(this,Us)?t.classList.add("free"):this.div.addEventListener("keydown",be(this,Ln,oae).bind(this),{signal:this._uiManager._signal});const r=he(this,T0,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=P(this,E0);const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),m7(this,P(this,T0),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(P(this,oo),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(P(this,oo),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:be(this,Ln,V3).call(this,!0);break;case 1:case 3:be(this,Ln,V3).call(this,!1);break}}select(){var t;super.select(),P(this,oo)&&((t=this.parent)==null||t.drawLayer.updateProperties(P(this,oo),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),P(this,oo)&&((t=this.parent)==null||t.drawLayer.updateProperties(P(this,oo),{rootClass:{selected:!1}}),P(this,Us)||be(this,Ln,V3).call(this,!1))}get _mustFixPosition(){return!P(this,Us)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(P(this,tl),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(P(this,oo),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:i,x:a,y:o}){const{x:s,y:u,width:l,height:h}=i.getBoundingClientRect(),c=new AbortController,f=t.combinedSignal(c),d=p=>{c.abort(),be(this,uc,hae).call(this,t,p)};window.addEventListener("blur",d,{signal:f}),window.addEventListener("pointerup",d,{signal:f}),window.addEventListener("pointerdown",ka,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ph,{signal:f}),i.addEventListener("pointermove",be(this,uc,cae).bind(this,t),{signal:f}),this._freeHighlight=new R8({x:a,y:o},[s,u,l,h],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,i){var m,g,y,v;let a=null;if(t instanceof Bie){const{data:{quadPoints:b,rect:w,rotation:x,id:S,color:E,opacity:A,popupRef:k},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:An.HIGHLIGHT,color:Array.from(E),opacity:A,quadPoints:b,boxes:null,pageIndex:T-1,rect:w.slice(0),rotation:x,id:S,deleted:!1,popupRef:k}}else if(t instanceof w7){const{data:{inkLists:b,rect:w,rotation:x,id:S,color:E,borderStyle:{rawWidth:A},popupRef:k},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:An.HIGHLIGHT,color:Array.from(E),thickness:A,inkLists:b,boxes:null,pageIndex:T-1,rect:w.slice(0),rotation:x,id:S,deleted:!1,popupRef:k}}const{color:o,quadPoints:s,inkLists:u,opacity:l}=t,h=await super.deserialize(t,r,i);h.color=cn.makeHexColor(...o),he(h,rp,l||1),u&&he(h,Jl,t.thickness),h.annotationElementId=t.id||null,h._initialData=a;const[c,f]=h.pageDimensions,[d,p]=h.pageTranslation;if(s){const b=he(h,np,[]);for(let w=0;w<s.length;w+=8)b.push({x:(s[w]-d)/c,y:1-(s[w+1]-p)/f,width:(s[w+2]-s[w])/c,height:(s[w+1]-s[w+5])/f});be(m=h,Ln,L8).call(m),be(g=h,Ln,dv).call(g),h.rotate(h.rotation)}else if(u){he(h,Us,!0);const b=u[0],w={x:b[0]-d,y:f-(b[1]-p)},x=new R8(w,[0,0,c,f],1,P(h,Jl)/2,!0,.001);for(let A=0,k=b.length;A<k;A+=2)w.x=b[A]-d,w.y=f-(b[A+1]-p),x.add(w);const{id:S,clipPathId:E}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);be(y=h,Ln,q3).call(y,{highlightOutlines:x.getOutlines(),highlightId:S,clipPathId:E}),be(v=h,Ln,dv).call(v)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),i=zi._colorManager.convert(this.color),a={annotationType:An.HIGHLIGHT,color:i,opacity:P(this,rp),thickness:P(this,Jl),quadPoints:be(this,Ln,uae).call(this),outlines:be(this,Ln,lae).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:be(this,Ln,lC).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!be(this,Ln,fae).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Aw=new WeakMap,qT=new WeakMap,np=new WeakMap,E0=new WeakMap,kw=new WeakMap,vu=new WeakMap,VT=new WeakMap,HT=new WeakMap,T0=new WeakMap,Zl=new WeakMap,tl=new WeakMap,Us=new WeakMap,Nw=new WeakMap,rp=new WeakMap,oo=new WeakMap,Ow=new WeakMap,Jl=new WeakMap,GT=new WeakMap,Ln=new WeakSet,L8=function(){const t=new N8(P(this,np),.001);he(this,Zl,t.getOutlines()),[this.x,this.y,this.width,this.height]=P(this,Zl).box;const r=new N8(P(this,np),.0025,.001,this._uiManager.direction==="ltr");he(this,vu,r.getOutlines());const{lastPoint:i}=P(this,vu);he(this,Nw,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},q3=function({highlightOutlines:t,highlightId:r,clipPathId:i}){var c,f;if(he(this,Zl,t),he(this,vu,t.getNewOutline(P(this,Jl)/2+1.5,.0025)),r>=0)he(this,tl,r),he(this,E0,i),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),he(this,oo,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:P(this,vu).box,path:{d:P(this,vu).toSVGPath()}},!0));else if(this.parent){const d=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(P(this,tl),{bbox:be(c=Dr,uc,s2).call(c,P(this,Zl).box,(d-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(P(this,oo),{bbox:be(f=Dr,uc,s2).call(f,P(this,vu).box,d),path:{d:P(this,vu).toSVGPath()}})}const[o,s,u,l]=t.box;switch(this.rotation){case 0:this.x=o,this.y=s,this.width=u,this.height=l;break;case 90:{const[d,p]=this.parentDimensions;this.x=s,this.y=1-o,this.width=u*p/d,this.height=l*d/p;break}case 180:this.x=1-o,this.y=1-s,this.width=u,this.height=l;break;case 270:{const[d,p]=this.parentDimensions;this.x=1-s,this.y=o,this.width=u*p/d,this.height=l*d/p;break}}const{lastPoint:h}=P(this,vu);he(this,Nw,[(h[0]-o)/u,(h[1]-s)/l])},iae=function(t){const r=(o,s)=>{var u,l;this.color=o,he(this,rp,s),(u=this.parent)==null||u.drawLayer.updateProperties(P(this,tl),{root:{fill:o,"fill-opacity":s}}),(l=P(this,kw))==null||l.updateColor(o)},i=this.color,a=P(this,rp);this.addCommands({cmd:r.bind(this,t,Dr._defaultOpacity),undo:r.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:or.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},aae=function(t){const r=P(this,Jl),i=a=>{he(this,Jl,a),be(this,Ln,sae).call(this,a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:or.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},sae=function(t){if(!P(this,Us))return;be(this,Ln,q3).call(this,{highlightOutlines:P(this,Zl).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)},M8=function(){P(this,tl)===null||!this.parent||(this.parent.drawLayer.remove(P(this,tl)),he(this,tl,null),this.parent.drawLayer.remove(P(this,oo)),he(this,oo,null))},dv=function(t=this.parent){P(this,tl)===null&&({id:Mo(this,tl)._,clipPathId:Mo(this,E0)._}=t.drawLayer.draw({bbox:P(this,Zl).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":P(this,rp)},rootClass:{highlight:!0,free:P(this,Us)},path:{d:P(this,Zl).toSVGPath()}},!1,!0),he(this,oo,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:P(this,Us)},bbox:P(this,vu).box,path:{d:P(this,vu).toSVGPath()}},P(this,Us))),P(this,T0)&&(P(this,T0).style.clipPath=P(this,E0)))},uc=new WeakSet,s2=function([t,r,i,a],o){switch(o){case 90:return[1-r-a,t,a,i];case 180:return[1-t-i,1-r-a,i,a];case 270:return[r,1-t-i,a,i]}return[t,r,i,a]},oae=function(t){Dr._keyboardManager.exec(this,t)},V3=function(t){if(!P(this,Aw))return;const r=window.getSelection();t?r.setPosition(P(this,Aw),P(this,qT)):r.setPosition(P(this,VT),P(this,HT))},lC=function(){return P(this,Us)?this.rotation:0},uae=function(){if(P(this,Us))return null;const[t,r]=this.pageDimensions,[i,a]=this.pageTranslation,o=P(this,np),s=new Float32Array(o.length*8);let u=0;for(const{x:l,y:h,width:c,height:f}of o){const d=l*t+i,p=(1-h)*r+a;s[u]=s[u+4]=d,s[u+1]=s[u+3]=p,s[u+2]=s[u+6]=d+c*t,s[u+5]=s[u+7]=p-f*r,u+=8}return s},lae=function(t){return P(this,Zl).serialize(t,be(this,Ln,lC).call(this))},cae=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},hae=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},fae=function(t){const{color:r}=this._initialData;return t.color.some((i,a)=>i!==r[a])},ve(Dr,uc),nn(Dr,"_defaultColor",null),nn(Dr,"_defaultOpacity",1),nn(Dr,"_defaultThickness",12),nn(Dr,"_type","highlight"),nn(Dr,"_editorType",An.HIGHLIGHT),nn(Dr,"_freeHighlightId",-1),nn(Dr,"_freeHighlight",null),nn(Dr,"_freeHighlightClipId","");let WN=Dr;var D0;class dae{constructor(){ve(this,D0,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){P(this,D0)[e]=t}toSVGProperties(){const e=P(this,D0);return he(this,D0,Object.create(null)),{root:e}}reset(){he(this,D0,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){ri("Not implemented")}}D0=new WeakMap;var nl,Rw,ys,A0,k0,mm,ym,vm,N0,mr,U8,B8,z8,cC,pae,H3,hC,o2;const Yt=class Yt extends zi{constructor(t){super(t);ve(this,mr);ve(this,nl,null);ve(this,Rw);nn(this,"_drawId",null);he(this,Rw,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(be(this,mr,U8).call(this,t),be(this,mr,cC).call(this))}static _mergeSVGProperties(t,r){const i=new Set(Object.keys(t));for(const[a,o]of Object.entries(r))i.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){ri("Not implemented")}static get typesMap(){ri("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(P(Yt,ys).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,r[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,r[a]]);return t}_updateProperty(t,r,i){const a=this._drawingOptions,o=a[r],s=u=>{var h;a.updateProperty(r,u);const l=P(this,nl).updateProperty(r,u);l&&be(this,mr,hC).call(this,l),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:s.bind(this,i),undo:s.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Yt._mergeSVGProperties(P(this,nl).getPathResizingSVGProperties(be(this,mr,H3).call(this)),{bbox:be(this,mr,o2).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Yt._mergeSVGProperties(P(this,nl).getPathResizedSVGProperties(be(this,mr,H3).call(this)),{bbox:be(this,mr,o2).call(this)}))}_onTranslating(t,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:be(this,mr,o2).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Yt._mergeSVGProperties(P(this,nl).getPathTranslatedSVGProperties(be(this,mr,H3).call(this),this.parentDimensions),{bbox:be(this,mr,o2).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,P(this,Rw)&&(he(this,Rw,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){be(this,mr,z8).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(be(this,mr,cC).call(this),be(this,mr,hC).call(this,P(this,nl).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),be(this,mr,z8).call(this)):t&&(this._uiManager.addShouldRescale(this),be(this,mr,cC).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Yt._mergeSVGProperties({bbox:be(this,mr,o2).call(this)},P(this,nl).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&be(this,mr,hC).call(this,P(this,nl).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[o,s]=this.parentDimensions;return this.setDims(this.width*o,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),i}static createDrawerInstance(t,r,i,a,o){ri("Not implemented")}static startDrawing(t,r,i,a){var g;const{target:o,offsetX:s,offsetY:u,pointerId:l,pointerType:h}=a;if(P(Yt,ym)&&P(Yt,ym)!==h)return;const{viewport:{rotation:c}}=t,{width:f,height:d}=o.getBoundingClientRect(),p=he(Yt,A0,new AbortController),m=t.combinedSignal(p);if(P(Yt,mm)||he(Yt,mm,l),P(Yt,ym)??he(Yt,ym,h),window.addEventListener("pointerup",y=>{var v;P(Yt,mm)===y.pointerId?this._endDraw(y):(v=P(Yt,vm))==null||v.delete(y.pointerId)},{signal:m}),window.addEventListener("pointercancel",y=>{var v;P(Yt,mm)===y.pointerId?this._currentParent.endDrawingSession():(v=P(Yt,vm))==null||v.delete(y.pointerId)},{signal:m}),window.addEventListener("pointerdown",y=>{P(Yt,ym)===y.pointerType&&((P(Yt,vm)||he(Yt,vm,new Set)).add(y.pointerId),P(Yt,ys).isCancellable()&&(P(Yt,ys).removeLastElement(),P(Yt,ys).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",ph,{signal:m}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),o.addEventListener("touchmove",y=>{y.timeStamp===P(Yt,N0)&&ka(y)},{signal:m}),t.toggleDrawing(),(g=r._editorUndoBar)==null||g.hide(),P(Yt,ys)){t.drawLayer.updateProperties(this._currentDrawId,P(Yt,ys).startNew(s,u,f,d,c));return}r.updateUIForDefaultProperties(this),he(Yt,ys,this.createDrawerInstance(s,u,f,d,c)),he(Yt,k0,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(P(Yt,k0).toSVGProperties(),P(Yt,ys).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(he(Yt,N0,-1),!P(Yt,ys))return;const{offsetX:r,offsetY:i,pointerId:a}=t;if(P(Yt,mm)===a){if(((o=P(Yt,vm))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,P(Yt,ys).add(r,i)),he(Yt,N0,t.timeStamp),ka(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,he(Yt,ys,null),he(Yt,k0,null),he(Yt,ym,null),he(Yt,N0,NaN)),P(Yt,A0)&&(P(Yt,A0).abort(),he(Yt,A0,null),he(Yt,mm,NaN),he(Yt,vm,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,P(Yt,ys).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=P(Yt,ys),a=this._currentDrawId,o=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:or.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(or.DRAW_STEP),!P(Yt,ys).isEmpty()){const{pageDimensions:[i,a],scale:o}=r,s=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:P(Yt,ys).getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:P(Yt,k0),mustBeCommitted:!t});return this._cleanup(!0),s}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,i,a,o,s){ri("Not implemented")}static async deserialize(t,r,i){var c,f;const{rawDims:{pageWidth:a,pageHeight:o,pageX:s,pageY:u}}=r.viewport,l=this.deserializeDraw(s,u,a,o,this._INNER_MARGIN,t),h=await super.deserialize(t,r,i);return h.createDrawingOptions(t),be(c=h,mr,U8).call(c,{drawOutlines:l}),be(f=h,mr,cC).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[r,i]=this.pageTranslation,[a,o]=this.pageDimensions;return P(this,nl).serialize([r,i,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};nl=new WeakMap,Rw=new WeakMap,ys=new WeakMap,A0=new WeakMap,k0=new WeakMap,mm=new WeakMap,ym=new WeakMap,vm=new WeakMap,N0=new WeakMap,mr=new WeakSet,U8=function({drawOutlines:t,drawId:r,drawingOptions:i}){he(this,nl,t),this._drawingOptions||(this._drawingOptions=i),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=be(this,mr,B8).call(this,t,this.parent),be(this,mr,hC).call(this,t.box)},B8=function(t,r){const{id:i}=r.drawLayer.draw(Yt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},z8=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},cC=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=be(this,mr,B8).call(this,P(this,nl),t)}},pae=function([t,r,i,a]){const{parentDimensions:[o,s],rotation:u}=this;switch(u){case 90:return[r,1-t,i*(s/o),a*(o/s)];case 180:return[1-t,1-r,i,a];case 270:return[1-r,t,i*(s/o),a*(o/s)];default:return[t,r,i,a]}},H3=function(){const{x:t,y:r,width:i,height:a,parentDimensions:[o,s],rotation:u}=this;switch(u){case 90:return[1-r,t,i*(o/s),a*(s/o)];case 180:return[1-t,1-r,i,a];case 270:return[r,1-t,i*(o/s),a*(s/o)];default:return[t,r,i,a]}},hC=function(t){if([this.x,this.y,this.width,this.height]=be(this,mr,pae).call(this,t),this.div){this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)}this._onResized()},o2=function(){const{x:t,y:r,width:i,height:a,rotation:o,parentRotation:s,parentDimensions:[u,l]}=this;switch((o*4+s)/90){case 1:return[1-r-a,t,a,i];case 2:return[1-t-i,1-r-a,i,a];case 3:return[r,1-t-i,a,i];case 4:return[t,r-i*(u/l),a*(l/u),i*(u/l)];case 5:return[1-r,t,i*(u/l),a*(l/u)];case 6:return[1-t-a*(l/u),1-r,a*(l/u),i*(u/l)];case 7:return[r-i*(u/l),1-t-a*(l/u),i*(u/l),a*(l/u)];case 8:return[t-i,r-a,i,a];case 9:return[1-r,t-i,a,i];case 10:return[1-t,1-r,i,a];case 11:return[r-a,1-t,a,i];case 12:return[t-a*(l/u),r,a*(l/u),i*(u/l)];case 13:return[1-r-i*(u/l),t-a*(l/u),i*(u/l),a*(l/u)];case 14:return[1-t,1-r-i*(u/l),a*(l/u),i*(u/l)];case 15:return[r,1-t,i*(u/l),a*(l/u)];default:return[t,r,i,a]}},nn(Yt,"_currentDrawId",-1),nn(Yt,"_currentParent",null),ve(Yt,ys,null),ve(Yt,A0,null),ve(Yt,k0,null),ve(Yt,mm,NaN),ve(Yt,ym,null),ve(Yt,vm,null),ve(Yt,N0,NaN),nn(Yt,"_INNER_MARGIN",3);let jN=Yt;var vf,vs,bs,O0,Iw,zo,Bs,ec,R0,I0,F0,Fw,G3;class Qke{constructor(e,t,r,i,a,o){ve(this,Fw);ve(this,vf,new Float64Array(6));ve(this,vs);ve(this,bs);ve(this,O0);ve(this,Iw);ve(this,zo);ve(this,Bs,"");ve(this,ec,0);ve(this,R0,new wD);ve(this,I0);ve(this,F0);he(this,I0,r),he(this,F0,i),he(this,O0,a),he(this,Iw,o),[e,t]=be(this,Fw,G3).call(this,e,t);const s=he(this,vs,[NaN,NaN,NaN,NaN,e,t]);he(this,zo,[e,t]),he(this,bs,[{line:s,points:P(this,zo)}]),P(this,vf).set(s,0)}updateProperty(e,t){e==="stroke-width"&&he(this,Iw,t)}isEmpty(){return!P(this,bs)||P(this,bs).length===0}isCancellable(){return P(this,zo).length<=10}add(e,t){[e,t]=be(this,Fw,G3).call(this,e,t);const[r,i,a,o]=P(this,vf).subarray(2,6),s=e-a,u=t-o;return Math.hypot(P(this,I0)*s,P(this,F0)*u)<=2?null:(P(this,zo).push(e,t),isNaN(r)?(P(this,vf).set([a,o,e,t],2),P(this,vs).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(P(this,vf)[0])&&P(this,vs).splice(6,6),P(this,vf).set([r,i,a,o,e,t],0),P(this,vs).push(...Xt.createBezierPoints(r,i,a,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(P(this,zo).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,a){he(this,I0,r),he(this,F0,i),he(this,O0,a),[e,t]=be(this,Fw,G3).call(this,e,t);const o=he(this,vs,[NaN,NaN,NaN,NaN,e,t]);he(this,zo,[e,t]);const s=P(this,bs).at(-1);return s&&(s.line=new Float32Array(s.line),s.points=new Float32Array(s.points)),P(this,bs).push({line:o,points:P(this,zo)}),P(this,vf).set(o,0),he(this,ec,0),this.toSVGPath(),null}getLastElement(){return P(this,bs).at(-1)}setLastElement(e){return P(this,bs)?(P(this,bs).push(e),he(this,vs,e.line),he(this,zo,e.points),he(this,ec,0),{path:{d:this.toSVGPath()}}):P(this,R0).setLastElement(e)}removeLastElement(){if(!P(this,bs))return P(this,R0).removeLastElement();P(this,bs).pop(),he(this,Bs,"");for(let e=0,t=P(this,bs).length;e<t;e++){const{line:r,points:i}=P(this,bs)[e];he(this,vs,r),he(this,zo,i),he(this,ec,0),this.toSVGPath()}return{path:{d:P(this,Bs)}}}toSVGPath(){const e=Xt.svgRound(P(this,vs)[4]),t=Xt.svgRound(P(this,vs)[5]);if(P(this,zo).length===2)return he(this,Bs,`${P(this,Bs)} M ${e} ${t} Z`),P(this,Bs);if(P(this,zo).length<=6){const i=P(this,Bs).lastIndexOf("M");he(this,Bs,`${P(this,Bs).slice(0,i)} M ${e} ${t}`),he(this,ec,6)}if(P(this,zo).length===4){const i=Xt.svgRound(P(this,vs)[10]),a=Xt.svgRound(P(this,vs)[11]);return he(this,Bs,`${P(this,Bs)} L ${i} ${a}`),he(this,ec,12),P(this,Bs)}const r=[];P(this,ec)===0&&(r.push(`M ${e} ${t}`),he(this,ec,6));for(let i=P(this,ec),a=P(this,vs).length;i<a;i+=6){const[o,s,u,l,h,c]=P(this,vs).slice(i,i+6).map(Xt.svgRound);r.push(`C${o} ${s} ${u} ${l} ${h} ${c}`)}return he(this,Bs,P(this,Bs)+r.join(" ")),he(this,ec,P(this,vs).length),P(this,Bs)}getOutlines(e,t,r,i){const a=P(this,bs).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),P(this,R0).build(P(this,bs),e,t,r,P(this,O0),P(this,Iw),i),he(this,vf,null),he(this,vs,null),he(this,bs,null),he(this,Bs,null),P(this,R0)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}vf=new WeakMap,vs=new WeakMap,bs=new WeakMap,O0=new WeakMap,Iw=new WeakMap,zo=new WeakMap,Bs=new WeakMap,ec=new WeakMap,R0=new WeakMap,I0=new WeakMap,F0=new WeakMap,Fw=new WeakSet,G3=function(e,t){return Xt._normalizePoint(e,t,P(this,I0),P(this,F0),P(this,O0))};var Wo,XT,KT,rl,bf,wf,Pw,Lw,P0,$s,kd,gae,mae,yae;class wD extends Xt{constructor(){super(...arguments);ve(this,$s);ve(this,Wo);ve(this,XT,0);ve(this,KT);ve(this,rl);ve(this,bf);ve(this,wf);ve(this,Pw);ve(this,Lw);ve(this,P0)}build(t,r,i,a,o,s,u){he(this,bf,r),he(this,wf,i),he(this,Pw,a),he(this,Lw,o),he(this,P0,s),he(this,KT,u??0),he(this,rl,t),be(this,$s,mae).call(this)}get thickness(){return P(this,P0)}setLastElement(t){return P(this,rl).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return P(this,rl).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of P(this,rl)){if(t.push(`M${Xt.svgRound(r[4])} ${Xt.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${Xt.svgRound(r[10])} ${Xt.svgRound(r[11])}`);continue}for(let i=6,a=r.length;i<a;i+=6){const[o,s,u,l,h,c]=r.subarray(i,i+6).map(Xt.svgRound);t.push(`C${o} ${s} ${u} ${l} ${h} ${c}`)}}return t.join("")}serialize([t,r,i,a],o){const s=[],u=[],[l,h,c,f]=be(this,$s,gae).call(this);let d,p,m,g,y,v,b,w,x;switch(P(this,Lw)){case 0:x=Xt._rescale,d=t,p=r+a,m=i,g=-a,y=t+l*i,v=r+(1-h-f)*a,b=t+(l+c)*i,w=r+(1-h)*a;break;case 90:x=Xt._rescaleAndSwap,d=t,p=r,m=i,g=a,y=t+h*i,v=r+l*a,b=t+(h+f)*i,w=r+(l+c)*a;break;case 180:x=Xt._rescale,d=t+i,p=r,m=-i,g=a,y=t+(1-l-c)*i,v=r+h*a,b=t+(1-l)*i,w=r+(h+f)*a;break;case 270:x=Xt._rescaleAndSwap,d=t+i,p=r+a,m=-i,g=-a,y=t+(1-h-f)*i,v=r+(1-l-c)*a,b=t+(1-h)*i,w=r+(1-l)*a;break}for(const{line:S,points:E}of P(this,rl))s.push(x(S,d,p,m,g,o?new Array(S.length):null)),u.push(x(E,d,p,m,g,o?new Array(E.length):null));return{lines:s,points:u,rect:[y,v,b,w]}}static deserialize(t,r,i,a,o,{paths:{lines:s,points:u},rotation:l,thickness:h}){const c=[];let f,d,p,m,g;switch(l){case 0:g=Xt._rescale,f=-t/i,d=r/a+1,p=1/i,m=-1/a;break;case 90:g=Xt._rescaleAndSwap,f=-r/a,d=-t/i,p=1/a,m=1/i;break;case 180:g=Xt._rescale,f=t/i+1,d=-r/a,p=-1/i,m=1/a;break;case 270:g=Xt._rescaleAndSwap,f=r/a+1,d=t/i+1,p=-1/a,m=-1/i;break}if(!s){s=[];for(const v of u){const b=v.length;if(b===2){s.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(b===4){s.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const w=new Float32Array(3*(b-2));s.push(w);let[x,S,E,A]=v.subarray(0,4);w.set([NaN,NaN,NaN,NaN,x,S],0);for(let k=4;k<b;k+=2){const T=v[k],O=v[k+1];w.set(Xt.createBezierPoints(x,S,E,A,T,O),(k-2)*3),[x,S,E,A]=[E,A,T,O]}}}for(let v=0,b=s.length;v<b;v++)c.push({line:g(s[v].map(w=>w??NaN),f,d,p,m),points:g(u[v].map(w=>w??NaN),f,d,p,m)});const y=new this.prototype.constructor;return y.build(c,i,a,1,l,h,o),y}get box(){return P(this,Wo)}updateProperty(t,r){return t==="stroke-width"?be(this,$s,yae).call(this,r):null}updateParentDimensions([t,r],i){const[a,o]=be(this,$s,kd).call(this);he(this,bf,t),he(this,wf,r),he(this,Pw,i);const[s,u]=be(this,$s,kd).call(this),l=s-a,h=u-o,c=P(this,Wo);return c[0]-=l,c[1]-=h,c[2]+=2*l,c[3]+=2*h,c}updateRotation(t){return he(this,XT,t),{path:{transform:this.rotationTransform}}}get viewBox(){return P(this,Wo).map(Xt.svgRound).join(" ")}get defaultProperties(){const[t,r]=P(this,Wo);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=P(this,Wo);let i=0,a=0,o=0,s=0,u=0,l=0;switch(P(this,XT)){case 90:a=r/t,o=-t/r,u=t;break;case 180:i=-1,s=-1,u=t,l=r;break;case 270:a=-r/t,o=t/r,l=r;break;default:return""}return`matrix(${i} ${a} ${o} ${s} ${Xt.svgRound(u)} ${Xt.svgRound(l)})`}getPathResizingSVGProperties([t,r,i,a]){const[o,s]=be(this,$s,kd).call(this),[u,l,h,c]=P(this,Wo);if(Math.abs(h-o)<=Xt.PRECISION||Math.abs(c-s)<=Xt.PRECISION){const g=t+i/2-(u+h/2),y=r+a/2-(l+c/2);return{path:{"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(r)}`,transform:`${this.rotationTransform} translate(${g} ${y})`}}}const f=(i-2*o)/(h-2*o),d=(a-2*s)/(c-2*s),p=h/i,m=c/a;return{path:{"transform-origin":`${Xt.svgRound(u)} ${Xt.svgRound(l)}`,transform:`${this.rotationTransform} scale(${p} ${m}) translate(${Xt.svgRound(o)} ${Xt.svgRound(s)}) scale(${f} ${d}) translate(${Xt.svgRound(-o)} ${Xt.svgRound(-s)})`}}}getPathResizedSVGProperties([t,r,i,a]){const[o,s]=be(this,$s,kd).call(this),u=P(this,Wo),[l,h,c,f]=u;if(u[0]=t,u[1]=r,u[2]=i,u[3]=a,Math.abs(c-o)<=Xt.PRECISION||Math.abs(f-s)<=Xt.PRECISION){const y=t+i/2-(l+c/2),v=r+a/2-(h+f/2);for(const{line:b,points:w}of P(this,rl))Xt._translate(b,y,v,b),Xt._translate(w,y,v,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*o)/(c-2*o),p=(a-2*s)/(f-2*s),m=-d*(l+o)+t+o,g=-p*(h+s)+r+s;if(d!==1||p!==1||m!==0||g!==0)for(const{line:y,points:v}of P(this,rl))Xt._rescale(y,m,g,d,p,y),Xt._rescale(v,m,g,d,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],i){const[a,o]=i,s=P(this,Wo),u=t-s[0],l=r-s[1];if(P(this,bf)===a&&P(this,wf)===o)for(const{line:h,points:c}of P(this,rl))Xt._translate(h,u,l,h),Xt._translate(c,u,l,c);else{const h=P(this,bf)/a,c=P(this,wf)/o;he(this,bf,a),he(this,wf,o);for(const{line:f,points:d}of P(this,rl))Xt._rescale(f,u,l,h,c,f),Xt._rescale(d,u,l,h,c,d);s[2]*=h,s[3]*=c}return s[0]=t,s[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(r)}`}}}get defaultSVGProperties(){const t=P(this,Wo);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Xt.svgRound(t[0])} ${Xt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Wo=new WeakMap,XT=new WeakMap,KT=new WeakMap,rl=new WeakMap,bf=new WeakMap,wf=new WeakMap,Pw=new WeakMap,Lw=new WeakMap,P0=new WeakMap,$s=new WeakSet,kd=function(t=P(this,P0)){const r=P(this,KT)+t/2*P(this,Pw);return P(this,Lw)%180===0?[r/P(this,bf),r/P(this,wf)]:[r/P(this,wf),r/P(this,bf)]},gae=function(){const[t,r,i,a]=P(this,Wo),[o,s]=be(this,$s,kd).call(this,0);return[t+o,r+s,i-2*o,a-2*s]},mae=function(){const t=he(this,Wo,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of P(this,rl)){if(a.length<=12){for(let u=4,l=a.length;u<l;u+=6){const[h,c]=a.subarray(u,u+2);t[0]=Math.min(t[0],h),t[1]=Math.min(t[1],c),t[2]=Math.max(t[2],h),t[3]=Math.max(t[3],c)}continue}let o=a[4],s=a[5];for(let u=6,l=a.length;u<l;u+=6){const[h,c,f,d,p,m]=a.subarray(u,u+6);cn.bezierBoundingBox(o,s,h,c,f,d,p,m,t),o=p,s=m}}const[r,i]=be(this,$s,kd).call(this);t[0]=ul(t[0]-r,0,1),t[1]=ul(t[1]-i,0,1),t[2]=ul(t[2]+r,0,1),t[3]=ul(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},yae=function(t){const[r,i]=be(this,$s,kd).call(this);he(this,P0,t);const[a,o]=be(this,$s,kd).call(this),[s,u]=[a-r,o-i],l=P(this,Wo);return l[0]-=s,l[1]-=u,l[2]+=2*s,l[3]+=2*u,l};class gI extends dae{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:zi._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new gI(this._viewParameters);return e.updateAll(this),e}}var eR,vae;const v2=class v2 extends jN{constructor(t){super({...t,name:"inkEditor"});ve(this,eR);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){zi.initialize(t,r),this._defaultDrawingOptions=new gI(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Zn(this,"typesMap",new Map([[or.INK_THICKNESS,"stroke-width"],[or.INK_COLOR,"stroke"],[or.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,i,a,o){return new Qke(t,r,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,i,a,o,s){return wD.deserialize(t,r,i,a,o,s)}static async deserialize(t,r,i){let a=null;if(t instanceof w7){const{data:{inkLists:s,rect:u,rotation:l,id:h,color:c,opacity:f,borderStyle:{rawWidth:d},popupRef:p},parent:{page:{pageNumber:m}}}=t;a=t={annotationType:An.INK,color:Array.from(c),thickness:d,opacity:f,paths:{points:s},boxes:null,pageIndex:m-1,rect:u.slice(0),rotation:l,id:h,deleted:!1,popupRef:p}}const o=await super.deserialize(t,r,i);return o.annotationElementId=t.id||null,o._initialData=a,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:i}){this._drawingOptions=v2.getDefaultDrawingOptions({stroke:cn.makeHexColor(...t),"stroke-width":r,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":s,"stroke-width":u}}=this,l={annotationType:An.INK,color:zi._colorManager.convert(o),opacity:s,thickness:u,paths:{lines:r,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.isCopy=!0,l):this.annotationElementId&&!be(this,eR,vae).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){const{points:r,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r}),null}};eR=new WeakSet,vae=function(t){const{color:r,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((s,u)=>s!==r[u])||t.thickness!==i||t.opacity!==a||t.pageIndex!==o},nn(v2,"_type","ink"),nn(v2,"_editorType",An.INK),nn(v2,"_defaultDrawingOptions",null);let W8=v2;class j8 extends wD{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const xk=8,X_=3;var L0,Ur,$8,Zc,bae,wae,q8,X3,xae,_ae,Sae,V8,H8,Cae;class cp{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:i},a,o,s,u){let l=new OffscreenCanvas(1,1),h=l.getContext("2d",{alpha:!1});const c=200,f=h.font=`${r} ${i} ${c}px ${t}`,{actualBoundingBoxLeft:d,actualBoundingBoxRight:p,actualBoundingBoxAscent:m,actualBoundingBoxDescent:g,fontBoundingBoxAscent:y,fontBoundingBoxDescent:v,width:b}=h.measureText(e),w=1.5,x=Math.ceil(Math.max(Math.abs(d)+Math.abs(p)||0,b)*w),S=Math.ceil(Math.max(Math.abs(m)+Math.abs(g)||c,Math.abs(y)+Math.abs(v)||c)*w);l=new OffscreenCanvas(x,S),h=l.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,x,S),h.fillStyle="black",h.fillText(e,x*(w-1)/2,S*(3-w)/2);const E=be(this,Ur,V8).call(this,h.getImageData(0,0,x,S).data),A=be(this,Ur,Sae).call(this,E),k=be(this,Ur,H8).call(this,A),T=be(this,Ur,q8).call(this,E,x,S,k);return this.processDrawnLines({lines:{curves:T,width:x,height:S},pageWidth:a,pageHeight:o,rotation:s,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,r,i,a){const[o,s,u]=be(this,Ur,Cae).call(this,e),[l,h]=be(this,Ur,_ae).call(this,o,s,u,Math.hypot(s,u)*P(this,L0).sigmaSFactor,P(this,L0).sigmaR,P(this,L0).kernelSize),c=be(this,Ur,H8).call(this,h),f=be(this,Ur,q8).call(this,l,s,u,c);return this.processDrawnLines({lines:{curves:f,width:s,height:u},pageWidth:t,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:o,areContours:s}){i%180!==0&&([t,r]=[r,t]);const{curves:u,width:l,height:h}=e,c=e.thickness??0,f=[],d=Math.min(t/l,r/h),p=d/t,m=d/r,g=[];for(const{points:v}of u){const b=o?be(this,Ur,xae).call(this,v):v;if(!b)continue;g.push(b);const w=b.length,x=new Float32Array(w),S=new Float32Array(3*(w===2?2:w-2));if(f.push({line:S,points:x}),w===2){x[0]=b[0]*p,x[1]=b[1]*m,S.set([NaN,NaN,NaN,NaN,x[0],x[1]],0);continue}let[E,A,k,T]=b;E*=p,A*=m,k*=p,T*=m,x.set([E,A,k,T],0),S.set([NaN,NaN,NaN,NaN,E,A],0);for(let O=4;O<w;O+=2){const F=x[O]=b[O]*p,I=x[O+1]=b[O+1]*m;S.set(Xt.createBezierPoints(E,A,k,T,F,I),(O-2)*3),[E,A,k,T]=[k,T,F,I]}}if(f.length===0)return null;const y=s?new j8:new wD;return y.build(f,t,r,1,i,s?0:c,a),{outline:y,newCurves:g,areContours:s,thickness:c,width:l,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:i,height:a}){let o=1/0,s=-1/0,u=0;for(const b of e){u+=b.length;for(let w=2,x=b.length;w<x;w++){const S=b[w]-b[w-2];o=Math.min(o,S),s=Math.max(s,S)}}let l;o>=-128&&s<=127?l=Int8Array:o>=-32768&&s<=32767?l=Int16Array:l=Int32Array;const h=e.length,c=xk+X_*h,f=new Uint32Array(c);let d=0;f[d++]=c*Uint32Array.BYTES_PER_ELEMENT+(u-2*h)*l.BYTES_PER_ELEMENT,f[d++]=0,f[d++]=i,f[d++]=a,f[d++]=t?0:1,f[d++]=Math.max(0,Math.floor(r??0)),f[d++]=h,f[d++]=l.BYTES_PER_ELEMENT;for(const b of e)f[d++]=b.length-2,f[d++]=b[0],f[d++]=b[1];const p=new CompressionStream("deflate-raw"),m=p.writable.getWriter();await m.ready,m.write(f);const g=l.prototype.constructor;for(const b of e){const w=new g(b.length-2);for(let x=2,S=b.length;x<S;x++)w[x-2]=b[x]-b[x-2];m.write(w)}m.close();const y=await new Response(p.readable).arrayBuffer(),v=new Uint8Array(y);return Dre(v)}static async decompressSignature(e){try{const t=wAe(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,s=0;for await(const b of r)o||(o=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),o.set(b,s),s+=b.length;const u=new Uint32Array(o.buffer,0,o.length>>2),l=u[1];if(l!==0)throw new Error(`Invalid version: ${l}`);const h=u[2],c=u[3],f=u[4]===0,d=u[5],p=u[6],m=u[7],g=[],y=(xk+X_*p)*Uint32Array.BYTES_PER_ELEMENT;let v;switch(m){case Int8Array.BYTES_PER_ELEMENT:v=new Int8Array(o.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:v=new Int16Array(o.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:v=new Int32Array(o.buffer,y);break}s=0;for(let b=0;b<p;b++){const w=u[X_*b+xk],x=new Float32Array(w+2);g.push(x);for(let S=0;S<X_-1;S++)x[S]=u[X_*b+xk+S+1];for(let S=0;S<w;S++)x[S+2]=x[S]+v[s++]}return{areContours:f,thickness:d,outlines:g,width:h,height:c}}catch(t){return In(`decompressSignature: ${t}`),null}}}L0=new WeakMap,Ur=new WeakSet,$8=function(e,t,r,i){return r-=e,i-=t,r===0?i>0?0:4:r===1?i+6:2-i},Zc=new WeakMap,bae=function(e,t,r,i,a,o,s){const u=be(this,Ur,$8).call(this,r,i,a,o);for(let l=0;l<8;l++){const h=(-l+u-s+16)%8,c=P(this,Zc)[2*h],f=P(this,Zc)[2*h+1];if(e[(r+c)*t+(i+f)]!==0)return h}return-1},wae=function(e,t,r,i,a,o,s){const u=be(this,Ur,$8).call(this,r,i,a,o);for(let l=0;l<8;l++){const h=(l+u+s+16)%8,c=P(this,Zc)[2*h],f=P(this,Zc)[2*h+1];if(e[(r+c)*t+(i+f)]!==0)return h}return-1},q8=function(e,t,r,i){const a=e.length,o=new Int32Array(a);for(let h=0;h<a;h++)o[h]=e[h]<=i?1:0;for(let h=1;h<r-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*r-1-h]=0;let s=1,u;const l=[];for(let h=1;h<r-1;h++){u=1;for(let c=1;c<t-1;c++){const f=h*t+c,d=o[f];if(d===0)continue;let p=h,m=c;if(d===1&&o[f-1]===0)s+=1,m-=1;else if(d>=1&&o[f+1]===0)s+=1,m+=1,d>1&&(u=d);else{d!==1&&(u=Math.abs(d));continue}const g=[c,h],y=m===c+1,v={isHole:y,points:g,id:s,parent:0};l.push(v);let b;for(const O of l)if(O.id===u){b=O;break}b?b.isHole?v.parent=y?b.parent:u:v.parent=y?u:b.parent:v.parent=y?u:0;const w=be(this,Ur,bae).call(this,o,t,h,c,p,m,0);if(w===-1){o[f]=-s,o[f]!==1&&(u=Math.abs(o[f]));continue}let x=P(this,Zc)[2*w],S=P(this,Zc)[2*w+1];const E=h+x,A=c+S;p=E,m=A;let k=h,T=c;for(;;){const O=be(this,Ur,wae).call(this,o,t,k,T,p,m,1);x=P(this,Zc)[2*O],S=P(this,Zc)[2*O+1];const F=k+x,I=T+S;g.push(I,F);const R=k*t+T;if(o[R+1]===0?o[R]=-s:o[R]===1&&(o[R]=s),F===h&&I===c&&k===E&&T===A){o[f]!==1&&(u=Math.abs(o[f]));break}else p=k,m=T,k=F,T=I}}}return l},X3=function(e,t,r,i){if(r-t<=4){for(let E=t;E<r-2;E+=2)i.push(e[E],e[E+1]);return}const a=e[t],o=e[t+1],s=e[r-4]-a,u=e[r-3]-o,l=Math.hypot(s,u),h=s/l,c=u/l,f=h*o-c*a,d=u/s,p=1/l,m=Math.atan(d),g=Math.cos(m),y=Math.sin(m),v=p*(Math.abs(g)+Math.abs(y)),b=p*(1-v+v**2),w=Math.max(Math.atan(Math.abs(y+g)*b),Math.atan(Math.abs(y-g)*b));let x=0,S=t;for(let E=t+2;E<r-2;E+=2){const A=Math.abs(f-h*e[E+1]+c*e[E]);A>x&&(S=E,x=A)}x>(l*w)**2?(be(this,Ur,X3).call(this,e,t,S+2,i),be(this,Ur,X3).call(this,e,S,r,i)):i.push(a,o)},xae=function(e){const t=[],r=e.length;return be(this,Ur,X3).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},_ae=function(e,t,r,i,a,o){const s=new Float32Array(o**2),u=-2*i**2,l=o>>1;for(let m=0;m<o;m++){const g=(m-l)**2;for(let y=0;y<o;y++)s[m*o+y]=Math.exp((g+(y-l)**2)/u)}const h=new Float32Array(256),c=-2*a**2;for(let m=0;m<256;m++)h[m]=Math.exp(m**2/c);const f=e.length,d=new Uint8Array(f),p=new Uint32Array(256);for(let m=0;m<r;m++)for(let g=0;g<t;g++){const y=m*t+g,v=e[y];let b=0,w=0;for(let S=0;S<o;S++){const E=m+S-l;if(!(E<0||E>=r))for(let A=0;A<o;A++){const k=g+A-l;if(k<0||k>=t)continue;const T=e[E*t+k],O=s[S*o+A]*h[Math.abs(T-v)];b+=T*O,w+=O}}const x=d[y]=Math.round(b/w);p[x]++}return[d,p]},Sae=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},V8=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let s=0,u=r.length;s<u;s++){if(e[(s<<2)+3]===0){i=r[s]=255;continue}const h=r[s]=e[s<<2];h>i&&(i=h),h<a&&(a=h)}const o=255/(i-a);for(let s=0;s<t;s++)r[s]=(r[s]-a)*o;return r},H8=function(e){let t,r=-1/0,i=-1/0;const a=e.findIndex(u=>u!==0);let o=a,s=a;for(t=a;t<256;t++){const u=e[t];u>r&&(t-o>i&&(i=t-o,s=t-1),r=u,o=t)}for(t=s-1;t>=0&&!(e[t]>e[t+1]);t--);return t},Cae=function(e){const t=e,{width:r,height:i}=e,{maxDim:a}=P(this,L0);let o=r,s=i;if(r>a||i>a){let f=r,d=i,p=Math.log2(Math.max(r,i)/a);const m=Math.floor(p);p=p===m?m-1:m;for(let y=0;y<p;y++){o=f,s=d,o>a&&(o=Math.ceil(o/2)),s>a&&(s=Math.ceil(s/2));const v=new OffscreenCanvas(o,s);v.getContext("2d").drawImage(e,0,0,f,d,0,0,o,s),f=o,d=s,e!==t&&e.close(),e=v.transferToImageBitmap()}const g=Math.min(a/o,a/s);o=Math.round(o*g),s=Math.round(s*g)}const l=new OffscreenCanvas(o,s).getContext("2d",{willReadFrequently:!0});l.filter="grayscale(1)",l.drawImage(e,0,0,e.width,e.height,0,0,o,s);const h=l.getImageData(0,0,o,s).data;return[be(this,Ur,V8).call(this,h),o,s]},ve(cp,Ur),ve(cp,L0,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),ve(cp,Zc,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class x7 extends dae{constructor(){super(),super.updateProperties({fill:"CanvasText","stroke-width":0})}clone(){const e=new x7;return e.updateAll(this),e}}class _7 extends gI{constructor(e){super(e),super.updateProperties({stroke:"CanvasText","stroke-width":1})}clone(){const e=new _7(this._viewParameters);return e.updateAll(this),e}}var bm,il,wm,xm;const Hu=class Hu extends jN{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});ve(this,bm,!1);ve(this,il,null);ve(this,wm,null);ve(this,xm,null);this._willKeepAspectRatio=!0,he(this,wm,t.signatureData||null),he(this,il,null),this.defaultL10nId="pdfjs-editor-signature-editor"}static initialize(t,r){zi.initialize(t,r),this._defaultDrawingOptions=new x7,this._defaultDrawnSignatureOptions=new _7(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return Zn(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!P(this,il)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(P(this,wm)){const{lines:a,mustSmooth:o,areContours:s,description:u,uuid:l,heightInPage:h}=P(this,wm),{rawDims:{pageWidth:c,pageHeight:f},rotation:d}=this.parent.viewport,p=cp.processDrawnLines({lines:a,pageWidth:c,pageHeight:f,rotation:d,innerMargin:Hu._INNER_MARGIN,mustSmooth:o,areContours:s});this.addSignature(p,h,u,l)}else this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){he(this,xm,t),this.addEditToolbar()}getUuid(){return P(this,xm)}get description(){return P(this,il)}set description(t){he(this,il,t),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:i,width:a,height:o}=P(this,wm),s=Math.max(a,o),u=cp.processDrawnLines({lines:{curves:t.map(l=>({points:l})),thickness:i,width:a,height:o},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:u.outline}}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.signatureManager&&P(this,il)!==null&&(await t.addEditSignatureButton(this._uiManager.signatureManager,P(this,xm),P(this,il)),t.show()),t):null}addSignature(t,r,i,a){const{x:o,y:s}=this,{outline:u}=he(this,wm,t);he(this,bm,u instanceof j8),he(this,il,i),this.div.setAttribute("aria-description",i);let l;P(this,bm)?l=Hu.getDefaultDrawingOptions():(l=Hu._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:l});const[h,c]=this.parentDimensions,[,f]=this.pageDimensions;let d=r/f;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(h*this.width,c*this.height),this.x=o,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return cp.process(t,r,i,a,Hu._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:i,pageHeight:a},rotation:o}=this.parent.viewport;return cp.extractContoursFromText(t,r,i,a,o,Hu._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return cp.processDrawnLines({lines:t,pageWidth:r,pageHeight:i,rotation:a,innerMargin:Hu._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=Hu.getDefaultDrawingOptions():(this._drawingOptions=Hu._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,s={annotationType:An.SIGNATURE,isSignature:!0,areContours:P(this,bm),color:[0,0,0],thickness:P(this,bm)?0:o,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(s.paths={lines:r,points:i},s.uuid=P(this,xm),s.isCopy=!0):s.lines=r,P(this,il)&&(s.accessibilityData={type:"Figure",alt:P(this,il)}),s}static deserializeDraw(t,r,i,a,o,s){return s.areContours?j8.deserialize(t,r,i,a,o,s):wD.deserialize(t,r,i,a,o,s)}static async deserialize(t,r,i){var o;const a=await super.deserialize(t,r,i);return he(a,bm,t.areContours),he(a,il,((o=t.accessibilityData)==null?void 0:o.alt)||""),he(a,xm,t.uuid),a}};bm=new WeakMap,il=new WeakMap,wm=new WeakMap,xm=new WeakMap,nn(Hu,"_type","signature"),nn(Hu,"_editorType",An.SIGNATURE),nn(Hu,"_defaultDrawingOptions",null);let G8=Hu;var Li,ws,_m,ip,Sm,Mw,ap,M0,xf,al,Uw,vr,fC,dC,K3,Y3,Q3,K8,Z3,Eae;class X8 extends zi{constructor(t){super({...t,name:"stampEditor"});ve(this,vr);ve(this,Li,null);ve(this,ws,null);ve(this,_m,null);ve(this,ip,null);ve(this,Sm,null);ve(this,Mw,"");ve(this,ap,null);ve(this,M0,!1);ve(this,xf,null);ve(this,al,!1);ve(this,Uw,!1);he(this,ip,t.bitmapUrl),he(this,Sm,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){zi.initialize(t,r)}static isHandlingMimeForPasting(t){return W6.includes(t)}static paste(t,r){r.pasteEditor(An.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:s}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:o,height:s,channels:a.length/(o*s)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const l=u.output;return await this.setGuessedAltText(l),r&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}remove(){var t;P(this,ws)&&(he(this,Li,null),this._uiManager.imageManager.deleteId(P(this,ws)),(t=P(this,ap))==null||t.remove(),he(this,ap,null),P(this,xf)&&(clearTimeout(P(this,xf)),he(this,xf,null))),super.remove()}rebuild(){if(!this.parent){P(this,ws)&&be(this,vr,K3).call(this);return}super.rebuild(),this.div!==null&&(P(this,ws)&&P(this,ap)===null&&be(this,vr,K3).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(P(this,_m)||P(this,Li)||P(this,ip)||P(this,Sm)||P(this,ws)||P(this,M0))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),P(this,M0)||(P(this,Li)?be(this,vr,Y3).call(this):be(this,vr,K3).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(he(this,ws,i),a&&he(this,Li,a),he(this,M0,!1),be(this,vr,Y3).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;P(this,xf)!==null&&clearTimeout(P(this,xf)),he(this,xf,setTimeout(()=>{he(this,xf,null),be(this,vr,K8).call(this)},200))}copyCanvas(t,r,i=!1){var d;t||(t=224);const{width:a,height:o}=P(this,Li),s=new Dp;let u=P(this,Li),l=a,h=o,c=null;if(r){if(a>r||o>r){const A=Math.min(r/a,r/o);l=Math.floor(a*A),h=Math.floor(o*A)}c=document.createElement("canvas");const p=c.width=Math.ceil(l*s.sx),m=c.height=Math.ceil(h*s.sy);P(this,al)||(u=be(this,vr,Q3).call(this,p,m));const g=c.getContext("2d");g.filter=this._uiManager.hcmFilter;let y="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":(d=window.matchMedia)!=null&&d.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",v="#42414d");const b=15,w=b*s.sx,x=b*s.sy,S=new OffscreenCanvas(w*2,x*2),E=S.getContext("2d");E.fillStyle=y,E.fillRect(0,0,w*2,x*2),E.fillStyle=v,E.fillRect(0,0,w,x),E.fillRect(w,x,w,x),g.fillStyle=g.createPattern(S,"repeat"),g.fillRect(0,0,p,m),g.drawImage(u,0,0,u.width,u.height,0,0,p,m)}let f=null;if(i){let p,m;if(s.symmetric&&u.width<t&&u.height<t)p=u.width,m=u.height;else if(u=P(this,Li),a>t||o>t){const v=Math.min(t/a,t/o);p=Math.floor(a*v),m=Math.floor(o*v),P(this,al)||(u=be(this,vr,Q3).call(this,p,m))}const y=new OffscreenCanvas(p,m).getContext("2d",{willReadFrequently:!0});y.drawImage(u,0,0,u.width,u.height,0,0,p,m),f={width:p,height:m,data:y.getImageData(0,0,p,m).data}}return{canvas:c,width:l,height:h,imageData:f}}static async deserialize(t,r,i){var g;let a=null,o=!1;if(t instanceof zie){const{data:{rect:y,rotation:v,id:b,structParent:w,popupRef:x},container:S,parent:{page:{pageNumber:E}},canvas:A}=t;let k,T;A?(delete t.canvas,{id:k,bitmap:T}=i.imageManager.getFromCanvas(S.id,A),A.remove()):(o=!0,t._hasNoCanvas=!0);const O=((g=await r._structTree.getAriaAttributes(`${h7}${b}`))==null?void 0:g.get("aria-label"))||"";a=t={annotationType:An.STAMP,bitmapId:k,bitmap:T,pageIndex:E-1,rect:y.slice(0),rotation:v,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:O},isSvg:!1,structParent:w,popupRef:x}}const s=await super.deserialize(t,r,i),{rect:u,bitmap:l,bitmapUrl:h,bitmapId:c,isSvg:f,accessibilityData:d}=t;o?(i.addMissingCanvas(t.id,s),he(s,M0,!0)):c&&i.imageManager.isValidId(c)?(he(s,ws,c),l&&he(s,Li,l)):he(s,ip,h),he(s,al,f);const[p,m]=s.pageDimensions;return s.width=(u[2]-u[0])/p,s.height=(u[3]-u[1])/m,s.annotationElementId=t.id||null,d&&(s.altTextData=d),s._initialData=a,he(s,Uw,!!a),s}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:An.STAMP,bitmapId:P(this,ws),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:P(this,al),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=be(this,vr,Z3).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=be(this,vr,Eae).call(this,i);if(u.isSame)return null;u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,r===null)return i;r.stamps||(r.stamps=new Map);const s=P(this,al)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(P(this,ws)))r.stamps.set(P(this,ws),{area:s,serialized:i}),i.bitmap=be(this,vr,Z3).call(this,!1);else if(P(this,al)){const u=r.stamps.get(P(this,ws));s>u.area&&(u.area=s,u.serialized.bitmap.close(),u.serialized.bitmap=be(this,vr,Z3).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}Li=new WeakMap,ws=new WeakMap,_m=new WeakMap,ip=new WeakMap,Sm=new WeakMap,Mw=new WeakMap,ap=new WeakMap,M0=new WeakMap,xf=new WeakMap,al=new WeakMap,Uw=new WeakMap,vr=new WeakSet,fC=function(t,r=!1){if(!t){this.remove();return}he(this,Li,t.bitmap),r||(he(this,ws,t.id),he(this,al,t.isSvg)),t.file&&he(this,Mw,t.file.name),be(this,vr,Y3).call(this)},dC=function(){if(he(this,_m,null),this._uiManager.enableWaiting(!1),!!P(this,ap)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&P(this,Li)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&P(this,Li)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},K3=function(){if(P(this,ws)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(P(this,ws)).then(i=>be(this,vr,fC).call(this,i,!0)).finally(()=>be(this,vr,dC).call(this));return}if(P(this,ip)){const i=P(this,ip);he(this,ip,null),this._uiManager.enableWaiting(!0),he(this,_m,this._uiManager.imageManager.getFromUrl(i).then(a=>be(this,vr,fC).call(this,a)).finally(()=>be(this,vr,dC).call(this)));return}if(P(this,Sm)){const i=P(this,Sm);he(this,Sm,null),this._uiManager.enableWaiting(!0),he(this,_m,this._uiManager.imageManager.getFromFile(i).then(a=>be(this,vr,fC).call(this,a)).finally(()=>be(this,vr,dC).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=W6.join(",");const r=this._uiManager._signal;he(this,_m,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),be(this,vr,fC).call(this,a)}i()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>be(this,vr,dC).call(this))),t.click()},Y3=function(){var c;const{div:t}=this;let{width:r,height:i}=P(this,Li);const[a,o]=this.pageDimensions,s=.75;if(this.width)r=this.width*a,i=this.height*o;else if(r>s*a||i>s*o){const f=Math.min(s*a/r,s*o/i);r*=f,i*=f}const[u,l]=this.parentDimensions;this.setDims(r*u/a,i*l/o),this._uiManager.enableWaiting(!1);const h=he(this,ap,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=r/a,this.height=i/o,(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),be(this,vr,K8).call(this),P(this,Uw)||(this.parent.addUndoableEditor(this),he(this,Uw,!0)),this._reportTelemetry({action:"inserted_image"}),P(this,Mw)&&this.div.setAttribute("aria-description",P(this,Mw))},Q3=function(t,r){const{width:i,height:a}=P(this,Li);let o=i,s=a,u=P(this,Li);for(;o>2*t||s>2*r;){const l=o,h=s;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),s>2*r&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const c=new OffscreenCanvas(o,s);c.getContext("2d").drawImage(u,0,0,l,h,0,0,o,s),u=c.transferToImageBitmap()}return u},K8=function(){const[t,r]=this.parentDimensions,{width:i,height:a}=this,o=new Dp,s=Math.ceil(i*t*o.sx),u=Math.ceil(a*r*o.sy),l=P(this,ap);if(!l||l.width===s&&l.height===u)return;l.width=s,l.height=u;const h=P(this,al)?P(this,Li):be(this,vr,Q3).call(this,s,u),c=l.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(h,0,0,h.width,h.height,0,0,s,u)},Z3=function(t){if(t){if(P(this,al)){const a=this._uiManager.imageManager.getSvgUrl(P(this,ws));if(a)return a}const r=document.createElement("canvas");return{width:r.width,height:r.height}=P(this,Li),r.getContext("2d").drawImage(P(this,Li),0,0),r.toDataURL()}if(P(this,al)){const[r,i]=this.pageDimensions,a=Math.round(this.width*r*Vm.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Vm.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(a,o);return s.getContext("2d").drawImage(P(this,Li),0,0,P(this,Li).width,P(this,Li).height,0,0,a,o),s.transferToImageBitmap()}return structuredClone(P(this,Li))},Eae=function(t){var s;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===r,o=(((s=t.accessibilityData)==null?void 0:s.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}},nn(X8,"_type","stamp"),nn(X8,"_editorType",An.STAMP);var U0,Bw,_f,Cm,sp,tc,Em,zw,B0,Jc,op,uo,up,ln,Tm,Bi,Tae,af,Q8,Z8,J3;const Wc=class Wc{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:o,drawLayer:s,textLayer:u,viewport:l,l10n:h}){ve(this,Bi);ve(this,U0);ve(this,Bw,!1);ve(this,_f,null);ve(this,Cm,null);ve(this,sp,null);ve(this,tc,new Map);ve(this,Em,!1);ve(this,zw,!1);ve(this,B0,!1);ve(this,Jc,null);ve(this,op,null);ve(this,uo,null);ve(this,up,null);ve(this,ln);const c=[...P(Wc,Tm).values()];if(!Wc._initialized){Wc._initialized=!0;for(const f of c)f.initialize(h,e)}e.registerEditorTypes(c),he(this,ln,e),this.pageIndex=t,this.div=r,he(this,U0,a),he(this,_f,o),this.viewport=l,he(this,uo,u),this.drawLayer=s,this._structTree=i,P(this,ln).addLayer(this)}get isEmpty(){return P(this,tc).size===0}get isInvisible(){return this.isEmpty&&P(this,ln).getMode()===An.NONE}updateToolbar(e){P(this,ln).updateToolbar(e)}updateMode(e=P(this,ln).getMode()){switch(be(this,Bi,J3).call(this),e){case An.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case An.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case An.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of P(Wc,Tm).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=P(this,uo))==null?void 0:t.div)}setEditingState(e){P(this,ln).setEditingState(e)}addCommands(e){P(this,ln).addCommands(e)}cleanUndoStack(e){P(this,ln).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=P(this,_f))==null||t.div.classList.toggle("disabled",!e)}async enable(){he(this,B0,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of P(this,tc).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(P(this,ln).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!P(this,_f)){he(this,B0,!1);return}const t=P(this,_f).getEditableAnnotations();for(const r of t){if(r.hide(),P(this,ln).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}he(this,B0,!1)}disable(){var i;he(this,zw,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const a of P(this,tc).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else t.set(a.annotationElementId,a);(i=this.getEditableAnnotation(a.annotationElementId))==null||i.show(),a.remove()}if(P(this,_f)){const a=P(this,_f).getEditableAnnotations();for(const o of a){const{id:s}=o.data;if(P(this,ln).isDeletedAnnotationElement(s))continue;let u=t.get(s);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=e.get(s),u&&(P(this,ln).addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}be(this,Bi,J3).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const a of P(Wc,Tm).values())r.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),he(this,zw,!1)}getEditableAnnotation(e){var t;return((t=P(this,_f))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){P(this,ln).getActive()!==e&&P(this,ln).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=P(this,uo))!=null&&e.div&&!P(this,up)){he(this,up,new AbortController);const t=P(this,ln).combinedSignal(P(this,up));P(this,uo).div.addEventListener("pointerdown",be(this,Bi,Tae).bind(this),{signal:t}),P(this,uo).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=P(this,uo))!=null&&e.div&&P(this,up)&&(P(this,up).abort(),he(this,up,null),P(this,uo).div.classList.remove("highlighting"))}enableClick(){if(P(this,Cm))return;he(this,Cm,new AbortController);const e=P(this,ln).combinedSignal(P(this,Cm));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=P(this,Cm))==null||e.abort(),he(this,Cm,null)}attach(e){P(this,tc).set(e.id,e);const{annotationElementId:t}=e;t&&P(this,ln).isDeletedAnnotationElement(t)&&P(this,ln).removeDeletedAnnotationElement(e)}detach(e){var t;P(this,tc).delete(e.id),(t=P(this,U0))==null||t.removePointerInTextLayer(e.contentDiv),!P(this,zw)&&e.annotationElementId&&P(this,ln).addDeletedAnnotationElement(e)}remove(e){this.detach(e),P(this,ln).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(P(this,ln).addDeletedAnnotationElement(e.annotationElementId),zi.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),P(this,ln).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!P(this,B0)),P(this,ln).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!P(this,sp)&&(e._focusEventsAllowed=!1,he(this,sp,setTimeout(()=>{he(this,sp,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:P(this,ln)._signal}),t.focus())},0))),e._structTreeParentId=(r=P(this,U0))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return P(this,ln).getId()}combinedSignal(e){return P(this,ln).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=P(this,Bi,af))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){P(this,ln).updateToolbar(e),await P(this,ln).updateMode(e);const{offsetX:r,offsetY:i}=be(this,Bi,Z8).call(this),a=this.getNextId(),o=be(this,Bi,Q8).call(this,{parent:this,id:a,x:r,y:i,uiManager:P(this,ln),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=P(Wc,Tm).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,P(this,ln)))||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),a=be(this,Bi,Q8).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:P(this,ln),isCentered:t,...r});return a&&this.add(a),a}addNewEditor(e={}){this.createAndAddNewEditor(be(this,Bi,Z8).call(this),!0,e)}setSelected(e){P(this,ln).setSelected(e)}toggleSelected(e){P(this,ln).toggleSelected(e)}unselect(e){P(this,ln).unselect(e)}pointerup(e){var i;const{isMac:t}=Gs.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!P(this,Em)||(he(this,Em,!1),(i=P(this,Bi,af))!=null&&i.isDrawer&&P(this,Bi,af).supportMultipleDrawings))return;if(!P(this,Bw)){he(this,Bw,!0);return}const r=P(this,ln).getMode();if(r===An.STAMP||r===An.SIGNATURE){P(this,ln).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(P(this,ln).getMode()===An.HIGHLIGHT&&this.enableTextSelection(),P(this,Em)){he(this,Em,!1);return}const{isMac:t}=Gs.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(he(this,Em,!0),(i=P(this,Bi,af))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=P(this,ln).getActive();he(this,Bw,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),P(this,Jc)){P(this,Bi,af).startDrawing(this,P(this,ln),!1,e);return}P(this,ln).setCurrentDrawingSession(this),he(this,Jc,new AbortController);const t=P(this,ln).combinedSignal(P(this,Jc));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(he(this,op,null),this.commitOrRemove())},{signal:t}),P(this,Bi,af).startDrawing(this,P(this,ln),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&he(this,op,t);return}P(this,op)&&setTimeout(()=>{var t;(t=P(this,op))==null||t.focus(),he(this,op,null)},0)}endDrawingSession(e=!1){return P(this,Jc)?(P(this,ln).setCurrentDrawingSession(null),P(this,Jc).abort(),he(this,Jc,null),he(this,op,null),P(this,Bi,af).endDrawing(e)):null}findNewParent(e,t,r){const i=P(this,ln).findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return P(this,Jc)?(this.endDrawingSession(),!0):!1}onScaleChanging(){P(this,Jc)&&P(this,Bi,af).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=P(this,ln).getActive())==null?void 0:e.parent)===this&&(P(this,ln).commitOrRemove(),P(this,ln).setActiveEditor(null)),P(this,sp)&&(clearTimeout(P(this,sp)),he(this,sp,null));for(const r of P(this,tc).values())(t=P(this,U0))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,P(this,tc).clear(),P(this,ln).removeLayer(this)}render({viewport:e}){this.viewport=e,a1(this.div,e);for(const t of P(this,ln).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){P(this,ln).commitOrRemove(),be(this,Bi,J3).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,a1(this.div,{rotation:r}),t!==r)for(const i of P(this,tc).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return P(this,ln).viewParameters.realScale}};U0=new WeakMap,Bw=new WeakMap,_f=new WeakMap,Cm=new WeakMap,sp=new WeakMap,tc=new WeakMap,Em=new WeakMap,zw=new WeakMap,B0=new WeakMap,Jc=new WeakMap,op=new WeakMap,uo=new WeakMap,up=new WeakMap,ln=new WeakMap,Tm=new WeakMap,Bi=new WeakSet,Tae=function(e){P(this,ln).unselectAll();const{target:t}=e;if(t===P(this,uo).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&P(this,uo).div.contains(t)){const{isMac:r}=Gs.platform;if(e.button!==0||e.ctrlKey&&r)return;P(this,ln).showAllEditors("highlight",!0,!0),P(this,uo).div.classList.add("free"),this.toggleDrawing(),WN.startHighlighting(this,P(this,ln).direction==="ltr",{target:P(this,uo).div,x:e.x,y:e.y}),P(this,uo).div.addEventListener("pointerup",()=>{P(this,uo).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:P(this,ln)._signal}),e.preventDefault()}},af=function(){return P(Wc,Tm).get(P(this,ln).getMode())},Q8=function(e){const t=P(this,Bi,af);return t?new t.prototype.constructor(e):null},Z8=function(){const{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),o=Math.max(0,t),s=Math.min(window.innerWidth,e+r),u=Math.min(window.innerHeight,t+i),l=(a+s)/2-e,h=(o+u)/2-t,[c,f]=this.viewport.rotation%180===0?[l,h]:[h,l];return{offsetX:c,offsetY:f}},J3=function(){for(const e of P(this,tc).values())e.isEmpty()&&e.remove()},nn(Wc,"_initialized",!1),ve(Wc,Tm,new Map([A8,W8,X8,WN,G8].map(e=>[e._editorType,e])));let Y8=Wc;var eh,jo,z0,YT,tR,Dae,zf,eU,Aae,tU;const Ga=class Ga{constructor({pageIndex:e}){ve(this,zf);ve(this,eh,null);ve(this,jo,new Map);ve(this,z0,new Map);this.pageIndex=e}setParent(e){if(!P(this,eh)){he(this,eh,e);return}if(P(this,eh)!==e){if(P(this,jo).size>0)for(const t of P(this,jo).values())t.remove(),e.append(t);he(this,eh,e)}}static get _svgFactory(){return Zn(this,"_svgFactory",new UN)}draw(e,t=!1,r=!1){const i=Mo(Ga,YT)._++,a=be(this,zf,eU).call(this),o=Ga._svgFactory.createElement("defs");a.append(o);const s=Ga._svgFactory.createElement("path");o.append(s);const u=`path_p${this.pageIndex}_${i}`;s.setAttribute("id",u),s.setAttribute("vector-effect","non-scaling-stroke"),t&&P(this,z0).set(i,s);const l=r?be(this,zf,Aae).call(this,o,u):null,h=Ga._svgFactory.createElement("use");return a.append(h),h.setAttribute("href",`#${u}`),this.updateProperties(a,e),P(this,jo).set(i,a),{id:i,clipPathId:`url(#${l})`}}drawOutline(e,t){const r=Mo(Ga,YT)._++,i=be(this,zf,eU).call(this),a=Ga._svgFactory.createElement("defs");i.append(a);const o=Ga._svgFactory.createElement("path");a.append(o);const s=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",s),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const c=Ga._svgFactory.createElement("mask");a.append(c),u=`mask_p${this.pageIndex}_${r}`,c.setAttribute("id",u),c.setAttribute("maskUnits","objectBoundingBox");const f=Ga._svgFactory.createElement("rect");c.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const d=Ga._svgFactory.createElement("use");c.append(d),d.setAttribute("href",`#${s}`),d.setAttribute("stroke","none"),d.setAttribute("fill","black"),d.setAttribute("fill-rule","nonzero"),d.classList.add("mask")}const l=Ga._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${s}`),u&&l.setAttribute("mask",`url(#${u})`);const h=l.cloneNode();return i.append(h),l.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),P(this,jo).set(r,i),r}finalizeDraw(e,t){P(this,z0).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var u;if(!t)return;const{root:r,bbox:i,rootClass:a,path:o}=t,s=typeof e=="number"?P(this,jo).get(e):e;if(s){if(r&&be(this,zf,tU).call(this,s,r),i&&be(u=Ga,tR,Dae).call(u,s,i),a){const{classList:l}=s;for(const[h,c]of Object.entries(a))l.toggle(h,c)}if(o){const h=s.firstChild.firstChild;be(this,zf,tU).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const r=P(this,jo).get(e);r&&(P(t,eh).append(r),P(this,jo).delete(e),P(t,jo).set(e,r))}remove(e){P(this,z0).delete(e),P(this,eh)!==null&&(P(this,jo).get(e).remove(),P(this,jo).delete(e))}destroy(){he(this,eh,null);for(const e of P(this,jo).values())e.remove();P(this,jo).clear(),P(this,z0).clear()}};eh=new WeakMap,jo=new WeakMap,z0=new WeakMap,YT=new WeakMap,tR=new WeakSet,Dae=function(e,[t,r,i,a]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*a}%`},zf=new WeakSet,eU=function(){const e=Ga._svgFactory.create(1,1,!0);return P(this,eh).append(e),e.setAttribute("aria-hidden",!0),e},Aae=function(e,t){const r=Ga._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const a=Ga._svgFactory.createElement("use");return r.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i},tU=function(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)},ve(Ga,tR),ve(Ga,YT,0);let J8=Ga;globalThis.pdfjsTestingUtils={HighlightOutliner:N8};bn.AbortException;bn.AnnotationEditorLayer;bn.AnnotationEditorParamsType;bn.AnnotationEditorType;bn.AnnotationEditorUIManager;bn.AnnotationLayer;bn.AnnotationMode;bn.AnnotationType;bn.ColorPicker;bn.DOMSVGFactory;bn.DrawLayer;bn.FeatureTest;bn.GlobalWorkerOptions;bn.ImageKind;bn.InvalidPDFException;bn.MathClamp;bn.OPS;bn.OutputScale;bn.PDFDataRangeTransport;bn.PDFDateString;bn.PDFWorker;bn.PasswordResponses;bn.PermissionFlag;bn.PixelsPerInch;bn.RenderingCancelledException;bn.ResponseException;bn.SignatureExtractor;bn.SupportedImageMimeTypes;bn.TextLayer;bn.TouchManager;bn.Util;bn.VerbosityLevel;bn.XfaLayer;bn.build;bn.createValidAbsoluteUrl;bn.fetchData;var Zke=bn.getDocument;bn.getFilenameFromUrl;bn.getPdfFilenameFromUrl;bn.getUuid;bn.getXfaPageViewport;bn.isDataScheme;bn.isPdfFile;bn.isValidExplicitDest;bn.noContextMenu;bn.normalizeUnicode;bn.setLayerDimensions;bn.shadow;bn.stopEvent;bn.version;const Jke=async({file:n,onExtracted:e})=>{try{const t=n.type;if(t.includes("image")){const r=URL.createObjectURL(n);UEe.recognize(r,"heb+eng",{logger:i=>console.log(i)}).then(({data:{text:i}})=>{const a=i.split(`
`).filter(o=>o.trim()!=="");e(a)})}else if(t==="application/pdf"){const r=new FileReader;r.onload=async function(){const i=await Zke({data:new Uint8Array(r.result)}).promise;let a="";for(let s=1;s<=i.numPages;s++){const l=await(await i.getPage(s)).getTextContent();a+=l.items.map(h=>h.str).join(`
`)}const o=a.split(`
`).filter(s=>s.trim()!=="");e(o)},r.readAsArrayBuffer(n)}else if(t==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"){const r=new FileReader;r.onload=async function(){const{value:i}=await aAe.extractRawText({arrayBuffer:r.result}),a=i.split(`
`).filter(o=>o.trim()!=="");e(a)},r.readAsArrayBuffer(n)}else{const i=(await n.text()).split(`
`).filter(a=>a.trim()!=="");e(i)}}catch(t){console.error("Error extracting text:",t)}},e3e=({onFileUploaded:n})=>{const[e,t]=pe.useState(null),[r,i]=pe.useState(!1),a=async u=>{try{return(await hr.get("http://localhost:5077/api/upload/presigned-url",{params:{fileName:u}})).data}catch(l){throw console.error("Error getting presigned URL:",l),new Error("Failed to get presigned URL.")}},o=async(u,l)=>{try{console.log("uploadToS3"),console.log(l),console.log(u),await hr.put(l,u,{headers:{"Content-Type":u.type}}),alert("   -S3!")}catch(h){throw console.error("Error uploading file to S3:",h),new Error("Failed to upload file to S3.")}},s=async()=>{if(e){i(!0);try{const u=await a(e.name);console.log(u),console.log(e),await o(e,u),console.log("--------------before api/TextUpload/upload --------------- ");let l;const h=r1;if(h){if(l=Fte(h).userId,!l){console.log("userId is null");return}}else{alert("user is not registered");return}l&&await hr.post("http://localhost:5077/api/TextUpload/upload",{UserId:l,FileUrl:u,Name:e.name},{headers:{Authorization:`Bearer ${r1}`}}),console.log("after upload Text to local"),console.log("File successfully uploaded to S3."),Jke({file:e,onExtracted:n})}catch(u){console.error("Error uploading image:",u)}finally{i(!1)}}};return Ie.jsxs("div",{className:"flex flex-col items-center p-4",children:[Ie.jsx("input",{type:"file",onChange:u=>{var l;return t(((l=u.target.files)==null?void 0:l[0])||null)},className:"mb-4",accept:".png, .jpg, .jpeg, .pdf, .docx"}),Ie.jsx(Go,{onClick:s,disabled:r,variant:"contained",color:"primary",children:r?"...":" "})]})},t3e=TR(Ie.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),n3e=TR(Ie.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var hP,uX;function r3e(){if(uX)return hP;uX=1;function n(){this.__data__=[],this.size=0}return hP=n,hP}var fP,lX;function kae(){if(lX)return fP;lX=1;function n(e,t){return e===t||e!==e&&t!==t}return fP=n,fP}var dP,cX;function mI(){if(cX)return dP;cX=1;var n=kae();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return dP=e,dP}var pP,hX;function i3e(){if(hX)return pP;hX=1;var n=mI(),e=Array.prototype,t=e.splice;function r(i){var a=this.__data__,o=n(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():t.call(a,o,1),--this.size,!0}return pP=r,pP}var gP,fX;function a3e(){if(fX)return gP;fX=1;var n=mI();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return gP=e,gP}var mP,dX;function s3e(){if(dX)return mP;dX=1;var n=mI();function e(t){return n(this.__data__,t)>-1}return mP=e,mP}var yP,pX;function o3e(){if(pX)return yP;pX=1;var n=mI();function e(t,r){var i=this.__data__,a=n(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this}return yP=e,yP}var vP,gX;function yI(){if(gX)return vP;gX=1;var n=r3e(),e=i3e(),t=a3e(),r=s3e(),i=o3e();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,vP=a,vP}var bP,mX;function u3e(){if(mX)return bP;mX=1;var n=yI();function e(){this.__data__=new n,this.size=0}return bP=e,bP}var wP,yX;function l3e(){if(yX)return wP;yX=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return wP=n,wP}var xP,vX;function c3e(){if(vX)return xP;vX=1;function n(e){return this.__data__.get(e)}return xP=n,xP}var _P,bX;function h3e(){if(bX)return _P;bX=1;function n(e){return this.__data__.has(e)}return _P=n,_P}var SP,wX;function Nae(){if(wX)return SP;wX=1;var n=typeof Eu=="object"&&Eu&&Eu.Object===Object&&Eu;return SP=n,SP}var CP,xX;function Pp(){if(xX)return CP;xX=1;var n=Nae(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return CP=t,CP}var EP,_X;function S7(){if(_X)return EP;_X=1;var n=Pp(),e=n.Symbol;return EP=e,EP}var TP,SX;function f3e(){if(SX)return TP;SX=1;var n=S7(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function a(o){var s=t.call(o,i),u=o[i];try{o[i]=void 0;var l=!0}catch{}var h=r.call(o);return l&&(s?o[i]=u:delete o[i]),h}return TP=a,TP}var DP,CX;function d3e(){if(CX)return DP;CX=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return DP=t,DP}var AP,EX;function vI(){if(EX)return AP;EX=1;var n=S7(),e=f3e(),t=d3e(),r="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function o(s){return s==null?s===void 0?i:r:a&&a in Object(s)?e(s):t(s)}return AP=o,AP}var kP,TX;function Oae(){if(TX)return kP;TX=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return kP=n,kP}var NP,DX;function Rae(){if(DX)return NP;DX=1;var n=vI(),e=Oae(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var u=n(s);return u==r||u==i||u==t||u==a}return NP=o,NP}var OP,AX;function p3e(){if(AX)return OP;AX=1;var n=Pp(),e=n["__core-js_shared__"];return OP=e,OP}var RP,kX;function g3e(){if(kX)return RP;kX=1;var n=p3e(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return RP=t,RP}var IP,NX;function Iae(){if(NX)return IP;NX=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return IP=t,IP}var FP,OX;function m3e(){if(OX)return FP;OX=1;var n=Rae(),e=g3e(),t=Oae(),r=Iae(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,h=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(f){if(!t(f)||e(f))return!1;var d=n(f)?h:a;return d.test(r(f))}return FP=c,FP}var PP,RX;function y3e(){if(RX)return PP;RX=1;function n(e,t){return e==null?void 0:e[t]}return PP=n,PP}var LP,IX;function yx(){if(IX)return LP;IX=1;var n=m3e(),e=y3e();function t(r,i){var a=e(r,i);return n(a)?a:void 0}return LP=t,LP}var MP,FX;function C7(){if(FX)return MP;FX=1;var n=yx(),e=Pp(),t=n(e,"Map");return MP=t,MP}var UP,PX;function bI(){if(PX)return UP;PX=1;var n=yx(),e=n(Object,"create");return UP=e,UP}var BP,LX;function v3e(){if(LX)return BP;LX=1;var n=bI();function e(){this.__data__=n?n(null):{},this.size=0}return BP=e,BP}var zP,MX;function b3e(){if(MX)return zP;MX=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return zP=n,zP}var WP,UX;function w3e(){if(UX)return WP;UX=1;var n=bI(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(a){var o=this.__data__;if(n){var s=o[a];return s===e?void 0:s}return r.call(o,a)?o[a]:void 0}return WP=i,WP}var jP,BX;function x3e(){if(BX)return jP;BX=1;var n=bI(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var a=this.__data__;return n?a[i]!==void 0:t.call(a,i)}return jP=r,jP}var $P,zX;function _3e(){if(zX)return $P;zX=1;var n=bI(),e="__lodash_hash_undefined__";function t(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=n&&i===void 0?e:i,this}return $P=t,$P}var qP,WX;function S3e(){if(WX)return qP;WX=1;var n=v3e(),e=b3e(),t=w3e(),r=x3e(),i=_3e();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,qP=a,qP}var VP,jX;function C3e(){if(jX)return VP;jX=1;var n=S3e(),e=yI(),t=C7();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return VP=r,VP}var HP,$X;function E3e(){if($X)return HP;$X=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return HP=n,HP}var GP,qX;function wI(){if(qX)return GP;qX=1;var n=E3e();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return GP=e,GP}var XP,VX;function T3e(){if(VX)return XP;VX=1;var n=wI();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return XP=e,XP}var KP,HX;function D3e(){if(HX)return KP;HX=1;var n=wI();function e(t){return n(this,t).get(t)}return KP=e,KP}var YP,GX;function A3e(){if(GX)return YP;GX=1;var n=wI();function e(t){return n(this,t).has(t)}return YP=e,YP}var QP,XX;function k3e(){if(XX)return QP;XX=1;var n=wI();function e(t,r){var i=n(this,t),a=i.size;return i.set(t,r),this.size+=i.size==a?0:1,this}return QP=e,QP}var ZP,KX;function Fae(){if(KX)return ZP;KX=1;var n=C3e(),e=T3e(),t=D3e(),r=A3e(),i=k3e();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,ZP=a,ZP}var JP,YX;function N3e(){if(YX)return JP;YX=1;var n=yI(),e=C7(),t=Fae(),r=200;function i(a,o){var s=this.__data__;if(s instanceof n){var u=s.__data__;if(!e||u.length<r-1)return u.push([a,o]),this.size=++s.size,this;s=this.__data__=new t(u)}return s.set(a,o),this.size=s.size,this}return JP=i,JP}var eL,QX;function O3e(){if(QX)return eL;QX=1;var n=yI(),e=u3e(),t=l3e(),r=c3e(),i=h3e(),a=N3e();function o(s){var u=this.__data__=new n(s);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,eL=o,eL}var tL,ZX;function R3e(){if(ZX)return tL;ZX=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return tL=e,tL}var nL,JX;function I3e(){if(JX)return nL;JX=1;function n(e){return this.__data__.has(e)}return nL=n,nL}var rL,eK;function F3e(){if(eK)return rL;eK=1;var n=Fae(),e=R3e(),t=I3e();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new n;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,rL=r,rL}var iL,tK;function P3e(){if(tK)return iL;tK=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return iL=n,iL}var aL,nK;function L3e(){if(nK)return aL;nK=1;function n(e,t){return e.has(t)}return aL=n,aL}var sL,rK;function Pae(){if(rK)return sL;rK=1;var n=F3e(),e=P3e(),t=L3e(),r=1,i=2;function a(o,s,u,l,h,c){var f=u&r,d=o.length,p=s.length;if(d!=p&&!(f&&p>d))return!1;var m=c.get(o),g=c.get(s);if(m&&g)return m==s&&g==o;var y=-1,v=!0,b=u&i?new n:void 0;for(c.set(o,s),c.set(s,o);++y<d;){var w=o[y],x=s[y];if(l)var S=f?l(x,w,y,s,o,c):l(w,x,y,o,s,c);if(S!==void 0){if(S)continue;v=!1;break}if(b){if(!e(s,function(E,A){if(!t(b,A)&&(w===E||h(w,E,u,l,c)))return b.push(A)})){v=!1;break}}else if(!(w===x||h(w,x,u,l,c))){v=!1;break}}return c.delete(o),c.delete(s),v}return sL=a,sL}var oL,iK;function M3e(){if(iK)return oL;iK=1;var n=Pp(),e=n.Uint8Array;return oL=e,oL}var uL,aK;function U3e(){if(aK)return uL;aK=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,a){r[++t]=[a,i]}),r}return uL=n,uL}var lL,sK;function B3e(){if(sK)return lL;sK=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return lL=n,lL}var cL,oK;function z3e(){if(oK)return cL;oK=1;var n=S7(),e=M3e(),t=kae(),r=Pae(),i=U3e(),a=B3e(),o=1,s=2,u="[object Boolean]",l="[object Date]",h="[object Error]",c="[object Map]",f="[object Number]",d="[object RegExp]",p="[object Set]",m="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",b=n?n.prototype:void 0,w=b?b.valueOf:void 0;function x(S,E,A,k,T,O,F){switch(A){case v:if(S.byteLength!=E.byteLength||S.byteOffset!=E.byteOffset)return!1;S=S.buffer,E=E.buffer;case y:return!(S.byteLength!=E.byteLength||!O(new e(S),new e(E)));case u:case l:case f:return t(+S,+E);case h:return S.name==E.name&&S.message==E.message;case d:case m:return S==E+"";case c:var I=i;case p:var R=k&o;if(I||(I=a),S.size!=E.size&&!R)return!1;var U=F.get(S);if(U)return U==E;k|=s,F.set(S,E);var B=r(I(S),I(E),k,T,O,F);return F.delete(S),B;case g:if(w)return w.call(S)==w.call(E)}return!1}return cL=x,cL}var hL,uK;function W3e(){if(uK)return hL;uK=1;function n(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}return hL=n,hL}var fL,lK;function E7(){if(lK)return fL;lK=1;var n=Array.isArray;return fL=n,fL}var dL,cK;function j3e(){if(cK)return dL;cK=1;var n=W3e(),e=E7();function t(r,i,a){var o=i(r);return e(r)?o:n(o,a(r))}return dL=t,dL}var pL,hK;function $3e(){if(hK)return pL;hK=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var s=e[r];t(s,r,e)&&(o[a++]=s)}return o}return pL=n,pL}var gL,fK;function q3e(){if(fK)return gL;fK=1;function n(){return[]}return gL=n,gL}var mL,dK;function V3e(){if(dK)return mL;dK=1;var n=$3e(),e=q3e(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),n(i(o),function(s){return r.call(o,s)}))}:e;return mL=a,mL}var yL,pK;function H3e(){if(pK)return yL;pK=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return yL=n,yL}var vL,gK;function xI(){if(gK)return vL;gK=1;function n(e){return e!=null&&typeof e=="object"}return vL=n,vL}var bL,mK;function G3e(){if(mK)return bL;mK=1;var n=vI(),e=xI(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return bL=r,bL}var wL,yK;function X3e(){if(yK)return wL;yK=1;var n=G3e(),e=xI(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return wL=a,wL}var pC={exports:{}},xL,vK;function K3e(){if(vK)return xL;vK=1;function n(){return!1}return xL=n,xL}pC.exports;var bK;function Lae(){return bK||(bK=1,function(n,e){var t=Pp(),r=K3e(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,o=a&&a.exports===i,s=o?t.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||r;n.exports=l}(pC,pC.exports)),pC.exports}var _L,wK;function Y3e(){if(wK)return _L;wK=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var a=typeof r;return i=i??n,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return _L=t,_L}var SL,xK;function Mae(){if(xK)return SL;xK=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return SL=e,SL}var CL,_K;function Q3e(){if(_K)return CL;_K=1;var n=vI(),e=Mae(),t=xI(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",h="[object Number]",c="[object Object]",f="[object RegExp]",d="[object Set]",p="[object String]",m="[object WeakMap]",g="[object ArrayBuffer]",y="[object DataView]",v="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",S="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",k="[object Uint16Array]",T="[object Uint32Array]",O={};O[v]=O[b]=O[w]=O[x]=O[S]=O[E]=O[A]=O[k]=O[T]=!0,O[r]=O[i]=O[g]=O[a]=O[y]=O[o]=O[s]=O[u]=O[l]=O[h]=O[c]=O[f]=O[d]=O[p]=O[m]=!1;function F(I){return t(I)&&e(I.length)&&!!O[n(I)]}return CL=F,CL}var EL,SK;function Z3e(){if(SK)return EL;SK=1;function n(e){return function(t){return e(t)}}return EL=n,EL}var gC={exports:{}};gC.exports;var CK;function J3e(){return CK||(CK=1,function(n,e){var t=Nae(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===r,o=a&&t.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();n.exports=s}(gC,gC.exports)),gC.exports}var TL,EK;function Uae(){if(EK)return TL;EK=1;var n=Q3e(),e=Z3e(),t=J3e(),r=t&&t.isTypedArray,i=r?e(r):n;return TL=i,TL}var DL,TK;function eNe(){if(TK)return DL;TK=1;var n=H3e(),e=X3e(),t=E7(),r=Lae(),i=Y3e(),a=Uae(),o=Object.prototype,s=o.hasOwnProperty;function u(l,h){var c=t(l),f=!c&&e(l),d=!c&&!f&&r(l),p=!c&&!f&&!d&&a(l),m=c||f||d||p,g=m?n(l.length,String):[],y=g.length;for(var v in l)(h||s.call(l,v))&&!(m&&(v=="length"||d&&(v=="offset"||v=="parent")||p&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||i(v,y)))&&g.push(v);return g}return DL=u,DL}var AL,DK;function tNe(){if(DK)return AL;DK=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return AL=e,AL}var kL,AK;function nNe(){if(AK)return kL;AK=1;function n(e,t){return function(r){return e(t(r))}}return kL=n,kL}var NL,kK;function rNe(){if(kK)return NL;kK=1;var n=nNe(),e=n(Object.keys,Object);return NL=e,NL}var OL,NK;function iNe(){if(NK)return OL;NK=1;var n=tNe(),e=rNe(),t=Object.prototype,r=t.hasOwnProperty;function i(a){if(!n(a))return e(a);var o=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&o.push(s);return o}return OL=i,OL}var RL,OK;function aNe(){if(OK)return RL;OK=1;var n=Rae(),e=Mae();function t(r){return r!=null&&e(r.length)&&!n(r)}return RL=t,RL}var IL,RK;function sNe(){if(RK)return IL;RK=1;var n=eNe(),e=iNe(),t=aNe();function r(i){return t(i)?n(i):e(i)}return IL=r,IL}var FL,IK;function oNe(){if(IK)return FL;IK=1;var n=j3e(),e=V3e(),t=sNe();function r(i){return n(i,t,e)}return FL=r,FL}var PL,FK;function uNe(){if(FK)return PL;FK=1;var n=oNe(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(a,o,s,u,l,h){var c=s&e,f=n(a),d=f.length,p=n(o),m=p.length;if(d!=m&&!c)return!1;for(var g=d;g--;){var y=f[g];if(!(c?y in o:r.call(o,y)))return!1}var v=h.get(a),b=h.get(o);if(v&&b)return v==o&&b==a;var w=!0;h.set(a,o),h.set(o,a);for(var x=c;++g<d;){y=f[g];var S=a[y],E=o[y];if(u)var A=c?u(E,S,y,o,a,h):u(S,E,y,a,o,h);if(!(A===void 0?S===E||l(S,E,s,u,h):A)){w=!1;break}x||(x=y=="constructor")}if(w&&!x){var k=a.constructor,T=o.constructor;k!=T&&"constructor"in a&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof T=="function"&&T instanceof T)&&(w=!1)}return h.delete(a),h.delete(o),w}return PL=i,PL}var LL,PK;function lNe(){if(PK)return LL;PK=1;var n=yx(),e=Pp(),t=n(e,"DataView");return LL=t,LL}var ML,LK;function cNe(){if(LK)return ML;LK=1;var n=yx(),e=Pp(),t=n(e,"Promise");return ML=t,ML}var UL,MK;function hNe(){if(MK)return UL;MK=1;var n=yx(),e=Pp(),t=n(e,"Set");return UL=t,UL}var BL,UK;function fNe(){if(UK)return BL;UK=1;var n=yx(),e=Pp(),t=n(e,"WeakMap");return BL=t,BL}var zL,BK;function dNe(){if(BK)return zL;BK=1;var n=lNe(),e=C7(),t=cNe(),r=hNe(),i=fNe(),a=vI(),o=Iae(),s="[object Map]",u="[object Object]",l="[object Promise]",h="[object Set]",c="[object WeakMap]",f="[object DataView]",d=o(n),p=o(e),m=o(t),g=o(r),y=o(i),v=a;return(n&&v(new n(new ArrayBuffer(1)))!=f||e&&v(new e)!=s||t&&v(t.resolve())!=l||r&&v(new r)!=h||i&&v(new i)!=c)&&(v=function(b){var w=a(b),x=w==u?b.constructor:void 0,S=x?o(x):"";if(S)switch(S){case d:return f;case p:return s;case m:return l;case g:return h;case y:return c}return w}),zL=v,zL}var WL,zK;function pNe(){if(zK)return WL;zK=1;var n=O3e(),e=Pae(),t=z3e(),r=uNe(),i=dNe(),a=E7(),o=Lae(),s=Uae(),u=1,l="[object Arguments]",h="[object Array]",c="[object Object]",f=Object.prototype,d=f.hasOwnProperty;function p(m,g,y,v,b,w){var x=a(m),S=a(g),E=x?h:i(m),A=S?h:i(g);E=E==l?c:E,A=A==l?c:A;var k=E==c,T=A==c,O=E==A;if(O&&o(m)){if(!o(g))return!1;x=!0,k=!1}if(O&&!k)return w||(w=new n),x||s(m)?e(m,g,y,v,b,w):t(m,g,E,y,v,b,w);if(!(y&u)){var F=k&&d.call(m,"__wrapped__"),I=T&&d.call(g,"__wrapped__");if(F||I){var R=F?m.value():m,U=I?g.value():g;return w||(w=new n),b(R,U,y,v,w)}}return O?(w||(w=new n),r(m,g,y,v,b,w)):!1}return WL=p,WL}var jL,WK;function gNe(){if(WK)return jL;WK=1;var n=pNe(),e=xI();function t(r,i,a,o,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,a,o,t,s)}return jL=t,jL}var $L,jK;function mNe(){if(jK)return $L;jK=1;var n=gNe();function e(t,r){return n(t,r)}return $L=e,$L}var eN={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var yNe=eN.exports,$K;function vNe(){return $K||($K=1,function(n,e){(function(r,i){n.exports=i()})(typeof self<"u"?self:yNe,function(){return function(t){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=r,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=109)}([function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(17),o=i(18),s=i(19),u=i(45),l=i(46),h=i(47),c=i(48),f=i(49),d=i(12),p=i(32),m=i(33),g=i(31),y=i(1),v={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:a.default,Format:o.default,Leaf:s.default,Embed:c.default,Scroll:u.default,Block:h.default,Inline:l.default,Text:f.default,Attributor:{Attribute:d.default,Class:p.default,Style:m.default,Store:g.default}};r.default=v},function(t,r,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var b in v)v.hasOwnProperty(b)&&(y[b]=v[b])};return function(y,v){g(y,v);function b(){this.constructor=y}y.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(g){a(y,g);function y(v){var b=this;return v="[Parchment] "+v,b=g.call(this,v)||this,b.message=v,b.name=b.constructor.name,b}return y}(Error);r.ParchmentError=o;var s={},u={},l={},h={};r.DATA_KEY="__blot";var c;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(c=r.Scope||(r.Scope={}));function f(g,y){var v=p(g);if(v==null)throw new o("Unable to create "+g+" blot");var b=v,w=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:b.create(y);return new b(w,y)}r.create=f;function d(g,y){return y===void 0&&(y=!1),g==null?null:g[r.DATA_KEY]!=null?g[r.DATA_KEY].blot:y?d(g.parentNode,y):null}r.find=d;function p(g,y){y===void 0&&(y=c.ANY);var v;if(typeof g=="string")v=h[g]||s[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)v=h.text;else if(typeof g=="number")g&c.LEVEL&c.BLOCK?v=h.block:g&c.LEVEL&c.INLINE&&(v=h.inline);else if(g instanceof HTMLElement){var b=(g.getAttribute("class")||"").split(/\s+/);for(var w in b)if(v=u[b[w]],v)break;v=v||l[g.tagName]}return v==null?null:y&c.LEVEL&v.scope&&y&c.TYPE&v.scope?v:null}r.query=p;function m(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];if(g.length>1)return g.map(function(w){return m(w)});var v=g[0];if(typeof v.blotName!="string"&&typeof v.attrName!="string")throw new o("Invalid definition");if(v.blotName==="abstract")throw new o("Cannot register abstract class");if(h[v.blotName||v.attrName]=v,typeof v.keyName=="string")s[v.keyName]=v;else if(v.className!=null&&(u[v.className]=v),v.tagName!=null){Array.isArray(v.tagName)?v.tagName=v.tagName.map(function(w){return w.toUpperCase()}):v.tagName=v.tagName.toUpperCase();var b=Array.isArray(v.tagName)?v.tagName:[v.tagName];b.forEach(function(w){(l[w]==null||v.className==null)&&(l[w]=v)})}return v}r.register=m},function(t,r,i){var a=i(51),o=i(11),s=i(3),u=i(20),l="\0",h=function(c){Array.isArray(c)?this.ops=c:c!=null&&Array.isArray(c.ops)?this.ops=c.ops:this.ops=[]};h.prototype.insert=function(c,f){var d={};return c.length===0?this:(d.insert=c,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d))},h.prototype.delete=function(c){return c<=0?this:this.push({delete:c})},h.prototype.retain=function(c,f){if(c<=0)return this;var d={retain:c};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d)},h.prototype.push=function(c){var f=this.ops.length,d=this.ops[f-1];if(c=s(!0,{},c),typeof d=="object"){if(typeof c.delete=="number"&&typeof d.delete=="number")return this.ops[f-1]={delete:d.delete+c.delete},this;if(typeof d.delete=="number"&&c.insert!=null&&(f-=1,d=this.ops[f-1],typeof d!="object"))return this.ops.unshift(c),this;if(o(c.attributes,d.attributes)){if(typeof c.insert=="string"&&typeof d.insert=="string")return this.ops[f-1]={insert:d.insert+c.insert},typeof c.attributes=="object"&&(this.ops[f-1].attributes=c.attributes),this;if(typeof c.retain=="number"&&typeof d.retain=="number")return this.ops[f-1]={retain:d.retain+c.retain},typeof c.attributes=="object"&&(this.ops[f-1].attributes=c.attributes),this}}return f===this.ops.length?this.ops.push(c):this.ops.splice(f,0,c),this},h.prototype.chop=function(){var c=this.ops[this.ops.length-1];return c&&c.retain&&!c.attributes&&this.ops.pop(),this},h.prototype.filter=function(c){return this.ops.filter(c)},h.prototype.forEach=function(c){this.ops.forEach(c)},h.prototype.map=function(c){return this.ops.map(c)},h.prototype.partition=function(c){var f=[],d=[];return this.forEach(function(p){var m=c(p)?f:d;m.push(p)}),[f,d]},h.prototype.reduce=function(c,f){return this.ops.reduce(c,f)},h.prototype.changeLength=function(){return this.reduce(function(c,f){return f.insert?c+u.length(f):f.delete?c-f.delete:c},0)},h.prototype.length=function(){return this.reduce(function(c,f){return c+u.length(f)},0)},h.prototype.slice=function(c,f){c=c||0,typeof f!="number"&&(f=1/0);for(var d=[],p=u.iterator(this.ops),m=0;m<f&&p.hasNext();){var g;m<c?g=p.next(c-m):(g=p.next(f-m),d.push(g)),m+=u.length(g)}return new h(d)},h.prototype.compose=function(c){var f=u.iterator(this.ops),d=u.iterator(c.ops),p=[],m=d.peek();if(m!=null&&typeof m.retain=="number"&&m.attributes==null){for(var g=m.retain;f.peekType()==="insert"&&f.peekLength()<=g;)g-=f.peekLength(),p.push(f.next());m.retain-g>0&&d.next(m.retain-g)}for(var y=new h(p);f.hasNext()||d.hasNext();)if(d.peekType()==="insert")y.push(d.next());else if(f.peekType()==="delete")y.push(f.next());else{var v=Math.min(f.peekLength(),d.peekLength()),b=f.next(v),w=d.next(v);if(typeof w.retain=="number"){var x={};typeof b.retain=="number"?x.retain=v:x.insert=b.insert;var S=u.attributes.compose(b.attributes,w.attributes,typeof b.retain=="number");if(S&&(x.attributes=S),y.push(x),!d.hasNext()&&o(y.ops[y.ops.length-1],x)){var E=new h(f.rest());return y.concat(E).chop()}}else typeof w.delete=="number"&&typeof b.retain=="number"&&y.push(w)}return y.chop()},h.prototype.concat=function(c){var f=new h(this.ops.slice());return c.ops.length>0&&(f.push(c.ops[0]),f.ops=f.ops.concat(c.ops.slice(1))),f},h.prototype.diff=function(c,f){if(this.ops===c.ops)return new h;var d=[this,c].map(function(v){return v.map(function(b){if(b.insert!=null)return typeof b.insert=="string"?b.insert:l;var w=v===c?"on":"with";throw new Error("diff() called "+w+" non-document")}).join("")}),p=new h,m=a(d[0],d[1],f),g=u.iterator(this.ops),y=u.iterator(c.ops);return m.forEach(function(v){for(var b=v[1].length;b>0;){var w=0;switch(v[0]){case a.INSERT:w=Math.min(y.peekLength(),b),p.push(y.next(w));break;case a.DELETE:w=Math.min(b,g.peekLength()),g.next(w),p.delete(w);break;case a.EQUAL:w=Math.min(g.peekLength(),y.peekLength(),b);var x=g.next(w),S=y.next(w);o(x.insert,S.insert)?p.retain(w,u.attributes.diff(x.attributes,S.attributes)):p.push(S).delete(w);break}b-=w}}),p.chop()},h.prototype.eachLine=function(c,f){f=f||`
`;for(var d=u.iterator(this.ops),p=new h,m=0;d.hasNext();){if(d.peekType()!=="insert")return;var g=d.peek(),y=u.length(g)-d.peekLength(),v=typeof g.insert=="string"?g.insert.indexOf(f,y)-y:-1;if(v<0)p.push(d.next());else if(v>0)p.push(d.next(v));else{if(c(p,d.next(1).attributes||{},m)===!1)return;m+=1,p=new h}}p.length()>0&&c(p,{},m)},h.prototype.transform=function(c,f){if(f=!!f,typeof c=="number")return this.transformPosition(c,f);for(var d=u.iterator(this.ops),p=u.iterator(c.ops),m=new h;d.hasNext()||p.hasNext();)if(d.peekType()==="insert"&&(f||p.peekType()!=="insert"))m.retain(u.length(d.next()));else if(p.peekType()==="insert")m.push(p.next());else{var g=Math.min(d.peekLength(),p.peekLength()),y=d.next(g),v=p.next(g);if(y.delete)continue;v.delete?m.push(v):m.retain(g,u.attributes.transform(y.attributes,v.attributes,f))}return m.chop()},h.prototype.transformPosition=function(c,f){f=!!f;for(var d=u.iterator(this.ops),p=0;d.hasNext()&&p<=c;){var m=d.peekLength(),g=d.peekType();if(d.next(),g==="delete"){c-=Math.min(m,c-p);continue}else g==="insert"&&(p<c||!f)&&(c+=m);p+=m}return c},t.exports=h},function(t,r){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=function(d){return typeof Array.isArray=="function"?Array.isArray(d):a.call(d)==="[object Array]"},l=function(d){if(!d||a.call(d)!=="[object Object]")return!1;var p=i.call(d,"constructor"),m=d.constructor&&d.constructor.prototype&&i.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!m)return!1;var g;for(g in d);return typeof g>"u"||i.call(d,g)},h=function(d,p){o&&p.name==="__proto__"?o(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},c=function(d,p){if(p==="__proto__")if(i.call(d,p)){if(s)return s(d,p).value}else return;return d[p]};t.exports=function f(){var d,p,m,g,y,v,b=arguments[0],w=1,x=arguments.length,S=!1;for(typeof b=="boolean"&&(S=b,b=arguments[1]||{},w=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});w<x;++w)if(d=arguments[w],d!=null)for(p in d)m=c(b,p),g=c(d,p),b!==g&&(S&&g&&(l(g)||(y=u(g)))?(y?(y=!1,v=m&&u(m)?m:[]):v=m&&l(m)?m:{},h(b,{name:p,newValue:f(S,v,g)})):typeof g<"u"&&h(b,{name:p,newValue:g}));return b}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var a=function(){function O(F,I){for(var R=0;R<I.length;R++){var U=I[R];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(F,U.key,U)}}return function(F,I,R){return I&&O(F.prototype,I),R&&O(F,R),F}}(),o=function O(F,I,R){F===null&&(F=Function.prototype);var U=Object.getOwnPropertyDescriptor(F,I);if(U===void 0){var B=Object.getPrototypeOf(F);return B===null?void 0:O(B,I,R)}else{if("value"in U)return U.value;var W=U.get;return W===void 0?void 0:W.call(R)}},s=i(3),u=b(s),l=i(2),h=b(l),c=i(0),f=b(c),d=i(16),p=b(d),m=i(6),g=b(m),y=i(7),v=b(y);function b(O){return O&&O.__esModule?O:{default:O}}function w(O,F){if(!(O instanceof F))throw new TypeError("Cannot call a class as a function")}function x(O,F){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:O}function S(O,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);O.prototype=Object.create(F&&F.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(O,F):O.__proto__=F)}var E=1,A=function(O){S(F,O);function F(){return w(this,F),x(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return a(F,[{key:"attach",value:function(){o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new h.default().insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(R,U){var B=f.default.query(R,f.default.Scope.BLOCK_ATTRIBUTE);B!=null&&this.attributes.attribute(B,U)}},{key:"formatAt",value:function(R,U,B,W){this.format(B,W)}},{key:"insertAt",value:function(R,U,B){if(typeof U=="string"&&U.endsWith(`
`)){var W=f.default.create(k.blotName);this.parent.insertBefore(W,R===0?this:this.next),W.insertAt(0,U.slice(0,-1))}else o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertAt",this).call(this,R,U,B)}}]),F}(f.default.Embed);A.scope=f.default.Scope.BLOCK_BLOT;var k=function(O){S(F,O);function F(I){w(this,F);var R=x(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,I));return R.cache={},R}return a(F,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(R,U){return U.length()===0?R:R.insert(U.value(),T(U))},new h.default).insert(`
`,T(this))),this.cache.delta}},{key:"deleteAt",value:function(R,U){o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"deleteAt",this).call(this,R,U),this.cache={}}},{key:"formatAt",value:function(R,U,B,W){U<=0||(f.default.query(B,f.default.Scope.BLOCK)?R+U===this.length()&&this.format(B,W):o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"formatAt",this).call(this,R,Math.min(U,this.length()-R-1),B,W),this.cache={})}},{key:"insertAt",value:function(R,U,B){if(B!=null)return o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertAt",this).call(this,R,U,B);if(U.length!==0){var W=U.split(`
`),Y=W.shift();Y.length>0&&(R<this.length()-1||this.children.tail==null?o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertAt",this).call(this,Math.min(R,this.length()-1),Y):this.children.tail.insertAt(this.children.tail.length(),Y),this.cache={});var z=this;W.reduce(function(j,M){return z=z.split(j,!0),z.insertAt(0,M),M.length},R+Y.length)}}},{key:"insertBefore",value:function(R,U){var B=this.children.head;o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertBefore",this).call(this,R,U),B instanceof p.default&&B.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"length",this).call(this)+E),this.cache.length}},{key:"moveChildren",value:function(R,U){o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"moveChildren",this).call(this,R,U),this.cache={}}},{key:"optimize",value:function(R){o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"optimize",this).call(this,R),this.cache={}}},{key:"path",value:function(R){return o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"path",this).call(this,R,!0)}},{key:"removeChild",value:function(R){o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"removeChild",this).call(this,R),this.cache={}}},{key:"split",value:function(R){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(U&&(R===0||R>=this.length()-E)){var B=this.clone();return R===0?(this.parent.insertBefore(B,this),this):(this.parent.insertBefore(B,this.next),B)}else{var W=o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"split",this).call(this,R,U);return this.cache={},W}}}]),F}(f.default.Block);k.blotName="block",k.tagName="P",k.defaultChild="break",k.allowedChildren=[g.default,f.default.Embed,v.default];function T(O){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return O==null||(typeof O.formats=="function"&&(F=(0,u.default)(F,O.formats())),O.parent==null||O.parent.blotName=="scroll"||O.parent.statics.scope!==O.statics.scope)?F:T(O.parent,F)}r.bubbleFormats=T,r.BlockEmbed=A,r.default=k},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},o=function(){function z(j,M){var q=[],H=!0,K=!1,Z=void 0;try{for(var J=j[Symbol.iterator](),X;!(H=(X=J.next()).done)&&(q.push(X.value),!(M&&q.length===M));H=!0);}catch(ae){K=!0,Z=ae}finally{try{!H&&J.return&&J.return()}finally{if(K)throw Z}}return q}return function(j,M){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return z(j,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function z(j,M){for(var q=0;q<M.length;q++){var H=M[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,M,q){return M&&z(j.prototype,M),q&&z(j,q),j}}();i(50);var u=i(2),l=T(u),h=i(14),c=T(h),f=i(8),d=T(f),p=i(9),m=T(p),g=i(0),y=T(g),v=i(15),b=T(v),w=i(3),x=T(w),S=i(10),E=T(S),A=i(34),k=T(A);function T(z){return z&&z.__esModule?z:{default:z}}function O(z,j,M){return j in z?Object.defineProperty(z,j,{value:M,enumerable:!0,configurable:!0,writable:!0}):z[j]=M,z}function F(z,j){if(!(z instanceof j))throw new TypeError("Cannot call a class as a function")}var I=(0,E.default)("quill"),R=function(){s(z,null,[{key:"debug",value:function(M){M===!0&&(M="log"),E.default.level(M)}},{key:"find",value:function(M){return M.__quill||y.default.find(M)}},{key:"import",value:function(M){return this.imports[M]==null&&I.error("Cannot import "+M+". Are you sure it was registered?"),this.imports[M]}},{key:"register",value:function(M,q){var H=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof M!="string"){var Z=M.attrName||M.blotName;typeof Z=="string"?this.register("formats/"+Z,M,q):Object.keys(M).forEach(function(J){H.register(J,M[J],q)})}else this.imports[M]!=null&&!K&&I.warn("Overwriting "+M+" with",q),this.imports[M]=q,(M.startsWith("blots/")||M.startsWith("formats/"))&&q.blotName!=="abstract"?y.default.register(q):M.startsWith("modules")&&typeof q.register=="function"&&q.register()}}]);function z(j){var M=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(F(this,z),this.options=U(j,q),this.container=this.options.container,this.container==null)return I.error("Invalid Quill container",j);this.options.debug&&z.debug(this.options.debug);var H=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.default,this.scroll=y.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new c.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(d.default.events.EDITOR_CHANGE,function(Z){Z===d.default.events.TEXT_CHANGE&&M.root.classList.toggle("ql-blank",M.editor.isBlank())}),this.emitter.on(d.default.events.SCROLL_UPDATE,function(Z,J){var X=M.selection.lastRange,ae=X&&X.length===0?X.index:void 0;B.call(M,function(){return M.editor.update(null,J,ae)},Z)});var K=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+H+"<p><br></p></div>");this.setContents(K),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return s(z,[{key:"addContainer",value:function(M){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof M=="string"){var H=M;M=document.createElement("div"),M.classList.add(H)}return this.container.insertBefore(M,q),M}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(M,q,H){var K=this,Z=W(M,q,H),J=o(Z,4);return M=J[0],q=J[1],H=J[3],B.call(this,function(){return K.editor.deleteText(M,q)},H,M,-1*q)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(M),this.container.classList.toggle("ql-disabled",!M)}},{key:"focus",value:function(){var M=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=M,this.scrollIntoView()}},{key:"format",value:function(M,q){var H=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;return B.call(this,function(){var Z=H.getSelection(!0),J=new l.default;if(Z==null)return J;if(y.default.query(M,y.default.Scope.BLOCK))J=H.editor.formatLine(Z.index,Z.length,O({},M,q));else{if(Z.length===0)return H.selection.format(M,q),J;J=H.editor.formatText(Z.index,Z.length,O({},M,q))}return H.setSelection(Z,d.default.sources.SILENT),J},K)}},{key:"formatLine",value:function(M,q,H,K,Z){var J=this,X=void 0,ae=W(M,q,H,K,Z),ie=o(ae,4);return M=ie[0],q=ie[1],X=ie[2],Z=ie[3],B.call(this,function(){return J.editor.formatLine(M,q,X)},Z,M,0)}},{key:"formatText",value:function(M,q,H,K,Z){var J=this,X=void 0,ae=W(M,q,H,K,Z),ie=o(ae,4);return M=ie[0],q=ie[1],X=ie[2],Z=ie[3],B.call(this,function(){return J.editor.formatText(M,q,X)},Z,M,0)}},{key:"getBounds",value:function(M){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=void 0;typeof M=="number"?H=this.selection.getBounds(M,q):H=this.selection.getBounds(M.index,M.length);var K=this.container.getBoundingClientRect();return{bottom:H.bottom-K.top,height:H.height,left:H.left-K.left,right:H.right-K.left,top:H.top-K.top,width:H.width}}},{key:"getContents",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,H=W(M,q),K=o(H,2);return M=K[0],q=K[1],this.editor.getContents(M,q)}},{key:"getFormat",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof M=="number"?this.editor.getFormat(M,q):this.editor.getFormat(M.index,M.length)}},{key:"getIndex",value:function(M){return M.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(M){return this.scroll.leaf(M)}},{key:"getLine",value:function(M){return this.scroll.line(M)}},{key:"getLines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof M!="number"?this.scroll.lines(M.index,M.length):this.scroll.lines(M,q)}},{key:"getModule",value:function(M){return this.theme.modules[M]}},{key:"getSelection",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return M&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,H=W(M,q),K=o(H,2);return M=K[0],q=K[1],this.editor.getText(M,q)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(M,q,H){var K=this,Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:z.sources.API;return B.call(this,function(){return K.editor.insertEmbed(M,q,H)},Z,M)}},{key:"insertText",value:function(M,q,H,K,Z){var J=this,X=void 0,ae=W(M,0,H,K,Z),ie=o(ae,4);return M=ie[0],X=ie[2],Z=ie[3],B.call(this,function(){return J.editor.insertText(M,q,X)},Z,M,q.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(M,q,H){this.clipboard.dangerouslyPasteHTML(M,q,H)}},{key:"removeFormat",value:function(M,q,H){var K=this,Z=W(M,q,H),J=o(Z,4);return M=J[0],q=J[1],H=J[3],B.call(this,function(){return K.editor.removeFormat(M,q)},H,M)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(M){var q=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return B.call(this,function(){M=new l.default(M);var K=q.getLength(),Z=q.editor.deleteText(0,K),J=q.editor.applyDelta(M),X=J.ops[J.ops.length-1];X!=null&&typeof X.insert=="string"&&X.insert[X.insert.length-1]===`
`&&(q.editor.deleteText(q.getLength()-1,1),J.delete(1));var ae=Z.compose(J);return ae},H)}},{key:"setSelection",value:function(M,q,H){if(M==null)this.selection.setRange(null,q||z.sources.API);else{var K=W(M,q,H),Z=o(K,4);M=Z[0],q=Z[1],H=Z[3],this.selection.setRange(new v.Range(M,q),H),H!==d.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(M){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API,H=new l.default().insert(M);return this.setContents(H,q)}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,q=this.scroll.update(M);return this.selection.update(M),q}},{key:"updateContents",value:function(M){var q=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return B.call(this,function(){return M=new l.default(M),q.editor.applyDelta(M,H)},H,!0)}}]),z}();R.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},R.events=d.default.events,R.sources=d.default.sources,R.version="1.3.7",R.imports={delta:l.default,parchment:y.default,"core/module":m.default,"core/theme":k.default};function U(z,j){if(j=(0,x.default)(!0,{container:z,modules:{clipboard:!0,keyboard:!0,history:!0}},j),!j.theme||j.theme===R.DEFAULTS.theme)j.theme=k.default;else if(j.theme=R.import("themes/"+j.theme),j.theme==null)throw new Error("Invalid theme "+j.theme+". Did you register it?");var M=(0,x.default)(!0,{},j.theme.DEFAULTS);[M,j].forEach(function(K){K.modules=K.modules||{},Object.keys(K.modules).forEach(function(Z){K.modules[Z]===!0&&(K.modules[Z]={})})});var q=Object.keys(M.modules).concat(Object.keys(j.modules)),H=q.reduce(function(K,Z){var J=R.import("modules/"+Z);return J==null?I.error("Cannot load "+Z+" module. Are you sure you registered it?"):K[Z]=J.DEFAULTS||{},K},{});return j.modules!=null&&j.modules.toolbar&&j.modules.toolbar.constructor!==Object&&(j.modules.toolbar={container:j.modules.toolbar}),j=(0,x.default)(!0,{},R.DEFAULTS,{modules:H},M,j),["bounds","container","scrollingContainer"].forEach(function(K){typeof j[K]=="string"&&(j[K]=document.querySelector(j[K]))}),j.modules=Object.keys(j.modules).reduce(function(K,Z){return j.modules[Z]&&(K[Z]=j.modules[Z]),K},{}),j}function B(z,j,M,q){if(this.options.strict&&!this.isEnabled()&&j===d.default.sources.USER)return new l.default;var H=M==null?null:this.getSelection(),K=this.editor.delta,Z=z();if(H!=null&&(M===!0&&(M=H.index),q==null?H=Y(H,Z,j):q!==0&&(H=Y(H,M,q,j)),this.setSelection(H,d.default.sources.SILENT)),Z.length()>0){var J,X=[d.default.events.TEXT_CHANGE,Z,K,j];if((J=this.emitter).emit.apply(J,[d.default.events.EDITOR_CHANGE].concat(X)),j!==d.default.sources.SILENT){var ae;(ae=this.emitter).emit.apply(ae,X)}}return Z}function W(z,j,M,q,H){var K={};return typeof z.index=="number"&&typeof z.length=="number"?typeof j!="number"?(H=q,q=M,M=j,j=z.length,z=z.index):(j=z.length,z=z.index):typeof j!="number"&&(H=q,q=M,M=j,j=0),(typeof M>"u"?"undefined":a(M))==="object"?(K=M,H=q):typeof M=="string"&&(q!=null?K[M]=q:H=M),H=H||d.default.sources.API,[z,j,K,H]}function Y(z,j,M,q){if(z==null)return null;var H=void 0,K=void 0;if(j instanceof l.default){var Z=[z.index,z.index+z.length].map(function(ie){return j.transformPosition(ie,q!==d.default.sources.USER)}),J=o(Z,2);H=J[0],K=J[1]}else{var X=[z.index,z.index+z.length].map(function(ie){return ie<j||ie===j&&q===d.default.sources.USER?ie:M>=0?ie+M:Math.max(j,ie+M)}),ae=o(X,2);H=ae[0],K=ae[1]}return new v.Range(H,K-H)}r.expandConfig=U,r.overload=W,r.default=R},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function g(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&g(y.prototype,v),b&&g(y,b),y}}(),o=function g(y,v,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,v);if(w===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:g(x,v,b)}else{if("value"in w)return w.value;var S=w.get;return S===void 0?void 0:S.call(b)}},s=i(7),u=c(s),l=i(0),h=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function f(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function d(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function p(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var m=function(g){p(y,g);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"formatAt",value:function(b,w,x,S){if(y.compare(this.statics.blotName,x)<0&&h.default.query(x,h.default.Scope.BLOT)){var E=this.isolate(b,w);S&&E.wrap(x,S)}else o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"formatAt",this).call(this,b,w,x,S)}},{key:"optimize",value:function(b){if(o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,b),this.parent instanceof y&&y.compare(this.statics.blotName,this.parent.statics.blotName)>0){var w=this.parent.isolate(this.offset(),this.length());this.moveChildren(w),w.wrap(this)}}}],[{key:"compare",value:function(b,w){var x=y.order.indexOf(b),S=y.order.indexOf(w);return x>=0||S>=0?x-S:b===w?0:b<w?-1:1}}]),y}(h.default.Inline);m.allowedChildren=[m,h.default.Embed,u.default],m.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function u(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function l(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function h(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var c=function(f){h(d,f);function d(){return u(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default.Text);r.default=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function v(b,w){for(var x=0;x<w.length;x++){var S=w[x];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,w,x){return w&&v(b.prototype,w),x&&v(b,x),b}}(),o=function v(b,w,x){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,w);if(S===void 0){var E=Object.getPrototypeOf(b);return E===null?void 0:v(E,w,x)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(x)}},s=i(54),u=c(s),l=i(10),h=c(l);function c(v){return v&&v.__esModule?v:{default:v}}function f(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function d(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function p(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var m=(0,h.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(v){document.addEventListener(v,function(){for(var b=arguments.length,w=Array(b),x=0;x<b;x++)w[x]=arguments[x];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(S){if(S.__quill&&S.__quill.emitter){var E;(E=S.__quill.emitter).handleDOM.apply(E,w)}})})});var y=function(v){p(b,v);function b(){f(this,b);var w=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return w.listeners={},w.on("error",m.error),w}return a(b,[{key:"emit",value:function(){m.log.apply(m,arguments),o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(x){for(var S=arguments.length,E=Array(S>1?S-1:0),A=1;A<S;A++)E[A-1]=arguments[A];(this.listeners[x.type]||[]).forEach(function(k){var T=k.node,O=k.handler;(x.target===T||T.contains(x.target))&&O.apply(void 0,[x].concat(E))})}},{key:"listenDOM",value:function(x,S,E){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push({node:S,handler:E})}}]),b}(u.default);y.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},y.sources={API:"api",SILENT:"silent",USER:"user"},r.default=y},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});function a(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function s(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,s),this.quill=u,this.options=l};o.DEFAULTS={},r.default=o},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=["error","warn","log","info"],o="warn";function s(l){if(a.indexOf(l)<=a.indexOf(o)){for(var h,c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];(h=console)[l].apply(h,f)}}function u(l){return a.reduce(function(h,c){return h[c]=s.bind(console,c,l),h},{})}s.level=u.level=function(l){o=l},r.default=u},function(t,r,i){var a=Array.prototype.slice,o=i(52),s=i(53),u=t.exports=function(f,d,p){return p||(p={}),f===d?!0:f instanceof Date&&d instanceof Date?f.getTime()===d.getTime():!f||!d||typeof f!="object"&&typeof d!="object"?p.strict?f===d:f==d:c(f,d,p)};function l(f){return f==null}function h(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function c(f,d,p){var m,g;if(l(f)||l(d)||f.prototype!==d.prototype)return!1;if(s(f))return s(d)?(f=a.call(f),d=a.call(d),u(f,d,p)):!1;if(h(f)){if(!h(d)||f.length!==d.length)return!1;for(m=0;m<f.length;m++)if(f[m]!==d[m])return!1;return!0}try{var y=o(f),v=o(d)}catch{return!1}if(y.length!=v.length)return!1;for(y.sort(),v.sort(),m=y.length-1;m>=0;m--)if(y[m]!=v[m])return!1;for(m=y.length-1;m>=0;m--)if(g=y[m],!u(f[g],d[g],p))return!1;return typeof f==typeof d}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=function(){function s(u,l,h){h===void 0&&(h={}),this.attrName=u,this.keyName=l;var c=a.Scope.TYPE&a.Scope.ATTRIBUTE;h.scope!=null?this.scope=h.scope&a.Scope.LEVEL|c:this.scope=a.Scope.ATTRIBUTE,h.whitelist!=null&&(this.whitelist=h.whitelist)}return s.keys=function(u){return[].map.call(u.attributes,function(l){return l.name})},s.prototype.add=function(u,l){return this.canAdd(u,l)?(u.setAttribute(this.keyName,l),!0):!1},s.prototype.canAdd=function(u,l){var h=a.query(u,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return h==null?!1:this.whitelist==null?!0:typeof l=="string"?this.whitelist.indexOf(l.replace(/["']/g,""))>-1:this.whitelist.indexOf(l)>-1},s.prototype.remove=function(u){u.removeAttribute(this.keyName)},s.prototype.value=function(u){var l=u.getAttribute(this.keyName);return this.canAdd(u,l)&&l?l:""},s}();r.default=o},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var a=function(){function A(k,T){var O=[],F=!0,I=!1,R=void 0;try{for(var U=k[Symbol.iterator](),B;!(F=(B=U.next()).done)&&(O.push(B.value),!(T&&O.length===T));F=!0);}catch(W){I=!0,R=W}finally{try{!F&&U.return&&U.return()}finally{if(I)throw R}}return O}return function(k,T){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return A(k,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(k,T){for(var O=0;O<T.length;O++){var F=T[O];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,T,O){return T&&A(k.prototype,T),O&&A(k,O),k}}(),s=function A(k,T,O){k===null&&(k=Function.prototype);var F=Object.getOwnPropertyDescriptor(k,T);if(F===void 0){var I=Object.getPrototypeOf(k);return I===null?void 0:A(I,T,O)}else{if("value"in F)return F.value;var R=F.get;return R===void 0?void 0:R.call(O)}},u=i(2),l=v(u),h=i(0),c=v(h),f=i(4),d=v(f),p=i(6),m=v(p),g=i(7),y=v(g);function v(A){return A&&A.__esModule?A:{default:A}}function b(A,k){if(!(A instanceof k))throw new TypeError("Cannot call a class as a function")}function w(A,k){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:A}function x(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(A,k):A.__proto__=k)}var S=function(A){x(k,A);function k(){return b(this,k),w(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return k}(m.default);S.blotName="code",S.tagName="CODE";var E=function(A){x(k,A);function k(){return b(this,k),w(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"delta",value:function(){var O=this,F=this.domNode.textContent;return F.endsWith(`
`)&&(F=F.slice(0,-1)),F.split(`
`).reduce(function(I,R){return I.insert(R).insert(`
`,O.formats())},new l.default)}},{key:"format",value:function(O,F){if(!(O===this.statics.blotName&&F)){var I=this.descendant(y.default,this.length()-1),R=a(I,1),U=R[0];U!=null&&U.deleteAt(U.length()-1,1),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,O,F)}}},{key:"formatAt",value:function(O,F,I,R){if(F!==0&&!(c.default.query(I,c.default.Scope.BLOCK)==null||I===this.statics.blotName&&R===this.statics.formats(this.domNode))){var U=this.newlineIndex(O);if(!(U<0||U>=O+F)){var B=this.newlineIndex(O,!0)+1,W=U-B+1,Y=this.isolate(B,W),z=Y.next;Y.format(I,R),z instanceof k&&z.formatAt(0,O-B+F-W,I,R)}}}},{key:"insertAt",value:function(O,F,I){if(I==null){var R=this.descendant(y.default,O),U=a(R,2),B=U[0],W=U[1];B.insertAt(W,F)}}},{key:"length",value:function(){var O=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?O:O+1}},{key:"newlineIndex",value:function(O){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(F)return this.domNode.textContent.slice(0,O).lastIndexOf(`
`);var I=this.domNode.textContent.slice(O).indexOf(`
`);return I>-1?O+I:-1}},{key:"optimize",value:function(O){this.domNode.textContent.endsWith(`
`)||this.appendChild(c.default.create("text",`
`)),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,O);var F=this.next;F!=null&&F.prev===this&&F.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===F.statics.formats(F.domNode)&&(F.optimize(O),F.moveChildren(this),F.remove())}},{key:"replace",value:function(O){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,O),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(F){var I=c.default.find(F);I==null?F.parentNode.removeChild(F):I instanceof c.default.Embed?I.remove():I.unwrap()})}}],[{key:"create",value:function(O){var F=s(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,O);return F.setAttribute("spellcheck",!1),F}},{key:"formats",value:function(){return!0}}]),k}(d.default);E.blotName="code-block",E.tagName="PRE",E.TAB="  ",r.Code=S,r.default=E},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},o=function(){function z(j,M){var q=[],H=!0,K=!1,Z=void 0;try{for(var J=j[Symbol.iterator](),X;!(H=(X=J.next()).done)&&(q.push(X.value),!(M&&q.length===M));H=!0);}catch(ae){K=!0,Z=ae}finally{try{!H&&J.return&&J.return()}finally{if(K)throw Z}}return q}return function(j,M){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return z(j,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function z(j,M){for(var q=0;q<M.length;q++){var H=M[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,M,q){return M&&z(j.prototype,M),q&&z(j,q),j}}(),u=i(2),l=F(u),h=i(20),c=F(h),f=i(0),d=F(f),p=i(13),m=F(p),g=i(24),y=F(g),v=i(4),b=F(v),w=i(16),x=F(w),S=i(21),E=F(S),A=i(11),k=F(A),T=i(3),O=F(T);function F(z){return z&&z.__esModule?z:{default:z}}function I(z,j,M){return j in z?Object.defineProperty(z,j,{value:M,enumerable:!0,configurable:!0,writable:!0}):z[j]=M,z}function R(z,j){if(!(z instanceof j))throw new TypeError("Cannot call a class as a function")}var U=/^[ -~]*$/,B=function(){function z(j){R(this,z),this.scroll=j,this.delta=this.getDelta()}return s(z,[{key:"applyDelta",value:function(M){var q=this,H=!1;this.scroll.update();var K=this.scroll.length();return this.scroll.batchStart(),M=Y(M),M.reduce(function(Z,J){var X=J.retain||J.delete||J.insert.length||1,ae=J.attributes||{};if(J.insert!=null){if(typeof J.insert=="string"){var ie=J.insert;ie.endsWith(`
`)&&H&&(H=!1,ie=ie.slice(0,-1)),Z>=K&&!ie.endsWith(`
`)&&(H=!0),q.scroll.insertAt(Z,ie);var ce=q.scroll.line(Z),ge=o(ce,2),Ce=ge[0],Ee=ge[1],G=(0,O.default)({},(0,v.bubbleFormats)(Ce));if(Ce instanceof b.default){var de=Ce.descendant(d.default.Leaf,Ee),ye=o(de,1),le=ye[0];G=(0,O.default)(G,(0,v.bubbleFormats)(le))}ae=c.default.attributes.diff(G,ae)||{}}else if(a(J.insert)==="object"){var ne=Object.keys(J.insert)[0];if(ne==null)return Z;q.scroll.insertAt(Z,ne,J.insert[ne])}K+=X}return Object.keys(ae).forEach(function(fe){q.scroll.formatAt(Z,X,fe,ae[fe])}),Z+X},0),M.reduce(function(Z,J){return typeof J.delete=="number"?(q.scroll.deleteAt(Z,J.delete),Z):Z+(J.retain||J.insert.length||1)},0),this.scroll.batchEnd(),this.update(M)}},{key:"deleteText",value:function(M,q){return this.scroll.deleteAt(M,q),this.update(new l.default().retain(M).delete(q))}},{key:"formatLine",value:function(M,q){var H=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(K).forEach(function(Z){if(!(H.scroll.whitelist!=null&&!H.scroll.whitelist[Z])){var J=H.scroll.lines(M,Math.max(q,1)),X=q;J.forEach(function(ae){var ie=ae.length();if(!(ae instanceof m.default))ae.format(Z,K[Z]);else{var ce=M-ae.offset(H.scroll),ge=ae.newlineIndex(ce+X)-ce+1;ae.formatAt(ce,ge,Z,K[Z])}X-=ie})}}),this.scroll.optimize(),this.update(new l.default().retain(M).retain(q,(0,E.default)(K)))}},{key:"formatText",value:function(M,q){var H=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(K).forEach(function(Z){H.scroll.formatAt(M,q,Z,K[Z])}),this.update(new l.default().retain(M).retain(q,(0,E.default)(K)))}},{key:"getContents",value:function(M,q){return this.delta.slice(M,M+q)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(M,q){return M.concat(q.delta())},new l.default)}},{key:"getFormat",value:function(M){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=[],K=[];q===0?this.scroll.path(M).forEach(function(J){var X=o(J,1),ae=X[0];ae instanceof b.default?H.push(ae):ae instanceof d.default.Leaf&&K.push(ae)}):(H=this.scroll.lines(M,q),K=this.scroll.descendants(d.default.Leaf,M,q));var Z=[H,K].map(function(J){if(J.length===0)return{};for(var X=(0,v.bubbleFormats)(J.shift());Object.keys(X).length>0;){var ae=J.shift();if(ae==null)return X;X=W((0,v.bubbleFormats)(ae),X)}return X});return O.default.apply(O.default,Z)}},{key:"getText",value:function(M,q){return this.getContents(M,q).filter(function(H){return typeof H.insert=="string"}).map(function(H){return H.insert}).join("")}},{key:"insertEmbed",value:function(M,q,H){return this.scroll.insertAt(M,q,H),this.update(new l.default().retain(M).insert(I({},q,H)))}},{key:"insertText",value:function(M,q){var H=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return q=q.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(M,q),Object.keys(K).forEach(function(Z){H.scroll.formatAt(M,q.length,Z,K[Z])}),this.update(new l.default().retain(M).insert(q,(0,E.default)(K)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var M=this.scroll.children.head;return M.statics.blotName!==b.default.blotName||M.children.length>1?!1:M.children.head instanceof x.default}},{key:"removeFormat",value:function(M,q){var H=this.getText(M,q),K=this.scroll.line(M+q),Z=o(K,2),J=Z[0],X=Z[1],ae=0,ie=new l.default;J!=null&&(J instanceof m.default?ae=J.newlineIndex(X)-X+1:ae=J.length()-X,ie=J.delta().slice(X,X+ae-1).insert(`
`));var ce=this.getContents(M,q+ae),ge=ce.diff(new l.default().insert(H).concat(ie)),Ce=new l.default().retain(M).concat(ge);return this.applyDelta(Ce)}},{key:"update",value:function(M){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,K=this.delta;if(q.length===1&&q[0].type==="characterData"&&q[0].target.data.match(U)&&d.default.find(q[0].target)){var Z=d.default.find(q[0].target),J=(0,v.bubbleFormats)(Z),X=Z.offset(this.scroll),ae=q[0].oldValue.replace(y.default.CONTENTS,""),ie=new l.default().insert(ae),ce=new l.default().insert(Z.value()),ge=new l.default().retain(X).concat(ie.diff(ce,H));M=ge.reduce(function(Ce,Ee){return Ee.insert?Ce.insert(Ee.insert,J):Ce.push(Ee)},new l.default),this.delta=K.compose(M)}else this.delta=this.getDelta(),(!M||!(0,k.default)(K.compose(M),this.delta))&&(M=K.diff(this.delta,H));return M}}]),z}();function W(z,j){return Object.keys(j).reduce(function(M,q){return z[q]==null||(j[q]===z[q]?M[q]=j[q]:Array.isArray(j[q])?j[q].indexOf(z[q])<0&&(M[q]=j[q].concat([z[q]])):M[q]=[j[q],z[q]]),M},{})}function Y(z){return z.reduce(function(j,M){if(M.insert===1){var q=(0,E.default)(M.attributes);return delete q.image,j.insert({image:M.attributes.image},q)}if(M.attributes!=null&&(M.attributes.list===!0||M.attributes.bullet===!0)&&(M=(0,E.default)(M),M.attributes.list?M.attributes.list="ordered":(M.attributes.list="bullet",delete M.attributes.bullet)),typeof M.insert=="string"){var H=M.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return j.insert(H,M.attributes)}return j.push(M)},new l.default)}r.default=B},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var a=function(){function A(k,T){var O=[],F=!0,I=!1,R=void 0;try{for(var U=k[Symbol.iterator](),B;!(F=(B=U.next()).done)&&(O.push(B.value),!(T&&O.length===T));F=!0);}catch(W){I=!0,R=W}finally{try{!F&&U.return&&U.return()}finally{if(I)throw R}}return O}return function(k,T){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return A(k,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(k,T){for(var O=0;O<T.length;O++){var F=T[O];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,T,O){return T&&A(k.prototype,T),O&&A(k,O),k}}(),s=i(0),u=y(s),l=i(21),h=y(l),c=i(11),f=y(c),d=i(8),p=y(d),m=i(10),g=y(m);function y(A){return A&&A.__esModule?A:{default:A}}function v(A){if(Array.isArray(A)){for(var k=0,T=Array(A.length);k<A.length;k++)T[k]=A[k];return T}else return Array.from(A)}function b(A,k){if(!(A instanceof k))throw new TypeError("Cannot call a class as a function")}var w=(0,g.default)("quill:selection"),x=function A(k){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;b(this,A),this.index=k,this.length=T},S=function(){function A(k,T){var O=this;b(this,A),this.emitter=T,this.scroll=k,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new x(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){O.mouseDown||setTimeout(O.update.bind(O,p.default.sources.USER),1)}),this.emitter.on(p.default.events.EDITOR_CHANGE,function(F,I){F===p.default.events.TEXT_CHANGE&&I.length()>0&&O.update(p.default.sources.SILENT)}),this.emitter.on(p.default.events.SCROLL_BEFORE_UPDATE,function(){if(O.hasFocus()){var F=O.getNativeRange();F!=null&&F.start.node!==O.cursor.textNode&&O.emitter.once(p.default.events.SCROLL_UPDATE,function(){try{O.setNativeRange(F.start.node,F.start.offset,F.end.node,F.end.offset)}catch{}})}}),this.emitter.on(p.default.events.SCROLL_OPTIMIZE,function(F,I){if(I.range){var R=I.range,U=R.startNode,B=R.startOffset,W=R.endNode,Y=R.endOffset;O.setNativeRange(U,B,W,Y)}}),this.update(p.default.sources.SILENT)}return o(A,[{key:"handleComposition",value:function(){var T=this;this.root.addEventListener("compositionstart",function(){T.composing=!0}),this.root.addEventListener("compositionend",function(){if(T.composing=!1,T.cursor.parent){var O=T.cursor.restore();if(!O)return;setTimeout(function(){T.setNativeRange(O.startNode,O.startOffset,O.endNode,O.endOffset)},1)}})}},{key:"handleDragging",value:function(){var T=this;this.emitter.listenDOM("mousedown",document.body,function(){T.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){T.mouseDown=!1,T.update(p.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(T,O){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[T])){this.scroll.update();var F=this.getNativeRange();if(!(F==null||!F.native.collapsed||u.default.query(T,u.default.Scope.BLOCK))){if(F.start.node!==this.cursor.textNode){var I=u.default.find(F.start.node,!1);if(I==null)return;if(I instanceof u.default.Leaf){var R=I.split(F.start.offset);I.parent.insertBefore(this.cursor,R)}else I.insertBefore(this.cursor,F.start.node);this.cursor.attach()}this.cursor.format(T,O),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(T){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=this.scroll.length();T=Math.min(T,F-1),O=Math.min(T+O,F-1)-T;var I=void 0,R=this.scroll.leaf(T),U=a(R,2),B=U[0],W=U[1];if(B==null)return null;var Y=B.position(W,!0),z=a(Y,2);I=z[0],W=z[1];var j=document.createRange();if(O>0){j.setStart(I,W);var M=this.scroll.leaf(T+O),q=a(M,2);if(B=q[0],W=q[1],B==null)return null;var H=B.position(W,!0),K=a(H,2);return I=K[0],W=K[1],j.setEnd(I,W),j.getBoundingClientRect()}else{var Z="left",J=void 0;return I instanceof Text?(W<I.data.length?(j.setStart(I,W),j.setEnd(I,W+1)):(j.setStart(I,W-1),j.setEnd(I,W),Z="right"),J=j.getBoundingClientRect()):(J=B.domNode.getBoundingClientRect(),W>0&&(Z="right")),{bottom:J.top+J.height,height:J.height,left:J[Z],right:J[Z],top:J.top,width:0}}}},{key:"getNativeRange",value:function(){var T=document.getSelection();if(T==null||T.rangeCount<=0)return null;var O=T.getRangeAt(0);if(O==null)return null;var F=this.normalizeNative(O);return w.info("getNativeRange",F),F}},{key:"getRange",value:function(){var T=this.getNativeRange();if(T==null)return[null,null];var O=this.normalizedToRange(T);return[O,T]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(T){var O=this,F=[[T.start.node,T.start.offset]];T.native.collapsed||F.push([T.end.node,T.end.offset]);var I=F.map(function(B){var W=a(B,2),Y=W[0],z=W[1],j=u.default.find(Y,!0),M=j.offset(O.scroll);return z===0?M:j instanceof u.default.Container?M+j.length():M+j.index(Y,z)}),R=Math.min(Math.max.apply(Math,v(I)),this.scroll.length()-1),U=Math.min.apply(Math,[R].concat(v(I)));return new x(U,R-U)}},{key:"normalizeNative",value:function(T){if(!E(this.root,T.startContainer)||!T.collapsed&&!E(this.root,T.endContainer))return null;var O={start:{node:T.startContainer,offset:T.startOffset},end:{node:T.endContainer,offset:T.endOffset},native:T};return[O.start,O.end].forEach(function(F){for(var I=F.node,R=F.offset;!(I instanceof Text)&&I.childNodes.length>0;)if(I.childNodes.length>R)I=I.childNodes[R],R=0;else if(I.childNodes.length===R)I=I.lastChild,R=I instanceof Text?I.data.length:I.childNodes.length+1;else break;F.node=I,F.offset=R}),O}},{key:"rangeToNative",value:function(T){var O=this,F=T.collapsed?[T.index]:[T.index,T.index+T.length],I=[],R=this.scroll.length();return F.forEach(function(U,B){U=Math.min(R-1,U);var W=void 0,Y=O.scroll.leaf(U),z=a(Y,2),j=z[0],M=z[1],q=j.position(M,B!==0),H=a(q,2);W=H[0],M=H[1],I.push(W,M)}),I.length<2&&(I=I.concat(I)),I}},{key:"scrollIntoView",value:function(T){var O=this.lastRange;if(O!=null){var F=this.getBounds(O.index,O.length);if(F!=null){var I=this.scroll.length()-1,R=this.scroll.line(Math.min(O.index,I)),U=a(R,1),B=U[0],W=B;if(O.length>0){var Y=this.scroll.line(Math.min(O.index+O.length,I)),z=a(Y,1);W=z[0]}if(!(B==null||W==null)){var j=T.getBoundingClientRect();F.top<j.top?T.scrollTop-=j.top-F.top:F.bottom>j.bottom&&(T.scrollTop+=F.bottom-j.bottom)}}}}},{key:"setNativeRange",value:function(T,O){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T,I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O,R=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(w.info("setNativeRange",T,O,F,I),!(T!=null&&(this.root.parentNode==null||T.parentNode==null||F.parentNode==null))){var U=document.getSelection();if(U!=null)if(T!=null){this.hasFocus()||this.root.focus();var B=(this.getNativeRange()||{}).native;if(B==null||R||T!==B.startContainer||O!==B.startOffset||F!==B.endContainer||I!==B.endOffset){T.tagName=="BR"&&(O=[].indexOf.call(T.parentNode.childNodes,T),T=T.parentNode),F.tagName=="BR"&&(I=[].indexOf.call(F.parentNode.childNodes,F),F=F.parentNode);var W=document.createRange();W.setStart(T,O),W.setEnd(F,I),U.removeAllRanges(),U.addRange(W)}}else U.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(T){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof O=="string"&&(F=O,O=!1),w.info("setRange",T),T!=null){var I=this.rangeToNative(T);this.setNativeRange.apply(this,v(I).concat([O]))}else this.setNativeRange(null);this.update(F)}},{key:"update",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,O=this.lastRange,F=this.getRange(),I=a(F,2),R=I[0],U=I[1];if(this.lastRange=R,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(O,this.lastRange)){var B;!this.composing&&U!=null&&U.native.collapsed&&U.start.node!==this.cursor.textNode&&this.cursor.restore();var W=[p.default.events.SELECTION_CHANGE,(0,h.default)(this.lastRange),(0,h.default)(O),T];if((B=this.emitter).emit.apply(B,[p.default.events.EDITOR_CHANGE].concat(W)),T!==p.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,W)}}}}]),A}();function E(A,k){try{k.parentNode}catch{return!1}return k instanceof Text&&(k=k.parentNode),A.contains(k)}r.Range=x,r.default=S},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function p(m,g){for(var y=0;y<g.length;y++){var v=g[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,g,y){return g&&p(m.prototype,g),y&&p(m,y),m}}(),o=function p(m,g,y){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,g);if(v===void 0){var b=Object.getPrototypeOf(m);return b===null?void 0:p(b,g,y)}else{if("value"in v)return v.value;var w=v.get;return w===void 0?void 0:w.call(y)}},s=i(0),u=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function h(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return h(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,[{key:"insertInto",value:function(y,v){y.children.length===0?o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertInto",this).call(this,y,v):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),m}(u.default.Embed);d.blotName="break",d.tagName="BR",r.default=d},function(t,r,i){var a=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){c(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),s=i(30),u=i(1),l=function(c){a(f,c);function f(d){var p=c.call(this,d)||this;return p.build(),p}return f.prototype.appendChild=function(d){this.insertBefore(d)},f.prototype.attach=function(){c.prototype.attach.call(this),this.children.forEach(function(d){d.attach()})},f.prototype.build=function(){var d=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(p){try{var m=h(p);d.insertBefore(m,d.children.head||void 0)}catch(g){if(g instanceof u.ParchmentError)return;throw g}})},f.prototype.deleteAt=function(d,p){if(d===0&&p===this.length())return this.remove();this.children.forEachAt(d,p,function(m,g,y){m.deleteAt(g,y)})},f.prototype.descendant=function(d,p){var m=this.children.find(p),g=m[0],y=m[1];return d.blotName==null&&d(g)||d.blotName!=null&&g instanceof d?[g,y]:g instanceof f?g.descendant(d,y):[null,-1]},f.prototype.descendants=function(d,p,m){p===void 0&&(p=0),m===void 0&&(m=Number.MAX_VALUE);var g=[],y=m;return this.children.forEachAt(p,m,function(v,b,w){(d.blotName==null&&d(v)||d.blotName!=null&&v instanceof d)&&g.push(v),v instanceof f&&(g=g.concat(v.descendants(d,b,y))),y-=w}),g},f.prototype.detach=function(){this.children.forEach(function(d){d.detach()}),c.prototype.detach.call(this)},f.prototype.formatAt=function(d,p,m,g){this.children.forEachAt(d,p,function(y,v,b){y.formatAt(v,b,m,g)})},f.prototype.insertAt=function(d,p,m){var g=this.children.find(d),y=g[0],v=g[1];if(y)y.insertAt(v,p,m);else{var b=m==null?u.create("text",p):u.create(p,m);this.appendChild(b)}},f.prototype.insertBefore=function(d,p){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(m){return d instanceof m}))throw new u.ParchmentError("Cannot insert "+d.statics.blotName+" into "+this.statics.blotName);d.insertInto(this,p)},f.prototype.length=function(){return this.children.reduce(function(d,p){return d+p.length()},0)},f.prototype.moveChildren=function(d,p){this.children.forEach(function(m){d.insertBefore(m,p)})},f.prototype.optimize=function(d){if(c.prototype.optimize.call(this,d),this.children.length===0)if(this.statics.defaultChild!=null){var p=u.create(this.statics.defaultChild);this.appendChild(p),p.optimize(d)}else this.remove()},f.prototype.path=function(d,p){p===void 0&&(p=!1);var m=this.children.find(d,p),g=m[0],y=m[1],v=[[this,d]];return g instanceof f?v.concat(g.path(y,p)):(g!=null&&v.push([g,y]),v)},f.prototype.removeChild=function(d){this.children.remove(d)},f.prototype.replace=function(d){d instanceof f&&d.moveChildren(this),c.prototype.replace.call(this,d)},f.prototype.split=function(d,p){if(p===void 0&&(p=!1),!p){if(d===0)return this;if(d===this.length())return this.next}var m=this.clone();return this.parent.insertBefore(m,this.next),this.children.forEachAt(d,this.length(),function(g,y,v){g=g.split(y,p),m.appendChild(g)}),m},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(d,p){var m=this,g=[],y=[];d.forEach(function(v){v.target===m.domNode&&v.type==="childList"&&(g.push.apply(g,v.addedNodes),y.push.apply(y,v.removedNodes))}),y.forEach(function(v){if(!(v.parentNode!=null&&v.tagName!=="IFRAME"&&document.body.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var b=u.find(v);b!=null&&(b.domNode.parentNode==null||b.domNode.parentNode===m.domNode)&&b.detach()}}),g.filter(function(v){return v.parentNode==m.domNode}).sort(function(v,b){return v===b?0:v.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(v){var b=null;v.nextSibling!=null&&(b=u.find(v.nextSibling));var w=h(v);(w.next!=b||w.next==null)&&(w.parent!=null&&w.parent.removeChild(m),m.insertBefore(w,b||void 0))})},f}(s.default);function h(c){var f=u.find(c);if(f==null)try{f=u.create(c)}catch{f=u.create(u.Scope.INLINE),[].slice.call(c.childNodes).forEach(function(p){f.domNode.appendChild(p)}),c.parentNode&&c.parentNode.replaceChild(f.domNode,c),f.attach()}return f}r.default=l},function(t,r,i){var a=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){c(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),s=i(31),u=i(17),l=i(1),h=function(c){a(f,c);function f(d){var p=c.call(this,d)||this;return p.attributes=new s.default(p.domNode),p}return f.formats=function(d){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return d.tagName.toLowerCase()},f.prototype.format=function(d,p){var m=l.query(d);m instanceof o.default?this.attributes.attribute(m,p):p&&m!=null&&(d!==this.statics.blotName||this.formats()[d]!==p)&&this.replaceWith(d,p)},f.prototype.formats=function(){var d=this.attributes.values(),p=this.statics.formats(this.domNode);return p!=null&&(d[this.statics.blotName]=p),d},f.prototype.replaceWith=function(d,p){var m=c.prototype.replaceWith.call(this,d,p);return this.attributes.copy(m),m},f.prototype.update=function(d,p){var m=this;c.prototype.update.call(this,d,p),d.some(function(g){return g.target===m.domNode&&g.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(d,p){var m=c.prototype.wrap.call(this,d,p);return m instanceof f&&m.statics.scope===this.statics.scope&&this.attributes.move(m),m},f}(u.default);r.default=h},function(t,r,i){var a=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var f in c)c.hasOwnProperty(f)&&(h[f]=c[f])};return function(h,c){l(h,c);function f(){this.constructor=h}h.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),s=i(1),u=function(l){a(h,l);function h(){return l!==null&&l.apply(this,arguments)||this}return h.value=function(c){return!0},h.prototype.index=function(c,f){return this.domNode===c||this.domNode.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},h.prototype.position=function(c,f){var d=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return c>0&&(d+=1),[this.parent.domNode,d]},h.prototype.value=function(){var c;return c={},c[this.statics.blotName]=this.statics.value(this.domNode)||!0,c},h.scope=s.Scope.INLINE_BLOT,h}(o.default);r.default=u},function(t,r,i){var a=i(11),o=i(3),s={attributes:{compose:function(l,h,c){typeof l!="object"&&(l={}),typeof h!="object"&&(h={});var f=o(!0,{},h);c||(f=Object.keys(f).reduce(function(p,m){return f[m]!=null&&(p[m]=f[m]),p},{}));for(var d in l)l[d]!==void 0&&h[d]===void 0&&(f[d]=l[d]);return Object.keys(f).length>0?f:void 0},diff:function(l,h){typeof l!="object"&&(l={}),typeof h!="object"&&(h={});var c=Object.keys(l).concat(Object.keys(h)).reduce(function(f,d){return a(l[d],h[d])||(f[d]=h[d]===void 0?null:h[d]),f},{});return Object.keys(c).length>0?c:void 0},transform:function(l,h,c){if(typeof l!="object")return h;if(typeof h=="object"){if(!c)return h;var f=Object.keys(h).reduce(function(d,p){return l[p]===void 0&&(d[p]=h[p]),d},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(l){return new u(l)},length:function(l){return typeof l.delete=="number"?l.delete:typeof l.retain=="number"?l.retain:typeof l.insert=="string"?l.insert.length:1}};function u(l){this.ops=l,this.index=0,this.offset=0}u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(l){l||(l=1/0);var h=this.ops[this.index];if(h){var c=this.offset,f=s.length(h);if(l>=f-c?(l=f-c,this.index+=1,this.offset=0):this.offset+=l,typeof h.delete=="number")return{delete:l};var d={};return h.attributes&&(d.attributes=h.attributes),typeof h.retain=="number"?d.retain=l:typeof h.insert=="string"?d.insert=h.insert.substr(c,l):d.insert=h.insert,d}else return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var l=this.offset,h=this.index,c=this.next(),f=this.ops.slice(this.index);return this.offset=l,this.index=h,[c].concat(f)}else return[]},t.exports=s},function(t,r){var i=function(){function a(m,g){return g!=null&&m instanceof g}var o;try{o=Map}catch{o=function(){}}var s;try{s=Set}catch{s=function(){}}var u;try{u=Promise}catch{u=function(){}}function l(m,g,y,v,b){typeof g=="object"&&(y=g.depth,v=g.prototype,b=g.includeNonEnumerable,g=g.circular);var w=[],x=[],S=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof y>"u"&&(y=1/0);function E(A,k){if(A===null)return null;if(k===0)return A;var T,O;if(typeof A!="object")return A;if(a(A,o))T=new o;else if(a(A,s))T=new s;else if(a(A,u))T=new u(function(j,M){A.then(function(q){j(E(q,k-1))},function(q){M(E(q,k-1))})});else if(l.__isArray(A))T=[];else if(l.__isRegExp(A))T=new RegExp(A.source,p(A)),A.lastIndex&&(T.lastIndex=A.lastIndex);else if(l.__isDate(A))T=new Date(A.getTime());else{if(S&&Buffer.isBuffer(A))return Buffer.allocUnsafe?T=Buffer.allocUnsafe(A.length):T=new Buffer(A.length),A.copy(T),T;a(A,Error)?T=Object.create(A):typeof v>"u"?(O=Object.getPrototypeOf(A),T=Object.create(O)):(T=Object.create(v),O=v)}if(g){var F=w.indexOf(A);if(F!=-1)return x[F];w.push(A),x.push(T)}a(A,o)&&A.forEach(function(j,M){var q=E(M,k-1),H=E(j,k-1);T.set(q,H)}),a(A,s)&&A.forEach(function(j){var M=E(j,k-1);T.add(M)});for(var I in A){var R;O&&(R=Object.getOwnPropertyDescriptor(O,I)),!(R&&R.set==null)&&(T[I]=E(A[I],k-1))}if(Object.getOwnPropertySymbols)for(var U=Object.getOwnPropertySymbols(A),I=0;I<U.length;I++){var B=U[I],W=Object.getOwnPropertyDescriptor(A,B);W&&!W.enumerable&&!b||(T[B]=E(A[B],k-1),W.enumerable||Object.defineProperty(T,B,{enumerable:!1}))}if(b)for(var Y=Object.getOwnPropertyNames(A),I=0;I<Y.length;I++){var z=Y[I],W=Object.getOwnPropertyDescriptor(A,z);W&&W.enumerable||(T[z]=E(A[z],k-1),Object.defineProperty(T,z,{enumerable:!1}))}return T}return E(m,y)}l.clonePrototype=function(g){if(g===null)return null;var y=function(){};return y.prototype=g,new y};function h(m){return Object.prototype.toString.call(m)}l.__objToStr=h;function c(m){return typeof m=="object"&&h(m)==="[object Date]"}l.__isDate=c;function f(m){return typeof m=="object"&&h(m)==="[object Array]"}l.__isArray=f;function d(m){return typeof m=="object"&&h(m)==="[object RegExp]"}l.__isRegExp=d;function p(m){var g="";return m.global&&(g+="g"),m.ignoreCase&&(g+="i"),m.multiline&&(g+="m"),g}return l.__getRegExpFlags=p,l}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function T(O,F){var I=[],R=!0,U=!1,B=void 0;try{for(var W=O[Symbol.iterator](),Y;!(R=(Y=W.next()).done)&&(I.push(Y.value),!(F&&I.length===F));R=!0);}catch(z){U=!0,B=z}finally{try{!R&&W.return&&W.return()}finally{if(U)throw B}}return I}return function(O,F){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return T(O,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(O,F){for(var I=0;I<F.length;I++){var R=F[I];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,F,I){return F&&T(O.prototype,F),I&&T(O,I),O}}(),s=function T(O,F,I){O===null&&(O=Function.prototype);var R=Object.getOwnPropertyDescriptor(O,F);if(R===void 0){var U=Object.getPrototypeOf(O);return U===null?void 0:T(U,F,I)}else{if("value"in R)return R.value;var B=R.get;return B===void 0?void 0:B.call(I)}},u=i(0),l=w(u),h=i(8),c=w(h),f=i(4),d=w(f),p=i(16),m=w(p),g=i(13),y=w(g),v=i(25),b=w(v);function w(T){return T&&T.__esModule?T:{default:T}}function x(T,O){if(!(T instanceof O))throw new TypeError("Cannot call a class as a function")}function S(T,O){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:T}function E(T,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);T.prototype=Object.create(O&&O.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(T,O):T.__proto__=O)}function A(T){return T instanceof d.default||T instanceof f.BlockEmbed}var k=function(T){E(O,T);function O(F,I){x(this,O);var R=S(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,F));return R.emitter=I.emitter,Array.isArray(I.whitelist)&&(R.whitelist=I.whitelist.reduce(function(U,B){return U[B]=!0,U},{})),R.domNode.addEventListener("DOMNodeInserted",function(){}),R.optimize(),R.enable(),R}return o(O,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(I,R){var U=this.line(I),B=a(U,2),W=B[0],Y=B[1],z=this.line(I+R),j=a(z,1),M=j[0];if(s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,I,R),M!=null&&W!==M&&Y>0){if(W instanceof f.BlockEmbed||M instanceof f.BlockEmbed){this.optimize();return}if(W instanceof y.default){var q=W.newlineIndex(W.length(),!0);if(q>-1&&(W=W.split(q+1),W===M)){this.optimize();return}}else if(M instanceof y.default){var H=M.newlineIndex(0);H>-1&&M.split(H+1)}var K=M.children.head instanceof m.default?null:M.children.head;W.moveChildren(M,K),W.remove()}this.optimize()}},{key:"enable",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",I)}},{key:"formatAt",value:function(I,R,U,B){this.whitelist!=null&&!this.whitelist[U]||(s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,I,R,U,B),this.optimize())}},{key:"insertAt",value:function(I,R,U){if(!(U!=null&&this.whitelist!=null&&!this.whitelist[R])){if(I>=this.length())if(U==null||l.default.query(R,l.default.Scope.BLOCK)==null){var B=l.default.create(this.statics.defaultChild);this.appendChild(B),U==null&&R.endsWith(`
`)&&(R=R.slice(0,-1)),B.insertAt(0,R,U)}else{var W=l.default.create(R,U);this.appendChild(W)}else s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,I,R,U);this.optimize()}}},{key:"insertBefore",value:function(I,R){if(I.statics.scope===l.default.Scope.INLINE_BLOT){var U=l.default.create(this.statics.defaultChild);U.appendChild(I),I=U}s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,I,R)}},{key:"leaf",value:function(I){return this.path(I).pop()||[null,-1]}},{key:"line",value:function(I){return I===this.length()?this.line(I-1):this.descendant(A,I)}},{key:"lines",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,U=function B(W,Y,z){var j=[],M=z;return W.children.forEachAt(Y,z,function(q,H,K){A(q)?j.push(q):q instanceof l.default.Container&&(j=j.concat(B(q,H,M))),M-=K}),j};return U(this,I,R)}},{key:"optimize",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,I,R),I.length>0&&this.emitter.emit(c.default.events.SCROLL_OPTIMIZE,I,R))}},{key:"path",value:function(I){return s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,I).slice(1)}},{key:"update",value:function(I){if(this.batch!==!0){var R=c.default.sources.USER;typeof I=="string"&&(R=I),Array.isArray(I)||(I=this.observer.takeRecords()),I.length>0&&this.emitter.emit(c.default.events.SCROLL_BEFORE_UPDATE,R,I),s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"update",this).call(this,I.concat([])),I.length>0&&this.emitter.emit(c.default.events.SCROLL_UPDATE,R,I)}}}]),O}(l.default.Scroll);k.blotName="scroll",k.className="ql-editor",k.tagName="DIV",k.defaultChild="block",k.allowedChildren=[d.default,f.BlockEmbed,b.default],r.default=k},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},o=function(){function J(X,ae){var ie=[],ce=!0,ge=!1,Ce=void 0;try{for(var Ee=X[Symbol.iterator](),G;!(ce=(G=Ee.next()).done)&&(ie.push(G.value),!(ae&&ie.length===ae));ce=!0);}catch(de){ge=!0,Ce=de}finally{try{!ce&&Ee.return&&Ee.return()}finally{if(ge)throw Ce}}return ie}return function(X,ae){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return J(X,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function J(X,ae){for(var ie=0;ie<ae.length;ie++){var ce=ae[ie];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(X,ce.key,ce)}}return function(X,ae,ie){return ae&&J(X.prototype,ae),ie&&J(X,ie),X}}(),u=i(21),l=T(u),h=i(11),c=T(h),f=i(3),d=T(f),p=i(2),m=T(p),g=i(20),y=T(g),v=i(0),b=T(v),w=i(5),x=T(w),S=i(10),E=T(S),A=i(9),k=T(A);function T(J){return J&&J.__esModule?J:{default:J}}function O(J,X,ae){return X in J?Object.defineProperty(J,X,{value:ae,enumerable:!0,configurable:!0,writable:!0}):J[X]=ae,J}function F(J,X){if(!(J instanceof X))throw new TypeError("Cannot call a class as a function")}function I(J,X){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:J}function R(J,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);J.prototype=Object.create(X&&X.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(J,X):J.__proto__=X)}var U=(0,E.default)("quill:keyboard"),B=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",W=function(J){R(X,J),s(X,null,[{key:"match",value:function(ie,ce){return ce=Z(ce),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ge){return!!ce[ge]!==ie[ge]&&ce[ge]!==null})?!1:ce.key===(ie.which||ie.keyCode)}}]);function X(ae,ie){F(this,X);var ce=I(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,ae,ie));return ce.bindings={},Object.keys(ce.options.bindings).forEach(function(ge){ge==="list autofill"&&ae.scroll.whitelist!=null&&!ae.scroll.whitelist.list||ce.options.bindings[ge]&&ce.addBinding(ce.options.bindings[ge])}),ce.addBinding({key:X.keys.ENTER,shiftKey:null},q),ce.addBinding({key:X.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ce.addBinding({key:X.keys.BACKSPACE},{collapsed:!0},z),ce.addBinding({key:X.keys.DELETE},{collapsed:!0},j)):(ce.addBinding({key:X.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},z),ce.addBinding({key:X.keys.DELETE},{collapsed:!0,suffix:/^.?$/},j)),ce.addBinding({key:X.keys.BACKSPACE},{collapsed:!1},M),ce.addBinding({key:X.keys.DELETE},{collapsed:!1},M),ce.addBinding({key:X.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},z),ce.listen(),ce}return s(X,[{key:"addBinding",value:function(ie){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=Z(ie);if(Ce==null||Ce.key==null)return U.warn("Attempted to add invalid keyboard binding",Ce);typeof ce=="function"&&(ce={handler:ce}),typeof ge=="function"&&(ge={handler:ge}),Ce=(0,d.default)(Ce,ce,ge),this.bindings[Ce.key]=this.bindings[Ce.key]||[],this.bindings[Ce.key].push(Ce)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(ce){if(!ce.defaultPrevented){var ge=ce.which||ce.keyCode,Ce=(ie.bindings[ge]||[]).filter(function(pt){return X.match(ce,pt)});if(Ce.length!==0){var Ee=ie.quill.getSelection();if(!(Ee==null||!ie.quill.hasFocus())){var G=ie.quill.getLine(Ee.index),de=o(G,2),ye=de[0],le=de[1],ne=ie.quill.getLeaf(Ee.index),fe=o(ne,2),Ne=fe[0],Ae=fe[1],ue=Ee.length===0?[Ne,Ae]:ie.quill.getLeaf(Ee.index+Ee.length),me=o(ue,2),Se=me[0],Re=me[1],je=Ne instanceof b.default.Text?Ne.value().slice(0,Ae):"",rt=Se instanceof b.default.Text?Se.value().slice(Re):"",at={collapsed:Ee.length===0,empty:Ee.length===0&&ye.length()<=1,format:ie.quill.getFormat(Ee),offset:le,prefix:je,suffix:rt},yt=Ce.some(function(pt){if(pt.collapsed!=null&&pt.collapsed!==at.collapsed||pt.empty!=null&&pt.empty!==at.empty||pt.offset!=null&&pt.offset!==at.offset)return!1;if(Array.isArray(pt.format)){if(pt.format.every(function(Le){return at.format[Le]==null}))return!1}else if(a(pt.format)==="object"&&!Object.keys(pt.format).every(function(Le){return pt.format[Le]===!0?at.format[Le]!=null:pt.format[Le]===!1?at.format[Le]==null:(0,c.default)(pt.format[Le],at.format[Le])}))return!1;return pt.prefix!=null&&!pt.prefix.test(at.prefix)||pt.suffix!=null&&!pt.suffix.test(at.suffix)?!1:pt.handler.call(ie,Ee,at)!==!0});yt&&ce.preventDefault()}}}})}}]),X}(k.default);W.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},W.DEFAULTS={bindings:{bold:K("bold"),italic:K("italic"),underline:K("underline"),indent:{key:W.keys.TAB,format:["blockquote","indent","list"],handler:function(X,ae){if(ae.collapsed&&ae.offset!==0)return!0;this.quill.format("indent","+1",x.default.sources.USER)}},outdent:{key:W.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(X,ae){if(ae.collapsed&&ae.offset!==0)return!0;this.quill.format("indent","-1",x.default.sources.USER)}},"outdent backspace":{key:W.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(X,ae){ae.format.indent!=null?this.quill.format("indent","-1",x.default.sources.USER):ae.format.list!=null&&this.quill.format("list",!1,x.default.sources.USER)}},"indent code-block":H(!0),"outdent code-block":H(!1),"remove tab":{key:W.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(X){this.quill.deleteText(X.index-1,1,x.default.sources.USER)}},tab:{key:W.keys.TAB,handler:function(X){this.quill.history.cutoff();var ae=new m.default().retain(X.index).delete(X.length).insert("	");this.quill.updateContents(ae,x.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(X.index+1,x.default.sources.SILENT)}},"list empty enter":{key:W.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(X,ae){this.quill.format("list",!1,x.default.sources.USER),ae.format.indent&&this.quill.format("indent",!1,x.default.sources.USER)}},"checklist enter":{key:W.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(X){var ae=this.quill.getLine(X.index),ie=o(ae,2),ce=ie[0],ge=ie[1],Ce=(0,d.default)({},ce.formats(),{list:"checked"}),Ee=new m.default().retain(X.index).insert(`
`,Ce).retain(ce.length()-ge-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ee,x.default.sources.USER),this.quill.setSelection(X.index+1,x.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:W.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(X,ae){var ie=this.quill.getLine(X.index),ce=o(ie,2),ge=ce[0],Ce=ce[1],Ee=new m.default().retain(X.index).insert(`
`,ae.format).retain(ge.length()-Ce-1).retain(1,{header:null});this.quill.updateContents(Ee,x.default.sources.USER),this.quill.setSelection(X.index+1,x.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(X,ae){var ie=ae.prefix.length,ce=this.quill.getLine(X.index),ge=o(ce,2),Ce=ge[0],Ee=ge[1];if(Ee>ie)return!0;var G=void 0;switch(ae.prefix.trim()){case"[]":case"[ ]":G="unchecked";break;case"[x]":G="checked";break;case"-":case"*":G="bullet";break;default:G="ordered"}this.quill.insertText(X.index," ",x.default.sources.USER),this.quill.history.cutoff();var de=new m.default().retain(X.index-Ee).delete(ie+1).retain(Ce.length()-2-Ee).retain(1,{list:G});this.quill.updateContents(de,x.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(X.index-ie,x.default.sources.SILENT)}},"code exit":{key:W.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(X){var ae=this.quill.getLine(X.index),ie=o(ae,2),ce=ie[0],ge=ie[1],Ce=new m.default().retain(X.index+ce.length()-ge-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ce,x.default.sources.USER)}},"embed left":Y(W.keys.LEFT,!1),"embed left shift":Y(W.keys.LEFT,!0),"embed right":Y(W.keys.RIGHT,!1),"embed right shift":Y(W.keys.RIGHT,!0)}};function Y(J,X){var ae,ie=J===W.keys.LEFT?"prefix":"suffix";return ae={key:J,shiftKey:X,altKey:null},O(ae,ie,/^$/),O(ae,"handler",function(ge){var Ce=ge.index;J===W.keys.RIGHT&&(Ce+=ge.length+1);var Ee=this.quill.getLeaf(Ce),G=o(Ee,1),de=G[0];return de instanceof b.default.Embed?(J===W.keys.LEFT?X?this.quill.setSelection(ge.index-1,ge.length+1,x.default.sources.USER):this.quill.setSelection(ge.index-1,x.default.sources.USER):X?this.quill.setSelection(ge.index,ge.length+1,x.default.sources.USER):this.quill.setSelection(ge.index+ge.length+1,x.default.sources.USER),!1):!0}),ae}function z(J,X){if(!(J.index===0||this.quill.getLength()<=1)){var ae=this.quill.getLine(J.index),ie=o(ae,1),ce=ie[0],ge={};if(X.offset===0){var Ce=this.quill.getLine(J.index-1),Ee=o(Ce,1),G=Ee[0];if(G!=null&&G.length()>1){var de=ce.formats(),ye=this.quill.getFormat(J.index-1,1);ge=y.default.attributes.diff(de,ye)||{}}}var le=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(X.prefix)?2:1;this.quill.deleteText(J.index-le,le,x.default.sources.USER),Object.keys(ge).length>0&&this.quill.formatLine(J.index-le,le,ge,x.default.sources.USER),this.quill.focus()}}function j(J,X){var ae=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(X.suffix)?2:1;if(!(J.index>=this.quill.getLength()-ae)){var ie={},ce=0,ge=this.quill.getLine(J.index),Ce=o(ge,1),Ee=Ce[0];if(X.offset>=Ee.length()-1){var G=this.quill.getLine(J.index+1),de=o(G,1),ye=de[0];if(ye){var le=Ee.formats(),ne=this.quill.getFormat(J.index,1);ie=y.default.attributes.diff(le,ne)||{},ce=ye.length()}}this.quill.deleteText(J.index,ae,x.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(J.index+ce-1,ae,ie,x.default.sources.USER)}}function M(J){var X=this.quill.getLines(J),ae={};if(X.length>1){var ie=X[0].formats(),ce=X[X.length-1].formats();ae=y.default.attributes.diff(ce,ie)||{}}this.quill.deleteText(J,x.default.sources.USER),Object.keys(ae).length>0&&this.quill.formatLine(J.index,1,ae,x.default.sources.USER),this.quill.setSelection(J.index,x.default.sources.SILENT),this.quill.focus()}function q(J,X){var ae=this;J.length>0&&this.quill.scroll.deleteAt(J.index,J.length);var ie=Object.keys(X.format).reduce(function(ce,ge){return b.default.query(ge,b.default.Scope.BLOCK)&&!Array.isArray(X.format[ge])&&(ce[ge]=X.format[ge]),ce},{});this.quill.insertText(J.index,`
`,ie,x.default.sources.USER),this.quill.setSelection(J.index+1,x.default.sources.SILENT),this.quill.focus(),Object.keys(X.format).forEach(function(ce){ie[ce]==null&&(Array.isArray(X.format[ce])||ce!=="link"&&ae.quill.format(ce,X.format[ce],x.default.sources.USER))})}function H(J){return{key:W.keys.TAB,shiftKey:!J,format:{"code-block":!0},handler:function(ae){var ie=b.default.query("code-block"),ce=ae.index,ge=ae.length,Ce=this.quill.scroll.descendant(ie,ce),Ee=o(Ce,2),G=Ee[0],de=Ee[1];if(G!=null){var ye=this.quill.getIndex(G),le=G.newlineIndex(de,!0)+1,ne=G.newlineIndex(ye+de+ge),fe=G.domNode.textContent.slice(le,ne).split(`
`);de=0,fe.forEach(function(Ne,Ae){J?(G.insertAt(le+de,ie.TAB),de+=ie.TAB.length,Ae===0?ce+=ie.TAB.length:ge+=ie.TAB.length):Ne.startsWith(ie.TAB)&&(G.deleteAt(le+de,ie.TAB.length),de-=ie.TAB.length,Ae===0?ce-=ie.TAB.length:ge-=ie.TAB.length),de+=Ne.length+1}),this.quill.update(x.default.sources.USER),this.quill.setSelection(ce,ge,x.default.sources.SILENT)}}}}function K(J){return{key:J[0].toUpperCase(),shortKey:!0,handler:function(ae,ie){this.quill.format(J,!ie.format[J],x.default.sources.USER)}}}function Z(J){if(typeof J=="string"||typeof J=="number")return Z({key:J});if((typeof J>"u"?"undefined":a(J))==="object"&&(J=(0,l.default)(J,!1)),typeof J.key=="string")if(W.keys[J.key.toUpperCase()]!=null)J.key=W.keys[J.key.toUpperCase()];else if(J.key.length===1)J.key=J.key.toUpperCase().charCodeAt(0);else return null;return J.shortKey&&(J[B]=J.shortKey,delete J.shortKey),J}r.default=W,r.SHORTKEY=B},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function y(v,b){var w=[],x=!0,S=!1,E=void 0;try{for(var A=v[Symbol.iterator](),k;!(x=(k=A.next()).done)&&(w.push(k.value),!(b&&w.length===b));x=!0);}catch(T){S=!0,E=T}finally{try{!x&&A.return&&A.return()}finally{if(S)throw E}}return w}return function(v,b){if(Array.isArray(v))return v;if(Symbol.iterator in Object(v))return y(v,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function y(v,b,w){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,b);if(x===void 0){var S=Object.getPrototypeOf(v);return S===null?void 0:y(S,b,w)}else{if("value"in x)return x.value;var E=x.get;return E===void 0?void 0:E.call(w)}},s=function(){function y(v,b){for(var w=0;w<b.length;w++){var x=b[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,b,w){return b&&y(v.prototype,b),w&&y(v,w),v}}(),u=i(0),l=f(u),h=i(7),c=f(h);function f(y){return y&&y.__esModule?y:{default:y}}function d(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function p(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var g=function(y){m(v,y),s(v,null,[{key:"value",value:function(){}}]);function v(b,w){d(this,v);var x=p(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return x.selection=w,x.textNode=document.createTextNode(v.CONTENTS),x.domNode.appendChild(x.textNode),x._length=0,x}return s(v,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(w,x){if(this._length!==0)return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,w,x);for(var S=this,E=0;S!=null&&S.statics.scope!==l.default.Scope.BLOCK_BLOT;)E+=S.offset(S.parent),S=S.parent;S!=null&&(this._length=v.CONTENTS.length,S.optimize(),S.formatAt(E,v.CONTENTS.length,w,x),this._length=0)}},{key:"index",value:function(w,x){return w===this.textNode?0:o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,w,x)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var w=this.textNode,x=this.selection.getNativeRange(),S=void 0,E=void 0,A=void 0;if(x!=null&&x.start.node===w&&x.end.node===w){var k=[w,x.start.offset,x.end.offset];S=k[0],E=k[1],A=k[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==v.CONTENTS){var T=this.textNode.data.split(v.CONTENTS).join("");this.next instanceof c.default?(S=this.next.domNode,this.next.insertAt(0,T),this.textNode.data=v.CONTENTS):(this.textNode.data=T,this.parent.insertBefore(l.default.create(this.textNode),this),this.textNode=document.createTextNode(v.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),E!=null){var O=[E,A].map(function(I){return Math.max(0,Math.min(S.data.length,I-1))}),F=a(O,2);return E=F[0],A=F[1],{startNode:S,startOffset:E,endNode:S,endOffset:A}}}}},{key:"update",value:function(w,x){var S=this;if(w.some(function(A){return A.type==="characterData"&&A.target===S.textNode})){var E=this.restore();E&&(x.range=E)}}},{key:"value",value:function(){return""}}]),v}(l.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=l(a),s=i(4),u=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function h(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return h(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(o.default.Container);d.allowedChildren=[u.default,s.BlockEmbed,d],r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var a=function(){function g(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&g(y.prototype,v),b&&g(y,b),y}}(),o=function g(y,v,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,v);if(w===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:g(x,v,b)}else{if("value"in w)return w.value;var S=w.get;return S===void 0?void 0:S.call(b)}},s=i(0),u=l(s);function l(g){return g&&g.__esModule?g:{default:g}}function h(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function c(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function f(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var d=function(g){f(y,g);function y(){return h(this,y),c(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"value",value:function(b){var w=o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,b);return w.startsWith("rgb(")?(w=w.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+w.split(",").map(function(x){return("00"+parseInt(x).toString(16)).slice(-2)}).join("")):w}}]),y}(u.default.Attributor.Style),p=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),m=new d("color","color",{scope:u.default.Scope.INLINE});r.ColorAttributor=d,r.ColorClass=p,r.ColorStyle=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var a=function(){function m(g,y){for(var v=0;v<y.length;v++){var b=y[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,y,v){return y&&m(g.prototype,y),v&&m(g,v),g}}(),o=function m(g,y,v){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,y);if(b===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:m(w,y,v)}else{if("value"in b)return b.value;var x=b.get;return x===void 0?void 0:x.call(v)}},s=i(6),u=l(s);function l(m){return m&&m.__esModule?m:{default:m}}function h(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function c(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var d=function(m){f(g,m);function g(){return h(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"format",value:function(v,b){if(v!==this.statics.blotName||!b)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,v,b);b=this.constructor.sanitize(b),this.domNode.setAttribute("href",b)}}],[{key:"create",value:function(v){var b=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v);return v=this.sanitize(v),b.setAttribute("href",v),b.setAttribute("rel","noopener noreferrer"),b.setAttribute("target","_blank"),b}},{key:"formats",value:function(v){return v.getAttribute("href")}},{key:"sanitize",value:function(v){return p(v,this.PROTOCOL_WHITELIST)?v:this.SANITIZED_URL}}]),g}(u.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function p(m,g){var y=document.createElement("a");y.href=m;var v=y.href.slice(0,y.href.indexOf(":"));return g.indexOf(v)>-1}r.default=d,r.sanitize=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o=function(){function g(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&g(y.prototype,v),b&&g(y,b),y}}(),s=i(23),u=c(s),l=i(107),h=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function f(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}var d=0;function p(g,y){g.setAttribute(y,g.getAttribute(y)!=="true")}var m=function(){function g(y){var v=this;f(this,g),this.select=y,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){v.togglePicker()}),this.label.addEventListener("keydown",function(b){switch(b.keyCode){case u.default.keys.ENTER:v.togglePicker();break;case u.default.keys.ESCAPE:v.escape(),b.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),p(this.label,"aria-expanded"),p(this.options,"aria-hidden")}},{key:"buildItem",value:function(v){var b=this,w=document.createElement("span");return w.tabIndex="0",w.setAttribute("role","button"),w.classList.add("ql-picker-item"),v.hasAttribute("value")&&w.setAttribute("data-value",v.getAttribute("value")),v.textContent&&w.setAttribute("data-label",v.textContent),w.addEventListener("click",function(){b.selectItem(w,!0)}),w.addEventListener("keydown",function(x){switch(x.keyCode){case u.default.keys.ENTER:b.selectItem(w,!0),x.preventDefault();break;case u.default.keys.ESCAPE:b.escape(),x.preventDefault();break}}),w}},{key:"buildLabel",value:function(){var v=document.createElement("span");return v.classList.add("ql-picker-label"),v.innerHTML=h.default,v.tabIndex="0",v.setAttribute("role","button"),v.setAttribute("aria-expanded","false"),this.container.appendChild(v),v}},{key:"buildOptions",value:function(){var v=this,b=document.createElement("span");b.classList.add("ql-picker-options"),b.setAttribute("aria-hidden","true"),b.tabIndex="-1",b.id="ql-picker-options-"+d,d+=1,this.label.setAttribute("aria-controls",b.id),this.options=b,[].slice.call(this.select.options).forEach(function(w){var x=v.buildItem(w);b.appendChild(x),w.selected===!0&&v.selectItem(x)}),this.container.appendChild(b)}},{key:"buildPicker",value:function(){var v=this;[].slice.call(this.select.attributes).forEach(function(b){v.container.setAttribute(b.name,b.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var v=this;this.close(),setTimeout(function(){return v.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(v){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=this.container.querySelector(".ql-selected");if(v!==w&&(w!=null&&w.classList.remove("ql-selected"),v!=null&&(v.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(v.parentNode.children,v),v.hasAttribute("data-value")?this.label.setAttribute("data-value",v.getAttribute("data-value")):this.label.removeAttribute("data-value"),v.hasAttribute("data-label")?this.label.setAttribute("data-label",v.getAttribute("data-label")):this.label.removeAttribute("data-label"),b))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var x=document.createEvent("Event");x.initEvent("change",!0,!0),this.select.dispatchEvent(x)}this.close()}}},{key:"update",value:function(){var v=void 0;if(this.select.selectedIndex>-1){var b=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];v=this.select.options[this.select.selectedIndex],this.selectItem(b)}else this.selectItem(null);var w=v!=null&&v!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",w)}}]),g}();r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=U(a),s=i(5),u=U(s),l=i(4),h=U(l),c=i(16),f=U(c),d=i(25),p=U(d),m=i(24),g=U(m),y=i(35),v=U(y),b=i(6),w=U(b),x=i(22),S=U(x),E=i(7),A=U(E),k=i(55),T=U(k),O=i(42),F=U(O),I=i(23),R=U(I);function U(B){return B&&B.__esModule?B:{default:B}}u.default.register({"blots/block":h.default,"blots/block/embed":l.BlockEmbed,"blots/break":f.default,"blots/container":p.default,"blots/cursor":g.default,"blots/embed":v.default,"blots/inline":w.default,"blots/scroll":S.default,"blots/text":A.default,"modules/clipboard":T.default,"modules/history":F.default,"modules/keyboard":R.default}),o.default.register(h.default,f.default,g.default,w.default,S.default,A.default),r.default=u.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=function(){function s(u){this.domNode=u,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(s.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),s.create=function(u){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var l;return Array.isArray(this.tagName)?(typeof u=="string"&&(u=u.toUpperCase(),parseInt(u).toString()===u&&(u=parseInt(u))),typeof u=="number"?l=document.createElement(this.tagName[u-1]):this.tagName.indexOf(u)>-1?l=document.createElement(u):l=document.createElement(this.tagName[0])):l=document.createElement(this.tagName),this.className&&l.classList.add(this.className),l},s.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},s.prototype.clone=function(){var u=this.domNode.cloneNode(!1);return a.create(u)},s.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},s.prototype.deleteAt=function(u,l){var h=this.isolate(u,l);h.remove()},s.prototype.formatAt=function(u,l,h,c){var f=this.isolate(u,l);if(a.query(h,a.Scope.BLOT)!=null&&c)f.wrap(h,c);else if(a.query(h,a.Scope.ATTRIBUTE)!=null){var d=a.create(this.statics.scope);f.wrap(d),d.format(h,c)}},s.prototype.insertAt=function(u,l,h){var c=h==null?a.create("text",l):a.create(l,h),f=this.split(u);this.parent.insertBefore(c,f)},s.prototype.insertInto=function(u,l){l===void 0&&(l=null),this.parent!=null&&this.parent.children.remove(this);var h=null;u.children.insertBefore(this,l),l!=null&&(h=l.domNode),(this.domNode.parentNode!=u.domNode||this.domNode.nextSibling!=h)&&u.domNode.insertBefore(this.domNode,h),this.parent=u,this.attach()},s.prototype.isolate=function(u,l){var h=this.split(u);return h.split(l),h},s.prototype.length=function(){return 1},s.prototype.offset=function(u){return u===void 0&&(u=this.parent),this.parent==null||this==u?0:this.parent.children.offset(this)+this.parent.offset(u)},s.prototype.optimize=function(u){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},s.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},s.prototype.replace=function(u){u.parent!=null&&(u.parent.insertBefore(this,u.next),u.remove())},s.prototype.replaceWith=function(u,l){var h=typeof u=="string"?a.create(u,l):u;return h.replace(this),h},s.prototype.split=function(u,l){return u===0?this:this.next},s.prototype.update=function(u,l){},s.prototype.wrap=function(u,l){var h=typeof u=="string"?a.create(u,l):u;return this.parent!=null&&this.parent.insertBefore(h,this.next),h.appendChild(this),h},s.blotName="abstract",s}();r.default=o},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(12),o=i(32),s=i(33),u=i(1),l=function(){function h(c){this.attributes={},this.domNode=c,this.build()}return h.prototype.attribute=function(c,f){f?c.add(this.domNode,f)&&(c.value(this.domNode)!=null?this.attributes[c.attrName]=c:delete this.attributes[c.attrName]):(c.remove(this.domNode),delete this.attributes[c.attrName])},h.prototype.build=function(){var c=this;this.attributes={};var f=a.default.keys(this.domNode),d=o.default.keys(this.domNode),p=s.default.keys(this.domNode);f.concat(d).concat(p).forEach(function(m){var g=u.query(m,u.Scope.ATTRIBUTE);g instanceof a.default&&(c.attributes[g.attrName]=g)})},h.prototype.copy=function(c){var f=this;Object.keys(this.attributes).forEach(function(d){var p=f.attributes[d].value(f.domNode);c.format(d,p)})},h.prototype.move=function(c){var f=this;this.copy(c),Object.keys(this.attributes).forEach(function(d){f.attributes[d].remove(f.domNode)}),this.attributes={}},h.prototype.values=function(){var c=this;return Object.keys(this.attributes).reduce(function(f,d){return f[d]=c.attributes[d].value(c.domNode),f},{})},h}();r.default=l},function(t,r,i){var a=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var f in c)c.hasOwnProperty(f)&&(h[f]=c[f])};return function(h,c){l(h,c);function f(){this.constructor=h}h.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function s(l,h){var c=l.getAttribute("class")||"";return c.split(/\s+/).filter(function(f){return f.indexOf(h+"-")===0})}var u=function(l){a(h,l);function h(){return l!==null&&l.apply(this,arguments)||this}return h.keys=function(c){return(c.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},h.prototype.add=function(c,f){return this.canAdd(c,f)?(this.remove(c),c.classList.add(this.keyName+"-"+f),!0):!1},h.prototype.remove=function(c){var f=s(c,this.keyName);f.forEach(function(d){c.classList.remove(d)}),c.classList.length===0&&c.removeAttribute("class")},h.prototype.value=function(c){var f=s(c,this.keyName)[0]||"",d=f.slice(this.keyName.length+1);return this.canAdd(c,d)?d:""},h}(o.default);r.default=u},function(t,r,i){var a=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var f in c)c.hasOwnProperty(f)&&(h[f]=c[f])};return function(h,c){l(h,c);function f(){this.constructor=h}h.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function s(l){var h=l.split("-"),c=h.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return h[0]+c}var u=function(l){a(h,l);function h(){return l!==null&&l.apply(this,arguments)||this}return h.keys=function(c){return(c.getAttribute("style")||"").split(";").map(function(f){var d=f.split(":");return d[0].trim()})},h.prototype.add=function(c,f){return this.canAdd(c,f)?(c.style[s(this.keyName)]=f,!0):!1},h.prototype.remove=function(c){c.style[s(this.keyName)]="",c.getAttribute("style")||c.removeAttribute("style")},h.prototype.value=function(c){var f=c.style[s(this.keyName)];return this.canAdd(c,f)?f:""},h}(o.default);r.default=u},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function u(l,h){for(var c=0;c<h.length;c++){var f=h[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,h,c){return h&&u(l.prototype,h),c&&u(l,c),l}}();function o(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function(){function u(l,h){o(this,u),this.quill=l,this.options=h,this.modules={}}return a(u,[{key:"init",value:function(){var h=this;Object.keys(this.options.modules).forEach(function(c){h.modules[c]==null&&h.addModule(c)})}},{key:"addModule",value:function(h){var c=this.quill.constructor.import("modules/"+h);return this.modules[h]=new c(this.quill,this.options.modules[h]||{}),this.modules[h]}}]),u}();s.DEFAULTS={modules:{}},s.themes={default:s},r.default=s},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function y(v,b){for(var w=0;w<b.length;w++){var x=b[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,b,w){return b&&y(v.prototype,b),w&&y(v,w),v}}(),o=function y(v,b,w){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,b);if(x===void 0){var S=Object.getPrototypeOf(v);return S===null?void 0:y(S,b,w)}else{if("value"in x)return x.value;var E=x.get;return E===void 0?void 0:E.call(w)}},s=i(0),u=c(s),l=i(7),h=c(l);function c(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function p(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var m="\uFEFF",g=function(y){p(v,y);function v(b){f(this,v);var w=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return w.contentNode=document.createElement("span"),w.contentNode.setAttribute("contenteditable",!1),[].slice.call(w.domNode.childNodes).forEach(function(x){w.contentNode.appendChild(x)}),w.leftGuard=document.createTextNode(m),w.rightGuard=document.createTextNode(m),w.domNode.appendChild(w.leftGuard),w.domNode.appendChild(w.contentNode),w.domNode.appendChild(w.rightGuard),w}return a(v,[{key:"index",value:function(w,x){return w===this.leftGuard?0:w===this.rightGuard?1:o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,w,x)}},{key:"restore",value:function(w){var x=void 0,S=void 0,E=w.data.split(m).join("");if(w===this.leftGuard)if(this.prev instanceof h.default){var A=this.prev.length();this.prev.insertAt(A,E),x={startNode:this.prev.domNode,startOffset:A+E.length}}else S=document.createTextNode(E),this.parent.insertBefore(u.default.create(S),this),x={startNode:S,startOffset:E.length};else w===this.rightGuard&&(this.next instanceof h.default?(this.next.insertAt(0,E),x={startNode:this.next.domNode,startOffset:E.length}):(S=document.createTextNode(E),this.parent.insertBefore(u.default.create(S),this.next),x={startNode:S,startOffset:E.length}));return w.data=m,x}},{key:"update",value:function(w,x){var S=this;w.forEach(function(E){if(E.type==="characterData"&&(E.target===S.leftGuard||E.target===S.rightGuard)){var A=S.restore(E.target);A&&(x.range=A)}})}}]),v}(u.default.Embed);r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var a=i(0),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}var u={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},l=new o.default.Attributor.Attribute("align","align",u),h=new o.default.Attributor.Class("align","ql-align",u),c=new o.default.Attributor.Style("align","text-align",u);r.AlignAttribute=l,r.AlignClass=h,r.AlignStyle=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var a=i(0),o=u(a),s=i(26);function u(c){return c&&c.__esModule?c:{default:c}}var l=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),h=new s.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=l,r.BackgroundStyle=h},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var a=i(0),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}var u={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},l=new o.default.Attributor.Attribute("direction","dir",u),h=new o.default.Attributor.Class("direction","ql-direction",u),c=new o.default.Attributor.Style("direction","direction",u);r.DirectionAttribute=l,r.DirectionClass=h,r.DirectionStyle=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var a=function(){function y(v,b){for(var w=0;w<b.length;w++){var x=b[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,b,w){return b&&y(v.prototype,b),w&&y(v,w),v}}(),o=function y(v,b,w){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,b);if(x===void 0){var S=Object.getPrototypeOf(v);return S===null?void 0:y(S,b,w)}else{if("value"in x)return x.value;var E=x.get;return E===void 0?void 0:E.call(w)}},s=i(0),u=l(s);function l(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function c(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var d={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},p=new u.default.Attributor.Class("font","ql-font",d),m=function(y){f(v,y);function v(){return h(this,v),c(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"value",value:function(w){return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,w).replace(/["']/g,"")}}]),v}(u.default.Attributor.Style),g=new m("font","font-family",d);r.FontStyle=g,r.FontClass=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var a=i(0),o=s(a);function s(h){return h&&h.__esModule?h:{default:h}}var u=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),l=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=u,r.SizeStyle=l},function(t,r,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var a=function(){function b(w,x){for(var S=0;S<x.length;S++){var E=x[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,x,S){return x&&b(w.prototype,x),S&&b(w,S),w}}(),o=i(0),s=f(o),u=i(5),l=f(u),h=i(9),c=f(h);function f(b){return b&&b.__esModule?b:{default:b}}function d(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function p(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function m(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var g=function(b){m(w,b);function w(x,S){d(this,w);var E=p(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,x,S));return E.lastRecorded=0,E.ignoreChange=!1,E.clear(),E.quill.on(l.default.events.EDITOR_CHANGE,function(A,k,T,O){A!==l.default.events.TEXT_CHANGE||E.ignoreChange||(!E.options.userOnly||O===l.default.sources.USER?E.record(k,T):E.transform(k))}),E.quill.keyboard.addBinding({key:"Z",shortKey:!0},E.undo.bind(E)),E.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},E.redo.bind(E)),/Win/i.test(navigator.platform)&&E.quill.keyboard.addBinding({key:"Y",shortKey:!0},E.redo.bind(E)),E}return a(w,[{key:"change",value:function(S,E){if(this.stack[S].length!==0){var A=this.stack[S].pop();this.stack[E].push(A),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(A[S],l.default.sources.USER),this.ignoreChange=!1;var k=v(A[S]);this.quill.setSelection(k)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(S,E){if(S.ops.length!==0){this.stack.redo=[];var A=this.quill.getContents().diff(E),k=Date.now();if(this.lastRecorded+this.options.delay>k&&this.stack.undo.length>0){var T=this.stack.undo.pop();A=A.compose(T.undo),S=T.redo.compose(S)}else this.lastRecorded=k;this.stack.undo.push({redo:S,undo:A}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(S){this.stack.undo.forEach(function(E){E.undo=S.transform(E.undo,!0),E.redo=S.transform(E.redo,!0)}),this.stack.redo.forEach(function(E){E.undo=S.transform(E.undo,!0),E.redo=S.transform(E.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),w}(c.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function y(b){var w=b.ops[b.ops.length-1];return w==null?!1:w.insert!=null?typeof w.insert=="string"&&w.insert.endsWith(`
`):w.attributes!=null?Object.keys(w.attributes).some(function(x){return s.default.query(x,s.default.Scope.BLOCK)!=null}):!1}function v(b){var w=b.reduce(function(S,E){return S+=E.delete||0,S},0),x=b.length()-w;return y(b)&&(x-=1),x}r.default=g,r.getLastChangeIndex=v},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var a=function(){function q(H,K){for(var Z=0;Z<K.length;Z++){var J=K[Z];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(H,J.key,J)}}return function(H,K,Z){return K&&q(H.prototype,K),Z&&q(H,Z),H}}(),o=function q(H,K,Z){H===null&&(H=Function.prototype);var J=Object.getOwnPropertyDescriptor(H,K);if(J===void 0){var X=Object.getPrototypeOf(H);return X===null?void 0:q(X,K,Z)}else{if("value"in J)return J.value;var ae=J.get;return ae===void 0?void 0:ae.call(Z)}},s=i(3),u=k(s),l=i(2),h=k(l),c=i(8),f=k(c),d=i(23),p=k(d),m=i(34),g=k(m),y=i(59),v=k(y),b=i(60),w=k(b),x=i(28),S=k(x),E=i(61),A=k(E);function k(q){return q&&q.__esModule?q:{default:q}}function T(q,H){if(!(q instanceof H))throw new TypeError("Cannot call a class as a function")}function O(q,H){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:q}function F(q,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);q.prototype=Object.create(H&&H.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(q,H):q.__proto__=H)}var I=[!1,"center","right","justify"],R=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],U=[!1,"serif","monospace"],B=["1","2","3",!1],W=["small",!1,"large","huge"],Y=function(q){F(H,q);function H(K,Z){T(this,H);var J=O(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,K,Z)),X=function ae(ie){if(!document.body.contains(K.root))return document.body.removeEventListener("click",ae);J.tooltip!=null&&!J.tooltip.root.contains(ie.target)&&document.activeElement!==J.tooltip.textbox&&!J.quill.hasFocus()&&J.tooltip.hide(),J.pickers!=null&&J.pickers.forEach(function(ce){ce.container.contains(ie.target)||ce.close()})};return K.emitter.listenDOM("click",document.body,X),J}return a(H,[{key:"addModule",value:function(Z){var J=o(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"addModule",this).call(this,Z);return Z==="toolbar"&&this.extendToolbar(J),J}},{key:"buildButtons",value:function(Z,J){Z.forEach(function(X){var ae=X.getAttribute("class")||"";ae.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),J[ie]!=null))if(ie==="direction")X.innerHTML=J[ie][""]+J[ie].rtl;else if(typeof J[ie]=="string")X.innerHTML=J[ie];else{var ce=X.value||"";ce!=null&&J[ie][ce]&&(X.innerHTML=J[ie][ce])}})})}},{key:"buildPickers",value:function(Z,J){var X=this;this.pickers=Z.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&M(ie,I),new w.default(ie,J.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var ce=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&M(ie,R,ce==="background"?"#ffffff":"#000000"),new v.default(ie,J[ce])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?M(ie,U):ie.classList.contains("ql-header")?M(ie,B):ie.classList.contains("ql-size")&&M(ie,W)),new S.default(ie)});var ae=function(){X.pickers.forEach(function(ce){ce.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,ae)}}]),H}(g.default);Y.DEFAULTS=(0,u.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var H=this,K=this.container.querySelector("input.ql-image[type=file]");K==null&&(K=document.createElement("input"),K.setAttribute("type","file"),K.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),K.classList.add("ql-image"),K.addEventListener("change",function(){if(K.files!=null&&K.files[0]!=null){var Z=new FileReader;Z.onload=function(J){var X=H.quill.getSelection(!0);H.quill.updateContents(new h.default().retain(X.index).delete(X.length).insert({image:J.target.result}),f.default.sources.USER),H.quill.setSelection(X.index+1,f.default.sources.SILENT),K.value=""},Z.readAsDataURL(K.files[0])}}),this.container.appendChild(K)),K.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var z=function(q){F(H,q);function H(K,Z){T(this,H);var J=O(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,K,Z));return J.textbox=J.root.querySelector('input[type="text"]'),J.listen(),J}return a(H,[{key:"listen",value:function(){var Z=this;this.textbox.addEventListener("keydown",function(J){p.default.match(J,"enter")?(Z.save(),J.preventDefault()):p.default.match(J,"escape")&&(Z.cancel(),J.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),J!=null?this.textbox.value=J:Z!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Z)||""),this.root.setAttribute("data-mode",Z)}},{key:"restoreFocus",value:function(){var Z=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Z}},{key:"save",value:function(){var Z=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var J=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Z,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Z,f.default.sources.USER)),this.quill.root.scrollTop=J;break}case"video":Z=j(Z);case"formula":{if(!Z)break;var X=this.quill.getSelection(!0);if(X!=null){var ae=X.index+X.length;this.quill.insertEmbed(ae,this.root.getAttribute("data-mode"),Z,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ae+1," ",f.default.sources.USER),this.quill.setSelection(ae+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),H}(A.default);function j(q){var H=q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return H?(H[1]||"https")+"://www.youtube.com/embed/"+H[2]+"?showinfo=0":(H=q.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(H[1]||"https")+"://player.vimeo.com/video/"+H[2]+"/":q}function M(q,H){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;H.forEach(function(Z){var J=document.createElement("option");Z===K?J.setAttribute("selected","selected"):J.setAttribute("value",Z),q.appendChild(J)})}r.BaseTooltip=z,r.default=Y},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];this.insertBefore(s[0],null),s.length>1&&this.append.apply(this,s.slice(1))},o.prototype.contains=function(s){for(var u,l=this.iterator();u=l();)if(u===s)return!0;return!1},o.prototype.insertBefore=function(s,u){s&&(s.next=u,u!=null?(s.prev=u.prev,u.prev!=null&&(u.prev.next=s),u.prev=s,u===this.head&&(this.head=s)):this.tail!=null?(this.tail.next=s,s.prev=this.tail,this.tail=s):(s.prev=null,this.head=this.tail=s),this.length+=1)},o.prototype.offset=function(s){for(var u=0,l=this.head;l!=null;){if(l===s)return u;u+=l.length(),l=l.next}return-1},o.prototype.remove=function(s){this.contains(s)&&(s.prev!=null&&(s.prev.next=s.next),s.next!=null&&(s.next.prev=s.prev),s===this.head&&(this.head=s.next),s===this.tail&&(this.tail=s.prev),this.length-=1)},o.prototype.iterator=function(s){return s===void 0&&(s=this.head),function(){var u=s;return s!=null&&(s=s.next),u}},o.prototype.find=function(s,u){u===void 0&&(u=!1);for(var l,h=this.iterator();l=h();){var c=l.length();if(s<c||u&&s===c&&(l.next==null||l.next.length()!==0))return[l,s];s-=c}return[null,0]},o.prototype.forEach=function(s){for(var u,l=this.iterator();u=l();)s(u)},o.prototype.forEachAt=function(s,u,l){if(!(u<=0))for(var h=this.find(s),c=h[0],f=h[1],d,p=s-f,m=this.iterator(c);(d=m())&&p<s+u;){var g=d.length();s>p?l(d,s-p,Math.min(u,p+g-s)):l(d,0,Math.min(g,s+u-p)),p+=g}},o.prototype.map=function(s){return this.reduce(function(u,l){return u.push(s(l)),u},[])},o.prototype.reduce=function(s,u){for(var l,h=this.iterator();l=h();)u=s(u,l);return u},o}();r.default=a},function(t,r,i){var a=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){c(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),s=i(1),u={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=100,h=function(c){a(f,c);function f(d){var p=c.call(this,d)||this;return p.scroll=p,p.observer=new MutationObserver(function(m){p.update(m)}),p.observer.observe(p.domNode,u),p.attach(),p}return f.prototype.detach=function(){c.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(d,p){this.update(),d===0&&p===this.length()?this.children.forEach(function(m){m.remove()}):c.prototype.deleteAt.call(this,d,p)},f.prototype.formatAt=function(d,p,m,g){this.update(),c.prototype.formatAt.call(this,d,p,m,g)},f.prototype.insertAt=function(d,p,m){this.update(),c.prototype.insertAt.call(this,d,p,m)},f.prototype.optimize=function(d,p){var m=this;d===void 0&&(d=[]),p===void 0&&(p={}),c.prototype.optimize.call(this,p);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)d.push(g.pop());for(var y=function(x,S){S===void 0&&(S=!0),!(x==null||x===m)&&x.domNode.parentNode!=null&&(x.domNode[s.DATA_KEY].mutations==null&&(x.domNode[s.DATA_KEY].mutations=[]),S&&y(x.parent))},v=function(x){x.domNode[s.DATA_KEY]==null||x.domNode[s.DATA_KEY].mutations==null||(x instanceof o.default&&x.children.forEach(v),x.optimize(p))},b=d,w=0;b.length>0;w+=1){if(w>=l)throw new Error("[Parchment] Maximum optimize iterations reached");for(b.forEach(function(x){var S=s.find(x.target,!0);S!=null&&(S.domNode===x.target&&(x.type==="childList"?(y(s.find(x.previousSibling,!1)),[].forEach.call(x.addedNodes,function(E){var A=s.find(E,!1);y(A,!1),A instanceof o.default&&A.children.forEach(function(k){y(k,!1)})})):x.type==="attributes"&&y(S.prev)),y(S))}),this.children.forEach(v),b=[].slice.call(this.observer.takeRecords()),g=b.slice();g.length>0;)d.push(g.pop())}},f.prototype.update=function(d,p){var m=this;p===void 0&&(p={}),d=d||this.observer.takeRecords(),d.map(function(g){var y=s.find(g.target,!0);return y==null?null:y.domNode[s.DATA_KEY].mutations==null?(y.domNode[s.DATA_KEY].mutations=[g],y):(y.domNode[s.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===m||g.domNode[s.DATA_KEY]==null||g.update(g.domNode[s.DATA_KEY].mutations||[],p)}),this.domNode[s.DATA_KEY].mutations!=null&&c.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,p),this.optimize(d,p)},f.blotName="scroll",f.defaultChild="block",f.scope=s.Scope.BLOCK_BLOT,f.tagName="DIV",f}(o.default);r.default=h},function(t,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])};return function(c,f){h(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),s=i(1);function u(h,c){if(Object.keys(h).length!==Object.keys(c).length)return!1;for(var f in h)if(h[f]!==c[f])return!1;return!0}var l=function(h){a(c,h);function c(){return h!==null&&h.apply(this,arguments)||this}return c.formats=function(f){if(f.tagName!==c.tagName)return h.formats.call(this,f)},c.prototype.format=function(f,d){var p=this;f===this.statics.blotName&&!d?(this.children.forEach(function(m){m instanceof o.default||(m=m.wrap(c.blotName,!0)),p.attributes.copy(m)}),this.unwrap()):h.prototype.format.call(this,f,d)},c.prototype.formatAt=function(f,d,p,m){if(this.formats()[p]!=null||s.query(p,s.Scope.ATTRIBUTE)){var g=this.isolate(f,d);g.format(p,m)}else h.prototype.formatAt.call(this,f,d,p,m)},c.prototype.optimize=function(f){h.prototype.optimize.call(this,f);var d=this.formats();if(Object.keys(d).length===0)return this.unwrap();var p=this.next;p instanceof c&&p.prev===this&&u(d,p.formats())&&(p.moveChildren(this),p.remove())},c.blotName="inline",c.scope=s.Scope.INLINE_BLOT,c.tagName="SPAN",c}(o.default);r.default=l},function(t,r,i){var a=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var f in c)c.hasOwnProperty(f)&&(h[f]=c[f])};return function(h,c){l(h,c);function f(){this.constructor=h}h.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),s=i(1),u=function(l){a(h,l);function h(){return l!==null&&l.apply(this,arguments)||this}return h.formats=function(c){var f=s.query(h.blotName).tagName;if(c.tagName!==f)return l.formats.call(this,c)},h.prototype.format=function(c,f){s.query(c,s.Scope.BLOCK)!=null&&(c===this.statics.blotName&&!f?this.replaceWith(h.blotName):l.prototype.format.call(this,c,f))},h.prototype.formatAt=function(c,f,d,p){s.query(d,s.Scope.BLOCK)!=null?this.format(d,p):l.prototype.formatAt.call(this,c,f,d,p)},h.prototype.insertAt=function(c,f,d){if(d==null||s.query(f,s.Scope.INLINE)!=null)l.prototype.insertAt.call(this,c,f,d);else{var p=this.split(c),m=s.create(f,d);p.parent.insertBefore(m,p)}},h.prototype.update=function(c,f){navigator.userAgent.match(/Trident/)?this.build():l.prototype.update.call(this,c,f)},h.blotName="block",h.scope=s.Scope.BLOCK_BLOT,h.tagName="P",h}(o.default);r.default=u},function(t,r,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var c in h)h.hasOwnProperty(c)&&(l[c]=h[c])};return function(l,h){u(l,h);function c(){this.constructor=l}l.prototype=h===null?Object.create(h):(c.prototype=h.prototype,new c)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),s=function(u){a(l,u);function l(){return u!==null&&u.apply(this,arguments)||this}return l.formats=function(h){},l.prototype.format=function(h,c){u.prototype.formatAt.call(this,0,this.length(),h,c)},l.prototype.formatAt=function(h,c,f,d){h===0&&c===this.length()?this.format(f,d):u.prototype.formatAt.call(this,h,c,f,d)},l.prototype.formats=function(){return this.statics.formats(this.domNode)},l}(o.default);r.default=s},function(t,r,i){var a=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var f in c)c.hasOwnProperty(f)&&(h[f]=c[f])};return function(h,c){l(h,c);function f(){this.constructor=h}h.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),s=i(1),u=function(l){a(h,l);function h(c){var f=l.call(this,c)||this;return f.text=f.statics.value(f.domNode),f}return h.create=function(c){return document.createTextNode(c)},h.value=function(c){var f=c.data;return f.normalize&&(f=f.normalize()),f},h.prototype.deleteAt=function(c,f){this.domNode.data=this.text=this.text.slice(0,c)+this.text.slice(c+f)},h.prototype.index=function(c,f){return this.domNode===c?f:-1},h.prototype.insertAt=function(c,f,d){d==null?(this.text=this.text.slice(0,c)+f+this.text.slice(c),this.domNode.data=this.text):l.prototype.insertAt.call(this,c,f,d)},h.prototype.length=function(){return this.text.length},h.prototype.optimize=function(c){l.prototype.optimize.call(this,c),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof h&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},h.prototype.position=function(c,f){return[this.domNode,c]},h.prototype.split=function(c,f){if(f===void 0&&(f=!1),!f){if(c===0)return this;if(c===this.length())return this.next}var d=s.create(this.domNode.splitText(c));return this.parent.insertBefore(d,this.next),this.text=this.statics.value(this.domNode),d},h.prototype.update=function(c,f){var d=this;c.some(function(p){return p.type==="characterData"&&p.target===d.domNode})&&(this.text=this.statics.value(this.domNode))},h.prototype.value=function(){return this.text},h.blotName="text",h.scope=s.Scope.INLINE_BLOT,h}(o.default);r.default=u},function(t,r,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(s,u){return arguments.length>1&&!this.contains(s)==!u?u:o.call(this,s)}}String.prototype.startsWith||(String.prototype.startsWith=function(s,u){return u=u||0,this.substr(u,s.length)===s}),String.prototype.endsWith||(String.prototype.endsWith=function(s,u){var l=this.toString();(typeof u!="number"||!isFinite(u)||Math.floor(u)!==u||u>l.length)&&(u=l.length),u-=s.length;var h=l.indexOf(s,u);return h!==-1&&h===u}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("predicate must be a function");for(var l=Object(this),h=l.length>>>0,c=arguments[1],f,d=0;d<h;d++)if(f=l[d],u.call(c,f,d,l))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,r){var i=-1,a=1,o=0;function s(w,x,S){if(w==x)return w?[[o,w]]:[];(S<0||w.length<S)&&(S=null);var E=c(w,x),A=w.substring(0,E);w=w.substring(E),x=x.substring(E),E=f(w,x);var k=w.substring(w.length-E);w=w.substring(0,w.length-E),x=x.substring(0,x.length-E);var T=u(w,x);return A&&T.unshift([o,A]),k&&T.push([o,k]),p(T),S!=null&&(T=y(T,S)),T=v(T),T}function u(w,x){var S;if(!w)return[[a,x]];if(!x)return[[i,w]];var E=w.length>x.length?w:x,A=w.length>x.length?x:w,k=E.indexOf(A);if(k!=-1)return S=[[a,E.substring(0,k)],[o,A],[a,E.substring(k+A.length)]],w.length>x.length&&(S[0][0]=S[2][0]=i),S;if(A.length==1)return[[i,w],[a,x]];var T=d(w,x);if(T){var O=T[0],F=T[1],I=T[2],R=T[3],U=T[4],B=s(O,I),W=s(F,R);return B.concat([[o,U]],W)}return l(w,x)}function l(w,x){for(var S=w.length,E=x.length,A=Math.ceil((S+E)/2),k=A,T=2*A,O=new Array(T),F=new Array(T),I=0;I<T;I++)O[I]=-1,F[I]=-1;O[k+1]=0,F[k+1]=0;for(var R=S-E,U=R%2!=0,B=0,W=0,Y=0,z=0,j=0;j<A;j++){for(var M=-j+B;M<=j-W;M+=2){var q=k+M,H;M==-j||M!=j&&O[q-1]<O[q+1]?H=O[q+1]:H=O[q-1]+1;for(var K=H-M;H<S&&K<E&&w.charAt(H)==x.charAt(K);)H++,K++;if(O[q]=H,H>S)W+=2;else if(K>E)B+=2;else if(U){var Z=k+R-M;if(Z>=0&&Z<T&&F[Z]!=-1){var J=S-F[Z];if(H>=J)return h(w,x,H,K)}}}for(var X=-j+Y;X<=j-z;X+=2){var Z=k+X,J;X==-j||X!=j&&F[Z-1]<F[Z+1]?J=F[Z+1]:J=F[Z-1]+1;for(var ae=J-X;J<S&&ae<E&&w.charAt(S-J-1)==x.charAt(E-ae-1);)J++,ae++;if(F[Z]=J,J>S)z+=2;else if(ae>E)Y+=2;else if(!U){var q=k+R-X;if(q>=0&&q<T&&O[q]!=-1){var H=O[q],K=k+H-q;if(J=S-J,H>=J)return h(w,x,H,K)}}}}return[[i,w],[a,x]]}function h(w,x,S,E){var A=w.substring(0,S),k=x.substring(0,E),T=w.substring(S),O=x.substring(E),F=s(A,k),I=s(T,O);return F.concat(I)}function c(w,x){if(!w||!x||w.charAt(0)!=x.charAt(0))return 0;for(var S=0,E=Math.min(w.length,x.length),A=E,k=0;S<A;)w.substring(k,A)==x.substring(k,A)?(S=A,k=S):E=A,A=Math.floor((E-S)/2+S);return A}function f(w,x){if(!w||!x||w.charAt(w.length-1)!=x.charAt(x.length-1))return 0;for(var S=0,E=Math.min(w.length,x.length),A=E,k=0;S<A;)w.substring(w.length-A,w.length-k)==x.substring(x.length-A,x.length-k)?(S=A,k=S):E=A,A=Math.floor((E-S)/2+S);return A}function d(w,x){var S=w.length>x.length?w:x,E=w.length>x.length?x:w;if(S.length<4||E.length*2<S.length)return null;function A(W,Y,z){for(var j=W.substring(z,z+Math.floor(W.length/4)),M=-1,q="",H,K,Z,J;(M=Y.indexOf(j,M+1))!=-1;){var X=c(W.substring(z),Y.substring(M)),ae=f(W.substring(0,z),Y.substring(0,M));q.length<ae+X&&(q=Y.substring(M-ae,M)+Y.substring(M,M+X),H=W.substring(0,z-ae),K=W.substring(z+X),Z=Y.substring(0,M-ae),J=Y.substring(M+X))}return q.length*2>=W.length?[H,K,Z,J,q]:null}var k=A(S,E,Math.ceil(S.length/4)),T=A(S,E,Math.ceil(S.length/2)),O;if(!k&&!T)return null;T?k?O=k[4].length>T[4].length?k:T:O=T:O=k;var F,I,R,U;w.length>x.length?(F=O[0],I=O[1],R=O[2],U=O[3]):(R=O[0],U=O[1],F=O[2],I=O[3]);var B=O[4];return[F,I,R,U,B]}function p(w){w.push([o,""]);for(var x=0,S=0,E=0,A="",k="",T;x<w.length;)switch(w[x][0]){case a:E++,k+=w[x][1],x++;break;case i:S++,A+=w[x][1],x++;break;case o:S+E>1?(S!==0&&E!==0&&(T=c(k,A),T!==0&&(x-S-E>0&&w[x-S-E-1][0]==o?w[x-S-E-1][1]+=k.substring(0,T):(w.splice(0,0,[o,k.substring(0,T)]),x++),k=k.substring(T),A=A.substring(T)),T=f(k,A),T!==0&&(w[x][1]=k.substring(k.length-T)+w[x][1],k=k.substring(0,k.length-T),A=A.substring(0,A.length-T))),S===0?w.splice(x-E,S+E,[a,k]):E===0?w.splice(x-S,S+E,[i,A]):w.splice(x-S-E,S+E,[i,A],[a,k]),x=x-S-E+(S?1:0)+(E?1:0)+1):x!==0&&w[x-1][0]==o?(w[x-1][1]+=w[x][1],w.splice(x,1)):x++,E=0,S=0,A="",k="";break}w[w.length-1][1]===""&&w.pop();var O=!1;for(x=1;x<w.length-1;)w[x-1][0]==o&&w[x+1][0]==o&&(w[x][1].substring(w[x][1].length-w[x-1][1].length)==w[x-1][1]?(w[x][1]=w[x-1][1]+w[x][1].substring(0,w[x][1].length-w[x-1][1].length),w[x+1][1]=w[x-1][1]+w[x+1][1],w.splice(x-1,1),O=!0):w[x][1].substring(0,w[x+1][1].length)==w[x+1][1]&&(w[x-1][1]+=w[x+1][1],w[x][1]=w[x][1].substring(w[x+1][1].length)+w[x+1][1],w.splice(x+1,1),O=!0)),x++;O&&p(w)}var m=s;m.INSERT=a,m.DELETE=i,m.EQUAL=o,t.exports=m;function g(w,x){if(x===0)return[o,w];for(var S=0,E=0;E<w.length;E++){var A=w[E];if(A[0]===i||A[0]===o){var k=S+A[1].length;if(x===k)return[E+1,w];if(x<k){w=w.slice();var T=x-S,O=[A[0],A[1].slice(0,T)],F=[A[0],A[1].slice(T)];return w.splice(E,1,O,F),[E+1,w]}else S=k}}throw new Error("cursor_pos is out of bounds!")}function y(w,x){var S=g(w,x),E=S[1],A=S[0],k=E[A],T=E[A+1];if(k==null)return w;if(k[0]!==o)return w;if(T!=null&&k[1]+T[1]===T[1]+k[1])return E.splice(A,2,T,k),b(E,A,2);if(T!=null&&T[1].indexOf(k[1])===0){E.splice(A,2,[T[0],k[1]],[0,k[1]]);var O=T[1].slice(k[1].length);return O.length>0&&E.splice(A+2,0,[T[0],O]),b(E,A,3)}else return w}function v(w){for(var x=!1,S=function(T){return T.charCodeAt(0)>=56320&&T.charCodeAt(0)<=57343},E=function(T){return T.charCodeAt(T.length-1)>=55296&&T.charCodeAt(T.length-1)<=56319},A=2;A<w.length;A+=1)w[A-2][0]===o&&E(w[A-2][1])&&w[A-1][0]===i&&S(w[A-1][1])&&w[A][0]===a&&S(w[A][1])&&(x=!0,w[A-1][1]=w[A-2][1].slice(-1)+w[A-1][1],w[A][1]=w[A-2][1].slice(-1)+w[A][1],w[A-2][1]=w[A-2][1].slice(0,-1));if(!x)return w;for(var k=[],A=0;A<w.length;A+=1)w[A][1].length>0&&k.push(w[A]);return k}function b(w,x,S){for(var E=x+S-1;E>=0&&E>=x-1;E--)if(E+1<w.length){var A=w[E],k=w[E+1];A[0]===k[1]&&w.splice(E,2,[A[0],A[1]+k[1]])}return w}},function(t,r){r=t.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(a){var o=[];for(var s in a)o.push(s);return o}},function(t,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=t.exports=i?a:o,r.supported=a;function a(s){return Object.prototype.toString.call(s)=="[object Arguments]"}r.unsupported=o;function o(s){return s&&typeof s=="object"&&typeof s.length=="number"&&Object.prototype.hasOwnProperty.call(s,"callee")&&!Object.prototype.propertyIsEnumerable.call(s,"callee")||!1}},function(t,r){var i=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function s(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function u(){this._events=new o,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],c,f;if(this._eventsCount===0)return h;for(f in c=this._events)i.call(c,f)&&h.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},u.prototype.listeners=function(h,c){var f=a?a+h:h,d=this._events[f];if(c)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var p=0,m=d.length,g=new Array(m);p<m;p++)g[p]=d[p].fn;return g},u.prototype.emit=function(h,c,f,d,p,m){var g=a?a+h:h;if(!this._events[g])return!1;var y=this._events[g],v=arguments.length,b,w;if(y.fn){switch(y.once&&this.removeListener(h,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,f),!0;case 4:return y.fn.call(y.context,c,f,d),!0;case 5:return y.fn.call(y.context,c,f,d,p),!0;case 6:return y.fn.call(y.context,c,f,d,p,m),!0}for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];y.fn.apply(y.context,b)}else{var x=y.length,S;for(w=0;w<x;w++)switch(y[w].once&&this.removeListener(h,y[w].fn,void 0,!0),v){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,c);break;case 3:y[w].fn.call(y[w].context,c,f);break;case 4:y[w].fn.call(y[w].context,c,f,d);break;default:if(!b)for(S=1,b=new Array(v-1);S<v;S++)b[S-1]=arguments[S];y[w].fn.apply(y[w].context,b)}}return!0},u.prototype.on=function(h,c,f){var d=new s(c,f||this),p=a?a+h:h;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],d]:this._events[p].push(d):(this._events[p]=d,this._eventsCount++),this},u.prototype.once=function(h,c,f){var d=new s(c,f||this,!0),p=a?a+h:h;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],d]:this._events[p].push(d):(this._events[p]=d,this._eventsCount++),this},u.prototype.removeListener=function(h,c,f,d){var p=a?a+h:h;if(!this._events[p])return this;if(!c)return--this._eventsCount===0?this._events=new o:delete this._events[p],this;var m=this._events[p];if(m.fn)m.fn===c&&(!d||m.once)&&(!f||m.context===f)&&(--this._eventsCount===0?this._events=new o:delete this._events[p]);else{for(var g=0,y=[],v=m.length;g<v;g++)(m[g].fn!==c||d&&!m[g].once||f&&m[g].context!==f)&&y.push(m[g]);y.length?this._events[p]=y.length===1?y[0]:y:--this._eventsCount===0?this._events=new o:delete this._events[p]}return this},u.prototype.removeAllListeners=function(h){var c;return h?(c=a?a+h:h,this._events[c]&&(--this._eventsCount===0?this._events=new o:delete this._events[c])):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=a,u.EventEmitter=u,typeof t<"u"&&(t.exports=u)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},o=function(){function ne(fe,Ne){var Ae=[],ue=!0,me=!1,Se=void 0;try{for(var Re=fe[Symbol.iterator](),je;!(ue=(je=Re.next()).done)&&(Ae.push(je.value),!(Ne&&Ae.length===Ne));ue=!0);}catch(rt){me=!0,Se=rt}finally{try{!ue&&Re.return&&Re.return()}finally{if(me)throw Se}}return Ae}return function(fe,Ne){if(Array.isArray(fe))return fe;if(Symbol.iterator in Object(fe))return ne(fe,Ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function ne(fe,Ne){for(var Ae=0;Ae<Ne.length;Ae++){var ue=Ne[Ae];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(fe,ue.key,ue)}}return function(fe,Ne,Ae){return Ne&&ne(fe.prototype,Ne),Ae&&ne(fe,Ae),fe}}(),u=i(3),l=F(u),h=i(2),c=F(h),f=i(0),d=F(f),p=i(5),m=F(p),g=i(10),y=F(g),v=i(9),b=F(v),w=i(36),x=i(37),S=i(13),E=F(S),A=i(26),k=i(38),T=i(39),O=i(40);function F(ne){return ne&&ne.__esModule?ne:{default:ne}}function I(ne,fe,Ne){return fe in ne?Object.defineProperty(ne,fe,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):ne[fe]=Ne,ne}function R(ne,fe){if(!(ne instanceof fe))throw new TypeError("Cannot call a class as a function")}function U(ne,fe){if(!ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe&&(typeof fe=="object"||typeof fe=="function")?fe:ne}function B(ne,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof fe);ne.prototype=Object.create(fe&&fe.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),fe&&(Object.setPrototypeOf?Object.setPrototypeOf(ne,fe):ne.__proto__=fe)}var W=(0,y.default)("quill:clipboard"),Y="__ql-matcher",z=[[Node.TEXT_NODE,le],[Node.TEXT_NODE,G],["br",ge],[Node.ELEMENT_NODE,G],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,ye],["li",Ee],["b",ae.bind(ae,"bold")],["i",ae.bind(ae,"italic")],["style",Ce]],j=[w.AlignAttribute,k.DirectionAttribute].reduce(function(ne,fe){return ne[fe.keyName]=fe,ne},{}),M=[w.AlignStyle,x.BackgroundStyle,A.ColorStyle,k.DirectionStyle,T.FontStyle,O.SizeStyle].reduce(function(ne,fe){return ne[fe.keyName]=fe,ne},{}),q=function(ne){B(fe,ne);function fe(Ne,Ae){R(this,fe);var ue=U(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this,Ne,Ae));return ue.quill.root.addEventListener("paste",ue.onPaste.bind(ue)),ue.container=ue.quill.addContainer("ql-clipboard"),ue.container.setAttribute("contenteditable",!0),ue.container.setAttribute("tabindex",-1),ue.matchers=[],z.concat(ue.options.matchers).forEach(function(me){var Se=o(me,2),Re=Se[0],je=Se[1];!Ae.matchVisual&&je===de||ue.addMatcher(Re,je)}),ue}return s(fe,[{key:"addMatcher",value:function(Ae,ue){this.matchers.push([Ae,ue])}},{key:"convert",value:function(Ae){if(typeof Ae=="string")return this.container.innerHTML=Ae.replace(/\>\r?\n +\</g,"><"),this.convert();var ue=this.quill.getFormat(this.quill.selection.savedRange.index);if(ue[E.default.blotName]){var me=this.container.innerText;return this.container.innerHTML="",new c.default().insert(me,I({},E.default.blotName,ue[E.default.blotName]))}var Se=this.prepareMatching(),Re=o(Se,2),je=Re[0],rt=Re[1],at=X(this.container,je,rt);return Z(at,`
`)&&at.ops[at.ops.length-1].attributes==null&&(at=at.compose(new c.default().retain(at.length()-1).delete(1))),W.log("convert",this.container.innerHTML,at),this.container.innerHTML="",at}},{key:"dangerouslyPasteHTML",value:function(Ae,ue){var me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;if(typeof Ae=="string")this.quill.setContents(this.convert(Ae),ue),this.quill.setSelection(0,m.default.sources.SILENT);else{var Se=this.convert(ue);this.quill.updateContents(new c.default().retain(Ae).concat(Se),me),this.quill.setSelection(Ae+Se.length(),m.default.sources.SILENT)}}},{key:"onPaste",value:function(Ae){var ue=this;if(!(Ae.defaultPrevented||!this.quill.isEnabled())){var me=this.quill.getSelection(),Se=new c.default().retain(me.index),Re=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(m.default.sources.SILENT),setTimeout(function(){Se=Se.concat(ue.convert()).delete(me.length),ue.quill.updateContents(Se,m.default.sources.USER),ue.quill.setSelection(Se.length()-me.length,m.default.sources.SILENT),ue.quill.scrollingContainer.scrollTop=Re,ue.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Ae=this,ue=[],me=[];return this.matchers.forEach(function(Se){var Re=o(Se,2),je=Re[0],rt=Re[1];switch(je){case Node.TEXT_NODE:me.push(rt);break;case Node.ELEMENT_NODE:ue.push(rt);break;default:[].forEach.call(Ae.container.querySelectorAll(je),function(at){at[Y]=at[Y]||[],at[Y].push(rt)});break}}),[ue,me]}}]),fe}(b.default);q.DEFAULTS={matchers:[],matchVisual:!0};function H(ne,fe,Ne){return(typeof fe>"u"?"undefined":a(fe))==="object"?Object.keys(fe).reduce(function(Ae,ue){return H(Ae,ue,fe[ue])},ne):ne.reduce(function(Ae,ue){return ue.attributes&&ue.attributes[fe]?Ae.push(ue):Ae.insert(ue.insert,(0,l.default)({},I({},fe,Ne),ue.attributes))},new c.default)}function K(ne){if(ne.nodeType!==Node.ELEMENT_NODE)return{};var fe="__ql-computed-style";return ne[fe]||(ne[fe]=window.getComputedStyle(ne))}function Z(ne,fe){for(var Ne="",Ae=ne.ops.length-1;Ae>=0&&Ne.length<fe.length;--Ae){var ue=ne.ops[Ae];if(typeof ue.insert!="string")break;Ne=ue.insert+Ne}return Ne.slice(-1*fe.length)===fe}function J(ne){if(ne.childNodes.length===0)return!1;var fe=K(ne);return["block","list-item"].indexOf(fe.display)>-1}function X(ne,fe,Ne){return ne.nodeType===ne.TEXT_NODE?Ne.reduce(function(Ae,ue){return ue(ne,Ae)},new c.default):ne.nodeType===ne.ELEMENT_NODE?[].reduce.call(ne.childNodes||[],function(Ae,ue){var me=X(ue,fe,Ne);return ue.nodeType===ne.ELEMENT_NODE&&(me=fe.reduce(function(Se,Re){return Re(ue,Se)},me),me=(ue[Y]||[]).reduce(function(Se,Re){return Re(ue,Se)},me)),Ae.concat(me)},new c.default):new c.default}function ae(ne,fe,Ne){return H(Ne,ne,!0)}function ie(ne,fe){var Ne=d.default.Attributor.Attribute.keys(ne),Ae=d.default.Attributor.Class.keys(ne),ue=d.default.Attributor.Style.keys(ne),me={};return Ne.concat(Ae).concat(ue).forEach(function(Se){var Re=d.default.query(Se,d.default.Scope.ATTRIBUTE);Re!=null&&(me[Re.attrName]=Re.value(ne),me[Re.attrName])||(Re=j[Se],Re!=null&&(Re.attrName===Se||Re.keyName===Se)&&(me[Re.attrName]=Re.value(ne)||void 0),Re=M[Se],Re!=null&&(Re.attrName===Se||Re.keyName===Se)&&(Re=M[Se],me[Re.attrName]=Re.value(ne)||void 0))}),Object.keys(me).length>0&&(fe=H(fe,me)),fe}function ce(ne,fe){var Ne=d.default.query(ne);if(Ne==null)return fe;if(Ne.prototype instanceof d.default.Embed){var Ae={},ue=Ne.value(ne);ue!=null&&(Ae[Ne.blotName]=ue,fe=new c.default().insert(Ae,Ne.formats(ne)))}else typeof Ne.formats=="function"&&(fe=H(fe,Ne.blotName,Ne.formats(ne)));return fe}function ge(ne,fe){return Z(fe,`
`)||fe.insert(`
`),fe}function Ce(){return new c.default}function Ee(ne,fe){var Ne=d.default.query(ne);if(Ne==null||Ne.blotName!=="list-item"||!Z(fe,`
`))return fe;for(var Ae=-1,ue=ne.parentNode;!ue.classList.contains("ql-clipboard");)(d.default.query(ue)||{}).blotName==="list"&&(Ae+=1),ue=ue.parentNode;return Ae<=0?fe:fe.compose(new c.default().retain(fe.length()-1).retain(1,{indent:Ae}))}function G(ne,fe){return Z(fe,`
`)||(J(ne)||fe.length()>0&&ne.nextSibling&&J(ne.nextSibling))&&fe.insert(`
`),fe}function de(ne,fe){if(J(ne)&&ne.nextElementSibling!=null&&!Z(fe,`

`)){var Ne=ne.offsetHeight+parseFloat(K(ne).marginTop)+parseFloat(K(ne).marginBottom);ne.nextElementSibling.offsetTop>ne.offsetTop+Ne*1.5&&fe.insert(`
`)}return fe}function ye(ne,fe){var Ne={},Ae=ne.style||{};return Ae.fontStyle&&K(ne).fontStyle==="italic"&&(Ne.italic=!0),Ae.fontWeight&&(K(ne).fontWeight.startsWith("bold")||parseInt(K(ne).fontWeight)>=700)&&(Ne.bold=!0),Object.keys(Ne).length>0&&(fe=H(fe,Ne)),parseFloat(Ae.textIndent||0)>0&&(fe=new c.default().insert("	").concat(fe)),fe}function le(ne,fe){var Ne=ne.data;if(ne.parentNode.tagName==="O:P")return fe.insert(Ne.trim());if(Ne.trim().length===0&&ne.parentNode.classList.contains("ql-clipboard"))return fe;if(!K(ne.parentNode).whiteSpace.startsWith("pre")){var Ae=function(me,Se){return Se=Se.replace(/[^\u00a0]/g,""),Se.length<1&&me?" ":Se};Ne=Ne.replace(/\r\n/g," ").replace(/\n/g," "),Ne=Ne.replace(/\s\s+/g,Ae.bind(Ae,!0)),(ne.previousSibling==null&&J(ne.parentNode)||ne.previousSibling!=null&&J(ne.previousSibling))&&(Ne=Ne.replace(/^\s+/,Ae.bind(Ae,!1))),(ne.nextSibling==null&&J(ne.parentNode)||ne.nextSibling!=null&&J(ne.nextSibling))&&(Ne=Ne.replace(/\s+$/,Ae.bind(Ae,!1)))}return fe.insert(Ne)}r.default=q,r.matchAttributor=ie,r.matchBlot=ce,r.matchNewline=G,r.matchSpacing=de,r.matchText=le},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function p(m,g){for(var y=0;y<g.length;y++){var v=g[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,g,y){return g&&p(m.prototype,g),y&&p(m,y),m}}(),o=function p(m,g,y){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,g);if(v===void 0){var b=Object.getPrototypeOf(m);return b===null?void 0:p(b,g,y)}else{if("value"in v)return v.value;var w=v.get;return w===void 0?void 0:w.call(y)}},s=i(6),u=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function h(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return h(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,[{key:"optimize",value:function(y){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,y),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),m}(u.default);d.blotName="bold",d.tagName=["STRONG","B"],r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var a=function(){function O(F,I){var R=[],U=!0,B=!1,W=void 0;try{for(var Y=F[Symbol.iterator](),z;!(U=(z=Y.next()).done)&&(R.push(z.value),!(I&&R.length===I));U=!0);}catch(j){B=!0,W=j}finally{try{!U&&Y.return&&Y.return()}finally{if(B)throw W}}return R}return function(F,I){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return O(F,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function O(F,I){for(var R=0;R<I.length;R++){var U=I[R];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(F,U.key,U)}}return function(F,I,R){return I&&O(F.prototype,I),R&&O(F,R),F}}(),s=i(2),u=y(s),l=i(0),h=y(l),c=i(5),f=y(c),d=i(10),p=y(d),m=i(9),g=y(m);function y(O){return O&&O.__esModule?O:{default:O}}function v(O,F,I){return F in O?Object.defineProperty(O,F,{value:I,enumerable:!0,configurable:!0,writable:!0}):O[F]=I,O}function b(O,F){if(!(O instanceof F))throw new TypeError("Cannot call a class as a function")}function w(O,F){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:O}function x(O,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);O.prototype=Object.create(F&&F.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(O,F):O.__proto__=F)}var S=(0,p.default)("quill:toolbar"),E=function(O){x(F,O);function F(I,R){b(this,F);var U=w(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,I,R));if(Array.isArray(U.options.container)){var B=document.createElement("div");k(B,U.options.container),I.container.parentNode.insertBefore(B,I.container),U.container=B}else typeof U.options.container=="string"?U.container=document.querySelector(U.options.container):U.container=U.options.container;if(!(U.container instanceof HTMLElement)){var W;return W=S.error("Container required for toolbar",U.options),w(U,W)}return U.container.classList.add("ql-toolbar"),U.controls=[],U.handlers={},Object.keys(U.options.handlers).forEach(function(Y){U.addHandler(Y,U.options.handlers[Y])}),[].forEach.call(U.container.querySelectorAll("button, select"),function(Y){U.attach(Y)}),U.quill.on(f.default.events.EDITOR_CHANGE,function(Y,z){Y===f.default.events.SELECTION_CHANGE&&U.update(z)}),U.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var Y=U.quill.selection.getRange(),z=a(Y,1),j=z[0];U.update(j)}),U}return o(F,[{key:"addHandler",value:function(R,U){this.handlers[R]=U}},{key:"attach",value:function(R){var U=this,B=[].find.call(R.classList,function(Y){return Y.indexOf("ql-")===0});if(B){if(B=B.slice(3),R.tagName==="BUTTON"&&R.setAttribute("type","button"),this.handlers[B]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[B]==null){S.warn("ignoring attaching to disabled format",B,R);return}if(h.default.query(B)==null){S.warn("ignoring attaching to nonexistent format",B,R);return}}var W=R.tagName==="SELECT"?"change":"click";R.addEventListener(W,function(Y){var z=void 0;if(R.tagName==="SELECT"){if(R.selectedIndex<0)return;var j=R.options[R.selectedIndex];j.hasAttribute("selected")?z=!1:z=j.value||!1}else R.classList.contains("ql-active")?z=!1:z=R.value||!R.hasAttribute("value"),Y.preventDefault();U.quill.focus();var M=U.quill.selection.getRange(),q=a(M,1),H=q[0];if(U.handlers[B]!=null)U.handlers[B].call(U,z);else if(h.default.query(B).prototype instanceof h.default.Embed){if(z=prompt("Enter "+B),!z)return;U.quill.updateContents(new u.default().retain(H.index).delete(H.length).insert(v({},B,z)),f.default.sources.USER)}else U.quill.format(B,z,f.default.sources.USER);U.update(H)}),this.controls.push([B,R])}}},{key:"update",value:function(R){var U=R==null?{}:this.quill.getFormat(R);this.controls.forEach(function(B){var W=a(B,2),Y=W[0],z=W[1];if(z.tagName==="SELECT"){var j=void 0;if(R==null)j=null;else if(U[Y]==null)j=z.querySelector("option[selected]");else if(!Array.isArray(U[Y])){var M=U[Y];typeof M=="string"&&(M=M.replace(/\"/g,'\\"')),j=z.querySelector('option[value="'+M+'"]')}j==null?(z.value="",z.selectedIndex=-1):j.selected=!0}else if(R==null)z.classList.remove("ql-active");else if(z.hasAttribute("value")){var q=U[Y]===z.getAttribute("value")||U[Y]!=null&&U[Y].toString()===z.getAttribute("value")||U[Y]==null&&!z.getAttribute("value");z.classList.toggle("ql-active",q)}else z.classList.toggle("ql-active",U[Y]!=null)})}}]),F}(g.default);E.DEFAULTS={};function A(O,F,I){var R=document.createElement("button");R.setAttribute("type","button"),R.classList.add("ql-"+F),I!=null&&(R.value=I),O.appendChild(R)}function k(O,F){Array.isArray(F[0])||(F=[F]),F.forEach(function(I){var R=document.createElement("span");R.classList.add("ql-formats"),I.forEach(function(U){if(typeof U=="string")A(R,U);else{var B=Object.keys(U)[0],W=U[B];Array.isArray(W)?T(R,B,W):A(R,B,W)}}),O.appendChild(R)})}function T(O,F,I){var R=document.createElement("select");R.classList.add("ql-"+F),I.forEach(function(U){var B=document.createElement("option");U!==!1?B.setAttribute("value",U):B.setAttribute("selected","selected"),R.appendChild(B)}),O.appendChild(R)}E.DEFAULTS={container:null,handlers:{clean:function(){var F=this,I=this.quill.getSelection();if(I!=null)if(I.length==0){var R=this.quill.getFormat();Object.keys(R).forEach(function(U){h.default.query(U,h.default.Scope.INLINE)!=null&&F.quill.format(U,!1)})}else this.quill.removeFormat(I,f.default.sources.USER)},direction:function(F){var I=this.quill.getFormat().align;F==="rtl"&&I==null?this.quill.format("align","right",f.default.sources.USER):!F&&I==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",F,f.default.sources.USER)},indent:function(F){var I=this.quill.getSelection(),R=this.quill.getFormat(I),U=parseInt(R.indent||0);if(F==="+1"||F==="-1"){var B=F==="+1"?1:-1;R.direction==="rtl"&&(B*=-1),this.quill.format("indent",U+B,f.default.sources.USER)}},link:function(F){F===!0&&(F=prompt("Enter link URL:")),this.quill.format("link",F,f.default.sources.USER)},list:function(F){var I=this.quill.getSelection(),R=this.quill.getFormat(I);F==="check"?R.list==="checked"||R.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",F,f.default.sources.USER)}}},r.default=E,r.addControls=k},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function p(m,g){for(var y=0;y<g.length;y++){var v=g[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,g,y){return g&&p(m.prototype,g),y&&p(m,y),m}}(),o=function p(m,g,y){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,g);if(v===void 0){var b=Object.getPrototypeOf(m);return b===null?void 0:p(b,g,y)}else{if("value"in v)return v.value;var w=v.get;return w===void 0?void 0:w.call(y)}},s=i(28),u=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function h(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(g,y){h(this,m);var v=c(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,g));return v.label.innerHTML=y,v.container.classList.add("ql-color-picker"),[].slice.call(v.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(b){b.classList.add("ql-primary")}),v}return a(m,[{key:"buildItem",value:function(y){var v=o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"buildItem",this).call(this,y);return v.style.backgroundColor=y.getAttribute("value")||"",v}},{key:"selectItem",value:function(y,v){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"selectItem",this).call(this,y,v);var b=this.label.querySelector(".ql-color-label"),w=y&&y.getAttribute("data-value")||"";b&&(b.tagName==="line"?b.style.stroke=w:b.style.fill=w)}}]),m}(u.default);r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function p(m,g){for(var y=0;y<g.length;y++){var v=g[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,g,y){return g&&p(m.prototype,g),y&&p(m,y),m}}(),o=function p(m,g,y){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,g);if(v===void 0){var b=Object.getPrototypeOf(m);return b===null?void 0:p(b,g,y)}else{if("value"in v)return v.value;var w=v.get;return w===void 0?void 0:w.call(y)}},s=i(28),u=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function h(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(g,y){h(this,m);var v=c(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,g));return v.container.classList.add("ql-icon-picker"),[].forEach.call(v.container.querySelectorAll(".ql-picker-item"),function(b){b.innerHTML=y[b.getAttribute("data-value")||""]}),v.defaultItem=v.container.querySelector(".ql-selected"),v.selectItem(v.defaultItem),v}return a(m,[{key:"selectItem",value:function(y,v){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"selectItem",this).call(this,y,v),y=y||this.defaultItem,this.label.innerHTML=y.innerHTML}}]),m}(u.default);r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function u(l,h){for(var c=0;c<h.length;c++){var f=h[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,h,c){return h&&u(l.prototype,h),c&&u(l,c),l}}();function o(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function(){function u(l,h){var c=this;o(this,u),this.quill=l,this.boundsContainer=h||document.body,this.root=l.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){c.root.style.marginTop=-1*c.quill.root.scrollTop+"px"}),this.hide()}return a(u,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(h){var c=h.left+h.width/2-this.root.offsetWidth/2,f=h.bottom+this.quill.root.scrollTop;this.root.style.left=c+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var d=this.boundsContainer.getBoundingClientRect(),p=this.root.getBoundingClientRect(),m=0;if(p.right>d.right&&(m=d.right-p.right,this.root.style.left=c+m+"px"),p.left<d.left&&(m=d.left-p.left,this.root.style.left=c+m+"px"),p.bottom>d.bottom){var g=p.bottom-p.top,y=h.bottom-h.top+g;this.root.style.top=f-y+"px",this.root.classList.add("ql-flip")}return m}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),u}();r.default=s},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function T(O,F){var I=[],R=!0,U=!1,B=void 0;try{for(var W=O[Symbol.iterator](),Y;!(R=(Y=W.next()).done)&&(I.push(Y.value),!(F&&I.length===F));R=!0);}catch(z){U=!0,B=z}finally{try{!R&&W.return&&W.return()}finally{if(U)throw B}}return I}return function(O,F){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return T(O,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function T(O,F,I){O===null&&(O=Function.prototype);var R=Object.getOwnPropertyDescriptor(O,F);if(R===void 0){var U=Object.getPrototypeOf(O);return U===null?void 0:T(U,F,I)}else{if("value"in R)return R.value;var B=R.get;return B===void 0?void 0:B.call(I)}},s=function(){function T(O,F){for(var I=0;I<F.length;I++){var R=F[I];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,F,I){return F&&T(O.prototype,F),I&&T(O,I),O}}(),u=i(3),l=b(u),h=i(8),c=b(h),f=i(43),d=b(f),p=i(27),m=b(p),g=i(15),y=i(41),v=b(y);function b(T){return T&&T.__esModule?T:{default:T}}function w(T,O){if(!(T instanceof O))throw new TypeError("Cannot call a class as a function")}function x(T,O){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:T}function S(T,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);T.prototype=Object.create(O&&O.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(T,O):T.__proto__=O)}var E=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],A=function(T){S(O,T);function O(F,I){w(this,O),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=E);var R=x(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,F,I));return R.quill.container.classList.add("ql-snow"),R}return s(O,[{key:"extendToolbar",value:function(I){I.container.classList.add("ql-snow"),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),v.default),this.tooltip=new k(this.quill,this.options.bounds),I.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(R,U){I.handlers.link.call(I,!U.format.link)})}}]),O}(d.default);A.DEFAULTS=(0,l.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(O){if(O){var F=this.quill.getSelection();if(F==null||F.length==0)return;var I=this.quill.getText(F);/^\S+@\S+\.\S+$/.test(I)&&I.indexOf("mailto:")!==0&&(I="mailto:"+I);var R=this.quill.theme.tooltip;R.edit("link",I)}else this.quill.format("link",!1)}}}}});var k=function(T){S(O,T);function O(F,I){w(this,O);var R=x(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,F,I));return R.preview=R.root.querySelector("a.ql-preview"),R}return s(O,[{key:"listen",value:function(){var I=this;o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(R){I.root.classList.contains("ql-editing")?I.save():I.edit("link",I.preview.textContent),R.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(R){if(I.linkRange!=null){var U=I.linkRange;I.restoreFocus(),I.quill.formatText(U,"link",!1,c.default.sources.USER),delete I.linkRange}R.preventDefault(),I.hide()}),this.quill.on(c.default.events.SELECTION_CHANGE,function(R,U,B){if(R!=null){if(R.length===0&&B===c.default.sources.USER){var W=I.quill.scroll.descendant(m.default,R.index),Y=a(W,2),z=Y[0],j=Y[1];if(z!=null){I.linkRange=new g.Range(R.index-j,z.length());var M=m.default.formats(z.domNode);I.preview.textContent=M,I.preview.setAttribute("href",M),I.show(),I.position(I.quill.getBounds(I.linkRange));return}}else delete I.linkRange;I.hide()}})}},{key:"show",value:function(){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),O}(f.BaseTooltip);k.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=A},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(29),o=ue(a),s=i(36),u=i(38),l=i(64),h=i(65),c=ue(h),f=i(66),d=ue(f),p=i(67),m=ue(p),g=i(37),y=i(26),v=i(39),b=i(40),w=i(56),x=ue(w),S=i(68),E=ue(S),A=i(27),k=ue(A),T=i(69),O=ue(T),F=i(70),I=ue(F),R=i(71),U=ue(R),B=i(72),W=ue(B),Y=i(73),z=ue(Y),j=i(13),M=ue(j),q=i(74),H=ue(q),K=i(75),Z=ue(K),J=i(57),X=ue(J),ae=i(41),ie=ue(ae),ce=i(28),ge=ue(ce),Ce=i(59),Ee=ue(Ce),G=i(60),de=ue(G),ye=i(61),le=ue(ye),ne=i(108),fe=ue(ne),Ne=i(62),Ae=ue(Ne);function ue(me){return me&&me.__esModule?me:{default:me}}o.default.register({"attributors/attribute/direction":u.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":y.ColorClass,"attributors/class/direction":u.DirectionClass,"attributors/class/font":v.FontClass,"attributors/class/size":b.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":y.ColorStyle,"attributors/style/direction":u.DirectionStyle,"attributors/style/font":v.FontStyle,"attributors/style/size":b.SizeStyle},!0),o.default.register({"formats/align":s.AlignClass,"formats/direction":u.DirectionClass,"formats/indent":l.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":y.ColorStyle,"formats/font":v.FontClass,"formats/size":b.SizeClass,"formats/blockquote":c.default,"formats/code-block":M.default,"formats/header":d.default,"formats/list":m.default,"formats/bold":x.default,"formats/code":j.Code,"formats/italic":E.default,"formats/link":k.default,"formats/script":O.default,"formats/strike":I.default,"formats/underline":U.default,"formats/image":W.default,"formats/video":z.default,"formats/list/item":p.ListItem,"modules/formula":H.default,"modules/syntax":Z.default,"modules/toolbar":X.default,"themes/bubble":fe.default,"themes/snow":Ae.default,"ui/icons":ie.default,"ui/picker":ge.default,"ui/icon-picker":de.default,"ui/color-picker":Ee.default,"ui/tooltip":le.default},!0),r.default=o.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var a=function(){function m(g,y){for(var v=0;v<y.length;v++){var b=y[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,y,v){return y&&m(g.prototype,y),v&&m(g,v),g}}(),o=function m(g,y,v){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,y);if(b===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:m(w,y,v)}else{if("value"in b)return b.value;var x=b.get;return x===void 0?void 0:x.call(v)}},s=i(0),u=l(s);function l(m){return m&&m.__esModule?m:{default:m}}function h(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function c(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var d=function(m){f(g,m);function g(){return h(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"add",value:function(v,b){if(b==="+1"||b==="-1"){var w=this.value(v)||0;b=b==="+1"?w+1:w-1}return b===0?(this.remove(v),!0):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,v,b)}},{key:"canAdd",value:function(v,b){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,v,b)||o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,v,parseInt(b))}},{key:"value",value:function(v){return parseInt(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,v))||void 0}}]),g}(u.default.Attributor.Class),p=new d("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(4),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function u(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function l(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function h(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var c=function(f){h(d,f);function d(){return u(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);c.blotName="blockquote",c.tagName="blockquote",r.default=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function d(p,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(p,y.key,y)}}return function(p,m,g){return m&&d(p.prototype,m),g&&d(p,g),p}}(),o=i(4),s=u(o);function u(d){return d&&d.__esModule?d:{default:d}}function l(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function h(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function c(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var f=function(d){c(p,d);function p(){return l(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return a(p,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),p}(s.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var a=function(){function w(x,S){for(var E=0;E<S.length;E++){var A=S[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(x,A.key,A)}}return function(x,S,E){return S&&w(x.prototype,S),E&&w(x,E),x}}(),o=function w(x,S,E){x===null&&(x=Function.prototype);var A=Object.getOwnPropertyDescriptor(x,S);if(A===void 0){var k=Object.getPrototypeOf(x);return k===null?void 0:w(k,S,E)}else{if("value"in A)return A.value;var T=A.get;return T===void 0?void 0:T.call(E)}},s=i(0),u=d(s),l=i(4),h=d(l),c=i(25),f=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function p(w,x,S){return x in w?Object.defineProperty(w,x,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[x]=S,w}function m(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}function g(w,x){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:w}function y(w,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(w,x):w.__proto__=x)}var v=function(w){y(x,w);function x(){return m(this,x),g(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,[{key:"format",value:function(E,A){E===b.blotName&&!A?this.replaceWith(u.default.create(this.statics.scope)):o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,E,A)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(E,A){return this.parent.isolate(this.offset(this.parent),this.length()),E===this.parent.statics.blotName?(this.parent.replaceWith(E,A),this):(this.parent.unwrap(),o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replaceWith",this).call(this,E,A))}}],[{key:"formats",value:function(E){return E.tagName===this.tagName?void 0:o(x.__proto__||Object.getPrototypeOf(x),"formats",this).call(this,E)}}]),x}(h.default);v.blotName="list-item",v.tagName="LI";var b=function(w){y(x,w),a(x,null,[{key:"create",value:function(E){var A=E==="ordered"?"OL":"UL",k=o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,A);return(E==="checked"||E==="unchecked")&&k.setAttribute("data-checked",E==="checked"),k}},{key:"formats",value:function(E){if(E.tagName==="OL")return"ordered";if(E.tagName==="UL")return E.hasAttribute("data-checked")?E.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function x(S){m(this,x);var E=g(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,S)),A=function(T){if(T.target.parentNode===S){var O=E.statics.formats(S),F=u.default.find(T.target);O==="checked"?F.format("list","unchecked"):O==="unchecked"&&F.format("list","checked")}};return S.addEventListener("touchstart",A),S.addEventListener("mousedown",A),E}return a(x,[{key:"format",value:function(E,A){this.children.length>0&&this.children.tail.format(E,A)}},{key:"formats",value:function(){return p({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(E,A){if(E instanceof v)o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,E,A);else{var k=A==null?this.length():A.offset(this),T=this.split(k);T.parent.insertBefore(E,T)}}},{key:"optimize",value:function(E){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,E);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&A.domNode.tagName===this.domNode.tagName&&A.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(A.moveChildren(this),A.remove())}},{key:"replace",value:function(E){if(E.statics.blotName!==this.statics.blotName){var A=u.default.create(this.statics.defaultChild);E.moveChildren(A),this.appendChild(A)}o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replace",this).call(this,E)}}]),x}(f.default);b.blotName="list",b.scope=u.default.Scope.BLOCK_BLOT,b.tagName=["OL","UL"],b.defaultChild="list-item",b.allowedChildren=[v],r.ListItem=v,r.default=b},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(56),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function u(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function l(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function h(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var c=function(f){h(d,f);function d(){return u(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);c.blotName="italic",c.tagName=["EM","I"],r.default=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function p(m,g){for(var y=0;y<g.length;y++){var v=g[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,g,y){return g&&p(m.prototype,g),y&&p(m,y),m}}(),o=function p(m,g,y){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,g);if(v===void 0){var b=Object.getPrototypeOf(m);return b===null?void 0:p(b,g,y)}else{if("value"in v)return v.value;var w=v.get;return w===void 0?void 0:w.call(y)}},s=i(6),u=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function h(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return h(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,null,[{key:"create",value:function(y){return y==="super"?document.createElement("sup"):y==="sub"?document.createElement("sub"):o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,y)}},{key:"formats",value:function(y){if(y.tagName==="SUB")return"sub";if(y.tagName==="SUP")return"super"}}]),m}(u.default);d.blotName="script",d.tagName=["SUB","SUP"],r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function u(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function l(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function h(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var c=function(f){h(d,f);function d(){return u(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);c.blotName="strike",c.tagName="S",r.default=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=s(a);function s(f){return f&&f.__esModule?f:{default:f}}function u(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function l(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function h(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var c=function(f){h(d,f);function d(){return u(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);c.blotName="underline",c.tagName="U",r.default=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function g(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&g(y.prototype,v),b&&g(y,b),y}}(),o=function g(y,v,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,v);if(w===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:g(x,v,b)}else{if("value"in w)return w.value;var S=w.get;return S===void 0?void 0:S.call(b)}},s=i(0),u=h(s),l=i(27);function h(g){return g&&g.__esModule?g:{default:g}}function c(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function f(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function d(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var p=["alt","height","width"],m=function(g){d(y,g);function y(){return c(this,y),f(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"format",value:function(b,w){p.indexOf(b)>-1?w?this.domNode.setAttribute(b,w):this.domNode.removeAttribute(b):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,b,w)}}],[{key:"create",value:function(b){var w=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,b);return typeof b=="string"&&w.setAttribute("src",this.sanitize(b)),w}},{key:"formats",value:function(b){return p.reduce(function(w,x){return b.hasAttribute(x)&&(w[x]=b.getAttribute(x)),w},{})}},{key:"match",value:function(b){return/\.(jpe?g|gif|png)$/.test(b)||/^data:image\/.+;base64/.test(b)}},{key:"sanitize",value:function(b){return(0,l.sanitize)(b,["http","https","data"])?b:"//:0"}},{key:"value",value:function(b){return b.getAttribute("src")}}]),y}(u.default.Embed);m.blotName="image",m.tagName="IMG",r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function g(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&g(y.prototype,v),b&&g(y,b),y}}(),o=function g(y,v,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,v);if(w===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:g(x,v,b)}else{if("value"in w)return w.value;var S=w.get;return S===void 0?void 0:S.call(b)}},s=i(4),u=i(27),l=h(u);function h(g){return g&&g.__esModule?g:{default:g}}function c(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function f(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function d(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var p=["height","width"],m=function(g){d(y,g);function y(){return c(this,y),f(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"format",value:function(b,w){p.indexOf(b)>-1?w?this.domNode.setAttribute(b,w):this.domNode.removeAttribute(b):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,b,w)}}],[{key:"create",value:function(b){var w=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,b);return w.setAttribute("frameborder","0"),w.setAttribute("allowfullscreen",!0),w.setAttribute("src",this.sanitize(b)),w}},{key:"formats",value:function(b){return p.reduce(function(w,x){return b.hasAttribute(x)&&(w[x]=b.getAttribute(x)),w},{})}},{key:"sanitize",value:function(b){return l.default.sanitize(b)}},{key:"value",value:function(b){return b.getAttribute("src")}}]),y}(s.BlockEmbed);m.blotName="video",m.className="ql-video",m.tagName="IFRAME",r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var a=function(){function b(w,x){for(var S=0;S<x.length;S++){var E=x[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,x,S){return x&&b(w.prototype,x),S&&b(w,S),w}}(),o=function b(w,x,S){w===null&&(w=Function.prototype);var E=Object.getOwnPropertyDescriptor(w,x);if(E===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:b(A,x,S)}else{if("value"in E)return E.value;var k=E.get;return k===void 0?void 0:k.call(S)}},s=i(35),u=d(s),l=i(5),h=d(l),c=i(9),f=d(c);function d(b){return b&&b.__esModule?b:{default:b}}function p(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function m(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function g(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var y=function(b){g(w,b);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,null,[{key:"create",value:function(S){var E=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,S);return typeof S=="string"&&(window.katex.render(S,E,{throwOnError:!1,errorColor:"#f00"}),E.setAttribute("data-value",S)),E}},{key:"value",value:function(S){return S.getAttribute("data-value")}}]),w}(u.default);y.blotName="formula",y.className="ql-formula",y.tagName="SPAN";var v=function(b){g(w,b),a(w,null,[{key:"register",value:function(){h.default.register(y,!0)}}]);function w(){p(this,w);var x=m(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return x}return w}(f.default);r.FormulaBlot=y,r.default=v},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var a=function(){function S(E,A){for(var k=0;k<A.length;k++){var T=A[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,A,k){return A&&S(E.prototype,A),k&&S(E,k),E}}(),o=function S(E,A,k){E===null&&(E=Function.prototype);var T=Object.getOwnPropertyDescriptor(E,A);if(T===void 0){var O=Object.getPrototypeOf(E);return O===null?void 0:S(O,A,k)}else{if("value"in T)return T.value;var F=T.get;return F===void 0?void 0:F.call(k)}},s=i(0),u=m(s),l=i(5),h=m(l),c=i(9),f=m(c),d=i(13),p=m(d);function m(S){return S&&S.__esModule?S:{default:S}}function g(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function y(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function v(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}var b=function(S){v(E,S);function E(){return g(this,E),y(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"replaceWith",value:function(k){this.domNode.textContent=this.domNode.textContent,this.attach(),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,k)}},{key:"highlight",value:function(k){var T=this.domNode.textContent;this.cachedText!==T&&((T.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=k(T),this.domNode.normalize(),this.attach()),this.cachedText=T)}}]),E}(p.default);b.className="ql-syntax";var w=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),x=function(S){v(E,S),a(E,null,[{key:"register",value:function(){h.default.register(w,!0),h.default.register(b,!0)}}]);function E(A,k){g(this,E);var T=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,k));if(typeof T.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var O=null;return T.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(O),O=setTimeout(function(){T.highlight(),O=null},T.options.interval)}),T.highlight(),T}return a(E,[{key:"highlight",value:function(){var k=this;if(!this.quill.selection.composing){this.quill.update(h.default.sources.USER);var T=this.quill.getSelection();this.quill.scroll.descendants(b).forEach(function(O){O.highlight(k.options.highlight)}),this.quill.update(h.default.sources.SILENT),T!=null&&this.quill.setSelection(T,h.default.sources.SILENT)}}}]),E}(f.default);x.DEFAULTS={highlight:function(){return window.hljs==null?null:function(S){var E=window.hljs.highlightAuto(S);return E.value}}(),interval:1e3},r.CodeBlock=b,r.CodeToken=w,r.default=x},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var a=function E(A,k,T){A===null&&(A=Function.prototype);var O=Object.getOwnPropertyDescriptor(A,k);if(O===void 0){var F=Object.getPrototypeOf(A);return F===null?void 0:E(F,k,T)}else{if("value"in O)return O.value;var I=O.get;return I===void 0?void 0:I.call(T)}},o=function(){function E(A,k){for(var T=0;T<k.length;T++){var O=k[T];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}return function(A,k,T){return k&&E(A.prototype,k),T&&E(A,T),A}}(),s=i(3),u=g(s),l=i(8),h=g(l),c=i(43),f=g(c),d=i(15),p=i(41),m=g(p);function g(E){return E&&E.__esModule?E:{default:E}}function y(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function v(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function b(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var w=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],x=function(E){b(A,E);function A(k,T){y(this,A),T.modules.toolbar!=null&&T.modules.toolbar.container==null&&(T.modules.toolbar.container=w);var O=v(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,k,T));return O.quill.container.classList.add("ql-bubble"),O}return o(A,[{key:"extendToolbar",value:function(T){this.tooltip=new S(this.quill,this.options.bounds),this.tooltip.root.appendChild(T.container),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),m.default)}}]),A}(f.default);x.DEFAULTS=(0,u.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){A?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var S=function(E){b(A,E);function A(k,T){y(this,A);var O=v(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,k,T));return O.quill.on(h.default.events.EDITOR_CHANGE,function(F,I,R,U){if(F===h.default.events.SELECTION_CHANGE)if(I!=null&&I.length>0&&U===h.default.sources.USER){O.show(),O.root.style.left="0px",O.root.style.width="",O.root.style.width=O.root.offsetWidth+"px";var B=O.quill.getLines(I.index,I.length);if(B.length===1)O.position(O.quill.getBounds(I));else{var W=B[B.length-1],Y=O.quill.getIndex(W),z=Math.min(W.length()-1,I.index+I.length-Y),j=O.quill.getBounds(new d.Range(Y,z));O.position(j)}}else document.activeElement!==O.textbox&&O.quill.hasFocus()&&O.hide()}),O}return o(A,[{key:"listen",value:function(){var T=this;a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){T.root.classList.remove("ql-editing")}),this.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!T.root.classList.contains("ql-hidden")){var O=T.quill.getSelection();O!=null&&T.position(T.quill.getBounds(O))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(T){var O=a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"position",this).call(this,T),F=this.root.querySelector(".ql-tooltip-arrow");if(F.style.marginLeft="",O===0)return O;F.style.marginLeft=-1*O-F.offsetWidth/2+"px"}}]),A}(c.BaseTooltip);S.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=S,r.default=x},function(t,r,i){t.exports=i(63)}]).default})}(eN)),eN.exports}var Bc,qK;function bNe(){if(qK)return Bc;qK=1;var n=Bc&&Bc.__extends||function(){var h=function(c,f){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var m in p)p.hasOwnProperty(m)&&(d[m]=p[m])},h(c,f)};return function(c,f){h(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),e=Bc&&Bc.__assign||function(){return e=Object.assign||function(h){for(var c,f=1,d=arguments.length;f<d;f++){c=arguments[f];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(h[p]=c[p])}return h},e.apply(this,arguments)},t=Bc&&Bc.__spreadArrays||function(){for(var h=0,c=0,f=arguments.length;c<f;c++)h+=arguments[c].length;for(var d=Array(h),p=0,c=0;c<f;c++)for(var m=arguments[c],g=0,y=m.length;g<y;g++,p++)d[p]=m[g];return d},r=Bc&&Bc.__importDefault||function(h){return h&&h.__esModule?h:{default:h}},i=r(ox()),a=r(NB()),o=r(mNe()),s=r(vNe()),u=function(h){n(c,h);function c(f){var d=h.call(this,f)||this;d.dirtyProps=["modules","formats","bounds","theme","children"],d.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],d.state={generation:0},d.selection=null,d.onEditorChange=function(m,g,y,v){var b,w,x,S;m==="text-change"?(w=(b=d).onEditorChangeText)===null||w===void 0||w.call(b,d.editor.root.innerHTML,g,v,d.unprivilegedEditor):m==="selection-change"&&((S=(x=d).onEditorChangeSelection)===null||S===void 0||S.call(x,g,v,d.unprivilegedEditor))};var p=d.isControlled()?f.value:f.defaultValue;return d.value=p??"",d}return c.prototype.validateProps=function(f){var d;if(i.default.Children.count(f.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(f.children)){var p=i.default.Children.only(f.children);if(((d=p)===null||d===void 0?void 0:d.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&f.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},c.prototype.shouldComponentUpdate=function(f,d){var p=this,m;if(this.validateProps(f),!this.editor||this.state.generation!==d.generation)return!0;if("value"in f){var g=this.getEditorContents(),y=(m=f.value,m??"");this.isEqualValue(y,g)||this.setEditorContents(this.editor,y)}return f.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,f.readOnly),t(this.cleanProps,this.dirtyProps).some(function(v){return!o.default(f[v],p.props[v])})},c.prototype.shouldComponentRegenerate=function(f){var d=this;return this.dirtyProps.some(function(p){return!o.default(f[p],d.props[p])})},c.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},c.prototype.componentWillUnmount=function(){this.destroyEditor()},c.prototype.componentDidUpdate=function(f,d){var p=this;if(this.editor&&this.shouldComponentRegenerate(f)){var m=this.editor.getContents(),g=this.editor.getSelection();this.regenerationSnapshot={delta:m,selection:g},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==d.generation){var y=this.regenerationSnapshot,m=y.delta,v=y.selection;delete this.regenerationSnapshot,this.instantiateEditor();var b=this.editor;b.setContents(m),l(function(){return p.setEditorSelection(b,v)})}},c.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},c.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},c.prototype.isControlled=function(){return"value"in this.props},c.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},c.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},c.prototype.createEditor=function(f,d){var p=new s.default(f,d);return d.tabIndex!=null&&this.setEditorTabIndex(p,d.tabIndex),this.hookEditor(p),p},c.prototype.hookEditor=function(f){this.unprivilegedEditor=this.makeUnprivilegedEditor(f),f.on("editor-change",this.onEditorChange)},c.prototype.unhookEditor=function(f){f.off("editor-change",this.onEditorChange)},c.prototype.getEditorContents=function(){return this.value},c.prototype.getEditorSelection=function(){return this.selection},c.prototype.isDelta=function(f){return f&&f.ops},c.prototype.isEqualValue=function(f,d){return this.isDelta(f)&&this.isDelta(d)?o.default(f.ops,d.ops):o.default(f,d)},c.prototype.setEditorContents=function(f,d){var p=this;this.value=d;var m=this.getEditorSelection();typeof d=="string"?f.setContents(f.clipboard.convert(d)):f.setContents(d),l(function(){return p.setEditorSelection(f,m)})},c.prototype.setEditorSelection=function(f,d){if(this.selection=d,d){var p=f.getLength();d.index=Math.max(0,Math.min(d.index,p-1)),d.length=Math.max(0,Math.min(d.length,p-1-d.index)),f.setSelection(d)}},c.prototype.setEditorTabIndex=function(f,d){var p,m;!((m=(p=f)===null||p===void 0?void 0:p.scroll)===null||m===void 0)&&m.domNode&&(f.scroll.domNode.tabIndex=d)},c.prototype.setEditorReadOnly=function(f,d){d?f.disable():f.enable()},c.prototype.makeUnprivilegedEditor=function(f){var d=f;return{getHTML:function(){return d.root.innerHTML},getLength:d.getLength.bind(d),getText:d.getText.bind(d),getContents:d.getContents.bind(d),getSelection:d.getSelection.bind(d),getBounds:d.getBounds.bind(d)}},c.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var f=a.default.findDOMNode(this.editingArea);if(!f)throw new Error("Cannot find element for editing area");if(f.nodeType===3)throw new Error("Editing area cannot be a text node");return f},c.prototype.renderEditingArea=function(){var f=this,d=this.props,p=d.children,m=d.preserveWhitespace,g=this.state.generation,y={key:g,ref:function(v){f.editingArea=v}};return i.default.Children.count(p)?i.default.cloneElement(i.default.Children.only(p),y):m?i.default.createElement("pre",e({},y)):i.default.createElement("div",e({},y))},c.prototype.render=function(){var f;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(f=this.props.className,f??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},c.prototype.onEditorChangeText=function(f,d,p,m){var g,y;if(this.editor){var v=this.isDelta(this.value)?m.getContents():m.getHTML();v!==this.getEditorContents()&&(this.lastDeltaChangeSet=d,this.value=v,(y=(g=this.props).onChange)===null||y===void 0||y.call(g,f,d,p,m))}},c.prototype.onEditorChangeSelection=function(f,d,p){var m,g,y,v,b,w;if(this.editor){var x=this.getEditorSelection(),S=!x&&f,E=x&&!f;o.default(f,x)||(this.selection=f,(g=(m=this.props).onChangeSelection)===null||g===void 0||g.call(m,f,d,p),S?(v=(y=this.props).onFocus)===null||v===void 0||v.call(y,f,d,p):E&&((w=(b=this.props).onBlur)===null||w===void 0||w.call(b,x,d,p)))}},c.prototype.focus=function(){this.editor&&this.editor.focus()},c.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},c.displayName="React Quill",c.Quill=s.default,c.defaultProps={theme:"snow",modules:{},readOnly:!1},c}(i.default.Component);function l(h){Promise.resolve().then(h)}return Bc=u,Bc}var wNe=bNe();const xNe=Fp(wNe),_Ne=[{label:" ",value:"default"},{label:"Arial",value:"Arial"},{label:"David",value:"David"},{label:"Times New Roman",value:"Times New Roman"},{label:"Tahoma",value:"Tahoma"},{label:"Verdana",value:"Verdana"}],SNe=["bold","italic","underline","strike","color","background","font","size","align"],CNe=({text:n,onSave:e,onClose:t})=>{const[r,i]=pe.useState(n),[a,o]=pe.useState("default"),[s,u]=pe.useState("#000000"),[l,h]=pe.useState("#ffffff"),c=pe.useRef(null),f=m=>{c.current&&c.current.getEditor().format("color",m)},d=m=>{c.current&&c.current.getEditor().format("background",m)};pe.useEffect(()=>{if(c.current){const m=c.current.getEditor().root;m.style.fontFamily=a}},[a]);const p=()=>{var g;const m=(g=c.current)==null?void 0:g.getEditor().root.innerHTML;console.log("HTML :",m),e(m||"")};return Ie.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center",children:Ie.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px]",children:[Ie.jsx("h2",{className:"text-lg font-bold mb-2",children:" "}),Ie.jsx("div",{className:"quill-container",children:Ie.jsx(xNe,{ref:c,value:r,onChange:i,formats:SNe})}),Ie.jsxs("div",{className:"flex flex-col mt-4",children:[Ie.jsxs(c9,{className:"mb-2",children:[Ie.jsx(f9,{children:" "}),Ie.jsx(OR,{value:a,onChange:m=>o(m.target.value),children:_Ne.map(m=>Ie.jsx(A6,{value:m.value,children:m.label},m.value))})]}),Ie.jsxs("div",{className:"flex items-center mb-4",children:[Ie.jsx("label",{className:"mr-2",children:" :"}),Ie.jsx("input",{type:"color",value:s,onChange:m=>{u(m.target.value),f(m.target.value)}}),Ie.jsx("label",{className:"mr-4 ml-4",children:" :"}),Ie.jsx("input",{type:"color",value:l,onChange:m=>{h(m.target.value),d(m.target.value)}})]})]}),Ie.jsxs("div",{className:"mt-4 flex justify-end",children:[Ie.jsx(Go,{onClick:p,variant:"contained",color:"primary",children:""}),Ie.jsx(Go,{onClick:t,variant:"contained",color:"secondary",className:"ml-2",children:""})]})]})})};function ENe({text:n}){const e=t=>{t.dataTransfer.setData("text/plain",n)};return Ie.jsx("p",{draggable:"true",dangerouslySetInnerHTML:{__html:n},onDragStart:e,style:{cursor:"grab",padding:"10px",backgroundColor:"#fff",display:"inline-block",borderRadius:"5px"}})}const TNe=({paragraphs:n,setParagraphs:e})=>{const[t,r]=pe.useState(null),i=(a,o)=>{const s=[...n];s[a]=o,e(s),r(null)};return Ie.jsxs("div",{className:"w-1/3 border-r p-4 h-screen overflow-auto",children:[Ie.jsx("h2",{className:"text-xl font-bold mb-2",children:" "}),n.map((a,o)=>Ie.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[Ie.jsx(ENe,{text:a}),Ie.jsx(Go,{onClick:()=>r(o),children:Ie.jsx(n3e,{})}),t===o&&Ie.jsx(uD,{open:!0,children:Ie.jsx(xl,{sx:UR,children:Ie.jsx(CNe,{text:a,onSave:s=>i(o,s),onClose:()=>r(null)})})})]},o))]})},Bae=pe.createContext({dragDropManager:void 0});function Hl(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var VK=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),HK=function(){return Math.random().toString(36).substring(7).split("").join(".")},GK={INIT:"@@redux/INIT"+HK(),REPLACE:"@@redux/REPLACE"+HK()};function DNe(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function zae(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Hl(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Hl(1));return t(zae)(n,e)}if(typeof n!="function")throw new Error(Hl(2));var i=n,a=e,o=[],s=o,u=!1;function l(){s===o&&(s=o.slice())}function h(){if(u)throw new Error(Hl(3));return a}function c(m){if(typeof m!="function")throw new Error(Hl(4));if(u)throw new Error(Hl(5));var g=!0;return l(),s.push(m),function(){if(g){if(u)throw new Error(Hl(6));g=!1,l();var v=s.indexOf(m);s.splice(v,1),o=null}}}function f(m){if(!DNe(m))throw new Error(Hl(7));if(typeof m.type>"u")throw new Error(Hl(8));if(u)throw new Error(Hl(9));try{u=!0,a=i(a,m)}finally{u=!1}for(var g=o=s,y=0;y<g.length;y++){var v=g[y];v()}return m}function d(m){if(typeof m!="function")throw new Error(Hl(10));i=m,f({type:GK.REPLACE})}function p(){var m,g=c;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Hl(11));function b(){v.next&&v.next(h())}b();var w=g(b);return{unsubscribe:w}}},m[VK]=function(){return this},m}return f({type:GK.INIT}),r={dispatch:f,subscribe:c,getState:h,replaceReducer:d},r[VK]=p,r}function Yn(n,e,...t){if(ANe()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return t[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function ANe(){return typeof process<"u"&&!0}function kNe(n,e,t){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:t||null,n)}function NNe(n,e){return n.filter(t=>t!==e)}function Wae(n){return typeof n=="object"}function ONe(n,e){const t=new Map,r=a=>{t.set(a,t.has(a)?t.get(a)+1:1)};n.forEach(r),e.forEach(r);const i=[];return t.forEach((a,o)=>{a===1&&i.push(o)}),i}function RNe(n,e){return n.filter(t=>e.indexOf(t)>-1)}const T7="dnd-core/INIT_COORDS",_I="dnd-core/BEGIN_DRAG",D7="dnd-core/PUBLISH_DRAG_SOURCE",SI="dnd-core/HOVER",CI="dnd-core/DROP",EI="dnd-core/END_DRAG";function XK(n,e){return{type:T7,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const INe={type:T7,payload:{clientOffset:null,sourceClientOffset:null}};function FNe(n){return function(t=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:a,getSourceClientOffset:o}=r,s=n.getMonitor(),u=n.getRegistry();n.dispatch(XK(a)),PNe(t,s,u);const l=UNe(t,s);if(l==null){n.dispatch(INe);return}let h=null;if(a){if(!o)throw new Error("getSourceClientOffset must be defined");LNe(o),h=o(l)}n.dispatch(XK(a,h));const f=u.getSource(l).beginDrag(s,l);if(f==null)return;MNe(f),u.pinSource(l);const d=u.getSourceType(l);return{type:_I,payload:{itemType:d,item:f,sourceId:l,clientOffset:a||null,sourceClientOffset:h||null,isSourcePublic:!!i}}}}function PNe(n,e,t){Yn(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(r){Yn(t.getSource(r),"Expected sourceIds to be registered.")})}function LNe(n){Yn(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function MNe(n){Yn(Wae(n),"Item must be an object.")}function UNe(n,e){let t=null;for(let r=n.length-1;r>=0;r--)if(e.canDragSource(n[r])){t=n[r];break}return t}function BNe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zNe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){BNe(n,i,t[i])})}return n}function WNe(n){return function(t={}){const r=n.getMonitor(),i=n.getRegistry();jNe(r),VNe(r).forEach((o,s)=>{const u=$Ne(o,s,i,r),l={type:CI,payload:{dropResult:zNe({},t,u)}};n.dispatch(l)})}}function jNe(n){Yn(n.isDragging(),"Cannot call drop while not dragging."),Yn(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function $Ne(n,e,t,r){const i=t.getTarget(n);let a=i?i.drop(r,n):void 0;return qNe(a),typeof a>"u"&&(a=e===0?{}:r.getDropResult()),a}function qNe(n){Yn(typeof n>"u"||Wae(n),"Drop result must either be an object or undefined.")}function VNe(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function HNe(n){return function(){const t=n.getMonitor(),r=n.getRegistry();GNe(t);const i=t.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(t,i),r.unpinSource()),{type:EI}}}function GNe(n){Yn(n.isDragging(),"Cannot call endDrag while not dragging.")}function nU(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function XNe(n){return function(t,{clientOffset:r}={}){KNe(t);const i=t.slice(0),a=n.getMonitor(),o=n.getRegistry(),s=a.getItemType();return QNe(i,o,s),YNe(i,a,o),ZNe(i,a,o),{type:SI,payload:{targetIds:i,clientOffset:r||null}}}}function KNe(n){Yn(Array.isArray(n),"Expected targetIds to be an array.")}function YNe(n,e,t){Yn(e.isDragging(),"Cannot call hover while not dragging."),Yn(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<n.length;r++){const i=n[r];Yn(n.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const a=t.getTarget(i);Yn(a,"Expected targetIds to be registered.")}}function QNe(n,e,t){for(let r=n.length-1;r>=0;r--){const i=n[r],a=e.getTargetType(i);nU(a,t)||n.splice(r,1)}}function ZNe(n,e,t){n.forEach(function(r){t.getTarget(r).hover(e,r)})}function JNe(n){return function(){if(n.getMonitor().isDragging())return{type:D7}}}function eOe(n){return{beginDrag:FNe(n),publishDragSource:JNe(n),hover:XNe(n),drop:WNe(n),endDrag:HNe(n)}}class tOe{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function r(a){return(...o)=>{const s=a.apply(e,o);typeof s<"u"&&t(s)}}const i=eOe(this);return Object.keys(i).reduce((a,o)=>{const s=i[o];return a[o]=r(s),a},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function nOe(n,e){return{x:n.x+e.x,y:n.y+e.y}}function jae(n,e){return{x:n.x-e.x,y:n.y-e.y}}function rOe(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:r}=n;return!e||!t||!r?null:jae(nOe(e,r),t)}function iOe(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:jae(e,t)}const AC=[],A7=[];AC.__IS_NONE__=!0;A7.__IS_ALL__=!0;function aOe(n,e){return n===AC?!1:n===A7||typeof e>"u"?!0:RNe(e,n).length>0}class sOe{subscribeToStateChange(e,t={}){const{handlerIds:r}=t;Yn(typeof e=="function","listener must be a function."),Yn(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const a=()=>{const o=this.store.getState(),s=o.stateId;try{s===i||s===i+1&&!aOe(o.dirtyHandlerIds,r)||e()}finally{i=s}};return this.store.subscribe(a)}subscribeToOffsetChange(e){Yn(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==t&&(t=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return Yn(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(Yn(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return nU(r,i)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(Yn(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!nU(i,a))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(e);return r?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return rOe(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return iOe(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const KK=typeof global<"u"?global:self,$ae=KK.MutationObserver||KK.WebKitMutationObserver;function qae(n){return function(){const t=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(t),clearInterval(r),n()}}}function oOe(n){let e=1;const t=new $ae(n),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const uOe=typeof $ae=="function"?oOe:qae;class lOe{enqueueTask(e){const{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=uOe(this.flush),this.requestErrorThrow=qae(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class cOe{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class hOe{create(e){const t=this.freeTasks,r=t.length?t.pop():new cOe(this.onError,i=>t[t.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const Vae=new lOe,fOe=new hOe(Vae.registerPendingError);function dOe(n){Vae.enqueueTask(fOe.create(n))}const k7="dnd-core/ADD_SOURCE",N7="dnd-core/ADD_TARGET",O7="dnd-core/REMOVE_SOURCE",TI="dnd-core/REMOVE_TARGET";function pOe(n){return{type:k7,payload:{sourceId:n}}}function gOe(n){return{type:N7,payload:{targetId:n}}}function mOe(n){return{type:O7,payload:{sourceId:n}}}function yOe(n){return{type:TI,payload:{targetId:n}}}function vOe(n){Yn(typeof n.canDrag=="function","Expected canDrag to be a function."),Yn(typeof n.beginDrag=="function","Expected beginDrag to be a function."),Yn(typeof n.endDrag=="function","Expected endDrag to be a function.")}function bOe(n){Yn(typeof n.canDrop=="function","Expected canDrop to be a function."),Yn(typeof n.hover=="function","Expected hover to be a function."),Yn(typeof n.drop=="function","Expected beginDrag to be a function.")}function rU(n,e){if(e&&Array.isArray(n)){n.forEach(t=>rU(t,!1));return}Yn(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var sc;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(sc||(sc={}));let wOe=0;function xOe(){return wOe++}function _Oe(n){const e=xOe().toString();switch(n){case sc.SOURCE:return`S${e}`;case sc.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function YK(n){switch(n[0]){case"S":return sc.SOURCE;case"T":return sc.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function QK(n,e){const t=n.entries();let r=!1;do{const{done:i,value:[,a]}=t.next();if(a===e)return!0;r=!!i}while(!r);return!1}class SOe{addSource(e,t){rU(e),vOe(t);const r=this.addHandler(sc.SOURCE,e,t);return this.store.dispatch(pOe(r)),r}addTarget(e,t){rU(e,!0),bOe(t);const r=this.addHandler(sc.TARGET,e,t);return this.store.dispatch(gOe(r)),r}containsHandler(e){return QK(this.dragSources,e)||QK(this.dropTargets,e)}getSource(e,t=!1){return Yn(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Yn(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Yn(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Yn(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return YK(e)===sc.SOURCE}isTargetId(e){return YK(e)===sc.TARGET}removeSource(e){Yn(this.getSource(e),"Expected an existing source."),this.store.dispatch(mOe(e)),dOe(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Yn(this.getTarget(e),"Expected an existing target."),this.store.dispatch(yOe(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);Yn(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){Yn(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const i=_Oe(e);return this.types.set(i,t),e===sc.SOURCE?this.dragSources.set(i,r):e===sc.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const COe=(n,e)=>n===e;function EOe(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function TOe(n,e,t=COe){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!t(n[r],e[r]))return!1;return!0}function DOe(n=AC,e){switch(e.type){case SI:break;case k7:case N7:case TI:case O7:return AC;case _I:case D7:case EI:case CI:default:return A7}const{targetIds:t=[],prevTargetIds:r=[]}=e.payload,i=ONe(t,r);if(!(i.length>0||!TOe(t,r)))return AC;const o=r[r.length-1],s=t[t.length-1];return o!==s&&(o&&i.push(o),s&&i.push(s)),i}function AOe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kOe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){AOe(n,i,t[i])})}return n}const ZK={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function NOe(n=ZK,e){const{payload:t}=e;switch(e.type){case T7:case _I:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case SI:return EOe(n.clientOffset,t.clientOffset)?n:kOe({},n,{clientOffset:t.clientOffset});case EI:case CI:return ZK;default:return n}}function OOe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){OOe(n,i,t[i])})}return n}const ROe={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function IOe(n=ROe,e){const{payload:t}=e;switch(e.type){case _I:return Hb({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case D7:return Hb({},n,{isSourcePublic:!0});case SI:return Hb({},n,{targetIds:t.targetIds});case TI:return n.targetIds.indexOf(t.targetId)===-1?n:Hb({},n,{targetIds:NNe(n.targetIds,t.targetId)});case CI:return Hb({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case EI:return Hb({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function FOe(n=0,e){switch(e.type){case k7:case N7:return n+1;case O7:case TI:return n-1;default:return n}}function POe(n=0){return n+1}function LOe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MOe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){LOe(n,i,t[i])})}return n}function UOe(n={},e){return{dirtyHandlerIds:DOe(n.dirtyHandlerIds,{type:e.type,payload:MOe({},e.payload,{prevTargetIds:kNe(n,"dragOperation.targetIds",[])})}),dragOffset:NOe(n.dragOffset,e),refCount:FOe(n.refCount,e),dragOperation:IOe(n.dragOperation,e),stateId:POe(n.stateId)}}function BOe(n,e=void 0,t={},r=!1){const i=zOe(r),a=new sOe(i,new SOe(i)),o=new tOe(i,a),s=n(o,e,t);return o.receiveBackend(s),o}function zOe(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return zae(UOe,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function WOe(n,e){if(n==null)return{};var t=jOe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function jOe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}let JK=0;const tN=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Hae=pe.memo(function(e){var{children:t}=e,r=WOe(e,["children"]);const[i,a]=$Oe(r);return pe.useEffect(()=>{if(a){const o=Gae();return++JK,()=>{--JK===0&&(o[tN]=null)}}},[]),Ie.jsx(Bae.Provider,{value:i,children:t})});function $Oe(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=qOe(n.backend,n.context,n.options,n.debugMode),t=!n.context;return[e,t]}function qOe(n,e=Gae(),t,r){const i=e;return i[tN]||(i[tN]={dragDropManager:BOe(n,e,t,r)}),i[tN]}function Gae(){return typeof global<"u"?global:window}var qL,eY;function VOe(){return eY||(eY=1,qL=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),qL}var HOe=VOe();const GOe=Fp(HOe),DI=typeof window<"u"?pe.useLayoutEffect:pe.useEffect;function XOe(n,e,t){const[r,i]=pe.useState(()=>e(n)),a=pe.useCallback(()=>{const o=e(n);GOe(r,o)||(i(o),t&&t())},[r,n,t]);return DI(a),[r,a]}function KOe(n,e,t){const[r,i]=XOe(n,e,t);return DI(function(){const o=n.getHandlerId();if(o!=null)return n.subscribeToStateChange(i,{handlerIds:[o]})},[n,i]),r}function YOe(n,e,t){return KOe(e,n||(()=>({})),()=>t.reconnect())}function QOe(n,e){const t=[];return typeof n!="function"&&t.push(n),pe.useMemo(()=>typeof n=="function"?n():n,t)}let VL=!1;class ZOe{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;Yn(!VL,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return VL=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{VL=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function JOe(n,e,t){const r=t.getRegistry(),i=r.addTarget(n,e);return[i,()=>r.removeTarget(i)]}function eRe(n,e,t,r){let i;if(i!==void 0)return!!i;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const a=Object.keys(n),o=Object.keys(e);if(a.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<a.length;u++){const l=a[u];if(!s(l))return!1;const h=n[l],c=e[l];if(i=void 0,i===!1||i===void 0&&h!==c)return!1}return!0}function tRe(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function nRe(n){if(typeof n.type=="string")return;const e=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function rRe(n){return(e=null,t=null)=>{if(!pe.isValidElement(e)){const a=e;return n(a,t),a}const r=e;return nRe(r),aRe(r,t?a=>n(a,t):n)}}function iRe(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{const i=rRe(r);e[t]=()=>i}}),e}function tY(n,e){typeof n=="function"?n(e):n.current=e}function aRe(n,e){const t=n.ref;return Yn(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?pe.cloneElement(n,{ref:r=>{tY(t,r),tY(e,r)}}):pe.cloneElement(n,{ref:e})}class sRe{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!eRe(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=iRe({dropTarget:(t,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,tRe(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function R7(){const{dragDropManager:n}=pe.useContext(Bae);return Yn(n!=null,"Expected drag drop context"),n}function oRe(n){return pe.useMemo(()=>n.hooks.dropTarget(),[n])}function uRe(n){const e=R7(),t=pe.useMemo(()=>new sRe(e.getBackend()),[e]);return DI(()=>(t.dropTargetOptions=n||null,t.reconnect(),()=>t.disconnectDropTarget()),[n]),t}function lRe(){const n=R7();return pe.useMemo(()=>new ZOe(n),[n])}function cRe(n){const{accept:e}=n;return pe.useMemo(()=>(Yn(n.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class hRe{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function fRe(n,e){const t=pe.useMemo(()=>new hRe(n,e),[e]);return pe.useEffect(()=>{t.spec=n},[n]),t}function dRe(n,e,t){const r=R7(),i=fRe(n,e),a=cRe(n);DI(function(){const[s,u]=JOe(a,i,r);return e.receiveHandlerId(s),t.receiveHandlerId(s),u},[r,e,i,t,a.map(o=>o.toString()).join("|")])}function pRe(n,e){const t=QOe(n),r=lRe(),i=uRe(t.options);return dRe(t,r,i),[YOe(t.collect,r,i),oRe(i)]}function Xae(n){let e=null;return()=>(e==null&&(e=n()),e)}function gRe(n,e){return n.filter(t=>t!==e)}function mRe(n,e){const t=new Set,r=a=>t.add(a);n.forEach(r),e.forEach(r);const i=[];return t.forEach(a=>i.push(a)),i}class yRe{enter(e){const t=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=mRe(this.entered.filter(r),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=gRe(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class vRe{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(t[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Kae="__NATIVE_FILE__",Yae="__NATIVE_URL__",Qae="__NATIVE_TEXT__",Zae="__NATIVE_HTML__",nY=Object.freeze(Object.defineProperty({__proto__:null,FILE:Kae,HTML:Zae,TEXT:Qae,URL:Yae},Symbol.toStringTag,{value:"Module"}));function HL(n,e,t){const r=e.reduce((i,a)=>i||n.getData(a),"");return r??t}const iU={[Kae]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[Zae]:{exposeProperties:{html:(n,e)=>HL(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[Yae]:{exposeProperties:{urls:(n,e)=>HL(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[Qae]:{exposeProperties:{text:(n,e)=>HL(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function bRe(n,e){const t=iU[n];if(!t)throw new Error(`native type ${n} has no configuration`);const r=new vRe(t);return r.loadDataTransfer(e),r}function GL(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(iU).filter(t=>{const r=iU[t];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const wRe=Xae(()=>/firefox/i.test(navigator.userAgent)),Jae=Xae(()=>!!window.safari);class rY{interpolate(e){const{xs:t,ys:r,c1s:i,c2s:a,c3s:o}=this;let s=t.length-1;if(e===t[s])return r[s];let u=0,l=o.length-1,h;for(;u<=l;){h=Math.floor(.5*(u+l));const d=t[h];if(d<e)u=h+1;else if(d>e)l=h-1;else return r[h]}s=Math.max(0,l);const c=e-t[s],f=c*c;return r[s]+i[s]*c+a[s]*f+o[s]*c*f}constructor(e,t){const{length:r}=e,i=[];for(let d=0;d<r;d++)i.push(d);i.sort((d,p)=>e[d]<e[p]?-1:1);const a=[],o=[];let s,u;for(let d=0;d<r-1;d++)s=e[d+1]-e[d],u=t[d+1]-t[d],a.push(s),o.push(u/s);const l=[o[0]];for(let d=0;d<a.length-1;d++){const p=o[d],m=o[d+1];if(p*m<=0)l.push(0);else{s=a[d];const g=a[d+1],y=s+g;l.push(3*y/((y+g)/p+(y+s)/m))}}l.push(o[o.length-1]);const h=[],c=[];let f;for(let d=0;d<l.length-1;d++){f=o[d];const p=l[d],m=1/a[d],g=p+l[d+1]-f-f;h.push((f-p-g)*m),c.push(g*m*m)}this.xs=e,this.ys=t,this.c1s=l,this.c2s=h,this.c3s=c}}const xRe=1;function ese(n){const e=n.nodeType===xRe?n:n.parentElement;if(!e)return null;const{top:t,left:r}=e.getBoundingClientRect();return{x:r,y:t}}function _k(n){return{x:n.clientX,y:n.clientY}}function _Re(n){var e;return n.nodeName==="IMG"&&(wRe()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function SRe(n,e,t,r){let i=n?e.width:t,a=n?e.height:r;return Jae()&&n&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function CRe(n,e,t,r,i){const a=_Re(e),s=ese(a?n:e),u={x:t.x-s.x,y:t.y-s.y},{offsetWidth:l,offsetHeight:h}=n,{anchorX:c,anchorY:f}=r,{dragPreviewWidth:d,dragPreviewHeight:p}=SRe(a,e,l,h),m=()=>{let S=new rY([0,.5,1],[u.y,u.y/h*p,u.y+p-h]).interpolate(f);return Jae()&&a&&(S+=(window.devicePixelRatio-1)*p),S},g=()=>new rY([0,.5,1],[u.x,u.x/l*d,u.x+d-l]).interpolate(c),{offsetX:y,offsetY:v}=i,b=y===0||y,w=v===0||v;return{x:b?y:g(),y:w?v:m()}}class ERe{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function TRe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iY(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){TRe(n,i,t[i])})}return n}class DRe{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),a=o=>this.handleSelectStart(o);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",a),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),a=o=>this.handleDrop(o,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",a),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return iY({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return iY({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(nY).some(t=>nY[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=bRe(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&ese(a)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:a}=this;this.dragStartSourceIds=null;const o=_k(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=i,u=GL(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const h=this.monitor.getSourceId(),c=this.sourceNodes.get(h),f=this.sourcePreviewNodes.get(h)||c;if(f){const{anchorX:d,anchorY:p,offsetX:m,offsetY:g}=this.getCurrentSourcePreviewNodeOptions(),b=CRe(c,f,o,{anchorX:d,anchorY:p},{offsetX:m,offsetY:g});s.setDragImage(f,b.x,b.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:l}=this.getCurrentSourcePreviewNodeOptions();l?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(s&&!s.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:s}=i,u=GL(s);u&&this.beginDragNativeItem(u,s)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:a}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,a.length>0&&this.actions.hover(a,{clientOffset:_k(i)}),a.some(s=>this.monitor.canDropOnTarget(s))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:a}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=_k(i),this.scheduleHover(a),(a||[]).some(s=>this.monitor.canDropOnTarget(s))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var a;i.preventDefault(),(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else GL(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:a}=this;this.dropTargetIds=[],this.actions.hover(a,{clientOffset:_k(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))},this.options=new ERe(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new yRe(this.isNodeInDocument)}}const tse=function(e,t,r){return new DRe(e,t,r)};var mC={exports:{}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ARe=1e-7,kRe=1e-4;class NRe{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class nse{refCount(e){return cu("refCount")}incRef(e){return cu("incRef")}timerAvailable(){return!0}time(e){return cu("time")}read(e){return cu("read")}readSync(e){return cu("readSync")}readToGPU(e,t){return cu("readToGPU")}numDataIds(){return cu("numDataIds")}disposeData(e,t){return cu("disposeData")}write(e,t,r){return cu("write")}move(e,t,r,i,a){return cu("move")}createTensorFromGPUData(e,t,r){return cu("createTensorFromGPUData")}memory(){return cu("memory")}floatPrecision(){return cu("floatPrecision")}epsilon(){return this.floatPrecision()===32?ARe:kRe}dispose(){return cu("dispose")}}function cu(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rse(n){let e=n.length,t=0;for(;e>0;)t=Math.random()*e|0,e--,$N(n,e,t)}function ORe(n,e){if(n.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${n.length}Second array length was ${e.length}`);let t=n.length,r=0;for(;t>0;)r=Math.random()*t|0,t--,$N(n,t,r),$N(e,t,r)}function eE(n,e,t){return Math.max(n,Math.min(e,t))}function RRe(n){return n%2===0?n:n+1}function $N(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function IRe(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e}function FRe(n,e){const t=Math.random();return e*t+(1-t)*n}function PRe(n,e){let t=0;for(let r=0;r<n.length;r++){const i=Number(n[r])-Number(e[r]);t+=i*i}return t}function Fe(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function _o(n,e,t=""){Fe(gh(n,e),()=>t+` Shapes ${n} and ${e} must match`)}function R1(n){Fe(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Hr(n){if(n.length===0)return 1;let e=n[0];for(let t=1;t<n.length;t++)e*=n[t];return e}function LRe(n){return n.length===0}function ise(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==null&&e[t]!==null&&n[t]!==e[t])return!1;return!0}function gh(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Vw(n){return n%1===0}function MRe(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;{const e=Math.exp(2*n);return(e-1)/(e+1)}}function URe(n){const e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function BRe(n){const e=new Uint32Array(n);for(let t=0;t<n;++t)e[t]=t;return rse(e),e}function kC(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function zRe(n,e=i=>0,t,r){return new Promise((i,a)=>{let o=0;const s=()=>{if(n()){i();return}o++;const u=e(o);if(t!=null&&o>=t){a();return}r!=null?r(s,u):setTimeout(s,u)};s()})}function WRe(n,e){let t=1,r=-1;for(let a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(n[a]<0)throw Error(`Shapes can not be < 0. Found ${n[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${n}`);return n}if(t===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);const i=n.slice();return i[r]=e/t,i}function xD(n,e){const t=e.length;return n=n==null?e.map((r,i)=>i):[].concat(n),Fe(n.every(r=>r>=-t&&r<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${n}`),Fe(n.every(r=>Vw(r)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(r=>r<0?t+r:r)}function ase(n,e){const t=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:xD(e,n).sort();let o=0;for(let s=0;s<n.length;++s){if(a!=null){if(a[o]===s&&n[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${n[s]}' is not 1`);(a[o]==null||a[o]>s)&&n[s]===1&&(t.push(n[s]),r.push(s)),a[o]<=s&&o++}n[s]!==1&&(t.push(n[s]),r.push(s))}return{newShape:t,keptDims:r}}function sse(n,e){return I7(n,e)}function I7(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else if(n==="string")t=new Array(e);else throw new Error(`Unknown data type ${n}`);return t}function ose(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function use(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function jRe(n,e){return!(e==="complex64"||e==="float32"&&n!=="complex64"||e==="int32"&&n!=="float32"&&n!=="complex64"||e==="bool"&&n==="bool")}function qN(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function lse(n){if(n==null)return 0;let e=0;return n.forEach(t=>e+=t.length),e}function Dm(n){return typeof n=="string"||n instanceof String}function cse(n){return typeof n=="boolean"}function hse(n){return typeof n=="number"}function _D(n){return Array.isArray(n)?_D(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":hse(n)?"float32":Dm(n)?"string":cse(n)?"bool":"float32"}function Hm(n){return!!(n&&n.constructor&&n.call&&n.apply)}function VN(n,e){for(let t=e;t<n;++t)if(n%t===0)return t;return n}function vx(n){const e=n.length;if(e<2)return[];const t=new Array(e-1);t[e-2]=n[e-1];for(let r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function fse(n,e,t,r=!1){const i=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let o=0;o<a;o++)i[o]=t[n+o]}else{const a=e[0],o=e.slice(1),s=o.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<a;u++)i[u]=fse(n+u*s,o,t,r)}return i}function V0(n,e,t=!1){if(n.length===0)return e[0];const r=n.reduce((i,a)=>i*a)*(t?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${n}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return fse(0,n,e,t)}function $Re(n,e){if(Array.isArray(n))return n;if(e==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(e==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${e}`)}function F7(n,e){const t=AI(n,e);for(let r=0;r<t.length;r++)t[r]=1;return t}function AI(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${e}`)}function qRe(n,e){const t=n.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return V0(n,new Float32Array(t));if(e==="int32")return V0(n,new Int32Array(t));if(e==="bool")return V0(n,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function Lu(n){n.forEach(e=>{Fe(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function VRe(n,e,t){if(e===0)return 0;if(e===1)return n[0];let r=n[n.length-1];for(let i=0;i<n.length-1;++i)r+=t[i]*n[i];return r}function HRe(n,e,t){if(e===0)return[];if(e===1)return[n];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(n/t[i]),n-=r[i]*t[i];return r[r.length-1]=n,r}function Gm(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aY="tfjsflags";class dse{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=GRe,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(xn().getBool("IS_TEST")||xn().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];xn().getBool("IS_TEST")||xn().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Gm(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);aY in e&&e[aY].split(",").forEach(r=>{const[i,a]=r.split(":");this.urlFlags[i]=KRe(i,a)})}}function GRe(n){const e={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(XRe(e,r[0],r[1]),r.join("="))),e}function XRe(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function KRe(n,e){const t=e.toLowerCase();return t==="true"||t==="false"?t==="true":`${+t}`===t?+t:e}function xn(){return P7}let P7=null;function YRe(n){P7=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let XL;function pse(){if(XL==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");XL=n}return XL}function QRe(){const n=pse();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function L7(n,e){const t=QRe();if(t.has(n))return t.get(n);{const r=e();return t.set(n,r),t.get(n)}}const gse="Abs",mse="Acos",yse="Acosh",M7="Add",vse="AddN",bse="All",wse="Any",xse="ArgMax",_se="ArgMin",Sse="Asin",Cse="Asinh",Ese="Atan",Tse="Atanh",Dse="Atan2",Ase="AvgPool",ZRe="AvgPoolGrad",kse="AvgPool3D",JRe="AvgPool3DGrad",Nse="BatchMatMul",Ose="BatchToSpaceND",Rse="Bincount",Ise="BitwiseAnd",eIe="BroadcastTo",Fse="BroadcastArgs",U7="Cast",Pse="Ceil",Lse="ClipByValue",Mse="Complex",Use="ComplexAbs",Bse="Concat",zse="Conv2D",Wse="Conv2DBackpropFilter",jse="Conv2DBackpropInput",$se="Conv3D",tIe="Conv3DBackpropFilterV2",qse="Conv3DBackpropInputV2",Vse="Cos",Hse="Cosh",Gse="Cumprod",Xse="Cumsum",Kse="CropAndResize",Yse="DenseBincount",Qse="DepthToSpace",Zse="DepthwiseConv2dNative",Jse="DepthwiseConv2dNativeBackpropFilter",eoe="DepthwiseConv2dNativeBackpropInput",toe="Diag",noe="Dilation2D",nIe="Dilation2DBackpropInput",rIe="Dilation2DBackpropFilter",B7="Draw",roe="RealDiv",ioe="Einsum",aoe="Elu",iIe="EluGrad",soe="Erf",ooe="Equal",uoe="Exp",loe="ExpandDims",coe="Expm1",hoe="FFT",foe="Fill",doe="FlipLeftRight",poe="Floor",goe="FloorDiv",moe="FusedBatchNorm",yoe="GatherV2",voe="GatherNd",boe="Greater",woe="GreaterEqual",z7="Identity",xoe="IFFT",_oe="Imag",Soe="IsFinite",Coe="IsInf",Eoe="IsNan",Toe="LeakyRelu",Doe="Less",Aoe="LessEqual",koe="LinSpace",Noe="Log",Ooe="Log1p",Roe="LogicalAnd",Ioe="LogicalNot",Foe="LogicalOr",aIe="LogicalXor",sIe="LogSoftmax",oIe="LowerBound",Poe="LRN",uIe="LRNGrad",lIe="MatrixBandPart",Loe="Max",Moe="Maximum",Uoe="MaxPool",cIe="MaxPoolGrad",Boe="MaxPool3D",hIe="MaxPool3DGrad",zoe="MaxPoolWithArgmax",Woe="Mean",joe="Min",$oe="Minimum",qoe="MirrorPad",Voe="Mod",Hoe="Multinomial",Goe="Multiply",Xoe="Neg",Koe="NotEqual",Yoe="NonMaxSuppressionV3",Qoe="NonMaxSuppressionV4",Zoe="NonMaxSuppressionV5",Joe="OnesLike",eue="OneHot",tue="Pack",nue="PadV2",fIe="Pool",rue="Pow",iue="Prelu",aue="Prod",sue="RaggedGather",oue="RaggedRange",uue="RaggedTensorToTensor",lue="Range",cue="Real",hue="Reciprocal",fue="Relu",due="Reshape",pue="ResizeNearestNeighbor",dIe="ResizeNearestNeighborGrad",gue="ResizeBilinear",pIe="ResizeBilinearGrad",mue="Relu6",yue="Reverse",vue="Round",bue="Rsqrt",wue="ScatterNd",xue="TensorScatterUpdate",_ue="SearchSorted",Sue="Select",Cue="Selu",Eue="Slice",Tue="Sin",Due="Sinh",Aue="Sign",kue="Sigmoid",Nue="Softplus",Oue="Sqrt",Rue="Sum",Iue="SpaceToBatchND",Fue="SplitV",Pue="Softmax",Lue="SparseFillEmptyRows",Mue="SparseReshape",Uue="SparseSegmentMean",Bue="SparseSegmentSum",zue="SparseToDense",Wue="SquaredDifference",gIe="Square",jue="StaticRegexReplace",$ue="StridedSlice",que="StringNGrams",Vue="StringSplit",Hue="StringToHashBucketFast",Gue="Sub",Xue="Tan",Kue="Tanh",W7="Tile",Yue="TopK",Que="Transform",nN="Transpose",Zue="Unique",Jue="Unpack",ele="UnsortedSegmentSum",mIe="UpperBound",tle="ZerosLike",nle="Step",aU="FromPixels",rle="RotateWithOffset",sU="_FusedMatMul",oU="FusedConv2D",uU="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jg(...n){xn().getBool("IS_TEST")||xn().getBool("PROD")||console.warn(...n)}function yIe(...n){xn().getBool("IS_TEST")||xn().getBool("PROD")||console.log(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hw=L7("kernelRegistry",()=>new Map),tE=L7("gradRegistry",()=>new Map);function nE(n,e){const t=j7(n,e);return Hw.get(t)}function lU(n){return tE.get(n)}function HN(n){const e=Hw.entries(),t=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[a,o]=i,[s]=a.split("_");s===n&&t.push(o)}return t}function ile(n){const{kernelName:e,backendName:t}=n,r=j7(e,t);Hw.has(r)&&jg(`The kernel '${e}' for backend '${t}' is already registered`),Hw.set(r,n)}function vIe(n){const{kernelName:e}=n;tE.has(e)&&xn().getBool("DEBUG")&&jg(`Overriding the gradient for '${e}'`),tE.set(e,n)}function bIe(n,e){const t=j7(n,e);if(!Hw.has(t))throw new Error(`The kernel '${n}' for backend '${e}' is not registered`);Hw.delete(t)}function wIe(n){if(!tE.has(n))throw new Error(`The gradient '${n}' for backend is not registered`);tE.delete(n)}function xIe(n,e){HN(n).forEach(r=>{const i=Object.assign({},r,{backendName:e});ile(i)})}function j7(n,e){return`${e}_${n}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ale(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var KL,sY;function _Ie(){if(sY)return KL;sY=1,KL=e;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(T,O,F){this.low=T|0,this.high=O|0,this.unsigned=!!F}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function t(T){return(T&&T.__isLong__)===!0}e.isLong=t;var r={},i={};function a(T,O){var F,I,R;return O?(T>>>=0,(R=0<=T&&T<256)&&(I=i[T],I)?I:(F=s(T,(T|0)<0?-1:0,!0),R&&(i[T]=F),F)):(T|=0,(R=-128<=T&&T<128)&&(I=r[T],I)?I:(F=s(T,T<0?-1:0,!1),R&&(r[T]=F),F))}e.fromInt=a;function o(T,O){if(isNaN(T))return O?v:y;if(O){if(T<0)return v;if(T>=p)return E}else{if(T<=-9223372036854776e3)return A;if(T+1>=m)return S}return T<0?o(-T,O).neg():s(T%d|0,T/d|0,O)}e.fromNumber=o;function s(T,O,F){return new e(T,O,F)}e.fromBits=s;var u=Math.pow;function l(T,O,F){if(T.length===0)throw Error("empty string");if(T==="NaN"||T==="Infinity"||T==="+Infinity"||T==="-Infinity")return y;if(typeof O=="number"?(F=O,O=!1):O=!!O,F=F||10,F<2||36<F)throw RangeError("radix");var I;if((I=T.indexOf("-"))>0)throw Error("interior hyphen");if(I===0)return l(T.substring(1),O,F).neg();for(var R=o(u(F,8)),U=y,B=0;B<T.length;B+=8){var W=Math.min(8,T.length-B),Y=parseInt(T.substring(B,B+W),F);if(W<8){var z=o(u(F,W));U=U.mul(z).add(o(Y))}else U=U.mul(R),U=U.add(o(Y))}return U.unsigned=O,U}e.fromString=l;function h(T,O){return typeof T=="number"?o(T,O):typeof T=="string"?l(T,O):s(T.low,T.high,typeof O=="boolean"?O:T.unsigned)}e.fromValue=h;var c=65536,f=1<<24,d=c*c,p=d*d,m=p/2,g=a(f),y=a(0);e.ZERO=y;var v=a(0,!0);e.UZERO=v;var b=a(1);e.ONE=b;var w=a(1,!0);e.UONE=w;var x=a(-1);e.NEG_ONE=x;var S=s(-1,2147483647,!1);e.MAX_VALUE=S;var E=s(-1,-1,!0);e.MAX_UNSIGNED_VALUE=E;var A=s(0,-2147483648,!1);e.MIN_VALUE=A;var k=e.prototype;return k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},k.toString=function(O){if(O=O||10,O<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(A)){var F=o(O),I=this.div(F),R=I.mul(F).sub(this);return I.toString(O)+R.toInt().toString(O)}else return"-"+this.neg().toString(O);for(var U=o(u(O,6),this.unsigned),B=this,W="";;){var Y=B.div(U),z=B.sub(Y.mul(U)).toInt()>>>0,j=z.toString(O);if(B=Y,B.isZero())return j+W;for(;j.length<6;)j="0"+j;W=""+j+W}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,F=31;F>0&&(O&1<<F)==0;F--);return this.high!=0?F+33:F+1},k.isZero=function(){return this.high===0&&this.low===0},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return(this.low&1)===1},k.isEven=function(){return(this.low&1)===0},k.equals=function(O){return t(O)||(O=h(O)),this.unsigned!==O.unsigned&&this.high>>>31===1&&O.high>>>31===1?!1:this.high===O.high&&this.low===O.low},k.eq=k.equals,k.notEquals=function(O){return!this.eq(O)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(O){return this.comp(O)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(O){return this.comp(O)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(O){return this.comp(O)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(O){return this.comp(O)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(O){if(t(O)||(O=h(O)),this.eq(O))return 0;var F=this.isNegative(),I=O.isNegative();return F&&!I?-1:!F&&I?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(b)},k.neg=k.negate,k.add=function(O){t(O)||(O=h(O));var F=this.high>>>16,I=this.high&65535,R=this.low>>>16,U=this.low&65535,B=O.high>>>16,W=O.high&65535,Y=O.low>>>16,z=O.low&65535,j=0,M=0,q=0,H=0;return H+=U+z,q+=H>>>16,H&=65535,q+=R+Y,M+=q>>>16,q&=65535,M+=I+W,j+=M>>>16,M&=65535,j+=F+B,j&=65535,s(q<<16|H,j<<16|M,this.unsigned)},k.subtract=function(O){return t(O)||(O=h(O)),this.add(O.neg())},k.sub=k.subtract,k.multiply=function(O){if(this.isZero())return y;if(t(O)||(O=h(O)),n){var F=n.mul(this.low,this.high,O.low,O.high);return s(F,n.get_high(),this.unsigned)}if(O.isZero())return y;if(this.eq(A))return O.isOdd()?A:y;if(O.eq(A))return this.isOdd()?A:y;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(g)&&O.lt(g))return o(this.toNumber()*O.toNumber(),this.unsigned);var I=this.high>>>16,R=this.high&65535,U=this.low>>>16,B=this.low&65535,W=O.high>>>16,Y=O.high&65535,z=O.low>>>16,j=O.low&65535,M=0,q=0,H=0,K=0;return K+=B*j,H+=K>>>16,K&=65535,H+=U*j,q+=H>>>16,H&=65535,H+=B*z,q+=H>>>16,H&=65535,q+=R*j,M+=q>>>16,q&=65535,q+=U*z,M+=q>>>16,q&=65535,q+=B*Y,M+=q>>>16,q&=65535,M+=I*j+R*z+U*Y+B*W,M&=65535,s(H<<16|K,M<<16|q,this.unsigned)},k.mul=k.multiply,k.divide=function(O){if(t(O)||(O=h(O)),O.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&O.low===-1&&O.high===-1)return this;var F=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,O.low,O.high);return s(F,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?v:y;var I,R,U;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return v;if(O.gt(this.shru(1)))return w;U=v}else{if(this.eq(A)){if(O.eq(b)||O.eq(x))return A;if(O.eq(A))return b;var B=this.shr(1);return I=B.div(O).shl(1),I.eq(y)?O.isNegative()?b:x:(R=this.sub(O.mul(I)),U=I.add(R.div(O)),U)}else if(O.eq(A))return this.unsigned?v:y;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();U=y}for(R=this;R.gte(O);){I=Math.max(1,Math.floor(R.toNumber()/O.toNumber()));for(var W=Math.ceil(Math.log(I)/Math.LN2),Y=W<=48?1:u(2,W-48),z=o(I),j=z.mul(O);j.isNegative()||j.gt(R);)I-=Y,z=o(I,this.unsigned),j=z.mul(O);z.isZero()&&(z=b),U=U.add(z),R=R.sub(j)}return U},k.div=k.divide,k.modulo=function(O){if(t(O)||(O=h(O)),n){var F=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,O.low,O.high);return s(F,n.get_high(),this.unsigned)}return this.sub(this.div(O).mul(O))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return s(~this.low,~this.high,this.unsigned)},k.and=function(O){return t(O)||(O=h(O)),s(this.low&O.low,this.high&O.high,this.unsigned)},k.or=function(O){return t(O)||(O=h(O)),s(this.low|O.low,this.high|O.high,this.unsigned)},k.xor=function(O){return t(O)||(O=h(O)),s(this.low^O.low,this.high^O.high,this.unsigned)},k.shiftLeft=function(O){return t(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?s(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):s(0,this.low<<O-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(O){return t(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?s(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):s(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(O){if(t(O)&&(O=O.toInt()),O&=63,O===0)return this;var F=this.high;if(O<32){var I=this.low;return s(I>>>O|F<<32-O,F>>>O,this.unsigned)}else return O===32?s(F,0,this.unsigned):s(F>>>O-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},k.toBytes=function(O){return O?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var O=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,O&255,O>>>8&255,O>>>16&255,O>>>24]},k.toBytesBE=function(){var O=this.high,F=this.low;return[O>>>24,O>>>16&255,O>>>8&255,O&255,F>>>24,F>>>16&255,F>>>8&255,F&255]},e.fromBytes=function(O,F,I){return I?e.fromBytesLE(O,F):e.fromBytesBE(O,F)},e.fromBytesLE=function(O,F){return new e(O[0]|O[1]<<8|O[2]<<16|O[3]<<24,O[4]|O[5]<<8|O[6]<<16|O[7]<<24,F)},e.fromBytesBE=function(O,F){return new e(O[4]<<24|O[5]<<16|O[6]<<8|O[7],O[0]<<24|O[1]<<16|O[2]<<8|O[3],F)},KL}var sle=_Ie();const ole=Fp(sle),SIe=WJ({__proto__:null,default:ole},[sle]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _v=ole||SIe;function SD(n){return _v.fromString(n,!0,16)}const ule=SD("c3a5c85c97cb3127"),pv=SD("b492b66fbe98f273"),fo=SD("9ae16a3b2f90404f");function cU(n){return n.xor(n.shru(47))}function lle(n,e,t){const r=n.slice(e,e+t);return _v.fromBytes(Array.from(r),!0,!0)}function hi(n,e){return lle(n,e,8)}function oY(n,e){return lle(n,e,4)}function Ya(n,e){return e===0?n:n.shru(e).or(n.shl(64-e))}function Rm(n,e,t=SD("9ddfea08eb382d69")){let r=n.xor(e).mul(t);r=r.xor(r.shru(47));let i=e.xor(r).mul(t);return i=i.xor(i.shru(47)),i=i.mul(t),i}function CIe(n,e,t,r,i,a){i=i.add(n),a=Ya(a.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(t),a=a.add(Ya(i,44)),[i.add(r),a.add(o)]}function Sk(n,e,t,r){return CIe(hi(n,e),hi(n,e+8),hi(n,e+16),hi(n,e+24),t,r)}function EIe(n,e=n.length){if(e>=8){const t=fo.add(e*2),r=hi(n,0).add(fo),i=hi(n,e-8),a=Ya(i,37).mul(t).add(r),o=Ya(r,25).add(i).mul(t);return Rm(a,o,t)}if(e>=4){const t=fo.add(e*2),r=oY(n,0);return Rm(r.shl(3).add(e),oY(n,e-4),t)}if(e>0){const t=n[0],r=n[e>>1],i=n[e-1],a=t+(r<<8),o=e+(i<<2);return cU(fo.mul(a).xor(ule.mul(o))).mul(fo)}return fo}function TIe(n,e=n.length){const t=fo.add(e*2),r=hi(n,0).mul(pv),i=hi(n,8),a=hi(n,e-8).mul(t),o=hi(n,e-16).mul(fo);return Rm(Ya(r.add(i),43).add(Ya(a,30)).add(o),r.add(Ya(i.add(fo),18)).add(a),t)}function DIe(n,e=n.length){const t=fo.add(e*2),r=hi(n,0).mul(fo),i=hi(n,8),a=hi(n,e-8).mul(t),o=hi(n,e-16).mul(fo),s=Ya(r.add(i),43).add(Ya(a,30)).add(o),u=Rm(s,r.add(Ya(i.add(fo),18)).add(a),t),l=hi(n,16).mul(t),h=hi(n,24),c=s.add(hi(n,e-32)).mul(t),f=u.add(hi(n,e-24)).mul(t);return Rm(Ya(l.add(h),43).add(Ya(c,30)).add(f),l.add(Ya(h.add(r),18)).add(c),t)}function AIe(n,e=n.length){const t=_v.fromNumber(81,!0);if(e<=32)return e<=16?EIe(n,e):TIe(n,e);if(e<=64)return DIe(n,e);let r=t,i=t.mul(pv).add(113),a=cU(i.mul(fo).add(113)).mul(fo),o=[_v.UZERO,_v.UZERO],s=[_v.UZERO,_v.UZERO];r=r.mul(fo).add(hi(n,0));let u=0;const l=(e-1>>6)*64,h=l+(e-1&63)-63;do r=Ya(r.add(i).add(o[0]).add(hi(n,u+8)),37).mul(pv),i=Ya(i.add(o[1]).add(hi(n,u+48)),42).mul(pv),r=r.xor(s[1]),i=i.add(o[0]).add(hi(n,u+40)),a=Ya(a.add(s[0]),33).mul(pv),o=Sk(n,u,o[1].mul(pv),r.add(s[0])),s=Sk(n,u+32,a.add(s[1]),i.add(hi(n,u+16))),[a,r]=[r,a],u+=64;while(u!==l);const c=pv.add(a.and(255).shl(1));return u=h,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Ya(r.add(i).add(o[0]).add(hi(n,u+8)),37).mul(c),i=Ya(i.add(o[1]).add(hi(n,u+48)),42).mul(c),r=r.xor(s[1].mul(9)),i=i.add(o[0].mul(9).add(hi(n,u+40))),a=Ya(a.add(s[0]),33).mul(c),o=Sk(n,u,o[1].mul(c),r.add(s[0])),s=Sk(n,u+32,a.add(s[1]),i.add(hi(n,u+16))),[a,r]=[r,a],Rm(Rm(o[0],s[0],c).add(cU(i).mul(ule)).add(a),Rm(o[1],s[1],c).add(r),c)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kIe(n,e){return e==="string"?CD(n):kI([n],e)}function NIe(n,e){return n instanceof Float32Array&&e==="float32"||n instanceof Int32Array&&e==="int32"||n instanceof Uint8Array&&e==="bool"}function kI(n,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=Xm(n)),xn().getBool("DEBUG")&&ose(n,e),NIe(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){const t=new Uint8Array(n.length);for(let r=0;r<t.length;++r)Math.round(n[r])!==0&&(t[r]=1);return t}else throw new Error(`Unknown data type ${e}`)}function rE(){return xn().platform.now()}function OIe(n,e){return xn().platform.fetch(n,e)}function CD(n,e="utf-8"){return e=e||"utf-8",xn().platform.encode(n,e)}function GN(n,e="utf-8"){return e=e||"utf-8",xn().platform.decode(n,e)}function Qa(n){return xn().platform.isTypedArray!=null?xn().platform.isTypedArray(n):ale(n)}function Xm(n,e=[],t=!1){if(e==null&&(e=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||Gm(n)||n==null||Qa(n)&&t)e.push(n);else if(Array.isArray(n)||Qa(n))for(let r=0;r<n.length;++r)Xm(n[r],e,t);else{let r=-1;for(const i of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)Xm(n[i],e,t)}return e}const RIe=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:gh,arraysEqualWithNull:ise,assert:Fe,assertNonNegativeIntegerDimensions:Lu,assertNonNull:R1,assertShapesMatch:_o,bytesFromStringArray:lse,bytesPerElement:qN,checkConversionForErrors:ose,clamp:eE,computeStrides:vx,convertBackendValuesAndArrayBuffer:$Re,createScalarValue:kIe,createShuffledIndices:BRe,decodeString:GN,distSquared:PRe,encodeString:CD,fetch:OIe,fingerPrint64:AIe,flatten:Xm,getArrayFromDType:I7,getTypedArrayFromDType:sse,hasEncodingLoss:jRe,hexToLong:SD,indexToLoc:HRe,inferDtype:_D,inferFromImplicitShape:WRe,isBoolean:cse,isFunction:Hm,isInt:Vw,isNumber:hse,isPromise:Gm,isScalarShape:LRe,isString:Dm,isTypedArray:Qa,isValidDtype:use,locToIndex:VRe,makeOnesTypedArray:F7,makeZerosNestedTypedArray:qRe,makeZerosTypedArray:AI,nearestDivisor:VN,nearestLargerEven:RRe,now:rE,parseAxisParam:xD,randUniform:FRe,repeatedTry:zRe,rightPad:kC,shuffle:rse,shuffleCombo:ORe,sizeFromShape:Hr,sizeToSquarishShape:URe,squeezeShape:ase,sum:IRe,swap:$N,tanh:MRe,toNestedArray:V0,toTypedArray:kI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IIe{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new PIe)}profileKernel(e,t,r){let i;const a=()=>{i=r()};let o;const s=rE();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{a();for(const l of i)l.dataSync();o=Promise.resolve({kernelMs:rE()-s})}if(xn().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<i.length;l++){const h=i[l];h.data().then(c=>{FIe(c,h.dtype,e)})}return{kernelName:e,outputs:i,inputs:t,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:i,inputs:a,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),i,o]).then(u=>{this.logger.logKernelProfile(t,s,u[0],u[1],a,u[2])})})}}function FIe(n,e,t){if(e!=="float32")return!1;for(let r=0;r<n.length;r++){const i=n[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${t}'`),!0}return!1}class PIe{logKernelProfile(e,t,r,i,a,o){const s=typeof i=="number"?kC(`${i}ms`,9):i.error,u=kC(e,25),l=t.rank,h=t.size,c=kC(t.shape.toString(),14);let f="";for(const d in a){const p=a[d];if(p!=null){const m=p.shape||t.shape,g=m.length;f+=`${d}: ${g}D ${g>0?m:""} `}}console.log(`%c${u}	%c${s}	%c${l}D ${c}	%c${h}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(n,e,t){const r={},i={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<n.length;u++){const l=n[u],h=l.inputs;for(const c in h){const f=h[c];let d=!1;for(let p=0;p<e.length;p++)if(r[f.id]){l.outputs.forEach(m=>r[m.id]=!0),d=!0,i[l.id]=!0;break}if(d)break}}const a={};a[t.id]=!0;const o={};for(let u=n.length-1;u>=0;u--){const l=n[u],h=l.inputs;for(let c=0;c<l.outputs.length;c++)if(a[l.outputs[c].id]){for(const f in h)a[h[f].id]=!0,o[l.id]=!0;break}}const s=[];for(let u=0;u<n.length;u++){const l=n[u];if(i[l.id]&&o[l.id]){const h={};for(const f in l.inputs){const d=l.inputs[f];r[d.id]&&(h[f]=d)}const c=Object.assign({},l);c.inputs=h,c.outputs=l.outputs,s.push(c)}}return s}function MIe(n,e,t,r){for(let i=e.length-1;i>=0;i--){const a=e[i],o=[];if(a.outputs.forEach(u=>{const l=n[u.id];l!=null?o.push(l):o.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(o);for(const u in a.inputs){if(!(u in s))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(s)}.`);const l=t(()=>s[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const h=a.inputs[u];if(!gh(l.shape,h.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${h.shape}'`);if(n[h.id]==null)n[h.id]=l;else{const c=n[h.id];n[h.id]=r(c,l),c.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uY=20,K_=3,YL=7;function UIe(n,e,t,r){const i=vx(e),a=BIe(n,e,t,i),o=e.length,s=rN(n,e,t,i,a),u=["Tensor"];return r&&(u.push(`  dtype: ${t}`),u.push(`  rank: ${o}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(s.map(l=>"    "+l).join(`
`)),u.join(`
`)}function BIe(n,e,t,r){const i=Hr(e),a=r[r.length-1],o=new Array(a).fill(0),s=e.length,u=t==="complex64"?vC(n):n;if(s>1)for(let l=0;l<i/a;l++){const h=l*a;for(let c=0;c<a;c++)o[c]=Math.max(o[c],yC(u[h+c],0,t).length)}return o}function yC(n,e,t){let r;return Array.isArray(n)?r=`${parseFloat(n[0].toFixed(YL))} + ${parseFloat(n[1].toFixed(YL))}j`:Dm(n)?r=`'${n}'`:t==="bool"?r=cle(n):r=parseFloat(n.toFixed(YL)).toString(),kC(r,e)}function cle(n){return n===0?"false":"true"}function rN(n,e,t,r,i,a=!0){const o=t==="complex64"?2:1,s=e[0],u=e.length;if(u===0){if(t==="complex64"){const m=vC(n);return[yC(m[0],0,t)]}return t==="bool"?[cle(n[0])]:[n[0].toString()]}if(u===1){if(s>uY){const g=K_*o;let y=Array.from(n.slice(0,g)),v=Array.from(n.slice((s-K_)*o,s*o));return t==="complex64"&&(y=vC(y),v=vC(v)),["["+y.map((b,w)=>yC(b,i[w],t)).join(", ")+", ..., "+v.map((b,w)=>yC(b,i[s-K_+w],t)).join(", ")+"]"]}return["["+(t==="complex64"?vC(n):Array.from(n)).map((g,y)=>yC(g,i[y],t)).join(", ")+"]"]}const l=e.slice(1),h=r.slice(1),c=r[0]*o,f=[];if(s>uY){for(let m=0;m<K_;m++){const g=m*c,y=g+c;f.push(...rN(n.slice(g,y),l,t,h,i,!1))}f.push("...");for(let m=s-K_;m<s;m++){const g=m*c,y=g+c;f.push(...rN(n.slice(g,y),l,t,h,i,m===s-1))}}else for(let m=0;m<s;m++){const g=m*c,y=g+c;f.push(...rN(n.slice(g,y),l,t,h,i,m===s-1))}const d=u===2?",":"";f[0]="["+(s>0?f[0]+d:"");for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+d;let p=`,
`;for(let m=2;m<u;m++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(a?"":p),f}function vC(n){const e=[];for(let t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XN{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=Hr(e),r!=null){const i=r.length;Fe(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||I7(t,this.size),this.strides=vx(e)}set(e,...t){t.length===0&&(t=[0]),Fe(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const r=this.locToIndex(t);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(const i of e){if(i<0||i>=this.shape[t]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}t++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const t=new Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return nh().makeTensor(this.values,this.shape,this.dtype)}}let nh=null,u2=null;function zIe(n){nh=n}function WIe(n){u2=n}class Gi{constructor(e,t,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Hr(e),this.strides=vx(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return u2.buffer(this.shape,this.dtype,e)}bufferSync(){return u2.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return V0(this.shape,e,this.dtype==="complex64")}arraySync(){return V0(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=nh().read(this.dataId);if(this.dtype==="string"){const t=await e;try{return t.map(r=>GN(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),nh().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=nh().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>GN(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await nh().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),nh().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return u2.print(this,e)}clone(){return this.throwIfDisposed(),u2.clone(this)}toString(e=!1){const t=this.dataSync();return UIe(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),u2.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),nh().makeVariable(this,e,t,r)}}Object.defineProperty(Gi,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function hle(){return L7("Tensor",()=>Gi)}hle();class iE extends Gi{constructor(e,t,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!gh(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);nh().disposeTensor(this),this.dataId=e.dataId,nh().incRef(this,null)}dispose(){nh().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(iE,Symbol.hasInstance,{value:n=>n instanceof Gi&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var hU;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(hU||(hU={}));var fU;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(fU||(fU={}));var dU;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(dU||(dU={}));var pU;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(pU||(pU={}));var gU;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(gU||(gU={}));const jIe={float32:pU,int32:fU,bool:dU,complex64:gU};function NI(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${n} with ${e}`)}return jIe[n][e]}function $Ie(n){return NI(n,"int32")}function fle(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function dle(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wi(n,e){if(n.dtype===e.dtype)return[n,e];const t=NI(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function ple(n,e){Fe(n.dtype===e.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${e.dtype}) input must match`)}function qIe(n,e){return e.some(t=>t.id===n.id)}function $7(n){const e=[];return gle(n,e,new Set),e}function gle(n,e,t){if(n==null)return;if(n instanceof Gi){e.push(n);return}if(!VIe(n))return;const r=n;for(const i in r){const a=r[i];t.has(a)||(t.add(a),gle(a,e,t))}}function VIe(n){return Array.isArray(n)||typeof n=="object"}const HIe=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:ple,getTensorsInContainer:$7,isTensorInList:qIe,makeTypesMatch:Wi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QL(n){return n.kernelName!=null}class lY{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Gw{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new lY}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(jg(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new IIe(this.backendInstance),!0}setupRegisteredKernels(){HN(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){HN(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=t.factory();if(r&&!(r instanceof nse)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,a=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,jg(`Initialization of backend ${e} failed`),jg(o.stack||o.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return jg(`Initialization of backend ${e} failed`),jg(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t],{success:i,asyncInit:a}=this.initializeBackend(r);if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const r=this.state.tensorInfo.get(t),i=r.backend,a=this.readSync(t),o=i.refCount(t);i.disposeData(t,!0),r.backend=e,e.move(t,a,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=t(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,t,r){e();try{const i=r();return t(),i}catch(i){throw t(),i}}nextTensorId(){return Gw.nextTensorId++}nextVariableId(){return Gw.nextVariableId++}clone(e){const t=We.runKernel(z7,{x:e}),r={x:e},i=o=>({x:()=>{const s="float32",u={x:o},l={dtype:s};return We.runKernel(U7,u,l)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[t],i,a,{}),t}runKernel(e,t,r){if(this.backendName==null&&this.backend,!(nE(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){const i=this.backend.numDataIds();let a=0;r.forEach(u=>{a+=u.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-t-a-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,r=[];const i=this.isTapeOn(),a=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let u;const l=QL(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(QL(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=nE(p,this.backendName);Fe(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),s=()=>{const v=this.backend.numDataIds();u=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const b=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,b);const w=b.map(x=>x.rank!=null?x:this.makeTensorFromTensorInfo(x));if(i){const x=this.getTensorsForGradient(p,m,w);r=this.saveTensorsForBackwardMode(x)}return w}}else{const{forwardFunc:p}=e,m=g=>{i&&(r=g.map(y=>this.keep(this.clone(y))))};s=()=>{const g=this.backend.numDataIds();u=this.tidy(()=>p(this.backend,m));const y=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,g,y),y}}const{inputs:h,attrs:c}=e,f=QL(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=s():(d=this.profiler.profileKernel(l,h,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs)}),i&&this.addTapeNode(l,h,t,f,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(p=>h[p]!=null?h[p].shape:null),outputShapes:t.map(p=>p.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(u)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,t,r){const i=lU(e);if(i!=null){const a=i.inputsToSave||[],o=i.outputsToSave||[];let s;i.saveAllInputs?(Fe(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(t).map(l=>t[l])):s=a.map(l=>t[l]);const u=r.filter((l,h)=>o[h]);return s.concat(u)}return[]}makeTensor(e,t,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let a=e;r==="string"&&Dm(e[0])&&(a=e.map(u=>CD(u)));const o=i.write(a,t,r),s=new Gi(t,r,o,this.nextTensorId());if(this.trackTensor(s,i),r==="string"){const u=this.state.tensorInfo.get(o),l=lse(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s}makeTensorFromDataId(e,t,r,i){r=r||"float32";const a={dataId:e,shape:t,dtype:r};return this.makeTensorFromTensorInfo(a,i)}makeTensorFromTensorInfo(e,t){const{dataId:r,shape:i,dtype:a}=e,o=new Gi(i,a,r,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e,t=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const a=new iE(e,t,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*qN(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof iE||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*qN(e.dtype);this.state.numBytes-=r}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,r,i,a,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:a},u=lU(e);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=l=>(l=l.map((h,c)=>{if(h==null){const f=r[c],d=AI(f.size,f.dtype);return this.makeTensor(d,f.shape,f.dtype)}return h}),i(l.length>1?l:l[0],a,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=$7(e),r=new Set(t.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const o=this.state.activeScope.track[a];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(a=>{!a.kept&&a.scopeId===i.id&&this.track(a)})}gradients(e,t,r,i=!1){if(Fe(t.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Fe(a instanceof Gi,()=>"The result y returned by f() must be a tensor.");const o=LIe(this.state.activeTape,t,a);if(!i&&o.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[a.id]=r??GIe(a.shape),MIe(s,o,l=>this.tidy(l),XIe);const u=t.map(l=>s[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const h of l.saved)h.dispose()}),this.state.activeTape=null),{value:a,grads:u}})}customGrad(e){return Fe(Hm(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{Fe(t.every(s=>s instanceof Gi),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};t.forEach((s,u)=>{i[u]=s});const a=(s,u)=>(r=e(...t,u),Fe(r.value instanceof Gi,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Fe(Hm(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,u)=>{const l=r.gradFunc(s,u),h=Array.isArray(l)?l:[l];Fe(h.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Fe(h.every(f=>f instanceof Gi),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const c={};return h.forEach((f,d)=>{c[d]=()=>f}),c};return this.runKernelFunc({forwardFunc:a,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=rE(),r=await this.backend.time(e);return r.wallMs=rE()-t,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new lY;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Gw.nextTensorId=0;Gw.nextVariableId=0;function GIe(n){const e=F7(Hr(n),"float32");return We.makeTensor(e,n,"float32")}function mle(){const n=pse();if(n._tfengine==null){const e=new dse(n);n._tfengine=new Gw(e)}return YRe(n._tfengine.ENV),zIe(()=>n._tfengine),n._tfengine}const We=mle();function XIe(n,e){const t={a:n,b:e};return We.runKernel(M7,t)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(){return typeof navigator<"u"&&navigator!=null}let mU;function YIe(n){mU=n}function QIe(n){if(mU!==void 0)return mU;if(n||KIe()){if(n||(n=navigator),n.product==="ReactNative")return!0;const e=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!e){const t=n;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function yle(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const ZIe=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:yle,isMobile:QIe,mockIsMobile:YIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ko=xn();Ko.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ko.registerFlag("IS_BROWSER",()=>yle());Ko.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Ko.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ko.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Ko.registerFlag("PROD",()=>!1);Ko.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ko.getBool("DEBUG"));Ko.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ko.registerFlag("IS_TEST",()=>!1);Ko.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ko.getBool("DEBUG"));Ko.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ko.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Ko.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pf(n,e){let t=n;if(Qa(n))return e==="string"?[]:[n.length];if(fle(n)){const i=n.channels||"RGBA";return[n.height,n.width*i.length]}else if(dle(n))return[n.buffer.size/(e==null?4:qN(e))];if(!Array.isArray(n))return[];const r=[];for(;Array.isArray(t)||Qa(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&xn().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&vle(n,r,[]),r}function vle(n,e,t){if(t=t||[],!Array.isArray(n)&&!Qa(n)){Fe(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Fe(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${n.length} elements`),Fe(n.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const r=e.slice(1);for(let i=0;i<n.length;++i)vle(n[i],r,t.concat(i))}function cY(n,e,t,r){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==e||n==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${r}' must be ${n} tensor, but got ${e} tensor`)}}function Te(n,e,t,r="numeric"){if(n instanceof hle())return cY(r,n.dtype,e,t),n;let i=_D(n);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),cY(r,i,e,t),n==null||!Qa(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const u=n==null?"null":n.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${u}'`)}const a=Pf(n,i);!Qa(n)&&!Array.isArray(n)&&(n=[n]);const s=i!=="string"?kI(n,i):Xm(n,[],!0);return We.makeTensor(s,a,i)}function aE(n,e,t,r="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((a,o)=>Te(a,`${e}[${o}]`,t,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q7="__op";function ze(n){const e=Object.keys(n);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0];const r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+q7;const i=(...a)=>{We.startScope(t);try{const o=r(...a);return Gm(o)&&console.error("Cannot return a Promise inside of tidy."),We.endScope(o),o}catch(o){throw We.endScope(null),o}};return Object.defineProperty(i,"name",{value:t,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JIe(n,e){const t=Te(n,"real","complex"),r=Te(e,"imag","complex");_o(t.shape,r.shape,`real and imag shapes, ${t.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:t,imag:r};return We.runKernel(Mse,i)}const Ap=ze({complex_:JIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fy(n,e,t,r){if(r==null)r=_D(n);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(dle(n)||fle(n)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return We.backend.createTensorFromGPUData(n,e||t,r)}if(!Qa(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Lu(e);const i=Hr(e),a=Hr(t);Fe(i===a,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${a}`);for(let o=0;o<t.length;++o){const s=t[o],u=o===t.length-1?s!==Hr(e.slice(o)):!0;Fe(t[o]===e[o]||!u,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!Qa(n)&&!Array.isArray(n)&&(n=[n]),e=e||t,n=r!=="string"?kI(n,r):Xm(n,[],!0),We.makeTensor(n,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uh(n,e,t){const r=Pf(n,t);return fy(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u1={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class _h{static join(e){return new _h(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Qa(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=t+i.byteLength;this.shards.push({buffer:i,start:t,end:a}),t=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=t-e,a=new ArrayBuffer(i),o=new Uint8Array(a);let s=0;for(let u=r;u<this.shards.length;u++){const l=this.shards[u],c=e+s-l.start,f=s,p=Math.min(t,l.end)-l.start,m=new Uint8Array(l.buffer,c,p-c);if(o.set(m,f),s+=m.length,t<l.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(i){return e<i.start?-1:e>=i.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=e4e(this.shards,t);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function e4e(n,e){let t=0,r=n.length;for(;t<=r;){const i=Math.floor((r-t)/2)+t,a=e(n[i]);if(a===0)return i;a<0?r=i:t=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4e(){xn().set("PROD",!0)}function n4e(){xn().set("DEBUG",!0)}function r4e(){xn().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function i4e(n){xn().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function a4e(){We.disposeVariables()}function s4e(){return We}function o4e(){return We.memory()}function u4e(n){return We.profile(n)}function Nr(n,e){return We.tidy(n,e)}function bo(n){$7(n).forEach(t=>t.dispose())}function sh(n){return We.keep(n)}function l4e(n){return We.time(n)}function c4e(n){return We.setBackend(n)}function h4e(){return We.ready()}function ble(){return We.backendName}function f4e(n){We.removeBackend(n)}function d4e(n){return We.findBackend(n)}function p4e(n){return We.findBackendFactory(n)}function g4e(n,e,t=1){return We.registerBackend(n,e,t)}function wle(){return We.backend}function m4e(n,e){xn().setPlatform(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Km=4;async function y4e(n,e){const t=[],r=[],i=Array.isArray(n)?n.map(o=>o.name):Object.keys(n);for(let o=0;o<i.length;++o){const s=i[o],u=Array.isArray(n)?n[o].tensor:n[s];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${u.dtype}`);const l={name:s,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const h=new Promise(async c=>{const f=await u.bytes(),d=f.reduce((g,y)=>g+y.length,0)+Km*f.length,p=new Uint8Array(d);let m=0;for(let g=0;g<f.length;g++){const y=f[g],v=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(v,m),m+=Km,p.set(y,m),m+=y.length}c(p)});r.push(h)}else r.push(u.data());e!=null&&(l.group=e),t.push(l)}const a=await Promise.all(r);return{data:w4e(a),specs:t}}function xle(n,e){const t=new _h(n),r={};let i=0;for(const a of e){const o=v4e(a,(s,u)=>t.slice(i+s,i+u));r[a.name]=_le(a,t.slice(i,i+o)),i+=o}return r}function v4e(n,e){const t=Hr(n.shape);let r;if("quantization"in n){const i=n.quantization;r=u1[i.dtype]}else if(n.dtype==="string"){let i=0;for(let a=0;a<t;a++)i+=Km+new Uint32Array(e(i,i+Km))[0];return i}else r=u1[n.dtype];return t*r}async function b4e(n,e){const t=Hr(n.shape);let r;if("quantization"in n){const i=n.quantization;r=u1[i.dtype]}else if(n.dtype==="string"){let i=0;for(let a=0;a<t;a++)i+=Km+new Uint32Array(await e(i,i+Km))[0];return i}else r=u1[n.dtype];return t*r}function _le(n,e){const t=n.name,r=n.dtype,i=n.shape,a=Hr(i);let o,s=0;if("quantization"in n){const u=n.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${n.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${n.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${n.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const l=u1[u.dtype],h=u.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){o=new Float32Array(h.length);for(let c=0;c<h.length;c++){const f=h[c];o[c]=f*u.scale+u.min}}else if(u.dtype==="float16")o=D4e()(h);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);o=new Int32Array(h.length);for(let c=0;c<h.length;c++){const f=h[c];o[c]=Math.round(f*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);s+=a*l}else if(r==="string"){const u=Hr(n.shape);o=[];for(let l=0;l<u;l++){const h=new Uint32Array(e.slice(s,s+Km))[0];s+=Km;const c=new Uint8Array(e.slice(s,s+h));o.push(c),s+=h}}else{const u=u1[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const l=new Float32Array(o.length/2),h=new Float32Array(o.length/2);for(let p=0;p<l.length;p++)l[p]=o[p*2],h[p]=o[p*2+1];const c=uh(l,i,"float32"),f=uh(h,i,"float32"),d=Ap(c,f);return c.dispose(),f.dispose(),d}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);s+=a*u}return uh(o,i,r)}async function hY(n,e,t){let r=new Uint8Array(e);for(;r.byteLength<t;){const{done:i,value:a}=await n.read();if(i&&a==null){const s=t-r.byteLength;throw new Error(`Reader is done but ${s} bytes are still expected`)}const o=new Uint8Array(r.length+a.byteLength);o.set(r,0),o.set(new Uint8Array(a),r.length),r=o}return r.buffer}async function Sle(n,e){const t={},r=n.getReader();let i=new ArrayBuffer(0);for(const a of e){const o=await b4e(a,async(l,h)=>(i=await hY(r,i,h),i.slice(l,h)));i=await hY(r,i,o);const s=i.slice(0,o);i=i.slice(o);const u=_le(a,s);if(t[a.name]=u,ble()==="webgpu"){const l=wle();"uploadToGPU"in l&&Hr(u.shape)>=xn().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&l.uploadToGPU(u.dataId)}}return t}function w4e(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let e=0;const t=[];n.forEach(a=>{if(e+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let i=0;return t.forEach(a=>{r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}const V7=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function fY(n){return V7?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function x4e(n){if(V7)return Buffer.from(n).toString("base64");const e=new Uint8Array(n);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function _4e(n){if(V7){const r=Buffer.from(n,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t.set([e.charCodeAt(r)],r);return t.buffer}function S4e(n){return _h.join(n)}function dY(n){const e="/";for(n=n.trim();n.endsWith(e);)n=n.slice(0,n.length-1);const t=n.split(e);return t[t.length-1]}function Cle(n,e){const t={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:e};return n.signature!=null&&(t.signature=n.signature),n.userDefinedMetadata!=null&&(t.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(t.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(t.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(t.trainingConfig=n.trainingConfig),t}function H7(n,e,t){const r={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(r.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=t}return n.signature!=null&&(r.signature=n.signature),n.userDefinedMetadata!=null&&(r.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(r.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(r.initializerSignature=n.initializerSignature),r}async function G7(n,e){let t,r;return n.weightsManifest!=null&&([t,r]=await e(n.weightsManifest)),H7(n,t,r)}function ED(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:fY(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:fY(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new _h(n.weightData).byteLength}}function KN(n){const e=[];for(const t of n)e.push(...t.weights);return e}function C4e(){const n=t=>{let r=t<<13,i=0;for(;(r&8388608)===0;)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=n(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function E4e(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let e=1;e<31;e++)n[e]=e<<23;for(let e=33;e<63;e++)n[e]=2147483648+(e-32<<23);return n}function T4e(){const n=new Uint32Array(64);for(let e=0;e<64;e++)n[e]=1024;return n[0]=n[32]=0,n}function D4e(){const n=C4e(),e=E4e(),t=T4e();return r=>{const i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let o=0;o<r.length;o++){const s=r[o],u=n[t[s>>10]+(s&1023)]+e[s>>10];a[o]=u}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ui{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ui.instance==null&&(Ui.instance=new Ui),Ui.instance}static registerSaveRouter(e){Ui.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ui.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ui.getHandlers(e,"save")}static getLoadHandlers(e,t){return Ui.getHandlers(e,"load",t)}static getHandlers(e,t,r){const i=[];return(t==="load"?Ui.getInstance().loadRouters:Ui.getInstance().saveRouters).forEach(o=>{const s=o(e,r);s!==null&&i.push(s)}),i}}const A4e=n=>Ui.registerSaveRouter(n),k4e=n=>Ui.registerLoadRouter(n),N4e=n=>Ui.getSaveHandlers(n),O4e=(n,e)=>Ui.getLoadHandlers(n,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yU="tensorflowjs",vU=1,Ov="models_store",Am="model_info_store";function Ele(){if(!xn().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function bU(n){const e=n.result;e.createObjectStore(Ov,{keyPath:"modelPath"}),e.createObjectStore(Am,{keyPath:"modelPath"})}class l1{constructor(e){if(this.indexedDB=Ele(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((r,i)=>{const a=this.indexedDB.open(yU,vU);a.onupgradeneeded=()=>bU(a),a.onsuccess=()=>{const o=a.result;if(t==null){const s=o.transaction(Ov,"readonly"),l=s.objectStore(Ov).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=h=>(o.close(),i(l.error)),s.oncomplete=()=>o.close()}else{t.weightData=_h.join(t.weightData);const s=ED(t),u=o.transaction(Am,"readwrite");let l=u.objectStore(Am),h;try{h=l.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(f){return i(f)}let c;h.onsuccess=()=>{c=o.transaction(Ov,"readwrite");const f=c.objectStore(Ov);let d;try{d=f.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s})}catch(p){return i(p)}d.onsuccess=()=>r({modelArtifactsInfo:s}),d.onerror=p=>{l=u.objectStore(Am);const m=l.delete(this.modelPath);m.onsuccess=()=>(o.close(),i(d.error)),m.onerror=g=>(o.close(),i(d.error))}},h.onerror=f=>(o.close(),i(h.error)),u.oncomplete=()=>{c==null?o.close():c.oncomplete=()=>o.close()}}},a.onerror=o=>i(a.error)})}}l1.URL_SCHEME="indexeddb://";const Tle=n=>xn().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(l1.URL_SCHEME)?R4e(n.slice(l1.URL_SCHEME.length)):null;Ui.registerSaveRouter(Tle);Ui.registerLoadRouter(Tle);function R4e(n){return new l1(n)}function I4e(n){return n.startsWith(l1.URL_SCHEME)?n.slice(l1.URL_SCHEME.length):n}class F4e{constructor(){this.indexedDB=Ele()}async listModels(){return new Promise((e,t)=>{const r=this.indexedDB.open(yU,vU);r.onupgradeneeded=()=>bU(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(Am,"readonly"),s=a.objectStore(Am).getAll();s.onsuccess=()=>{const u={};for(const l of s.result)u[l.modelPath]=l.modelArtifactsInfo;e(u)},s.onerror=u=>(i.close(),t(s.error)),a.oncomplete=()=>i.close()},r.onerror=i=>t(r.error)})}async removeModel(e){return e=I4e(e),new Promise((t,r)=>{const i=this.indexedDB.open(yU,vU);i.onupgradeneeded=()=>bU(i),i.onsuccess=()=>{const a=i.result,o=a.transaction(Am,"readwrite"),s=o.objectStore(Am),u=s.get(e);let l;u.onsuccess=()=>{if(u.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const h=s.delete(e),c=()=>{l=a.transaction(Ov,"readwrite");const d=l.objectStore(Ov).delete(e);d.onsuccess=()=>t(u.result.modelArtifactsInfo),d.onerror=p=>r(u.error)};h.onsuccess=c,h.onerror=f=>(c(),a.close(),r(u.error))}},u.onerror=h=>(a.close(),r(u.error)),o.oncomplete=()=>{l==null?a.close():l.oncomplete=()=>a.close()}},i.onerror=a=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hp="/",l2="tensorflowjs_models",Dle="info",P4e="model_topology",L4e="weight_specs",M4e="weight_data",U4e="model_metadata";function Ale(n){return{info:[l2,n,Dle].join(hp),topology:[l2,n,P4e].join(hp),weightSpecs:[l2,n,L4e].join(hp),weightData:[l2,n,M4e].join(hp),modelMetadata:[l2,n,U4e].join(hp)}}function kle(n){for(const e of Object.values(n))window.localStorage.removeItem(e)}function B4e(n){const e=n.split(hp);if(e.length<3)throw new Error(`Invalid key format: ${n}`);return e.slice(1,e.length-1).join(hp)}function z4e(n){return n.startsWith(c1.URL_SCHEME)?n.slice(c1.URL_SCHEME.length):n}class c1{constructor(e){if(!xn().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Ale(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=ED(e),a=_h.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,x4e(a));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw kle(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=i;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const s=JSON.parse(a);t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,s.signature!=null&&(t.signature=s.signature),s.userDefinedMetadata!=null&&(t.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(t.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(t.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(t.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=_4e(o),t}}c1.URL_SCHEME="localstorage://";const Nle=n=>xn().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(c1.URL_SCHEME)?W4e(n.slice(c1.URL_SCHEME.length)):null;Ui.registerSaveRouter(Nle);Ui.registerLoadRouter(Nle);function W4e(n){return new c1(n)}class j4e{constructor(){Fe(xn().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Fe(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=l2+hp,r=hp+Dle;for(let i=0;i<this.LS.length;++i){const a=this.LS.key(i);if(a.startsWith(t)&&a.endsWith(r)){const o=B4e(a);e[o]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=z4e(e);const t=Ale(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(t.info));return kle(t),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T2="://";class ho{constructor(){this.managers={}}static getInstance(){return ho.instance==null&&(ho.instance=new ho),ho.instance}static registerManager(e,t){Fe(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(T2)&&(e=e.slice(0,e.indexOf(T2))),Fe(e.length>0,()=>"scheme must not be an empty string.");const r=ho.getInstance();Fe(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=t}static getManager(e){const t=ho.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(ho.getInstance().managers)}}function iN(n){if(n.indexOf(T2)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${ho.getSchemes().join(",")}`);return{scheme:n.split(T2)[0],path:n.split(T2)[1]}}async function Ole(n,e,t=!1){Fe(n!==e,()=>`Old path and new path are the same: '${n}'`);const r=Ui.getLoadHandlers(n);Fe(r.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),Fe(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${n}.`);const i=r[0],a=Ui.getSaveHandlers(e);Fe(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),Fe(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=a[0],s=iN(n).scheme,u=iN(n).path,l=s===iN(n).scheme,h=await i.load();t&&l&&await ho.getManager(s).removeModel(u);const c=await o.save(h);return t&&!l&&await ho.getManager(s).removeModel(u),c.modelArtifactsInfo}async function $4e(){const n=ho.getSchemes(),e={};for(const t of n){const r=await ho.getManager(t).listModels();for(const i in r){const a=t+T2+i;e[a]=r[i]}}return e}async function q4e(n){const e=iN(n);return ho.getManager(e.scheme).removeModel(e.path)}async function V4e(n,e){return Ole(n,e,!1)}async function H4e(n,e){return Ole(n,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G4e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!xn().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return ale(e)}}if(xn().get("IS_BROWSER")){xn().setPlatform("browser",new G4e);try{ho.registerManager(c1.URL_SCHEME,new j4e)}catch{}try{ho.registerManager(l1.URL_SCHEME,new F4e)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e={importFetch:()=>require("node-fetch")};let ZL;class K4e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return xn().global.fetch!=null?xn().global.fetch(e,t):(ZL==null&&(ZL=X4e.importFetch()),ZL(e,t))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}xn().get("IS_NODE")&&!xn().get("IS_BROWSER")&&xn().setPlatform("node",new K4e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lf(n,e="float32",t){return e=e||"float32",Lu(n),new XN(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y4e(n,e){const t=Te(n,"x","cast");if(!use(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:t},i={dtype:e};return We.runKernel(U7,r,i)}const pi=ze({cast_:Y4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q4e(n){const t={x:Te(n,"x","clone","string_or_numeric")};return We.runKernel(z7,t)}const pp=ze({clone_:Q4e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7(n,e=!1){console.log(n.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */mle();const Z4e={buffer:Lf,cast:pi,clone:pp,print:X7};WIe(Z4e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4e(n,e){let t=Te(n,"a","add"),r=Te(e,"b","add");[t,r]=Wi(t,r);const i={a:t,b:r};return We.runKernel(M7,i)}const wn=ze({add_:J4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5e(n,e){let t=Te(n,"a","floorDiv"),r=Te(e,"b","floorDiv");[t,r]=Wi(t,r);const i={a:t,b:r};return We.runKernel(goe,i)}const K7=ze({floorDiv_:e5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5e(n,e){let t=Te(n,"a","div"),r=Te(e,"b","div");if([t,r]=Wi(t,r),t.dtype==="int32"&&r.dtype==="int32")return K7(t,r);const i={a:t,b:r},a={};return We.runKernel(roe,i,a)}const di=ze({div_:t5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5e(n,e){let t=Te(n,"a","mul"),r=Te(e,"b","mul");[t,r]=Wi(t,r);const i={a:t,b:r};return We.runKernel(Goe,i)}const Pt=ze({mul_:n5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5e(n){const e=Te(n,"x","abs");if(e.dtype==="complex64"){const t={x:e};return We.runKernel(Use,t)}else{const t={x:e};return We.runKernel(gse,t)}}const xu=ze({abs_:r5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5e(n){const t={x:Te(n,"x","acos")};return We.runKernel(mse,t)}const Rle=ze({acos_:i5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a5e(n){const t={x:Te(n,"x","acosh")};return We.runKernel(yse,t)}const Ile=ze({acosh_:a5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5e(n){Fe(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),Fe(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const e=n.map((i,a)=>Te(i,`tensors${a}`,"addN")),t=e[0];e.forEach(i=>{if(i.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(i=>{if(!gh(i.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return We.runKernel(vse,r)}const Fle=ze({addN_:s5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5e(n,e=null,t=!1){const i={x:Te(n,"x","all","bool")},a={axis:e,keepDims:t};return We.runKernel(bse,i,a)}const Ple=ze({all_:o5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u5e(n,e=null,t=!1){const i={x:Te(n,"x","any","bool")},a={axis:e,keepDims:t};return We.runKernel(wse,i,a)}const Lle=ze({any_:u5e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l5e(n,e=0){const r={x:Te(n,"x","argMax")},i={axis:e};return We.runKernel(xse,r,i)}const Mle=ze({argMax_:l5e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5e(n,e=0){const r={x:Te(n,"x","argMin")},i={axis:e};return We.runKernel(_se,r,i)}const Ule=ze({argMin_:c5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h5e(n){const t={x:Te(n,"x","asin")};return We.runKernel(Sse,t)}const Ble=ze({asin_:h5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5e(n){const t={x:Te(n,"x","asinh")};return We.runKernel(Cse,t)}const zle=ze({asinh_:f5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5e(n){const t={x:Te(n,"x","atan")};return We.runKernel(Ese,t)}const Wle=ze({atan_:d5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5e(n,e){let t=Te(n,"a","atan2"),r=Te(e,"b","atan2");[t,r]=Wi(t,r);const i={a:t,b:r};return We.runKernel(Dse,i)}const jle=ze({atan2_:p5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g5e(n){const t={x:Te(n,"x","atanh")};return We.runKernel(Tse,t)}const $le=ze({atanh_:g5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(n,e,t,r,i="NHWC",a){const o=n[3],s=[...e,o],u=Hle(i);return TD(n,s,t,a,r,null,null,u)}function qle(n,e,t,r,i,a,o="channelsLast"){const[s,u]=sE(e);let l;if(o==="channelsLast")l=[s,u,n[3],n[3]];else if(o==="channelsFirst")l=[s,u,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return TD(n,l,t,r,i,a,!1,o)}function y5e(n,e,t,r,i,a,o="NDHWC"){const[s,u,l]=wU(e);let h,c;if(o==="NDHWC")c="channelsLast",h=[s,u,l,n[4],n[4]];else if(o==="NCDHW")c="channelsFirst",h=[s,u,l,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return Vle(n,h,t,r,i,!1,c,a)}function TD(n,e,t,r,i,a,o=!1,s="channelsLast"){let[u,l,h,c]=[-1,-1,-1,-1];if(s==="channelsLast")[u,l,h,c]=n;else if(s==="channelsFirst")[u,c,l,h]=n;else throw new Error(`Unknown dataFormat ${s}`);const[f,d,,p]=e,[m,g]=sE(t),[y,v]=sE(r),b=D2(f,y),w=D2(d,v),{padInfo:x,outHeight:S,outWidth:E}=w5e(i,l,h,m,g,b,w,a,s),A=o?p*c:p;let k;return s==="channelsFirst"?k=[u,A,S,E]:s==="channelsLast"&&(k=[u,S,E,A]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:h,inChannels:c,outHeight:S,outWidth:E,outChannels:A,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:d,effectiveFilterHeight:b,effectiveFilterWidth:w,dilationHeight:y,dilationWidth:v,inShape:n,outShape:k,filterShape:e}}function Vle(n,e,t,r,i,a=!1,o="channelsLast",s){let[u,l,h,c,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[u,l,h,c,f]=n;else if(o==="channelsFirst")[u,f,l,h,c]=n;else throw new Error(`Unknown dataFormat ${o}`);const[d,p,m,,g]=e,[y,v,b]=wU(t),[w,x,S]=wU(r),E=D2(d,w),A=D2(p,x),k=D2(m,S),{padInfo:T,outDepth:O,outHeight:F,outWidth:I}=x5e(i,l,h,c,y,v,b,E,A,k,s),R=a?g*f:g;let U;return o==="channelsFirst"?U=[u,R,O,F,I]:o==="channelsLast"&&(U=[u,O,F,I,R]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:h,inWidth:c,inChannels:f,outDepth:O,outHeight:F,outWidth:I,outChannels:R,padInfo:T,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:d,filterHeight:p,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:A,effectiveFilterWidth:k,dilationDepth:w,dilationHeight:x,dilationWidth:S,inShape:n,outShape:U,filterShape:e}}function v5e(n,e,t,r,i){r==null&&(r=Y7(n,e,t));const a=n[0],o=n[1],s=oE((a-e+2*r)/t+1,i),u=oE((o-e+2*r)/t+1,i);return[s,u]}function b5e(n,e,t,r,i,a){i==null&&(i=Y7(n,e[0],r[0]));const o=[0,0,0,t];for(let s=0;s<3;s++)n[s]+2*i>=e[s]&&(o[s]=oE((n[s]-e[s]+2*i)/r[s]+1,a));return o}function Y7(n,e,t,r=1){const i=D2(e,r);return Math.floor((n[0]*(t-1)-t+i)/2)}function sE(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function wU(n){return typeof n=="number"?[n,n,n]:n}function D2(n,e){return e<=1?n:n+(n-1)*(e-1)}function w5e(n,e,t,r,i,a,o,s,u){let l,h,c;if(typeof n=="number"){l={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const d=v5e([e,t],a,r,n,s);h=d[0],c=d[1]}else if(n==="same"){h=Math.ceil(e/r),c=Math.ceil(t/i);const f=Math.max(0,(h-1)*r+a-e),d=Math.max(0,(c-1)*i+o-t),p=Math.floor(f/2),m=f-p,g=Math.floor(d/2),y=d-g;l={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(n==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((e-a+1)/r),c=Math.ceil((t-o+1)/i);else if(typeof n=="object"){const f=u==="channelsLast"?n[1][0]:n[2][0],d=u==="channelsLast"?n[1][1]:n[2][1],p=u==="channelsLast"?n[2][0]:n[3][0],m=u==="channelsLast"?n[2][1]:n[3][1];l={top:f,bottom:d,left:p,right:m,type:f===0&&d===0&&p===0&&m===0?"VALID":"EXPLICIT"},h=oE((e-a+f+d)/r+1,s),c=oE((t-o+p+m)/i+1,s)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:l,outHeight:h,outWidth:c}}function x5e(n,e,t,r,i,a,o,s,u,l,h){let c,f,d,p;if(n==="valid"&&(n=0),typeof n=="number"){c={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const g=b5e([e,t,r,1],[s,u,l],1,[i,a,o],n,h);f=g[0],d=g[1],p=g[2]}else if(n==="same"){f=Math.ceil(e/i),d=Math.ceil(t/a),p=Math.ceil(r/o);const m=(f-1)*i+s-e,g=(d-1)*a+u-t,y=(p-1)*o+l-r,v=Math.floor(m/2),b=m-v,w=Math.floor(g/2),x=g-w,S=Math.floor(y/2),E=y-S;c={top:w,bottom:x,left:S,right:E,front:v,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:c,outDepth:f,outHeight:d,outWidth:p}}function oE(n,e){if(!e)return Math.trunc(n);switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${e}`)}}function uE(n){const[e,t,r]=sE(n);return e===1&&t===1&&r===1}function Lp(n,e){return uE(n)||uE(e)}function h1(n){return sE(n).every(e=>e>0)}function Hle(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function bc(n,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")Fe(Vw(e),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{Fe(Vw(i),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${i}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5e(n,e){const r={x:Te(n,"x","reshape","string_or_numeric")},i={shape:e};return We.runKernel(due,r,i)}const vt=ze({reshape_:_5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5e(n,e,t,r,i){const a=Te(n,"x","avgPool","float32"),o=1;Fe(Lp(t,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`);let s=a,u=!1;a.rank===3&&(u=!0,s=vt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Fe(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),bc("avgPool",r,i);const l={x:s},h={filterSize:e,strides:t,pad:r,dimRoundingMode:i};let c=We.runKernel(Ase,l,h);return c=pi(c,a.dtype),u?vt(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Q7=ze({avgPool_:S5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C5e(n,e,t,r,i,a="NDHWC"){const o=Te(n,"x","avgPool3d","float32");let s=o,u=!1;o.rank===4&&(u=!0,s=vt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Fe(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),Fe(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Fe(typeof t=="number"&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),bc("avgPool3d",r,i);const l={x:s},h={filterSize:e,strides:t,pad:r,dimRoundingMode:i,dataFormat:a};let c=We.runKernel(kse,l,h);return c=pi(c,s.dtype),u?vt(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}const Gle=ze({avgPool3d_:C5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5e(n,e=0){Fe(n.length>=1,()=>"Pass at least one tensor to concat");const t=aE(n,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),t.length===1)return pp(t[0]);const r=t,i={axis:e};return We.runKernel(Bse,r,i)}const Xs=ze({concat_:E5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5e(n,e,t=!1,r=!1){let i=Te(n,"a","matMul"),a=Te(e,"b","matMul");[i,a]=Wi(i,a);const o={a:i,b:a},s={transposeA:t,transposeB:r};return We.runKernel(Nse,o,s)}const kr=ze({matMul_:T5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D5e(n){const t={x:Te(n,"x","sigmoid","float32")};return We.runKernel(kue,t)}const H0=ze({sigmoid_:D5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5e(n,e,t){const r=Te(n,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},a={begin:e,size:t};return We.runKernel(Eue,i,a)}const ti=ze({slice_:A5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5e(n){const t={x:Te(n,"x","tanh","float32")};return We.runKernel(Kue,t)}const YN=ze({tanh_:k5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N5e(n,e,t,r,i,a){const o=Te(n,"forgetBias","basicLSTMCell"),s=Te(e,"lstmKernel","basicLSTMCell"),u=Te(t,"lstmBias","basicLSTMCell"),l=Te(r,"data","basicLSTMCell"),h=Te(i,"c","basicLSTMCell"),c=Te(a,"h","basicLSTMCell"),f=Xs([l,c],1),d=kr(f,s),p=wn(d,u),m=p.shape[0],g=p.shape[1]/4,y=[m,g],v=ti(p,[0,0],y),b=ti(p,[0,g],y),w=ti(p,[0,g*2],y),x=ti(p,[0,g*3],y),S=wn(Pt(H0(v),YN(b)),Pt(h,H0(wn(o,w)))),E=Pt(YN(S),H0(x));return[S,E]}const Xle=ze({basicLSTMCell_:N5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O5e(n,e,t){const r=Te(n,"x","batchToSpaceND"),i=e.reduce((s,u)=>s*u);Fe(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),Fe(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),Fe(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const a={x:r},o={blockShape:e,crops:t};return We.runKernel(Ose,a,o)}const Z7=ze({batchToSpaceND_:O5e});function R5e(n){let e;return n.rank===0||n.rank===1?e=vt(n,[1,1,1,n.size]):n.rank===2?e=vt(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?e=vt(n,[1,n.shape[0],n.shape[1],n.shape[2]]):e=n,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5e(n,e,t,r,i,a){a==null&&(a=.001);const o=Te(n,"x","batchNorm"),s=Te(e,"mean","batchNorm"),u=Te(t,"variance","batchNorm");let l;i!=null&&(l=Te(i,"scale","batchNorm"));let h;r!=null&&(h=Te(r,"offset","batchNorm")),Fe(s.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Fe(h==null||s.rank===h.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Fe(l==null||s.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:R5e(o),scale:l,offset:h,mean:s,variance:u},d={varianceEpsilon:a},p=We.runKernel(moe,f,d);return vt(p,o.shape)}const DD=ze({batchNorm_:I5e});function F5e(n,e,t,r,i,a){const o=Te(n,"x","batchNorm"),s=Te(e,"mean","batchNorm"),u=Te(t,"variance","batchNorm");let l;i!=null&&(l=Te(i,"scale","batchNorm"));let h;return r!=null&&(h=Te(r,"offset","batchNorm")),Fe(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),Fe(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),Fe(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&Fe(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),h!=null&&Fe(h.rank===2||h.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${h.rank}.`),DD(o,s,u,h,l,a)}const Kle=ze({batchNorm2d_:F5e});function P5e(n,e,t,r,i,a){const o=Te(n,"x","batchNorm"),s=Te(e,"mean","batchNorm"),u=Te(t,"variance","batchNorm");let l;i!=null&&(l=Te(i,"scale","batchNorm"));let h;return r!=null&&(h=Te(r,"offset","batchNorm")),Fe(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),Fe(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),Fe(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&Fe(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),h!=null&&Fe(h.rank===3||h.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${h.rank}.`),DD(o,s,u,h,l,a)}const Yle=ze({batchNorm3d_:P5e});function L5e(n,e,t,r,i,a){const o=Te(n,"x","batchNorm"),s=Te(e,"mean","batchNorm"),u=Te(t,"variance","batchNorm");let l;i!=null&&(l=Te(i,"scale","batchNorm"));let h;return r!=null&&(h=Te(r,"offset","batchNorm")),Fe(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),Fe(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),Fe(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&Fe(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),h!=null&&Fe(h.rank===4||h.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${h.rank}.`),DD(o,s,u,h,l,a)}const Qle=ze({batchNorm4d_:L5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M5e(n,e,t){const r=Te(n,"x","bincount"),i=Te(e,"weights","bincount");Fe(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),Fe(t>=0,()=>`size must be non-negative, but got ${t}.`),Fe(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const a={x:r,weights:i},o={size:t};return We.runKernel(Rse,a,o)}const J7=ze({bincount_:M5e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U5e(n,e){const t=Te(n,"x","bitwiseAnd"),r=Te(e,"y","bitwiseAnd");if(!gh(t.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${t.shape}, y: ${r.shape}`);if(t.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${t.dtype} and type of y: ${r.dtype}`);const i={a:t,b:r};return We.runKernel(Ise,i)}const Zle=ze({bitwiseAnd_:U5e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B5e(n,e){const t=Te(n,"s0","broadcastArgs","int32"),r=Te(e,"s1","broadcastArgs","int32");if(t.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const i={s0:t,s1:r};return We.runKernel(Fse,i)}const Jle=ze({broadcastArgs_:B5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5e(n,e){let t=Te(n,"broadcastTo","x");const r=t.shape;if(Lu(e),e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){const l=t.shape.slice();for(;l.length<e.length;)l.unshift(1);t=vt(t,l)}const i=t.shape,a=Array.from(e);for(let l=e.length-1;l>=0;l--)if(i[l]===e[l])a[l]=1;else if(t.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((l,h)=>l>1?h:-1).filter(l=>l>=0).length===0)return pp(t);const s={x:t},u={reps:a};return We.runKernel(W7,s,u)}const NC=ze({broadcastTo_:z5e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W5e(n){const t={x:Te(n,"x","ceil","float32")};return We.runKernel(Pse,t)}const ece=ze({ceil_:W5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bx(n,e,t){Lu(n),t=t||_D(e);const r={shape:n,value:e,dtype:t};return We.runKernel(foe,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j5e(n,e,t){const r=Te(n,"x","clipByValue");if(Fe(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`),e===t)return bx(r.shape,e,r.dtype);const i={x:r},a={clipValueMin:e,clipValueMax:t};return We.runKernel(Lse,i,a)}const tce=ze({clipByValue_:j5e});function $5e(n){return Xs(n,0)}const nce=ze({concat1d_:$5e});function q5e(n,e){return Xs(n,e)}const rce=ze({concat2d_:q5e});function V5e(n,e){return Xs(n,e)}const ice=ze({concat3d_:V5e});function H5e(n,e){return Xs(n,e)}const ace=ze({concat4d_:H5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G5e(n,e,t,r,i="NHWC",a=[1,1],o){const s=Te(n,"x","conv2d","float32"),u=Te(e,"filter","conv2d","float32");let l=s,h=!1;s.rank===3&&(h=!0,l=vt(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Fe(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),Fe(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),bc("conv2d",r,o);const c=i==="NHWC"?l.shape[3]:l.shape[1];Fe(c===u.shape[2],()=>`Error in conv2d: depth of input (${c}) must match input depth for filter ${u.shape[2]}.`),Fe(Lp(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),Fe(h1(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),Fe(h1(t),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:l,filter:u},d={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=We.runKernel(zse,f,d);return h?vt(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const AD=ze({conv2d_:G5e});function X5e(n,e,t,r,i="NWC",a=1,o){const s=Te(n,"x","conv1d"),u=Te(e,"filter","conv1d");let l=s,h=!1;s.rank===2&&(h=!0,l=vt(s,[1,s.shape[0],s.shape[1]])),Fe(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),Fe(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),bc("conv1d",r,o),Fe(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),Fe(Lp(t,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${a}'`),Fe(h1(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),Fe(h1(t),()=>"Error in conv1D: Stride should be larger than 0."),Fe(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const c=vt(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=vt(l,[l.shape[0],1,l.shape[1],l.shape[2]]),g=AD(f,c,[1,t],r,"NHWC",[1,a],o);return h?vt(g,[g.shape[2],g.shape[3]]):vt(g,[g.shape[0],g.shape[2],g.shape[3]])}const sce=ze({conv1d_:X5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5e(n,e,t,r,i,a="NHWC",o){Fe(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let s=n,u=e,l=!1;e.rank===3&&(l=!0,u=vt(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,n[0],n[1],n[2]]),Fe(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),Fe(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),Fe(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);const h=a==="NHWC"?s[3]:s[1],c=a==="NHWC"?u.shape[3]:u.shape[1];Fe(h===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${t.shape[2]}.`),Fe(c===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${c}) must match output depth for filter ${t.shape[3]}.`),bc("conv2dDerInput",i,o);const f={dy:u,filter:t},d={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,inputShape:s},p=We.runKernel(jse,f,d);return l?vt(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const oce=ze({conv2DBackpropInput_:K5e});function Y5e(n,e,t,r,i,a){const o=Te(n,"x","conv2dTranspose"),s=Te(e,"filter","conv2dTranspose");return oce(t,o,s,r,i,"NHWC",a)}const uce=ze({conv2dTranspose_:Y5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5e(n,e,t,r,i="NDHWC",a=[1,1,1]){const o=Te(n,"x","conv3d"),s=Te(e,"filter","conv3d");let u=o,l=!1;o.rank===4&&(l=!0,u=vt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Fe(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),Fe(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),Fe(u.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${s.shape[3]}.`),Fe(Lp(t,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),Fe(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),Fe(h1(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),Fe(h1(t),()=>"Error in conv3D: Strides should be larger than 0.");const h={x:u,filter:s},c={strides:t,pad:r,dataFormat:i,dilations:a},f=We.runKernel($se,h,c);return l?vt(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const lce=ze({conv3d_:Q5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5e(n,e,t,r,i){Fe(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let a=n,o=e,s=!1;e.rank===4&&(s=!0,o=vt(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,n[0],n[1],n[2],n[3]]);const u=a[4],l=o.shape[4];Fe(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),Fe(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),Fe(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),Fe(u===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${t.shape[3]}.`),Fe(l===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${t.shape[4]}.`);const h={dy:o,filter:t},c={pad:i,strides:r,inputShape:a},f=We.runKernel(qse,h,c);return s?vt(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const J5e=ze({conv3DBackpropInput_:Z5e});function eFe(n,e,t,r,i){const a=Te(n,"x","conv3dTranspose"),o=Te(e,"filter","conv3dTranspose");return J5e(t,a,o,r,i)}const cce=ze({conv3dTranspose_:eFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tFe(n){const t={x:Te(n,"x","cos","float32")};return We.runKernel(Vse,t)}const hce=ze({cos_:tFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(n){const t={x:Te(n,"x","cosh","float32")};return We.runKernel(Hse,t)}const fce=ze({cosh_:nFe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(n,e=0,t=!1,r=!1){const a={x:Te(n,"x","cumprod")},o={axis:e,exclusive:t,reverse:r};return We.runKernel(Gse,a,o)}const dce=ze({cumprod_:rFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iFe(n,e=0,t=!1,r=!1){const a={x:Te(n,"x","cumsum")},o={axis:e,exclusive:t,reverse:r};return We.runKernel(Xse,a,o)}const pce=ze({cumsum_:iFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(n,e,t,r=!1){const i=Te(n,"x","denseBincount"),a=Te(e,"weights","denseBincount");Fe(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),Fe(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),Fe(t>=0,()=>`size must be non-negative, but got ${t}.`),Fe(a.size===i.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`);const o={x:i,weights:a},s={size:t,binaryOutput:r};return We.runKernel(Yse,o,s)}const gce=ze({denseBincount_:aFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(n,e,t="NHWC"){const r=Te(n,"x","depthToSpace","float32"),i=t==="NHWC"?r.shape[1]:r.shape[2],a=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];Fe(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),Fe(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),Fe(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),Fe(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},u={blockSize:e,dataFormat:t};return We.runKernel(Qse,s,u)}const mce=ze({depthToSpace_:sFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe(n,e,t,r,i="NHWC",a=[1,1],o){const s=Te(n,"x","depthwiseConv2d","float32"),u=Te(e,"filter","depthwiseConv2d","float32");let l=s,h=!1;s.rank===3&&(h=!0,l=vt(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Fe(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),Fe(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const c=i==="NHWC"?l.shape[3]:l.shape[1];Fe(c===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${c}) must match the inChannels dimension in filter ${u.shape[2]}.`),bc("depthwiseConv2d",r,o);const f={x:l,filter:u},d={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=We.runKernel(Zse,f,d);return h?vt(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const OI=ze({depthwiseConv2d_:oFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uFe(n){const t={x:Te(n,"x","diag")};return We.runKernel(toe,t)}const yce=ze({diag_:uFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(n,e,t,r,i=[1,1],a="NHWC"){const o=Te(n,"x","dilation2d"),s=Te(e,"filter","dilation2d");Fe(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),Fe(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),Fe(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let u=o,l=!1;o.rank===3&&(u=vt(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0),Fe(u.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${s.shape[2]}`);const h={x:u,filter:s},c={strides:t,pad:r,dilations:i},f=We.runKernel(noe,h,c);return l?vt(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const vce=ze({dilation2d_:lFe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bce(n,e){const t=n.length,r=[];for(let i=0;i<t;i++){const a=t-1-i,o=n[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function ez(n,e){const t=[];for(let r=0;r<e.length;r++){const i=n[n.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&t.unshift(a)}return t}function ma(n,e){const t=Math.max(n.length,e.length),r=new Array(t);for(let i=0;i<t;i++){let a=n[n.length-i-1];a==null&&(a=1);let o=e[e.length-i-1];if(o==null&&(o=1),a===1)r[t-i-1]=o;else if(o===1)r[t-i-1]=a;else if(a!==o){const s=`Operands could not be broadcast together with shapes ${n} and ${e}.`;throw Error(s)}else r[t-i-1]=a}return r}const cFe=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:ma,getBroadcastDims:bce,getReductionAxes:ez},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(n,e){let t=Te(n,"a","equal","string_or_numeric"),r=Te(e,"b","equal","string_or_numeric");[t,r]=Wi(t,r),ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel(ooe,i)}const tz=ze({equal_:hFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fFe(n,e,t){const r=Te(e,"a","where"),i=Te(t,"b","where"),a=Te(n,"condition","where","bool"),o=ma(ma(a.shape,r.shape),i.shape),s=NC(a,o),u=NC(r,o),l=NC(i,o),h={condition:s,t:u,e:l};return We.runKernel(Sue,h)}const gp=ze({where_:fFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFe(n){const t={x:Te(n,"x","zerosLike")};return We.runKernel(tle,t)}const Du=ze({zerosLike_:dFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pFe(n,e){let t=Te(n,"a","div"),r=Te(e,"b","div");[t,r]=Wi(t,r);const i=di(t,r),a=Du(i),o=tz(r,a);return gp(o,a,i)}const wce=ze({divNoNan_:pFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(n,e){const t=Te(n,"t1","dot"),r=Te(e,"t2","dot");Fe((t.rank===1||t.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${r.rank}.`);const i=t.rank===1?t.size:t.shape[1],a=r.rank===1?r.size:r.shape[0];if(Fe(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),t.rank===1&&r.rank===1){const o=vt(t,[1,-1]),s=vt(r,[-1,1]),u=kr(o,s);return vt(u,[])}else if(t.rank===1&&r.rank===2){const o=vt(t,[1,-1]),s=vt(r,[r.shape[0],r.shape[1]]),u=kr(o,s);return vt(u,[u.size])}else if(t.rank===2&&r.rank===1){const o=vt(r,[-1,1]),s=kr(t,o);return vt(s,[s.size])}else{const o=vt(r,[r.shape[0],r.shape[1]]);return kr(t,o)}}const xce=ze({dot_:gFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mFe(n,...e){const t=e.map((i,a)=>Te(i,`tensors${a}`,"einsum")),r={equation:n};return We.runKernel(ioe,t,r)}const Sv=ze({einsum_:mFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFe(n){const t={x:Te(n,"x","elu","float32")};return We.runKernel(aoe,t)}const nz=ze({elu_:yFe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(n,e){const t=Te(n,"x","ensureShape","string_or_numeric");if(!ise(t.shape,e))throw new Error(`EnsureShape: Shape of tensor ${t.shape} is not compatible with expected shape ${e}`);return n}const _ce=ze({ensureShape_:vFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(n){let e=Te(n,"x","erf");Fe(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=pi(e,"float32"));const t={x:e};return We.runKernel(soe,t)}const Sce=ze({erf_:bFe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rz(n,e){for(let t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function Cce(n,e,t){const r=n.length+e.length,i=[];let a=0,o=0;for(let s=0;s<r;s++)t.indexOf(s)===-1?i.push(n[a++]):i.push(e[o++]);return i}function wFe(n,e){const t=[],r=n.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&t.push(n[a]);const i=e.map(a=>n[a]);return[t,i]}function kD(n,e){const t=e.map(r=>1);return Cce(n,t,e)}function xFe(n,e,t){Fe(rz(e,t),()=>`${n} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function _Fe(n,e){if(rz(n,e))return null;const t=[];for(let r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(r=>t.push(r)),t}function SFe(n){return n.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function CFe(n,e){const t=[];for(let r=e-n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EFe(n,e=null,t=!1){const i={x:Te(n,"x","max")},a={reductionIndices:e,keepDims:t};return We.runKernel(Loe,i,a)}const G0=ze({max_:EFe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TFe(n,e=null,t=!1){const i={x:Te(n,"x","min")},a={axis:e,keepDims:t};return We.runKernel(joe,i,a)}const QN=ze({min_:TFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DFe(n,e){let t=Te(n,"base","pow"),r=Te(e,"exp","pow");[t,r]=Wi(t,r);const i={a:t,b:r};return We.runKernel(rue,i)}const Xw=ze({pow_:DFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ir(n,e){if((Qa(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Qa(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return fy(n,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AFe(n){const t={x:Te(n,"x","sqrt","float32")};return We.runKernel(Oue,t)}const Mf=ze({sqrt_:AFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kFe(n){const e=Te(n,"x","square"),t={};return We.runKernel("Square",{x:e},t)}const hc=ze({square_:kFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NFe(n,e=null,t=!1){let r=Te(n,"x","sum");r.dtype==="bool"&&(r=pi(r,"int32"));const i={x:r},a={axis:e,keepDims:t};return We.runKernel(Rue,i,a)}const fi=ze({sum_:NFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OFe(n,e="euclidean",t=null,r=!1){n=Te(n,"x","norm");const i=Ece(n,e,t);let a=i.shape;if(r){const o=xD(t,n.shape);a=kD(i.shape,o)}return vt(i,a)}function Ece(n,e,t=null){if(n.rank===0)return xu(n);if(n.rank!==1&&t===null)return Ece(vt(n,[-1]),e,t);if(n.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return fi(xu(n),t);if(e===1/0)return G0(xu(n),t);if(e===-1/0)return QN(xu(n),t);if(e==="euclidean"||e===2)return Mf(fi(Xw(xu(n),ir(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return G0(fi(xu(n),t[0]),t[1]-1);if(e===1/0)return G0(fi(xu(n),t[1]),t[0]);if(e===-1/0)return QN(fi(xu(n),t[1]),t[0]);if(e==="fro"||e==="euclidean")return Mf(fi(hc(n),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const ND=ze({norm_:OFe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RFe(n,e=null,t=!1){return ND(n,"euclidean",e,t)}const Tce=ze({euclideanNorm_:RFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IFe(n){const t={x:Te(n,"x","exp")};return We.runKernel(uoe,t)}const Ym=ze({exp_:IFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FFe(n,e=0){const t=Te(n,"x","expandDims","string_or_numeric");Fe(e<=t.rank,()=>"Axis must be <= rank of the tensor");const r={input:t},i={dim:e};return We.runKernel(loe,r,i)}const Rd=ze({expandDims_:FFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(n){const t={x:Te(n,"x","expm1")};return We.runKernel(coe,t)}const Dce=ze({expm1_:PFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LFe(n,e){const t=Te(n,"x","tile","string_or_numeric");Fe(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);const r={x:t},i={reps:e};return We.runKernel(W7,r,i)}const A2=ze({tile_:LFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe(n,e,t,r="float32"){e==null&&(e=n);const i=Lf([n,e],r),a=n<=e?n:e;for(let s=0;s<a;++s)i.set(1,s,s);const o=vt(i.toTensor(),[n,e]);if(t==null)return o;if(t.length===1)return A2(Rd(o,0),[t[0],1,1]);if(t.length===2)return A2(Rd(Rd(o,0),0),[t[0],t[1],1,1]);if(t.length===3)return A2(Rd(Rd(Rd(o,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}const iz=ze({eye_:MFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UFe(n){const t={x:Te(n,"x","floor","float32")};return We.runKernel(poe,t)}const az=ze({floor_:UFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BFe(n,e,t=0,r=0){const i=Te(n,"x","gather"),a=Te(e,"indices","gather","int32"),o={x:i,indices:a},s={axis:t,batchDims:r};return We.runKernel(yoe,o,s)}const sz=ze({gather_:BFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(n,e){let t=Te(n,"a","greater","string_or_numeric"),r=Te(e,"b","greater","string_or_numeric");[t,r]=Wi(t,r),ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel(boe,i)}const OD=ze({greater_:zFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WFe(n,e){let t=Te(n,"a","greaterEqual","string_or_numeric"),r=Te(e,"b","greaterEqual","string_or_numeric");[t,r]=Wi(t,r),ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel(woe,i)}const oz=ze({greaterEqual_:WFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jFe(n){const t={input:Te(n,"input","imag")};return We.runKernel(_oe,t)}const RD=ze({imag_:jFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(n){const t={x:Te(n,"x","isFinite")};return We.runKernel(Soe,t)}const Ace=ze({isFinite_:$Fe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qFe(n){const t={x:Te(n,"x","isInf")};return We.runKernel(Coe,t)}const kce=ze({isInf_:qFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(n){const t={x:Te(n,"x","isNaN")};return We.runKernel(Eoe,t)}const Nce=ze({isNaN_:VFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HFe(n,e=.2){const r={x:Te(n,"x","leakyRelu")},i={alpha:e};return We.runKernel(Toe,r,i)}const uz=ze({leakyRelu_:HFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(n,e){let t=Te(n,"a","less","string_or_numeric"),r=Te(e,"b","less","string_or_numeric");[t,r]=Wi(t,r),ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel(Doe,i)}const ZN=ze({less_:GFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XFe(n,e){let t=Te(n,"a","lessEqual","string_or_numeric"),r=Te(e,"b","lessEqual","string_or_numeric");[t,r]=Wi(t,r),ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel(Aoe,i)}const RI=ze({lessEqual_:XFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oce(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");const r={start:n,stop:e,num:t};return We.runKernel(koe,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KFe(n,e=5,t=1,r=1,i=.5){const a=Te(n,"x","localResponseNormalization");Fe(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),Fe(Vw(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=a,s=!1;a.rank===3&&(s=!0,o=vt(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const u={x:o},l={depthRadius:e,bias:t,alpha:r,beta:i},h=We.runKernel(Poe,u,l);return s?vt(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Rce=ze({localResponseNormalization_:KFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YFe(n){const t={x:Te(n,"x","log","float32")};return We.runKernel(Noe,t)}const Kw=ze({log_:YFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(n){const t={x:Te(n,"x","log1p")};return We.runKernel(Ooe,t)}const lz=ze({log1p_:QFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZFe(n){return Fe(Hm(n),()=>"The f passed in grad(f) must be a function"),(e,t)=>{const r=Te(e,"x","tf.grad","string_or_numeric"),i=t!=null?Te(t,"dy","tf.grad"):null;return We.tidy(()=>{const{value:a,grads:o}=We.gradients(()=>n(r),[r],i);return i!=null&&_o(a.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),II(o),o[0]})}}function JFe(n){return Fe(Hm(n),()=>"The f passed in grads(f) must be a function"),(e,t)=>{Fe(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=aE(e,"args","tf.grads","string_or_numeric"),i=t!=null?Te(t,"dy","tf.grads"):null;return We.tidy(()=>{const{value:a,grads:o}=We.gradients(()=>n(...r),r,i);return i!=null&&_o(a.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),II(o),o})}}function ePe(n){return Fe(Hm(n),()=>"The f passed in valueAndGrad(f) must be a function"),(e,t)=>{Fe(e instanceof Gi,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),Fe(t==null||t instanceof Gi,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=We.gradients(()=>n(e),[e],t);return II(r),{grad:r[0],value:i}}}function tPe(n){return Fe(Hm(n),()=>"The f passed in valueAndGrads(f) must be a function"),(e,t)=>{Fe(Array.isArray(e)&&e.every(i=>i instanceof Gi),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),Fe(t==null||t instanceof Gi,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=We.gradients(()=>n(...e),e,t);return t!=null&&_o(r.value.shape,t.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),II(r.grads),r}}function Ice(n,e){Fe(Hm(n),()=>"The f passed in variableGrads(f) must be a function"),Fe(e==null||Array.isArray(e)&&e.every(l=>l instanceof iE),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const t=e!=null;if(!t){e=[];for(const l in We.registeredVariables)e.push(We.registeredVariables[l])}const r=t?e.filter(l=>!l.trainable):null,i=e.length;e=e.filter(l=>l.trainable),Fe(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const a=!0,{value:o,grads:s}=We.gradients(n,e,null,a);Fe(s.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Fe(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const u={};return e.forEach((l,h)=>{s[h]!=null&&(u[l.name]=s[h])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:o,grads:u}}function Uf(n){return We.customGrad(n)}function II(n){if(n.filter(t=>t==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(n){const t={x:Te(n,"x","neg")};return We.runKernel(Xoe,t)}const lh=ze({neg_:nPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rPe(n){const t={x:Te(n,"x","softplus")};return We.runKernel(Nue,t)}const cz=ze({softplus_:rPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iPe(n){const e=Te(n,"x","logSigmoid");return Uf(r=>({value:lh(cz(lh(r))),gradFunc:o=>Pt(o,H0(lh(r)))}))(e)}const Fce=ze({logSigmoid_:iPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aPe(n,e){let t=Te(n,"a","sub"),r=Te(e,"b","sub");[t,r]=Wi(t,r);const i={a:t,b:r};return We.runKernel(Gue,i)}const Wn=ze({sub_:aPe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(n,e=-1){const t=Te(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return Uf((i,a)=>{const s=G0(i,e,!0),u=Wn(i,s),l=Wn(pi(u,"float32"),Kw(fi(Ym(u),e,!0)));return a([l]),{value:l,gradFunc:(c,f)=>{const[d]=f,p=!0,m=Ym(d);return Wn(c,Pt(fi(c,e,p),m))}}})(t)}const Pce=ze({logSoftmax_:sPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPe(n,e=null,t=!1){const r=Te(n,"x","logSumExp"),i=xD(e,r.shape),a=G0(r,i,!0),o=Wn(r,a),s=Ym(o),u=fi(s,i),l=Kw(u),h=wn(vt(a,l.shape),l);if(t){const c=kD(h.shape,i);return vt(h,c)}return h}const hz=ze({logSumExp_:oPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uPe(n,e){const t=Te(n,"a","logicalAnd","bool"),r=Te(e,"b","logicalAnd","bool");ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel(Roe,i)}const lE=ze({logicalAnd_:uPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPe(n){const t={x:Te(n,"x","logicalNot","bool")};return We.runKernel(Ioe,t)}const fz=ze({logicalNot_:lPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cPe(n,e){const t=Te(n,"a","logicalOr","bool"),r=Te(e,"b","logicalOr","bool");ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel(Foe,i)}const dz=ze({logicalOr_:cPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(n,e){const t=Te(n,"a","logicalXor","bool"),r=Te(e,"b","logicalXor","bool");return ma(t.shape,r.shape),lE(dz(n,e),fz(lE(n,e)))}const Lce=ze({logicalXor_:hPe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ck=2147483648;function fPe(n,e,t="left"){const r=Te(n,"sortedSequence","searchSorted"),i=Te(e,"values","searchSorted"),a=r.shape[r.shape.length-1],o=i.shape[i.shape.length-1],s=vt(r,[-1,a]),u=vt(i,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Hr(u.shape)>=Ck)throw new Error(`values tensor size must less than ${Ck}`);if(s.shape[1]>=Ck)throw new Error(`trailing dim_size must less than ${Ck} for int32 output type, was ${s.shape[1]}`);const l={sortedSequence:s,values:u},h={side:t};return We.runKernel(_ue,l,h)}const FI=ze({searchSorted_:fPe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mce(n,e){return FI(n,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(n,e,t,r,i){const a=Te(n,"x","maxPool"),o=1;let s=a,u=!1;a.rank===3&&(u=!0,s=vt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Fe(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),Fe(Lp(t,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`),bc("maxPool",r,i);const l={x:s},h={filterSize:e,strides:t,pad:r,dimRoundingMode:i},c=We.runKernel(Uoe,l,h);return u?vt(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const pz=ze({maxPool_:dPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pPe(n,e=[1,1,1],t,r,i,a="NDHWC"){const o=Te(n,"x","maxPool3d");let s=o,u=!1;o.rank===4&&(u=!0,s=vt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Fe(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),Fe(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),bc("maxPool3d",r,i);const l={x:s},h={filterSize:e,strides:t,pad:r,dimRoundingMode:i,dataFormat:a},c=We.runKernel(Boe,l,h);return u?vt(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}const Uce=ze({maxPool3d_:pPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gPe(n,e,t,r,i=!1){const o={x:Te(n,"x","maxPoolWithArgmax")},s={filterSize:e,strides:t,pad:r,includeBatchInIndex:i},u=We.runKernel(zoe,o,s);return{result:u[0],indexes:u[1]}}const Bce=ze({maxPoolWithArgmax_:gPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mPe(n,e){let t=Te(n,"a","maximum"),r=Te(e,"b","maximum");[t,r]=Wi(t,r),t.dtype==="bool"&&(t=pi(t,"int32"),r=pi(r,"int32")),ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel(Moe,i)}const gz=ze({maximum_:mPe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yPe(n,e=null,t=!1){const i={x:Te(n,"x","mean")},a={axis:e,keepDims:t};return We.runKernel(Woe,i,a)}const cE=ze({mean_:yPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1(n,e="float32"){if(Lu(n),e==="complex64"){const r=f1(n,"float32"),i=f1(n,"float32");return Ap(r,i)}const t=AI(Hr(n),e);return We.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function km(n,e="float32"){if(Lu(n),e==="complex64"){const r=km(n,"float32"),i=f1(n,"float32");return Ap(r,i)}const t=F7(Hr(n),e);return We.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zce(n,e,{indexing:t="xy"}={}){if(t!=="xy"&&t!=="ij")throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(n===void 0)return[];let r=Te(n,"x","meshgrid",n instanceof Gi?n.dtype:"float32");if(e===void 0)return[r];let i=Te(e,"y","meshgrid",e instanceof Gi?e.dtype:"float32");const a=Hr(r.shape),o=Hr(i.shape);return t==="xy"?(r=vt(r,[1,-1]),i=vt(i,[-1,1]),[kr(km([o,1],r.dtype),r),kr(i,km([1,a],i.dtype))]):(r=vt(r,[-1,1]),i=vt(i,[1,-1]),[kr(r,km([1,o],r.dtype)),kr(km([a,1],i.dtype),i)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vPe(n,e){let t=Te(n,"a","minimum"),r=Te(e,"b","minimum");[t,r]=Wi(t,r),t.dtype==="bool"&&(t=pi(t,"int32"),r=pi(r,"int32")),ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel($oe,i)}const hE=ze({minimum_:vPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bPe(n,e,t){Fe(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);const r=Te(n,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Fe(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=t==="reflect"?1:0;for(let s=0;s<r.rank;s++)Fe(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Fe(e[s][0]>=0&&e[s][0]<=r.shape[s]-i&&e[s][1]>=0&&e[s][1]<=r.shape[s]-i,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-i} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:t},o={x:r};return We.runKernel(qoe,o,a)}const Wce=ze({mirrorPad_:bPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wPe(n,e){let t=Te(n,"a","mod"),r=Te(e,"b","mod");[t,r]=Wi(t,r);const i={a:t,b:r};return We.runKernel(Voe,i)}const jce=ze({mod_:wPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xPe(n,e=null,t=!1){n=Te(n,"x","moments");const r=xD(e,n.shape),i=cE(n,r,t);let a=i.shape;t||(a=kD(i.shape,r));const o=hc(Wn(pi(n,"float32"),vt(i,a))),s=cE(o,r,t);return{mean:i,variance:s}}const $ce=ze({moments_:xPe});function _Pe(n,e,t,r){const i=Te(e,"data","multiRNNCell"),a=aE(t,"c","multiRNNCell"),o=aE(r,"h","multiRNNCell");let s=i;const u=[];for(let c=0;c<n.length;c++){const f=n[c](s,a[c],o[c]);u.push(f[0]),u.push(f[1]),s=f[1]}const l=[],h=[];for(let c=0;c<u.length;c+=2)l.push(u[c]),h.push(u[c+1]);return[l,h]}const qce=ze({multiRNNCell_:_Pe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SPe(n,e,t,r=!1){const i=Te(n,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);t=t||Math.random();const u={logits:o===1?vt(i,[1,-1]):i},l={numSamples:e,seed:t,normalized:r},h=We.runKernel(Hoe,u,l);return o===1?vt(h,[h.size]):h}const Vce=ze({multinomial_:SPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(n,e){let t=Te(n,"a","notEqual","string_or_numeric"),r=Te(e,"b","notEqual","string_or_numeric");[t,r]=Wi(t,r),ma(t.shape,r.shape);const i={a:t,b:r};return We.runKernel(Koe,i)}const mz=ze({notEqual_:CPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EPe(n,e,t=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:Te(n,"indices","oneHot","int32")},s={dtype:i,depth:e,onValue:t,offValue:r};return We.runKernel(eue,o,s)}const JN=ze({oneHot_:EPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TPe(n){const t={x:Te(n,"x","onesLike")};return We.runKernel(Joe,t)}const Hce=ze({onesLike_:TPe});function DPe(n,e){const t=Te(n,"v1","outerProduct"),r=Te(e,"v2","outerProduct");Fe(t.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${r.rank}.`);const i=vt(t,[-1,1]),a=vt(r,[1,-1]);return kr(i,a)}const Gce=ze({outerProduct_:DPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function APe(n,e,t=0){const r=Te(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:t},a={x:r};return We.runKernel(nue,a,i)}const wx=ze({pad_:APe});function kPe(n,e,t=0){return Fe(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),wx(n,[e],t)}const Xce=ze({pad1d_:kPe});function NPe(n,e,t=0){return Fe(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wx(n,e,t)}const Kce=ze({pad2d_:NPe});function OPe(n,e,t=0){return Fe(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wx(n,e,t)}const Yce=ze({pad3d_:OPe});function RPe(n,e,t=0){return Fe(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wx(n,e,t)}const Qce=ze({pad4d_:RPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IPe(n,e,t){const r=Te(n,"x","spaceToBatchND");Fe(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),Fe(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),Fe(r.shape.reduce((o,s,u)=>u>0&&u<=e.length?o&&(s+t[u-1][0]+t[u-1][1])%e[u-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},a={blockShape:e,paddings:t};return We.runKernel(Iue,i,a)}const yz=ze({spaceToBatchND_:IPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(n,e,t,r,i,a,o){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");const s=Te(n,"x","maxPool");let u=s,l=!1;s.rank===3&&(l=!0,u=vt(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Fe(Lp(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);const h=qle(u.shape,e,a,i,r),c=[h.dilationHeight,h.dilationWidth];let f;r==="same"?f=LPe([h.filterHeight,h.filterWidth],c):f=[[0,0],[0,0]];const d=c[0]===1&&c[1]===1,[p,m]=PPe([h.inHeight,h.inWidth],c,f),g=d?r:"valid",y=d?u:yz(u,c,p),b=(t==="avg"?()=>Q7(y,e,a,g,o):()=>pz(y,e,a,g,o))(),w=d?b:Z7(b,c,m);return l?vt(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function PPe(n,e,t){const r=t.map(h=>h[0]),i=t.map(h=>h[1]),a=n.concat(r,i),o=e.map((h,c)=>(h-a[c]%h)%h),s=i.map((h,c)=>h+o[c]),u=e.map((h,c)=>[r[c],s[c]]),l=e.map((h,c)=>[0,o[c]]);return[u,l]}function LPe(n,e){const r=n.map((o,s)=>o+(o-1)*(e[s]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),a=r.map((o,s)=>o-i[s]);return r.map((o,s)=>[i[s],a[s]])}const Zce=ze({pool_:FPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(n,e){const t=Te(n,"x","prelu"),r=Te(e,"alpha","prelu"),i={x:t,alpha:r};return We.runKernel(iue,i)}const vz=ze({prelu_:MPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(n,e=null,t=!1){let r=Te(n,"x","prod");r.dtype==="bool"&&(r=pi(r,"int32"));const i={x:r},a={axis:e,keepDims:t};return We.runKernel(aue,i,a)}const Jce=ze({prod_:UPe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(n,e,t,r){const i=n.map((h,c)=>Te(h,`tensors${c}`,"raggedGather","int32")),a=Te(e,"paramsDenseValues","raggedGather"),o=Te(t,"indices","raggedGather","int32"),s={paramsNestedSplits:i,paramsDenseValues:a,indices:o},u={outputRaggedRank:r},l=We.runKernel(sue,s,u);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}const ehe=ze({raggedGather_:BPe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zPe(n,e,t){const r=Te(n,"starts","raggedRange"),i=Te(e,"limits","raggedRange",r.dtype),a=Te(t,"deltas","raggedRange",r.dtype),o={starts:r,limits:i,deltas:a},s=We.runKernel(oue,o);return{rtNestedSplits:s[0],rtDenseValues:s[1]}}const the=ze({raggedRange_:zPe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WPe(n,e,t,r,i){const a=Te(n,"shape","raggedTensorToTensor","int32"),o=Te(e,"values","raggedTensorToTensor"),s=Te(t,"defaultValue","raggedTensorToTensor",o.dtype),u=r.map((c,f)=>Te(c,`tensors${f}`,"raggedTensorToTensor","int32")),l={shape:a,values:o,defaultValue:s,rowPartitionTensors:u},h={rowPartitionTypes:i};return We.runKernel(uue,l,h)}const nhe=ze({raggedTensorToTensor_:WPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jPe(n,e,t){Lu(n);const r=Hr(n);let i=null;if(t==null||t==="float32")i=new Float32Array(r);else if(t==="int32")i=new Int32Array(r);else if(t==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${t}`);for(let a=0;a<r;a++)i[a]=e();return We.makeTensor(i,n,t)}const rhe=ze({rand_:jPe});var aN={exports:{}},$Pe=aN.exports,pY;function qPe(){return pY||(pY=1,function(n){(function(e,t,r){function i(u){var l=this,h=s();l.next=function(){var c=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=c-(l.c=c|0)},l.c=1,l.s0=h(" "),l.s1=h(" "),l.s2=h(" "),l.s0-=h(u),l.s0<0&&(l.s0+=1),l.s1-=h(u),l.s1<0&&(l.s1+=1),l.s2-=h(u),l.s2<0&&(l.s2+=1),h=null}function a(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var h=new i(u),c=l&&l.state,f=h.next;return f.int32=function(){return h.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,c&&(typeof c=="object"&&a(c,h),f.state=function(){return a(h,{})}),f}function s(){var u=4022871197,l=function(h){h=String(h);for(var c=0;c<h.length;c++){u+=h.charCodeAt(c);var f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=f*4294967296}return(u>>>0)*23283064365386963e-26};return l}t&&t.exports?t.exports=o:this.alea=o})($Pe,n)}(aN)),aN.exports}var sN={exports:{}},VPe=sN.exports,gY;function HPe(){return gY||(gY=1,function(n){(function(e,t,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var c=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^c^c>>>8},s===(s|0)?u.x=s:l+=s;for(var h=0;h<l.length+64;h++)u.x^=l.charCodeAt(h)|0,u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,h&&(typeof h=="object"&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.xor128=o})(VPe,n)}(sN)),sN.exports}var oN={exports:{}},GPe=oN.exports,mY;function XPe(){return mY||(mY=1,function(n){(function(e,t,r){function i(s){var u=this,l="";u.next=function(){var c=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(c^c<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var h=0;h<l.length+64;h++)u.x^=l.charCodeAt(h)|0,h==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,h&&(typeof h=="object"&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.xorwow=o})(GPe,n)}(oN)),oN.exports}var uN={exports:{}},KPe=uN.exports,yY;function YPe(){return yY||(yY=1,function(n){(function(e,t,r){function i(s){var u=this;u.next=function(){var h=u.x,c=u.i,f,d;return f=h[c],f^=f>>>7,d=f^f<<24,f=h[c+1&7],d^=f^f>>>10,f=h[c+3&7],d^=f^f>>>3,f=h[c+4&7],d^=f^f<<7,f=h[c+7&7],f=f^f<<13,d^=f^f<<9,h[c]=d,u.i=c+1&7,d};function l(h,c){var f,d=[];if(c===(c|0))d[0]=c;else for(c=""+c,f=0;f<c.length;++f)d[f&7]=d[f&7]<<15^c.charCodeAt(f)+d[f+1&7]<<13;for(;d.length<8;)d.push(0);for(f=0;f<8&&d[f]===0;++f);for(f==8?d[7]=-1:d[f],h.x=d,h.i=0,f=256;f>0;--f)h.next()}l(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,h&&(h.x&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.xorshift7=o})(KPe,n)}(uN)),uN.exports}var lN={exports:{}},QPe=lN.exports,vY;function ZPe(){return vY||(vY=1,function(n){(function(e,t,r){function i(s){var u=this;u.next=function(){var h=u.w,c=u.X,f=u.i,d,p;return u.w=h=h+1640531527|0,p=c[f+34&127],d=c[f=f+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=c[f]=p^d,u.i=f,p+(h^h>>>16)|0};function l(h,c){var f,d,p,m,g,y=[],v=128;for(c===(c|0)?(d=c,c=null):(c=c+"\0",d=0,v=Math.max(v,c.length)),p=0,m=-32;m<v;++m)c&&(d^=c.charCodeAt((m+32)%c.length)),m===0&&(g=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&(g=g+1640531527|0,f=y[m&127]^=d+g,p=f==0?p+1:0);for(p>=128&&(y[(c&&c.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=y[p+34&127],f=y[p=p+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,y[p]=d^f;h.w=g,h.X=y,h.i=p}l(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,h&&(h.X&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.xor4096=o})(QPe,n)}(lN)),lN.exports}var cN={exports:{}},JPe=cN.exports,bY;function eLe(){return bY||(bY=1,function(n){(function(e,t,r){function i(s){var u=this,l="";u.next=function(){var c=u.b,f=u.c,d=u.d,p=u.a;return c=c<<25^c>>>7^f,f=f-d|0,d=d<<24^d>>>8^p,p=p-c|0,u.b=c=c<<20^c>>>12^f,u.c=f=f-d|0,u.d=d<<16^f>>>16^p,u.a=p-c|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var h=0;h<l.length+20;h++)u.b^=l.charCodeAt(h)|0,u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(f+d)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,h&&(typeof h=="object"&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.tychei=o})(JPe,n)}(cN)),cN.exports}var hN={exports:{}};const tLe={},nLe=Object.freeze(Object.defineProperty({__proto__:null,default:tLe},Symbol.toStringTag,{value:"Module"})),fN=nR(nLe);var rLe=hN.exports,wY;function iLe(){return wY||(wY=1,function(n){(function(e,t,r){var i=256,a=6,o=52,s="random",u=r.pow(i,a),l=r.pow(2,o),h=l*2,c=i-1,f;function d(w,x,S){var E=[];x=x==!0?{entropy:!0}:x||{};var A=y(g(x.entropy?[w,b(t)]:w??v(),3),E),k=new p(E),T=function(){for(var O=k.g(a),F=u,I=0;O<l;)O=(O+I)*i,F*=i,I=k.g(1);for(;O>=h;)O/=2,F/=2,I>>>=1;return(O+I)/F};return T.int32=function(){return k.g(4)|0},T.quick=function(){return k.g(4)/4294967296},T.double=T,y(b(k.S),t),(x.pass||S||function(O,F,I,R){return R&&(R.S&&m(R,k),O.state=function(){return m(k,{})}),I?(r[s]=O,F):O})(T,A,"global"in x?x.global:this==r,x.state)}function p(w){var x,S=w.length,E=this,A=0,k=E.i=E.j=0,T=E.S=[];for(S||(w=[S++]);A<i;)T[A]=A++;for(A=0;A<i;A++)T[A]=T[k=c&k+w[A%S]+(x=T[A])],T[k]=x;(E.g=function(O){for(var F,I=0,R=E.i,U=E.j,B=E.S;O--;)F=B[R=c&R+1],I=I*i+B[c&(B[R]=B[U=c&U+F])+(B[U]=F)];return E.i=R,E.j=U,I})(i)}function m(w,x){return x.i=w.i,x.j=w.j,x.S=w.S.slice(),x}function g(w,x){var S=[],E=typeof w,A;if(x&&E=="object")for(A in w)try{S.push(g(w[A],x-1))}catch{}return S.length?S:E=="string"?w:w+"\0"}function y(w,x){for(var S=w+"",E,A=0;A<S.length;)x[c&A]=c&(E^=x[c&A]*19)+S.charCodeAt(A++);return b(x)}function v(){try{var w;return f&&(w=f.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),b(w)}catch{var x=e.navigator,S=x&&x.plugins;return[+new Date,e,S,e.screen,b(t)]}}function b(w){return String.fromCharCode.apply(0,w)}if(y(r.random(),t),n.exports){n.exports=d;try{f=fN}catch{}}else r["seed"+s]=d})(typeof self<"u"?self:rLe,[],Math)}(hN)),hN.exports}var JL,xY;function aLe(){if(xY)return JL;xY=1;var n=qPe(),e=HPe(),t=XPe(),r=YPe(),i=ZPe(),a=eLe(),o=iLe();return o.alea=n,o.xor128=e,o.xorwow=t,o.xorshift7=r,o.xor4096=i,o.tychei=a,JL=o,JL}var bz=aLe();/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sLe=.001,ihe=.1;function oLe(n,e,t){return t==null&&(t=wz()),xU(n,e,(r,i)=>xz(r,i,t))}function wz(){return We.backend.floatPrecision()===32?sLe:ihe}function xU(n,e,t){let r=!0;if((Qa(n)||Qa(e))&&(r=!1),Qa(n)&&Qa(e)&&(r=!0),r){const o=n.constructor.name,s=e.constructor.name;if(o!==s)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${s}`)}if(Array.isArray(n)&&Array.isArray(e)){const o=Pf(n),s=Pf(e);if(!gh(o,s))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${s}]`)}const i=Qa(n)?n:Xm(n),a=Qa(e)?e:Xm(e);if(i.length!==a.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${a.length}.
Actual:   ${i}.
Expected: ${a}.`);for(let o=0;o<a.length;++o){const s=i[o],u=a[o];if(!t(s,u))throw new Error(`Arrays differ: actual[${o}] = ${s}, expected[${o}] = ${u}.
Actual:   ${i}.
Expected: ${a}.`)}typeof expect<"u"&&expect().nothing()}function uLe(n,e){n().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function lLe(n,e){const t=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Dm(n)||Dm(n[0])||Dm(e)||Dm(e[0])?xU(n,t,(r,i)=>r==i):xU(n,e,(r,i)=>xz(r,i,0))}function cLe(n,e,t){if(t==null&&(t=wz()),!xz(n,e,t))throw new Error(`Numbers differ: actual === ${n}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function xz(n,e,t){return!isFinite(n)&&!isFinite(e)?!0:!(isNaN(n)||isNaN(e)||Math.abs(n-e)>t)}function hLe(n,e,t){for(let r=0;r<n.length;r++)if(n[r]<e||n[r]>t)throw new Error(`Value out of range:${n[r]} low: ${e}, high: ${t}`)}function fLe(n,e){const t=new Float32Array(n),r=new Float32Array(e);if(t.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${t.length}`);for(let i=0;i<r.length;i++)if(t[i]!==r[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${r[i]} but got ${t[i]} instead`)}function ahe(n){for(let e=0;e<n.length;e++){const t=n[e];Array.isArray(t)?ahe(t):n[e]=CD(t)}return n}function dLe(n){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(n),new Promise(t=>{e.addEventListener("loadeddata",r=>t(e)),e.load()})}async function pLe(n){await n.play(),"requestVideoFrameCallback"in n&&await new Promise(e=>{n.requestVideoFrameCallback(e)})}const gLe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:ihe,createVideoElement:dLe,encodeStrings:ahe,expectArrayBuffersEqual:fLe,expectArraysClose:oLe,expectArraysEqual:lLe,expectNumbersClose:cLe,expectPromiseToFail:uLe,expectValuesInRange:hLe,play:pLe,testEpsilon:wz},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _z{constructor(e,t,r,i,a){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=a||Math.random();this.random=bz.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,t,r=!1;for(;!r;){let i,a,o;do i=2*this.random()-1,a=2*this.random()-1,o=i*i+a*a;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*s,t=this.mean+this.stdDev*a*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class mLe{constructor(e,t,r,i){this.alpha=e,this.beta=1/t,this.dtype=r;const a=i||Math.random();this.randu=bz.alea(a.toString()),this.randn=new _z(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,i,a,o;for(;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,e=i*i,t=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),a=this.randu(),a<t||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class yLe{constructor(e=0,t=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=bz.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(n,e,t=1,r="float32",i){if(Lu(n),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const a=new mLe(e,t,r,i),o=Lf(n,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const she=ze({randomGamma_:vLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(n,e=0,t=1,r,i){if(Lu(n),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new _z(e,t,r,!1,i),o=Lf(n,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const Sz=ze({randomNormal_:bLe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wLe(n,e,t){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return Sz(n,0,1,e,t)}const ohe=ze({randomStandardNormal_:wLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xLe(n,e=0,t=1,r="float32",i){Lu(n);const a=Lf(n,r),o=new yLe(e,t,null,i);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const PI=ze({randomUniform_:xLe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(n,e,t,r){return PI(n,e,t,"int32",r)}const uhe=ze({randomUniformInt_:_Le});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yw(n,e,t=1,r="float32"){if(t===0)throw new Error("Cannot have a step of zero");const i={start:n,stop:e,step:t,dtype:r};return We.runKernel(lue,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(n){const t={input:Te(n,"input","real")};return We.runKernel(cue,t)}const Qw=ze({real_:SLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(n){const t={x:Te(n,"x","reciprocal")};return We.runKernel(hue,t)}const lhe=ze({reciprocal_:CLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(n){const t={x:Te(n,"x","relu")};return We.runKernel(fue,t)}const ID=ze({relu_:ELe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(n){const t={x:Te(n,"x","relu6")};return We.runKernel(mue,t)}const Cz=ze({relu6_:TLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DLe(n,e){const r={x:Te(n,"x","reverse")},i={dims:e};return We.runKernel(yue,r,i)}const Qm=ze({reverse_:DLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ALe(n){const e=Te(n,"x","reverse");return Fe(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Qm(e,0)}const che=ze({reverse1d_:ALe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kLe(n,e){const t=Te(n,"x","reverse");return Fe(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),Qm(t,e)}const hhe=ze({reverse2d_:kLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NLe(n,e){const t=Te(n,"x","reverse");return Fe(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),Qm(t,e)}const fhe=ze({reverse3d_:NLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OLe(n,e){const t=Te(n,"x","reverse");return Fe(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),Qm(t,e)}const dhe=ze({reverse4d_:OLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RLe(n){const t={x:Te(n,"x","round")};return We.runKernel(vue,t)}const Ez=ze({round_:RLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ILe(n){const t={x:Te(n,"x","rsqrt","float32")};return We.runKernel(bue,t)}const phe=ze({rsqrt_:ILe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FLe(n){const t={x:Te(n,"x","selu")};return We.runKernel(Cue,t)}const ghe=ze({selu_:FLe});function PLe(n,e,t,r,i,a=[1,1],o="NHWC"){const s=Te(n,"x","separableConv2d"),u=Te(e,"depthwiseFilter","separableConv2d"),l=Te(t,"pointwiseFilter","separableConv2d");let h=s,c=!1;if(s.rank===3&&(c=!0,h=vt(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Fe(h.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),Fe(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),Fe(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),Fe(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),Fe(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const f=u.shape[2],d=u.shape[3];Fe(l.shape[2]===f*d,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*d}, but got ${l.shape[2]}.`);const p=OI(h,u,r,i,o,a),g=AD(p,l,1,"valid",o);return c?vt(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const mhe=ze({separableConv2d_:PLe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function LLe(n,e){const t=Te(n,"x","setdiff1d"),r=Te(e,"y","setdiff1d");Fe(t.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${r.dtype}).`),Fe(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),Fe(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await t.data(),a=await r.data(),o=new Set(a);let s=0;for(let h=0;h<i.length;h++)o.has(i[h])||s++;const u=new XN([s],t.dtype),l=new XN([s],"int32");for(let h=0,c=0;h<i.length;h++)o.has(i[h])||(u.values[c]=i[h],l.values[c]=h,c++);return[u.toTensor(),l.toTensor()]}const yhe=LLe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MLe(n){const t={x:Te(n,"x","sign")};return We.runKernel(Aue,t)}const vhe=ze({sign_:MLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(n){const t={x:Te(n,"x","sin","float32")};return We.runKernel(Tue,t)}const bhe=ze({sin_:ULe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLe(n){const t={x:Te(n,"x","sinh")};return We.runKernel(Due,t)}const whe=ze({sinh_:BLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zLe(n,e,t){const r=Te(n,"x","slice1d");return Fe(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ti(r,[e],[t])}const xhe=ze({slice1d_:zLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(n,e,t){const r=Te(n,"x","slice2d");return Fe(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ti(r,e,t)}const _he=ze({slice2d_:WLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jLe(n,e,t){const r=Te(n,"x","slice3d");return Fe(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ti(r,e,t)}const She=ze({slice3d_:jLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Le(n,e,t){const r=Te(n,"x","slice4d");return Fe(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ti(r,e,t)}const Che=ze({slice4d_:$Le});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(n,e=-1){const t=Te(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);const r={logits:t},i={dim:e};return We.runKernel(Pue,r,i)}const Ehe=ze({softmax_:qLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VLe(n){Fe(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const e={input:n};return We.runKernel(hoe,e)}const LI=ze({fft_:VLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(n){Fe(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const e={input:n};return We.runKernel(xoe,e)}const fE=ze({ifft_:HLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GLe(n){const e=n.shape[n.shape.length-1],t=n.size/e;let r;if(e<=2){const i=vt(n,[t,e]);r=fE(i)}else{const i=[t,2*(e-1)],a=vt(Qw(n),[t,e]),o=vt(RD(n),[t,e]),s=Qm(ti(a,[0,1],[t,e-2]),1),u=Pt(Qm(ti(o,[0,1],[t,e-2]),1),ir(-1)),l=Xs([a,s],1),h=Xs([o,u],1),c=vt(Ap(l,h),[i[0],i[1]]);r=fE(c)}if(r=Qw(r),n.rank===3&&n.shape[0]!==0){const i=r,a=n.shape[0];r=vt(r,[a,r.shape[0]/a,r.shape[1]]),i.dispose()}return r}const Tz=ze({irfft_:GLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XLe(n,e,t=0){const i={x:Te(n,"x","split")},a={numOrSizeSplits:e,axis:t};return We.runKernel(Fue,i,a)}const Zw=ze({split_:XLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KLe(n,e){Fe(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let t=n.shape[n.shape.length-1];const r=n.size/t;let i;if(e!=null&&e<t){const p=n.shape.map(g=>0),m=n.shape.map(g=>g);m[n.shape.length-1]=e,i=ti(n,p,m),t=e}else if(e!=null&&e>t){const p=n.shape.map(m=>m);p[n.shape.length-1]=e-t,i=Xs([n,f1(p)],n.shape.length-1),t=e}else i=n;const a=Du(i),o=vt(Ap(i,a),[r,t]),s=LI(o),u=Math.floor(t/2)+1,l=Qw(s),h=RD(s),c=Zw(l,[u,t-u],l.shape.length-1),f=Zw(h,[u,t-u],h.shape.length-1),d=i.shape.slice();return d[i.shape.length-1]=u,vt(Ap(c[0],f[0]),d)}const MI=ze({rfft_:KLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YLe(n,e){let t=Te(n,"a","squaredDifference"),r=Te(e,"b","squaredDifference");[t,r]=Wi(t,r),ma(t.shape,r.shape);const i={a:t,b:r},a={};return We.runKernel(Wue,i,a)}const Dz=ze({squaredDifference_:YLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QLe(n,e){const t=Te(n,"x","squeeze","string_or_numeric");return vt(t,ase(t.shape,e).newShape)}const UI=ze({squeeze_:QLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLe(n,e=0){const t=aE(n,"tensors","stack","string_or_numeric");Fe(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&Fe(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");const r=t,i={axis:e};return We.runKernel(tue,r,i)}const Bf=ze({stack_:ZLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JLe(n,e=0){const r={x:Te(n,"x","step")},i={alpha:e};return We.runKernel(nle,r,i)}const Az=ze({step_:JLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eMe(n,e,t,r,i=0,a=0,o=0,s=0,u=0){const h={x:Te(n,"x","stridedSlice","string_or_numeric")},c={begin:e,end:t,strides:r,beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return We.runKernel($ue,h,c)}const The=ze({stridedSlice_:eMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tMe(n){const t={x:Te(n,"x","tan","float32")};return We.runKernel(Xue,t)}const Dhe=ze({tan_:tMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gl(n,e){R1(n);const t=Pf(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return fy(n,null,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2(n,e,t){if(R1(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Pf(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return fy(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kz(n,e,t){if(R1(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Pf(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return fy(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ahe(n,e,t){if(R1(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Pf(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return fy(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function khe(n,e,t){if(R1(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Pf(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return fy(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nhe(n,e,t){if(R1(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Pf(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,fy(n,e,r,t)}function Nz(n,e,t){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${n}, sliceDim: ${r}, and batchDim: ${i}.`;if(t.rank<i)throw new Error(a+` update.rank < ${i}. `);if(n.length<r+(t.rank-i))throw new Error(a+` Output shape length < ${r+(t.rank-i)}`);if(t.rank!==i+n.length-r)throw new Error(a+` update.rank != ${i+n.length-r}`);for(let o=0;o<i;++o)if(t.shape[o]!==e.shape[o])throw new Error(a+` updates.shape[${o}] (${t.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<t.rank-i;++o)if(t.shape[o+i]!==n[o+r])throw new Error(a+` updates.shape[${o+i}] (${t.shape[o+i]}) != shape[${o+i}] (${n[o+i]})`)}function BI(n,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}Nz(t,e,n)}function Ohe(n,e,t){const r=e.shape.length,i=r>1?e.shape[r-1]:1,a=t.length;let o=1;for(let c=i;c<a;++c)o*=t[c];const s=i<1?1:i,u=Hr(e.shape)/s,l=[...vx(t.slice(0,i)),1],h=Hr(t);return{sliceRank:i,numUpdates:u,sliceSize:o,strides:l,outputSize:h}}const nMe=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Ohe,validateInput:BI,validateUpdateShape:Nz},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rMe(n,e,t){const r=Te(n,"tensor","tensorScatterupdate"),i=Te(e,"indices","tensorScatterupdate","int32"),a=Te(t,"updates","tensorScatterupdate");if(BI(a,i,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);const o={tensor:r,indices:i,updates:a},s={};return We.runKernel(xue,o,s)}const Rhe=ze({tensorScatterUpdate_:rMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iMe(n,e=1,t=!0){const r=Te(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const a={x:r},o={k:e,sorted:t},[s,u]=We.runKernel(Yue,a,o);return{values:s,indices:u}}const Ihe=ze({topk_:iMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aMe(n,e=0,t=1,r,i){if(Lu(n),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new _z(e,t,r,!0,i),o=Lf(n,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const Fhe=ze({truncatedNormal_:aMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMe(n,e=0){const t=Te(n,"x","unique","string_or_numeric");Fe(t.rank>0,()=>"The input tensor must be at least 1D");const r={x:t},i={axis:e},[a,o]=We.runKernel(Zue,r,i);return{values:a,indices:o}}const Phe=ze({unique_:sMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oMe(n,e,t){const r=Te(n,"x","unsortedSegmentSum"),i=Te(e,"segmentIds","unsortedSegmentSum","int32");Fe(Vw(t),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:i},o={numSegments:t};return We.runKernel(ele,a,o)}const Lhe=ze({unsortedSegmentSum_:oMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uMe(n,e=0){const t=Te(n,"x","unstack","string_or_numeric");Fe(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);const r={value:t},i={axis:e};return We.runKernel(Jue,r,i)}const dy=ze({unstack_:uMe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mhe(n,e){return FI(n,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uhe(n,e=!0,t,r){return We.makeVariable(n,e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bhe(n,e){const t=[];for(let a=0;a<e.length;a++)e[a]&&t.push(a);const r=Lf(n,"int32"),i=Lf([t.length,n.length],"int32");for(let a=0;a<t.length;a++){const o=r.indexToLoc(t[a]),s=a*n.length;i.values.set(o,s)}return i.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function lMe(n){const e=Te(n,"condition","whereAsync","bool"),t=await e.data(),r=Bhe(e.shape,t);return n!==e&&e.dispose(),r}const Oz=lMe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function cMe(n,e,t){const r=Te(n,"tensor","boolMask"),i=Te(e,"mask","boolMask","bool"),a=t??0,o=i.rank,s=r.shape;Fe(o>0,()=>"mask cannot be scalar"),_o(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let m=a;m<a+o;m++)u*=s[m];const l=s.slice(0,a).concat([u],s.slice(a+o)),h=vt(r,l),c=vt(i,[-1]),f=await Oz(c),d=UI(f,[1]),p=sz(h,d,a);return n!==r&&r.dispose(),e!==i&&i.dispose(),d.dispose(),h.dispose(),c.dispose(),f.dispose(),p}const zhe=cMe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hMe(n,e,t){const r=Te(n,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),Fe(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{Fe(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},a={perm:e};return r.dtype==="complex64"?Nr(()=>{let o=Qw(r),s=RD(r);return o=We.runKernel(nN,{x:o},a),s=We.runKernel(nN,{x:s},a),t&&(s=lh(s)),Ap(o,s)}):We.runKernel(nN,i,a)}const dE=ze({transpose_:hMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMe(n,e,t,r,i=!0){const a=Te(n,"v","movingAverage"),o=Te(e,"x","movingAverage"),s=Te(t,"decay","movingAverage");ple(a,o),Fe(gh(a.shape,o.shape),()=>"Shape mismatch in v and x");const u=ir(1),l=Wn(u,s);let h=Pt(Wn(o,a),l);if(i){Fe(r!=null,()=>"When using zeroDebias: true, step is required.");const c=Te(r,"step","movingAverage");h=di(h,Wn(u,Xw(s,c)))}return wn(a,h)}const Whe=ze({movingAverage_:fMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(n,e,t){Lu(t);const r=Te(n,"indices","scatterND","int32"),i=Te(e,"updates","scatterND");BI(i,r,t);const a={indices:r,updates:i},o={shape:t};return We.runKernel(wue,a,o)}const jhe=ze({scatterND_:dMe});function pMe(n,e,t,r){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const i=n.rank>0?n.shape[0]:1,a=n.rank>1?n.shape[1]:1;if(t.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${a}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(n,e,t,r=0){Lu(t);const i=Te(n,"sparseIndices","sparseToDense","int32"),a=Te(e,"sparseValues","sparseToDense","string_or_numeric"),o=Te(r,"defaultValue","sparseToDense",a.dtype);pMe(i,a,t,o);const s={sparseIndices:i,sparseValues:a,defaultValue:o},u={outputShape:t};return We.runKernel(zue,s,u)}const $he=ze({sparseToDense_:gMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mMe(n,e){const t=Te(e,"indices","gatherND","int32"),i={params:Te(n,"x","gatherND","string_or_numeric"),indices:t};return We.runKernel(voe,i)}const qhe=ze({gatherND_:mMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(n,e){if(e==null)return n.shape.slice();if(gh(n.shape,e))return e;if(n.shape.length===e.length){const t=[];for(let r=0;r<n.shape.length;r++)e[r]==null&&n.shape[r]!=null?t.push(n.shape[r]):t.push(e[r]);return t}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vMe(n,e,t,r){const i=Te(n,"x","dropout");if(Fe(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),Fe(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return n instanceof Gi?i.clone():i;const a=yMe(i,t),o=1-e,s=di(az(wn(PI(a,0,1,"float32",r),o)),o);return Pt(i,s)}const Vhe=ze({dropout_:vMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rz(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function zI(n,e,t){const r=1-n%2,i=new Float32Array(n);for(let a=0;a<n;++a){const o=2*Math.PI*a/(n+r-1);i[a]=e-t*Math.cos(o)}return gl(i,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function bMe(n,e,t=1){const r=Te(n,"predictions","inTopK"),i=Te(e,"targets","inTopK");Fe(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),Fe(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),_o(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];Fe(t>0&&t<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${t}`);const o=await r.data(),s=await i.data(),[u,l]=[o.length/a,a],h=sse("bool",u);for(let c=0;c<u;c++){const f=c*l,d=o.subarray(f,f+l),p=[];for(let m=0;m<d.length;m++)p.push({value:d[m],index:m});p.sort((m,g)=>g.value-m.value),h[c]=0;for(let m=0;m<t;m++)if(p[m].index===s[c]){h[c]=1;break}}return n!==r&&r.dispose(),e!==i&&i.dispose(),uh(h,i.shape,"bool")}const Hhe=bMe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(n,e,t,r,i,a="NHWC",o){let s=n;n.rank===3&&(s=vt(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let u=e;u.rank===3&&(u=vt(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Fe(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),Fe(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),Fe(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);const l=a==="NHWC"?s.shape[3]:s.shape[1],h=a==="NHWC"?u.shape[3]:u.shape[1];Fe(l===t[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${t[2]}.`),Fe(h===t[3],()=>`Error in conv2dDerFilter: depth of dy (${h}) must match output depth for filter (${t[3]}).`),bc("conv2dDerFilter",i,o);const c={x:s,dy:u},f={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,filterShape:t};return We.runKernel(Wse,c,f)}const xMe=ze({conv2DBackpropFilter_:wMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WI(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return Pt(n,Az(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function jI(n,e){let t=e;const r=ez(n.shape,e.shape);return r.length>0&&(t=fi(t,r)),vt(t,n.shape)}function $I(n,e,t,r){if(e==="linear")return n;if(e==="relu")return ID(n);if(e==="elu")return nz(n);if(e==="relu6")return Cz(n);if(e==="prelu")return vz(n,t);if(e==="leakyrelu")return uz(n,r);if(e==="sigmoid")return H0(n);throw new Error(`Unknown fused activation ${e}.`)}const qI=(n,e)=>!(n>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Me({x:n,filter:e,strides:t,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:h}){if(u=u||"linear",qI(We.state.gradientDepth,u)===!1){Fe(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=AD(n,e,t,r,i,a,o);return s!=null&&(S=wn(S,s)),$I(S,u,l,h)}const c=Te(n,"x","conv2d","float32"),f=Te(e,"filter","conv2d","float32");let d=c,p=!1;c.rank===3&&(p=!0,d=vt(c,[1,c.shape[0],c.shape[1],c.shape[2]])),Fe(d.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${d.rank}.`),Fe(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),bc("fused conv2d",r,o);const m=i==="NHWC"?d.shape[3]:d.shape[1];Fe(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),Fe(Lp(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);const g=TD(d.shape,f.shape,t,a,r,o);let y;s!=null&&(y=Te(s,"bias","fused conv2d"),[y]=Wi(y,c),i==="NHWC"?ma(g.outShape,y.shape):(Fe(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),Fe(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let v;if(l!=null){const S=l.shape;if(Fe(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)Fe(S[0]===1||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(S.length===3)try{ma(S,g.outShape)}catch{const A=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(A)}v=Te(l,"prelu weights","fused conv2d")}const b=(S,E)=>{Fe(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[A,k,T,O]=E,F=WI(S,T,u);Fe(uE(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const I=oce(k.shape,F,A,t,r),R=xMe(k,F,A.shape,t,r),U=[I,R];if(O!=null){const B=jI(O,F);U.push(B)}return U},w={x:d,filter:f,bias:y,preluActivationWeights:v},x={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:u,leakyreluAlpha:h};return s==null?Uf((E,A,k)=>{let T=We.runKernel(oU,w,x);return k([A,E,T]),p&&(T=vt(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:b}})(d,f):Uf((E,A,k,T)=>{let O=We.runKernel(oU,w,x);return T([A,E,O,k]),p&&(O=vt(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:b}})(d,f,y)}const SMe=ze({fusedConv2d_:_Me});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(n,e,t,r,i,a=[1,1],o){let s=n;n.rank===3&&(s=vt(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let u=e;u.rank===3&&(u=vt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:s,dy:u},h={strides:r,pad:i,dimRoundingMode:o,dilations:a,filterShape:t};return We.runKernel(Jse,l,h)}const EMe=ze({depthwiseConv2dNativeBackpropFilter_:CMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(n,e,t,r,i,a=[1,1],o){let s=e,u=!1;e.rank===3&&(u=!0,s=vt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:s,filter:t},h={strides:r,pad:i,dimRoundingMode:o,dilations:a,inputShape:n},c=We.runKernel(eoe,l,h);return u?vt(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const DMe=ze({depthwiseConv2dNativeBackpropInput_:TMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe({x:n,filter:e,strides:t,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:h}){if(qI(We.state.gradientDepth,u)===!1){let x=OI(n,e,t,r,i,a,o);return s!=null&&(x=wn(x,s)),$I(x,u,l,h)}const c=Te(n,"x","depthwiseConv2d","float32"),f=Te(e,"filter","depthwiseConv2d","float32");let d=c,p=!1;c.rank===3&&(p=!0,d=vt(c,[1,c.shape[0],c.shape[1],c.shape[2]])),Fe(d.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${d.rank}.`),Fe(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),Fe(d.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${d.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),a==null&&(a=[1,1]),Fe(Lp(t,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),bc("fused depthwiseConv2d",r,o);const m=TD(d.shape,f.shape,t,a,r,o,!0);let g;s!=null&&(g=Te(s,"bias","fused conv2d"),[g]=Wi(g,c),ma(m.outShape,g.shape));let y;l!=null&&(y=Te(l,"prelu weights","fused depthwiseConv2d"));const v=(x,S)=>{Fe(uE(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[E,A,k,T]=S,O=WI(x,k,u),F=DMe(A.shape,O,E,t,r,a,o),I=EMe(A,O,E.shape,t,r,a,o);if(T!=null){const R=jI(g,O);return[F,I,R]}return[F,I]},b={x:d,filter:f,bias:g,preluActivationWeights:y},w={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:u,leakyreluAlpha:h};return s==null?Uf((S,E,A)=>{let k=We.runKernel(uU,b,w);return A([E,S,k]),p&&(k=vt(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:v}})(d,f):Uf((S,E,A,k)=>{let T=We.runKernel(uU,b,w);return k([E,S,T,A]),p&&(T=vt(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:v}})(d,f,g)}const kMe=ze({fusedDepthwiseConv2d_:AMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMe({a:n,b:e,transposeA:t=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(qI(We.state.gradientDepth,a)===!1){let O=kr(n,e,t,r);return i!=null&&(O=wn(O,i)),$I(O,a,o,s)}let u=Te(n,"a","fused matMul"),l=Te(e,"b","fused matMul");[u,l]=Wi(u,l);const h=t?u.shape[u.rank-2]:u.shape[u.rank-1],c=r?l.shape[l.rank-1]:l.shape[l.rank-2],f=t?u.shape[u.rank-1]:u.shape[u.rank-2],d=r?l.shape[l.rank-2]:l.shape[l.rank-1],p=u.shape.slice(0,-2),m=l.shape.slice(0,-2),g=Hr(p),y=Hr(m);Fe(h===c,()=>`Error in fused matMul: inner shapes (${h}) and (${c}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${t} and transposeB=${r} must match.`);const b=ma(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([f,d]),w=t?vt(u,[g,h,f]):vt(u,[g,f,h]),x=r?vt(l,[y,d,c]):vt(l,[y,c,d]);let S;i!=null&&(S=Te(i,"bias","fused matMul"),[S]=Wi(S,u),ma(b,S.shape));let E;o!=null&&(E=Te(o,"prelu weights","fused matMul"));const A=(O,F)=>{const[I,R,U,B]=F,W=WI(vt(O,U.shape),U,a);let Y,z;if(!t&&!r?(Y=kr(W,R,!1,!0),z=kr(I,W,!0,!1)):!t&&r?(Y=kr(W,R,!1,!1),z=kr(W,I,!0,!1)):t&&!r?(Y=kr(R,W,!1,!0),z=kr(I,W,!1,!1)):(Y=kr(R,W,!0,!0),z=kr(W,I,!0,!0)),i!=null){const j=jI(B,W);return[Y,z,j]}else return[Y,z]},k={a:w,b:x,bias:S,preluActivationWeights:E},T={transposeA:t,transposeB:r,activation:a,leakyreluAlpha:s};return i==null?Uf((F,I,R)=>{const U=We.runKernel(sU,k,T);return R([F,I,U]),{value:vt(U,b),gradFunc:A}})(w,x):Uf((F,I,R,U)=>{const B=We.runKernel(sU,k,T);return U([F,I,B,R]),{value:vt(B,b),gradFunc:A}})(w,x,S)}const OMe=ze({fusedMatMul_:NMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ghe=Object.freeze(Object.defineProperty({__proto__:null,conv2d:SMe,depthwiseConv2d:kMe,matMul:OMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMe(n){return zI(n,.54,.46)}const IMe=ze({hammingWindow_:RMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FMe(n){return zI(n,.5,.5)}const Xhe=ze({hannWindow_:FMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PMe(n,e,t,r=!1,i=0){let a=0;const o=[];for(;a+e<=n.size;)o.push(ti(n,a,e)),a+=t;if(r)for(;a<n.size;){const s=a+e-n.size,u=Xs([ti(n,a,e-s),bx([s],i)]);o.push(u),a+=t}return o.length===0?k2([],[0,e]):vt(Xs(o),[o.length,e])}const Khe=ze({frame_:PMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LMe(n,e,t,r,i=Xhe){r==null&&(r=Rz(e));const a=Khe(n,e,t),o=Pt(a,i(e));return MI(o,r)}const MMe=ze({stft_:LMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(n,e,t,r,i="bilinear",a=0){const o=Te(n,"image","cropAndResize"),s=Te(e,"boxes","cropAndResize","float32"),u=Te(t,"boxInd","cropAndResize","int32"),l=s.shape[0];Fe(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),Fe(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${s.shape}.`),Fe(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${s.shape}.`),Fe(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Fe(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),Fe(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const h={image:o,boxes:s,boxInd:u},c={method:i,extrapolationValue:a,cropSize:r};return We.runKernel(Kse,h,c)}const BMe=ze({cropAndResize_:UMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(n){const e=Te(n,"image","flipLeftRight","float32");Fe(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const t={image:e};return We.runKernel(doe,t,{})}const WMe=ze({flipLeftRight_:zMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(n){const e=Te(n,"image","grayscaleToRGB"),t=e.rank-1,r=e.shape[t];Fe(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),Fe(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,t),i[t]=3,A2(e,i)}const $Me=ze({grayscaleToRGB_:jMe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(n){const e=Te(n,"image","RGBToGrayscale"),t=e.rank-1,r=e.shape[t];Fe(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),Fe(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,a=pi(e,"float32"),o=gl([.2989,.587,.114]);let s;switch(e.rank){case 2:s=Sv("ij,j->i",a,o);break;case 3:s=Sv("ijk,k->ij",a,o);break;case 4:s=Sv("ijkl,l->ijk",a,o);break;case 5:s=Sv("ijklm,m->ijkl",a,o);break;case 6:s=Sv("ijklmn,n->ijklm",a,o);break;default:throw new Error("Not a valid tensor rank.")}return s=Rd(s,-1),pi(s,i)}const VMe=ze({rgbToGrayscale_:qMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(n,e,t=0,r=.5){const i=Te(n,"image","rotateWithOffset","float32");Fe(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const a={image:i},o={radians:e,fillValue:t,center:r};return We.runKernel(rle,a,o)}const GMe=ze({rotateWithOffset_:HMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xx(n,e,t,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);const o=n.shape[0];return t=Math.min(t,o),Fe(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Fe(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),Fe(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),Fe(e.rank===1,()=>"scores must be a 1D tensor"),Fe(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),Fe(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XMe(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY){const a=Te(n,"boxes","nonMaxSuppression","float32"),o=Te(e,"scores","nonMaxSuppression","float32"),s=xx(a,o,t,r,i);t=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u={maxOutputSize:t,iouThreshold:r,scoreThreshold:i};return We.runKernel(Yoe,{boxes:a,scores:o},u)}const KMe=ze({nonMaxSuppression_:XMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(n,e,t){const r=QMe(n,e,t),i=r<0?-(r+1):r;n.splice(i,0,e)}function QMe(n,e,t){return JMe(n,e,t||ZMe)}function ZMe(n,e){return n>e?1:n<e?-1:0}function JMe(n,e,t){let r=0,i=n.length,a=0,o=!1;for(;r<i;){a=r+(i-r>>>1);const s=t(e,n[a]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yhe(n,e,t,r,i){return Iz(n,e,t,r,i,0)}function Qhe(n,e,t,r,i,a){return Iz(n,e,t,r,i,0,!1,a,!0)}function Zhe(n,e,t,r,i,a){return Iz(n,e,t,r,i,a,!0)}function Iz(n,e,t,r,i,a,o=!1,s=!1,u=!1){const l=[];for(let g=0;g<e.length;g++)e[g]>i&&l.push({score:e[g],boxIndex:g,suppressBeginIndex:0});l.sort(_Y);const h=a>0?-.5/a:0,c=[],f=[];for(;c.length<t&&l.length>0;){const g=l.pop(),{score:y,boxIndex:v,suppressBeginIndex:b}=g;if(y<i)break;let w=!1;for(let x=c.length-1;x>=b;--x){const S=e6e(n,v,c[x]);if(S>=r){w=!0;break}if(g.score=g.score*t6e(r,h,S),g.score<=i)break}g.suppressBeginIndex=c.length,w||(g.score===y?(c.push(v),f.push(g.score)):g.score>i&&YMe(l,g,_Y))}const d=c.length,p=t-d;s&&p>0&&(c.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const m={selectedIndices:c};return o&&(m.selectedScores=f),u&&(m.validOutputs=d),m}function e6e(n,e,t){const r=n.subarray(e*4,e*4+4),i=n.subarray(t*4,t*4+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),h=Math.min(i[1],i[3]),c=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),d=(s-a)*(u-o),p=(c-l)*(f-h);if(d<=0||p<=0)return 0;const m=Math.max(a,l),g=Math.max(o,h),y=Math.min(s,c),v=Math.min(u,f),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(d+p-b)}function t6e(n,e,t){const r=Math.exp(e*t*t);return t<=n?r:0}function _Y(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function n6e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY){const a=Te(n,"boxes","nonMaxSuppressionAsync"),o=Te(e,"scores","nonMaxSuppressionAsync"),s=xx(a,o,t,r,i);t=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u=await Promise.all([a.data(),o.data()]),l=u[0],h=u[1],{selectedIndices:c}=Yhe(l,h,t,r,i);return a!==n&&a.dispose(),o!==e&&o.dispose(),gl(c,"int32")}const r6e=n6e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=Te(n,"boxes","nonMaxSuppression"),s=Te(e,"scores","nonMaxSuppression"),u=xx(o,s,t,r,i,a);t=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma;const l={boxes:o,scores:s},h={maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},c=We.runKernel(Zoe,l,h);return{selectedIndices:c[0],selectedScores:c[1]}}const a6e=ze({nonMaxSuppressionWithScore_:i6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function s6e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=Te(n,"boxes","nonMaxSuppressionAsync"),s=Te(e,"scores","nonMaxSuppressionAsync"),u=xx(o,s,t,r,i,a);t=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma;const l=await Promise.all([o.data(),s.data()]),h=l[0],c=l[1],{selectedIndices:f,selectedScores:d}=Zhe(h,c,t,r,i,a);return o!==n&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:gl(f,"int32"),selectedScores:gl(d)}}const o6e=s6e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=Te(n,"boxes","nonMaxSuppression"),s=Te(e,"scores","nonMaxSuppression"),u=xx(o,s,t,r,i,null),l=u.maxOutputSize,h=u.iouThreshold,c=u.scoreThreshold,f={boxes:o,scores:s},d={maxOutputSize:l,iouThreshold:h,scoreThreshold:c,padToMaxOutputSize:a},p=We.runKernel(Qoe,f,d);return{selectedIndices:p[0],validOutputs:p[1]}}const l6e=ze({nonMaxSuppressionPadded_:u6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function c6e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=Te(n,"boxes","nonMaxSuppressionAsync"),s=Te(e,"scores","nonMaxSuppressionAsync"),u=xx(o,s,t,r,i,null),l=u.maxOutputSize,h=u.iouThreshold,c=u.scoreThreshold,[f,d]=await Promise.all([o.data(),s.data()]),{selectedIndices:p,validOutputs:m}=Qhe(f,d,l,h,c,a);return o!==n&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:gl(p,"int32"),validOutputs:ir(m,"int32")}}const h6e=c6e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f6e(n,e,t=!1,r=!1){const i=Te(n,"images","resizeBilinear");Fe(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),Fe(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),Fe(r===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=vt(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},u={alignCorners:t,halfPixelCenters:r,size:e},l=We.runKernel(gue,s,u);return o?vt(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const d6e=ze({resizeBilinear_:f6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6e(n,e,t=!1,r=!1){const i=Te(n,"images","resizeNearestNeighbor");Fe(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),Fe(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),Fe(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),Fe(r===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=vt(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},u={alignCorners:t,halfPixelCenters:r,size:e},l=We.runKernel(pue,s,u);return o?vt(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const g6e=ze({resizeNearestNeighbor_:p6e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6e(n,e="binary",t=!1,r=.5){const i=Te(n,"image","threshold"),a=.2989,o=.587,s=.114,u=i.shape[0]*i.shape[1];let l=Pt(gl([r]),255),h,c,f,d;if(Fe(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),Fe(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),Fe(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),Fe(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[h,c,f]=Zw(i,[1,1,1],-1);const g=Pt(h,a),y=Pt(c,o),v=Pt(f,s);d=wn(wn(g,y),v)}else d=n;if(e==="otsu"){const g=J7(pi(Ez(d),"int32"),uh([]),256);l=y6e(g,u)}const p=t?RI(d,l):OD(d,l);return pi(Pt(p,255),"int32")}function y6e(n,e){let t=gl([-1]),r=gl([0]),i=gl([0]),a,o,s,u,l,h;for(let c=0;c<n.size-1;c++){a=ti(n,0,c+1),o=ti(n,c+1),l=di(fi(a),e),h=di(fi(o),e);const f=fi(Pt(a,Yw(0,a.size)));s=di(f,fi(a));const d=bx(o.shape,a.size),p=wn(Yw(0,o.size),d),m=Pt(o,p);u=di(fi(m),fi(o));const g=Wn(s,u),y=Wn(s,u),v=Pt(l,h);i=Pt(Pt(v,g),y);const b=OD(i,r);r=gp(b,i,r),t=gp(b,gl([c]),t)}return t}const v6e=ze({threshold_:m6e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b6e(n,e,t="nearest",r="constant",i=0,a){const o=Te(n,"image","transform","float32"),s=Te(e,"transforms","transform","float32");Fe(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),Fe(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Fe(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const u={image:o,transforms:s},l={interpolation:t,fillMode:r,fillValue:i,outputShape:a};return We.runKernel(Que,u,l)}const w6e=ze({transform_:b6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x6e(n,e,t){const r=Te(n,"a","bandPart");Fe(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[a,o]=r.shape.slice(-2);let s,u;typeof e=="number"?(Fe(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Fe(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),s=Te(e<0?a:e,"numLower","bandPart")):(Fe(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),s=gp(ZN(e,0),a,hE(e,a))),typeof t=="number"?(Fe(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`),Fe(t<=o,()=>`bandPart(): numUpper (${t}) must not be greater than the number of columns (${o}).`),u=Te(t<0?o:t,"numUpper","bandPart")):(Fe(t.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=gp(ZN(t,0),o,hE(t,o)));const l=vt(Yw(0,a,1,"int32"),[-1,1]),h=Yw(0,o,1,"int32"),c=Wn(l,h),f=lE(RI(c,s),oz(c,lh(u))),d=f1([a,o],r.dtype);return vt(Bf(dy(vt(r,[-1,a,o])).map(p=>gp(f,p,d))),i)}const _6e=ze({bandPart_:x6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6e(n){let e;if(Array.isArray(n)){e=!1,Fe(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=n[0].shape[0];for(let a=1;a<n.length;++a)Fe(n[a].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[a].shape[0]} vs. ${i})`)}else e=!0,n=Zw(n,n.shape[0],0).map(i=>UI(i,[0]));Fe(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const t=[],r=n;for(let i=0;i<n.length;++i)t.push(We.tidy(()=>{let a=r[i];if(i>0)for(let o=0;o<i;++o){const s=Pt(fi(Pt(t[o],a)),t[o]);a=Wn(a,s)}return di(a,ND(a,"euclidean"))}));return e?Bf(t,0):t}const C6e=ze({gramSchmidt_:S6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E6e(n,e=!1){if(Fe(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return SY(n,e);{const t=n.shape.slice(0,n.shape.length-2).reduce((u,l)=>u*l),r=dy(vt(n,[t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],a=[];r.forEach(u=>{const[l,h]=SY(u,e);i.push(l),a.push(h)});const o=vt(Bf(i,0),n.shape),s=vt(Bf(a,0),n.shape);return[o,s]}}function SY(n,e=!1){return We.tidy(()=>{Fe(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const t=n.shape[0],r=n.shape[1];let i=iz(t),a=pp(n);const o=k2([[1]],[1,1]);let s=pp(o);const u=t>=r?r:t;for(let l=0;l<u;++l){const h=a,c=s,f=i;[s,a,i]=We.tidy(()=>{const d=ti(a,[l,l],[t-l,1]),p=ND(d),m=ti(a,[l,l],[1,1]),g=gp(OD(m,0),k2([[-1]]),k2([[1]])),y=Wn(m,Pt(g,p)),v=di(d,y);v.shape[0]===1?s=pp(o):s=Xs([o,ti(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const b=lh(di(kr(g,y),p)),w=ti(a,[l,0],[t-l,r]),x=Pt(b,s),S=dE(s);if(l===0)a=Wn(w,kr(x,kr(S,w)));else{const k=Wn(w,kr(x,kr(S,w)));a=Xs([ti(a,[0,0],[l,r]),k],0)}const E=dE(x),A=ti(i,[0,l],[t,i.shape[1]-l]);if(l===0)i=Wn(A,kr(kr(A,s),E));else{const k=Wn(A,kr(kr(A,s),E));i=Xs([ti(i,[0,0],[t,l]),k],1)}return[s,a,i]}),bo([h,c,f])}return!e&&t>r&&(i=ti(i,[0,0],[t,r]),a=ti(a,[0,0],[r,r])),[i,a]})}const T6e=ze({qr_:E6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var go;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(go||(go={}));function D6e(n,e,t=go.SUM_BY_NONZERO_WEIGHTS){const r=Te(n,"losses","computeWeightedLoss");let i=null;e!=null&&(i=Te(e,"weights","computeWeightedLoss"));const a=i==null?r:Pt(r,i);if(t===go.NONE)return a;if(t===go.SUM)return fi(a);if(t===go.MEAN){if(i==null)return cE(a);{const o=r.size/i.size,s=di(fi(a),fi(i));return o>1?di(s,ir(o)):s}}if(t===go.SUM_BY_NONZERO_WEIGHTS){if(i==null)return di(fi(a),ir(r.size));{const o=Pt(i,km(r.shape)),s=pi(fi(mz(o,ir(0))),"float32");return di(fi(a),s)}}throw Error(`Unknown reduction: ${t}`)}const Mp=ze({computeWeightedLoss_:D6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A6e(n,e,t,r=go.SUM_BY_NONZERO_WEIGHTS){const i=Te(n,"labels","absoluteDifference"),a=Te(e,"predictions","absoluteDifference");let o=null;t!=null&&(o=Te(t,"weights","absoluteDifference")),_o(i.shape,a.shape,"Error in absoluteDifference: ");const s=xu(Wn(i,a));return Mp(s,o,r)}const k6e=ze({absoluteDifference_:A6e});function N6e(n,e,t,r,i=go.SUM_BY_NONZERO_WEIGHTS){const a=Te(n,"labels","cosineDistance"),o=Te(e,"predictions","cosineDistance");let s=null;r!=null&&(s=Te(r,"weights","cosineDistance")),_o(a.shape,o.shape,"Error in cosineDistance: ");const u=ir(1),l=Wn(u,fi(Pt(a,o),t,!0));return Mp(l,s,i)}const O6e=ze({cosineDistance_:N6e});function R6e(n,e,t,r=go.SUM_BY_NONZERO_WEIGHTS){let i=Te(n,"labels","hingeLoss");const a=Te(e,"predictions","hingeLoss");let o=null;t!=null&&(o=Te(t,"weights","hingeLoss")),_o(i.shape,a.shape,"Error in hingeLoss: ");const s=ir(1);i=Wn(Pt(ir(2),i),s);const u=ID(Wn(s,Pt(i,a)));return Mp(u,o,r)}const I6e=ze({hingeLoss_:R6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(n,e,t,r=1,i=go.SUM_BY_NONZERO_WEIGHTS){const a=Te(n,"labels","huberLoss"),o=Te(e,"predictions","huberLoss");let s=null;t!=null&&(s=Te(t,"weights","huberLoss")),_o(a.shape,o.shape,"Error in huberLoss: ");const u=ir(r),l=xu(Wn(o,a)),h=hE(l,u),c=Wn(l,h),f=wn(Pt(ir(.5),hc(h)),Pt(u,c));return Mp(f,s,i)}const P6e=ze({huberLoss_:F6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L6e(n,e,t,r=1e-7,i=go.SUM_BY_NONZERO_WEIGHTS){const a=Te(n,"labels","logLoss"),o=Te(e,"predictions","logLoss");let s=null;t!=null&&(s=Te(t,"weights","logLoss")),_o(a.shape,o.shape,"Error in logLoss: ");const u=ir(1),l=ir(r),h=lh(Pt(a,Kw(wn(o,l)))),c=Pt(Wn(u,a),Kw(wn(Wn(u,o),l))),f=Wn(h,c);return Mp(f,s,i)}const M6e=ze({logLoss_:L6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6e(n,e,t,r=go.SUM_BY_NONZERO_WEIGHTS){const i=Te(n,"labels","meanSquaredError"),a=Te(e,"predictions","meanSquaredError");let o=null;t!=null&&(o=Te(t,"weights","meanSquaredError")),_o(i.shape,a.shape,"Error in meanSquaredError: ");const s=Dz(i,a);return Mp(s,o,r)}const B6e=ze({meanSquaredError_:U6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z6e(n,e){const t=Te(n,"labels","sigmoidCrossEntropyWithLogits"),r=Te(e,"logits","sigmoidCrossEntropyWithLogits");_o(t.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=ID(r),a=Pt(r,t),o=lz(Ym(lh(xu(r))));return wn(Wn(i,a),o)}function W6e(n,e,t,r=0,i=go.SUM_BY_NONZERO_WEIGHTS){let a=Te(n,"multiClassLabels","sigmoidCrossEntropy");const o=Te(e,"logits","sigmoidCrossEntropy");let s=null;if(t!=null&&(s=Te(t,"weights","sigmoidCrossEntropy")),_o(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const l=ir(r),h=ir(1),c=ir(.5);a=wn(Pt(a,Wn(h,l)),Pt(c,l))}const u=z6e(a,o);return Mp(u,s,i)}const j6e=ze({sigmoidCrossEntropy_:W6e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6e(n,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return Uf((i,a,o)=>{const u=hz(a,[t],!0),l=Wn(pi(a,"float32"),u);o([i,l]);const h=lh(Pt(l,i));return{value:fi(h,[t]),gradFunc:(d,p)=>{const[m,g]=p,y=kD(d.shape,[t]);return[Pt(vt(d,y),Wn(pi(m,"float32"),Ym(g))),Pt(vt(d,y),Wn(Ym(g),pi(m,"float32")))]}}})(n,e)}function q6e(n,e,t,r=0,i=go.SUM_BY_NONZERO_WEIGHTS){let a=Te(n,"onehotLabels","softmaxCrossEntropy");const o=Te(e,"logits","softmaxCrossEntropy");let s=null;if(t!=null&&(s=Te(t,"weights","softmaxCrossEntropy")),_o(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const l=ir(r),h=ir(1),c=ir(a.shape[1]);a=wn(Pt(a,Wn(h,l)),di(l,c))}const u=$6e(a,o);return Mp(u,s,i)}const V6e=ze({softmaxCrossEntropy_:q6e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H6e(n,e,t,r){const i=Te(n,"indices","sparseFillEmptyRows","int32"),a=Te(e,"values","sparseFillEmptyRows"),o=Te(t,"denseShape","sparseFillEmptyRows","int32"),s=Te(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==0)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const u={indices:i,values:a,denseShape:o,defaultValue:s},l=We.runKernel(Lue,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}const G6e=ze({sparseFillEmptyRows_:H6e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X6e(n,e,t){const r=Te(n,"inputIndices","sparseReshape","int32"),i=Te(e,"inputShape","sparseReshape","int32"),a=Te(t,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const o={inputIndices:r,inputShape:i,newShape:a},s=We.runKernel(Mue,o);return{outputIndices:s[0],outputShape:s[1]}}const K6e=ze({sparseReshape_:X6e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y6e(n,e,t){const r=Te(n,"data","sparseSegmentMean"),i=Te(e,"indices","sparseSegmentMean","int32"),a=Te(t,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);const o={data:r,indices:i,segmentIds:a};return We.runKernel(Uue,o)}const Q6e=ze({sparseSegmentMean_:Y6e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z6e(n,e,t){const r=Te(n,"data","sparseSegmentSum"),i=Te(e,"indices","sparseSegmentSum","int32"),a=Te(t,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);const o={data:r,indices:i,segmentIds:a};return We.runKernel(Bue,o)}const J6e=ze({sparseSegmentSum_:Z6e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(n,e,t,r,i,a,o,s){const u=Te(n,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);const l=Te(e,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const h={separator:t,nGramWidths:r,leftPad:i,rightPad:a,padWidth:o,preserveShortSequences:s},c={data:u,dataSplits:l},f=We.runKernel(que,c,h);return{nGrams:f[0],nGramsSplits:f[1]}}const t8e=ze({stringNGrams_:e8e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8e(n,e,t=!0){const r=Te(n,"input","stringSplit","string"),i=Te(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const a={skipEmpty:t},o={input:r,delimiter:i},s=We.runKernel(Vue,o,a);return{indices:s[0],values:s[1],shape:s[2]}}const r8e=ze({stringSplit_:n8e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8e(n,e){const t=Te(n,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const i={input:t};return We.runKernel(Hue,i,r)}const a8e=ze({stringToHashBucketFast_:i8e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8e(n,e,t,r=!0){const i=Te(n,"input","staticRegexReplace","string"),a={pattern:e,rewrite:t,replaceGlobal:r};return We.runKernel(jue,{x:i},a)}const o8e=ze({staticRegexReplace_:s8e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jhe={fft:LI,ifft:fE,rfft:MI,irfft:Tz},efe={hammingWindow:IMe,hannWindow:Xhe,frame:Khe,stft:MMe},tfe={flipLeftRight:WMe,grayscaleToRGB:$Me,resizeNearestNeighbor:g6e,resizeBilinear:d6e,rgbToGrayscale:VMe,rotateWithOffset:GMe,cropAndResize:BMe,nonMaxSuppression:KMe,nonMaxSuppressionAsync:r6e,nonMaxSuppressionWithScore:a6e,nonMaxSuppressionWithScoreAsync:o6e,nonMaxSuppressionPadded:l6e,nonMaxSuppressionPaddedAsync:h6e,threshold:v6e,transform:w6e},nfe={bandPart:_6e,gramSchmidt:C6e,qr:T6e},rfe={absoluteDifference:k6e,computeWeightedLoss:Mp,cosineDistance:O6e,hingeLoss:I6e,huberLoss:P6e,logLoss:M6e,meanSquaredError:B6e,sigmoidCrossEntropy:j6e,softmaxCrossEntropy:V6e},ife={sparseFillEmptyRows:G6e,sparseReshape:K6e,sparseSegmentMean:Q6e,sparseSegmentSum:J6e},afe={stringNGrams:t8e,stringSplit:r8e,stringToHashBucketFast:a8e,staticRegexReplace:o8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u8e=new Map,_U=new Map;class sfe{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class $g{constructor(){this.classNameMap={}}static getMap(){return $g.instance==null&&($g.instance=new $g),$g.instance}static register(e){$g.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ofe(n,e,t){Fe(n.className!=null,()=>"Class being registered does not have the static className property defined."),Fe(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),Fe(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof t>"u"&&(t=n.className);const r=t,i=e+">"+r;return $g.register(n),u8e.set(i,n),_U.set(n,i),n}function l8e(n){return _U.has(n)?_U.get(n):n.className}const c8e=Object.freeze(Object.defineProperty({__proto__:null,Serializable:sfe,SerializationMap:$g,getRegisteredName:l8e,registerClass:ofe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class py extends sfe{minimize(e,t=!1,r){const{value:i,grads:a}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:a[s.name]}));this.applyGradients(o)}else this.applyGradients(a);return bo(a),t?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return Ice(e,t)}dispose(){this.iterations_!=null&&bo(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ir(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(py,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fz extends py{static get className(){return"Adadelta"}constructor(e,t,r=null){super(),this.learningRate=e,this.rho=t,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=We.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=We.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:Nr(()=>Du(a).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:Nr(()=>Du(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const u=this.accumulatedGrads[i].variable,l=this.accumulatedUpdates[i].variable;Nr(()=>{const h=wn(Pt(u,this.rho),Pt(hc(s),1-this.rho)),c=Pt(di(Mf(wn(l,this.epsilon)),Mf(wn(u,this.epsilon))),s),f=wn(Pt(l,this.rho),Pt(hc(c),1-this.rho));u.assign(h),l.assign(f);const d=wn(Pt(c,-this.learningRate),a);a.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(bo(this.accumulatedGrads.map(e=>e.variable)),bo(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pz extends py{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=We.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:Nr(()=>bx(a.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const s=this.accumulatedGrads[i].variable;Nr(()=>{const u=wn(s,hc(o));s.assign(u);const l=wn(Pt(di(o,Mf(wn(u,We.backend.epsilon()))),-this.learningRate),a);a.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&bo(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lz extends py{static get className(){return"Adam"}constructor(e,t,r,i=null){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Nr(()=>{this.accBeta1=ir(t).variable(),this.accBeta2=ir(r).variable()}),i==null&&(this.epsilon=We.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Nr(()=>{const r=Wn(1,this.accBeta1),i=Wn(1,this.accBeta2);t.forEach((a,o)=>{const s=We.registeredVariables[a],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:Nr(()=>Du(s).variable(u))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${a}/v`,variable:Nr(()=>Du(s).variable(u))});const l=Array.isArray(e)?e[o].tensor:e[a];if(l==null)return;const h=this.accumulatedFirstMoment[o].variable,c=this.accumulatedSecondMoment[o].variable,f=wn(Pt(h,this.beta1),Pt(l,1-this.beta1)),d=wn(Pt(c,this.beta2),Pt(hc(l),1-this.beta2)),p=di(f,r),m=di(d,i);h.assign(f),c.assign(d);const g=wn(Pt(di(p,wn(Mf(m),this.epsilon)),-this.learningRate),s);s.assign(g)}),this.accBeta1.assign(Pt(this.accBeta1,this.beta1)),this.accBeta2.assign(Pt(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&bo(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&bo(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),Nr(()=>{this.accBeta1.assign(Xw(this.beta1,this.iterations_+1)),this.accBeta2.assign(Xw(this.beta2,this.iterations_+1))});const t=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mz extends py{static get className(){return"Adamax"}constructor(e,t,r,i=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=i,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Nr(()=>{this.iteration=ir(0).variable(),this.accBeta1=ir(t).variable()}),i==null&&(this.epsilon=We.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Nr(()=>{const r=Wn(1,this.accBeta1),i=di(-this.learningRate,wn(Pt(this.iteration,this.decay),1));t.forEach((a,o)=>{const s=We.registeredVariables[a],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:Du(s).variable(u)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${a}/v`,variable:Du(s).variable(u)});const l=Array.isArray(e)?e[o].tensor:e[a];if(l==null)return;const h=this.accumulatedFirstMoment[o].variable,c=this.accumulatedWeightedInfNorm[o].variable,f=wn(Pt(h,this.beta1),Pt(l,1-this.beta1)),d=Pt(c,this.beta2),p=xu(l),m=gz(d,p);h.assign(f),c.assign(m);const g=wn(Pt(di(i,r),di(f,wn(m,this.epsilon))),s);s.assign(g)}),this.iteration.assign(wn(this.iteration,1)),this.accBeta1.assign(Pt(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&bo(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&bo(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VI extends py{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=We.registeredVariables[r];Nr(()=>{const s=wn(Pt(this.c,a),o);o.assign(s)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=sh(ir(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uz extends VI{static get className(){return"Momentum"}constructor(e,t,r=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=r,this.accumulations=[],this.m=ir(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=We.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:Nr(()=>Du(a).variable(!1))});const o=this.accumulations[i].variable,s=Array.isArray(e)?e[i].tensor:e[r];s!=null&&Nr(()=>{let u;const l=wn(Pt(this.m,o),s);this.useNesterov?u=wn(Pt(this.c,wn(s,Pt(l,this.m))),a):u=wn(Pt(this.c,l),a),o.assign(l),a.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&bo(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bz extends py{static get className(){return"RMSProp"}constructor(e,t=.9,r=0,i=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,i==null&&(this.epsilon=We.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=We.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:Nr(()=>Du(a).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:Nr(()=>Du(a).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:Nr(()=>Du(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const u=this.accumulatedMeanSquares[i].variable,l=this.accumulatedMoments[i].variable;Nr(()=>{const h=wn(Pt(u,this.decay),Pt(hc(s),1-this.decay));if(this.centered){const c=this.accumulatedMeanGrads[i].variable,f=wn(Pt(c,this.decay),Pt(s,1-this.decay)),d=di(Pt(s,this.learningRate),Mf(Wn(h,wn(hc(f),this.epsilon)))),p=wn(Pt(l,this.momentum),d);u.assign(h),c.assign(f),l.assign(p);const m=Wn(a,p);a.assign(m)}else{const c=wn(Pt(u,this.decay),Pt(hc(s),1-this.decay)),f=wn(Pt(l,this.momentum),di(Pt(s,this.learningRate),Mf(wn(c,this.epsilon))));u.assign(c),l.assign(f);const d=Wn(a,f);a.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&bo(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&bo(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&bo(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h8e=[Fz,Pz,Lz,Mz,Uz,Bz,VI];function f8e(){for(const n of h8e)ofe(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8e="model",p8e=".json",g8e=".weights.bin";function CY(n){return new Promise(e=>setTimeout(e)).then(n)}class d1{constructor(e){if(!xn().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(d1.URL_SCHEME)&&(e=e.slice(d1.URL_SCHEME.length)),(e==null||e.length===0)&&(e=d8e),this.modelJsonFileName=e+p8e,this.weightDataFileName=e+g8e}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=_h.join(e.weightData),r=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const i=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=Cle(e,i),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),s=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(s.download=this.modelJsonFileName,s.href=o,await CY(()=>s.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await CY(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:ED(e)}}}}d1.URL_SCHEME="downloads://";class m8e{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{const a=JSON.parse(i.target.result),o=a.modelTopology;if(o==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(a.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const u=G7(a,l=>this.loadWeights(l));e(u)},r.onerror=i=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const t=[],r=[];for(const o of e)t.push(...o.weights),r.push(...o.paths);const i=this.checkManifestAndWeightFiles(e),a=r.map(o=>this.loadWeightsFile(o,i[o]));return Promise.all(a).then(o=>[t,o])}loadWeightsFile(e,t){return new Promise((r,i)=>{const a=new FileReader;a.onload=o=>{const s=o.target.result;r(s)},a.onerror=o=>i(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],r=this.weightsFiles.map(a=>dY(a.name)),i={};for(const a of e)a.paths.forEach(o=>{const s=dY(o);if(t.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(t.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);i[o]=this.weightsFiles[r.indexOf(s)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}const y8e=n=>xn().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(d1.URL_SCHEME)?v8e(n.slice(d1.URL_SCHEME.length)):null;Ui.registerSaveRouter(y8e);function v8e(n="model"){return new d1(n)}function b8e(n){return new m8e(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EY(n,e,t,r){o(n),t=t??0,r=r??1,s(t,r);let i=0;const a=u=>(u.then(l=>{const h=t+ ++i/n.length*(r-t);return e(h),l}),u);function o(u){Fe(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function s(u,l){Fe(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),Fe(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),Fe(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(n.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ufe(n,e){e==null&&(e={});const t=e.fetchFunc==null?xn().platform.fetch:e.fetchFunc,r=n.map(c=>t(c,e.requestInit,{isBinary:!0})),s=(e.onProgress==null?await Promise.all(r):await EY(r,e.onProgress,0,.5)).map(c=>c.arrayBuffer());return e.onProgress==null?await Promise.all(s):await EY(s,e.onProgress,.5,1)}function w8e(n,e){var t;const r=e.fetchFunc==null?xn().platform.fetch:e.fetchFunc;let i=0,a;return(t=e.onProgress)===null||t===void 0||t.call(e,0),new ReadableStream({pull:async o=>{for(var s;i<n.length;){a||(a=(await r(n[i],e.requestInit,{isBinary:!0})).body.getReader());const{done:u,value:l}=await a.read();if(u){i++,a=void 0,(s=e.onProgress)===null||s===void 0||s.call(e,i/n.length);continue}o.enqueue(l);return}o.close()}})}async function x8e(n,e="",t,r){return lfe(o=>ufe(o,{requestInit:r}))(n,e,t)}function lfe(n){return async(e,t="",r)=>{const i=e.map(()=>!1),a={},o=r!=null?r.map(()=>!1):[],s=[];if(e.forEach((d,p)=>{let m=0;d.weights.forEach(g=>{const y="quantization"in g?g.quantization.dtype:g.dtype,v=u1[y]*Hr(g.shape),b=()=>{i[p]=!0,a[p]==null&&(a[p]=[]),a[p].push({manifestEntry:g,groupOffset:m,sizeBytes:v})};r!=null?r.forEach((w,x)=>{w===g.name&&(b(),o[x]=!0)}):b(),s.push(g.name),m+=v})}),!o.every(d=>d)){const d=r.filter((p,m)=>!o[m]);throw new Error(`Could not find weights in manifest with names: ${d.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}const u=i.reduce((d,p,m)=>(p&&d.push(m),d),[]),l=[];u.forEach(d=>{e[d].paths.forEach(p=>{const m=t+(t.endsWith("/")?"":"/")+p;l.push(m)})});const h=await n(l),c={};let f=0;return u.forEach(d=>{const p=e[d].paths.length,m=new _h(h.slice(f,f+p));a[d].forEach(y=>{const v=m.slice(y.groupOffset,y.groupOffset+y.sizeBytes),b=xle(v,[y.manifestEntry]);for(const w in b)c[w]=b[w]}),f+=p}),c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _8e="application/octet-stream",S8e="application/json";class zz{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(Fe(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=xn().platform.fetch,Fe(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Fe(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=Cle(e,r);if(t.body.append("model.json",new Blob([JSON.stringify(i)],{type:S8e}),"model.json"),e.weightData!=null){const o=_h.join(e.weightData);t.body.append("model.weights.bin",new Blob([o],{type:_8e}),"model.weights.bin")}const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:ED(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=t.modelTopology,i=t.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return G7(e,t=>this.loadWeights(t))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),r=KN(e.weightsManifest),i=()=>w8e(t,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:i})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=C8e(t),a=this.weightPathPrefix||r,o=[],s=[];for(const u of e)for(const l of u.paths)this.weightUrlConverter!=null?s.push(this.weightUrlConverter(l)):o.push(a+l+i);return this.weightUrlConverter&&o.push(...await Promise.all(s)),o}async loadWeights(e){const t=await this.getWeightUrls(e),r=KN(e),i=await ufe(t,this.loadOptions);return[r,i]}}zz.URL_SCHEME_REGEX=/^https?:\/\//;function C8e(n){const e=n.lastIndexOf("/"),t=n.lastIndexOf("?"),r=n.substring(0,e),i=t>e?n.substring(t):"";return[r+"/",i]}function SU(n){return n.match(zz.URL_SCHEME_REGEX)!=null}const cfe=(n,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(n)?t=n.every(r=>SU(r)):t=SU(n),t)return Wz(n,e)}return null};Ui.registerSaveRouter(cfe);Ui.registerLoadRouter(cfe);function Wz(n,e){return new zz(n,e)}function E8e(n,e){return Wz(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eM{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class hfe{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class T8e{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function D8e(n,e,t,r){const i=arguments;return new T8e(eO(...i))}function eO(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new eM(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new eM({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new eM({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))}function A8e(n){return new hfe(n)}function k8e(n){return new hfe(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jz=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:_h,browserFiles:b8e,browserHTTPRequest:E8e,concatenateArrayBuffers:S4e,copyModel:V4e,decodeWeights:xle,decodeWeightsStream:Sle,encodeWeights:y4e,fromMemory:D8e,fromMemorySync:eO,getLoadHandlers:O4e,getModelArtifactsForJSON:G7,getModelArtifactsForJSONSync:H7,getModelArtifactsInfoForJSON:ED,getSaveHandlers:N4e,getWeightSpecs:KN,http:Wz,isHTTPScheme:SU,listModels:$4e,loadWeights:x8e,moveModel:H4e,registerLoadRouter:k4e,registerSaveRouter:A4e,removeModel:q4e,weightsLoaderFactory:lfe,withSaveHandler:A8e,withSaveHandlerSync:k8e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(n,e,t){const r=Te(n,"labels","confusionMatrix"),i=Te(e,"predictions","confusionMatrix");Fe(t==null||t>0&&Number.isInteger(t),()=>`If provided, numClasses must be a positive integer, but got ${t}`),Fe(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),Fe(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),Fe(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),Fe(t>0&&Number.isInteger(t),()=>`numClasses is required to be a positive integer, but got ${t}`);const a=JN(pi(r,"int32"),t),o=JN(pi(i,"int32"),t),s=dE(a),u=kr(s,o);return pi(u,"int32")}const O8e=ze({confusionMatrix_:N8e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R8e=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:O8e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let av,TY=!1;function ffe(n,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,r=!1,i=!1,a=!1,o=!1,s=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)a=!0;else if(n.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)s=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if(nE(aU,We.backendName)!=null){const p={pixels:n},m={numChannels:e};return We.runKernel(aU,p,m)}const[l,h]=i?[n.videoWidth,n.videoHeight]:[n.width,n.height];let c;if(o)c=n.getContext("2d").getImageData(0,0,l,h).data;else if(r||t)c=n.data;else if(a||i||s){if(av==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")av=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else av=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});av.canvas.width=l,av.canvas.height=h,av.drawImage(n,0,0,l,h),c=av.getImageData(0,0,l,h).data}let f;if(e===4)f=new Int32Array(c);else{const p=l*h;f=new Int32Array(p*e);for(let m=0;m<p;m++)for(let g=0;g<e;++g)f[m*e+g]=c[m*4+g]}return kz(f,[h,l,e],"int32")}function I8e(n){return n!=null&&n.data instanceof Uint8Array}function F8e(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function P8e(n){return n!=null&&n.width!==0&&n.height!==0}function L8e(n){return F8e()&&!(n instanceof ImageBitmap)&&P8e(n)&&!I8e(n)}async function M8e(n,e=3){let t=null;if(xn().getBool("WRAP_TO_IMAGEBITMAP")&&L8e(n)){let r;try{r=await createImageBitmap(n,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===n.width&&r.height===n.height?t=r:t=n}else t=n;return ffe(t,e)}function dfe(n){if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const e=n.rank===2?1:n.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`)}function U8e(n){const e=(n==null?void 0:n.alpha)||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function B8e(n,e){let t=Te(n,"img","toPixels");if(!(n instanceof Gi)){const l=t;t=pi(l,"int32"),l.dispose()}dfe(t);const[r,i]=t.shape.slice(0,2),a=t.rank===2?1:t.shape[2],o=await t.data(),s=t.dtype==="float32"?255:1,u=new Uint8ClampedArray(i*r*4);for(let l=0;l<r*i;++l){const h=[0,0,0,255];for(let f=0;f<a;f++){const d=o[l*a+f];if(t.dtype==="float32"){if(d<0||d>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${d}.`)}else if(t.dtype==="int32"&&(d<0||d>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${d}.`);a===1?(h[0]=d*s,h[1]=d*s,h[2]=d*s):h[f]=d*s}const c=l*4;u[c+0]=Math.round(h[0]),u[c+1]=Math.round(h[1]),u[c+2]=Math.round(h[2]),u[c+3]=Math.round(h[3])}if(e!=null){TY||nE(B7,We.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),TY=!0),e.width=i,e.height=r;const l=e.getContext("2d"),h=new ImageData(u,i,r);l.putImageData(h,0,0)}return t!==n&&t.dispose(),u}function z8e(n,e,t){let r=Te(n,"img","draw");if(!(n instanceof Gi)){const o=r;r=pi(o,"int32"),o.dispose()}dfe(r),U8e(t==null?void 0:t.imageOptions);const i={image:r},a={canvas:e,options:t};We.runKernel(B7,i,a)}const W8e=ze({fromPixels_:ffe}),j8e=Object.freeze(Object.defineProperty({__proto__:null,draw:z8e,fromPixels:W8e,fromPixelsAsync:M8e,toPixels:B8e},Symbol.toStringTag,{value:"Module"}));function pfe(n,e){const t=n.shape.length,r=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${t}`);if(Hr(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const i=e.shape,a=i[i.length-1];let o=1;for(let c=0;c<i.length-1;++c)o*=i[c];const s=n.shape,u=i.slice();u.pop();let l=1;for(let c=a;c<t;++c)l*=s[c],u.push(s[c]);const h=[...vx(n.shape).map(c=>c/l),1].slice(0,a);return[u,o,l,h]}const $8e=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:pfe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CU=-2,q8e=-1;function V8e(n,e,t){const r=n.shape.length;Fe(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),Fe(r===t.length,()=>`Error in slice${r}D: Length of size ${t} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)Fe(e[i]+t[i]<=n.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+t[i]}) would overflow input.shape[${i}] (${n.shape[i]})`)}function H8e(n){const e=[];let t=0;for(;n>0;)n&1&&e.push(t),n/=2,t++;return e}function G8e(n,e,t){const r=[];for(let i=0;i<n.length;i++)r[i]=Math.ceil((e[i]-n[i])/t[i]);return r}function gfe(n,e,t,r){const i=[...n];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<t;a++)a===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function mfe(n,e,t){return t<=n?t:t-(e-1)}function yfe(n,e){const t=[];for(let r=0;r<n;r++)t.push(e+r);return t}function X8e(n,e,t,r,i,a,o,s,u){const l=n.length;let h=new Array(l),c=new Array(l),f=new Array(l);if(e.length&&t>0){const d=e[0],p=t+1;h=vfe(o,d,p,r,n),c=bfe(s,d,p,i,n),f=gfe(a,d,p,n)}else for(let d=0;d<l;d++)h[d]=xfe(o,r,a,n,d,u),c[d]=_fe(s,i,a,n,d,u),f[d]=wfe(a,d,u);return{begin:h,end:c,strides:f}}function vfe(n,e,t,r,i){const a=[...i],o=yfe(t,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=0;else{const u=mfe(e,t,s);let l=r[u];n&1<<u&&(l=0),a[s]=l}return a}function bfe(n,e,t,r,i){const a=[...i],o=yfe(t,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=Number.MAX_SAFE_INTEGER;else{const u=mfe(e,t,s);let l=r[u];n&1<<u&&(l=Number.MAX_SAFE_INTEGER),a[s]=l}for(let s=0;s<a.length;s++){const u=i[s];a[s]<0&&(a[s]+=u),a[s]=eE(0,a[s],i[s])}return a}function wfe(n,e,t){let r=n[e];return(t&1<<e||r==null)&&(r=1),r}function xfe(n,e,t,r,i,a){let o=e[i];const s=t[i]||1;(n&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const u=r[i];return o<0&&(o+=u),o=eE(0,o,u-1),o}function _fe(n,e,t,r,i,a){let o=e[i];const s=t[i]||1;(n&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const u=r[i];return o<0&&(o+=u),s>0?o=eE(0,o,u):o=eE(-1,o,u-1),o}function K8e(n,e,t){let r=t.length;for(let i=0;i<t.length;i++)if(t[i]>1){r=i;break}for(let i=r+1;i<t.length;i++)if(e[i]>0||t[i]!==n[i])return!1;return!0}function Y8e(n,e){let t=n.length>0?n[n.length-1]:1;for(let r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function Q8e(n,e,t){let r;const i=n.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{Fe(o!==-1,()=>"slice() does not support negative begin indexing.")});let a;return t==null?a=new Array(i).fill(-1):typeof t=="number"?a=[t,...new Array(i-1).fill(-1)]:t.length<i?a=t.concat(new Array(i-t.length).fill(-1)):a=t,a=a.map((o,s)=>o>=0?o:(Fe(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),n.shape[s]-r[s])),[r,a]}function Z8e(n,e,t,r,i,a,o,s,u){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,o!=null&&(o&o-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let h=!1;const c={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:t.slice(),strides:l.slice(),beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};for(let b=0;b<c.dims;b++)h&&(1<<b&s)!==0&&c.numAddAxisAfterEllipsis++,1<<b&o&&(h=!0);h||(c.ellipsisMask|=1<<c.dims,c.dims++);const f={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};J8e(c,f);let d=!0,p=!0,m=!0;const g=[],y=[];for(let b=0;b<n.length;++b){if(f.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const w=!!(f.shrinkAxisMask&1<<b),x=n[b];if(x===-1){g.push(w?1:-1);continue}const S=[f.beginMask&1<<b,f.endMask&1<<b],E=[f.strides[b]>0?0:-1,f.strides[b]>0?x:x-1];if(w&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[b]===1;const A=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(w){const F=f.begin[b]<0?x+f.begin[b]:f.begin[b];if(f.begin[b]=F,f.end[b]=f.begin[b]+1,F<0||F>=x)throw Error(`slice index ${f.begin[b]} of dimension ${b} out of bounds.`)}else f.begin[b]=DY(f.begin[b],0,f.strides[b],x,S,E),f.end[b]=DY(f.end[b],1,f.strides[b],x,S,E);const O=f.strides[b]===1&&f.begin[b]===0&&f.end[b]===x;d=d&&O,p=p&&(b===0&&f.strides[b]===1||O)}else d=d&&f.strides[b]===1&&A,p=p&&(b===0&&f.strides[b]===1||A);let k,T=!1;if(f.beginValid&&f.endValid?(k=f.end[b]-f.begin[b],T=!0):w?(k=1,T=!0):A&&x>=0&&(f.strides[b]<0?k=-x:k=x,T=!0),T){let O;k===0||k<0!=f.strides[b]<0?O=0:O=Math.trunc(k/f.strides[b])+(k%f.strides[b]!==0?1:0),g.push(O)}else g.push(-1)}for(let b=0;b<f.finalShapeGatherIndices.length;++b){const w=f.finalShapeGatherIndices[b];w>=0?y.push(g[w]):w===CU&&y.push(1)}return{finalShapeSparse:y.filter((b,w)=>f.finalShapeGatherIndices[w]!==CU),finalShape:y,isIdentity:d,sliceDim0:p,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function J8e(n,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let t=0;e.beginValid=n.begin!=null,e.endValid=n.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<n.dims;r++)if(1<<r&n.ellipsisMask){const i=Math.min(e.dims-(n.dims-r)+1+n.numAddAxisAfterEllipsis,e.dims);for(;t<i;t++)e.begin[t]=0,e.end[t]=0,e.strides[t]=1,e.beginMask|=1<<t,e.endMask|=1<<t,e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[t]=r}else if(1<<r&n.newAxisMask)e.finalShapeGatherIndices.push(CU),e.finalShapeGatherIndicesSparse.push(-1);else{if(t===e.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${e.dims} dims, ${e.begin.length}.`);n.begin!=null&&(e.begin[t]=n.begin[r]),n.end!=null&&(e.end[t]=n.end[r]),e.strides[t]=n.strides[r],n.beginMask&1<<r&&(e.beginMask|=1<<t),n.endMask&1<<r&&(e.endMask|=1<<t),n.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(q8e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<t):(e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[t]=r,t++}}function DY(n,e,t,r,i,a){if(i[e])return t>0?a[e]:a[e+1&1];{const o=n<0?r+n:n;return o<a[0]?a[0]:o>a[1]?a[1]:o}}const Sfe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:V8e,computeFlatOffset:Y8e,computeOutShape:G8e,getNormalizedAxes:X8e,isSliceContinous:K8e,maskToAxes:H8e,parseSliceParams:Q8e,sliceInfo:Z8e,startForAxis:xfe,startIndicesWithElidedDims:vfe,stopForAxis:_fe,stopIndicesWithElidedDims:bfe,stridesForAxis:wfe,stridesWithElidedDims:gfe},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const eUe="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cfe{static sgd(e){return new VI(e)}static momentum(e,t,r=!1){return new Uz(e,t,r)}static rmsprop(e,t=.9,r=0,i=null,a=!1){return new Bz(e,t,r,i,a)}static adam(e=.001,t=.9,r=.999,i=null){return new Lz(e,t,r,i)}static adadelta(e=.001,t=.95,r=null){return new Fz(e,t,r)}static adamax(e=.002,t=.9,r=.999,i=null,a=0){return new Mz(e,t,r,i,a)}static adagrad(e,t=.1){return new Pz(e,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tUe=Cfe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nUe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n();function rUe(){return new Promise(n=>nUe(()=>n()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iUe(n,e){const t=n[0].length;n.forEach((i,a)=>{Fe(i.length===t,()=>`Error in concat${t}D: rank of tensors[${a}] must be the same as the rank of the rest (${t})`)}),Fe(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);const r=n[0];n.forEach((i,a)=>{for(let o=0;o<t;o++)Fe(o===e||i[o]===r[o],()=>`Error in concat${t}D: Shape of tensors[${a}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function aUe(n,e){const t=n[0].slice();for(let r=1;r<n.length;r++)t[e]+=n[r][e];return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Tf;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(Tf||(Tf={}));function sUe(n,e,t){let r=new Array;if(t==null&&e==null)return r;if(e==null)for(;r.length<n+t.length;)r.push(-1);else r=e.slice();if(t==null)return r;if(n+t.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${n+t.length}, but shape.rank = ${r.length}`);for(let i=1;i<t.length;++i){const a=t[i],o=r[r.length-t.length+i],s=r[o];if(a>=0)if(s>=0){if(s!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+n}] = ${a} but shape[${i+n}] = ${s}`)}else r[o]=a}return r}function oUe(n){const e={FIRST_DIM_SIZE:Tf.FIRST_DIM_SIZE,VALUE_ROWIDS:Tf.VALUE_ROWIDS,ROW_LENGTHS:Tf.ROW_LENGTHS,ROW_SPLITS:Tf.ROW_SPLITS,ROW_LIMITS:Tf.ROW_LIMITS,ROW_STARTS:Tf.ROW_STARTS},t=[];for(const r of n)if(r in e)t.push(e[r]);else break;return t}function uUe(n){return n.length===0?0:n[0]===Tf.FIRST_DIM_SIZE?n.length-1:n.length}function lUe(n,e){if(n==null||e==null)return;const t=n.length,r=e.length;if(t>=r)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${t} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(t,r-1);++i){const a=n[i],o=e[i+1];if(a>=0&&o>=0&&a!==1&&a!==o)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-n.length}] = ${a} but ragged tensor input.flatValues.shape[${i-n.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $z=30;function cUe(n){return n<=$z?n:VN(n,Math.floor(Math.sqrt(n)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hUe(n,e,t){const r=t*(typeof n=="number"?n:n[0]),i=e*(typeof n=="number"?n:n[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fUe(n,e,t,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(n[0]/t),i=i.concat(n.slice(1));else{i=i.concat(n[0]);const a=e.length;for(let o=0;o<a;++o)i=i.concat([n[o+1]/e[o],e[o]]);i=i.concat(n.slice(a+1))}return i}function dUe(n,e,t=!0){const r=[];if(t){r.push(e);for(let i=e+1;i<n;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],a=[];for(let o=1;o<n;++o)o>=e*2+1||o%2===1?a.push(o):i.push(o);r.push(...i),r.push(0),r.push(...a)}return r}function pUe(n,e,t,r=!0){const i=[];r?i.push(n[0]/t):i.push(n[0]*t);for(let a=1;a<n.length;++a)a<=e.length?r?i.push(e[a-1]*n[a]):i.push(n[a]/e[a-1]):i.push(n[a]);return i}function gUe(n,e){const t=[0];for(let r=0;r<e;++r)t.push(n[r][0]);return t}function mUe(n,e,t){const r=n.slice(0,1);for(let i=0;i<t;++i)r.push(n[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yUe=1.7580993408473768,vUe=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bUe=.3275911,wUe=.254829592,xUe=-.284496736,_Ue=1.421413741,SUe=-1.453152027,CUe=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EUe(n,e){if(n.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${e.length}.`);const t=new Float32Array(n.length*2);for(let r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function TUe(n){const e=new Float32Array(n.length/2),t=new Float32Array(n.length/2);for(let r=0;r<n.length;r+=2)e[r/2]=n[r],t[r/2]=n[r+1];return{real:e,imag:t}}function DUe(n){const e=Math.ceil(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<n.length;i+=4)t[Math.floor(i/4)]=n[i],r[Math.floor(i/4)]=n[i+1];return{real:t,imag:r}}function AUe(n){const e=Math.floor(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<n.length;i+=4)t[Math.floor(i/4)]=n[i],r[Math.floor(i/4)]=n[i+1];return{real:t,imag:r}}function kUe(n,e){const t=n[e*2],r=n[e*2+1];return{real:t,imag:r}}function NUe(n,e,t,r){n[r*2]=e,n[r*2+1]=t}function OUe(n,e){const t=new Float32Array(n/2),r=new Float32Array(n/2);for(let i=0;i<Math.ceil(n/2);i++){const a=(e?2:-2)*Math.PI*(i/n);t[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:t,imag:r}}function RUe(n,e,t){const r=(t?2:-2)*Math.PI*(n/e),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tM="->",IUe=/->/g,AY=",",kY="...";function FUe(n,e){n=n.replace(/\s/g,"");const t=(n.length-n.replace(IUe,"").length)/tM.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${tM}").`);const[r,i]=n.split(tM);Fe(r.indexOf(kY)===-1,()=>`The ellipsis notation ("${kY}") is not supported yet.`);const a=r.split(AY),o=a.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let f=0;f<i.length;++f){const d=i[f];if(!a.some(p=>p.indexOf(d)!==-1))throw new Error(`Output subscripts contain the label ${d} not present in the input subscripts.`);s.indexOf(d)===-1&&s.push(d)}for(let f=0;f<r.length;++f){const d=r[f];s.indexOf(d)===-1&&d!==AY&&s.push(d)}const u=new Array(a.length);for(let f=0;f<o;++f){if(new Set(a[f].split("")).size!==a[f].length)throw new Error(`Found duplicate axes in input component ${a[f]}. Support for duplicate axes in input is not implemented yet.`);u[f]=[];for(let d=0;d<a[f].length;++d)u[f].push(s.indexOf(a[f][d]))}const l=s.length,h=i.length,c=[];for(let f=h;f<l;++f)c.push(f);return{allDims:s,summedDims:c,idDims:u}}function PUe(n,e){let t=new Array(n);t.fill(-1);for(let i=0;i<e.length;++i)t[e[i]]=i;const r=[];for(let i=0;i<n;++i)t[i]===-1&&r.push(i);return t=t.filter(i=>i!==-1),{permutationIndices:t,expandDims:r}}function LUe(n,e,t){const r=new Array(n);for(let i=0;i<t.length;++i){const a=t[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=a[o]:Fe(r[e[i][o]]===a[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(a)}, but got dimension ${a[o]}`)}}function MUe(n,e){const t=n,r=[];let i=0;n.length===0&&t.push(-1),i=n.length+1;for(let o=0;o<i;++o)r.push([]);const a=[];for(let o=0;o<t.length;++o){const s=t[o],u=BUe(e,s);for(const l of u)a.indexOf(l)===-1&&(r[o].push(l),a.push(l))}return{path:t,steps:r}}function UUe(n){return n.every((e,t)=>e===t)}function BUe(n,e){const t=[];for(let r=0;r<n.length;++r)(n[r].length===0||n[r].indexOf(e)!==-1||e===-1)&&t.push(r);return t}function zUe(n,e,t=0){let r=[];if(typeof e=="number")Fe(n.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(n.shape[t]/e);else{const i=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);Fe(i<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const o=e.reduce((s,u)=>u>0?s+u:s);e[a]=n.shape[t]-o}Fe(n.shape[t]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WUe(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function jUe(n,e){return`indices(${n}, 0) is invalid: ${e} < 0`}function $Ue(n,e,t){return`indices(${n}, 0) is invalid: ${e} >= ${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qUe(n,e){return`only one output dimension may be -1, not both ${n} and ${e}`}function VUe(n,e){return`size ${n} must be non-negative, not ${e}`}function HUe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function GUe(n,e){const t=Hr(n),r=Hr(e);return`Input to reshape is a SparseTensor with ${t}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${n} outputShape= ${e}`}function XUe(n,e){const t=Hr(n),r=Hr(e);return`Input to reshape is a tensor with ${t} dense values, but the requested shape has ${r}. inputShape=${n} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KUe(){return"segment ids must be >= 0"}function YUe(){return"segment ids are not increasing"}function QUe(n,e){return`Segment id ${n} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function ZUe(n,e,t){return`Bad: indices[${n}] == ${e} out of range [0, ${t})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JUe(n,e){let t=!1,r;for(n<=$z?(r=n,t=!0):r=VN(n,Math.floor(Math.sqrt(n)));!t;)r>e||r===n?t=!0:r=VN(n,r+1);return r}function eBe(n,e,t){const r=[],i=n.length;for(let a=0;a<i;a++)a!==e?r.push(n[a]):r.push(t);return r}function tBe(n,e,t,r){const i=e.shape.length,a=n.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(t<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${t}).`);for(let c=0;c<r;++c)if(n.shape[c]!==e.shape[c])throw new Error(`x.shape[${c}]: ${n.shape[c]} should be equal to indices.shape[${c}]: ${e.shape[c]}.`);const o=n.shape[t],s=[];let u=1,l=1,h=1;for(let c=0;c<r;++c)s.push(n.shape[c]),u*=n.shape[c];for(let c=r;c<t;c++)s.push(n.shape[c]),l*=n.shape[c];for(let c=r;c<i;c++)s.push(e.shape[c]);for(let c=t+1;c<a;c++)s.push(n.shape[c]),h*=n.shape[c];return{batchSize:u,sliceSize:h,outerSize:l,dimSize:o,outputShape:s}}const nBe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:tBe,computeOutShape:eBe,segOpComputeOptimalWindowSize:JUe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rBe(n){try{return n.map(e=>GN(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function iBe(n){return n.map(e=>CD(e))}const aBe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:wUe,ERF_A2:xUe,ERF_A3:_Ue,ERF_A4:SUe,ERF_A5:CUe,ERF_P:bUe,PARALLELIZE_THRESHOLD:$z,get RowPartitionType(){return Tf},SELU_SCALE:vUe,SELU_SCALEALPHA:yUe,applyActivation:$I,assertAndGetBroadcastShape:ma,assertAxesAreInnerMostDims:xFe,assertParamsConsistent:iUe,assignToTypedArray:NUe,axesAreInnerMostDims:rz,calculateShapes:Ohe,checkEinsumDimSizes:LUe,checkPadOnDimRoundingMode:bc,combineLocations:Cce,combineRaggedTensorToTensorShapes:sUe,complexWithEvenIndex:DUe,complexWithOddIndex:AUe,computeConv2DInfo:TD,computeConv3DInfo:Vle,computeDefaultPad:Y7,computeDilation2DInfo:m5e,computeOptimalWindowSize:cUe,computeOutAndReduceShapes:wFe,computeOutShape:aUe,computePool2DInfo:qle,computePool3DInfo:y5e,convertConv2DDataFormat:Hle,decodeEinsumEquation:FUe,eitherStridesOrDilationsAreOne:Lp,expandShapeToKeepDim:kD,exponent:RUe,exponents:OUe,fromStringArrayToUint8:iBe,fromUint8ToStringArray:rBe,getAxesPermutation:_Fe,getBroadcastDims:bce,getComplexWithIndex:kUe,getEinsumComputePath:MUe,getEinsumPermutation:PUe,getFusedBiasGradient:jI,getFusedDyActivation:WI,getImageCenter:hUe,getInnerMostAxes:CFe,getPermuted:dUe,getRaggedRank:uUe,getReductionAxes:ez,getReshaped:fUe,getReshapedPermuted:pUe,getRowPartitionTypesHelper:oUe,getSliceBeginCoords:gUe,getSliceSize:mUe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:WUe,getSparseFillEmptyRowsNegativeIndexErrorMessage:jUe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:$Ue,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:HUe,getSparseReshapeInputOutputMismatchErrorMessage:XUe,getSparseReshapeInputOutputMultipleErrorMessage:GUe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:qUe,getSparseReshapeNegativeOutputDimErrorMessage:VUe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:ZUe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:KUe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:YUe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:QUe,getUndoAxesPermutation:SFe,isIdentityPermutation:UUe,log:yIe,mergeRealAndImagArrays:EUe,prepareAndValidate:pfe,prepareSplitSize:zUe,segment_util:nBe,shouldFuse:qI,slice_util:Sfe,splitRealAndImagArrays:TUe,stridesOrDilationsArePositive:h1,tupleValuesAreOne:uE,upcastType:NI,validateDefaultValueShape:lUe,validateInput:BI,validateUpdateShape:Nz,warn:jg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sBe=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:Yhe,nonMaxSuppressionV4Impl:Qhe,nonMaxSuppressionV5Impl:Zhe,whereImpl:Bhe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */f8e();const oBe=Object.freeze(Object.defineProperty({__proto__:null,Abs:gse,Acos:mse,Acosh:yse,AdadeltaOptimizer:Fz,AdagradOptimizer:Pz,AdamOptimizer:Lz,AdamaxOptimizer:Mz,Add:M7,AddN:vse,All:bse,Any:wse,ArgMax:xse,ArgMin:_se,Asin:Sse,Asinh:Cse,Atan:Ese,Atan2:Dse,Atanh:Tse,AvgPool:Ase,AvgPool3D:kse,AvgPool3DGrad:JRe,AvgPoolGrad:ZRe,BatchMatMul:Nse,BatchToSpaceND:Ose,Bincount:Rse,BitwiseAnd:Ise,BroadcastArgs:Fse,BroadcastTo:eIe,Cast:U7,Ceil:Pse,ClipByValue:Lse,Complex:Mse,ComplexAbs:Use,Concat:Bse,Conv2D:zse,Conv2DBackpropFilter:Wse,Conv2DBackpropInput:jse,Conv3D:$se,Conv3DBackpropFilterV2:tIe,Conv3DBackpropInputV2:qse,Cos:Vse,Cosh:Hse,CropAndResize:Kse,Cumprod:Gse,Cumsum:Xse,DataStorage:NRe,DenseBincount:Yse,DepthToSpace:Qse,DepthwiseConv2dNative:Zse,DepthwiseConv2dNativeBackpropFilter:Jse,DepthwiseConv2dNativeBackpropInput:eoe,Diag:toe,Dilation2D:noe,Dilation2DBackpropFilter:rIe,Dilation2DBackpropInput:nIe,Draw:B7,get ENV(){return P7},Einsum:ioe,Elu:aoe,EluGrad:iIe,Environment:dse,Equal:ooe,Erf:soe,Exp:uoe,ExpandDims:loe,Expm1:coe,FFT:hoe,Fill:foe,FlipLeftRight:doe,Floor:poe,FloorDiv:goe,FromPixels:aU,FusedBatchNorm:moe,FusedConv2D:oU,FusedDepthwiseConv2D:uU,GatherNd:voe,GatherV2:yoe,Greater:boe,GreaterEqual:woe,IFFT:xoe,Identity:z7,Imag:_oe,IsFinite:Soe,IsInf:Coe,IsNan:Eoe,KernelBackend:nse,LRN:Poe,LRNGrad:uIe,LeakyRelu:Toe,Less:Doe,LessEqual:Aoe,LinSpace:koe,Log:Noe,Log1p:Ooe,LogSoftmax:sIe,LogicalAnd:Roe,LogicalNot:Ioe,LogicalOr:Foe,LogicalXor:aIe,LowerBound:oIe,MatrixBandPart:lIe,Max:Loe,MaxPool:Uoe,MaxPool3D:Boe,MaxPool3DGrad:hIe,MaxPoolGrad:cIe,MaxPoolWithArgmax:zoe,Maximum:Moe,Mean:Woe,Min:joe,Minimum:$oe,MirrorPad:qoe,Mod:Voe,MomentumOptimizer:Uz,Multinomial:Hoe,Multiply:Goe,Neg:Xoe,NonMaxSuppressionV3:Yoe,NonMaxSuppressionV4:Qoe,NonMaxSuppressionV5:Zoe,NotEqual:Koe,OP_SCOPE_SUFFIX:q7,OneHot:eue,OnesLike:Joe,Optimizer:py,OptimizerConstructors:Cfe,Pack:tue,PadV2:nue,Pool:fIe,Pow:rue,Prelu:iue,Prod:aue,RMSPropOptimizer:Bz,RaggedGather:sue,RaggedRange:oue,RaggedTensorToTensor:uue,Range:lue,get Rank(){return hU},Real:cue,RealDiv:roe,Reciprocal:hue,get Reduction(){return go},Relu:fue,Relu6:mue,Reshape:due,ResizeBilinear:gue,ResizeBilinearGrad:pIe,ResizeNearestNeighbor:pue,ResizeNearestNeighborGrad:dIe,Reverse:yue,RotateWithOffset:rle,Round:vue,Rsqrt:bue,SGDOptimizer:VI,ScatterNd:wue,SearchSorted:_ue,Select:Sue,Selu:Cue,Sigmoid:kue,Sign:Aue,Sin:Tue,Sinh:Due,Slice:Eue,Softmax:Pue,Softplus:Nue,SpaceToBatchND:Iue,SparseFillEmptyRows:Lue,SparseReshape:Mue,SparseSegmentMean:Uue,SparseSegmentSum:Bue,SparseToDense:zue,SplitV:Fue,Sqrt:Oue,Square:gIe,SquaredDifference:Wue,StaticRegexReplace:jue,Step:nle,StridedSlice:$ue,StringNGrams:que,StringSplit:Vue,StringToHashBucketFast:Hue,Sub:Gue,Sum:Rue,Tan:Xue,Tanh:Kue,Tensor:Gi,TensorBuffer:XN,TensorScatterUpdate:xue,Tile:W7,TopK:Yue,Transform:Que,Transpose:nN,Unique:Zue,Unpack:Jue,UnsortedSegmentSum:ele,UpperBound:mIe,Variable:iE,ZerosLike:tle,_FusedMatMul:sU,abs:xu,acos:Rle,acosh:Ile,add:wn,addN:Fle,all:Ple,any:Lle,argMax:Mle,argMin:Ule,asin:Ble,asinh:zle,atan:Wle,atan2:jle,atanh:$le,avgPool:Q7,avgPool3d:Gle,backend:wle,backend_util:aBe,basicLSTMCell:Xle,batchNorm:DD,batchNorm2d:Kle,batchNorm3d:Yle,batchNorm4d:Qle,batchToSpaceND:Z7,bincount:J7,bitwiseAnd:Zle,booleanMaskAsync:zhe,broadcastArgs:Jle,broadcastTo:NC,broadcast_util:cFe,browser:j8e,buffer:Lf,cast:pi,ceil:ece,clipByValue:tce,clone:pp,complex:Ap,concat:Xs,concat1d:nce,concat2d:rce,concat3d:ice,concat4d:ace,conv1d:sce,conv2d:AD,conv2dTranspose:uce,conv3d:lce,conv3dTranspose:cce,copyRegisteredKernels:xIe,cos:hce,cosh:fce,cosineWindow:zI,cumprod:dce,cumsum:pce,customGrad:Uf,denseBincount:gce,deprecationWarn:i4e,depthToSpace:mce,depthwiseConv2d:OI,device_util:ZIe,diag:yce,dilation2d:vce,disableDeprecationWarnings:r4e,dispose:bo,disposeVariables:a4e,div:di,divNoNan:wce,dot:xce,dropout:Vhe,einsum:Sv,elu:nz,enableDebugMode:n4e,enableProdMode:t4e,enclosingPowerOfTwo:Rz,engine:s4e,ensureShape:_ce,env:xn,equal:tz,erf:Sce,euclideanNorm:Tce,exp:Ym,expandDims:Rd,expm1:Dce,eye:iz,fft:LI,fill:bx,findBackend:d4e,findBackendFactory:p4e,floor:az,floorDiv:K7,fused:Ghe,gather:sz,gatherND:qhe,gather_util:$8e,getBackend:ble,getGradient:lU,getKernel:nE,getKernelsForBackend:HN,grad:ZFe,grads:JFe,greater:OD,greaterEqual:oz,ifft:fE,imag:RD,image:tfe,inTopKAsync:Hhe,io:jz,irfft:Tz,isFinite:Ace,isInf:kce,isNaN:Nce,keep:sh,kernel_impls:sBe,leakyRelu:uz,less:ZN,lessEqual:RI,linalg:nfe,linspace:Oce,localResponseNormalization:Rce,log:Kw,log1p:lz,logSigmoid:Fce,logSoftmax:Pce,logSumExp:hz,logicalAnd:lE,logicalNot:fz,logicalOr:dz,logicalXor:Lce,losses:rfe,lowerBound:Mce,matMul:kr,math:R8e,max:G0,maxPool:pz,maxPool3d:Uce,maxPoolWithArgmax:Bce,maximum:gz,mean:cE,memory:o4e,meshgrid:zce,min:QN,minimum:hE,mirrorPad:Wce,mod:jce,moments:$ce,movingAverage:Whe,mul:Pt,multiRNNCell:qce,multinomial:Vce,neg:lh,nextFrame:rUe,norm:ND,notEqual:mz,oneHot:JN,ones:km,onesLike:Hce,op:ze,outerProduct:Gce,pad:wx,pad1d:Xce,pad2d:Kce,pad3d:Yce,pad4d:Qce,pool:Zce,pow:Xw,prelu:vz,print:X7,prod:Jce,profile:u4e,raggedGather:ehe,raggedRange:the,raggedTensorToTensor:nhe,rand:rhe,randomGamma:she,randomNormal:Sz,randomStandardNormal:ohe,randomUniform:PI,randomUniformInt:uhe,range:Yw,ready:h4e,real:Qw,reciprocal:lhe,registerBackend:g4e,registerGradient:vIe,registerKernel:ile,relu:ID,relu6:Cz,removeBackend:f4e,reshape:vt,reverse:Qm,reverse1d:che,reverse2d:hhe,reverse3d:fhe,reverse4d:dhe,rfft:MI,round:Ez,rsqrt:phe,scalar:ir,scatterND:jhe,scatter_util:nMe,searchSorted:FI,selu:ghe,separableConv2d:mhe,serialization:c8e,setBackend:c4e,setPlatform:m4e,setdiff1dAsync:yhe,sigmoid:H0,sign:vhe,signal:efe,sin:bhe,sinh:whe,slice:ti,slice1d:xhe,slice2d:_he,slice3d:She,slice4d:Che,slice_util:Sfe,softmax:Ehe,softplus:cz,spaceToBatchND:yz,sparse:ife,sparseToDense:$he,spectral:Jhe,split:Zw,sqrt:Mf,square:hc,squaredDifference:Dz,squeeze:UI,stack:Bf,step:Az,stridedSlice:The,string:afe,sub:Wn,sum:fi,sumOutType:$Ie,tan:Dhe,tanh:YN,tensor:uh,tensor1d:gl,tensor2d:k2,tensor3d:kz,tensor4d:Ahe,tensor5d:khe,tensor6d:Nhe,tensorScatterUpdate:Rhe,tensor_util:HIe,test_util:gLe,tidy:Nr,tile:A2,time:l4e,topk:Ihe,train:tUe,transpose:dE,truncatedNormal:Fhe,unique:Phe,unregisterGradient:wIe,unregisterKernel:bIe,unsortedSegmentSum:Lhe,unstack:dy,upcastType:NI,upperBound:Mhe,util:RIe,valueAndGrad:ePe,valueAndGrads:tPe,variable:Uhe,variableGrads:Ice,version_core:eUe,where:gp,whereAsync:Oz,zeros:f1,zerosLike:Du},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uBe=xn();uBe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var pu;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(pu||(pu={}));var NY;(function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(NY||(NY={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qz={};function lBe(n,e){const t={tfOpName:n,category:"custom",inputs:[],attrs:[],customExecutor:e};qz[n]=t}function Efe(n){return qz[n]}function cBe(n){delete qz[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function se(n,e,t,r,i){const a=e.inputParams[n];if(a&&a.inputIndexStart!==void 0){const s=a.inputIndexStart,u=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?s+1:a.inputIndexEnd,l=s<0?e.inputNames.length+s:s;if(a.type==="tensor")return _s(e.inputNames[l],t,r,i);if(a.type==="tensors"){const f=e.inputs.slice(s,u);return e.inputNames.slice(s,u).filter((p,m)=>{var g;return((g=f[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(p=>_s(p,t,r,i))}const h=_s(e.inputNames[l],t,r,i),c=h.dataSync();return a.type==="number"?c[0]:V0(h.shape,c)}const o=e.attrParams[n];return o&&o.value}function _s(n,e,t,r){const[i,a]=wu(n,t);if(r!=null){const s=r.getHashTableHandleByName(i);if(s!=null)return s}const o=t.currentContextIds.find(s=>!!e[tO(i,s)]);return o!==void 0?e[tO(i,o)][a]:void 0}function OY(n,e,t){return e[tO(n,t.currentContextId)]}function Id(n,e){const[t,r,i]=wu(n,e);return[tO(t,e&&e.currentContextId),r,i]}function tO(n,e){return e?`${n}-${e}`:n}function wu(n,e){if(n==="")return["",0,void 0];const t=e!=null&&e.parseNodeNameCache!=null;if(t){const a=e.parseNodeNameCache.get(n);if(a!=null)return a}const r=n.split(":");let i;if(r.length===1)i=[n,0,void 0];else{const a=r[0],o=r.length===3?r[1]:void 0,s=Number(r[r.length-1]);i=[a,s,o]}return t&&e.parseNodeNameCache.set(n,i),i}function dN(n,e,t){let r=se("pad",n,e,t);if(r==="explicit"){r=se("explicitPaddings",n,e,t);const i=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)i[a][0]=r[a*2],i[a][1]=r[a*2+1];return i}return r}function Fd(n){return n.kept?n:pp(n)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hBe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],fBe=Object.freeze(Object.defineProperty({__proto__:null,json:hBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dBe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pBe=Object.freeze(Object.defineProperty({__proto__:null,json:dBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gBe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],mBe=Object.freeze(Object.defineProperty({__proto__:null,json:gBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yBe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],vBe=Object.freeze(Object.defineProperty({__proto__:null,json:yBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bBe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],wBe=Object.freeze(Object.defineProperty({__proto__:null,json:bBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xBe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],_Be=Object.freeze(Object.defineProperty({__proto__:null,json:xBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SBe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],CBe=Object.freeze(Object.defineProperty({__proto__:null,json:SBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EBe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],TBe=Object.freeze(Object.defineProperty({__proto__:null,json:EBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DBe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],ABe=Object.freeze(Object.defineProperty({__proto__:null,json:DBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kBe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],NBe=Object.freeze(Object.defineProperty({__proto__:null,json:kBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OBe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],RBe=Object.freeze(Object.defineProperty({__proto__:null,json:OBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IBe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],FBe=Object.freeze(Object.defineProperty({__proto__:null,json:IBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PBe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],LBe=Object.freeze(Object.defineProperty({__proto__:null,json:PBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MBe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],UBe=Object.freeze(Object.defineProperty({__proto__:null,json:MBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BBe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],zBe=Object.freeze(Object.defineProperty({__proto__:null,json:BBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WBe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],jBe=Object.freeze(Object.defineProperty({__proto__:null,json:WBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Be=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],qBe=Object.freeze(Object.defineProperty({__proto__:null,json:$Be},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VBe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],HBe=Object.freeze(Object.defineProperty({__proto__:null,json:VBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GBe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],XBe=Object.freeze(Object.defineProperty({__proto__:null,json:GBe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let RY=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[fBe,pBe,mBe,vBe,wBe,_Be,CBe,TBe,ABe,NBe,RBe,FBe,LBe,UBe,zBe,jBe,qBe,HBe,XBe],t=[].concat(...e.map(r=>r.json));this.opMappers=t.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(e,t={}){const r=e.node,i=[],a=[],o=[],s=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?i.push(m[g.name]):g.op==="Const"?a.push(m[g.name]):(g.input==null||g.input.length===0)&&o.push(m[g.name]),m),{});let u=[];const l=[];let h={},c={};t!=null&&(h=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));const f=Object.keys(s);f.forEach(m=>{const g=s[m];g.inputNames.forEach((y,v)=>{const[b,,w]=Id(y),x=s[b];if(x.outputs!=null){const S=x.outputs.indexOf(w);if(S!==-1){const E=`${b}:${S}`;g.inputNames[v]=E}}g.inputs.push(x),x.children.push(g)})}),Object.keys(c).length===0?f.forEach(m=>{const g=s[m];g.children.length===0&&l.push(g)}):Object.keys(c).forEach(m=>{const[g]=Id(m),y=s[g];y!=null&&(y.signatureKey=c[m],l.push(y))}),Object.keys(h).length>0?Object.keys(h).forEach(m=>{const[g]=Id(m),y=s[g];y&&(y.signatureKey=h[m],u.push(y))}):u=i;let d={};e.library!=null&&e.library.function!=null&&(d=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const p={nodes:s,inputs:u,outputs:l,weights:a,placeholders:i,signature:t,functions:d};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,r)=>(t[e[r].name]=r,t),{})}mapNode(e){const t=Efe(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(i=>i.startsWith("^")?i.slice(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(r.inputParams=t.inputs.reduce((i,a)=>(i[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},i),{})),t.attrs!=null&&(r.attrParams=t.attrs.reduce((i,a)=>{const o=a.type;let s;switch(a.type){case"string":s=EU(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=EU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":s=RU(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=RU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":s=DU(e.attr,a.tfName,a.defaultValue||0),s===void 0&&a.tfDeprecatedName&&(s=DU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":s=OU(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=OU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":s=TU(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=TU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":s=FU(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=FU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":s=NU(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=NU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":s=IU(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=IU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":s=AU(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=AU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":s=kU(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=kU(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":s=IY(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=IY(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return i[a.name]={value:s,type:o},i},{})),r}mapFunction(e){const t=e.nodeDef,r=[],i=[];let a={};t!=null&&(a=t.reduce((c,f)=>(c[f.name]=this.mapNode(f),f.op==="Const"&&i.push(c[f.name]),c),{}));const o=[],s=[];e.signature.inputArg.forEach(c=>{const[f]=Id(c.name),d={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Vz(c.type),type:"dtype"}},children:[]};d.signatureKey=c.name,o.push(d),a[f]=d}),Object.keys(a).forEach(c=>{const f=a[c];f.inputNames.forEach((d,p)=>{const[m,,g]=Id(d),y=a[m];if(y.outputs!=null){const v=y.outputs.indexOf(g);if(v!==-1){const b=`${m}:${v}`;f.inputNames[p]=b}}f.inputs.push(y),y.children.push(f)})});const l=e.ret;e.signature.outputArg.forEach(c=>{const[f,d]=Id(l[c.name]),p=a[f];p!=null&&(p.defaultOutput=d,s.push(p))});const h=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:s,weights:i,placeholders:r,signature:h}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r),t),{}),outputs:e.signature.outputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t),{})}}mapArgToTensorInfo(e,t){let r=e.name;return t!=null&&(r=t[r]),{name:r,dtype:e.type}}};function KBe(n){const e=xn().global;if(typeof e.atob<"u")return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Tfe(n,e){const t=Array.isArray(n)?String.fromCharCode.apply(null,n):KBe(n);return e?t:t.toLowerCase()}function EU(n,e,t,r=!1){const i=n[e];return i!=null?Tfe(i.s,r):t}function TU(n,e,t){const r=n[e];return r?r.b:t}function DU(n,e,t){const r=n[e]||{},i=r.i!=null?r.i:r.f!=null?r.f:t;return typeof i=="number"?i:parseInt(i,10)}function Vz(n){switch(typeof n=="string"&&(n=pu[n]),n){case pu.DT_FLOAT:case pu.DT_HALF:return"float32";case pu.DT_INT32:case pu.DT_INT64:case pu.DT_INT8:case pu.DT_UINT8:return"int32";case pu.DT_BOOL:return"bool";case pu.DT_DOUBLE:return"float32";case pu.DT_STRING:return"string";case pu.DT_COMPLEX64:case pu.DT_COMPLEX128:return"complex64";default:return null}}function IY(n,e,t){const r=n[e];return r&&r.func?r.func.name:t}function AU(n,e,t){const r=n[e];return r&&r.type?Vz(r.type):t}function kU(n,e,t){const r=n[e];return r&&r.list&&r.list.type?r.list.type.map(i=>Vz(i)):t}function Dfe(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function NU(n,e,t){const r=n[e];return r&&r.shape?Dfe(r.shape):t}function OU(n,e,t){const r=n[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):t}function RU(n,e,t,r=!1){const i=n[e];return i&&i.list&&i.list.s?i.list.s.map(a=>Tfe(a,r)):t}function IU(n,e,t){const r=n[e];return r&&r.list&&r.list.shape?r.list.shape.map(i=>Dfe(i)):t}function FU(n,e,t){const r=n[e];return r&&r.list&&r.list.b?r.list.b:t}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let YBe=class{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(i=>this.getInput(i)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((i,a)=>(i[a]=this.getAttr(a),i),{}))}getInput(e){return _s(e,this.tensorMap,this.context)}getAttr(e,t){const r=this.node.rawAttrs[e];if(r.tensor!=null)return _s(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return DU(this.node.rawAttrs,e,t);if(r.s!=null)return EU(this.node.rawAttrs,e,t);if(r.b!=null)return TU(this.node.rawAttrs,e,t);if(r.shape!=null)return NU(this.node.rawAttrs,e,t);if(r.type!=null)return AU(this.node.rawAttrs,e,t);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return OU(this.node.rawAttrs,e,t);if(r.list.s!=null)return RU(this.node.rawAttrs,e,t);if(r.list.shape!=null)return IU(this.node.rawAttrs,e,t);if(r.list.b!=null)return FU(this.node.rawAttrs,e,t);if(r.list.type!=null)return kU(this.node.rawAttrs,e,t)}return t}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cs=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:q7,abs:xu,acos:Rle,acosh:Ile,add:wn,addN:Fle,all:Ple,any:Lle,argMax:Mle,argMin:Ule,asin:Ble,asinh:zle,atan:Wle,atan2:jle,atanh:$le,avgPool:Q7,avgPool3d:Gle,basicLSTMCell:Xle,batchNorm:DD,batchNorm2d:Kle,batchNorm3d:Yle,batchNorm4d:Qle,batchToSpaceND:Z7,bincount:J7,bitwiseAnd:Zle,booleanMaskAsync:zhe,broadcastArgs:Jle,broadcastTo:NC,buffer:Lf,cast:pi,ceil:ece,clipByValue:tce,clone:pp,complex:Ap,concat:Xs,concat1d:nce,concat2d:rce,concat3d:ice,concat4d:ace,conv1d:sce,conv2d:AD,conv2dTranspose:uce,conv3d:lce,conv3dTranspose:cce,cos:hce,cosh:fce,cosineWindow:zI,cumprod:dce,cumsum:pce,denseBincount:gce,depthToSpace:mce,depthwiseConv2d:OI,diag:yce,dilation2d:vce,div:di,divNoNan:wce,dot:xce,dropout:Vhe,einsum:Sv,elu:nz,enclosingPowerOfTwo:Rz,ensureShape:_ce,equal:tz,erf:Sce,euclideanNorm:Tce,exp:Ym,expandDims:Rd,expm1:Dce,eye:iz,fft:LI,fill:bx,floor:az,floorDiv:K7,fused:Ghe,gather:sz,gatherND:qhe,greater:OD,greaterEqual:oz,ifft:fE,imag:RD,image:tfe,inTopKAsync:Hhe,irfft:Tz,isFinite:Ace,isInf:kce,isNaN:Nce,leakyRelu:uz,less:ZN,lessEqual:RI,linalg:nfe,linspace:Oce,localResponseNormalization:Rce,log:Kw,log1p:lz,logSigmoid:Fce,logSoftmax:Pce,logSumExp:hz,logicalAnd:lE,logicalNot:fz,logicalOr:dz,logicalXor:Lce,losses:rfe,lowerBound:Mce,matMul:kr,max:G0,maxPool:pz,maxPool3d:Uce,maxPoolWithArgmax:Bce,maximum:gz,mean:cE,meshgrid:zce,min:QN,minimum:hE,mirrorPad:Wce,mod:jce,moments:$ce,movingAverage:Whe,mul:Pt,multiRNNCell:qce,multinomial:Vce,neg:lh,norm:ND,notEqual:mz,oneHot:JN,ones:km,onesLike:Hce,op:ze,outerProduct:Gce,pad:wx,pad1d:Xce,pad2d:Kce,pad3d:Yce,pad4d:Qce,pool:Zce,pow:Xw,prelu:vz,print:X7,prod:Jce,raggedGather:ehe,raggedRange:the,raggedTensorToTensor:nhe,rand:rhe,randomGamma:she,randomNormal:Sz,randomStandardNormal:ohe,randomUniform:PI,randomUniformInt:uhe,range:Yw,real:Qw,reciprocal:lhe,relu:ID,relu6:Cz,reshape:vt,reverse:Qm,reverse1d:che,reverse2d:hhe,reverse3d:fhe,reverse4d:dhe,rfft:MI,round:Ez,rsqrt:phe,scalar:ir,scatterND:jhe,searchSorted:FI,selu:ghe,separableConv2d:mhe,setdiff1dAsync:yhe,sigmoid:H0,sign:vhe,signal:efe,sin:bhe,sinh:whe,slice:ti,slice1d:xhe,slice2d:_he,slice3d:She,slice4d:Che,softmax:Ehe,softplus:cz,spaceToBatchND:yz,sparse:ife,sparseToDense:$he,spectral:Jhe,split:Zw,sqrt:Mf,square:hc,squaredDifference:Dz,squeeze:UI,stack:Bf,step:Az,stridedSlice:The,string:afe,sub:Wn,sum:fi,tan:Dhe,tanh:YN,tensor:uh,tensor1d:gl,tensor2d:k2,tensor3d:kz,tensor4d:Ahe,tensor5d:khe,tensor6d:Nhe,tensorScatterUpdate:Rhe,tile:A2,topk:Ihe,transpose:dE,truncatedNormal:Fhe,unique:Phe,unsortedSegmentSum:Lhe,unstack:dy,upperBound:Mhe,variable:Uhe,where:gp,whereAsync:Oz,zeros:f1,zerosLike:Du},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QBe=(n,e,t,r=Cs)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(se("a",n,e,t),se("b",n,e,t))];case"AddN":return[r.addN(se("tensors",n,e,t))];case"FloorMod":case"Mod":return[r.mod(se("a",n,e,t),se("b",n,e,t))];case"Mul":return[r.mul(se("a",n,e,t),se("b",n,e,t))];case"RealDiv":case"Div":return[r.div(se("a",n,e,t),se("b",n,e,t))];case"DivNoNan":return[r.divNoNan(se("a",n,e,t),se("b",n,e,t))];case"FloorDiv":return[r.floorDiv(se("a",n,e,t),se("b",n,e,t))];case"Sub":return[r.sub(se("a",n,e,t),se("b",n,e,t))];case"Minimum":return[r.minimum(se("a",n,e,t),se("b",n,e,t))];case"Maximum":return[r.maximum(se("a",n,e,t),se("b",n,e,t))];case"Pow":return[r.pow(se("a",n,e,t),se("b",n,e,t))];case"SquaredDifference":return[r.squaredDifference(se("a",n,e,t),se("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZBe=(n,e,t,r=Cs)=>{switch(n.op){case"Abs":case"ComplexAbs":return[r.abs(se("x",n,e,t))];case"Acos":return[r.acos(se("x",n,e,t))];case"Acosh":return[r.acosh(se("x",n,e,t))];case"Asin":return[r.asin(se("x",n,e,t))];case"Asinh":return[r.asinh(se("x",n,e,t))];case"Atan":return[r.atan(se("x",n,e,t))];case"Atan2":return[r.atan2(se("x",n,e,t),se("y",n,e,t))];case"Atanh":return[r.atanh(se("x",n,e,t))];case"Ceil":return[r.ceil(se("x",n,e,t))];case"Complex":return[r.complex(se("real",n,e,t),se("imag",n,e,t))];case"Cos":return[r.cos(se("x",n,e,t))];case"Cosh":return[r.cosh(se("x",n,e,t))];case"Elu":return[r.elu(se("x",n,e,t))];case"Erf":return[r.erf(se("x",n,e,t))];case"Exp":return[r.exp(se("x",n,e,t))];case"Expm1":return[r.expm1(se("x",n,e,t))];case"Floor":return[r.floor(se("x",n,e,t))];case"Log":return[r.log(se("x",n,e,t))];case"Log1p":return[r.log1p(se("x",n,e,t))];case"Imag":return[r.imag(se("x",n,e,t))];case"Neg":return[r.neg(se("x",n,e,t))];case"Reciprocal":return[r.reciprocal(se("x",n,e,t))];case"Real":return[r.real(se("x",n,e,t))];case"Relu":return[r.relu(se("x",n,e,t))];case"Round":return[r.round(se("x",n,e,t))];case"Selu":return[r.selu(se("x",n,e,t))];case"Sigmoid":return[r.sigmoid(se("x",n,e,t))];case"Sin":return[r.sin(se("x",n,e,t))];case"Sign":return[r.sign(se("x",n,e,t))];case"Sinh":return[r.sinh(se("x",n,e,t))];case"Softplus":return[r.softplus(se("x",n,e,t))];case"Sqrt":return[r.sqrt(se("x",n,e,t))];case"Square":return[r.square(se("x",n,e,t))];case"Tanh":return[r.tanh(se("x",n,e,t))];case"Tan":return[r.tan(se("x",n,e,t))];case"ClipByValue":return[r.clipByValue(se("x",n,e,t),se("clipValueMin",n,e,t),se("clipValueMax",n,e,t))];case"Relu6":return[r.relu6(se("x",n,e,t))];case"Rsqrt":return[r.rsqrt(_s(n.inputNames[0],e,t))];case"LeakyRelu":return[r.leakyRelu(se("x",n,e,t),se("alpha",n,e,t))];case"Prelu":return[r.prelu(se("x",n,e,t),se("alpha",n,e,t))];case"IsNan":return[r.isNaN(_s(n.inputNames[0],e,t))];case"IsInf":return[r.isInf(_s(n.inputNames[0],e,t))];case"IsFinite":return[r.isFinite(_s(n.inputNames[0],e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rc(n,e,t=""){if(!(typeof n=="number"||typeof e=="number")){Fe(n.length===e.length,()=>t+` Shapes ${n} and ${e} must match`);for(let r=0;r<n.length;r++){const i=n[r],a=e[r];Fe(i<0||a<0||i===a,()=>t+` Shapes ${n} and ${e} must match`)}}}function FY(n){return!(typeof n=="number"||n.some(e=>e<0))}function Y_(n,e,t){let r=PU(n,t);const i=!FY(r);if(i&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&e.forEach(a=>{r=PU(a.shape,r)}),!FY(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function PU(n,e){if(typeof n=="number")return e;if(typeof e=="number")return n;if(n.length!==e.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${e}`);const t=[];for(let r=0;r<n.length;++r){const i=n[r],a=e[r];if(i>=0&&a>=0&&i!==a)throw new Error(`Incompatible shape during merge: ${n} vs. ${e}`);t[r]=i>=0?i:a}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let JBe=class{constructor(e,t,r,i,a,o,s){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=ir(0),sh(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),rc(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,sh(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((r,i)=>this.write(r,t[i]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let i=0;i<this.size();i++)e.push(i)}if(e.length===0)return uh([],[0].concat(this.elementShape));const r=this.readMany(e);return rc(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Bf(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return uh([],[0].concat(this.elementShape));const t=[];for(let i=0;i<this.size();i++)t.push(i);const r=this.readMany(t);return rc(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Xs(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,dy(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0;const i=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=r===0?0:t.size/r,o=[];Nr(()=>{t=vt(t,[1,r,a]);for(let u=0;u<e.length;++u){const h=[0,u===0?0:i[u-1],0],c=[1,e[u],a];o[u]=vt(ti(t,h,c),this.elementShape)}return o});const s=[];for(let u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p1{get id(){return this.idTensor.id}constructor(e,t,r,i=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,e!=null&&e.forEach(a=>{if(r!==a.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${a.dtype}`);rc(t,a.shape,"TensorList shape mismatch: "),sh(a)}),this.idTensor=ir(0),this.maxNumElements=i,sh(this.idTensor)}copy(){return new p1([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);rc(e,this.elementShape,"TensorList shape mismatch: ");const i=Y_(this.elementShape,this.tensors,e);return Nr(()=>{const a=this.tensors.map(o=>vt(o,i));return Bf(a,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Y_(this.elementShape,this.tensors,e),i=this.tensors.pop();return i.kept=!1,rc(i.shape,e,"TensorList shape mismatch: "),vt(i,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(rc(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");sh(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new p1([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);rc(this.tensors[e].shape,t,"TensorList shape mismatch: ");const i=Y_(this.elementShape,this.tensors,t);return vt(this.tensors[e],i)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);rc(this.elementShape,t.shape,"TensorList shape mismatch: "),sh(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);rc(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const i=Y_(this.elementShape,this.tensors,r);return e.length===0?uh([],[0].concat(i)):Nr(()=>{const a=e.map(o=>vt(this.tensors[o],i));return Bf(a,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);rc(this.elementShape,t,"TensorList shape mismatch: ");const r=Y_(this.elementShape,this.tensors,t);return this.size()===0?uh([],[0].concat(r)):Nr(()=>{const i=this.tensors.map(a=>vt(a,r));return Xs(i,0)})}}function e9e(n,e,t){const r=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==t)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${t}`);const i=n.shape.slice(1);rc(i,e,"TensorList shape mismatch: ");const a=dy(n);return new p1(a,e,r)}function t9e(n,e,t,r){return new p1([],n,e,r)}function n9e(n,e,t,r){if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const i=Math.max(...e);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const a=new p1([],t,n.dtype,r),o=dy(n,0);return e.forEach((s,u)=>{a.setItem(s,o[u])}),a}function r9e(n,e,t){let r=0;const i=e.map(h=>(r+=h,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);const a=n.shape.slice(1),o=PU(a,t),s=r===0?0:n.size/r,u=Nr(()=>{const h=[];n=vt(n,[1,r,s]);for(let c=0;c<e.length;++c){const d=[0,c===0?0:i[c-1],0],p=[1,e[c],s];h[c]=vt(ti(n,d,p),o)}return n.dispose(),h}),l=new p1([],t,n.dtype,e.length);for(let h=0;h<u.length;h++)l.setItem(h,u[h]);return l}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i9e=async(n,e,t)=>{switch(n.op){case"If":case"StatelessIf":{const r=se("thenBranch",n,e,t),i=se("elseBranch",n,e,t),a=se("cond",n,e,t),o=se("args",n,e,t);return(await a.data())[0]?t.functionMap[r].executeFunctionAsync(o,t.tensorArrayMap,t.tensorListMap):t.functionMap[i].executeFunctionAsync(o,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{const r=se("body",n,e,t),i=se("cond",n,e,t),a=se("args",n,e,t),o=await t.functionMap[i].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap),s=a.map(h=>h.id);let u=await o[0].data();o.forEach(h=>{!h.kept&&s.indexOf(h.id)===-1&&h.dispose()});let l=a;for(;u[0];){const h=l;l=await t.functionMap[r].executeFunctionAsync(l,t.tensorArrayMap,t.tensorListMap);const c=l.map(d=>d.id);h.forEach(d=>{!d.kept&&s.indexOf(d.id)===-1&&c.indexOf(d.id)===-1&&d.dispose()});const f=await t.functionMap[i].executeFunctionAsync(l,t.tensorArrayMap,t.tensorListMap);u=await f[0].data(),f.forEach(d=>{!d.kept&&s.indexOf(d.id)===-1&&c.indexOf(d.id)===-1&&d.dispose()})}return l}case"LoopCond":{const r=se("pred",n,e,t);return[Fd(r)]}case"Switch":{const r=se("pred",n,e,t);let i=se("data",n,e,t);return i.kept||(i=Fd(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=n.inputNames.find(i=>_s(i,e,t)!==void 0);if(r){const i=_s(r,e,t);return[Fd(i)]}return}case"Enter":{const r=se("frameName",n,e,t),i=se("tensor",n,e,t);return t.enterFrame(r),[Fd(i)]}case"Exit":{const r=se("tensor",n,e,t);return t.exitFrame(),[Fd(r)]}case"NextIteration":{const r=se("tensor",n,e,t);return t.nextIteration(),[Fd(r)]}case"TensorArrayV3":{const r=se("size",n,e,t),i=se("dtype",n,e,t),a=se("elementShape",n,e,t),o=se("dynamicSize",n,e,t),s=se("clearAfterRead",n,e,t),u=se("identicalElementShapes",n,e,t),l=se("name",n,e,t),h=new JBe(l,i,r,a,u,o,s);return t.addTensorArray(h),[h.idTensor,ir(1)]}case"TensorArrayWriteV3":{const r=se("tensorArrayId",n,e,t),i=se("index",n,e,t),a=se("tensor",n,e,t),o=t.getTensorArray(r.id);return o.write(i,a),[o.idTensor]}case"TensorArrayReadV3":{const r=se("tensorArrayId",n,e,t),i=se("index",n,e,t);return[t.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=se("tensorArrayId",n,e,t),i=se("indices",n,e,t),a=se("dtype",n,e,t);return[t.getTensorArray(r.id).gather(i,a)]}case"TensorArrayScatterV3":{const r=se("tensorArrayId",n,e,t),i=se("indices",n,e,t),a=se("tensor",n,e,t),o=t.getTensorArray(r.id);return o.scatter(i,a),[o.idTensor]}case"TensorArrayConcatV3":{const r=se("tensorArrayId",n,e,t),i=t.getTensorArray(r.id),a=se("dtype",n,e,t);return[i.concat(a)]}case"TensorArraySplitV3":{const r=se("tensorArrayId",n,e,t),i=se("tensor",n,e,t),a=se("lengths",n,e,t),o=t.getTensorArray(r.id);return o.split(a,i),[o.idTensor]}case"TensorArraySizeV3":{const r=se("tensorArrayId",n,e,t),i=t.getTensorArray(r.id);return[ir(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=se("tensorArrayId",n,e,t),i=t.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=se("tensorListId",n,e,t),i=se("index",n,e,t),a=se("tensor",n,e,t),o=t.getTensorList(r.id);return o.setItem(i,a),[o.idTensor]}case"TensorListGetItem":{const r=se("tensorListId",n,e,t),i=se("index",n,e,t),a=se("elementShape",n,e,t),o=se("elementDType",n,e,t);return[t.getTensorList(r.id).getItem(i,a,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=se("indices",n,e,t),i=se("tensor",n,e,t),a=se("elementShape",n,e,t),o=se("numElements",n,e,t),s=n9e(i,r,a,o);return t.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=se("elementShape",n,e,t),i=se("elementDType",n,e,t);let a;n.op==="TensorListReserve"?a="numElements":a="maxNumElements";const o=se(a,n,e,t),s=n.op==="TensorListReserve"?-1:o,u=t9e(r,i,o,s);return t.addTensorList(u),[u.idTensor]}case"TensorListGather":{const r=se("tensorListId",n,e,t),i=se("indices",n,e,t),a=se("elementShape",n,e,t),o=se("elementDType",n,e,t);return[t.getTensorList(r.id).gather(i,o,a)]}case"TensorListStack":{const r=se("tensorListId",n,e,t),i=se("elementShape",n,e,t),a=se("elementDType",n,e,t),o=se("numElements",n,e,t);return[t.getTensorList(r.id).stack(i,a,o)]}case"TensorListFromTensor":{const r=se("tensor",n,e,t),i=se("elementShape",n,e,t),a=se("elementDType",n,e,t),o=e9e(r,i,a);return t.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=se("tensorListId",n,e,t),i=t.getTensorList(r.id),a=se("dtype",n,e,t),o=se("elementShape",n,e,t);return[i.concat(a,o)]}case"TensorListPushBack":{const r=se("tensorListId",n,e,t),i=se("tensor",n,e,t),a=t.getTensorList(r.id);return a.pushBack(i),[a.idTensor]}case"TensorListPopBack":{const r=se("tensorListId",n,e,t),i=se("elementShape",n,e,t),a=se("elementDType",n,e,t);return[t.getTensorList(r.id).popBack(i,a)]}case"TensorListSplit":{const r=se("tensor",n,e,t),i=se("elementShape",n,e,t),a=se("lengths",n,e,t),o=r9e(r,a,i);return t.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=se("tensorListId",n,e,t),i=t.getTensorList(r.id);return[ir(i.size(),"int32")]}case"TensorListResize":{const r=se("tensorListId",n,e,t),i=se("size",n,e,t),o=t.getTensorList(r.id).resize(i);return t.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(n,e,t){const[r,i]=se("fusedOps",n,e,t),a=r==="biasadd",o=!a,s=i==="prelu",u=r==="fusedbatchnorm",l=se("numArgs",n,e,t);if(a){if(s&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const h=se("strides",n,e,t),c=dN(n,e,t),f=se("dataFormat",n,e,t).toUpperCase(),d=se("dilations",n,e,t);let[p,m]=se("args",n,e,t);o&&(m=p,p=void 0);const g=se("leakyreluAlpha",n,e,t);return{stride:h,pad:c,dataFormat:f,dilations:d,biasArg:p,preluArg:m,activationFunc:i,leakyreluAlpha:g}}const a9e=(n,e,t,r=Cs)=>{switch(n.op){case"Conv1D":{const i=se("stride",n,e,t),a=se("pad",n,e,t),o=se("dataFormat",n,e,t).toUpperCase(),s=se("dilation",n,e,t);return[r.conv1d(se("x",n,e,t),se("filter",n,e,t),i,a,o,s)]}case"Conv2D":{const i=se("strides",n,e,t),a=dN(n,e,t),o=se("dataFormat",n,e,t).toUpperCase(),s=se("dilations",n,e,t);return[r.conv2d(se("x",n,e,t),se("filter",n,e,t),[i[1],i[2]],a,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:i,pad:a,dataFormat:o,dilations:s,biasArg:u,preluArg:l,activationFunc:h,leakyreluAlpha:c}=PY(n,e,t);return[r.fused.conv2d({x:se("x",n,e,t),filter:se("filter",n,e,t),strides:[i[1],i[2]],pad:a,dataFormat:o,dilations:[s[1],s[2]],bias:u,activation:h,preluActivationWeights:l,leakyreluAlpha:c})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:a,dataFormat:o,dilations:s,biasArg:u,preluArg:l,activationFunc:h,leakyreluAlpha:c}=PY(n,e,t);return[r.fused.depthwiseConv2d({x:se("x",n,e,t),filter:se("filter",n,e,t),strides:[i[1],i[2]],pad:a,dataFormat:o,dilations:[s[1],s[2]],bias:u,activation:h,preluActivationWeights:l,leakyreluAlpha:c})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=se("outputShape",n,e,t),a=se("strides",n,e,t),o=dN(n,e,t);return[r.conv2dTranspose(se("x",n,e,t),se("filter",n,e,t),i,[a[1],a[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=se("strides",n,e,t),a=dN(n,e,t),o=se("dilations",n,e,t),s=se("dataFormat",n,e,t).toUpperCase();return[r.depthwiseConv2d(se("input",n,e,t),se("filter",n,e,t),[i[1],i[2]],a,s,[o[1],o[2]])]}case"Conv3D":{const i=se("strides",n,e,t),a=se("pad",n,e,t),o=se("dataFormat",n,e,t).toUpperCase(),s=se("dilations",n,e,t);return[r.conv3d(se("x",n,e,t),se("filter",n,e,t),[i[1],i[2],i[3]],a,o,[s[1],s[2],s[3]])]}case"AvgPool":{const i=se("strides",n,e,t),a=se("pad",n,e,t),o=se("kernelSize",n,e,t);return[r.avgPool(se("x",n,e,t),[o[1],o[2]],[i[1],i[2]],a)]}case"MaxPool":{const i=se("strides",n,e,t),a=se("pad",n,e,t),o=se("kernelSize",n,e,t);return[r.maxPool(se("x",n,e,t),[o[1],o[2]],[i[1],i[2]],a)]}case"MaxPoolWithArgmax":{const i=se("strides",n,e,t),a=se("pad",n,e,t),o=se("kernelSize",n,e,t),s=se("includeBatchInIndex",n,e,t),{result:u,indexes:l}=r.maxPoolWithArgmax(se("x",n,e,t),[o[1],o[2]],[i[1],i[2]],a,s);return[u,l]}case"AvgPool3D":{const i=se("strides",n,e,t),a=se("pad",n,e,t),o=se("kernelSize",n,e,t);return[r.avgPool3d(se("x",n,e,t),[o[1],o[2],o[3]],[i[1],i[2],i[3]],a)]}case"MaxPool3D":{const i=se("strides",n,e,t),a=se("pad",n,e,t),o=se("kernelSize",n,e,t);return[r.maxPool3d(se("x",n,e,t),[o[1],o[2],o[3]],[i[1],i[2],i[3]],a)]}case"Dilation2D":{const i=se("strides",n,e,t),a=se("pad",n,e,t),o=se("dilations",n,e,t),s=i[1],u=i[2],l=o[1],h=o[2];return[r.dilation2d(se("x",n,e,t),se("filter",n,e,t),[s,u],a,[l,h],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s9e=(n,e,t,r=Cs)=>{switch(n.op){case"Fill":{const i=se("shape",n,e,t),a=se("dtype",n,e,t),o=se("value",n,e,t);return[r.fill(i,o,a)]}case"LinSpace":{const i=se("start",n,e,t),a=se("stop",n,e,t),o=se("num",n,e,t);return[r.linspace(i,a,o)]}case"Multinomial":{const i=se("logits",n,e,t),a=se("numSamples",n,e,t),o=se("seed",n,e,t);return[r.multinomial(i,a,o)]}case"OneHot":{const i=se("indices",n,e,t),a=se("depth",n,e,t),o=se("onValue",n,e,t),s=se("offValue",n,e,t),u=se("dtype",n,e,t);return[r.oneHot(i,a,o,s,u)]}case"Ones":return[r.ones(se("shape",n,e,t),se("dtype",n,e,t))];case"OnesLike":return[r.onesLike(se("x",n,e,t))];case"RandomStandardNormal":return[r.randomStandardNormal(se("shape",n,e,t),se("dtype",n,e,t),se("seed",n,e,t))];case"RandomUniform":return[r.randomUniform(se("shape",n,e,t),se("minval",n,e,t),se("maxval",n,e,t),se("dtype",n,e,t))];case"RandomUniformInt":return[r.randomUniformInt(se("shape",n,e,t),se("minval",n,e,t),se("maxval",n,e,t),se("seed",n,e,t))];case"Range":{const i=se("start",n,e,t),a=se("stop",n,e,t),o=se("step",n,e,t);return[r.range(i,a,o,se("dtype",n,e,t))]}case"TruncatedNormal":{const i=se("shape",n,e,t),a=se("mean",n,e,t),o=se("stdDev",n,e,t),s=se("seed",n,e,t);return[r.truncatedNormal(i,a,o,se("dtype",n,e,t),s)]}case"Zeros":return[r.zeros(se("shape",n,e,t),se("dtype",n,e,t))];case"ZerosLike":return[r.zerosLike(se("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nM(n,e,t){const r=se("boxes",n,e,t),i=se("scores",n,e,t),a=se("maxOutputSize",n,e,t),o=se("iouThreshold",n,e,t),s=se("scoreThreshold",n,e,t),u=se("softNmsSigma",n,e,t);return{boxes:r,scores:i,maxOutputSize:a,iouThreshold:o,scoreThreshold:s,softNmsSigma:u}}const o9e=async(n,e,t,r,i=Cs)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:u,scoreThreshold:l,softNmsSigma:h}=nM(n,e,t),c=await i.image.nonMaxSuppressionWithScoreAsync(a,o,s,u,l,h);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:u,scoreThreshold:l}=nM(n,e,t),h=se("padToMaxOutputSize",n,e,t),c=await i.image.nonMaxSuppressionPaddedAsync(a,o,s,u,l,h);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:u,scoreThreshold:l}=nM(n,e,t);return[await i.image.nonMaxSuppressionAsync(a,o,s,u,l)]}case"Where":{const a=i.cast(se("condition",n,e,t),"bool"),o=[await i.whereAsync(a)];return a.dispose(),o}case"ListDiff":return i.setdiff1dAsync(se("x",n,e,t),se("y",n,e,t));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u9e=(n,e,t,r=Cs)=>{switch(n.op){case"LowerBound":{const i=se("sortedSequence",n,e,t),a=se("values",n,e,t);return[r.lowerBound(i,a)]}case"TopKV2":{const i=se("x",n,e,t),a=se("k",n,e,t),o=se("sorted",n,e,t),s=r.topk(i,a,o);return[s.values,s.indices]}case"UpperBound":{const i=se("sortedSequence",n,e,t),a=se("values",n,e,t);return[r.upperBound(i,a)]}case"Unique":{const i=se("x",n,e,t),a=r.unique(i);return[a.values,a.indices]}case"UniqueV2":{const i=se("x",n,e,t),a=se("axis",n,e,t),o=r.unique(i,a);return[o.values,o.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l9e=(n,e,t,r=Cs)=>{switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":const i=se("default",n,e,t);return[_s(n.name,e,t)||i];case"Placeholder":return[_s(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const h=se("x",n,e,t);return[Fd(h)]}case"IdentityN":return se("x",n,e,t).map(h=>Fd(h));case"Snapshot":const a=se("x",n,e,t);return[Fd(a)];case"Shape":return[r.tensor1d(se("x",n,e,t).shape,"int32")];case"ShapeN":return se("x",n,e,t).map(h=>r.tensor1d(h.shape));case"Size":return[r.scalar(se("x",n,e,t).size,"int32")];case"Rank":return[r.scalar(se("x",n,e,t).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=se("x",n,e,t),s=se("data",n,e,t),u=se("message",n,e,t),l=se("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let h=0;h<s.length;h++)console.log(Array.prototype.slice.call(s[h].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c9e{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=ir(0),this.tensorMap=new Map,sh(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ir(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return this.tensorMap.forEach(i=>i.dispose()),this.tensorMap.clear(),Nr(()=>{const i=dy(t),a=r.length,o=i.length;Fe(a===o,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${o} elements.`);for(let s=0;s<a;s++){const u=r[s],l=i[s];sh(l),this.tensorMap.set(u,l)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return Nr(()=>{const i=[];for(let a=0;a<r.length;a++){const o=r[a],s=this.findWithDefault(o,t);i.push(s)}return Bf(i)})}findWithDefault(e,t){const r=this.tensorMap.get(e);return r??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h9e=async(n,e,t,r)=>{switch(n.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(n.name);if(i!=null)return[i];{const a=se("keyDType",n,e,t),o=se("valueDType",n,e,t),s=new c9e(a,o);return r.addHashTable(n.name,s),[s.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=se("tableHandle",n,e,t,r),a=se("keys",n,e,t),o=se("values",n,e,t);return[await r.getHashTableById(i.id).import(a,o)]}case"LookupTableFind":case"LookupTableFindV2":{const i=se("tableHandle",n,e,t,r),a=se("keys",n,e,t),o=se("defaultValue",n,e,t);return[await r.getHashTableById(i.id).find(a,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=se("tableHandle",n,e,t,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f9e=(n,e,t,r=Cs)=>{switch(n.op){case"ResizeBilinear":{const i=se("images",n,e,t),a=se("size",n,e,t),o=se("alignCorners",n,e,t),s=se("halfPixelCenters",n,e,t);return[r.image.resizeBilinear(i,[a[0],a[1]],o,s)]}case"ResizeNearestNeighbor":{const i=se("images",n,e,t),a=se("size",n,e,t),o=se("alignCorners",n,e,t),s=se("halfPixelCenters",n,e,t);return[r.image.resizeNearestNeighbor(i,[a[0],a[1]],o,s)]}case"CropAndResize":{const i=se("image",n,e,t),a=se("boxes",n,e,t),o=se("boxInd",n,e,t),s=se("cropSize",n,e,t),u=se("method",n,e,t),l=se("extrapolationValue",n,e,t);return[r.image.cropAndResize(i,a,o,s,u,l)]}case"ImageProjectiveTransformV3":{const i=se("images",n,e,t),a=se("transforms",n,e,t),o=se("outputShape",n,e,t),s=se("fillValue",n,e,t),u=se("interpolation",n,e,t),l=se("fillMode",n,e,t);return[r.image.transform(i,a,u.toLowerCase(),l.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9e=(n,e,t,r=Cs)=>{switch(n.op){case"Equal":return[r.equal(se("a",n,e,t),se("b",n,e,t))];case"NotEqual":return[r.notEqual(se("a",n,e,t),se("b",n,e,t))];case"Greater":return[r.greater(se("a",n,e,t),se("b",n,e,t))];case"GreaterEqual":return[r.greaterEqual(se("a",n,e,t),se("b",n,e,t))];case"Less":return[r.less(se("a",n,e,t),se("b",n,e,t))];case"LessEqual":return[r.lessEqual(se("a",n,e,t),se("b",n,e,t))];case"LogicalAnd":return[r.logicalAnd(se("a",n,e,t),se("b",n,e,t))];case"LogicalNot":return[r.logicalNot(se("a",n,e,t))];case"LogicalOr":return[r.logicalOr(se("a",n,e,t),se("b",n,e,t))];case"Select":case"SelectV2":return[r.where(se("condition",n,e,t),se("a",n,e,t),se("b",n,e,t))];case"BitwiseAnd":return[r.bitwiseAnd(se("a",n,e,t),se("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9e=(n,e,t,r=Cs)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(se("a",n,e,t),se("b",n,e,t),se("transposeA",n,e,t),se("transposeB",n,e,t))];case"Einsum":return[r.einsum(se("equation",n,e,t),...se("tensors",n,e,t))];case"Transpose":return[r.transpose(se("x",n,e,t),se("perm",n,e,t))];case"_FusedMatMul":const[i,a]=se("fusedOps",n,e,t),o=i==="biasadd",s=a==="prelu",u=se("numArgs",n,e,t),l=se("leakyreluAlpha",n,e,t);if(o){if(s&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[h,c]=se("args",n,e,t);return[r.fused.matMul({a:se("a",n,e,t),b:se("b",n,e,t),transposeA:se("transposeA",n,e,t),transposeB:se("transposeB",n,e,t),bias:h,activation:a,preluActivationWeights:c,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(se("a",n,e,t),se("numLower",n,e,t),se("numUpper",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g9e=(n,e,t,r=Cs)=>{switch(n.op){case"EuclideanNorm":return[r.euclideanNorm(se("x",n,e,t),se("axis",n,e,t),se("keepDims",n,e,t))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(se("x",n,e,t),se("mean",n,e,t),se("variance",n,e,t),se("offset",n,e,t),se("scale",n,e,t),se("epsilon",n,e,t))];case"FusedBatchNormV3":return[r.batchNorm(se("x",n,e,t),se("mean",n,e,t),se("variance",n,e,t),se("offset",n,e,t),se("scale",n,e,t),se("epsilon",n,e,t))];case"LRN":return[r.localResponseNormalization(se("x",n,e,t),se("radius",n,e,t),se("bias",n,e,t),se("alpha",n,e,t),se("beta",n,e,t))];case"Softmax":return[r.softmax(se("x",n,e,t))];case"LogSoftmax":return[r.logSoftmax(se("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m9e=(n,e,t,r=Cs)=>{switch(n.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:a}=r.raggedGather(se("paramsNestedSplits",n,e,t),se("paramsDenseValues",n,e,t),se("indices",n,e,t),se("outputRaggedRank",n,e,t));return i.concat(a)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:a}=r.raggedRange(se("starts",n,e,t),se("limits",n,e,t),se("splits",n,e,t));return[i,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(se("shape",n,e,t),se("values",n,e,t),se("defaultValue",n,e,t),se("rowPartitionTensors",n,e,t),se("rowPartitionTypes",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y9e=(n,e,t,r=Cs)=>{switch(n.op){case"Max":{const s=se("axis",n,e,t),u=se("keepDims",n,e,t);return[r.max(se("x",n,e,t),s,u)]}case"Mean":{const s=se("axis",n,e,t),u=se("keepDims",n,e,t);return[r.mean(se("x",n,e,t),s,u)]}case"Min":{const s=se("axis",n,e,t),u=se("keepDims",n,e,t);return[r.min(se("x",n,e,t),s,u)]}case"Sum":{const s=se("axis",n,e,t),u=se("keepDims",n,e,t);return[r.sum(se("x",n,e,t),s,u)]}case"All":{const s=se("axis",n,e,t),u=se("keepDims",n,e,t);return[r.all(se("x",n,e,t),s,u)]}case"Any":{const s=se("axis",n,e,t),u=se("keepDims",n,e,t);return[r.any(se("x",n,e,t),s,u)]}case"ArgMax":{const s=se("axis",n,e,t);return[r.argMax(se("x",n,e,t),s)]}case"ArgMin":{const s=se("axis",n,e,t);return[r.argMin(se("x",n,e,t),s)]}case"Prod":{const s=se("axis",n,e,t),u=se("keepDims",n,e,t);return[r.prod(se("x",n,e,t),s,u)]}case"Cumprod":{const s=se("axis",n,e,t),u=se("exclusive",n,e,t),l=se("reverse",n,e,t);return[r.cumprod(se("x",n,e,t),s,u,l)]}case"Cumsum":{const s=se("axis",n,e,t),u=se("exclusive",n,e,t),l=se("reverse",n,e,t);return[r.cumsum(se("x",n,e,t),s,u,l)]}case"Bincount":const i=se("x",n,e,t),a=se("weights",n,e,t),o=se("size",n,e,t);return[r.bincount(i,a,o)];case"DenseBincount":{const s=se("x",n,e,t),u=se("weights",n,e,t),l=se("size",n,e,t),h=se("binaryOutput",n,e,t);return[r.denseBincount(s,u,l,h)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v9e=(n,e,t,r=Cs)=>{switch(n.op){case"ConcatV2":case"Concat":{const i=se("n",n,e,t),a=se("axis",n,e,t);let o=se("tensors",n,e,t);return o=o.slice(0,i),[r.concat(o,a)]}case"Gather":{const i=se("x",n,e,t),a=se("indices",n,e,t);return[r.gather(i,r.cast(a,"int32"),0)]}case"GatherV2":{const i=se("axis",n,e,t),a=se("batchDims",n,e,t),o=se("x",n,e,t),s=se("indices",n,e,t);return[r.gather(o,r.cast(s,"int32"),i,a)]}case"Reverse":{const i=se("dims",n,e,t),a=[];for(let s=0;s<i.length;s++)i[s]&&a.push(s);const o=se("x",n,e,t);return[r.reverse(o,a)]}case"ReverseV2":{const i=se("axis",n,e,t),a=se("x",n,e,t);return[r.reverse(a,i)]}case"Slice":{const i=se("begin",n,e,t),a=se("size",n,e,t);return[r.slice(se("x",n,e,t),i,a)]}case"StridedSlice":{const i=se("begin",n,e,t),a=se("end",n,e,t),o=se("strides",n,e,t),s=se("beginMask",n,e,t),u=se("endMask",n,e,t),l=se("ellipsisMask",n,e,t),h=se("newAxisMask",n,e,t),c=se("shrinkAxisMask",n,e,t),f=se("x",n,e,t);return[r.stridedSlice(f,i,a,o,s,u,l,h,c)]}case"Pack":return Nr(()=>{const i=se("axis",n,e,t),a=se("tensors",n,e,t),o=a[0].shape,s=r.squeeze(a[0]).shape,u=a.map(l=>{const h=gh(l.shape,o);if(!h&&!gh(r.squeeze(l).shape,s))throw new Error("the input tensors shape does not match");return h?l:r.reshape(l,o)});return[r.stack(u,i)]});case"Unpack":{const i=se("axis",n,e,t),a=se("tensor",n,e,t);return r.unstack(a,i)}case"Tile":{const i=se("reps",n,e,t);return[r.tile(se("x",n,e,t),i)]}case"Split":case"SplitV":{const i=se("axis",n,e,t),a=se("numOrSizeSplits",n,e,t),o=se("x",n,e,t);return r.split(o,a,i)}case"ScatterNd":{const i=se("indices",n,e,t),a=se("values",n,e,t),o=se("shape",n,e,t);return[r.scatterND(i,a,o)]}case"GatherNd":{const i=se("x",n,e,t),a=se("indices",n,e,t);return[r.gatherND(i,a)]}case"SparseToDense":{const i=se("sparseIndices",n,e,t),a=se("outputShape",n,e,t),o=se("sparseValues",n,e,t),s=se("defaultValue",n,e,t);return[r.sparseToDense(i,o,a,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}case"TensorScatterUpdate":{const i=se("indices",n,e,t),a=se("values",n,e,t),o=se("tensor",n,e,t);return[r.tensorScatterUpdate(o,i,a)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b9e=(n,e,t,r=Cs)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:a,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(se("indices",n,e,t),se("values",n,e,t),se("denseShape",n,e,t),se("defaultValue",n,e,t));return[i,a,o,s]}case"SparseReshape":{const{outputIndices:i,outputShape:a}=r.sparse.sparseReshape(se("inputIndices",n,e,t),se("inputShape",n,e,t),se("newShape",n,e,t));return[i,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(se("data",n,e,t),se("indices",n,e,t),se("segmentIds",n,e,t))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(se("data",n,e,t),se("indices",n,e,t),se("segmentIds",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w9e=(n,e,t,r=Cs)=>{switch(n.op){case"FFT":return[r.fft(se("x",n,e,t))];case"IFFT":return[r.ifft(se("x",n,e,t))];case"RFFT":return[r.rfft(se("x",n,e,t))];case"IRFFT":return[r.irfft(se("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x9e=(n,e,t,r=Cs)=>{switch(n.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(se("input",n,e,t),se("pattern",n,e,t),se("rewrite",n,e,t),se("replaceGlobal",n,e,t))];case"StringNGrams":{const{nGrams:i,nGramsSplits:a}=r.string.stringNGrams(se("data",n,e,t),se("dataSplits",n,e,t),se("separator",n,e,t),se("nGramWidths",n,e,t),se("leftPad",n,e,t),se("rightPad",n,e,t),se("padWidth",n,e,t),se("preserveShortSequences",n,e,t));return[i,a]}case"StringSplit":{const{indices:i,values:a,shape:o}=r.string.stringSplit(se("input",n,e,t),se("delimiter",n,e,t),se("skipEmpty",n,e,t));return[i,a,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(se("input",n,e,t),se("numBuckets",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _9e=(n,e,t,r=Cs)=>{switch(n.op){case"Cast":return[r.cast(se("x",n,e,t),se("dtype",n,e,t))];case"ExpandDims":{const i=se("axis",n,e,t);return[r.expandDims(se("x",n,e,t),i)]}case"Squeeze":{const i=se("axis",n,e,t);return[r.squeeze(se("x",n,e,t),i)]}case"Reshape":return[r.reshape(se("x",n,e,t),se("shape",n,e,t))];case"EnsureShape":return[r.ensureShape(se("x",n,e,t),se("shape",n,e,t))];case"MirrorPad":return[r.mirrorPad(se("x",n,e,t),se("padding",n,e,t),se("mode",n,e,t))];case"PadV2":case"Pad":return[r.pad(se("x",n,e,t),se("padding",n,e,t),se("constantValue",n,e,t))];case"SpaceToBatchND":{const i=se("blockShape",n,e,t),a=se("paddings",n,e,t);return[r.spaceToBatchND(se("x",n,e,t),i,a)]}case"BatchToSpaceND":{const i=se("blockShape",n,e,t),a=se("crops",n,e,t);return[r.batchToSpaceND(se("x",n,e,t),i,a)]}case"DepthToSpace":{const i=se("blockSize",n,e,t),a=se("dataFormat",n,e,t).toUpperCase();return[r.depthToSpace(se("x",n,e,t),i,a)]}case"BroadcastTo":return[r.broadcastTo(se("x",n,e,t),se("shape",n,e,t))];case"BroadcastArgs":return[r.broadcastArgs(se("s0",n,e,t),se("s1",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LY(n,e,t,r,i=Nr){const a=((o,s,u)=>{switch(o.category){case"arithmetic":return i(()=>QBe(o,s,u));case"basic_math":return i(()=>ZBe(o,s,u));case"control":return i9e(o,s,u);case"convolution":return i(()=>a9e(o,s,u));case"creation":return i(()=>s9e(o,s,u));case"dynamic":return o9e(o,s,u);case"evaluation":return i(()=>u9e(o,s,u));case"image":return i(()=>f9e(o,s,u));case"graph":return i(()=>l9e(o,s,u));case"logical":return i(()=>d9e(o,s,u));case"matrices":return i(()=>p9e(o,s,u));case"normalization":return i(()=>g9e(o,s,u));case"ragged":return i(()=>m9e(o,s,u));case"reduction":return i(()=>y9e(o,s,u));case"slice_join":return i(()=>v9e(o,s,u));case"sparse":return i(()=>b9e(o,s,u));case"spectral":return i(()=>w9e(o,s,u));case"string":return i(()=>x9e(o,s,u));case"transformation":return i(()=>_9e(o,s,u));case"hash_table":return h9e(o,s,u,r);case"custom":const l=Efe(o.op);if(l&&l.customExecutor)return l.customExecutor(new YBe(o,s,u));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,e,t);return Gm(a)?a.then(o=>[].concat(o)):[].concat(a)}let MY=class{constructor(e={},t={},r={},i={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=i,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UY(n,e,t,r){const i=new Set,a=[];let o=null,s=null;const u=new Set,l=new Set(Object.keys(n).map(f=>wu(f)[0]));r=r||[];const h=new Set(r.map(f=>wu(f.name)[0])),c=[...e];for(;c.length>0;){const f=c.pop();if((Cv(f)||N9e(f)||O9e(f))&&o==null&&(o=f,s=o.children.map(d=>d.name).filter(d=>i.has(d))),i.add(f.name),t[f.name]==null&&!l.has(f.name)&&!h.has(f.name)){if(f.inputs.length===0){a.push(f.name);continue}f.inputs.forEach(d=>{u.has(d.name)||(u.add(d.name),c.push(d))})}}return{inputs:n,outputs:e,usedNodes:i,missingInputs:a,dynamicNode:o,syncInputs:s}}function S9e(n,e){const{usedNodes:t,inputs:r}=e,i=Object.keys(r).map(g=>wu(g)[0]).map(g=>n.nodes[g]),a=n.initNodes||[],o=g=>t.has(typeof g=="string"?g:g.name);function s(g){return[...new Map(g.map(y=>[y.name,y])).values()]}const u=s([...i,...n.weights,...a]).filter(o),l=s([...u,...Object.values(n.nodes)]).filter(o),h=new Map(l.map(g=>[g.name,g])),c={};for(const g of l){c[g.name]=c[g.name]||0;for(const y of g.children)o(y)||(c[y.name]=Number.POSITIVE_INFINITY),c[y.name]=(c[y.name]||0)+1}const f=Object.entries(c).filter(([,g])=>g===0).map(([g])=>g),d=[...f];for(;f.length>0;){const g=f.pop(),y=h.get(g);for(const v of y.children.filter(o))--c[v.name]===0&&(d.push(v.name),f.push(v.name))}const p=d.map(g=>h.get(g)),m=C9e(p,u);return E9e(m,u),m}function C9e(n,e){const t=new Map(n.map(o=>[o.name,o])),r=e.map(o=>o.name),i=new Set(r);for(;r.length>0;){const o=r.pop(),s=t.get(o);for(const u of s.children)!t.has(u.name)||i.has(u.name)||(i.add(u.name),r.push(u.name))}return n.filter(o=>i.has(o.name))}class Ek extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function E9e(n,e){const t=new Map(n.map((s,u)=>[s.name,u])),r=new Set(e.map(s=>s.name)),i=s=>r.has(typeof s=="string"?s:s.name),a=new Set(n.map(s=>s.name)),o=s=>a.has(typeof s=="string"?s:s.name);for(const s of n){for(const u of s.children.filter(o)){if(!t.has(u.name))throw new Ek(`Child ${u.name} of node ${s.name} is unreachable.`);if(t.get(s.name)>t.get(u.name))throw new Ek(`Node ${s.name} is scheduled to run after its child ${u.name}.`)}if(!i(s))for(const u of s.inputs){if(!t.has(u.name))throw new Ek(`Input ${u.name} of node ${s.name} is unreachable.`);if(t.get(u.name)>t.get(s.name))throw new Ek(`Node ${s.name} is scheduled to run before its input ${u.name}.`)}}}function T9e(n){const e=new Map(n.map((s,u)=>[s.name,u])),t=Number.MAX_SAFE_INTEGER,r=n.map((s,u)=>Cv(s)?t:u),i=s=>{const u=r[e.get(s.name)];return u??-1},a=n.map((s,u)=>s.children.map(i).reduce((l,h)=>Math.max(l,h),r[u])),o=new Map;for(let s=0;s<n.length;++s){const u=a[s];if(u===t)continue;const l=n[s],h=n[u];o.has(h.name)||o.set(h.name,[]),o.get(h.name).push(l)}return o}const D9e=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),A9e=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),k9e=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Cv(n){return D9e.has(n.op)}function N9e(n){return A9e.has(n.op)}function O9e(n){return k9e.has(n.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let BY=class Afe{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(r=>e[r].map(i=>i.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Afe(e.functions[r],this)})}getCompilationKey(e,t){const r=e.map(a=>a.name).sort(),i=t.map(a=>a.name).sort();return r.join(this.SEPARATOR)+"--"+i.join(this.SEPARATOR)}compile(e,t){const r=UY(e,t,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:a,syncInputs:o}=r;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(i.length>0){const l=t.map(c=>c.name),h=Object.keys(e);throw new Error(`Cannot compute the outputs [${l}] from the provided inputs [${h}]. Missing the following inputs: [${i}]`)}const s=S9e(this.graph,r),u=T9e(s);return{orderedNodes:s,nodeLiveUntilMap:u}}cloneAndKeepTensor(e){if(e==null)return null;const t=e.clone();return sh(t),t}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,this.cloneTensorList(r)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const i=r.map(f=>this.graph.nodes[wu(f)[0]]),a=t.map(f=>wu(f)[0]),o=new Set(a);let s=a.map(f=>this.graph.nodes[f]);s.length===0&&(s=this._outputs);const u=this.getCompilationKey(i,s);let l=this.compiledMap.get(u);l==null&&(l=this.compile(e,s),this.compiledMap.set(u,l));try{this.keepIntermediateTensors=xn().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const h={},c={};return Nr(()=>{const f=new MY(this.weightMap,h,c,this.functionExecutorMap,this.parseNodeNameCache),d=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(y=>{const[v,b]=wu(y,f),w=[];w[b]=e[y],d[v]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[v]=this.cloneTensorList(w))});const p=this.getFrozenTensorIds(d),{orderedNodes:m,nodeLiveUntilMap:g}=l;for(const y of m){if(d[y.name])continue;const v=LY(y,d,f,this._resourceManager);if(Gm(v))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);d[y.name]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(v)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,d,f,p,o,g.get(y.name))}return this.parent==null&&f.dispose(p),t.map(y=>_s(y,d,f))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(i=>i.id)));return new Set(t)}checkTensorForDisposal(e,t,r,i,a,o,s){if(!(Cv(t)||o.has(e))){for(const u of r[e])u!=null&&(s[u.id]=(s[u.id]||0)+t.children.length);for(const u of t.inputs){if(Cv(u))continue;const l=OY(u.name,r,i);if(l!=null)for(const h of l){if(!h||h.kept||a.has(h.id))continue;const c=s[h.id];c===1?(h.dispose(),delete s[h.id]):c!=null&&s[h.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,r,i,a,o){function s(u){return Cv(u)||a.has(u.name)}if(!(Cv(e)||o==null))for(const u of o){if(s(u))continue;const l=OY(u.name,t,r);for(const h of l)!h||h.kept||i.has(h.id)||h.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,r=!1,i={},a={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=xn().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const o=new MY(this.weightMap,i,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const s=await this.executeWithControlFlow(e,o,t,r),u=t.map(f=>_s(f,s,o)),l=u.map(f=>f.id),h=Object.keys(e).map(f=>e[f].id),c=new Set([...l,...h,...this.weightIds]);return Object.values(s).forEach(f=>{f.forEach(d=>{d&&!d.isDisposed&&!c.has(d.id)&&d.dispose()})}),this.parent==null&&o.dispose(c),u}async executeFunctionAsync(e,t,r){const i=e.reduce((a,o,s)=>(a[this.inputs[s].name]=o,a),{});return this._executeAsync(i,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,i){const a=Object.keys(e),o=a.map(w=>this.graph.nodes[wu(w)[0]]),s=r.map(w=>wu(w)[0]),u=new Set(s);let l=s.map(w=>this.graph.nodes[w]);l.length===0&&(l=this._outputs);const{usedNodes:h,missingInputs:c,dynamicNode:f,syncInputs:d}=UY(e,l,this.weightMap,this._initNodes),p=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:t.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[x,S]=wu(w),E=[];E[S]=e[w],m[x]=E});const g={},y=this.getFrozenTensorIds(m),v={};for(;p.length>0;){const w=this.processStack(o,p,t,m,v,y,u,g,h);await Promise.all(w)}f==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=l.filter(w=>!Cv(w)&&!_s(w.name,m,t)).map(w=>w.name);if(b.length>0){let w="";throw f!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${a}]. Consider providing the following inputs: [${c}]. ${w}`)}return m}processStack(e,t,r,i,a,o,s,u,l){const h=[];for(;t.length>0;){const c=t.pop();r.currentContext=c.contexts;let f="";if(c.node.op==="Enter"&&se("isConstant",c.node,i,r)&&([f]=Id(c.node.name,r)),i[c.node.name]==null){const d=LY(c.node,i,r,this._resourceManager);f||([f]=Id(c.node.name,r));const p=r.currentContext;Gm(d)?h.push(d.then(m=>(i[f]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(m)),r.currentContext=p,this.checkTensorForDisposal(f,c.node,i,r,o,s,u),this.processChildNodes(c.node,t,r,i,a,l),m))):(i[f]=d,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(d)),this.checkTensorForDisposal(f,c.node,i,r,o,s,u),this.processChildNodes(c.node,t,r,i,a,l))}else this.processChildNodes(c.node,t,r,i,a,l)}return h}processChildNodes(e,t,r,i,a,o){e.children.forEach(s=>{const[u]=Id(s.name,r);a[u]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(l=>!!_s(l,i,r))&&(a[u]=!0,t.push({contexts:r.currentContext,node:s})):s.inputNames.every(l=>!!_s(l,i,r))&&(a[u]=!0,t.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const r=e[t],[i]=wu(t),a=this.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){const o=a.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((u,l)=>o[l]===-1||o[l]===u);Fe(s,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&Fe(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var t,r;const i={};for(const a in e){const o=(r=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||r===void 0?void 0:r[a];o!=null?i[o.name]=e[a]:i[a]=e[a]}return i}checkInputs(e){const t=Object.keys(e).filter(r=>{const[i]=wu(r);return this.graph.nodes[i]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>{var r,i;const a=(i=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||i===void 0?void 0:i[t];return a!=null?a.name:t},{})}checkOutputs(e){e.forEach(t=>{const[r]=wu(t);if(!this.graph.nodes[r])throw new Error(`The output '${t}' is not found in the graph`)})}};class R9e{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I9e="?tfjs-format=file",F9e="model.json";class Hz{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},r=jz){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=r,t==null&&(this.loadOptions={}),this.resourceManager=new R9e}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Gm(e)?e.then(t=>t.getWeightStream==null?this.loadSync(t):this.loadStreaming(t)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const t=await Sle(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const r=this.artifacts.modelTopology;let i=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const a=this.artifacts.userDefinedMetadata;a.signature!=null&&(i=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=i,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new BY(RY.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const a=RY.Instance.transformGraph(e.modelInitializer);this.initializer=new BY(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t=e instanceof Gi?[e]:e,r={};return t.forEach((i,a)=>r[this.structuredOutputKeys[a]]=i),r}return e}predict(e,t){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,t){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var t;if(!(e instanceof Gi)&&!Array.isArray(e)){const a=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(a!=null)for(const o in a){const s=a[o];s.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[s.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let i=0;return this.inputNodes.reduce((a,o)=>{var s,u,l;const h=(l=(u=(s=this.signature)===null||s===void 0?void 0:s.inputs)===null||u===void 0?void 0:u[o])===null||l===void 0?void 0:l.resourceId;return h!=null?a[o]=this.resourceIdToCapturedInput[h]:a[o]=e[i++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,r=Object.keys(t);for(let i=0;i<r.length;i++){const a=r[i],o=t[a];this.resourceIdToCapturedInput[o.resourceId]=e[i]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&bo(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function P9e(n,e={},t=jz){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof n=="string"&&(n=M9e(n));const r=new Hz(n,e,t);return await r.load(),r}function L9e(n){if(n==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(n instanceof Array){const[r,i]=n;if(!r)throw new Error("modelJSON must be the first element of the array");if(!i||!(i instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const a=KN(r.weightsManifest),o=H7(r,a,i);e=eO(o)}else if("load"in n)e=n;else if("modelTopology"in n&&"weightSpecs"in n&&"weightData"in n)e=eO(n);else throw new Error("Unknown model format");const t=new Hz(e);return t.load(),t}function M9e(n){return n.endsWith("/")||(n=n+"/"),`${n}${F9e}${I9e}`}/** @license See the LICENSE file. */const U9e="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B9e=Object.freeze(Object.defineProperty({__proto__:null,GraphModel:Hz,deregisterOp:cBe,loadGraphModel:P9e,loadGraphModelSync:L9e,registerOp:lBe,version_converter:U9e},Symbol.toStringTag,{value:"Module"})),z9e=nR(B9e),W9e=nR(oBe);/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var j9e=mC.exports,zY;function $9e(){return zY||(zY=1,function(n,e){(function(t,r){r(e,z9e,W9e)})(j9e,function(t,r,i){const a={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class o{constructor(u,l){this.modelPath=l||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(u)}/model.json`}getPrefix(u){return u==="lite_mobilenet_v2"?`ssd${u}`:`ssd_${u}`}async load(){this.model=await r.loadGraphModel(this.modelPath);const u=i.zeros([1,300,300,3],"int32"),l=await this.model.executeAsync(u);await Promise.all(l.map(h=>h.data())),l.map(h=>h.dispose()),u.dispose()}async infer(u,l,h){const c=i.tidy(()=>(u instanceof i.Tensor||(u=i.browser.fromPixels(u)),i.expandDims(u))),f=c.shape[1],d=c.shape[2],p=await this.model.executeAsync(c),m=p[0].dataSync(),g=p[1].dataSync();c.dispose(),i.dispose(p);const[y,v]=this.calculateMaxScores(m,p[0].shape[1],p[0].shape[2]),b=i.getBackend();i.getBackend()==="webgl"&&i.setBackend("cpu");const w=i.tidy(()=>{const S=i.tensor2d(g,[p[1].shape[1],p[1].shape[3]]);return i.image.nonMaxSuppression(S,y,l,h,h)}),x=w.dataSync();return w.dispose(),b!==i.getBackend()&&i.setBackend(b),this.buildDetectedObjects(d,f,g,y,x,v)}buildDetectedObjects(u,l,h,c,f,d){const p=f.length,m=[];for(let g=0;g<p;g++){const y=[];for(let S=0;S<4;S++)y[S]=h[4*f[g]+S];const v=y[0]*l,b=y[1]*u,w=y[2]*l,x=y[3]*u;y[0]=b,y[1]=v,y[2]=x-b,y[3]=w-v,m.push({bbox:y,class:a[d[f[g]]+1].displayName,score:c[f[g]]})}return m}calculateMaxScores(u,l,h){const c=[],f=[];for(let d=0;d<l;d++){let p=Number.MIN_VALUE,m=-1;for(let g=0;g<h;g++)u[d*h+g]>p&&(p=u[d*h+g],m=g);c[d]=p,f[d]=m}return[c,f]}async detect(u,l=20,h=.5){return this.infer(u,l,h)}dispose(){this.model!=null&&this.model.dispose()}}t.ObjectDetection=o,t.load=async function(s={}){if(i==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const u=s.base||"lite_mobilenet_v2",l=s.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(u)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${u}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const h=new o(u,l);return await h.load(),h},t.version="2.2.3",Object.defineProperty(t,"__esModule",{value:!0})})}(mC,mC.exports)),mC.exports}var q9e=$9e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var kfe=function(n,e){return(kfe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function Sh(n,e){function t(){this.constructor=n}kfe(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Jt(n,e,t,r){return new(t||(t=Promise))(function(i,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function s(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):new t(function(h){h(l.value)}).then(o,s)}u((r=r.apply(n,[])).next())})}function en(n,e){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&h[0]?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return o.label++,{value:h[1],done:!1};case 5:o.label++,r=h[1],h=[0];continue;case 7:h=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){o=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){o.label=h[1];break}if(h[0]===6&&o.label<i[1]){o.label=i[1],i=h;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(h);break}i[2]&&o.ops.pop(),o.trys.pop();continue}h=e.call(n,o)}catch(c){h=[6,c],r=0}finally{t=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([u,l])}}}var V9e=function(){function n(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(e,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},n.prototype.registerFlag=function(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){var i=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+i+"."),this.set(e,i)}},n.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},n.prototype.getNumber=function(e){return this.get(e)},n.prototype.getBool=function(e){return this.get(e)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)},n.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},n.prototype.setFlags=function(e){this.flags=Object.assign({},e)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,i=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(a){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return H9e(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(a){var o=a.split(":"),s=o[0],u=o[1];e.urlFlags[s]=function(l,h){if((h=h.toLowerCase())==="true"||h==="false")return h==="true";if(""+ +h===h)return+h;throw new Error("Could not parse value flag value "+h+" for flag "+l+".")}(s,u)})}},n}();function H9e(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function ct(){return Nfe}var Nfe=null,nO=new Map,LU=new Map;function Ofe(n,e){var t=Ife(n,e);return nO.get(t)}function WY(n){return LU.get(n)}function jY(n){for(var e=nO.entries(),t=[];;){var r=e.next(),i=r.done,a=r.value;if(i)break;var o=a[0],s=a[1];o.split("_")[0]===n&&t.push(s)}return t}function Rfe(n){var e=n.kernelName,t=n.backendName,r=Ife(e,t);if(nO.has(r))throw new Error("The kernel '"+e+"' for backend '"+t+"' is already registered");nO.set(r,n)}function G9e(n){var e=n.kernelName;LU.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),LU.set(e,n)}function Ife(n,e){return e+"_"+n}function $Y(n){for(var e=n.length,t=0,r=0;e>0;)r=Math.random()*e|0,t=n[--e],n[e]=n[r],n[r]=t}function rO(n,e,t){return Math.max(n,Math.min(e,t))}function Gz(n){return n%2==0?n:n+1}function Ffe(n){for(var e=0,t=0;t<n.length;t++)e+=n[t];return e}function Pe(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function Or(n,e,t){t===void 0&&(t=""),Pe(ts(n,e),function(){return t+" Shapes "+n+" and "+e+" must match"})}function I1(n){Pe(n!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function g1(n,e,t){if(e===void 0&&(e=[]),t===void 0&&(t=!1),e==null&&(e=[]),Array.isArray(n)||ch(n)&&!t)for(var r=0;r<n.length;++r)g1(n[r],e,t);else e.push(n);return e}function Qt(n){if(n.length===0)return 1;for(var e=n[0],t=1;t<n.length;t++)e*=n[t];return e}function ts(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function ra(n){return n%1==0}function Pfe(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var e=Math.exp(2*n);return(e-1)/(e+1)}function iO(n){var e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function X0(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function MU(n,e,t){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,i){var a=0,o=function(){if(n())r();else{a++;var s=e(a);t!=null&&a>=t?i():setTimeout(o,s)}};o()})}function Lfe(n,e){for(var t=1,r=-1,i=0;i<n.length;++i)if(n[i]>=0)t*=n[i];else if(n[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(n[i]<0)throw Error("Shapes can not be < 0. Found "+n[i]+" at dim "+i);if(r===-1){if(e>0&&e!==t)throw Error("Size("+e+") must match the product of shape "+n);return n}if(t===0)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(e%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+t);var a=n.slice();return a[r]=e/t,a}function Ma(n,e){var t=e.length;return Pe((n=n==null?e.map(function(r,i){return i}):[].concat(n)).every(function(r){return r>=-t&&r<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+n}),Pe(n.every(function(r){return ra(r)}),function(){return"All values in axis param must be integers but got axis "+n}),n.map(function(r){return r<0?t+r:r})}function qg(n,e){for(var t=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:Ma(e,n).sort(),o=0,s=0;s<n.length;++s){if(a!=null){if(a[o]===s&&n[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+n[s]+"' is not 1");(a[o]==null||a[o]>s)&&n[s]===1&&(t.push(n[s]),r.push(s)),a[o]<=s&&o++}n[s]!==1&&(t.push(n[s]),r.push(s))}return{newShape:t,keptDims:r}}function m1(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else{if(n!=="bool")throw new Error("Unknown data type "+n);t=new Uint8Array(e)}return t}function pE(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else{if(n!=="string")throw new Error("Unknown data type "+n);t=new Array(e)}return t}function Mfe(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function Ufe(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function Bfe(n,e){return e!=="complex64"&&(e!=="float32"||n==="complex64")&&(e!=="int32"||n==="float32"||n==="complex64")&&(e!=="bool"||n!=="bool")}function ch(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function Xz(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error("Unknown dtype "+n)}function zfe(n){if(n==null)return 0;var e=0;return n.forEach(function(t){return e+=t.length}),e}function HI(n){return typeof n=="string"||n instanceof String}function Wfe(n){return typeof n=="boolean"}function jfe(n){return typeof n=="number"}function _x(n){return Array.isArray(n)?_x(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":jfe(n)?"float32":HI(n)?"string":Wfe(n)?"bool":"float32"}function aO(n){return!!(n&&n.constructor&&n.call&&n.apply)}function sO(n,e){for(var t=e;t<n;++t)if(n%t==0)return t;return n}function Au(n){var e=n.length;if(e<2)return[];var t=new Array(e-1);t[e-2]=n[e-1];for(var r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function Kz(n,e,t){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=g1(n)),t&&Mfe(n,e),function(a,o){return a instanceof Float32Array&&o==="float32"||a instanceof Int32Array&&o==="int32"||a instanceof Uint8Array&&o==="bool"}(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){for(var r=new Uint8Array(n.length),i=0;i<r.length;++i)Math.round(n[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function UU(n,e){if(n.length===0)return e[0];var t=n.reduce(function(r,i){return r*i});if(t===0)return[];if(t!==e.length)throw new Error("["+n+"] does not match the input size.");return function r(i,a,o){var s=new Array;if(a.length===1)for(var u=a[0],l=0;l<u;l++)s[l]=o[i+l];else{u=a[0];var h=a.slice(1),c=h.reduce(function(f,d){return f*d});for(l=0;l<u;l++)s[l]=r(i+l*c,h,o)}return s}(0,n,e)}function Yz(n,e){for(var t=Sx(n,e),r=0;r<t.length;r++)t[r]=1;return t}function Sx(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error("Unknown data type "+e)}function rh(){return ct().platform.now()}function Qz(n){n.forEach(function(e){Pe(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."})})}function $fe(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ct().platform.encode(n,e)}function gE(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ct().platform.decode(n,e)}function oO(n,e,t){if(e===0)return 0;if(e===1)return n[0];for(var r=n[n.length-1],i=0;i<n.length-1;++i)r+=t[i]*n[i];return r}function Zz(n,e,t){if(e===0)return[];if(e===1)return[n];for(var r=new Array(e),i=0;i<r.length-1;++i)r[i]=Math.floor(n/t[i]),n-=r[i]*t[i];return r[r.length-1]=n,r}var gn=Object.freeze({shuffle:$Y,clamp:rO,nearestLargerEven:Gz,sum:Ffe,randUniform:function(n,e){var t=Math.random();return e*t+(1-t)*n},distSquared:function(n,e){for(var t=0,r=0;r<n.length;r++){var i=Number(n[r])-Number(e[r]);t+=i*i}return t},assert:Pe,assertShapesMatch:Or,assertNonNull:I1,flatten:g1,sizeFromShape:Qt,isScalarShape:function(n){return n.length===0},arraysEqual:ts,isInt:ra,tanh:Pfe,sizeToSquarishShape:iO,createShuffledIndices:function(n){for(var e=new Uint32Array(n),t=0;t<n;++t)e[t]=t;return $Y(e),e},rightPad:X0,repeatedTry:MU,inferFromImplicitShape:Lfe,parseAxisParam:Ma,squeezeShape:qg,getTypedArrayFromDType:m1,getArrayFromDType:pE,checkConversionForErrors:Mfe,isValidDtype:Ufe,hasEncodingLoss:Bfe,isTypedArray:ch,bytesPerElement:Xz,bytesFromStringArray:zfe,isString:HI,isBoolean:Wfe,isNumber:jfe,inferDtype:_x,isFunction:aO,nearestDivisor:sO,computeStrides:Au,toTypedArray:Kz,toNestedArray:UU,makeOnesTypedArray:Yz,makeZerosTypedArray:Sx,now:rh,assertNonNegativeIntegerDimensions:Qz,fetch:function(n,e){return ct().platform.fetch(n,e)},encodeString:$fe,decodeString:gE,locToIndex:oO,indexToLoc:Zz}),X9e=function(){function n(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new K9e)}return n.prototype.profileKernel=function(e,t,r){var i,a=this,o=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(u){(function(l,h,c){if(h!=="float32")return!1;for(var f=0;f<l.length;f++){var d=l[f];if(isNaN(d)||!isFinite(d))return console.warn("Found "+d+" in the result of '"+c+"'"),!0}})(u,s.dtype,e),o.then(function(l){var h="";l.getExtraProfileInfo!=null&&(h=l.getExtraProfileInfo()),a.logger.logKernelProfile(e,s,u,l.kernelMs,t,h)})})}),i},n}(),K9e=function(){function n(){}return n.prototype.logKernelProfile=function(e,t,r,i,a,o){var s=typeof i=="number"?X0(i+"ms",9):i.error,u=X0(e,25),l=t.rank,h=t.size,c=X0(t.shape.toString(),14),f="";for(var d in a){var p=a[d].shape||t.shape,m=p.length;f+=d+": "+m+"D "+(m>0?p:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+c+"	%c"+h+"	%c"+f+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n}(),qY=20,Q_=3,rM=7;function Y9e(n,e,t,r){var i=Au(e),a=function(l,h,c,f){var d=Qt(h),p=f[f.length-1],m=new Array(p).fill(0),g=h.length,y=c==="complex64"?J_(l):l;if(g>1)for(var v=0;v<d/p;v++)for(var b=v*p,w=0;w<p;w++)m[w]=Math.max(m[w],Z_(y[b+w],0,c).length);return m}(n,e,t,i),o=e.length,s=function l(h,c,f,d,p,m){m===void 0&&(m=!0);var g=f==="complex64"?2:1,y=c[0],v=c.length;if(v===0)return f==="complex64"?[Z_(J_(h)[0],0,f)]:f==="bool"?[qfe(h[0])]:[h[0].toString()];if(v===1){if(y>qY){var b=Q_*g,w=Array.from(h.slice(0,b)),x=Array.from(h.slice((y-Q_)*g,y*g));return f==="complex64"&&(w=J_(w),x=J_(x)),["["+w.map(function(U,B){return Z_(U,p[B],f)}).join(", ")+", ..., "+x.map(function(U,B){return Z_(U,p[y-Q_+B],f)}).join(", ")+"]"]}return["["+(f==="complex64"?J_(h):Array.from(h)).map(function(U,B){return Z_(U,p[B],f)}).join(", ")+"]"]}var S=c.slice(1),E=d.slice(1),A=d[0]*g,k=[];if(y>qY){for(var T=0;T<Q_;T++){var O=(F=T*A)+A;k.push.apply(k,l(h.slice(F,O),S,f,E,p,!1))}for(k.push("..."),T=y-Q_;T<y;T++)O=(F=T*A)+A,k.push.apply(k,l(h.slice(F,O),S,f,E,p,T===y-1))}else for(T=0;T<y;T++){var F;O=(F=T*A)+A,k.push.apply(k,l(h.slice(F,O),S,f,E,p,T===y-1))}var I=v===2?",":"";for(k[0]="["+k[0]+I,T=1;T<k.length-1;T++)k[T]=" "+k[T]+I;var R=`,
`;for(T=2;T<v;T++)R+=`
`;return k[k.length-1]=" "+k[k.length-1]+"]"+(m?"":R),k}(n,e,t,i,a),u=["Tensor"];return r&&(u.push("  dtype: "+t),u.push("  rank: "+o),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function Z_(n,e,t){return X0(Array.isArray(n)?parseFloat(n[0].toFixed(rM))+" + "+parseFloat(n[1].toFixed(rM))+"j":HI(n)?"'"+n+"'":t==="bool"?qfe(n):parseFloat(n.toFixed(rM)).toString(),e)}function qfe(n){return n===0?"false":"true"}function J_(n){for(var e=[],t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}var mE=function(){function n(e,t,r){var i=this;if(this.dtype=t,this.shape=e.slice(),this.size=Qt(e),r!=null){var a=r.length;Pe(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+i.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||pE(t,this.size),this.strides=Au(e)}return n.prototype.set=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),Pe(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"});var a=this.locToIndex(r);this.values[a]=e},n.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length===0&&(e=[0]);for(var r=0,i=0,a=e;i<a.length;i++){var o=a[i];if(o<0||o>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},n.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var t=e[e.length-1],r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t},n.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return Nf().makeTensor(this.values,this.shape,this.dtype)},n}(),Nf=null,dt=null,Vfe=null,cr=function(){function n(e,t,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Qt(e),this.strides=Au(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),Pe(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},n.prototype.as3D=function(e,t,r){return this.throwIfDisposed(),this.reshape([e,t,r])},n.prototype.as4D=function(e,t,r,i){return this.throwIfDisposed(),this.reshape([e,t,r,i])},n.prototype.as5D=function(e,t,r,i,a){return this.throwIfDisposed(),this.reshape([e,t,r,i,a])},n.prototype.asType=function(e){return this.throwIfDisposed(),dt.cast(this,e)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return Jt(this,void 0,void 0,function(){var e;return en(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,dt.buffer(this.shape,this.dtype,e)]}})})},n.prototype.bufferSync=function(){return dt.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return Jt(this,void 0,void 0,function(){var e;return en(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,UU(this.shape,e)]}})})},n.prototype.arraySync=function(){return UU(this.shape,this.dataSync())},n.prototype.data=function(){return Jt(this,void 0,void 0,function(){var e,t;return en(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Nf().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:t=r.sent();try{return[2,t.map(function(i){return gE(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},n.prototype.dataSync=function(){this.throwIfDisposed();var e=Nf().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(t){return gE(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},n.prototype.bytes=function(){return Jt(this,void 0,void 0,function(){var e;return en(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Nf().read(this.dataId)];case 1:return e=t.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},n.prototype.dispose=function(){this.isDisposed||(Nf().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(e){return e===void 0&&(e=!1),dt.print(this,e)},n.prototype.reshape=function(e){return this.throwIfDisposed(),dt.reshape(this,e)},n.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},n.prototype.expandDims=function(e){return e===void 0&&(e=0),dt.expandDims(this,e)},n.prototype.cumsum=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1),dt.cumsum(this,e,t,r)},n.prototype.squeeze=function(e){return this.throwIfDisposed(),dt.squeeze(this,e)},n.prototype.clone=function(){return this.throwIfDisposed(),dt.clone(this)},n.prototype.toString=function(e){return e===void 0&&(e=!1),Y9e(this.dataSync(),this.shape,this.dtype,e)},n.prototype.gather=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),dt.gather(this,e,t)},n.prototype.matMul=function(e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),dt.matMul(this,e,t,r)},n.prototype.dot=function(e){return this.throwIfDisposed(),dt.dot(this,e)},n.prototype.norm=function(e,t,r){return e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),dt.norm(this,e,t,r)},n.prototype.slice=function(e,t){return this.throwIfDisposed(),dt.slice(this,e,t)},n.prototype.reverse=function(e){return this.throwIfDisposed(),dt.reverse(this,e)},n.prototype.concat=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),e instanceof n&&(e=[e]),dt.concat([this].concat(e),t)},n.prototype.split=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),dt.split(this,e,t)},n.prototype.stack=function(e,t){return t===void 0&&(t=0),dt.stack([this,e],t)},n.prototype.unstack=function(e){return e===void 0&&(e=0),dt.unstack(this,e)},n.prototype.batchNormalization=function(e,t,r,i,a){return r===void 0&&(r=.001),Vfe("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,a,i,r)},n.prototype.all=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),dt.all(this,e,t)},n.prototype.any=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),dt.any(this,e,t)},n.prototype.logSumExp=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),dt.logSumExp(this,e,t)},n.prototype.sum=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),dt.sum(this,e,t)},n.prototype.prod=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),dt.prod(this,e,t)},n.prototype.mean=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),dt.mean(this,e,t)},n.prototype.min=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),dt.min(this,e,t)},n.prototype.max=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),dt.max(this,e,t)},n.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),dt.argMin(this,e)},n.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),dt.argMax(this,e)},n.prototype.cast=function(e){return this.throwIfDisposed(),dt.cast(this,e)},n.prototype.addStrict=function(e){return this.throwIfDisposed(),dt.addStrict(this,e)},n.prototype.atan2=function(e){return this.throwIfDisposed(),dt.atan2(this,e)},n.prototype.sub=function(e){return this.throwIfDisposed(),dt.sub(this,e)},n.prototype.subStrict=function(e){return this.throwIfDisposed(),dt.subStrict(this,e)},n.prototype.pow=function(e){return this.throwIfDisposed(),dt.pow(this,e)},n.prototype.powStrict=function(e){return this.throwIfDisposed(),dt.powStrict(this,e)},n.prototype.mul=function(e){return this.throwIfDisposed(),dt.mul(this,e)},n.prototype.mulStrict=function(e){return this.throwIfDisposed(),dt.mulStrict(this,e)},n.prototype.floorDiv=function(e){return this.throwIfDisposed(),dt.floorDiv(this,e)},n.prototype.divStrict=function(e){return this.throwIfDisposed(),dt.divStrict(this,e)},n.prototype.minimum=function(e){return this.throwIfDisposed(),dt.minimum(this,e)},n.prototype.minimumStrict=function(e){return this.throwIfDisposed(),dt.minimumStrict(this,e)},n.prototype.maximum=function(e){return this.throwIfDisposed(),dt.maximum(this,e)},n.prototype.maximumStrict=function(e){return this.throwIfDisposed(),dt.maximumStrict(this,e)},n.prototype.mod=function(e){return this.throwIfDisposed(),dt.mod(this,e)},n.prototype.modStrict=function(e){return this.throwIfDisposed(),dt.modStrict(this,e)},n.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),dt.squaredDifferenceStrict(this,e)},n.prototype.notEqual=function(e){return this.throwIfDisposed(),dt.notEqual(this,e)},n.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),dt.notEqualStrict(this,e)},n.prototype.less=function(e){return this.throwIfDisposed(),dt.less(this,e)},n.prototype.lessStrict=function(e){return this.throwIfDisposed(),dt.lessStrict(this,e)},n.prototype.equal=function(e){return this.throwIfDisposed(),dt.equal(this,e)},n.prototype.equalStrict=function(e){return this.throwIfDisposed(),dt.equalStrict(this,e)},n.prototype.lessEqual=function(e){return this.throwIfDisposed(),dt.lessEqual(this,e)},n.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),dt.lessEqualStrict(this,e)},n.prototype.greater=function(e){return this.throwIfDisposed(),dt.greater(this,e)},n.prototype.greaterStrict=function(e){return this.throwIfDisposed(),dt.greaterStrict(this,e)},n.prototype.greaterEqual=function(e){return this.throwIfDisposed(),dt.greaterEqual(this,e)},n.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),dt.greaterEqualStrict(this,e)},n.prototype.logicalAnd=function(e){return this.throwIfDisposed(),dt.logicalAnd(this,e)},n.prototype.logicalOr=function(e){return this.throwIfDisposed(),dt.logicalOr(this,e)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),dt.logicalNot(this)},n.prototype.logicalXor=function(e){return this.throwIfDisposed(),dt.logicalXor(this,e)},n.prototype.where=function(e,t){return this.throwIfDisposed(),dt.where(e,this,t)},n.prototype.neg=function(){return this.throwIfDisposed(),dt.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),dt.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),dt.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),dt.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),dt.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),dt.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),dt.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),dt.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),dt.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),dt.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),dt.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),dt.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),dt.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),dt.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),dt.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),dt.abs(this)},n.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),dt.clipByValue(this,e,t)},n.prototype.relu=function(){return this.throwIfDisposed(),dt.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),dt.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),dt.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),dt.selu(this)},n.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),dt.leakyRelu(this,e)},n.prototype.prelu=function(e){return this.throwIfDisposed(),dt.prelu(this,e)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),dt.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),dt.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),dt.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),dt.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),dt.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),dt.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),dt.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),dt.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),dt.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),dt.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),dt.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),dt.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),dt.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),dt.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),dt.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),dt.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),dt.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),dt.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),dt.round(this)},n.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),dt.step(this,e)},n.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),dt.softmax(this,e)},n.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),dt.logSoftmax(this,e)},n.prototype.resizeBilinear=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),dt.image.resizeBilinear(this,e,t)},n.prototype.resizeNearestNeighbor=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),dt.image.resizeNearestNeighbor(this,e,t)},n.prototype.conv1d=function(e,t,r,i,a,o){return i===void 0&&(i="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),dt.conv1d(this,e,t,r,i,a,o)},n.prototype.conv2d=function(e,t,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),dt.conv2d(this,e,t,r,i,a,o)},n.prototype.conv2dTranspose=function(e,t,r,i,a){return this.throwIfDisposed(),dt.conv2dTranspose(this,e,t,r,i,a)},n.prototype.depthwiseConv2D=function(e,t,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),dt.depthwiseConv2d(this,e,t,r,i,a,o)},n.prototype.separableConv2d=function(e,t,r,i,a,o){return a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),dt.separableConv2d(this,e,t,r,i,a,o)},n.prototype.avgPool=function(e,t,r,i){return this.throwIfDisposed(),dt.avgPool(this,e,t,r,i)},n.prototype.maxPool=function(e,t,r,i){return this.throwIfDisposed(),dt.maxPool(this,e,t,r,i)},n.prototype.localResponseNormalization=function(e,t,r,i){return e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),i===void 0&&(i=.5),dt.localResponseNormalization(this,e,t,r,i)},n.prototype.pool=function(e,t,r,i,a){return this.throwIfDisposed(),dt.pool(this,e,t,r,i,a)},n.prototype.variable=function(e,t,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Nf().makeVariable(this,e,t,r)},n.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),dt.unsortedSegmentSum(this,e,t)},n.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),dt.batchToSpaceND(this,e,t)},n.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),dt.spaceToBatchND(this,e,t)},n.prototype.topk=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!0),this.throwIfDisposed(),dt.topk(this,e,t)},n.prototype.stridedSlice=function(e,t,r,i,a,o,s,u){return i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),dt.stridedSlice(this,e,t,r,i,a,o,s,u)},n.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),dt.depthToSpace(this,e,t)},n.prototype.fft=function(){return this.throwIfDisposed(),dt.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),dt.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),dt.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),dt.spectral.irfft(this)},n}();Object.defineProperty(cr,Symbol.hasInstance,{value:function(n){return!!n&&n.dataId!=null&&n.shape!=null&&n.dtype!=null}});var VY,BU,zU,WU,jU,uO=function(n){function e(t,r,i,a){var o=n.call(this,t.shape,t.dtype,t.dataId,a)||this;return o.trainable=r,o.name=i,o}return Sh(e,n),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!ts(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");Nf().disposeTensor(this),this.dataId=t.dataId,Nf().incRef(this,null)},e.prototype.dispose=function(){Nf().disposeVariable(this),this.isDisposedInternal=!0},e}(cr);Object.defineProperty(uO,Symbol.hasInstance,{value:function(n){return n instanceof cr&&n.assign!=null&&n.assign instanceof Function}}),function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"}(VY||(VY={})),function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"}(BU||(BU={})),function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"}(zU||(zU={})),function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"}(WU||(WU={})),function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"}(jU||(jU={}));var Q9e={float32:WU,int32:BU,bool:zU,complex64:jU};function js(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error("Can not upcast "+n+" with "+e)}return Q9e[n][e]}function iM(n){return js(n,"int32")}function ji(n,e){if(n.dtype===e.dtype)return[n,e];var t=js(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function Hfe(n,e){Pe(n.dtype===e.dtype,function(){return"The dtypes of the first("+n.dtype+") and second("+e.dtype+") input must match"})}function Jz(n){var e=[];return function t(r,i,a){if(r!=null){if(r instanceof cr)return void i.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,s=r;for(var u in s){var l=s[u];a.has(l)||(a.add(l),t(l,i,a))}}}}(n,e,new Set),e}var aM,mp=Object.freeze({makeTypesMatch:ji,assertTypesMatch:Hfe,isTensorInList:function(n,e){return e.some(function(t){return t.id===n.id})},getTensorsInContainer:Jz}),HY=function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},n}(),Z9e=function(){function n(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new HY}return n.prototype.ready=function(){return Jt(this,void 0,void 0,function(){var e,t,r;return en(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),t=0,i.label=1;case 1:return t<e.length?(r=e[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(n.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},n.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},n.prototype.registerBackend=function(e,t,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:r},!0)},n.prototype.setBackend=function(e){return Jt(this,void 0,void 0,function(){var t,r,i;return en(this,function(a){switch(a.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return i=a.sent(),[3,3];case 2:i=r,a.label=3;case 3:if(!i)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new X9e(this.backendInstance),[2,!0]}})})},n.prototype.setupRegisteredKernels=function(){var e=this;jY(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(e.backendInstance)})},n.prototype.disposeRegisteredKernels=function(e){var t=this;jY(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[e])})},n.prototype.initializeBackend=function(e){var t=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var a=++this.pendingBackendInitId,o=i.then(function(s){return!(a<t.pendingBackendInitId)&&(t.registry[e]=s,t.pendingBackendInit=null,!0)}).catch(function(s){return!(a<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,r){return e.registryFactory[r].priority-e.registryFactory[t].priority})},n.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var r=e[t],i=this.initializeBackend(r),a=i.success,o=i.asyncInit;if(o||a)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(e,t){var r=this.state.tensorInfo.get(t),i=r.backend,a=this.readSync(t);i.disposeData(t),r.backend=e,e.move(t,a,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(e,t){var r,i=this,a=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun(function(){return i.startScope(a)},function(){return i.endScope(r)},function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},n.prototype.scopedRun=function(e,t,r){e();try{var i=r();return t(),i}catch(a){throw t(),a}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[t],function(i){return{x:function(){return i.toFloat()}}},[],{}),t},n.prototype.runKernel=function(e,t,r,i,a){return this.runKernelFunc(null,t,null,e,r,i,a)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(e,t,r){var i=this.backend.numDataIds(),a=0;r.forEach(function(u){a+=u.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-t-a-o;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+e+"'")},n.prototype.runKernelFunc=function(e,t,r,i,a,o,s){var u,l=this,h=[],c=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var f,d=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=Ofe(i,this.backendName);if(g!=null)f=function(){var v=l.backend.numDataIds();m=g.kernelFunc({inputs:t,attrs:a,backend:l.backend});var b=Array.isArray(m)?m:[m];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,v,b);var w=b.map(function(E){var A=E.dataId,k=E.shape,T=E.dtype;return l.makeTensorFromDataId(A,k,T)});if(c){var x=l.getTensorsForGradient(i,t,w);if(x==null){s==null&&(s=[]);var S=w.filter(function(E,A){return s[A]});x=(o||[]).slice().concat(S)}h=l.saveTensorsForBackwardMode(x)}return w};else{var y=function(v){c&&(h=v.map(function(b){return l.keep(l.clone(b))}))};f=function(){var v=l.backend.numDataIds();m=l.tidy(function(){return e(l.backend,y)});var b=Array.isArray(m)?m:[m];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,v,b),b}}return this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(i,t,function(){return f()}):f()}),c&&this.addTapeNode(i,t,u,r,h,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-d,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(v){return t[v].shape}),outputShapes:u.map(function(v){return v.shape})}),Array.isArray(m)?u:u[0]},n.prototype.saveTensorsForBackwardMode=function(e){var t=this;return e.map(function(r){return t.keep(t.clone(r))})},n.prototype.getTensorsForGradient=function(e,t,r){var i=WY(e);if(i!=null){var a=i.inputsToSave||[],o=i.outputsToSave||[],s=void 0;i.saveAllInputs?(Pe(Array.isArray(t),function(){return"saveAllInputs is true, expected inputs to be an array."}),s=Object.keys(t).map(function(l){return t[l]})):s=a.map(function(l){return t[l]});var u=r.filter(function(l,h){return o[h]});return s.concat(u)}return null},n.prototype.makeTensor=function(e,t,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var a=e;r==="string"&&HI(e[0])&&(a=e.map(function(h){return $fe(h)}));var o=i.write(a,t,r),s=new cr(t,r,o,this.nextTensorId());if(this.incRef(s,i),r==="string"){var u=this.state.tensorInfo.get(o),l=zfe(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},n.prototype.makeTensorFromDataId=function(e,t,r,i){var a=new cr(t,r=r||"float32",e,this.nextTensorId());return this.incRef(a,i),a},n.prototype.makeVariable=function(e,t,r,i){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.asType(i));var a=new uO(e,t,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},n.prototype.incRef=function(e,t){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*Xz(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof uO||this.track(e)},n.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},n.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},n.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},n.prototype.profile=function(e){return Jt(this,void 0,void 0,function(){var t,r;return en(this,function(i){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(a){return a.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},n.prototype.addTapeNode=function(e,t,r,i,a,o){var s=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:a},l=WY(e);l!=null&&(i=l.gradFunc),i!=null&&(u.gradient=function(h){return h=h.map(function(c,f){if(c==null){var d=r[f],p=Sx(d.size,d.dtype);return s.makeTensor(p,d.shape,d.dtype)}return c}),i(h.length>1?h:h[0],a,o)}),this.state.activeTape.push(u)},n.prototype.keep=function(e){return e.kept=!0,e},n.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},n.prototype.endScope=function(e){for(var t=this,r=Jz(e),i=new Set(r.map(function(u){return u.id})),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||i.has(o.id)||o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||t.track(u)})},n.prototype.gradients=function(e,t,r,i){var a=this;if(i===void 0&&(i=!1),Pe(t.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",e)});Pe(o instanceof cr,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,h){for(var c={},f={},d=0;d<l.length;d++)c[l[d].id]=!0;for(d=0;d<u.length;d++){var p=(S=u[d]).inputs;for(var m in p){for(var g=p[m],y=!1,v=0;v<l.length;v++)if(c[g.id]){S.outputs.forEach(function(T){return c[T.id]=!0}),y=!0,f[S.id]=!0;break}if(y)break}}var b={};b[h.id]=!0;var w={};for(d=u.length-1;d>=0;d--)for(p=(S=u[d]).inputs,v=0;v<S.outputs.length;v++)if(b[S.outputs[v].id]){for(var m in p)b[p[m].id]=!0,w[S.id]=!0;break}var x=[];for(d=0;d<u.length;d++){var S;if(f[(S=u[d]).id]&&w[S.id]){var E={};for(var m in S.inputs){var A=S.inputs[m];c[A.id]&&(E[m]=A)}var k=Object.assign({},S);k.inputs=E,k.outputs=S.outputs,x.push(k)}}return x}(this.state.activeTape,t,o);if(!i&&s.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,h={};h[o.id]=r??(u=o.shape,l=Yz(Qt(u),"float32"),Ve.makeTensor(l,u,"float32")),function(f,d,p){for(var m=function(y){var v=d[y],b=[];if(v.outputs.forEach(function(E){var A=f[E.id];A!=null?b.push(A):b.push(null)}),v.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+v.kernelName+".");var w=v.gradient(b),x=function(E){if(!(E in w))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(w)+".");var A=p(function(){return w[E]()});if(A.dtype!=="float32")throw new Error("Error in gradient for op "+v.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+A.dtype+"'");var k=v.inputs[E];if(!ts(A.shape,k.shape))throw new Error("Error in gradient for op "+v.kernelName+". The gradient of input '"+E+"' has shape '"+A.shape+"', which does not match the shape of the input '"+k.shape+"'");if(f[k.id]==null)f[k.id]=A;else{var T=f[k.id];f[k.id]=T.add(A),T.dispose()}};for(var S in v.inputs)x(S)},g=d.length-1;g>=0;g--)m(g)}(h,s,function(f){return a.tidy(f)});var c=t.map(function(f){return h[f.id]});return a.state.gradientDepth===0&&(a.state.activeTape.forEach(function(f){for(var d=0,p=f.saved;d<p.length;d++)p[d].dispose()}),a.state.activeTape=null),{value:o,grads:c}})},n.prototype.customGrad=function(e){var t=this;return Pe(aO(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];Pe(i.every(function(s){return s instanceof cr}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return i.forEach(function(s,u){o[u]=s}),t.runKernelFunc(function(s,u){return Pe((r=e.apply(void 0,i.concat([u]))).value instanceof cr,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),Pe(aO(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(s,u){var l=r.gradFunc(s,u),h=Array.isArray(l)?l:[l];Pe(h.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),Pe(h.every(function(f){return f instanceof cr}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var c={};return h.forEach(function(f,d){c[d]=function(){return f}}),c})}},n.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},n.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},n.prototype.time=function(e){return Jt(this,void 0,void 0,function(){var t,r;return en(this,function(i){switch(i.label){case 0:return t=rh(),[4,this.backend.time(e)];case 1:return(r=i.sent()).wallMs=rh()-t,[2,r]}})})},n.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new HY,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n}(),Ve=function(){var n=function(){if(aM==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}aM=t}return aM}();if(n._tfengine==null){var e=new V9e(n);n._tfengine=new Z9e(e)}return function(t){Nfe=t}(n._tfengine.ENV),Nf=function(){return n._tfengine},n._tfengine}();function Gfe(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Cd=ct();Cd.registerFlag("DEBUG",function(){return!1},function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Cd.registerFlag("IS_BROWSER",function(){return Gfe()}),Cd.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Cd.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Cd.registerFlag("PROD",function(){return!1}),Cd.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Cd.getBool("DEBUG")}),Cd.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Cd.registerFlag("IS_TEST",function(){return!1});var yE,ml,hl,gv={},sM={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function J9e(n,e){gv[n]=e}function $f(n){n in gv||(gv[n]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete gv[t]},!1),t===1?r.getContext("webgl",sM)||r.getContext("experimental-webgl",sM):r.getContext("webgl2",sM)}(n));var e=gv[n];return e.isContextLost()?(delete gv[n],$f(n)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),gv[n])}function GI(n,e){return[e,n]}function OC(n){var e=Qt(n);return iO(Math.ceil(e/4))}function FD(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function eW(n,e){var t,r,i,a,o,s,u,l,h,c=n;return ct().getNumber("WEBGL_VERSION")===2?(t=c.R32F,r=c.R16F,i=c.RGBA16F,a=c.RGBA32F,o=c.RED,s=4,u=1,l=c.HALF_FLOAT,h=c.FLOAT):(t=n.RGBA,r=n.RGBA,i=n.RGBA,a=c.RGBA,o=n.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,h=n.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:h}}function un(n,e,t){var r=t();return e&&function(i){var a=i.getError();if(a!==i.NO_ERROR)throw new Error("WebGL Error: "+r7e(i,a))}(n),r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(yE||(yE={})),function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"}(ml||(ml={})),function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(hl||(hl={}));var e7e=596e-10,t7e=65504;function n7e(n){return!!(ct().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||e7e<Math.abs(n)&&Math.abs(n)<t7e)}function r7e(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Tk(n,e,t){return Up(n,e,function(){return n.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function i7e(n,e,t){var r=Up(n,e,function(){return n.createShader(n.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(un(n,e,function(){return n.shaderSource(r,t)}),un(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function a7e(n,e,t){var r=Up(n,e,function(){return n.createShader(n.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(un(n,e,function(){return n.shaderSource(r,t)}),un(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw function(i,a){var o=s7e.exec(a);if(o==null)return console.log("Couldn't parse line number in error: "+a),void console.log(i);for(var s=+o[1],u=i.split(`
`),l=u.length.toString().length+2,h=u.map(function(g,y){return X0((y+1).toString(),l)+g}),c=0,f=0;f<h.length;f++)c=Math.max(h[f].length,c);var d=h.slice(0,s-1),p=h.slice(s-1,s),m=h.slice(s);console.log(d.join(`
`)),console.log(a.split(`
`)[0]),console.log("%c "+X0(p[0],c),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(t,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var oM,uM,s7e=/ERROR: [0-9]+:([0-9]+):/g;function o7e(n,e){return Up(n,e,function(){return n.createProgram()},"Unable to create WebGLProgram.")}function u7e(n,e,t){if(un(n,e,function(){return n.linkProgram(t)}),n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function lM(n,e,t){if(un(n,e,function(){return n.validateProgram(t)}),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function l7e(n,e,t){var r=Up(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return un(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),un(n,e,function(){return n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function c7e(n,e,t){var r=Up(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return un(n,e,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)}),un(n,e,function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function h7e(n,e){return Up(n,e,function(){return n.createTexture()},"Unable to create WebGLTexture.")}function f7e(n,e){var t=ct().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){var r="["+n+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t)throw r="["+n+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function d7e(n,e){return Up(n,e,function(){return n.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function GY(n,e,t,r,i,a,o,s){var u=n.getAttribLocation(t,r);return u!==-1&&(un(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,i)}),un(n,e,function(){return n.vertexAttribPointer(u,a,n.FLOAT,!1,o,s)}),un(n,e,function(){return n.enableVertexAttribArray(u)}),!0)}function p7e(n,e,t,r){b7e(n,r),un(n,e,function(){return n.activeTexture(n.TEXTURE0+r)}),un(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)})}function g7e(n,e,t,r){return Up(n,e,function(){return n.getUniformLocation(t,r)},'uniform "'+r+'" not present in program.')}function m7e(n,e,t){return n.getUniformLocation(e,t)}function y7e(n,e,t,r,i,a){un(n,e,function(){return p7e(n,e,r,a)}),un(n,e,function(){return n.uniform1i(i,a)})}function cM(n,e,t,r){un(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)}),un(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0)})}function XY(n,e,t){un(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,t)}),un(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)})}function Dk(n){var e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+v7e(n,e))}function v7e(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Up(n,e,t,r){var i=un(n,e,function(){return t()});if(i==null)throw new Error(r);return i}function b7e(n,e){var t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function lO(n,e){return e===void 0&&(e=2),Qt(n.slice(0,n.length-e))}function cO(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function hM(n){var e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[lO(n)].concat(cO(n))),e}function w7e(n,e){var t;e===void 0&&(e=!1);var r=ct().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(n=n.map(function(l,h){return h>=n.length-2?Gz(n[h]):n[h]})).length===1&&(n=[2,n[0]])),n.length!==2){var i=qg(n);n=i.newShape}var a=Qt(n);if(n.length<=1&&a<=r)return[1,a];if(n.length===2&&n[0]<=r&&n[1]<=r)return n;if(n.length===3&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(n.length===3&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(e){var o=lO(n),s=2,u=2;return n.length&&(s=(t=cO(n))[0],u=t[1]),iO(a=o*(s/2)*(u/2)).map(function(l){return 2*l})}return iO(a)}function Ak(n){return n%2==0}function kk(n,e){if(ts(n=n.slice(-2),e=e.slice(-2))||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){var t=n.slice(-1)[0],r=e.slice(-1)[0];if(t===r||Ak(t)&&Ak(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&Ak(n[0])&&Ak(e[0])}function x7e(n){if(oM==null){var e=$f(n);oM=e.getParameter(e.MAX_TEXTURE_SIZE)}return oM}function _7e(n){if(uM==null){var e=$f(n);uM=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,uM)}function S7e(n){if(n===0)return 0;var e=$f(n);return lc(e,"EXT_disjoint_timer_query_webgl2")&&n===2?2:lc(e,"EXT_disjoint_timer_query")?1:0}function lc(n,e){return n.getExtension(e)!=null}function KY(n){try{if($f(n)!=null)return!0}catch{return!1}return!1}function C7e(n){if(n===0)return!1;var e=$f(n);if(n===1){if(!lc(e,"OES_texture_float"))return!1}else if(!lc(e,"EXT_color_buffer_float"))return!1;return $U(e)}function E7e(n){if(n===0)return!1;var e=$f(n);if(n!==1){if(lc(e,"EXT_color_buffer_float"))return $U(e);if(lc(e,"EXT_color_buffer_half_float")){var t=e.getExtension("EXT_color_buffer_half_float");return function(r,i){var a=eW(r,i),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,a.internalFormatHalfFloat,1,1,0,a.textureFormatFloat,a.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(s),u}(e,t)}return!1}return!!lc(e,"OES_texture_float")&&!!lc(e,"WEBGL_color_buffer_float")&&$U(e)}function $U(n){var e=eW(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);var i=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(r),i}function T7e(n){return n===2&&$f(n).fenceSync!=null}var Sn=ct();function tW(n){ct().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function YY(){return Ve.memory()}function Ze(n,e){return Ve.tidy(n,e)}function rr(n){Jz(n).forEach(function(e){return e.dispose()})}function kp(n){return Ve.keep(n)}function D7e(){return Ve.backend}function hO(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];ct().getBool("IS_TEST")||console.warn.apply(console,n)}function gy(n,e){var t=n;if(ch(n))return e==="string"?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(t)||ch(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&ct().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(a,o,s){if(s=s||[],!Array.isArray(a)&&!ch(a))return void Pe(o.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});Pe(o.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+a.length+" elements"}),Pe(a.length===o[0],function(){return"Element arr["+s.join("][")+"] should have "+o[0]+" elements, but has "+a.length+" elements"});for(var u=o.slice(1),l=0;l<a.length;++l)i(a[l],u,s.concat(l))}(n,r,[]),r}function QY(n,e,t,r){if(n!=null&&(n!=="numeric"&&n!==e||n==="numeric"&&e==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+n+" tensor, but got "+e+" tensor")}function Oe(n,e,t,r){if(r===void 0&&(r="numeric"),n instanceof cr)return QY(r,n.dtype,e,t),n;var i=_x(n);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),QY(r,i,e,t),n==null||!ch(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){var a=n==null?"null":n.constructor.name;throw new Error("Argument '"+e+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+a+"'")}var o=gy(n,i);ch(n)||Array.isArray(n)||(n=[n]);var s=i!=="string"?Kz(n,i,ct().getBool("DEBUG")):g1(n,[],!0);return Ve.makeTensor(s,o,i)}function fO(n,e,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+e+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return n.map(function(i,a){return Oe(i,e+"["+a+"]",t)},r)}function Xfe(n,e){for(var t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function A7e(n,e,t){for(var r=n.length+e.length,i=[],a=0,o=0,s=0;s<r;s++)t.indexOf(s)===-1?i.push(n[a++]):i.push(e[o++]);return i}function lo(n,e){for(var t=[],r=n.length,i=0;i<r;i++)e.indexOf(i)===-1&&t.push(n[i]);return[t,e.map(function(a){return n[a]})]}function Ou(n,e){return A7e(n,e.map(function(t){return 1}),e)}function cl(n,e,t){Pe(Xfe(e,t),function(){return n+" supports only inner-most axes for now. Got axes "+e+" and rank-"+t+" input."})}function qf(n,e){if(Xfe(n,e))return null;for(var t=[],r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(function(i){return t.push(i)}),t}function nW(n){return n.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function Vf(n,e){for(var t=[],r=e-n;r<e;++r)t.push(r);return t}function k7e(n,e){var t=n[0].length;n.forEach(function(i,a){Pe(i.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+t+")"})}),Pe(e>=0&&e<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var r=n[0];n.forEach(function(i,a){for(var o=0;o<t;o++)Pe(o===e||i[o]===r[o],function(){return"Error in concat"+t+"D: Shape of tensors["+a+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function Jw(n,e){for(var t=n[0].slice(),r=1;r<n.length;r++)t[e]+=n[r][e];return t}function $e(n){var e=Object.keys(n);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var t=e[0],r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];Ve.startScope(t);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Ve.endScope(s),s}catch(u){throw Ve.endScope(null),u}};return Object.defineProperty(i,"name",{value:t,configurable:!0}),i}Sn.registerFlag("HAS_WEBGL",function(){return Sn.getNumber("WEBGL_VERSION")>0}),Sn.registerFlag("WEBGL_VERSION",function(){return KY(2)?2:KY(1)?1:0}),Sn.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Sn.get("WEBGL_VERSION")===2}),Sn.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Sn.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Sn.registerFlag("WEBGL_PACK",function(){return Sn.getBool("HAS_WEBGL")}),Sn.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Sn.getBool("WEBGL_PACK")}),Sn.registerFlag("WEBGL_PACK_CLIP",function(){return Sn.getBool("WEBGL_PACK")}),Sn.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Sn.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Sn.getBool("WEBGL_PACK")}),Sn.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Sn.getBool("WEBGL_PACK")}),Sn.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Sn.getBool("WEBGL_PACK")}),Sn.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Sn.getBool("WEBGL_PACK")}),Sn.registerFlag("WEBGL_PACK_REDUCE",function(){return Sn.getBool("WEBGL_PACK")}),Sn.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Sn.getBool("WEBGL_PACK")}),Sn.registerFlag("WEBGL_CONV_IM2COL",function(){return Sn.getBool("WEBGL_PACK")}),Sn.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return x7e(Sn.getNumber("WEBGL_VERSION"))}),Sn.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return _7e(Sn.getNumber("WEBGL_VERSION"))}),Sn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var n=Sn.getNumber("WEBGL_VERSION");return n===0?0:S7e(n)}),Sn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Sn.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n}),Sn.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return C7e(Sn.getNumber("WEBGL_VERSION"))}),Sn.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Sn.getBool("WEBGL_FORCE_F16_TEXTURES")&&Sn.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Sn.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return E7e(Sn.getNumber("WEBGL_VERSION"))}),Sn.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return T7e(Sn.getNumber("WEBGL_VERSION"))}),Sn.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Sn.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),Vfe=tW;var xs=$e({complex_:function(n,e){var t=Oe(n,"real","complex"),r=Oe(e,"imag","complex");return Or(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),Ve.runKernelFunc(function(i){return i.complex(t,r)},{$real:t,$imag:r})}}),pl=$e({real_:function(n){var e=Oe(n,"input","real");return Ve.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),ih=$e({imag_:function(n){var e=Oe(n,"input","imag");return Ve.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function Na(n,e,t){return my(n,e,gy(n,t),t)}function my(n,e,t,r){if(r==null&&(r=_x(n)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ch(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Qz(e);var i=Qt(e),a=Qt(t);Pe(i===a,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+a});for(var o=0;o<t.length;++o){var s=t[o],u=o!==t.length-1||s!==Qt(e.slice(o));Pe(t[o]===e[o]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+e+"). "})}}return ch(n)||Array.isArray(n)||(n=[n]),e=e||t,n=r!=="string"?Kz(n,r,ct().getBool("DEBUG")):g1(n,[],!0),Ve.makeTensor(n,e,r)}function jt(n,e){if((ch(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ch(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return my(n,[],[],e)}function Ru(n,e){I1(n);var t=gy(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return my(n,null,t,e)}function Im(n,e,t){if(I1(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=gy(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return my(n,e,r,t)}function Kfe(n,e,t){if(I1(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=gy(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return my(n,e,r,t)}function mv(n,e,t){if(I1(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=gy(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return my(n,e,r,t)}function N7e(n,e,t){if(I1(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=gy(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return my(n,e,r,t)}function O7e(n,e,t){if(I1(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=gy(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return my(n,e=e||r,r,t)}function Yfe(n,e,t,r){return e===void 0&&(e=!0),Ve.makeVariable(n,e,t,r)}function Bp(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=Bp(n,"float32"),r=Lr(n,"float32");return xs(t,r)}var i=Yz(Qt(n),e);return Ve.makeTensor(i,n,e)}function Lr(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=Lr(n,"float32"),r=Lr(n,"float32");return xs(t,r)}var i=Sx(Qt(n),e);return Ve.makeTensor(i,n,e)}function PD(n,e,t){return Ve.runKernelFunc(function(r){return r.fill(n,e,t)},{})}function Qfe(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");return Ve.runKernelFunc(function(r){return r.linspace(n,e,t)},{})}function vE(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(n===e||n<e&&t<0||e<n&&t>1)return Lr([0],r);var i=Sx(Math.abs(Math.ceil((e-n)/t)),r);e<n&&t===1&&(t=-1),i[0]=n;for(var a=1;a<i.length;a++)i[a]=i[a-1]+t;return Ru(i,r)}var gc=$e({onesLike_:function(n){var e=Oe(n,"x","onesLike");if(e.dtype==="complex64"){var t=gc(pl(e)),r=ar(ih(e));return xs(t,r)}return Ve.runKernelFunc(function(i){return i.onesLike(e)},{x:e},function(i,a){return{x:function(){return ar(i)}}},"OnesLike")}}),ar=$e({zerosLike_:function(n){var e=Oe(n,"x","zerosLike");return Ve.runKernelFunc(function(t){return t.zerosLike(e)},{x:e},function(t,r){return{x:function(){return ar(t)}}},"ZerosLike")}}),Yo=$e({concat_:function(n,e){e===void 0&&(e=0),Pe(n.length>=1,function(){return"Pass at least one tensor to concat"});var t=fO(n,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),e=Ma(e,t[0].shape)[0];var r=Jw(t.map(function(s){return s.shape}),e);if(Qt(r)===0)return Na([],r);if((t=t.filter(function(s){return s.size>0})).length===1)return t[0];var i=t.map(function(s){return s.shape});k7e(i,e);var a=t,o={axis:e};return Ve.runKernelFunc(function(s){return s.concat(t,e)},a,function(s){var u=i.map(function(l){return l[e]});return Fm(s,u,e).map(function(l){return function(){return l}})},"Concat",o)}}),Zfe=$e({concat1d_:function(n){return Yo(n,0)}}),Jfe=$e({concat2d_:function(n,e){return Yo(n,e)}}),ede=$e({concat3d_:function(n,e){return Yo(n,e)}}),tde=$e({concat4d_:function(n,e){return Yo(n,e)}}),Fm=$e({split_:function(n,e,t){t===void 0&&(t=0);var r,i=Oe(n,"x","split");return t=Ma(t,i.shape)[0],typeof e=="number"?(Pe(i.shape[t]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[t]/e)):(Pe(i.shape[t]===e.reduce(function(a,o){return a+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),Ve.runKernelFunc(function(a){return a.split(i,r,t)},{$x:i},function(a){return{$x:function(){return Yo(a,t)}}})}});function Dn(n,e,t){return e===void 0&&(e="float32"),e=e||"float32",Qz(n),new mE(n,e,t)}function R7e(n,e){e===void 0&&(e=!1),console.log(n.toString(e))}var rW=$e({batchToSpaceND_:function(n,e,t){var r=Oe(n,"x","batchToSpaceND"),i=e.reduce(function(a,o){return a*o});return Pe(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),Pe(t.length===e.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+e.length}),Pe(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),Ve.runKernelFunc(function(a){return a.batchToSpaceND(r,e,t)},{$x:r},function(a){return{$x:function(){return a.spaceToBatchND(e,t)}}})}}),iW=$e({cast_:function(n,e){var t=Oe(n,"x","cast");if(!Ufe(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return Ve.runKernelFunc(function(i){return i.cast(t,e)},{x:t},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),I7e=$e({cumsum_:function(n,e,t,r){e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var i=Oe(n,"x","cumsum"),a=qf([e|=0],i.rank),o=i;a!=null&&(o=i.transpose(a));var s=Vf(1,i.rank)[0],u=Ve.runKernelFunc(function(l){return l.cumsum(o,s,t,r)},{permutedX:o},function(l){return{permutedX:function(){return l.cumsum(e,t,!r)}}});return a!=null&&(u=u.transpose(a)),u}}),nde=$e({depthToSpace_:function(n,e,t){t===void 0&&(t="NHWC");var r=Oe(n,"x","depthToSpace"),i=t==="NHWC"?r.shape[1]:r.shape[2],a=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];return Pe(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),Pe(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+` for depthToSpace with input shape
          `+r.shape}),Pe(o%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape}),Ve.runKernelFunc(function(s){return s.depthToSpace(r,e,t)},{$x:r})}}),oc=$e({expandDims_:function(n,e){e===void 0&&(e=0);var t=Oe(n,"x","expandDims",null);Pe(e<=t.rank,function(){return"Axis must be <= rank of the tensor"});var r=t.shape.slice();return e<0&&(Pe(-(t.rank+1)<=e,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),e=t.rank+e+1),r.splice(e,0,1),Df(t,r)}}),Df=$e({reshape_:function(n,e){var t=Oe(n,"x","reshape",null);e=Lfe(e,t.size),Pe(t.size===Qt(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return Ve.runKernelFunc(function(i){return i.reshape(t,e)},{x:t},function(i){return{x:function(){return i.reshape(t.shape)}}},"Reshape",r)}}),aW=$e({spaceToBatchND_:function(n,e,t){var r=Oe(n,"x","spaceToBatchND");return Pe(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),Pe(t.length===e.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+e.length}),Pe(r.shape.reduce(function(i,a,o){return o>0&&o<=e.length?i&&(a+t[o-1][0]+t[o-1][1])%e[o-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+e.toString()}),Ve.runKernelFunc(function(i){return i.spaceToBatchND(r,e,t)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(e,t)}}})}}),XI=$e({squeeze_:function(n,e){var t=Oe(n,"x","squeeze");return Df(t,qg(t.shape,e).newShape)}}),mh=$e({stack_:function(n,e){e===void 0&&(e=0);var t=fO(n,"tensors","stack");if(Pe(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(e);var r=t[0].rank,i=t[0].shape,a=t[0].dtype;Pe(e<=r,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(s){Or(i,s.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(s){Pe(a===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=t.map(function(s){return s.expandDims(e)});return Yo(o,e)}}),y1=$e({unstack_:function(n,e){e===void 0&&(e=0),e=e||0;var t=Oe(n,"x","unstack");Pe(e>=-t.shape.length&&e<t.shape.length,function(){return"Axis = "+e+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),e<0&&(e+=t.shape.length);var r={axis:e};return Ve.runKernelFunc(function(i){return i.unstack(t,e)},{x:t},function(i){return{x:function(){return mh(i,e)}}},"Unpack",r)}}),rde=function(n,e){return Jt(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,h,c;return en(this,function(f){switch(f.label){case 0:return t=Oe(n,"x","setdiff1d"),r=Oe(e,"y","setdiff1d"),Pe(t.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."}),Pe(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),Pe(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,t.data()];case 1:return i=f.sent(),[4,r.data()];case 2:for(a=f.sent(),o=new Set(a),s=0,h=0;h<i.length;h++)o.has(i[h])||s++;for(u=new mE([s],t.dtype),l=new mE([s],"int32"),h=0,c=0;h<i.length;h++)o.has(i[h])||(u.values[c]=i[h],l.values[c]=h,c++);return[2,[u.toTensor(),l.toTensor()]]}})})};function dO(n,e,t,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(n[0]/t),i=i.concat(n.slice(1));else{i=i.concat(n[0]);for(var a=e.length,o=0;o<a;++o)i=i.concat([n[o+1]/e[o],e[o]]);i=i.concat(n.slice(a+1))}return i}function pO(n,e,t){t===void 0&&(t=!0);var r=[];if(t){r.push(e);for(var i=e+1;i<n;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<n;++i)i>=2*e+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function gO(n,e,t,r){r===void 0&&(r=!0);var i=[];r?i.push(n[0]/t):i.push(n[0]*t);for(var a=1;a<n.length;++a)a<=e.length?r?i.push(e[a-1]*n[a]):i.push(n[a]/e[a-1]):i.push(n[a]);return i}function ide(n,e){for(var t=[0],r=0;r<e;++r)t.push(n[r][0]);return t}function ade(n,e,t){for(var r=n.slice(0,1),i=0;i<t;++i)r.push(n[i+1]-e[i][0]-e[i][1]);return r}var sde="Add",KI="Div",YI="SquaredDifference",ode="BroadcastTo",ude="OneHot",lde="Identity",cde="Tile",hde="PadV2",qn=$e({add_:function(n,e){var t,r=Oe(n,"a","add"),i=Oe(e,"b","add");t=ji(r,i),r=t[0],i=t[1];var a={a:r,b:i};return Ve.runKernelFunc(function(o,s){var u=o.add(r,i);return s([r,i]),u},a,null,sde)}});function Nm(n,e){for(var t=n.length,r=[],i=0;i<t;i++){var a=t-1-i,o=n[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function Ja(n,e){for(var t=[],r=0;r<e.length;r++){var i=n[n.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&t.unshift(a)}return t}function Jn(n,e){for(var t=[],r=Math.max(n.length,e.length),i=0;i<r;i++){var a=n[n.length-i-1];a==null&&(a=1);var o=e[e.length-i-1];if(o==null&&(o=1),a===1)t.unshift(o);else if(o===1)t.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+n+" and "+e+".");t.unshift(a)}}return t}var v1=$e({abs_:function(n){var e=Oe(n,"x","abs");return e.dtype==="complex64"?Ve.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):Ve.runKernelFunc(function(t,r){var i=t.abs(e);return r([e]),i},{x:e},function(t,r){var i=r[0];return{x:function(){return t.mul(i.toFloat().step(-1))}}},"Abs")}}),fde=$e({acos_:function(n){var e=Oe(n,"x","acos");return Ve.runKernelFunc(function(t,r){var i=t.acos(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(jt(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),dde=$e({acosh_:function(n){var e=Oe(n,"x","acosh");return Ve.runKernelFunc(function(t,r){var i=t.acosh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),pde=$e({asin_:function(n){var e=Oe(n,"x","asin");return Ve.runKernelFunc(function(t,r){var i=t.asin(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(jt(1).sub(i.toFloat().square()).sqrt())}}})}}),gde=$e({asinh_:function(n){var e=Oe(n,"x","asinh");return Ve.runKernelFunc(function(t,r){var i=t.asinh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(jt(1).add(i.toFloat().square()).sqrt())}}})}}),mde=$e({atan_:function(n){var e=Oe(n,"x","atan");return Ve.runKernelFunc(function(t,r){var i=t.atan(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.toFloat().square().add(1))}}})}}),yde=$e({atanh_:function(n){var e=Oe(n,"x","atanh");return Ve.runKernelFunc(function(t,r){var i=t.atanh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(jt(1).sub(i.toFloat().square()))}}})}}),vde=$e({ceil_:function(n){var e=Oe(n,"x","ceil");return Ve.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return ar(t)}}})}}),Iu=$e({clipByValue_:function(n,e,t){var r=Oe(n,"x","clipByValue");Pe(e<=t,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+t+")."});var i=[r],a={min:e,max:t};return Ve.runKernelFunc(function(o,s){var u=o.clip(r,e,t);return s([r]),u},{x:r},function(o,s){var u=s[0];return{x:function(){return o.where(u.greaterEqual(e).logicalAnd(u.lessEqual(t)),ar(o))}}},"ClipByValue",a,i)}}),bde=$e({cos_:function(n){var e=Oe(n,"x","cos"),t=[e];return Ve.runKernelFunc(function(r,i){var a=r.cos(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return a.toFloat().sin().neg().mul(r)}}},"Cos",{},t)}}),wde=$e({cosh_:function(n){var e=Oe(n,"x","cosh");return Ve.runKernelFunc(function(t,r){var i=t.cosh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(t)}}})}}),xde=$e({erf_:function(n){var e=Oe(n,"x","erf");return Pe(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),Ve.runKernelFunc(function(t,r){var i=t.erf(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),_de=$e({exp_:function(n){var e=Oe(n,"x","exp");return Ve.runKernelFunc(function(t,r){var i=t.exp(e);return r([i]),i},{x:e},function(t,r){return{x:function(){return t.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),Sde=$e({expm1_:function(n){var e=Oe(n,"x","expm1");return Ve.runKernelFunc(function(t,r){var i=t.expm1(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.exp())}}})}}),sW=$e({floor_:function(n){var e=Oe(n,"x","floor");return Ve.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return ar(t)}}})}}),Zm=$e({log_:function(n){var e=Oe(n,"x","log"),t=[e];return Ve.runKernelFunc(function(r,i){var a=r.log(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return r.div(a.toFloat())}}},"Log",{},t)}}),Cde=$e({log1p_:function(n){var e=Oe(n,"x","log1p");return Ve.runKernelFunc(function(t,r){var i=t.log1p(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.add(1))}}})}}),F7e=$e({logSigmoid_:function(n){var e=Oe(n,"x","logSigmoid");return Ve.runKernelFunc(function(t,r){var i=t.softplus(e.neg()).neg();return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.neg().sigmoid())}}})}}),F1=$e({neg_:function(n){var e=Oe(n,"x","neg"),t=[e];return Ve.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},t)}}),Ede=$e({reciprocal_:function(n){var e=Oe(n,"x","reciprocal");return Ve.runKernelFunc(function(t,r){var i=t.reciprocal(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.square().neg())}}})}}),Tde=$e({round_:function(n){var e=Oe(n,"x","round");return Ve.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return ar(t)}}})}}),oW=$e({rsqrt_:function(n){var e=Oe(n,"x","rsqrt"),t=[e];return Ve.runKernelFunc(function(r,i){var a=r.rsqrt(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return r.div(a.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),uW=$e({sigmoid_:function(n){var e=Oe(n,"x","sigmoid");return Ve.runKernelFunc(function(t,r){var i=t.sigmoid(e);return r([i]),i},{x:e},function(t,r){var i=r[0];return{x:function(){return t.mul(i.mul(jt(1).sub(i)))}}},"Sigmoid")}}),Dde=$e({sign_:function(n){var e=Oe(n,"x","sign");return Ve.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return ar(t)}}})}}),P7e=$e({isNaN_:function(n){var e=Oe(n,"x","isNaN");return Ve.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return ar(t)}}})}}),L7e=$e({isInf_:function(n){var e=Oe(n,"x","isInf");return Ve.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return ar(t)}}})}}),M7e=$e({isFinite_:function(n){var e=Oe(n,"x","isFinite");return Ve.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return ar(t)}}})}}),Ade=$e({sin_:function(n){var e=Oe(n,"x","sin"),t=[e];return Ve.runKernelFunc(function(r,i){var a=r.sin(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return a.toFloat().cos().mul(r)}}},"Sin",{},t)}}),kde=$e({sinh_:function(n){var e=Oe(n,"x","sinh");return Ve.runKernelFunc(function(t,r){var i=t.sinh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(t)}}})}}),QI=$e({softplus_:function(n){var e=Oe(n,"x","softplus");return Ve.runKernelFunc(function(t,r){var i=t.softplus(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.sigmoid())}}})}}),ZI=$e({sqrt_:function(n){var e=Oe(n,"x","sqrt");return Ve.runKernelFunc(function(t,r){var i=t.sqrt(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.toFloat().sqrt().mul(2))}}})}}),U7e=$e({step_:function(n,e){e===void 0&&(e=0);var t=Oe(n,"x","step");return Ve.runKernelFunc(function(r){return r.step(t,e)},{$x:t},function(r){return{$x:function(){return ar(r)}}})}}),Nde=$e({tan_:function(n){var e=Oe(n,"x","tan");return Ve.runKernelFunc(function(t,r){var i=t.tan(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.cos().square())}}})}}),lW=$e({tanh_:function(n){var e=Oe(n,"x","tanh");return Ve.runKernelFunc(function(t,r){var i=t.tanh(e);return r([i]),i},{x:e},function(t,r){var i=r[0];return{x:function(){return jt(1).sub(i.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}}),B7e=$e({addStrict_:function(n,e){var t=Oe(n,"a","addStrict"),r=Oe(e,"b","addStrict");return Or(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),Ode=$e({atan2_:function(n,e){var t,r=Oe(n,"a","atan2"),i=Oe(e,"b","atan2");t=ji(r,i),r=t[0],i=t[1];var a=Jn(r.shape,i.shape);return Ve.runKernelFunc(function(o,s){var u=o.atan2(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var h=qn(u.square(),l.square()),c=o.mul(l.div(h)),f=Ja(u.shape,a);return f.length>0&&(c=c.sum(f)),c.reshape(u.shape)},$b:function(){var h=qn(u.square(),l.square()),c=F1(o.mul(u.div(h))),f=Ja(l.shape,a);return f.length>0&&(c=c.sum(f)),c.reshape(l.shape)}}})}}),z7e=$e({divStrict_:function(n,e){var t=Oe(n,"a","div"),r=Oe(e,"b","div");return Or(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),cW=$e({floorDiv_:function(n,e){var t,r=Oe(n,"a","floorDiv"),i=Oe(e,"b","floorDiv");t=ji(r,i),r=t[0],i=t[1];var a=Jn(r.shape,i.shape);return Ve.runKernelFunc(function(o,s){var u=o.floorDiv(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var h=o.div(l.toFloat()),c=Ja(u.shape,a);return c.length>0?h.sum(c).reshape(u.shape):h},b:function(){var h=o.mul(u.toFloat()),c=Ja(l.shape,a);c.length>0&&(h=h.sum(c).reshape(l.shape));var f=l.square();return h.div(f.toFloat()).neg()}}},"FloorDiv")}}),zp=$e({maximum_:function(n,e){var t,r=Oe(n,"a","maximum"),i=Oe(e,"b","maximum");return t=ji(r,i),r=t[0],i=t[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Jn(r.shape,i.shape),Ve.runKernelFunc(function(a,o){var s=a.maximum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.greaterEqual(u).toFloat())},b:function(){return a.mul(s.less(u).toFloat())}}},"Maximum")}}),W7e=$e({maximumStrict_:function(n,e){var t=Oe(n,"a","maximumStrict"),r=Oe(e,"b","maximumStrict");return Or(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),LD=$e({minimum_:function(n,e){var t,r=Oe(n,"a","minimum"),i=Oe(e,"b","minimum");return t=ji(r,i),r=t[0],i=t[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Jn(r.shape,i.shape),Ve.runKernelFunc(function(a,o){var s=a.minimum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.lessEqual(u).toFloat())},b:function(){return a.mul(s.greater(u).toFloat())}}},"Minimum")}}),j7e=$e({minimumStrict_:function(n,e){var t=Oe(n,"a","minimumStrict"),r=Oe(e,"b","minimumStrict");return Or(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),Rde=$e({mod_:function(n,e){var t,r=Oe(n,"a","mod"),i=Oe(e,"b","mod");t=ji(r,i),r=t[0],i=t[1];var a=Jn(r.shape,i.shape);return Ve.runKernelFunc(function(o,s){var u=o.mod(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var h=Ja(u.shape,a);return h.length>0?o.sum(h).reshape(u.shape):o},$b:function(){var h=o.mul(u.div(l).floor().neg()),c=Ja(l.shape,a);return c.length>0?h.sum(c).reshape(l.shape):h}}})}}),$7e=$e({modStrict_:function(n,e){var t=Oe(n,"a","modStrict"),r=Oe(e,"b","modStrict");return Or(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),rn=$e({mul_:function(n,e){var t,r=Oe(n,"a","mul"),i=Oe(e,"b","mul");t=ji(r,i),r=t[0],i=t[1];var a=Jn(r.shape,i.shape);return Ve.runKernelFunc(function(o,s){var u=o.multiply(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var h=o.mul(l.toFloat()),c=Ja(u.shape,a);return c.length>0?h.sum(c).reshape(u.shape):h},b:function(){var h=o.mul(u.toFloat()),c=Ja(l.shape,a);return c.length>0?h.sum(c).reshape(l.shape):h}}},"Mul")}}),hW=$e({mulStrict_:function(n,e){var t=Oe(n,"a","mul"),r=Oe(e,"b","mul");return Or(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),bE=$e({pow_:function(n,e){var t,r=Oe(n,"base","pow"),i=Oe(e,"exp","pow");t=ji(r,i),r=t[0],i=t[1];var a=Jn(r.shape,i.shape),o=[r,i];return Ve.runKernelFunc(function(s,u){var l=s.pow(r,i);return u([r,i,l]),l},{a:r,b:i},function(s,u){var l=u[0],h=u[1],c=u[2];return{a:function(){var f=h.toFloat(),d=s.mul(f.mul(l.pow(f.sub(jt(1))))),p=Ja(l.shape,a);return p.length>0&&(d=d.sum(p)),d.reshape(l.shape)},b:function(){var f=l.greater(0),d=l.log().where(f,ar(l)),p=s.mul(c.mul(d)),m=Ja(h.shape,a);return m.length>0&&(p=p.sum(m)),p.reshape(h.shape)}}},"Pow",{},o,[!0])}}),q7e=$e({powStrict_:function(n,e){return Or(n.shape,e.shape,"Error in powStrict: "),n.pow(e)}}),V7e=$e({squaredDifferenceStrict_:function(n,e){var t=Oe(n,"a","squaredDifferenceStrict"),r=Oe(e,"b","squaredDifferenceStrict");return Or(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),pa=$e({sub_:function(n,e){var t,r=Oe(n,"a","sub"),i=Oe(e,"b","sub");t=ji(r,i),r=t[0],i=t[1];var a=Jn(r.shape,i.shape);return Ve.runKernelFunc(function(o){return o.subtract(r,i)},{a:r,b:i},function(o){return{a:function(){var s=o,u=Ja(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=o,u=Ja(i.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(i.shape)}}},"Sub")}}),H7e=$e({subStrict_:function(n,e){var t=Oe(n,"a","subStrict"),r=Oe(e,"b","subStrict");return Or(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),ya=$e({div_:function(n,e){var t,r=Oe(n,"a","div"),i=Oe(e,"b","div");if(t=ji(r,i),r=t[0],i=t[1],r.dtype==="int32"&&i.dtype==="int32")return cW(r,i);var a={a:r,b:i};return Ve.runKernelFunc(function(o,s){var u=o.realDivide(r,i);return s([r,i]),u},a,null,KI,{})}});function Ide(n,e){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+n.rank);if(n.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var t=e.shape,r=t[t.length-1],i=1,a=0;a<t.length-1;++a)i*=t[a];var o=n.shape,s=t.slice();s.pop();var u=1;for(a=r;a<n.rank;++a)u*=o[a],s.push(o[a]);var l=Au(n.shape).map(function(h){return h/u}).concat([1]).slice(0,r);return[s,i,u,l]}var Fde=30;function fM(n){return n<=Fde?n:sO(n,Math.floor(Math.sqrt(n)))}function G7e(n,e,t){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+e.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+i+".";if(t.rank<i)throw new Error(a+" update.rank < "+i+". ");if(n.length<r+(t.rank-i))throw new Error(a+" Output shape length < "+(r+(t.rank-i)));if(t.rank!==i+n.length-r)throw new Error(a+" update.rank != "+(i+n.length-r));for(var o=0;o<i;++o)if(t.shape[o]!==e.shape[o])throw new Error(a+" updates.shape["+o+"] ("+t.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+").");for(o=0;o<t.rank-i;++o)if(t.shape[o+i]!==n[o+r])throw new Error(a+" updates.shape["+(o+i)+"] ("+t.shape[o+i]+") != shape["+(o+i)+"] ("+n[o+i]+")")}function X7e(n,e,t){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(n.size===0)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}G7e(t,e,n)}function mO(n,e,t){for(var r=e.shape.length,i=r>1?e.shape[r-1]:1,a=t.length,o=1,s=i;s<a;++s)o*=t[s];var u=i<1?1:i;return{sliceRank:i,numUpdates:Qt(e.shape)/u,sliceSize:o,strides:Au(t.slice(0,i)).concat([1]),outputSize:Qt(t)}}function K7e(n,e,t){Pe(n.rank===e.length,function(){return"Error in slice"+n.rank+"D: Length of begin "+e+" must match the rank of the array ("+n.rank+")."}),Pe(n.rank===t.length,function(){return"Error in slice"+n.rank+"D: Length of size "+t+" must match the rank of the array ("+n.rank+")."});for(var r=function(a){Pe(e[a]+t[a]<=n.shape[a],function(){return"Error in slice"+n.rank+"D: begin["+a+"] + size["+a+"] ("+(e[a]+t[a])+") would overflow input.shape["+a+"] ("+n.shape[a]+")"})},i=0;i<n.rank;++i)r(i)}function ZY(n){for(var e=[],t=0;n>0;)1&n&&e.push(t),n/=2,t++;return e}function fW(n,e,t){for(var r=[],i=0;i<n.length;i++)r[i]=Math.ceil((e[i]-n[i])/t[i]);return r}function Y7e(n,e,t,r,i){var a=e[i],o=t[i]||1;(n&1<<i||a==null)&&(a=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=rO(0,a,s-1)}function Q7e(n,e,t,r,i){var a=e[i],o=t[i]||1;(n&1<<i||a==null)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=o>0?rO(0,a,s):rO(-1,a,s-1)}function Pde(n,e,t){for(var r=t.length,i=0;i<t.length;i++)if(t[i]>1){r=i;break}for(i=r+1;i<t.length;i++)if(e[i]>0||t[i]!==n[i])return!1;return!0}function Lde(n,e){for(var t=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function Z7e(n,e){Pe(aO(n),function(){return"The f passed in variableGrads(f) must be a function"}),Pe(e==null||Array.isArray(e)&&e.every(function(h){return h instanceof uO}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=e!=null;if(!t)for(var r in e=[],Ve.registeredVariables)e.push(Ve.registeredVariables[r]);var i=t?e.filter(function(h){return!h.trainable}):null,a=e.length;Pe((e=e.filter(function(h){return h.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var o=Ve.gradients(n,e,null,!0),s=o.value,u=o.grads;Pe(u.some(function(h){return h!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),Pe(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return e.forEach(function(h,c){u[c]!=null&&(l[h.name]=u[c])}),i!=null&&i.forEach(function(h){return l[h.name]=null}),{value:s,grads:l}}function JI(n){return Ve.customGrad(n)}var Cx=$e({softmax_:function(n,e){e===void 0&&(e=-1);var t=Oe(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return Ve.runKernelFunc(function(r,i){var a=r.softmax(t,e);return i([a]),a},{logits:t},function(r,i){var a=i[0],o=r.mul(a);return{logits:function(){return o.sub(o.sum([e],!0).mul(a))}}},"Softmax",{dim:e},[],[!0])}}),dW=$e({logSoftmax_:function(n,e){e===void 0&&(e=-1);var t=Oe(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+e);return JI(function(r,i){var a=r.max(e,!0),o=r.sub(a),s=o.toFloat().sub(o.exp().sum(e,!0).log());return i([s]),{value:s,gradFunc:function(u,l){var h=l[0].exp();return u.sub(u.sum(e,!0).mul(h))}}})(t)}}),gr=$e({transpose_:function(n,e){var t=Oe(n,"x","transpose");if(e==null&&(e=t.shape.map(function(i,a){return a}).reverse()),Pe(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."}),e.forEach(function(i){Pe(i>=0&&i<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+e})}),t.rank<=1)return t.clone();var r={perm:e};return Ve.runKernelFunc(function(i){return i.transpose(t,e)},{x:t},null,"Transpose",r)}}),Mde=function(){function n(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},n.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},n.prototype.has=function(e){return this.data.has(e)},n.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},n.prototype.numDataIds=function(){return this.dataIdsCount},n}(),Ude=function(){function n(){}return n.prototype.time=function(e){return st("time")},n.prototype.read=function(e){return st("read")},n.prototype.readSync=function(e){return st("readSync")},n.prototype.numDataIds=function(){return st("numDataIds")},n.prototype.disposeData=function(e){return st("disposeData")},n.prototype.write=function(e,t,r){return st("write")},n.prototype.move=function(e,t,r,i){return st("move")},n.prototype.memory=function(){return st("memory")},n.prototype.floatPrecision=function(){return st("floatPrecision")},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.batchMatMul=function(e,t,r,i){return st("batchMatMul")},n.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,st("fusedBatchMatMul")},n.prototype.slice=function(e,t,r){return st("slice")},n.prototype.stridedSlice=function(e,t,r,i){return st("stridedSlice")},n.prototype.unstack=function(e,t){return st("unstack")},n.prototype.reverse=function(e,t){return st("reverse")},n.prototype.concat=function(e,t){return st("concat")},n.prototype.neg=function(e){return st("neg")},n.prototype.add=function(e,t){return st("add")},n.prototype.addN=function(e){return st("addN")},n.prototype.subtract=function(e,t){return st("subtract")},n.prototype.multiply=function(e,t){return st("multiply")},n.prototype.realDivide=function(e,t){return st("realDivide")},n.prototype.floorDiv=function(e,t){return st("floorDiv")},n.prototype.sum=function(e,t){return st("sum")},n.prototype.prod=function(e,t){return st("prod")},n.prototype.unsortedSegmentSum=function(e,t,r){return st("unsortedSegmentSum")},n.prototype.argMin=function(e,t){return st("argMin")},n.prototype.argMax=function(e,t){return st("argMax")},n.prototype.equal=function(e,t){return st("equal")},n.prototype.notEqual=function(e,t){return st("notEqual")},n.prototype.less=function(e,t){return st("less")},n.prototype.lessEqual=function(e,t){return st("lessEqual")},n.prototype.greater=function(e,t){return st("greater")},n.prototype.greaterEqual=function(e,t){return st("greaterEqual")},n.prototype.logicalNot=function(e){return st("logicalNot")},n.prototype.logicalAnd=function(e,t){return st("logicalAnd")},n.prototype.logicalOr=function(e,t){return st("logicalOr")},n.prototype.where=function(e){return st("where")},n.prototype.select=function(e,t,r){return st("select")},n.prototype.topk=function(e,t,r){return st("topk")},n.prototype.min=function(e,t){return st("min")},n.prototype.minimum=function(e,t){return st("minimum")},n.prototype.mod=function(e,t){return st("mod")},n.prototype.max=function(e,t){return st("max")},n.prototype.maximum=function(e,t){return st("maximum")},n.prototype.all=function(e,t){return st("all")},n.prototype.any=function(e,t){return st("any")},n.prototype.squaredDifference=function(e,t){return st("squaredDifference")},n.prototype.ceil=function(e){return st("ceil")},n.prototype.floor=function(e){return st("floor")},n.prototype.round=function(e){return st("round")},n.prototype.sign=function(e){return st("sign")},n.prototype.isNaN=function(e){return st("isNaN")},n.prototype.isInf=function(e){return st("isInf")},n.prototype.isFinite=function(e){return st("isFinite")},n.prototype.pow=function(e,t){return st("pow")},n.prototype.exp=function(e){return st("exp")},n.prototype.expm1=function(e){return st("expm1")},n.prototype.softmax=function(e,t){return st("softmax")},n.prototype.log=function(e){return st("log")},n.prototype.log1p=function(e){return st("log1p")},n.prototype.sqrt=function(e){return st("sqrt")},n.prototype.rsqrt=function(e){return st("rsqrt")},n.prototype.square=function(e){return st("square")},n.prototype.reciprocal=function(e){return st("reciprocal")},n.prototype.relu=function(e){return st("relu")},n.prototype.relu6=function(e){return st("relu6")},n.prototype.prelu=function(e,t){return st("prelu")},n.prototype.elu=function(e){return st("elu")},n.prototype.eluDer=function(e,t){return st("eluDer")},n.prototype.selu=function(e){return st("selu")},n.prototype.int=function(e){return st("int")},n.prototype.clip=function(e,t,r){return st("clip")},n.prototype.abs=function(e){return st("abs")},n.prototype.complexAbs=function(e){return st("complexAbs")},n.prototype.sigmoid=function(e){return st("sigmoid")},n.prototype.softplus=function(e){return st("softplus")},n.prototype.sin=function(e){return st("sin")},n.prototype.cos=function(e){return st("cos")},n.prototype.tan=function(e){return st("tan")},n.prototype.asin=function(e){return st("asin")},n.prototype.acos=function(e){return st("acos")},n.prototype.atan=function(e){return st("atan")},n.prototype.atan2=function(e,t){return st("atan2")},n.prototype.sinh=function(e){return st("sinh")},n.prototype.cosh=function(e){return st("cosh")},n.prototype.tanh=function(e){return st("tanh")},n.prototype.asinh=function(e){return st("asinh")},n.prototype.acosh=function(e){return st("acosh")},n.prototype.atanh=function(e){return st("atanh")},n.prototype.erf=function(e){return st("erf")},n.prototype.step=function(e,t){return st("step")},n.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,st("fusedConv2d")},n.prototype.conv2d=function(e,t,r){return st("conv2d")},n.prototype.conv2dDerInput=function(e,t,r){return st("conv2dDerInput")},n.prototype.conv2dDerFilter=function(e,t,r){return st("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,st("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(e,t,r){return st("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(e,t,r){return st("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(e,t,r){return st("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(e,t,r){return st("conv3d")},n.prototype.conv3dDerInput=function(e,t,r){return st("conv3dDerInput")},n.prototype.conv3dDerFilter=function(e,t,r){return st("conv3dDerFilter")},n.prototype.maxPool=function(e,t){return st("maxPool")},n.prototype.maxPoolBackprop=function(e,t,r,i){return st("maxPoolBackprop")},n.prototype.avgPool=function(e,t){return st("avgPool")},n.prototype.avgPoolBackprop=function(e,t,r){return st("avgPoolBackprop")},n.prototype.avgPool3d=function(e,t){return st("avgPool3d")},n.prototype.avgPool3dBackprop=function(e,t,r){return st("avgPool3dBackprop")},n.prototype.maxPool3d=function(e,t){return st("maxPool3d")},n.prototype.maxPool3dBackprop=function(e,t,r,i){return st("maxPool3dBackprop")},n.prototype.reshape=function(e,t){return st("reshape")},n.prototype.cast=function(e,t){return st("cast")},n.prototype.tile=function(e,t){return st("tile")},n.prototype.pad=function(e,t,r){return st("pad")},n.prototype.transpose=function(e,t){return st("transpose")},n.prototype.gather=function(e,t,r){return st("gather")},n.prototype.gatherND=function(e,t){return st("gatherND")},n.prototype.scatterND=function(e,t,r){return st("scatterND")},n.prototype.batchToSpaceND=function(e,t,r){return st("batchToSpaceND")},n.prototype.spaceToBatchND=function(e,t,r){return st("spaceToBatchND")},n.prototype.resizeBilinear=function(e,t,r,i){return st("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(e,t,r){return st("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(e,t,r,i){return st("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(e,t,r){return st("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(e,t,r,i,a,o){return st("batchNormalization")},n.prototype.localResponseNormalization4D=function(e,t,r,i,a){return st("localResponseNormalization4D")},n.prototype.LRNGrad=function(e,t,r,i,a,o,s){return st("LRNGrad")},n.prototype.multinomial=function(e,t,r,i){return st("multinomial")},n.prototype.oneHot=function(e,t,r,i){return st("oneHot")},n.prototype.cumsum=function(e,t,r,i){return st("cumsum")},n.prototype.nonMaxSuppression=function(e,t,r,i,a){return st("nonMaxSuppression")},n.prototype.fft=function(e){return st("fft")},n.prototype.ifft=function(e){return st("ifft")},n.prototype.complex=function(e,t){return st("complex")},n.prototype.real=function(e){return st("real")},n.prototype.imag=function(e){return st("imag")},n.prototype.cropAndResize=function(e,t,r,i,a,o){return st("cropAndResize")},n.prototype.depthToSpace=function(e,t,r){return st("depthToSpace")},n.prototype.split=function(e,t,r){return st("split")},n.prototype.sparseToDense=function(e,t,r,i){return st("sparseToDense")},n.prototype.diag=function(e){return st("diag")},n.prototype.fill=function(e,t,r){return st("fill")},n.prototype.onesLike=function(e){return st("onesLike")},n.prototype.zerosLike=function(e){return st("zerosLike")},n.prototype.linspace=function(e,t,r){return st("linspace")},n.prototype.dispose=function(){return st("dispose")},n}();function st(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function b1(n,e,t,r,i,a,o){o===void 0&&(o="channelsLast");var s,u=bO(e),l=u[0],h=u[1];if(o==="channelsLast")s=[l,h,n[3],n[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);s=[l,h,n[1],n[1]]}return P1(n,s,t,r,i,a,!1,o)}function yO(n,e,t,r,i,a,o){o===void 0&&(o="NDHWC");var s,u,l=qU(e),h=l[0],c=l[1],f=l[2];if(o==="NDHWC")u="channelsLast",s=[h,c,f,n[4],n[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);u="channelsFirst",s=[h,c,f,n[1],n[1]]}return vO(n,s,t,r,i,!1,u,a)}function P1(n,e,t,r,i,a,o,s){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],h=u[1],c=u[2],f=u[3];if(s==="channelsLast")l=n[0],h=n[1],c=n[2],f=n[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=n[0],f=n[1],h=n[2],c=n[3]}var d,p=e[0],m=e[1],g=e[3],y=bO(t),v=y[0],b=y[1],w=bO(r),x=w[0],S=w[1],E=N2(p,x),A=N2(m,S),k=function(R,U,B,W,Y,z,j,M){var q,H,K;if(typeof R=="number"){q={top:R,bottom:R,left:R,right:R,type:R===0?"VALID":"NUMBER"};var Z=function(ge,Ce,Ee,G,de){G==null&&(G=Bde(ge,Ce,Ee));var ye=ge[0],le=ge[1],ne=RC((ye-Ce+2*G)/Ee+1,de);Pe(ra(ne),function(){return"The output # of rows ("+ne+") must be an integer. Change the stride and/or zero pad parameters"});var fe=RC((le-Ce+2*G)/Ee+1,de);return Pe(ra(fe),function(){return"The output # of columns ("+fe+") must be an integer. Change the stride and/or zero pad parameters"}),[ne,fe]}([U,B],z,W,R,M);H=Z[0],K=Z[1]}else if(R==="same"){H=Math.ceil(U/W),K=Math.ceil(B/Y);var J=Math.max(0,(H-1)*W+z-U),X=Math.max(0,(K-1)*Y+j-B),ae=Math.floor(J/2),ie=J-ae,ce=Math.floor(X/2);q={top:ae,bottom:ie,left:ce,right:X-ce,type:"SAME"}}else{if(R!=="valid")throw Error("Unknown padding parameter: "+R);q={top:0,bottom:0,left:0,right:0,type:"VALID"},H=Math.ceil((U-z+1)/W),K=Math.ceil((B-j+1)/Y)}return{padInfo:q,outHeight:H,outWidth:K}}(i,h,c,v,b,E,A,a),T=k.padInfo,O=k.outHeight,F=k.outWidth,I=o?g*f:g;return s==="channelsFirst"?d=[l,I,O,F]:s==="channelsLast"&&(d=[l,O,F,I]),{batchSize:l,dataFormat:s,inHeight:h,inWidth:c,inChannels:f,outHeight:O,outWidth:F,outChannels:I,padInfo:T,strideHeight:v,strideWidth:b,filterHeight:p,filterWidth:m,effectiveFilterHeight:E,effectiveFilterWidth:A,dilationHeight:x,dilationWidth:S,inShape:n,outShape:d,filterShape:e}}function vO(n,e,t,r,i,a,o,s){a===void 0&&(a=!1),o===void 0&&(o="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],h=u[1],c=u[2],f=u[3],d=u[4];if(o==="channelsLast")l=n[0],h=n[1],c=n[2],f=n[3],d=n[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=n[0],d=n[1],h=n[2],c=n[3],f=n[4]}var p,m=e[0],g=e[1],y=e[2],v=e[4],b=qU(t),w=b[0],x=b[1],S=b[2],E=qU(r),A=E[0],k=E[1],T=E[2],O=N2(m,A),F=N2(g,k),I=N2(y,T),R=function(j,M,q,H,K,Z,J,X,ae,ie,ce){var ge,Ce,Ee,G;if(typeof j=="number"){ge={top:j,bottom:j,left:j,right:j,front:j,back:j,type:j===0?"VALID":"NUMBER"};var de=function(Se,Re,je,rt,at,yt){at==null&&(at=Bde(Se,Re,rt));var pt=Se[0],Le=Se[1],tt=Se[2],ft=RC((pt-Re+2*at)/rt+1,yt);Pe(ra(ft),function(){return"The output # of depths ("+ft+") must be an integer. Change the stride and/or zero pad parameters"});var Et=RC((Le-Re+2*at)/rt+1,yt);Pe(ra(Et),function(){return"The output # of rows ("+Et+") must be an integer. Change the stride and/or zero pad parameters"});var xt=RC((tt-Re+2*at)/rt+1,yt);return Pe(ra(xt),function(){return"The output # of columns ("+xt+") must be an integer. Change the stride and/or zero pad parameters"}),[ft,Et,xt,je]}([M,q,H,1],X,1,K,j,ce);Ce=de[0],Ee=de[1],G=de[2]}else if(j==="same"){Ce=Math.ceil(M/K),Ee=Math.ceil(q/Z),G=Math.ceil(H/J);var ye=(Ce-1)*K+X-M,le=(Ee-1)*Z+ae-q,ne=(G-1)*J+ie-H,fe=Math.floor(ye/2),Ne=ye-fe,Ae=Math.floor(le/2),ue=le-Ae,me=Math.floor(ne/2);ge={top:Ae,bottom:ue,left:me,right:ne-me,front:fe,back:Ne,type:"SAME"}}else{if(j!=="valid")throw Error("Unknown padding parameter: "+j);ge={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ce=Math.ceil((M-X+1)/K),Ee=Math.ceil((q-ae+1)/Z),G=Math.ceil((H-ie+1)/J)}return{padInfo:ge,outDepth:Ce,outHeight:Ee,outWidth:G}}(i,h,c,f,w,x,S,O,F,I,s),U=R.padInfo,B=R.outDepth,W=R.outHeight,Y=R.outWidth,z=a?v*d:v;return o==="channelsFirst"?p=[l,z,B,W,Y]:o==="channelsLast"&&(p=[l,B,W,Y,z]),{batchSize:l,dataFormat:o,inDepth:h,inHeight:c,inWidth:f,inChannels:d,outDepth:B,outHeight:W,outWidth:Y,outChannels:z,padInfo:U,strideDepth:w,strideHeight:x,strideWidth:S,filterDepth:m,filterHeight:g,filterWidth:y,effectiveFilterDepth:O,effectiveFilterHeight:F,effectiveFilterWidth:I,dilationDepth:A,dilationHeight:k,dilationWidth:T,inShape:n,outShape:p,filterShape:e}}function Bde(n,e,t,r){r===void 0&&(r=1);var i=N2(e,r);return Math.floor((n[0]*(t-1)-t+i)/2)}function bO(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function qU(n){return typeof n=="number"?[n,n,n]:n}function N2(n,e){return e<=1?n:n+(n-1)*(e-1)}function RC(n,e){if(!e)return n;switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+e)}}function ex(n){var e=bO(n),t=e[0],r=e[1],i=e[2];return t===1&&r===1&&i===1}function Qo(n,e){return ex(n)||ex(e)}function pW(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function zde(n,e,t){if(e==="complex64"){if(n.dtype==="complex64")return n.clone();var r=Lr(n.shape),i=n.toFloat(),a=t.complex(i,r);return r.dispose(),i.dispose(),a}if(!Bfe(n.dtype,e))return Ve.makeTensorFromDataId(n.dataId,n.shape,e);if(n.dtype==="complex64"){var o=t.real(n);return a=o.cast(e),o.dispose(),a}if(e==="int32")return t.int(n);if(e==="bool"){var s=jt(0,n.dtype);return a=t.notEqual(n,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+e)}function VU(n,e){return Ve.makeTensorFromDataId(n.dataId,e,n.dtype)}function Wde(n,e,t){var r=(e-n)/(t-1),i=Sx(t,"float32");i[0]=n;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return Ru(i,"float32")}function HU(n,e){if(n.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+e.length+".");for(var t=new Float32Array(2*n.length),r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function JY(n,e){return{real:n[2*e],imag:n[2*e+1]}}function J7e(n,e,t,r){n[2*r]=e,n[2*r+1]=t}function eze(n,e,t){var r=(t?2:-2)*Math.PI*(n/e);return{real:Math.cos(r),imag:Math.sin(r)}}function tze(n,e,t){var r=function(a,o,s){return function(u,l,h){for(var c=0,f=u.length,d=0,p=!1;c<f;){var m=h(l,u[d=c+(f-c>>>1)]);m>0?c=d+1:(f=d,p=!m)}return p?c:-c-1}(a,o,s||nze)}(n,e,t),i=r<0?-(r+1):r;n.splice(i,0,e)}function nze(n,e){return n>e?1:n<e?-1:0}function gW(n,e,t,r,i){return jde(n,e,t,r,i,0).selectedIndices}function mW(n,e,t,r,i,a){var o=jde(n,e,t,r,i,a);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function jde(n,e,t,r,i,a,o,s){s===void 0&&(s=!1);for(var u=Array.from(e).map(function(w,x){return{score:w,boxIndex:x,suppressBeginIndex:0}}).filter(function(w){return w.score>i}).sort(eQ),l=a>0?-.5/a:0,h=[],c=[];h.length<t&&u.length>0;){var f=u.pop(),d=f.score,p=f.boxIndex,m=f.suppressBeginIndex;if(d<i)break;for(var g=!1,y=h.length-1;y>=m;--y){var v=rze(n,p,h[y]);if(v>=r){g=!0;break}if(f.score=f.score*ize(r,l,v),f.score<=i)break}f.suppressBeginIndex=h.length,g||(f.score===d?(h.push(p),c.push(f.score)):f.score>i&&tze(u,f,eQ))}var b=h.length;return s&&(h.fill(0,b),c.fill(0,b)),{selectedIndices:Ru(h,"int32"),selectedScores:Ru(c,"float32"),numValidOutputs:jt(b,"int32")}}function rze(n,e,t){var r=n.subarray(4*e,4*e+4),i=n.subarray(4*t,4*t+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),h=Math.min(i[1],i[3]),c=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),d=(s-a)*(u-o),p=(c-l)*(f-h);if(d<=0||p<=0)return 0;var m=Math.max(a,l),g=Math.max(o,h),y=Math.min(s,c),v=Math.min(u,f),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(d+p-b)}function ize(n,e,t){var r=Math.exp(e*t*t);return t<=n?r:0}function eQ(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}function $de(n,e,t){var r=new Array(n.rank).fill(0),i=n.shape.slice();return e.map(function(a){i[t]=a;var o=n.slice(r,i);return r[t]+=a,o})}function qde(n,e){for(var t=new Array(n.rank),r=0;r<t.length;r++)t[r]=n.shape[r]*e[r];var i=Dn(t,n.dtype);for(r=0;r<i.values.length;++r){for(var a=i.indexToLoc(r),o=new Array(n.rank),s=0;s<o.length;s++)o[s]=a[s]%n.shape[s];var u=n.locToIndex(o);i.values[r]=n.values[u]}return i.toTensor()}function Vde(n,e,t,r,i){for(var a=e[e.length-1],o=[n.length/a,a],s=o[0],u=o[1],l=m1(t,s*r),h=m1("int32",s*r),c=0;c<s;c++){for(var f=c*u,d=n.subarray(f,f+u),p=[],m=0;m<d.length;m++)p.push({value:d[m],index:m});p.sort(function(w,x){return x.value-w.value});var g=c*r,y=l.subarray(g,g+r),v=h.subarray(g,g+r);for(m=0;m<r;m++)y[m]=p[m].value,v[m]=p[m].index}var b=e.slice();return b[b.length-1]=r,[Na(l,b,t),Na(h,b,"int32")]}function yW(n,e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(r);var i=Dn(n,"int32"),a=Dn([t.length,n.length],"int32");for(r=0;r<t.length;r++){var o=i.indexToLoc(t[r]),s=r*n.length;a.values.set(o,s)}return a.toTensor()}var aze=function(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map(function(i,a){return"T"+a});var t=[];this.variableNames.forEach(function(i){t.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},sze=function(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map(function(i,a){return"T"+a});var t=[];this.variableNames.forEach(function(i){t.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},oze=function(n,e,t){this.variableNames=["A"];var r=n.windowSize,i=n.batchSize,a=n.inSize,o=Math.ceil(a/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s=e==="max"?">":"<",u=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function Hde(n,e){return["x","y","z","w","u","v"].slice(0,e).map(function(t){return n+"."+t})}function Cu(n,e){return e===1?[n]:Hde(n,e)}function mo(){var n,e,t,r,i,a,o,s,u,l;return ct().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Rv(n,e,t){t===void 0&&(t="index");var r=Au(e);return r.map(function(i,a){return"int "+n[a]+" = "+t+" / "+i+"; "+(a===r.length-1?"int "+n[a+1]+" = "+t+" - "+n[a]+" * "+i:"index -= "+n[a]+" * "+i)+";"}).join("")}function vW(n){var e=Au(n).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var Gde=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function uze(n,e,t,r){var i=[];n.forEach(function(d){var p=Qt(d.shapeInfo.logicalShape);d.shapeInfo.isUniform?i.push("uniform float "+d.name+(p>1?"["+p+"]":"")+";"):(i.push("uniform sampler2D "+d.name+";"),i.push("uniform int offset"+d.name+";"))});var a,o,s=i.join(`
`),u=n.map(function(d){return function(p,m,g){g===void 0&&(g=!1);var y="";y+=g?Xde(p):c2(p);var v=p.shapeInfo.logicalShape,b=m.logicalShape;return v.length<=b.length&&(y+=g?function(w,x){var S,E=w.name,A=E.charAt(0).toUpperCase()+E.slice(1),k="get"+A+"AtOutCoords",T=w.shapeInfo.logicalShape.length,O=x.logicalShape.length,F=Nm(w.shapeInfo.logicalShape,x.logicalShape),I=Ci(O),R=O-T,U=["x","y","z","w","u","v"];S=T===0?"":O<2&&F.length>=1?"coords = 0;":F.map(function(q){return"coords."+U[q+R]+" = 0;"}).join(`
`);var B="";B=O<2&&T>0?"coords":w.shapeInfo.logicalShape.map(function(q,H){return"coords."+U[H+R]}).join(", ");var W="return outputValue;",Y=Qt(w.shapeInfo.logicalShape)===1,z=Qt(x.logicalShape)===1;if(T!==1||Y||z){if(Y&&!z)W=O===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(F.length){var j=T-2,M=T-1;F.indexOf(j)>-1&&F.indexOf(M)>-1?W="return vec4(outputValue.x);":F.indexOf(j)>-1?W="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":F.indexOf(M)>-1&&(W="return vec4(outputValue.xx, outputValue.zz);")}}else W=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+k+`() {
      `+I+` coords = getOutputCoords();
      `+S+`
      vec4 outputValue = get`+A+"("+B+`);
      `+W+`
    }
  `}(p,m):function(w,x){var S=w.name,E=S.charAt(0).toUpperCase()+S.slice(1),A="get"+E+"AtOutCoords",k=x.texShape,T=w.shapeInfo.texShape,O=w.shapeInfo.logicalShape.length,F=x.logicalShape.length;if(!w.shapeInfo.isUniform&&O===F&&w.shapeInfo.flatOffset==null&&ts(T,k))return`
      float `+A+`() {
        return sampleTexture(`+S+`, resultUV);
      }
    `;var I,R=Ci(F),U=Nm(w.shapeInfo.logicalShape,x.logicalShape),B=F-O,W=["x","y","z","w","u","v"];I=O===0?"":F<2&&U.length>=1?"coords = 0;":U.map(function(z){return"coords."+W[z+B]+" = 0;"}).join(`
`);var Y="";return Y=F<2&&O>0?"coords":w.shapeInfo.logicalShape.map(function(z,j){return"coords."+W[j+B]}).join(", "),`
    float `+A+`() {
      `+R+` coords = getOutputCoords();
      `+I+`
      return get`+E+"("+Y+`);
    }
  `}(p,m)),y}(d,e,r)}).join(`
`),l=e.texShape,h=mo(),c=function(d){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+d.texture2D+`(textureSampler, uv).r;
    }
  `}(h),f=function(d){return d.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+d.varyingFs+` vec2 resultUV;
    `+d.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+d.defineSpecialNaN+`
    `+d.defineSpecialInf+`
    `+d.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+lze+`
    `+cze+`
    `+hze+`
  `}(h);return e.isPacked?(a=function(d,p){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(w,x){var S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];return S[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return 2 * (resTexRC.x * `+S[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(w,x){var S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];if(ts(w,x))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `;var E=Math.ceil(w[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(d,p);case 3:return m=d,g=p,y=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],v=Math.ceil(m[2]/2),b=v*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+b+`;
      index -= b * `+b+`;

      int r = 2 * (index / `+v+`);
      int c = imod(index, `+v+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(w,x){for(var S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)],E=Math.ceil(w[w.length-1]/2),A=E*Math.ceil(w[w.length-2]/2),k=A,T="",O="b, r, c",F=2;F<w.length-1;F++)k*=w[w.length-F-1],T=`
      int b`+F+" = index / "+k+`;
      index -= b`+F+" * "+k+`;
    `+T,O="b"+F+", "+O;return`
    ivec`+w.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+T+`

      int b = index / `+A+`;
      index -= b * `+A+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+w.length+"("+O+`);
    }
  `}(d,p)}var m,g,y,v,b}(e.logicalShape,l),o=function(d){return`
    void setOutput(vec4 val) {
      `+d.output+` = val;
    }
  `}(h)):(a=function(d,p){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(y,v){return v[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+v[1]+`.0);
      }
    `:v[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+v[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      return resTexRC.x * `+v[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(y,v){return ts(y,v)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+v[0]+", "+v[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+v[0]+", "+v[1]+`));
        int index = resTexRC.x * `+v[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+v[0]+", "+v[1]+`));
        int index = resTexRC.x * `+v[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `}(d,p);case 3:return m=p,g=Rv(["r","c","d"],d),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(y,v){var b=Rv(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+b+`
      return ivec4(r, c, d, d2);
    }
  `}(d,p);case 5:return function(y,v){var b=Rv(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+v[0]+`,
                             `+v[1]+`));

      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      `+b+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(d,p);case 6:return function(y,v){var b=Rv(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      `+b+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(d,p);default:throw new Error(d.length+"-D output sampling is not yet supported")}var m,g}(e.logicalShape,l),o=function(d){return`
    void setOutput(float val) {
      `+d.output+` = vec4(val, 0, 0, 0);
    }
  `}(h)),r&&(f+=fze),[f,c,o,s,a,u,t].join(`
`)}function c2(n){var e=n.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var a=t.shapeInfo.texShape,o=a[0],s=a[1];if(o===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=t.shapeInfo.texShape,l=u[0],h=u[1],c=sv(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+h+", "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 1:return function(t){var r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+Gb(t)+`
      }
    `;var a=t.shapeInfo.texShape,o=a[0],s=a[1];if(s===1&&o===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=sv(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 2:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=t.shapeInfo.texShape;if(o!=null&&ts(r,o)){var s=o[0],u=o[1];return`
    float `+a+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=qg(r),h=l.newShape,c=l.keptDims,f=h;if(f.length<r.length){var d=h2(t,f);return`
      `+c2(d)+`
      float `+a+`(int row, int col) {
        return `+a+"("+f2(["row","col"],c)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Gb(t)+`
      }
    `;var p=o[0],m=o[1],g=sv(i);return m===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:p===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+a+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+p+", "+m+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(n);case 3:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[1]*r[2],s=r[2],u=qg(r),l=u.newShape,h=u.keptDims,c=l;if(c.length<r.length){var f=h2(t,c);return`
        `+c2(f)+`
        float `+a+`(int row, int col, int depth) {
          return `+a+"("+f2(["row","col","depth"],h)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+s+`, 1)));
        `+Gb(t)+`
      }
    `;var d=t.shapeInfo.texShape,p=d[0],m=d[1],g=t.shapeInfo.flatOffset;if(m===o&&g==null)return`
        float `+a+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+p+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(m===s&&g==null)return`
    float `+a+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var y=sv(i);return`
      float `+a+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+s+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+p+", "+m+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(n);case 4:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[3],s=r[2]*o,u=r[1]*s,l=qg(r),h=l.newShape,c=l.keptDims;if(h.length<r.length){var f=h2(t,h);return`
      `+c2(f)+`
      float `+a+`(int row, int col, int depth, int depth2) {
        return `+a+"("+f2(["row","col","depth","depth2"],c)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+o+`, 1)));
        `+Gb(t)+`
      }
    `;var d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,m=p[0],g=p[1];if(g===u&&d==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===o&&d==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=sv(i);return`
    float `+a+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+g+", index + "+y+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(n);case 5:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[4],s=r[3]*o,u=r[2]*s,l=r[1]*u,h=qg(r),c=h.newShape,f=h.keptDims;if(c.length<r.length){var d=h2(t,c);return`
      `+c2(d)+`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        return `+a+"("+f2(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+o+`)) +
          depth3;
        `+Gb(t)+`
      }
    `;var p=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,g=m[0],y=m[1];if(y===l&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(y===o&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var v=sv(i);return`
    float `+a+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+o+" + depth3 + "+v+`;
      vec2 uv = uvFromFlat(`+g+", "+y+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(n);case 6:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=qg(r),s=o.newShape,u=o.keptDims;if(s.length<r.length){var l=h2(t,s);return`
      `+c2(l)+`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+a+"("+f2(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var h=r[5],c=r[4]*h,f=r[3]*c,d=r[2]*f,p=r[1]*d;if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+d+", "+f+", "+c+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+h+`, 1)));
        `+Gb(t)+`
      }
    `;var m=t.shapeInfo.flatOffset,g=t.shapeInfo.texShape,y=g[0],v=g[1];if(v===p&&m==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+d+", "+f+", "+c+", "+h+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+y+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(v===h&&m==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+y+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var b=sv(i);return`
    float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+d+" + depth * "+f+` +
          depth2 * `+c+" + depth3 * "+h+" + depth4 + "+b+`;
      vec2 uv = uvFromFlat(`+y+", "+v+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(n);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function Xde(n){var e,t,r;switch(n.shapeInfo.logicalShape.length){case 0:return e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=mo(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(i){var a=i.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=i.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=mo();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+a+`, uv);
    }
  `}(n);case 2:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=u[0],h=u[1],c=mo();if(u!=null&&ts(a,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+h+".0, "+l+`.0);

        return `+c.texture2D+"("+o+`, uv);
      }
    `;var f=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],d=Math.ceil(a[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+d+", "+f[0]+", "+f[1]+`, row, col);
      return `+c.texture2D+"("+o+`, uv);
    }
  `}(n);case 3:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(a[0]===1){var h=a.slice(1),c=h2(i,h);return`
        `+Xde(c)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+f2(["b","row","col"],[1,2])+`);
        }
      `}var f=l[0],d=l[1],p=Math.ceil(a[2]/2),m=p*Math.ceil(a[1]/2),g=mo();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+d+", "+m+", "+p+`, b, row, col);
      return `+g.texture2D+"("+o+`, uv);
    }
  `}(n);default:return function(i){for(var a=i.shapeInfo.logicalShape,o=a.length,s=i.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,h=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],c=h[0],f=h[1],d=Math.ceil(a[o-1]/2),p=d*Math.ceil(a[o-2]/2),m="int b, int row, int col",g="b * "+p+" + (row / 2) * "+d+" + (col / 2)",y=2;y<o-1;y++)m="int b"+y+", "+m,p*=a[o-y-1],g="b"+y+" * "+p+" + "+g;var v=mo();return`
    vec4 `+u+"("+m+`) {
      int index = `+g+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+c+`);
      return `+v.texture2D+"("+s+`, uv);
    }
  `}(n)}}var lze=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,cze=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hze=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,fze=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function sv(n){return"offset"+n}function Gb(n){var e=n.name,t=Qt(n.shapeInfo.logicalShape);return t<2?"return "+e+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Ci(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function h2(n,e){var t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function f2(n,e){return e.map(function(t){return n[t]}).join(", ")}var dze=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Pe(n.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var i=n[n.length-1],a=Math.ceil(i/e);this.outputShape=n.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var o,s,u=this.outputShape,l=u.length,h=Ci(l),c=Cu("coords",l);if(a===1){var f=Ci(s=l+1);o=`
        `+f+" sourceLocR = "+f+"("+c.join()+`, 0);
        ++`+c[l-1]+`;
        `+f+" sourceLocG = "+f+"("+c.join()+`, 0);
        ++`+c[l-2]+`;
        `+f+" sourceLocA = "+f+"("+c.join()+`, 0);
        --`+c[l-1]+`;
        `+f+" sourceLocB = "+f+"("+c.join()+`, 0);
        --`+c[l-2]+";"}else s=l,o=`
        `+h+` sourceLocR = coords;
        ++`+c[l-1]+`;
        `+h+` sourceLocG = coords;
        ++`+c[l-2]+`;
        `+h+` sourceLocA = coords;
        --`+c[l-1]+`;
        `+h+` sourceLocB = coords;
        --`+c[l-2]+";";var d=["x","y","z","w","u","v"].slice(0,s),p="."+d[s-1],m=d.map(function(A){return"int "+A}),g=Cu("sourceLocR",s-1).concat("inIdx.r"),y=Cu("sourceLocG",s-1).concat("inIdx.g"),v=Cu("sourceLocB",s-1).concat("inIdx.b"),b=Cu("sourceLocA",s-1).concat("inIdx.a"),w=t==="max"?"greaterThan":"lessThan",x=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+b.join()+")));",S=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+b.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+d.join()+`),
                                          vec2(`+d.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+d.join()+`),
                               vec2(`+d.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+h+` coords = getOutputCoords();
        bool hasNextCol = `+c[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+c[l-2]+" < "+(u[l-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+S+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+x+`
          vec4 candidate = `+S+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+w+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},pze=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,i=n.strideWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.effectiveFilterHeight,u=n.effectiveFilterWidth,l=s-1-n.padInfo.top,h=u-1-n.padInfo.left,c=1/(e*t);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+h+`);
      const float avgMultiplier = float(`+c+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},gze=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,i=n.strideDepth,a=n.strideHeight,o=n.strideWidth,s=n.dilationDepth,u=n.dilationHeight,l=n.dilationWidth,h=n.effectiveFilterDepth,c=n.effectiveFilterHeight,f=n.effectiveFilterWidth,d=h-1-n.padInfo.front,p=c-1-n.padInfo.top,m=f-1-n.padInfo.left,g=1/(e*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+p+", "+m+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},mze=function(n,e,t,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Jn(n,e),Jn(n,t);var o="0.0";r!=null&&(Jn(n,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";i!=null&&(Jn(n,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},yze=function(n,e,t,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Jn(n,e),Jn(n,t);var o="vec4(0.0)";r!=null&&(Jn(n,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(Jn(n,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `},vze="return areal * breal - aimag * bimag;",bze="return areal * bimag + aimag * breal;",tQ=function(n,e,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Jn(e,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+n+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},dM="return a + b;",pM="return a - b;",nQ="return a * b;",wze=`
if (a == b) {
  return 1.0;
};
return a / b;`,Kde="return (a < 0.) ? b * a : a;",ta=function(n,e,t){this.variableNames=["A","B"],this.outputShape=Jn(e,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+n+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},xze=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Yde=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,sf=function(n,e,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Jn(e,t);var i=this.outputShape.length,a="";if(r)if(i===0||Qt(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          `+Ci(i)+` coords = getOutputCoords();
        `,i===1)a+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=Cu("coords",i);a+=`
            bool nextRowOutOfBounds =
              (`+o[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+o[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+n+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+a+`

        setOutput(result);
      }
    `},_ze=function(){function n(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,t)}},n}(),Sze=function(){function n(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,t)}},n}(),Cze=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},Eze=function(n){this.outputShape=[],this.outputShape=Jw(n,1),this.variableNames=n.map(function(s,u){return"T"+u});var e=new Array(n.length-1);e[0]=n[0][1];for(var t=1;t<e.length;t++)e[t]=e[t-1]+n[t][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<e.length;t++){var i=e[t-1];r.push("else if (yC < "+e[t]+") setOutput(getT"+t+"(yR, yC-"+i+"));")}var a=e.length,o=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},Tze=function(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Jw(n,e);var t=this.outputShape,r=t.length,i=Ci(r),a=Cu("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map(function(g,y){return"T"+y});var s=new Array(n.length-1);s[0]=n[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+n[u][e];var l=o[e],h=o.slice(-2),c=o.join(),f="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+c+"), vec2("+h.join()+`));
        }`;for(u=1;u<s.length;u++){var d=s[u-1];f+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+Nk(o,l,d)+`),
            vec2(`+Nk(h,l,d)+`));
        }`}var p=s.length,m=s[s.length-1];f+=`
        return getChannel(
          getT`+p+"("+Nk(o,l,m)+`),
          vec2(`+Nk(h,l,m)+"));",this.userCode=`
      float getValue(`+o.map(function(g){return"int "+g})+`) {
        `+f+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);

        `+a[r-1]+" = "+a[r-1]+` + 1;
        if (`+a[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+a+`);
        }

        `+a[r-2]+" = "+a[r-2]+` + 1;
        if (`+a[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+a+`);
        }

        `+a[r-1]+" = "+a[r-1]+` - 1;
        if (`+a[r-2]+" < "+t[r-2]+` &&
            `+a[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `};function Nk(n,e,t){var r=n.indexOf(e);return n.map(function(i,a){return a===r?i+" - "+t:i}).join()}var Dze=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,i=n.padInfo.left,a=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+i+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              if (`+a+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Aze=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,i=n.strideWidth,a=n.dataFormat==="channelsLast",o=e-1-n.padInfo.top,s=t-1-n.padInfo.left,u=a?1:2,l=a?2:3,h=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+h+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {

              if (`+a+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},kze=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,i=n.padInfo.front,a=n.padInfo.top,o=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yF = 0; yF < `+n.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+i+`;

            if (xF < 0 || xF >= `+n.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+n.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+a+`;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+n.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Nze=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,i=n.strideDepth,a=n.strideHeight,o=n.strideWidth,s=e-1-n.padInfo.front,u=t-1-n.padInfo.top,l=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+n.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Oze=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,i=n.padInfo.left,a=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+i+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},Rze=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,i=n.strideWidth,a=e-1-n.padInfo.top,o=t-1-n.padInfo.left,s=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},rQ=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.padInfo.top,a=n.padInfo.left,o=n.strideHeight,s=n.strideWidth,u=n.dilationHeight,l=n.dilationWidth,h=n.filterHeight,c=n.filterWidth,f=4*Math.floor(n.inChannels/4),d=n.inChannels%4,p=n.dataFormat==="channelsLast",m=p?1:2,g=p?2:3,y=p?3:1,v="",b="";t&&(v=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,b="result = activation(result);");var w=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+c+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+n.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(d===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(d===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(d===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+w+`
        `+b+`
        setOutput(result);
      }
    `},Ize=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var e=n.padInfo.front,t=n.padInfo.top,r=n.padInfo.left,i=n.strideDepth,a=n.strideHeight,o=n.strideWidth,s=n.dilationDepth,u=n.dilationHeight,l=n.dilationWidth,h=n.filterDepth,c=n.filterHeight,f=n.filterWidth,d=4*Math.floor(n.inChannels/4),p=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+a+", "+o+`);
      const ivec3 pads = ivec3(`+e+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+h+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+c+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+d+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+d+`) *
                  getW(wF, wR, wC, `+d+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1),
                  getX(batch, xF, xR, xC, `+d+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2),
                  getW(wF, wR, wC, `+d+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},iQ=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.inHeight,a=n.inWidth,o=n.padInfo.top,s=n.padInfo.left,u=n.strideHeight,l=n.strideWidth,h=n.dilationHeight,c=n.dilationWidth,f=n.filterHeight,d=n.filterWidth,p=n.outChannels/n.inChannels,m="",g="";t&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,g="result = activation(result);");var y=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+h+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+c+`;

            if (xC < 0 || xC >= `+a+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+g+`
        setOutput(result);
      }
    `},aQ=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var i=n.inHeight,a=n.inWidth,o=n.padInfo.top,s=n.padInfo.left,u=n.strideHeight,l=n.strideWidth,h=n.dilationHeight,c=n.dilationWidth,f=n.filterHeight,d=n.filterWidth,p=d,m="int xR; int xC; int xCOffset;",g=0;g<f;g++)for(var y=0;y<d;y++)m+=`
          vec4 xTexelR`+g+"C"+2*y+` = vec4(0.);
          vec4 wR`+g+"C"+y+` = vec4(0.);
          vec4 xR`+g+"C"+y+" = vec4(0.);";for(g=0;g<f;g++)for(var v=0;v<p;v++){if(m+=`
          xR = xRCorner + `+g*h+`;
          xC = xCCorner + `+(y=2*v)*c+`;
        `,l===1){if(y<d&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    xTexelR`+g+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+g+"C"+y+" = vec4(previous.zw, xTexelR"+g+"C"+y+`.xy);
                } else {
                  xR`+g+"C"+y+" = vec4(0, 0, xTexelR"+g+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+a+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                xR`+g+"C"+y+" = xTexelR"+g+"C"+y+`;
              `,y+1<d)){var b=s%2==0?Gz(c):c;c%2==0&&s%2==1||c%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+b+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,c>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+a+`) {
                      xTexelR`+g+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+y+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+g+"C"+(y+1)+` = vec4(
                    xTexelR`+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(y+1)+" = xTexelR"+g+"C"+(y+2)+`;
                `}}else y<d&&(m+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+a+`) {
                  xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(y+2)+` = vec4(0.);
                }

                xR`+g+"C"+y+` = vec4(
                  xTexelR`+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+`.zw);
              `,y+1<d&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+a+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(y+1)+" = vec4(xTexelR"+g+"C"+(y+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+a+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(y+2)+` = vec4(0.);
                }

                xR`+g+"C"+y+` = vec4(
                  xTexelR`+g+"C"+y+".xy, xTexelR"+g+"C"+(y+2)+`.xy);
              `,y+1<d&&(m+=`
                  xR`+g+"C"+(y+1)+` = vec4(
                    xTexelR`+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+`.zw);
                `)),m+="}");y<d&&(m+=`
            vec4 wTexelR`+g+"C"+y+" = getW("+g+", "+y+`, d1, q);
            wR`+g+"C"+y+" = vec4(wTexelR"+g+"C"+y+".xz, wTexelR"+g+"C"+y+`.xz);
          `,y+1<d&&(m+=`
              vec4 wTexelR`+g+"C"+(y+1)+" = getW("+g+", "+(y+1)+`, d1, q);
              wR`+g+"C"+(y+1)+` =
                vec4(wTexelR`+g+"C"+(y+1)+".xz, wTexelR"+g+"C"+(y+1)+".xz);"))}for(g=0;g<f;g++)for(y=0;y<d;y++)m+="dotProd += xR"+g+"C"+y+" * wR"+g+"C"+y+";";var w="",x="";t&&(w=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,x="result = activation(result);");var S=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+S+`
        `+x+`
        setOutput(result);
      }
    `},Fze=function(n,e,t,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=n[0],o=n[1],s=n[2],u=n[3],l=e[0],h=t[0],c=t[1];this.outputShape=[l,h,c,u];var f=r==="bilinear"?1:0,d=[o-1+".0",s-1+".0"],p=d[0],m=d[1],g=h>1?[""+(o-1)/(h-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],y=g[0],v=g[1],b=g[2],w=c>1?[""+(s-1)/(c-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],x=w[0],S=w[1],E=w[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+x+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+v+`;
        float width_scale = `+S+`;

        float in_y = `+b+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},Pze=function(n,e,t){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=n[n.length-1],a=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Ci(r)+` coords = getOutputCoords();
        int end = `+sQ(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+sQ(r,"coords")+` = idx;
          val += getX(`+function(o,s){if(o===1)return""+s;if(o===2)return s+".x, "+s+".y";if(o===3)return s+".x, "+s+".y, "+s+".z";if(o===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function sQ(n,e){if(n===1)return""+e;if(n===2)return e+".y";if(n===3)return e+".z";if(n===4)return e+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var Lze=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=yE.DENSE;var e=OC(n),t=mo();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Rv(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},Mze=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=yE.DENSE;var e=OC(n),t=mo();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Rv(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},Uze=function(){function n(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return n.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n}(),Bze=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},zze=function(n){this.variableNames=["A"],this.outTexUsage=ml.DOWNLOAD;var e=mo();this.outputShape=n,this.userCode=`
      `+Gde+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},Wze=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ml.DOWNLOAD;var e=mo();this.outputShape=n,this.userCode=`
      `+Gde+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},jze=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=mo(),i=e[0],a=e[1];this.outputShape=n;var o="result";t&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+vW(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+a+`;
        int c = imod(flatIndex, `+a+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},$ze=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=mo(),i=e[0],a=e[1];this.outputShape=n;var o="",s="result";t&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var h=2*u+l;o+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+n[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+n[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+a+`;
              c = imod(flatIndex, `+a+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+h+`] = values[0];
              } else if(offset == 1) {
                result[`+h+`] = values[1];
              } else if(offset == 2) {
                result[`+h+`] = values[2];
              } else {
                result[`+h+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+vW(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+s+`;
      }
    `},qze="return real * expR - imag * expI;",Vze="return real * expI + imag * expR;",oQ=function(n,e,t){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+n+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},Hze=function(){function n(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,i){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(t.valueLoc,e)}},n}(),Gze=function(n,e,t){this.variableNames=["A","indices"];var r=n.slice();r[t]=e,this.outputShape=r,this.rank=r.length;var i=Ci(this.rank),a=function(o,s){var u=o.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],h=[],c=0;c<o.length;c++)c===s?h.push("int(getIndices("+l[c]+"))"):h.push(""+l[c]);return h.join()}(n,t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},Xze=function(n,e,t){this.sliceDim=n,this.strides=e,this.variableNames=["x","indices"],this.outputShape=t;var r=Ci(e.length),i=Ci(t.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Kze(n,e){var t=mo();return i7e(n,e,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Yze(n,e){return l7e(n,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Qze(n,e){return c7e(n,e,new Uint16Array([0,1,2,2,1,3]))}function MD(n,e,t,r,i,a,o){f7e(t,r);var s=h7e(n,e),u=n.TEXTURE_2D;return un(n,e,function(){return n.bindTexture(u,s)}),un(n,e,function(){return n.texParameteri(u,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)}),un(n,e,function(){return n.texParameteri(u,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}),un(n,e,function(){return n.texParameteri(u,n.TEXTURE_MIN_FILTER,n.NEAREST)}),un(n,e,function(){return n.texParameteri(u,n.TEXTURE_MAG_FILTER,n.NEAREST)}),un(n,e,function(){return n.texImage2D(u,0,i,t,r,0,a,o,null)}),un(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)}),s}function Zze(n,e,t,r,i){var a=GI(t,r);return MD(n,e,a[0],a[1],i.internalFormatFloat,i.textureFormatFloat,n.FLOAT)}function Jze(n,e,t,r,i){var a=GI(t,r);return MD(n,e,a[0],a[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function eWe(n,e,t,r,i){var a=GI(t,r);return MD(n,e,a[0],a[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function tWe(n,e,t,r,i){var a=FD(t,r);return MD(n,e,a[0],a[1],i.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function nWe(n,e,t,r,i){var a=FD(t,r);return MD(n,e,a[0],a[1],i.internalFormatPackedHalfFloat,n.RGBA,i.textureTypeHalfFloat)}function rWe(n,e,t,r){return un(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),GY(n,e,t,"clipSpacePos",r,3,20,0)&&GY(n,e,t,"uv",r,2,20,12)}function iWe(n,e,t,r,i,a,o){var s,u,l;un(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),a instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=n.UNSIGNED_BYTE,l=n.RGBA):(s=new Float32Array(r*i*4),u=n.FLOAT,l=o.internalFormatPackedFloat),s.set(a),un(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,l,r,i,0,n.RGBA,u,s)}),un(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function aWe(n,e,t,r){un(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),r.data instanceof Uint8Array?un(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)}):un(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)}),un(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function sWe(n,e,t,r,i){var a=n.createBuffer();un(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,a)});var o=16*t*r;return un(n,e,function(){return n.bufferData(n.PIXEL_PACK_BUFFER,o,n.STREAM_READ)}),un(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,0)}),un(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}),a}function oWe(n,e,t){var r=n,i=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function uWe(n,e,t,r,i){var a=GI(t,r),o=a[0],s=a[1],u=new Uint8Array(t*r*4);return un(n,e,function(){return n.readPixels(0,0,o,s,i.downloadTextureFormat,n.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function lWe(n,e,t,r,i,a,o,s){var u=n,l=new Float32Array(function(h,c){var f=FD(h,c);return f[0]*f[1]*4}(a,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function cWe(n,e,t,r){var i=new Float32Array(t*r*4);return un(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,i)}),i}var hWe=function(){function n(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=ct().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,J9e(t,e)):this.gl=$f(t);var r="WEBGL_color_buffer_float";if(ct().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Tk(this.gl,this.debug,"OES_texture_float"),lc(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Tk(this.gl,this.debug,"OES_texture_half_float");else if(ct().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),lc(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Tk(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ct().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",lc(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!lc(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Yze(this.gl,this.debug),this.indexBuffer=Qze(this.gl,this.debug),this.framebuffer=d7e(this.gl,this.debug),this.textureConfig=eW(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return ct().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;un(t,this.debug,function(){return t.finish()}),un(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),un(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),un(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),un(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),un(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Zze(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Jze(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),eWe(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),aWe(this.gl,this.debug,e,t)},n.prototype.uploadDenseMatrixToTexture=function(e,t,r,i){this.throwIfDisposed(),iWe(this.gl,this.debug,e,t,r,i,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),nWe(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),tWe(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(XY(this.gl,this.debug,this.framebuffer),this.outputTexture=null),un(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,r){var i=this;return this.downloadMatrixDriver(e,function(){return uWe(i.gl,i.debug,t,r,i.textureConfig)})},n.prototype.downloadPackedMatrixFromBuffer=function(e,t,r,i,a,o){return lWe(this.gl,e,0,0,0,a,o,this.textureConfig)},n.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return oWe(this.gl,e,t)},n.prototype.createBufferFromTexture=function(e,t,r){this.bindTextureToFrameBuffer(e);var i=sWe(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},n.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},n.prototype.createFence=function(e){var t,r,i=this;if(ct().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=a.clientWaitSync(o,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},t=o}else ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(t,ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(e,t,r){var i=this;return this.downloadMatrixDriver(e,function(){return cWe(i.gl,i.debug,t,r)})},n.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,r=a7e(t,this.debug,e),i=Kze(t,this.debug),a=o7e(t,this.debug);return un(t,this.debug,function(){return t.attachShader(a,i)}),un(t,this.debug,function(){return t.attachShader(a,r)}),u7e(t,this.debug,a),this.debug&&lM(t,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=rWe(t,this.debug,this.program,this.vertexBuffer)),a},n.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&un(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},n.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&lM(this.gl,this.debug,this.program),un(this.gl,this.debug,function(){return t.gl.useProgram(e)})},n.prototype.getUniformLocation=function(e,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?g7e(this.gl,this.debug,e,t):m7e(this.gl,e,t)},n.prototype.getAttributeLocation=function(e,t){var r=this;return this.throwIfDisposed(),un(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,t)})},n.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},n.prototype.setInputMatrixTexture=function(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),y7e(this.gl,this.debug,this.program,e,t,r)},n.prototype.setOutputMatrixTexture=function(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)},n.prototype.setOutputPackedMatrixTexture=function(e,t,r){this.throwIfDisposed();var i=FD(t,r),a=i[0],o=i[1];this.setOutputMatrixTextureDriver(e,a,o)},n.prototype.setOutputMatrixWriteRegion=function(e,t,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,t)},n.prototype.setOutputPackedMatrixWriteRegion=function(e,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){this.program!=null&&lM(this.gl,this.debug,this.program),Dk(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),un(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},n.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),un(this.gl,this.debug,function(){return e.gl.finish()})},n.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Tk(this.gl,this.debug,ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),a=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,a),a},n.prototype.endQuery=function(){if(ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(e){return Jt(this,void 0,void 0,function(){var t=this;return en(this,function(r){switch(r.label){case 0:return[4,MU(function(){return t.disposed||t.isQueryAvailable(e,ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},n.prototype.getQueryTime=function(e,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(e,t){if(t===0)return!0;if(t===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint},n.prototype.pollFence=function(e){var t=this;return new Promise(function(r){t.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},n.prototype.pollItems=function(){for(var e=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},n.prototype.addItemToPoll=function(e,t){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||MU(function(){return r.pollItems(),r.itemsToPoll.length===0})},n.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),cM(this.gl,this.debug,e,this.framebuffer),this.debug&&Dk(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(cM(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Dk(this.gl)):XY(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var r=t();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(e,t,r){this.throwIfDisposed();var i=this.gl;cM(i,this.debug,e,this.framebuffer),this.debug&&Dk(i),this.outputTexture=e,un(i,this.debug,function(){return i.viewport(0,0,t,r)}),un(i,this.debug,function(){return i.scissor(0,0,t,r)})},n.prototype.setOutputMatrixWriteRegionDriver=function(e,t,r,i){var a=this;this.throwIfDisposed(),un(this.gl,this.debug,function(){return a.gl.scissor(e,t,r,i)})},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},n}();function uQ(n,e){if(n.length!==e.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+e.length+" inputs");n.forEach(function(t,r){var i=t.logicalShape,a=e[r],o=a.shape;if(!ts(i,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+o+" must match");if(!t.isUniform||!a.isUniform){var s=t.texShape,u=a.isUniform?null:a.texData.texShape;if(!ts(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var fWe=function(n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var r=t.filterWidth,i=t.inChannels,a=t.strideWidth,o=t.strideHeight,s=t.padInfo,u=t.outWidth,l=t.dilationWidth,h=t.dilationHeight,c=t.dataFormat,f=s.left,d=s.top,p=i*r,m=mo(),g=c==="channelsLast",y=g?0:1,v=g?1:2,b="",w=0;w<=1;w++)for(var x=0;x<=1;x++)b+=`
          blockIndex = rc.y + `+x+`;
          pos = rc.x + `+w+`;

          if(blockIndex < `+n[1]+" && pos < "+n[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+o+" - "+d+`;
            d0 = offsetY + `+h+" * (pos / "+p+`);

            if(d0 < `+e[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+f+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+i+`.));

              if(d1 < `+e[v]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*w+x)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*w+x)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+b+`

        `+m.output+` = result;
      }
    `},dWe=function(n,e,t,r,i){this.variableNames=["x"],this.outputShape=[];var a,o=e,s=n[3]-1;this.outputShape=n;var u="float("+t+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `},pWe=function(n,e,t,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=t,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},gWe=function(n,e,t,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,o=e,s=n[3]-1;this.outputShape=n;var u="float("+t+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+a+`;
        setOutput(result);
      }
    `},mWe=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideHeight,t=n.strideWidth,r=n.dilationHeight,i=n.effectiveFilterHeight,a=n.effectiveFilterWidth,o=i-1-n.padInfo.top,s=a-1-n.padInfo.left,u=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},yWe=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,i=n.dilationDepth,a=n.dilationHeight,o=n.dilationWidth,s=n.effectiveFilterDepth,u=n.effectiveFilterHeight,l=n.effectiveFilterWidth,h=s-1-n.padInfo.front,c=u-1-n.padInfo.top,f=l-1-n.padInfo.left,d=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+c+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+d+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},gM=function(n,e,t,r,i,a,o){t===void 0&&(t=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),a===void 0&&(a=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=t?n[1]:n[2],u=Math.ceil(s/2),l=t?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",c=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",p="";a&&(d=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+a+`
        }`:`vec4 activation(vec4 x) {
          `+a+`
        }`,p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+d+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+h+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+c[0]+" * "+f[0]+`);
          result += (`+c[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+p+`

        setOutput(result);
      }
    `},vWe=function(){function n(e,t,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,i){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(t.seedLoc,e)}},n}(),bWe=function(n,e,t,r){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},wWe=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var e=n.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=Cu("rc",e),r=Ci(e),i=function(s,u,l){if(s===1)return"rc > "+u[0];for(var h="",c=s-2;c<s;c++)h+=l[c]+" >= "+u[c],c<s-1&&(h+="||");return h}(e,n,t),a=function(s,u,l,h){if(s===1)return"";var c=h.slice(-2);return`
    int r = `+c[0]+`;
    int c = `+c[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(e,n[n.length-1],n[n.length-2],t),o=function(s,u){var l=s.length,h=function(c,f){for(var d=[],p=0;p<=1;p++)for(var m=0;m<=1;m++){for(var g=(p===0?"r":"rp1")+", "+(m===0?"c":"cp1"),y=2;y<c;y++)g=f[f.length-1-y]+","+g;d.push(g)}return d}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+h[0]+`),
          cEdge ? 0. : getA(`+h[1]+`),
          rEdge ? 0. : getA(`+h[2]+`),
          rEdge || cEdge ? 0. : getA(`+h[3]+")"}(n,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},xWe=function(n,e,t){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+n[l]+u[1]});var r=n.length,i=Ci(r),a=e.map(function(u){return u[0]}).join(","),o=e.map(function(u,l){return u[0]+n[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+a+`);
      `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},_We=function(n,e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(g,y){return g[0]+n[y]+g[1]});for(var r=n.length,i=Ci(r),a=e.map(function(g){return g[0]}).join(","),o=e.map(function(g,y){return g[0]+n[y]}).join(","),s=Cu("rc",r),u=Cu("source",r),l=s[r-1]+" < "+this.outputShape[r-1],h=r===1?"source":"vec2("+u.slice(-2).join()+")",c=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",p=0,m=r===1?2:4;p<m;p++)d+=`
        `+c[p]+`
        if (`+f+`) {
          result[`+p+"] = float("+t+`);
        } else {
          `+i+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+h+`);
        }
      `;d+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+a+`);
      const `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+d+`
        setOutput(result);
      }
    `},IC=function(n,e,t,r,i){if(r===void 0&&(r=!1),i===void 0&&(i=!1),this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var a=n.filterWidth,o=n.strideHeight,s=n.strideWidth,u=n.dilationHeight,l=n.dilationWidth,h=n.effectiveFilterHeight,c=n.effectiveFilterWidth,f=n.padInfo.top,d=n.padInfo.left;this.outputShape=n.outShape;var p=e==="avg",m="((batch  * "+n.inHeight+" + xR) * "+n.inWidth+" + xC) * "+n.inChannels+" + d",g="(xR * "+n.inWidth+" + xC) * "+n.inChannels+" + d",y="0.0";if(p||(y="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+s+`);
        const ivec2 pads = ivec2(`+f+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+h+`;
              wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+c+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = `+(r?i?m:g:"wR * "+c+" + wC")+`;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(v="avgValue / count");var b=4*Math.floor(a/4),w=a%4,x=`
      if (`+p+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+f+", "+d+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+h+`;
            wR += `+u+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+b+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+x+`
          }

          int xC = xCCorner + `+b+`;
          if (`+(w===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+x+`
          } else if (`+(w===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+x+`
          } else if (`+(w===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+x+`
          }
        }
        setOutput(`+v+`);
      }
    `}},mM=function(n,e,t,r,i){if(r===void 0&&(r=!1),i===void 0&&(i=!1),this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var a=n.filterWidth,o=n.strideDepth,s=n.strideHeight,u=n.strideWidth,l=n.dilationDepth,h=n.dilationHeight,c=n.dilationWidth,f=n.effectiveFilterDepth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=n.padInfo.front,g=n.padInfo.top,y=n.padInfo.left;this.outputShape=n.outShape;var v=e==="avg",b="0.0";if(v||(b="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+o+", "+s+", "+u+`);
        const ivec3 pads = ivec3(`+m+", "+g+", "+y+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+f+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+n.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+d+`;
                wR += `+h+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+p+`;
                  wC += `+c+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = `+(r?i?"(((batch * "+n.inDepth+" + xD) * "+n.inHeight+" + xR) * "+n.inWidth+" + xC) * "+n.inChannels+" + ch":"((xD * "+n.inHeight+" + xR) * "+n.inWidth+" + xC) * "+n.inChannels+" + ch":"wD * "+d+" * "+p+` +
                      wR * `+p+" + wC")+`;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var w=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(w="avgValue / count");var x=4*Math.floor(a/4),S=a%4,E=`
      if (`+v+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+o+", "+s+", "+u+`);
      const ivec3 pads = ivec3(`+m+", "+g+", "+y+`);
      const float initializationValue = `+b+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+b+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+f+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`;
            wR += `+h+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+x+`; wC += 4) {
              int xC = xCCorner + wC * `+c+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+c+`, ch)
              );

              `+E+`
            }

            int xC = xCCorner + `+x+`;
            if (`+(S===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+E+`
            } else if (`+(S===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                initializationValue,
                initializationValue
              );

              `+E+`
            } else if (`+(S===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                initializationValue
              );

              `+E+`
            }
          }
          setOutput(`+w+`);
        }
      }
    `}},SWe=function(n,e){this.variableNames=["x"];var t=n.windowSize,r=n.batchSize,i=n.inSize,a=Math.ceil(i/t);this.outputShape=[r,a];var o="0.0",s="";e==="prod"?o="1.0":e==="min"?(o="1.0 / 1e-20",s="min"):e==="max"&&(o="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(t/4),h=t%4,c=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,f="vec4";e==="all"?(o="1.0",c=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):e==="any"&&(o="0.0",c=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var d="";i%t>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+c+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(h===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+c+`
        } else if (`+(h===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+c+`
        } else if (`+(h===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+c+`
        }
        setOutput(`+u+`);
      }
    `},CWe=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var t="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),t+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Rv(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+vW(n)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+n[1]+`;
        int cols = `+n[2]+`;

        `+t+`

        setOutput(result);
      }
    `},EWe=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=n.shape,s=o[1],u=o[2],l=[t&&s>1?i-1:i,t&&u>1?a-1:a],h=[t&&s>1?s-1:s,t&&u>1?u-1:u],c=l[0]/h[0],f=l[1]/h[1],d=1/c,p=1/f,m=2*Math.ceil(d)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+c+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},TWe=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var i=n[0],a=n[1],o=n[2],s=n[3];this.outputShape=[i,e,t,s];var u=[r&&e>1?a-1:a,r&&t>1?o-1:o],l=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},DWe=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=n[0],a=n[1],o=n[2],s=n[3];this.outputShape=[i,e,t,s];var u=[r&&e>1?a-1:a,r&&t>1?o-1:o],l=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},AWe=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=n.shape,s=o[1],u=o[2],l=[t&&s>1?i-1:i,t&&u>1?a-1:a],h=[t&&s>1?s-1:s,t&&u>1?u-1:u],c=l[0]/h[0],f=l[1]/h[1],d=1/c,p=1/f,m=2*Math.ceil(d)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+c+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+h[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+h[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},kWe=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var i=n[0],a=n[1],o=n[2],s=n[3];this.outputShape=[i,e,t,s];var u=[r&&e>1?a-1:a,r&&t>1?o-1:o],l=[r&&e>1?e-1:e,r&&t>1?t-1:t],h=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+h+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},NWe=function(n,e){this.variableNames=["x"];var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=n,t!==1){var r=n.map(function(a,o){return function(s){return e.indexOf(s)!==-1&&n[s]!==1?n[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(o)}).join(","),i=Ci(t);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+n[0]+` - coord - 1));
        }
      `},OWe=function(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=n;var r=Cu("rc",t),i=r[t-1]+" + 1 < "+this.outputShape[t-1],a=r[t-2]+" + 1 < "+this.outputShape[t-2],o=Ci(t);function s(u){var l=n.map(function(h,c){return function(f,d){return e.indexOf(f)!==-1&&n[f]!==1?n[f]+" - "+d[f]+" - 1":""+d[f]}(c,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+n[0]+` - rc - 1),
            `+n[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+n[0]+` - (rc  + 1) - 1),
                `+n[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[t-1]="("+u[t-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+function(u){return u[t-2]="("+u[t-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[t-1]="("+u[t-1]+" + 1)",u[t-2]="("+u[t-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},lQ=function(n,e,t,r,i,a,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=Ci(i.length),u=Ci(a.length),l="";t===1?l="i":t===2&&(l="i, j");var h="getIndices("+l+")",c="";r===1?c="i":r===2&&(c="i, coords[1]");var f="getUpdates("+c+")",d=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+n+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+h+`);
              flattenedIndex += index * `+d+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},RWe=function(n,e){this.variableNames=["x","segmentIds"];var t=n.windowSize,r=n.batchSize,i=n.inSize,a=n.numSegments,o=a*Math.ceil(i/t);this.outputShape=[r,o];var s=4*Math.floor(t/4),u=t%4,l=`
        sumValue += dot(values, segFilter);
    `,h="";i%t>0&&(h=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var c="";i%t>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+c+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},IWe=function(n,e,t){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<n&&o.push(""+a[u]);r=o.join(),i=s.join()}var l=Ci(t);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},FWe=function(){function n(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,r=Ci(this.rank),i="uniform int start["+this.rank+"];",a=function(o){if(o===1)return"sourceLoc";if(o<=6)return yM.slice(0,o).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(o,s){return"sourceLoc."+yM[s]+" = start["+s+"] + coords."+yM[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+t+`
        setOutput(getSource(`+a+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(i,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),yM=["x","y","z","w","u","v"],PWe=function(){function n(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Ci(this.rank),r=Cu("coords",this.rank),i=Cu("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",o="getChannel(getSource("+i.join()+"), "+a+")",s=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+o+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+t+"("+e.map(function(h,c){return"start["+c+"]"}).join()+");":e.map(function(h,c){return i[c]+" = "+r[c]+" + start["+c+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(i,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),LWe=function(n,e,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=Ci(t.length),a=Ci(t.length),o="";if(r===1)o="coords * strides + begin";else{var s=0;o=t.map(function(u,l){return s++,t.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+n+`);
      `+i+" strides = "+i+"("+e+`);

      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},MWe=function(){function n(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(e,t,r){var i,a=cQ(t,r),o=hQ(e,a,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}return this.numUsedTextures++,this.log(),a===hl.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===hl.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===hl.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===hl.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===hl.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(i),i},n.prototype.releaseTexture=function(e,t,r,i){if(this.freeTextures!=null){var a=hQ(t,cQ(r,i),i);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[a],s=o.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1),this.log()}},n.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(i){e.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n}();function cQ(n,e){if(n===ml.UPLOAD)return hl.PACKED_2X2_FLOAT32;if(n===ml.RENDER||n==null)return function(t){return ct().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?hl.PACKED_2X2_FLOAT32:hl.UNPACKED_FLOAT32:t?hl.PACKED_2X2_FLOAT16:hl.UNPACKED_FLOAT16}(e);if(n===ml.DOWNLOAD||n===ml.PIXELS)return hl.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function hQ(n,e,t){return n[0]+"_"+n[1]+"_"+e+"_"+t}var UWe=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[r]*e[r];this.outputShape=t,this.rank=t.length;var i=Ci(this.rank),a=function(o){var s=o.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+o[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],h=0;h<o.length;h++)l.push("imod("+u[h]+", "+o[h]+")");return l.join()}(n);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},bW=1.7580993408473768,wW=1.0507009873554805,Un=function(n,e){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Ch="if (isnan(x)) return x;",BWe="return x;",fQ="return abs(x);",Qde=Ch+`
  return (x < 0.0) ? 0.0 : x;
`,Zde=Ch+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Jde="return (x >= 0.0) ? x : (exp(x) - 1.0);",zWe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+bW+`;
  float scale = `+wW+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,dQ="return -x;",pQ="return ceil(x);",gQ="return floor(x);",mQ="return exp(x);",yQ="return exp(x) - 1.0;",WWe=Ch+`
  return sin(x);
`,jWe=Ch+`
  return cos(x);
`,$We=Ch+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,qWe=Ch+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,VWe=Ch+`
  return atan(x);
`,HWe=Ch+"return log(x + sqrt(x * x + 1.0));",GWe=Ch+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,XWe=Ch+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Ok="return x;",KWe="return x;",epe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,tpe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,npe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,eS=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},YWe=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var e=n.length,t=Cu("rc",e),r=Ci(e),i=function(s,u){if(s===1)return"rc";for(var l="",h=0;h<s;h++)l+=u[h],h<s-1&&(l+=",");return l}(e,t),a=t.slice(-2),o=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},Rk={};function Ik(n,e){if(e===void 0&&(e=!1),n==="linear")return e?KWe:BWe;if(n==="relu")return e?epe:Qde;if(n==="elu")return e?npe:Jde;if(n==="relu6")return e?tpe:Zde;if(n==="prelu")return e?Yde:Kde;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var QWe=600,ZWe=function(n){function e(t){var r,i=n.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!ct().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var a=$f(ct().getNumber("WEBGL_VERSION"));i.binaryCache=((r=ct().getNumber("WEBGL_VERSION"))in Rk||(Rk[r]={}),Rk[r]),i.gpgpu=new hWe(a),i.canvas=a.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=t,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=t.gl.canvas;return i.textureManager=new MWe(i.gpgpu),i.numMBBeforeWarning=ct().global.screen==null?1024:ct().global.screen.height*ct().global.screen.width*window.devicePixelRatio*QWe/1024/1024,i.texData=new Mde(i,Ve),i}return Sh(e,n),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,r,i){if(ct().getBool("DEBUG")&&this.checkNumericalProblems(t),i==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={};return this.texData.set(a,{shape:r,dtype:i,values:t,usage:ml.UPLOAD}),a},e.prototype.move=function(t,r,i,a){if(ct().getBool("DEBUG")&&this.checkNumericalProblems(r),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:i,dtype:a,values:r,usage:ml.UPLOAD})},e.prototype.readSync=function(t){var r=this.texData.get(t),i=r.values,a=r.dtype,o=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var h=void 0;h=l?new eS(u,Ok):new Un(u,Ok);var c=this.runWebGLProgram(h,[{dataId:t,shape:u,dtype:a}],a),f=this.readSync(c.dataId);return this.disposeData(c.dataId),f}if(i!=null)return this.convertAndCacheOnCPU(t);if(a==="string")return i;var d,p,m=this.activeTimers!=null;return m&&(d=rh()),a==="complex64"?p=HU(o.real.dataSync(),o.imag.dataSync()):p=this.getValuesFromTexture(t),m&&(this.downloadWaitMs+=rh()-d),this.convertAndCacheOnCPU(t,p)},e.prototype.read=function(t){return Jt(this,void 0,void 0,function(){var r,i,a,o,s,u,l,h,c,f,d,p,m,g,y,v,b,w,x,S,E,A;return en(this,function(k){switch(k.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(T){return r.push(T)})];if(i=this.texData.get(t),a=i.values,o=i.shape,s=i.slice,u=i.dtype,l=i.complexTensors,h=i.isPacked,s!=null)return c=void 0,c=h?new eS(o,Ok):new Un(o,Ok),f=this.runWebGLProgram(c,[{dataId:t,shape:o,dtype:u}],u),d=this.read(f.dataId),this.disposeData(f.dataId),[2,d];if(a!=null)return[2,this.convertAndCacheOnCPU(t)];if(!ct().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ct().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&ct().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(t),g=this.texData.get(m.dataId),p=(A=this.gpgpu).createBufferFromTexture.apply(A,[g.texture].concat(OC(o)))),this.pendingRead.set(t,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:k.sent(),k.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return v=k.sent(),b=v[0],w=v[1],y=HU(b,w),[3,5];case 4:p==null?y=this.getValuesFromTexture(t):(x=Qt(o),y=this.gpgpu.downloadFloat32MatrixFromBuffer(p,x)),k.label=5;case 5:return m!=null&&this.disposeData(m.dataId),S=this.convertAndCacheOnCPU(t,y),E=this.pendingRead.get(t),this.pendingRead.delete(t),E.forEach(function(T){return T(S)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,S]}})})},e.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var i=t[r];if(!n7e(i))throw ct().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(t){var r,i=this.texData.get(t),a=i.shape,o=i.dtype,s=i.isPacked,u=Qt(a);if(ct().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(t),h=this.texData.get(l.dataId),c=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[h.texture].concat(OC(a))).subarray(0,u);return this.disposeData(l.dataId),c}var f=ct().getBool("WEBGL_PACK")&&s===!0,d=f?hM(a):a,p=f?new Wze(d):new zze(d),m=this.runWebGLProgram(p,[{shape:d,dtype:o,dataId:t}],"float32"),g=this.texData.get(m.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,u);return this.disposeData(m.dataId),y},e.prototype.time=function(t){return Jt(this,void 0,void 0,function(){var r,i,a,o,s,u,l;return en(this,function(h){switch(h.label){case 0:return r=this.activeTimers,i=[],a=!1,this.programTimersStack==null?(this.programTimersStack=i,a=!0):this.activeTimers.push(i),this.activeTimers=i,t(),o=g1(this.activeTimers.map(function(c){return c.query})).filter(function(c){return c!=null}),s=g1(this.activeTimers.map(function(c){return c.name})).filter(function(c){return c!=null}),this.activeTimers=r,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return l=h.sent(),u.kernelMs=Ffe(l),u.getExtraProfileInfo=function(){return l.map(function(c,f){return{name:s[f],ms:c}}).map(function(c){return c.name+": "+c.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},h.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:rh(),endMs:null}},e.prototype.endTimer=function(t){return ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=rh(),t)},e.prototype.getQueryTime=function(t){return Jt(this,void 0,void 0,function(){var r;return en(this,function(i){return ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var r=this.texData.get(t),i=r.texture,a=r.dtype,o=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,h=l&&l.origDataId||t,c=this.dataRefCount.get(h);c>1?this.dataRefCount.set(h,c-1):(this.dataRefCount.delete(h),i!=null&&(this.numBytesInGPU-=this.computeBytes(o,a),this.textureManager.releaseTexture(i,o,s,u)));var f=this.texData.get(t);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return ct().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Ve.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every(function(a){return i.texData.get(a.dataId).texture==null&&Qt(a.shape)<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,r){var i=this.makeOutput(t.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:Ve.keep(t.clone()),imag:Ve.keep(r.clone())},i},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,i){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,i);if(Qt(i)===0)return Na([],i,t.dtype);var a=this.texData.get(t.dataId).isPacked,o=Pde(t.shape,r,i);if(a||!o){var s=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PWe(i):new FWe(i),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[t],null,u)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,i)},e.prototype.shallowSlice=function(t,r,i){var a=this.texData.get(t.dataId),o=this.makeOutput(i,t.dtype),s=this.texData.get(o.dataId);Object.assign(s,a),s.shape=i,s.dtype=t.dtype;var u=Lde(r,t.strides);a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||t.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),o},e.prototype.stridedSlice=function(t,r,i,a){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,i,a);var o=fW(r,i,a);if(o.some(function(u){return u===0}))return Na([],o);var s=new LWe(r,a,o);return this.compileAndRun(s,[t])},e.prototype.reverse=function(t,r){var i=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OWe(t.shape,r):new NWe(t.shape,r);return this.compileAndRun(i,[t])},e.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var i=t.map(function(d){return pl(d)}),a=t.map(function(d){return ih(d)});return xs(this.concat(i,r),this.concat(a,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>ct().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(t.length/2),s=this.concat(t.slice(0,o),r),u=this.concat(t.slice(o),r);return this.concat([s,u],r)}if(ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var l=new Tze(t.map(function(d){return d.shape}),r);return this.compileAndRun(l,t)}var h=Jw(t.map(function(d){return d.shape}),r),c=t.map(function(d){return d.as2D(-1,Qt(d.shape.slice(r)))}),f=new Eze(c.map(function(d){return d.shape}));return this.compileAndRun(f,c).reshape(h)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(ct().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,dQ,t.dtype);var r=new Un(t.shape,dQ);return this.compileAndRun(r,[t])},e.prototype.batchMatMul=function(t,r,i,a){var o=i?t.shape[2]:t.shape[1],s=a?r.shape[1]:r.shape[2],u=i?t.shape[1]:t.shape[2],l=t.shape[0];if((o===1||s===1)&&u>1e3){i&&(t=gr(t,[0,2,1])),a&&(r=gr(r,[0,2,1]));var h=s===1?t:t.as3D(l,u,1),c=s===1?2:1,f=s===1?r.as3D(l,1,u):r;return this.multiply(h,f).sum(c,!0)}var d=js(t.dtype,r.dtype),p=new gM(t.shape,[l,o,s],i,a);return this.compileAndRun(p,[t,r],d)},e.prototype.fusedBatchMatMul=function(t){var r=t.a,i=t.b,a=t.transposeA,o=t.transposeB,s=t.bias,u=t.activation,l=t.preluActivationWeights,h=a?r.shape[2]:r.shape[1],c=o?i.shape[1]:i.shape[2],f=r.shape[0],d=js(r.dtype,i.dtype),p=s!=null,m=l!=null,g=u?Ik(u,!0):null,y=new gM(r.shape,[f,h,c],a,o,p,g,m),v=[r,i];return s&&v.push(s),l&&v.push(l),this.compileAndRun(y,v,d)},e.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var i=this.texData.get(t.dataId),a=this.texData.get(r.dataId),o=new tQ(vze,t.shape,r.shape),s=new tQ(bze,t.shape,r.shape),u=[this.makeComplexComponentTensorInfo(t,i.complexTensors.real),this.makeComplexComponentTensorInfo(t,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)],l=this.compileAndRun(o,u),h=this.compileAndRun(s,u),c=this.complex(l,h);return l.dispose(),h.dispose(),c}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,nQ,t.dtype);var f=new ta(nQ,t.shape,r.shape);return this.compileAndRun(f,[t,r],t.dtype)},e.prototype.batchNormalization=function(t,r,i,a,o,s){var u=[t,r,i],l=null;s!=null&&(l=s.shape,u.push(s));var h=null;if(o!=null&&(h=o.shape,u.push(o)),ct().getBool("WEBGL_PACK_NORMALIZATION")){var c=new yze(t.shape,r.shape,i.shape,l,h,a);return this.compileAndRun(c,u)}var f=new mze(t.shape,r.shape,i.shape,l,h,a);return this.compileAndRun(f,u)},e.prototype.localResponseNormalization4D=function(t,r,i,a,o){var s=ct().getBool("WEBGL_PACK_NORMALIZATION")?new gWe(t.shape,r,i,a,o):new dWe(t.shape,r,i,a,o);return this.compileAndRun(s,[t])},e.prototype.LRNGrad=function(t,r,i,a,o,s,u){var l=new pWe(r.shape,a,o,s,u);return this.compileAndRun(l,[r,i,t])},e.prototype.tile=function(t,r){if(t.dtype==="string"){var i=this.readSync(t.dataId).map(function(o){return gE(o)});return qde(Dn(t.shape,t.dtype,i),r)}var a=new UWe(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.pad=function(t,r,i){var a=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _We(t.shape,r,i):new xWe(t.shape,r,i);return this.compileAndRun(a,[t])},e.prototype.gather=function(t,r,i){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,i);var a=new Gze(t.shape,r.size,i);return this.compileAndRun(a,[t,r])},e.prototype.batchToSpaceND=function(t,r,i){Pe(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(c,f){return c*f}),o=dO(t.shape,r,a),s=pO(o.length,r.length),u=gO(t.shape,r,a),l=ide(i,r.length),h=ade(u,i,r.length);return gr(t.reshape(o),s).reshape(u).slice(l,h)},e.prototype.spaceToBatchND=function(t,r,i){Pe(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(f,d){return f*d}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<t.shape.length;++s)o.push([0,0]);var u=t.pad(o),l=dO(u.shape,r,a,!1),h=pO(l.length,r.length,!1),c=gO(u.shape,r,a,!1);return gr(u.reshape(l),h).reshape(c)},e.prototype.reduce=function(t,r,i){var a=t.shape[0],o=t.shape[1],s=fM(o),u=new SWe({windowSize:s,inSize:o,batchSize:a},r),l=this.compileAndRun(u,[t],i);return l.shape[1]===1?l:this.reduce(l,r,i)},e.prototype.argReduce=function(t,r,i){i===void 0&&(i=null);var a=t.shape[0],o=t.shape[1];i!=null&&(a=i.shape[0],o=i.shape[1]);var s=fM(o),u=new oze({windowSize:s,inSize:o,batchSize:a},r,i==null),l=[t];i!=null&&l.push(i);var h=this.compileAndRun(u,l,"int32");return h.shape[1]===1?h:this.argReduce(t,r,h)},e.prototype.argReducePacked=function(t,r,i){i===void 0&&(i=null);var a=i!=null?i.shape:t.shape,o=fM(a[a.length-1]),s=new dze(a,o,r,i==null),u=i==null?[t]:[t,i],l=this.compileAndRun(s,u,"int32");return l.rank===t.rank?this.argReducePacked(t,r,l):l},e.prototype.sum=function(t,r){cl("sum",r,t.rank);var i=lo(t.shape,r),a=i[0],o=Qt(i[1]),s=t.as2D(-1,o),u=iM(t.dtype);return this.reduce(s,"sum",u).reshape(a)},e.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var i=lo(t.shape,r),a=i[0],o=Qt(i[1]),s=t.as2D(-1,o),u=iM(t.dtype);return this.reduce(s,"prod",u).reshape(a)},e.prototype.unsortedSegmentSum=function(t,r,i){var a=0,o=qf([a],t.rank),s=t;o!=null&&(s=gr(t,o),a=Vf(1,t.rank)[0]);var u=function(d,p,m){for(var g=[],y=d.length,v=0;v<y;v++)v!==p?g.push(d[v]):g.push(m);return g}(s.shape,a,i),l=Qt([s.shape[a]]),h=s.as2D(-1,l),c=iM(t.dtype),f=this.segOpCompute(h,"unsortedSegmentSum",r,c,i).reshape(u);return o!=null&&(f=gr(f,nW(o))),f},e.prototype.segOpCompute=function(t,r,i,a,o){var s=t.shape[0],u=t.shape[1],l=function(f,d){var p,m=!1;for(f<=Fde?(p=f,m=!0):p=sO(f,Math.floor(Math.sqrt(f)));!m;)p>d||p===f?m=!0:p=sO(f,p+1);return p}(u,o),h=new RWe({windowSize:l,inSize:u,batchSize:s,numSegments:o}),c=this.compileAndRun(h,[t,i],a);return c.shape[1]===o?c:(i=vE(0,o).tile([u/l]),this.segOpCompute(c,r,i,a,o))},e.prototype.argMinMaxReduce=function(t,r,i){var a=[r];if(cl("arg"+i.charAt(0).toUpperCase()+i.slice(1),a,t.rank),!ct().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var o=lo(t.shape,a),s=o[0],u=Qt(o[1]),l=t.as2D(-1,u);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(t,i)},e.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},e.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},e.prototype.cumsum=function(t,r,i,a){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var o=new Pze(t.shape,i,a);return this.compileAndRun(o,[t])},e.prototype.equal=function(t,r){if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var i=new ta("return float(a == b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.notEqual=function(t,r){if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new ta("return float(a != b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new ta("return float(a < b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.lessEqual=function(t,r){if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new ta("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new ta("return float(a > b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.greaterEqual=function(t,r){if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new ta("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.logicalNot=function(t){var r=new Un(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},e.prototype.logicalAnd=function(t,r){if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new ta("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.logicalOr=function(t,r){if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new ta("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.select=function(t,r,i){var a=new IWe(t.rank,r.shape,r.rank);return this.compileAndRun(a,[t,r,i],js(r.dtype,i.dtype))},e.prototype.where=function(t){hO("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return yW(t.shape,r)},e.prototype.topk=function(t,r,i){return Vde(t.dataSync(),t.shape,t.dtype,r)},e.prototype.min=function(t,r){cl("min",r,t.rank);var i=lo(t.shape,r),a=i[0],o=Qt(i[1]),s=t.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(a)},e.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var i=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sf(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new ta(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.mod=function(t,r){var i=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sf(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new ta(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);cl("max",r,t.rank);var i=lo(t.shape,r),a=i[0],o=Qt(i[1]),s=t.as2D(-1,o);return this.reduce(s,"max",s.dtype).reshape(a)},e.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var i=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sf(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new ta(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.all=function(t,r){cl("all",r,t.rank);var i=lo(t.shape,r),a=i[0],o=Qt(i[1]),s=t.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(a)},e.prototype.any=function(t,r){cl("any",r,t.rank);var i=lo(t.shape,r),a=i[0],o=Qt(i[1]),s=t.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(a)},e.prototype.floorDiv=function(t,r){if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new ta(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(i,[t,r],"int32")},e.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,dM);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var i=js(t.dtype,r.dtype);if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,dM,i);var a=new ta(dM,t.shape,r.shape);return this.compileAndRun(a,[t,r],i)},e.prototype.packedUnaryOp=function(t,r,i){var a=new eS(t.shape,r);return this.compileAndRun(a,[t],i)},e.prototype.packedBinaryOp=function(t,r,i,a,o){o===void 0&&(o=!1);var s=new sf(i,t.shape,r.shape,o);return this.compileAndRun(s,[t,r],a)},e.prototype.complexSeparableBinaryOp=function(t,r,i){var a=this,o=this.texData.get(t.dataId),s=this.texData.get(r.dataId),u=[[o.complexTensors.real,s.complexTensors.real],[o.complexTensors.imag,s.complexTensors.imag]].map(function(f){var d=f[0],p=f[1],m=a.makeComplexComponentTensorInfo(t,d),g=a.makeComplexComponentTensorInfo(r,p),y=new ta(i,t.shape,r.shape);return a.compileAndRun(y,[m,g],js(d.dtype,p.dtype))}),l=u[0],h=u[1],c=this.complex(l,h);return l.dispose(),h.dispose(),c},e.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},e.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>ct().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),i=this.addN(t.slice(0,r)),a=this.addN(t.slice(r));return this.addN([i,a])}var o=t.map(function(l){return l.dtype}).reduce(function(l,h){return js(l,h)}),s=t.map(function(l){return l.shape}),u=ct().getBool("WEBGL_PACK")?new sze(t[0].shape,s):new aze(t[0].shape,s);return this.compileAndRun(u,t,o)},e.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,pM);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var i=js(t.dtype,r.dtype);if(ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,pM,t.dtype);var a=new ta(pM,t.shape,r.shape);return this.compileAndRun(a,[t,r],i)},e.prototype.pow=function(t,r){var i=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sf(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new ta(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),a=js(t.dtype,r.dtype);return this.compileAndRun(i,[t,r],a)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(ct().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,pQ,t.dtype);var r=new Un(t.shape,pQ);return this.compileAndRun(r,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(ct().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,gQ,t.dtype);var r=new Un(t.shape,gQ);return this.compileAndRun(r,[t])},e.prototype.sign=function(t){var r=new Un(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},e.prototype.isNaN=function(t){var r=new Un(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isInf=function(t){var r=new Un(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isFinite=function(t){var r=new Un(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.round=function(t){var r=new Un(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(ct().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,mQ,t.dtype);var r=new Un(t.shape,mQ);return this.compileAndRun(r,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(ct().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,yQ,t.dtype);var r=new Un(t.shape,yQ);return this.compileAndRun(r,[t])},e.prototype.softmax=function(t,r){var i=Ma([r],t.shape),a=this.max(t,i),o=Ou(a.shape,i),s=this.subtract(t,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return ya(u,l)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(ct().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new Un(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},e.prototype.log1p=function(t){var r=new Un(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},e.prototype.sqrt=function(t){var r=new Un(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new Un(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},e.prototype.reciprocal=function(t){var r=new Un(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},e.prototype.relu=function(t){var r;return r=ct().getBool("WEBGL_PACK")?new eS(t.shape,epe):new Un(t.shape,Qde),this.compileAndRun(r,[t])},e.prototype.relu6=function(t){var r;return r=ct().getBool("WEBGL_PACK")?new eS(t.shape,tpe):new Un(t.shape,Zde),this.compileAndRun(r,[t])},e.prototype.prelu=function(t,r){var i=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sf(Yde,t.shape,r.shape):new ta(Kde,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.elu=function(t){if(ct().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,npe,t.dtype);var r=new Un(t.shape,Jde);return this.compileAndRun(r,[t])},e.prototype.eluDer=function(t,r){var i=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sf(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new ta("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.selu=function(t){var r=new Un(t.shape,zWe);return this.compileAndRun(r,[t])},e.prototype.int=function(t){var r=new Un(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},e.prototype.clip=function(t,r,i){var a,o=(a=ct().getBool("WEBGL_PACK_CLIP")?new Sze(t.shape):new _ze(t.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(a,[t],null,o)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(ct().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,fQ,t.dtype);var r=new Un(t.shape,fQ);return this.compileAndRun(r,[t])},e.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),i=new Cze(t.shape),a=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(i,a)},e.prototype.sigmoid=function(t){var r=new Un(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},e.prototype.softplus=function(t){var r=new Un(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},e.prototype.sin=function(t){var r=new Un(t.shape,WWe);return this.compileAndRun(r,[t])},e.prototype.cos=function(t){var r=new Un(t.shape,jWe);return this.compileAndRun(r,[t])},e.prototype.tan=function(t){var r=new Un(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},e.prototype.asin=function(t){var r=new Un(t.shape,$We);return this.compileAndRun(r,[t])},e.prototype.acos=function(t){var r=new Un(t.shape,qWe);return this.compileAndRun(r,[t])},e.prototype.atan=function(t){var r=new Un(t.shape,VWe);return this.compileAndRun(r,[t])},e.prototype.atan2=function(t,r){var i=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sf(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new ta(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.sinh=function(t){var r=new Un(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.cosh=function(t){var r=new Un(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.tanh=function(t){var r=new Un(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},e.prototype.asinh=function(t){var r=new Un(t.shape,HWe);return this.compileAndRun(r,[t])},e.prototype.acosh=function(t){var r=new Un(t.shape,GWe);return this.compileAndRun(r,[t])},e.prototype.atanh=function(t){var r=new Un(t.shape,XWe);return this.compileAndRun(r,[t])},e.prototype.erf=function(t){var r=new Un(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},e.prototype.step=function(t,r){var i=new Un(t.shape,function(a){return a===void 0&&(a=0),Ch+`
    return x > 0.0 ? 1.0 : float(`+a+`);
  `}(r));return this.compileAndRun(i,[t])},e.prototype.conv2dByMatMul=function(t,r,i,a,o,s){var u=t.shape,l=this.texData.get(t.dataId),h=i.inChannels,c=u[0]*u[1]*u[2],f=i.outChannels,d=i.dataFormat==="channelsLast",p=(c===1||f===1)&&h>1e3,m=u[2]%2!=0&&!!l.isPacked;if(p||!ct().getBool("WEBGL_LAZILY_UNPACK")||!ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var g=d?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],y=this.reshape(t,[1,g,i.inChannels]),v=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b:v,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),i.outShape)}var b=d?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),w={dataId:t.dataId,shape:[1,b,i.inChannels],dtype:t.dtype},x=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,Pe(kk(l.shape,w.shape),function(){return"packed reshape "+l.shape+" to "+w.shape+" isn't free"});var S=this.reshape(r,[1,i.inChannels,i.outChannels]),E=this.fusedBatchMatMul({a:w,b:S,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),A=this.texData.get(E.dataId);return Pe(A.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=x,A.shape=i.outShape,Ve.makeTensorFromDataId(E.dataId,i.outShape,E.dtype)},e.prototype.conv2dWithIm2Row=function(t,r,i,a,o,s){var u=i.filterWidth,l=i.filterHeight,h=i.inChannels,c=i.outWidth,f=i.outHeight,d=i.dataFormat==="channelsLast",p=u*l*h,m=f*c,g=[p,m],y=t.squeeze([0]),v=r.reshape([1,p,-1]),b=new fWe(g,y.shape,i),w=this.compileAndRun(b,[y]).reshape([1,g[0],g[1]]),x=a!=null,S=s!=null,E=o?Ik(o,!0):null,A=new gM(w.shape,[1,m,i.outChannels],!0,!1,x,E,S),k=[w,v];a&&k.push(a),S&&k.push(s);var T=this.compileAndRun(A,k);return d?T.reshape([1,f,c,i.outChannels]):T.reshape([1,i.outChannels,f,c])},e.prototype.fusedConv2d=function(t){var r=t.input,i=t.filter,a=t.convInfo,o=t.bias,s=t.activation,u=t.preluActivationWeights;if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,a,o,s,u);if(ct().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,a,o,s,u);var l=o!=null,h=u!=null,c=s?Ik(s,!1):null,f=new rQ(a,l,c,h),d=[r,i];return o&&d.push(o),u&&d.push(u),this.compileAndRun(f,d)},e.prototype.conv2d=function(t,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,i);if(ct().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,i);var a=new rQ(i);return this.compileAndRun(a,[t,r])},e.prototype.conv2dDerInput=function(t,r,i){var a=new Aze(i);return this.compileAndRun(a,[t,r])},e.prototype.conv2dDerFilter=function(t,r,i){var a=new Dze(i);return this.compileAndRun(a,[t,r])},e.prototype.fusedDepthwiseConv2D=function(t){var r,i=t.input,a=t.filter,o=t.convInfo,s=t.bias,u=t.activation,l=t.preluActivationWeights,h=ct().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,c=u?Ik(u,h):null,f=[i,a],d=s!=null,p=l!=null;return d&&f.push(s),p&&f.push(l),h?(r=new aQ(o,d,c,p),this.compileAndRun(r,f)):(r=new iQ(o,d,c,p),this.compileAndRun(r,f))},e.prototype.depthwiseConv2D=function(t,r,i){var a;return ct().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(a=new aQ(i),this.compileAndRun(a,[t,r])):(a=new iQ(i),this.compileAndRun(a,[t,r]))},e.prototype.depthwiseConv2DDerInput=function(t,r,i){var a=new Rze(i);return this.compileAndRun(a,[t,r])},e.prototype.depthwiseConv2DDerFilter=function(t,r,i){var a=new Oze(i);return this.compileAndRun(a,[t,r])},e.prototype.conv3d=function(t,r,i){var a=new Ize(i);return this.compileAndRun(a,[t,r])},e.prototype.conv3dDerInput=function(t,r,i){var a=new Nze(i);return this.compileAndRun(a,[t,r])},e.prototype.conv3dDerFilter=function(t,r,i){var a=new kze(i);return this.compileAndRun(a,[t,r])},e.prototype.maxPool=function(t,r){var i=new IC(r,"max",!1);return this.compileAndRun(i,[t])},e.prototype.avgPool=function(t,r){var i=new IC(r,"avg",!1);return this.compileAndRun(i,[t],"float32")},e.prototype.maxPoolBackprop=function(t,r,i,a){var o=new IC(a,"max",!0),s=this.compileAndRun(o,[r]),u=new mWe(a),l=this.compileAndRun(u,[t,s],r.dtype);return s.dispose(),l},e.prototype.avgPoolBackprop=function(t,r,i){var a=new pze(i);return this.compileAndRun(a,[t],r.dtype)},e.prototype.cast=function(t,r){return zde(t,r,this)},e.prototype.unstack=function(t,r){for(var i=t.shape[r],a=new Array(t.rank-1),o=0,s=0;s<t.rank;s++)s!==r&&(a[o++]=t.shape[s]);var u=new Array(t.rank).fill(0),l=t.shape.slice();l[r]=1;var h=new Array(i);for(s=0;s<h.length;s++)u[r]=s,h[s]=this.slice(t,u,l).reshape(a);return h},e.prototype.avgPool3d=function(t,r){var i=new mM(r,"avg",!1);return this.compileAndRun(i,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,r,i){var a=new gze(i);return this.compileAndRun(a,[t],r.dtype)},e.prototype.maxPool3d=function(t,r){var i=new mM(r,"max",!1);return this.compileAndRun(i,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,r,i,a){var o=new mM(a,"max",!0),s=this.compileAndRun(o,[r]),u=new yWe(a),l=this.compileAndRun(u,[t,s],r.dtype);return s.dispose(),l},e.prototype.reshape=function(t,r){var i=this.texData.get(t.dataId);if(i.isPacked&&!kk(t.shape,r)&&(i.texture===null||!kk(i.shape,r))){var a=this.packedReshape(t,r);return Ve.makeTensorFromDataId(a.dataId,a.shape,a.dtype)}return VU(t,r)},e.prototype.resizeBilinear=function(t,r,i,a){var o=ct().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new DWe(t.shape,r,i,a):new TWe(t.shape,r,i,a);return this.compileAndRun(o,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,r,i){var a=new EWe(t,r,i);return this.compileAndRun(a,[t])},e.prototype.resizeNearestNeighbor=function(t,r,i,a){var o=new kWe(t.shape,r,i,a);return this.compileAndRun(o,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,r,i){var a=new AWe(t,r,i);return this.compileAndRun(a,[t])},e.prototype.multinomial=function(t,r,i,a){var o=r?t:Cx(t),s=o.shape[0],u=o.shape[1],l=new vWe(s,u,i),h=l.getCustomSetupFunc(a);return this.compileAndRun(l,[o],"int32",h)},e.prototype.oneHot=function(t,r,i,a){var o=new bWe(t.size,r,i,a);return this.compileAndRun(o,[t])},e.prototype.diag=function(t){var r=new Bze(t.size);return this.compileAndRun(r,[t])},e.prototype.nonMaxSuppression=function(t,r,i,a,o){return hO("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),gW(t.dataSync(),r.dataSync(),i,a,o)},e.prototype.cropAndResize=function(t,r,i,a,o,s){var u=new Fze(t.shape,r.shape,a,o,s);return this.compileAndRun(u,[t,r,i],"float32")},e.prototype.depthToSpace=function(t,r,i){Pe(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var a=t.shape[0],o=i==="NHWC"?t.shape[1]:t.shape[2],s=i==="NHWC"?t.shape[2]:t.shape[3],u=i==="NHWC"?t.shape[3]:t.shape[1],l=o*r,h=s*r,c=u/(r*r),f=new Uze(i==="NHWC"?[a,l,h,c]:[a,c,l,h],r,i);return this.compileAndRun(f,[t])},e.prototype.split=function(t,r,i){return $de(t,r,i)},e.prototype.scatterND=function(t,r,i){var a=mO(0,t,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,h=a.outputSize,c=[h/u,u],f=t.reshape([s,o]),d=r.reshape([s,u]);if(h===0)return VU(Na([]),i);var p=jt(0),m=new lQ(s,o,f.rank,d.rank,l,c);return this.compileAndRun(m,[d,f,p]).reshape(i)},e.prototype.sparseToDense=function(t,r,i,a){var o=mO(0,t,i),s=o.sliceRank,u=o.numUpdates,l=o.strides,h=o.outputSize,c=new lQ(u,s,t.rank,r.rank,l,[h,1]);return this.compileAndRun(c,[r,t,a]).reshape(i)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,r){var i=this.texData.get(t.dataId),a=new oQ(qze,t.shape,r),o=new oQ(Vze,t.shape,r),s=[this.makeComplexComponentTensorInfo(t,i.complexTensors.real),this.makeComplexComponentTensorInfo(t,i.complexTensors.imag)],u=this.compileAndRun(a,s),l=this.compileAndRun(o,s),h=this.complex(u,l).as2D(t.shape[0],t.shape[1]);return u.dispose(),l.dispose(),h},e.prototype.gatherND=function(t,r){var i=r.shape,a=i[i.length-1],o=Ide(t,r),s=o[0],u=o[1],l=o[2],h=o[3],c=r.reshape([u,a]),f=t.reshape([t.size/l,l]),d=new Xze(a,h,[u,l]);return this.compileAndRun(d,[f,c]).reshape(s)},e.prototype.fill=function(t,r,i){if((i=i||_x(r))==="string"){var a=pE(i,Qt(t));return a.fill(r),Ve.makeTensor(a,t,i,this)}var o=new Hze(t,r),s=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],i,s)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},e.prototype.linspace=function(t,r,i){return Wde(t,r,i)},e.prototype.makeTensorInfo=function(t,r){var i=this.write(null,t,r);return this.texData.get(i).usage=null,{dataId:i,shape:t,dtype:r}},e.prototype.makeOutput=function(t,r){var i=this.makeTensorInfo(t,r).dataId;return Ve.makeTensorFromDataId(i,t,r,this)},e.prototype.unpackTensor=function(t){var r=new YWe(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},e.prototype.packTensor=function(t){var r=new wWe(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,r){var i=[lO(t.shape)].concat(cO(t.shape)),a={dtype:t.dtype,shape:i,dataId:t.dataId},o=[lO(r)].concat(cO(r)),s=new CWe(o,i),u=this.runWebGLProgram(s,[a],t.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(t){var r,i=this.texData.get(t),a=i.isPacked,o=i.shape,s=i.dtype,u=hM(o);return r=a?new Mze(u):new Lze(u),{dtype:s,shape:o,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:t}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,r,i,a,o){var s=this;o===void 0&&(o=!1);var u=this.makeTensorInfo(t.outputShape,i),l=this.texData.get(u.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===yE.DENSE){var h=OC(t.outputShape);l.texShape=h.map(function(b){return 2*b})}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),Qt(u.shape)===0)return l.values=m1(u.dtype,0),u;var c=[],f=r.map(function(b){if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var w=s.texData.get(b.dataId);if(w.texture==null){if(!t.packedInputs&&Qt(b.shape)<=ct().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:w.values};t.packedInputs&&(w.isPacked=!0,w.shape=b.shape)}else if(!!w.isPacked!=!!t.packedInputs)b=w.isPacked?s.unpackTensor(b):s.packTensor(b),c.push(b),w=s.texData.get(b.dataId);else if(w.isPacked&&!kk(w.shape,b.shape)){var x=b,S=b.shape;b.shape=w.shape,b=s.packedReshape(b,S),c.push(b),w=s.texData.get(b.dataId),x.shape=S}return s.uploadToGPU(b.dataId),{shape:b.shape,texData:w,isUniform:!1}});this.uploadToGPU(u.dataId);var d,p={shape:u.shape,texData:l,isUniform:!1},m=function(b,w,x){var S="";w.concat(x).forEach(function(k){var T=k.texData!=null&&k.texData.slice!=null&&k.texData.slice.flatOffset>0,O=k.isUniform?"uniform":k.texData.texShape;S+=k.shape+"_"+O+"_"+T});var E=b.userCode,A=b.constructor.name;return A+="_"+S+"_"+E}(t,f,p),g=this.getAndSaveBinary(m,function(){return function(b,w,x,S){var E=w.userCode,A=x.map(function(Y,z){var j={logicalShape:Y.shape,texShape:Y.isUniform?null:Y.texData.texShape,isUniform:Y.isUniform,isPacked:!Y.isUniform&&Y.texData.isPacked,flatOffset:null};return Y.texData!=null&&Y.texData.slice!=null&&Y.texData.slice.flatOffset>0&&(j.flatOffset=Y.texData.slice.flatOffset),{name:w.variableNames[z],shapeInfo:j}}),k=A.map(function(Y){return Y.shapeInfo}),T={logicalShape:S.shape,texShape:S.texData.texShape,isUniform:!1,isPacked:S.texData.isPacked,flatOffset:null},O=uze(A,T,E,w.packedInputs),F=b.createProgram(O),I=null,R=b.getUniformLocation(F,"NAN",!1);ct().getNumber("WEBGL_VERSION")===1&&(I=b.getUniformLocation(F,"INFINITY",!1));for(var U={},B=0;B<w.variableNames.length;B++){var W=w.variableNames[B];U[W]=b.getUniformLocation(F,W,!1),U["offset"+W]=b.getUniformLocation(F,"offset"+W,!1)}return{program:w,source:O,webGLProgram:F,uniformLocations:U,inShapeInfos:k,outShapeInfo:T,infLoc:I,nanLoc:R}}(s.gpgpu,t,f,p)}),y=this.activeTimers!=null;if(y&&(d=this.startTimer()),function(b,w,x,S,E){uQ(w.inShapeInfos,x),uQ([w.outShapeInfo],[S]);var A=S.texData.texture,k=S.texData.texShape;S.texData.isPacked?b.setOutputPackedMatrixTexture(A,k[0],k[1]):b.setOutputMatrixTexture(A,k[0],k[1]),b.setProgram(w.webGLProgram),ct().getNumber("WEBGL_VERSION")===1&&w.infLoc!==null&&b.gl.uniform1f(w.infLoc,1/0),w.nanLoc!==null&&b.gl.uniform1f(w.nanLoc,NaN),x.forEach(function(T,O){var F=w.program.variableNames[O],I=w.uniformLocations[F],R=w.uniformLocations["offset"+F];if(I!=null)if(T.isUniform)if(Qt(T.shape)<2)b.gl.uniform1f(I,T.uniformValues[0]);else{var U=T.uniformValues;U instanceof Float32Array||(U=new Float32Array(U)),b.gl.uniform1fv(I,U)}else T.texData.slice!=null&&R!=null&&b.gl.uniform1i(R,T.texData.slice.flatOffset),b.setInputMatrixTexture(T.texData.texture,I,O)}),E!=null&&E(b,w.webGLProgram),b.executeProgram()}(this.gpgpu,g,f,p,a),c.forEach(function(b){return s.disposeData(b.dataId)}),y&&(d=this.endTimer(d),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(d)})),!ct().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){var v=this.unpackTensor(u);return this.disposeData(u.dataId),v}return u},e.prototype.compileAndRun=function(t,r,i,a,o){o===void 0&&(o=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(t,r,i,a,o);return Ve.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(ct().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ze(function(){if(!ct().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ct().getBool("DEBUG");ct().set("DEBUG",!1);var i=t.abs(jt(1e-8)).dataSync()[0];if(ct().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var r,i=this.texData.get(t),a=i.shape,o=i.dtype,s=i.values,u=i.texture,l=i.usage,h=i.isPacked;if(u==null){var c,f=this.activeTimers!=null;f&&(c=rh());var d=i.texShape;if(d==null&&(d=w7e(a,h),i.texShape=d),s!=null){var p=hM(a),m=void 0,g=d[1],y=d[0],v=s instanceof Uint8Array;h?(g=(r=FD(d[0],d[1]))[0],y=r[1],m=new $ze(p,[y,g],v)):m=new jze(p,[y,g],v);var b=this.makeTensorInfo([y,g],o);this.texData.get(b.dataId).usage=v?ml.PIXELS:ml.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),g,y,s);var w=this.runWebGLProgram(m,[b],o,null,!0),x=this.texData.get(w.dataId);i.texture=x.texture,i.texShape=x.texShape,i.isPacked=x.isPacked,i.usage=x.usage,this.disposeData(b.dataId),this.texData.delete(w.dataId),i.values=null,f&&(this.uploadWaitMs+=rh()-c)}else{var S=this.acquireTexture(d,l,o,h);i.texture=S}}},e.prototype.convertAndCacheOnCPU=function(t,r){var i=this.texData.get(t),a=i.dtype;return this.releaseGPUData(t),r!=null&&(i.values=function(o,s){if(s==="float32"||s==="complex64")return o;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(o.length):new Uint8Array(o.length),l=0;l<u.length;++l)u[l]=Math.round(o[l]);return u}throw new Error("Unknown dtype "+s)}(r,a)),i.values},e.prototype.acquireTexture=function(t,r,i,a){if(this.numBytesInGPU+=this.computeBytes(t,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,a)},e.prototype.computeBytes=function(t,r){return t[0]*t[1]*Xz(r)},e}(Ude);Gfe()&&Ve.registerBackend("webgl",function(){return new ZWe},2);function L1(n,e){return n(e={exports:{}},e.exports),e.exports}var JWe=L1(function(n){(function(e,t,r){function i(s){var u,l=this,h=(u=4022871197,function(c){c=c.toString();for(var f=0;f<c.length;f++){var d=.02519603282416938*(u+=c.charCodeAt(f));d-=u=d>>>0,u=(d*=u)>>>0,u+=4294967296*(d-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var c=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=c-(l.c=0|c)},l.c=1,l.s0=h(" "),l.s1=h(" "),l.s2=h(" "),l.s0-=h(s),l.s0<0&&(l.s0+=1),l.s1-=h(s),l.s1<0&&(l.s1+=1),l.s2-=h(s),l.s2<0&&(l.s2+=1),h=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function o(s,u){var l=new i(s),h=u&&u.state,c=l.next;return c.int32=function(){return 4294967296*l.next()|0},c.double=function(){return c()+11102230246251565e-32*(2097152*c()|0)},c.quick=c,h&&(typeof h=="object"&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.alea=o})(0,n)}),eje=L1(function(n){(function(e,t,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var c=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^c^c>>>8},s===(0|s)?u.x=s:l+=s;for(var h=0;h<l.length+64;h++)u.x^=0|l.charCodeAt(h),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=l.next,c.quick=c,h&&(typeof h=="object"&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.xor128=o})(0,n)}),tje=L1(function(n){(function(e,t,r){function i(s){var u=this,l="";u.next=function(){var c=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^c^c<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var h=0;h<l.length+64;h++)u.x^=0|l.charCodeAt(h),h==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=l.next,c.quick=c,h&&(typeof h=="object"&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.xorwow=o})(0,n)}),nje=L1(function(n){(function(e,t,r){function i(s){var u=this;u.next=function(){var l,h,c=u.x,f=u.i;return l=c[f],h=(l^=l>>>7)^l<<24,h^=(l=c[f+1&7])^l>>>10,h^=(l=c[f+3&7])^l>>>3,h^=(l=c[f+4&7])^l<<7,l=c[f+7&7],h^=(l^=l<<13)^l<<9,c[f]=h,u.i=f+1&7,h},function(l,h){var c,f=[];if(h===(0|h))f[0]=h;else for(h=""+h,c=0;c<h.length;++c)f[7&c]=f[7&c]<<15^h.charCodeAt(c)+f[c+1&7]<<13;for(;f.length<8;)f.push(0);for(c=0;c<8&&f[c]===0;++c);for(c==8?f[7]=-1:f[c],l.x=f,l.i=0,c=256;c>0;--c)l.next()}(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=l.next,c.quick=c,h&&(h.x&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.xorshift7=o})(0,n)}),rje=L1(function(n){(function(e,t,r){function i(s){var u=this;u.next=function(){var l,h,c=u.w,f=u.X,d=u.i;return u.w=c=c+1640531527|0,h=f[d+34&127],l=f[d=d+1&127],h^=h<<13,l^=l<<17,h^=h>>>15,l^=l>>>12,h=f[d]=h^l,u.i=d,h+(c^c>>>16)|0},function(l,h){var c,f,d,p,m,g=[],y=128;for(h===(0|h)?(f=h,h=null):(h+="\0",f=0,y=Math.max(y,h.length)),d=0,p=-32;p<y;++p)h&&(f^=h.charCodeAt((p+32)%h.length)),p===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(m=m+1640531527|0,d=(c=g[127&p]^=f+m)==0?d+1:0);for(d>=128&&(g[127&(h&&h.length||0)]=-1),d=127,p=512;p>0;--p)f=g[d+34&127],c=g[d=d+1&127],f^=f<<13,c^=c<<17,f^=f>>>15,c^=c>>>12,g[d]=f^c;l.w=m,l.X=g,l.i=d}(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=l.next,c.quick=c,h&&(h.X&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.xor4096=o})(0,n)}),ije=L1(function(n){(function(e,t,r){function i(s){var u=this,l="";u.next=function(){var c=u.b,f=u.c,d=u.d,p=u.a;return c=c<<25^c>>>7^f,f=f-d|0,d=d<<24^d>>>8^p,p=p-c|0,u.b=c=c<<20^c>>>12^f,u.c=f=f-d|0,u.d=d<<16^f>>>16^p,u.a=p-c|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var h=0;h<l.length+20;h++)u.b^=0|l.charCodeAt(h),u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),h=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=l.next,c.quick=c,h&&(typeof h=="object"&&a(h,l),c.state=function(){return a(l,{})}),c}t&&t.exports?t.exports=o:this.tychei=o})(0,n)}),yv=L1(function(n){(function(e,t){var r,i=this,a=256,o=6,s="random",u=t.pow(a,o),l=t.pow(2,52),h=2*l,c=a-1;function f(y,v,b){var w=[],x=m(function A(k,T){var O,F=[],I=typeof k;if(T&&I=="object")for(O in k)try{F.push(A(k[O],T-1))}catch{}return F.length?F:I=="string"?k:k+"\0"}((v=v==1?{entropy:!0}:v||{}).entropy?[y,g(e)]:y??function(){try{var A;return r&&(A=r.randomBytes)?A=A(a):(A=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(A)),g(A)}catch{var k=i.navigator,T=k&&k.plugins;return[+new Date,i,T,i.screen,g(e)]}}(),3),w),S=new d(w),E=function(){for(var A=S.g(o),k=u,T=0;A<l;)A=(A+T)*a,k*=a,T=S.g(1);for(;A>=h;)A/=2,k/=2,T>>>=1;return(A+T)/k};return E.int32=function(){return 0|S.g(4)},E.quick=function(){return S.g(4)/4294967296},E.double=E,m(g(S.S),e),(v.pass||b||function(A,k,T,O){return O&&(O.S&&p(O,S),A.state=function(){return p(S,{})}),T?(t[s]=A,k):A})(E,x,"global"in v?v.global:this==t,v.state)}function d(y){var v,b=y.length,w=this,x=0,S=w.i=w.j=0,E=w.S=[];for(b||(y=[b++]);x<a;)E[x]=x++;for(x=0;x<a;x++)E[x]=E[S=c&S+y[x%b]+(v=E[x])],E[S]=v;(w.g=function(A){for(var k,T=0,O=w.i,F=w.j,I=w.S;A--;)k=I[O=c&O+1],T=T*a+I[c&(I[O]=I[F=c&F+k])+(I[F]=k)];return w.i=O,w.j=F,T})(a)}function p(y,v){return v.i=y.i,v.j=y.j,v.S=y.S.slice(),v}function m(y,v){for(var b,w=y+"",x=0;x<w.length;)v[c&x]=c&(b^=19*v[c&x])+w.charCodeAt(x++);return g(v)}function g(y){return String.fromCharCode.apply(0,y)}if(t["seed"+s]=f,m(t.random(),e),n.exports){n.exports=f;try{r=require("crypto")}catch{}}})([],Math)});yv.alea=JWe,yv.xor128=eje,yv.xorwow=tje,yv.xorshift7=nje,yv.xor4096=rje,yv.tychei=ije;var e4=yv.alea,rpe=$e({addN_:function(n){Pe(Array.isArray(n),function(){return"The argument passed to tf.addN() must be a list of tensors"}),Pe(n.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length});var e=n.map(function(i,a){return Oe(i,"tensors"+a,"addN")}),t=e[0];e.forEach(function(i){if(i.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(i){if(!ts(i.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return Ve.runKernelFunc(function(i,a){return i.addN(e)},r,null,"AddN")}});function t4(){tW("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function ipe(n){return n.rank===0||n.rank===1?n.as4D(1,1,1,n.size):n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function ape(n,e,t,r,i,a){a==null&&(a=.001);var o,s,u=Oe(n,"x","batchNorm"),l=Oe(e,"mean","batchNorm"),h=Oe(t,"variance","batchNorm");i!=null&&(o=Oe(i,"scale","batchNorm")),r!=null&&(s=Oe(r,"offset","batchNorm")),Pe(l.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),Pe(s==null||l.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),Pe(o==null||l.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."});var c={x:u,scale:o,offset:s,mean:l,variance:h},f={varianceEpsilon:a};return Ve.runKernelFunc(function(d,p){var m=ipe(u),g=d.batchNormalization(m,Fk(l),Fk(h),a,Fk(o),Fk(s));return p([u,l,h,o]),g},c,null,"FusedBatchNorm",f).reshape(u.shape)}function Fk(n){return n==null?null:n.rank===0?n.as1D():n.rank===1?n:n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}var aje=$e({batchNormalization_:function(n,e,t,r,i,a){return r===void 0&&(r=.001),t4(),ape(n,e,t,a,i,r)}}),Ex=$e({batchNorm_:ape});function spe(n,e,t,r,i,a){var o,s,u=Oe(n,"x","batchNorm"),l=Oe(e,"mean","batchNorm"),h=Oe(t,"variance","batchNorm");return i!=null&&(o=Oe(i,"scale","batchNorm")),r!=null&&(s=Oe(r,"offset","batchNorm")),Pe(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),Pe(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),Pe(h.rank===2||h.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+h.rank+"."}),o!=null&&Pe(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),s!=null&&Pe(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Ex(u,l,h,s,o,a)}var sje=$e({batchNormalization2d_:function(n,e,t,r,i,a){return r===void 0&&(r=.001),t4(),spe(n,e,t,a,i,r)}}),ope=$e({batchNorm2d_:spe});function upe(n,e,t,r,i,a){var o,s,u=Oe(n,"x","batchNorm"),l=Oe(e,"mean","batchNorm"),h=Oe(t,"variance","batchNorm");return i!=null&&(o=Oe(i,"scale","batchNorm")),r!=null&&(s=Oe(r,"offset","batchNorm")),Pe(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),Pe(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),Pe(h.rank===3||h.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+h.rank+"."}),o!=null&&Pe(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),s!=null&&Pe(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Ex(u,l,h,s,o,a)}var oje=$e({batchNormalization3d_:function(n,e,t,r,i,a){return r===void 0&&(r=.001),t4(),upe(n,e,t,a,i,r)}}),lpe=$e({batchNorm3d_:upe});function cpe(n,e,t,r,i,a){var o,s,u=Oe(n,"x","batchNorm"),l=Oe(e,"mean","batchNorm"),h=Oe(t,"variance","batchNorm");return i!=null&&(o=Oe(i,"scale","batchNorm")),r!=null&&(s=Oe(r,"offset","batchNorm")),Pe(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),Pe(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),Pe(h.rank===4||h.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+h.rank+"."}),o!=null&&Pe(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),s!=null&&Pe(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Ex(u,l,h,s,o,a)}var uje=$e({batchNormalization4d_:function(n,e,t,r,i,a){return r===void 0&&(r=.001),t4(),cpe(n,e,t,a,i,r)}}),hpe=$e({batchNorm4d_:cpe}),fpe=$e({broadcastTo_:function(n,e){var t=Oe(n,"broadcastTo","x"),r=t.shape;if(e.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<t.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+t.rank+".");if(e.length>t.rank){for(var i=t.shape.slice();i.length<e.length;)i.unshift(1);t=t.reshape(i)}for(var a=t.shape,o=Array.from(e),s=e.length-1;s>=0;s--)if(a[s]===e[s])o[s]=1;else if(t.shape[s]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var u=o.map(function(c,f){return c>1?f:-1}).filter(function(c){return c>=0});if(u.length===0)return t.clone();var l={x:t},h={shape:e,inputShape:a};return Ve.runKernelFunc(function(c){return c.tile(t,o)},l,function(c){return{x:function(){return c.sum(u,!0)}}},ode,h)}}),lje=$e({clone_:function(n){var e=Oe(n,"x","clone",null);return Ve.runKernelFunc(function(){return Ve.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{x:e},null,lde)}}),yy=$e({logicalAnd_:function(n,e){var t=Oe(n,"a","logicalAnd","bool"),r=Oe(e,"b","logicalAnd","bool");return Jn(t.shape,r.shape),Ve.runKernelFunc(function(i){return i.logicalAnd(t,r)},{a:t,b:r},null,"LogicalAnd")}}),dpe=$e({logicalNot_:function(n){var e=Oe(n,"x","logicalNot","bool");return Ve.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),xW=$e({logicalOr_:function(n,e){var t=Oe(n,"a","logicalOr","bool"),r=Oe(e,"b","logicalOr","bool");return Jn(t.shape,r.shape),Ve.runKernelFunc(function(i){return i.logicalOr(t,r)},{$a:t,$b:r})}}),cje=$e({logicalXor_:function(n,e){var t=Oe(n,"a","logicalXor","bool"),r=Oe(e,"b","logicalXor","bool");return Jn(t.shape,r.shape),xW(n,e).logicalAnd(yy(n,e).logicalNot())}}),Np=$e({where_:function(n,e,t){var r=Oe(e,"a","where"),i=Oe(t,"b","where"),a=Oe(n,"condition","where","bool");return Or(r.shape,i.shape,"Error in where: "),a.rank===1?Pe(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Or(a.shape,i.shape,"Error in where: "),Ve.runKernelFunc(function(o,s){var u=o.select(a,r,i);return s([a]),u},{$condition:a,$a:r,$b:i},function(o,s){var u=s[0];return{$condition:function(){return ar(u).toFloat()},$a:function(){return o.mul(u.cast(o.dtype))},$b:function(){return o.mul(u.logicalNot().cast(o.dtype))}}})}}),_W=function(n){return Jt(this,void 0,void 0,function(){var e,t,r;return en(this,function(i){switch(i.label){case 0:return[4,(e=Oe(n,"condition","whereAsync","bool")).data()];case 1:return t=i.sent(),r=yW(e.shape,t),n!==e&&e.dispose(),[2,r]}})})},SW=$e({divNoNan_:function(n,e){var t,r=Oe(n,"a","div"),i=Oe(e,"b","div");r=(t=ji(r,i))[0],i=t[1];var a=ya(r,i),o=ar(a),s=i.equal(o);return Np(s,o,a)}}),Pm=$e({tile_:function(n,e){var t=Oe(n,"x","tile",null);Pe(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."});var r=[t],i={x:t},a={reps:e};return Ve.runKernelFunc(function(o,s){var u=o.tile(t,e);return s([t]),u},i,null,cde,a,r)}}),CW=$e({eye_:function(n,e,t,r){r===void 0&&(r="float32"),e==null&&(e=n);for(var i=Dn([n,e],r),a=n<=e?n:e,o=0;o<a;++o)i.set(1,o,o);var s=i.toTensor().as2D(n,e);if(t==null)return s;if(t.length===1)return Pm(oc(s,0),[t[0],1,1]);if(t.length===2)return Pm(oc(oc(s,0),0),[t[0],t[1],1,1]);if(t.length===3)return Pm(oc(oc(oc(s,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),ppe=$e({multinomial_:function(n,e,t,r){r===void 0&&(r=!1);var i=Oe(n,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);t=t||Math.random();var s=o===1?i.as2D(1,-1):i,u=Ve.runKernelFunc(function(l){return l.multinomial(s,r,e,t)},{logits2D:s});return o===1?u.as1D():u}}),tx=$e({oneHot_:function(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=Oe(n,"indices","oneHot","int32"),a=i.shape.concat([e]),o={indices:i=i.flatten()},s={depth:e,onValue:t,offValue:r};return Ve.runKernelFunc(function(u,l){return l([i]),u.oneHot(i,e,t,r)},o,null,ude,s).reshape(a)}}),Wp=$e({pad_:function(n,e,t){t===void 0&&(t=0);var r=Oe(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:e,constantValue:t},a={x:r};return Ve.runKernelFunc(function(o,s){return s([r]),o.pad(r,e,t)},a,null,hde,i)}}),hje=$e({pad1d_:function(n,e,t){return t===void 0&&(t=0),Pe(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Wp(n,[e],t)}}),fje=$e({pad2d_:function(n,e,t){return t===void 0&&(t=0),Pe(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Wp(n,e,t)}}),dje=$e({pad3d_:function(n,e,t){return t===void 0&&(t=0),Pe(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Wp(n,e,t)}}),pje=$e({pad4d_:function(n,e,t){return t===void 0&&(t=0),Pe(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Wp(n,e,t)}}),gje=$e({rand_:function(n,e,t){var r=Qt(n),i=null;if(t==null||t==="float32")i=new Float32Array(r);else if(t==="int32")i=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=e();return Ve.makeTensor(i,n,t)}}),EW=function(){function n(e,t,r,i,a){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=a||Math.random();this.random=e4(o.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,r,i=!1;!i;){var a=void 0,o=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*o*u,this.truncated&&!this.isValidTruncated(t)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},n.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},n.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},n}(),mje=function(){function n(e,t,r,i){this.alpha=e,this.beta=1/t,this.dtype=r;var a=i||Math.random();this.randu=e4(a.toString()),this.randn=new EW(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var e,t,r,i,a,o;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,t=1-.331*(e=i*i)*e,r=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<t||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},n.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},n}(),yje=function(){function n(e,t,r,i){var a=this;if(e===void 0&&(e=0),t===void 0&&(t=1),this.canReturnFloat=function(){return a.dtype==null||a.dtype==="float32"},this.min=e,this.range=t-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=e4(i)}return n.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n}(),vje=$e({randomGamma_:function(n,e,t,r,i){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var a=new mje(e,t,r,i),o=Dn(n,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),gpe=$e({randomNormal_:function(n,e,t,r,i){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new EW(e,t,r,!1,i),o=Dn(n,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Tx=$e({randomUniform_:function(n,e,t,r,i){e===void 0&&(e=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var a=Dn(n,r),o=new yje(e,t,null,i),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),TW=$e({square_:function(n){var e=Oe(n,"x","square"),t=[e];return Ve.runKernelFunc(function(r,i){return i([e]),r.square(e)},{x:e},null,"Square",{},t,[])}}),DW=$e({squaredDifference_:function(n,e){var t,r=Oe(n,"a","squaredDifference"),i=Oe(e,"b","squaredDifference");t=ji(r,i),r=t[0],i=t[1],Jn(r.shape,i.shape);var a={a:r,b:i},o=[r,i];return Ve.runKernelFunc(function(s,u){var l=s.squaredDifference(r,i);return u([r,i]),l},a,function(s,u){var l=u[0],h=u[1],c=jt(2);return{a:function(){return s.mul(l.sub(h).mul(c))},b:function(){return s.mul(h.sub(l).mul(c))}}},YI,{},o,[])}}),n4=$e({truncatedNormal_:function(n,e,t,r,i){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");for(var a=new EW(e,t,r,!0,i),o=Dn(n,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Dx=$e({equal_:function(n,e){var t,r=Oe(n,"a","equal"),i=Oe(e,"b","equal");return t=ji(r,i),r=t[0],i=t[1],Jn(r.shape,i.shape),Ve.runKernelFunc(function(a){return a.equal(r,i)},{$a:r,$b:i})}}),bje=$e({equalStrict_:function(n,e){var t=Oe(n,"a","equalStrict"),r=Oe(e,"b","equalStrict");return Or(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),r4=$e({greater_:function(n,e){var t,r=Oe(n,"a","greater"),i=Oe(e,"b","greater");return t=ji(r,i),r=t[0],i=t[1],Jn(r.shape,i.shape),Ve.runKernelFunc(function(a){return a.greater(r,i)},{a:r,b:i},null,"Greater")}}),i4=$e({greaterEqual_:function(n,e){var t,r=Oe(n,"a","greaterEqual"),i=Oe(e,"b","greaterEqual");return t=ji(r,i),r=t[0],i=t[1],Jn(r.shape,i.shape),Ve.runKernelFunc(function(a,o){var s=a.greaterEqual(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return ar(s)},b:function(){return ar(u)}}},"GreaterEqual")}}),wje=$e({greaterEqualStrict_:function(n,e){var t=Oe(n,"a","greaterEqualStrict"),r=Oe(e,"b","greaterEqualStrict");return Or(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),xje=$e({greaterStrict_:function(n,e){var t=Oe(n,"a","greaterStrict"),r=Oe(e,"b","greaterStrict");return Or(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),mpe=$e({less_:function(n,e){var t,r=Oe(n,"a","less"),i=Oe(e,"b","less");return t=ji(r,i),r=t[0],i=t[1],Jn(r.shape,i.shape),Ve.runKernelFunc(function(a){return a.less(r,i)},{a:r,b:i},null,"Less")}}),ype=$e({lessEqual_:function(n,e){var t,r=Oe(n,"a","lessEqual"),i=Oe(e,"b","lessEqual");return t=ji(r,i),r=t[0],i=t[1],Jn(r.shape,i.shape),Ve.runKernelFunc(function(a,o){var s=a.lessEqual(r,i);return o([r,i]),s},{a:r,b:i},null,"LessEqual")}}),_je=$e({lessEqualStrict_:function(n,e){var t=Oe(n,"a","lessEqualStrict"),r=Oe(e,"b","lessEqualStrict");return Or(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),Sje=$e({lessStrict_:function(n,e){var t=Oe(n,"a","lessStrict"),r=Oe(e,"b","lessStrict");return Or(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),wE=$e({notEqual_:function(n,e){var t,r=Oe(n,"a","notEqual"),i=Oe(e,"b","notEqual");return t=ji(r,i),r=t[0],i=t[1],Jn(r.shape,i.shape),Ve.runKernelFunc(function(a){return a.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),Cje=$e({notEqualStrict_:function(n,e){var t=Oe(n,"a","notEqualStrict"),r=Oe(e,"b","notEqualStrict");return Or(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function vQ(n,e){for(var t=[],r=n;r<e;++r)t.push(r);return t}function bQ(n){for(var e=[],t=0;t<n.length;++t)for(var r=0;r<n[t].length;++r)e.push(n[t][r]);return e}var UD=$e({gather_:function(n,e,t){t===void 0&&(t=0);var r=Oe(n,"x","gather"),i=Oe(e,"indices","gather","int32");t=Ma(t,r.shape)[0];var a=function(o,s,u){for(var l=o.shape[u],h=[],c=1,f=1,d=0;d<u;d++)h.push(o.shape[d]),c*=o.shape[d];for(d=0;d<s.rank;d++)h.push(s.shape[d]);for(d=u+1;d<o.rank;d++)h.push(o.shape[d]),f*=o.shape[d];return{batchSize:c,sliceSize:f,dimSize:l,outputShape:h}}(r,i,t);return Ve.runKernelFunc(function(o,s){var u=o.gather(r,i.flatten(),t);return s([i]),u},{x:r,indices:i},function(o,s){var u=s[0];return{x:function(){var l=r.shape,h=u.size,c=l.slice(0,t),f=c.length,d=l.slice(t,l.length).slice(1),p=d.length,m=vQ(0,f),g=vQ(f+1,f+1+p),y=bQ([c,[h],d]),v=o.reshape(y),b=u.reshape([h]),w=bQ([[f],m,g]),x=v.transpose(w),S=vpe(x,b,r.shape[t]),E=nW(w);return S=S.transpose(E)},indices:function(){return u}}},"Gather",{axis:t}).reshape(a.outputShape)}}),vpe=$e({unsortedSegmentSum_:function(n,e,t){var r=Oe(n,"x","unsortedSegmentSum"),i=Oe(e,"segmentIds","unsortedSegmentSum","int32");return Pe(ra(t),function(){return"numSegments must be of dtype int"}),Ve.runKernelFunc(function(a,o){var s=a.unsortedSegmentSum(r,i,t);return o([i]),s},{$x:r},function(a,o){var s=o[0];return{$x:function(){return function(u,l){for(var h=zp(l,ar(l)),c=UD(u,h),f=i4(l,jt(0,"int32")),d=c.rank-f.rank,p=0;p<d;++p)f=oc(f,p+1);f=yy(f,Bp(c.shape,"bool"));var m=ar(c);return Np(f,c,m)}(a,s)}}})}}),Eje=function(n,e,t){return Jt(this,void 0,void 0,function(){var r,i,a,o,s,u,l,h,c,f,d,p,m;return en(this,function(g){switch(g.label){case 0:for(r=Oe(n,"tensor","boolMask"),i=Oe(e,"mask","boolMask","bool"),a=t??0,o=i.rank,s=r.shape,Pe(o>0,function(){return"mask cannot be scalar"}),Or(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=a;l<a+o;l++)u*=s[l];return h=s.slice(0,a).concat([u],s.slice(a+o)),c=r.reshape(h),f=i.reshape([-1]),[4,_W(f)];case 1:return d=g.sent(),p=d.squeeze([1]),m=UD(c,p,a),n!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),c.dispose(),f.dispose(),d.dispose(),[2,m]}})})};function bpe(n,e,t,r,i,a,o){a===void 0&&(a="NHWC"),Pe(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var s=n,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,n[0],n[1],n[2]]),Pe(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),Pe(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),Pe(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var h=a==="NHWC"?s[3]:s[1],c=a==="NHWC"?u.shape[3]:u.shape[1];Pe(h===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+t.shape[2]+"."}),Pe(c===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+t.shape[3]+"."}),o!=null&&Pe(ra(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var f=pW(a),d=P1(s,t.shape,r,1,i,o,!1,f),p=Ve.runKernelFunc(function(m,g){var y=m.conv2dDerInput(u,t,d);return g([t,u]),y},{dy4D:u,filter:t},function(m,g){var y=g[0],v=g[1];return{dy4D:function(){return Ax(m,y,r,i,a,1,o)},filter:function(){return NW(m,v,y.shape,r,i,a,o)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function vM(n){var e=function(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a}(n),t=e[0],r=e[1],i=e[2];return t===1&&r===1&&i===1}function wpe(n,e,t,r,i){Pe(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var a=n,o=e,s=!1;e.rank===4&&(s=!0,o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,n[0],n[1],n[2],n[3]]);var u=a[4],l=o.shape[4];Pe(a.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),Pe(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),Pe(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),Pe(u===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+t.shape[3]+"."}),Pe(l===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+t.shape[4]+"."});var h=vO(a,t.shape,r,1,i),c=Ve.runKernelFunc(function(f){return f.conv3dDerInput(o,t,h)},{dy5D:o});return s?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}var AW=$e({conv1d_:function(n,e,t,r,i,a,o){i===void 0&&(i="NWC"),a===void 0&&(a=1);var s=Oe(n,"x","conv1d"),u=Oe(e,"filter","conv1d"),l=s,h=!1;s.rank===2&&(h=!0,l=s.as3D(1,s.shape[0],s.shape[1])),Pe(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),Pe(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),o!=null&&Pe(ra(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),Pe(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),Pe(Qo(t,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+a+"'"}),Pe(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var c=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),d=Ax(f,c,[1,t],r,"NHWC",[1,a],o);return h?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),Ax=$e({conv2d_:function(n,e,t,r,i,a,o){i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]);var s=Oe(n,"x","conv2d"),u=Oe(e,"filter","conv2d"),l=s,h=!1;s.rank===3&&(h=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Pe(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),Pe(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),o!=null&&Pe(ra(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=i==="NHWC"?l.shape[3]:l.shape[1];Pe(c===u.shape[2],function(){return"Error in conv2d: depth of input ("+c+") must match input depth for filter "+u.shape[2]+"."}),Pe(Qo(t,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+a+"'"});var f=pW(i),d=P1(l.shape,u.shape,t,a,r,o,!1,f),p=[u,l],m=Ve.runKernelFunc(function(g,y){var v=g.conv2d(l,u,d);return y([u,l]),v},{x:l,filter:u},function(g,y){var v=y,b=v[0],w=v[1];return Pe(ex(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return xpe(w.shape,g,b,t,r,i)},filter:function(){return NW(w,g,b.shape,t,r,i)}}},"Conv2D",d,p);return h?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),kW=$e({conv3d_:function(n,e,t,r,i,a){i===void 0&&(i="NDHWC"),a===void 0&&(a=[1,1,1]);var o=Oe(n,"x","conv3d"),s=Oe(e,"filter","conv3d"),u=o,l=!1;o.rank===4&&(l=!0,u=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),Pe(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),Pe(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),Pe(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),Pe(function(f,d){return vM(f)||vM(d)}(t,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+a+"'"}),Pe(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var h=vO(u.shape,s.shape,t,a,r),c=Ve.runKernelFunc(function(f,d){var p=f.conv3d(u,s,h);return d([u,s]),p},{x:u,$filter:s},function(f,d){Pe(vM(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var p=d[0],m=d[1];return{x:function(){return wpe(p.shape,f,m,t,r)},$filter:function(){return function(g,y,v,b,w){var x=g;g.rank===4&&(x=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var S=y;S.rank===4&&(S=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),Pe(x.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+x.shape+"."}),Pe(S.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+S.shape+"."}),Pe(v.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+v+"."}),Pe(x.shape[4]===v[3],function(){return"Error in conv3dDerFilter: depth of input "+x.shape[4]+") must match input depth in filter ("+v[3]+"."}),Pe(S.shape[4]===v[4],function(){return"Error in conv3dDerFilter: depth of dy ("+S.shape[4]+") must match output depth for filter ("+v[4]+")."});var E=vO(x.shape,v,b,1,w);return Ve.runKernelFunc(function(A){return A.conv3dDerFilter(x,S,E)},{x5D:x,dy5D:S})}(p,f,m.shape,t,r)}}});return l?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),NW=$e({conv2dDerFilter_:function(n,e,t,r,i,a,o){a===void 0&&(a="NHWC");var s=n;n.rank===3&&(s=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Pe(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),Pe(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),Pe(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var l=a==="NHWC"?s.shape[3]:s.shape[1],h=a==="NHWC"?u.shape[3]:u.shape[1];Pe(l===t[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+t[2]+"."}),Pe(h===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+h+") must match output depth for filter ("+t[3]+")."}),o!=null&&Pe(ra(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var c=pW(a),f=P1(s.shape,t,r,1,i,o,!1,c);return Ve.runKernelFunc(function(d){return d.conv2dDerFilter(s,u,f)},{x4D:s,dy4D:u})}}),xpe=$e({conv2dDerInput_:bpe}),BD=$e({depthwiseConv2d_:function(n,e,t,r,i,a,o){a===void 0&&(a=[1,1]);var s=Oe(n,"x","depthwiseConv2d"),u=Oe(e,"filter","depthwiseConv2d"),l=s,h=!1;s.rank===3&&(h=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Pe(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),Pe(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),Pe(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),a==null&&(a=[1,1]),Pe(Qo(t,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+a+"'"}),o!=null&&Pe(ra(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=P1(l.shape,u.shape,t,a,r,o,!0),f=[l,u],d=Ve.runKernelFunc(function(p,m){var g=p.depthwiseConv2D(l,u,c);return m([l,u]),g},{x:l,filter:u},function(p,m){Pe(ex(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var g=m[0],y=m[1];return{x:function(){return _pe(g.shape,p,y,c)},filter:function(){return Spe(g,p,y.shape,c)}}},"DepthwiseConv2dNative",c,f);return h?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),_pe=$e({depthwiseConv2dDerInput_:function(n,e,t,r){var i=e,a=!1;e.rank===3&&(a=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=Ve.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,t,r)},{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Spe=$e({depthwiseConv2dDerFilter_:function(n,e,t,r){var i=n;n.rank===3&&(i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var a=e;return a.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Ve.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(i,a,r)},{x4D:i,dy4D:a})}}),Cpe=$e({separableConv2d_:function(n,e,t,r,i,a,o){a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC");var s=Oe(n,"x","separableConv2d"),u=Oe(e,"depthwiseFilter","separableConv2d"),l=Oe(t,"pointwiseFilter","separableConv2d"),h=s,c=!1;if(s.rank===3&&(c=!0,h=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Pe(h.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+h.rank+"."}),Pe(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),Pe(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),Pe(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),Pe(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var f=u.shape[2],d=u.shape[3];Pe(l.shape[2]===f*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*d+", but got "+l.shape[2]+"."});var p=BD(h,u,r,i,o,a),m=Ax(p,l,1,"valid",o);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),OW=$e({conv2dTranspose_:function(n,e,t,r,i,a){return bpe(t,Oe(n,"x","conv2dTranspose"),Oe(e,"filter","conv2dTranspose"),r,i,"NHWC",a)}}),Tje=$e({conv3dTranspose_:function(n,e,t,r,i){return wpe(t,Oe(n,"x","conv3dTranspose"),Oe(e,"filter","conv3dTranspose"),r,i)}}),RW=$e({matMul_:function(n,e,t,r){var i;t===void 0&&(t=!1),r===void 0&&(r=!1);var a=Oe(n,"a","matMul"),o=Oe(e,"b","matMul");i=ji(a,o),a=i[0],o=i[1];var s=t?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?o.shape[o.rank-1]:o.shape[o.rank-2],l=t?a.shape[a.rank-1]:a.shape[a.rank-2],h=r?o.shape[o.rank-2]:o.shape[o.rank-1],c=a.shape.slice(0,-2),f=o.shape.slice(0,-2),d=Qt(c),p=Qt(f);Pe(a.rank>=2&&o.rank>=2&&a.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+o.rank+"."}),Pe(ts(c,f),function(){return"Error in matMul: outer dimensions ("+c+") and ("+f+") of Tensors with shapes "+a.shape+" and "+o.shape+" must match."}),Pe(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+o.shape+" and transposeA="+t+" and transposeB="+r+" must match."});var m=a.shape.slice(0,-2).concat([l,h]),g=t?a.as3D(d,s,l):a.as3D(d,l,s),y=r?o.as3D(p,h,u):o.as3D(p,u,h),v={transposeA:t,transposeB:r};return Ve.runKernelFunc(function(b,w){var x=b.batchMatMul(g,y,t,r);return w([g,y]),x},{a:g,b:y},function(b,w){var x=w,S=x[0],E=x[1];return t||r?!t&&r?{a:function(){return b.matMul(E,!1,!1)},b:function(){return b.matMul(S,!0,!1)}}:t&&!r?{a:function(){return E.matMul(b,!1,!0)},b:function(){return S.matMul(b,!1,!1)}}:{a:function(){return E.matMul(b,!0,!0)},b:function(){return b.matMul(S,!0,!0)}}:{a:function(){return b.matMul(E,!1,!0)},b:function(){return S.matMul(b,!0,!1)}}},"BatchMatMul",v).reshape(m)}}),Dje=$e({dot_:function(n,e){var t=Oe(n,"t1","dot"),r=Oe(e,"t2","dot");Pe(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."});var i=t.rank===1?t.size:t.shape[1],a=r.rank===1?r.size:r.shape[0];return Pe(i===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."}),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Aje=$e({outerProduct_:function(n,e){var t=Oe(n,"v1","outerProduct"),r=Oe(e,"v2","outerProduct");return Pe(t.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."}),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),Op=$e({reverse_:function(n,e){var t=Oe(n,"x","reverse");if(t.rank===0)return t.clone();var r=Ma(e,t.shape);return Ve.runKernelFunc(function(i){return i.reverse(t,r)},{$x:t},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(t)}}),kje=$e({reverse1d_:function(n){var e=Oe(n,"x","reverse");return Pe(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),Op(e,0)}}),Nje=$e({reverse2d_:function(n,e){var t=Oe(n,"x","reverse");return Pe(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),Op(t,e)}}),Oje=$e({reverse3d_:function(n,e){var t=Oe(n,"x","reverse");return Pe(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),Op(t,e)}}),Rje=$e({reverse4d_:function(n,e){var t=Oe(n,"x","reverse");return Pe(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),Op(t,e)}});function Epe(n,e,t,r,i,a){var o=Oe(n,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Pe(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),Pe(Qo(t,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}),a!=null&&Pe(ra(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=b1(s.shape,e,t,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&ts(l.inShape,l.outShape))return o.clone();var h=[s],c=Ve.runKernelFunc(function(f,d){var p=f.maxPool(s,l);return d([s,p]),p},{x:s},function(f,d){var p=d[0],m=d[1];return{x:function(){return function(g,y,v,b,w,x,S,E){var A=Oe(g,"dy","maxPoolBackprop"),k=Oe(y,"input","maxPoolBackprop"),T=Oe(v,"output","maxPoolBackprop");Pe(k.rank===A.rank,function(){return"Rank of input ("+k.rank+") does not match rank of dy ("+A.rank+")"}),Pe(Qo(w,x),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+x+"'"}),Pe(A.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+A.rank+"."}),Pe(k.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var O=b1(k.shape,b,w,x,S,E);return Ve.runKernelFunc(function(F){return F.maxPoolBackprop(A,k,T,O)},{$dy:A,$input:k})}(f,p,m,e,t,r,i)}}},"MaxPool",l,h);return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function Tpe(n,e,t,r,i,a){var o=Oe(n,"x","avgPool","float32");Pe(Qo(t,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"});var s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Pe(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),a!=null&&Pe(ra(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=b1(s.shape,e,t,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&ts(l.inShape,l.outShape))return o.clone();var h=Ve.runKernelFunc(function(c){return c.avgPool(s,l)},{x:s},function(c){return{x:function(){return function(f,d,p,m,g,y){var v=Oe(f,"dy","avgPoolBackprop"),b=Oe(d,"input","avgPoolBackprop");Pe(b.rank===v.rank,function(){return"Rank of input ("+b.rank+") does not match rank of dy ("+v.rank+")"}),Pe(Qo(m,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"});var w=b,x=v,S=!1;b.rank===3&&(S=!0,w=b.as4D(1,b.shape[0],b.shape[1],b.shape[2]),x=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),Pe(x.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+x.rank+"."}),Pe(w.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+w.rank+"."});var E=b1(w.shape,p,m,g,y),A=Ve.runKernelFunc(function(k){return k.avgPoolBackprop(x,w,E)},{dy4D:x,input4D:w});return S?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}(c,s,e,t,r,i)}}},"AvgPool",l);return h=h.cast(o.dtype),u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}var IW=$e({maxPool_:function(n,e,t,r,i){return Epe(n,e,t,1,r,i)}}),FW=$e({avgPool_:function(n,e,t,r,i){return Tpe(n,e,t,1,r,i)}}),Ije=$e({pool_:function(n,e,t,r,i,a){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");var o=Oe(n,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Pe(Qo(a,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"});var l,h=b1(s.shape,e,a,i,r),c=[h.dilationHeight,h.dilationWidth];l=r==="same"?function(w,x){var S=w.map(function(k,T){return k+(k-1)*(x[T]-1)}).map(function(k){return k-1}),E=S.map(function(k){return Math.floor(k/2)}),A=S.map(function(k,T){return k-E[T]});return S.map(function(k,T){return[E[T],A[T]]})}([h.filterHeight,h.filterWidth],c):[[0,0],[0,0]];var f=c[0]===1&&c[1]===1,d=function(w,x,S){var E=S.map(function(R){return R[0]}),A=S.map(function(R){return R[1]}),k=w.concat(E,A),T=x.map(function(R,U){return(R-k[U]%R)%R}),O=A.map(function(R,U){return R+T[U]}),F=x.map(function(R,U){return[E[U],O[U]]}),I=x.map(function(R,U){return[0,T[U]]});return[F,I]}([h.inHeight,h.inWidth],c,l),p=d[0],m=d[1],g=f?r:"valid",y=f?s:aW(s,c,p),v=(t==="avg"?function(){return Tpe(y,e,a,1,g)}:function(){return Epe(y,e,a,1,g)})(),b=f?v:rW(v,c,m);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),PW=$e({maxPool3d_:function(n,e,t,r,i,a,o){a===void 0&&(a="NDHWC");var s=Oe(n,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),Pe(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),Pe(a==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),Pe(Qo(t,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),i!=null&&Pe(ra(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var h=yO(u.shape,e,t,o,r,i,a),c=Ve.runKernelFunc(function(f,d){var p=f.maxPool3d(u,h);return d([u,p]),p},{x:u},function(f,d){var p=d[0],m=d[1];return{x:function(){return function(g,y,v,b,w,x,S,E){var A=Oe(g,"dy","maxPool3dBackprop"),k=Oe(y,"input","maxPool3dBackprop"),T=Oe(v,"output","maxPool3dBackprop"),O=A,F=k,I=T,R=!1;k.rank===4&&(R=!0,O=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),F=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),I=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),Pe(O.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+O.rank+"."}),Pe(F.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+F.rank+"."}),Pe(I.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+I.rank+"."}),x==null&&(x=[1,1,1]),Pe(Qo(w,x),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+x+"'"}),E!=null&&Pe(ra(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+S+"."});var U=yO(F.shape,b,w,x,S,E),B=Ve.runKernelFunc(function(W){return W.maxPool3dBackprop(O,F,I,U)},{dy5D:O,input5D:F});return R?B.as4D(B.shape[1],B.shape[2],B.shape[3],B.shape[4]):B}(f,p,m,e,t,o,r,i)}}});return l?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),LW=$e({avgPool3d_:function(n,e,t,r,i,a,o){a===void 0&&(a="NDHWC");var s=Oe(n,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),Pe(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),Pe(a==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),Pe(Qo(t,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),i!=null&&Pe(ra(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var h=yO(u.shape,e,t,o,r,i,a),c=Ve.runKernelFunc(function(f){return f.avgPool3d(u,h)},{x:u},function(f){return{x:function(){return function(d,p,m,g,y,v,b){var w=Oe(d,"dy","avgPool3dBackprop"),x=Oe(p,"input","avgPool3dBackprop"),S=w,E=x,A=!1;x.rank===4&&(A=!0,S=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]),E=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3])),Pe(S.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+S.rank+"."}),Pe(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),y==null&&(y=[1,1,1]),Pe(Qo(g,y),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+y+"'"}),b!=null&&Pe(ra(v),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+v+"."});var k=yO(E.shape,m,g,y,v,b),T=Ve.runKernelFunc(function(O){return O.avgPool3dBackprop(S,E,k)},{dy5D:S,input5D:E});return A?T.as4D(T.shape[1],T.shape[2],T.shape[3],T.shape[4]):T}(f,u,e,t,o,r,i)}}});return c=c.cast(u.dtype),l?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),Dpe=$e({maxPoolWithArgmax_:function(n,e,t,r,i){i===void 0&&(i=!1);var a=Oe(n,"x","maxPoolWithArgmax"),o={filterSize:e,strides:t,pad:r,includeBatchInIndex:i},s=Ve.runKernel("MaxPoolWithArgmax",{x:a},o);return{result:s[0],indexes:s[1]}}}),mc=$e({slice_:function(n,e,t){var r,i,a=Oe(n,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice()).forEach(function(u){Pe(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=t==null?new Array(a.rank).fill(-1):typeof t=="number"?[t].concat(new Array(a.rank-1).fill(-1)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(-1)):t).map(function(u,l){return u>=0?u:(Pe(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),a.shape[l]-r[l])}),K7e(a,r,i);var o=a.shape,s={begin:r,size:i};return Ve.runKernelFunc(function(u){return u.slice(a,r,i)},{x:a},function(u){for(var l=[],h=0;h<u.rank;h++)l.push([r[h],o[h]-r[h]-i[h]]);return{x:function(){return Wp(u,l)}}},"Slice",s)}}),a4=$e({slice1d_:function(n,e,t){var r=Oe(n,"x","slice1d");return Pe(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),mc(r,[e],[t])}}),MW=$e({slice2d_:function(n,e,t){var r=Oe(n,"x","slice2d");return Pe(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),mc(r,e,t)}}),s4=$e({slice3d_:function(n,e,t){var r=Oe(n,"x","slice3d");return Pe(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),mc(r,e,t)}}),xE=$e({slice4d_:function(n,e,t){var r=Oe(n,"x","slice4d");return Pe(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),mc(r,e,t)}});function Ape(n,e,t,r,i){return e.rank<t.rank&&(e=e.reshape(Ou(e.shape,r))),n.rank<t.rank&&(n=n.reshape(Ou(n.shape,r))),{x:function(){var a=n.mul(t.equal(e).cast(n.dtype));return i==null?a:a.transpose(i)}}}var UW=$e({all_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=Oe(n,"x","all","bool"),i=Ma(e,r.shape),a=i,o=qf(a,r.rank);o!=null&&(r=r.transpose(o),a=Vf(a.length,r.rank));var s=Ve.runKernelFunc(function(l){return l.all(r,a)},{$x:r});if(t){var u=Ou(s.shape,i);return s.reshape(u)}return s}}),wO=$e({any_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=Oe(n,"x","any","bool"),i=Ma(e,r.shape),a=i,o=qf(a,r.rank);o!=null&&(r=r.transpose(o),a=Vf(a.length,r.rank));var s=Ve.runKernelFunc(function(l){return l.any(r,a)},{$x:r});if(t){var u=Ou(s.shape,i);return s.reshape(u)}return s}}),xO=$e({argMax_:function(n,e){e===void 0&&(e=0);var t=Oe(n,"x","argMax");e==null&&(e=0);var r=Ma(e,t.shape),i=qf(r,t.rank);i!=null&&(t=t.transpose(i),r=Vf(r.length,t.rank));var a={axis:r[0]},o=[t];return Ve.runKernelFunc(function(s,u){var l=s.argMax(t,r[0]);return u([t]),l},{x:t},function(s,u){var l=u[0];return{x:function(){return ar(l)}}},"ArgMax",a,o)}}),kpe=$e({argMin_:function(n,e){e===void 0&&(e=0);var t=Oe(n,"x","argMin");e==null&&(e=0);var r=Ma(e,t.shape),i=qf(r,t.rank);return i!=null&&(t=t.transpose(i),r=Vf(r.length,t.rank)),Ve.runKernelFunc(function(a,o){var s=a.argMin(t,r[0]);return o([t]),s},{$x:t},function(a,o){var s=o[0];return{$x:function(){return ar(s)}}})}}),Fje=$e({logSumExp_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=Oe(n,"x","logSumExp"),i=Ma(e,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),s=a.reshape(o.shape).add(o);if(t){var u=Ou(s.shape,i);return s.reshape(u)}return s}}),w1=$e({max_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=Oe(n,"x","max"),i=r,a=Ma(e,r.shape),o=a,s=qf(o,r.rank);s!=null&&(r=r.transpose(s),o=Vf(o.length,r.rank));var u=[r],l=Ve.runKernelFunc(function(c,f){var d=c.max(r,o);return f([i,d]),d},{x:r},function(c,f){return Ape(c,f[1],f[0],a,s)},"Max",{axes:o},u,[!0]);if(t){var h=Ou(l.shape,a);l=l.reshape(h)}return l}}),Ia=$e({mean_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=Oe(n,"x","mean"),i=Ma(e,r.shape),a=Qt(lo(r.shape,i)[1]);return JI(function(o){var s=jt(a);return{value:(s.dtype===o.dtype?o:o.cast(s.dtype)).div(s).sum(e,t),gradFunc:function(u){var l=o.shape.slice();return i.forEach(function(h){l[h]=1}),u.reshape(l).mul(Bp(o.shape,"float32")).div(a)}}})(r)}}),BW=$e({min_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=Oe(n,"x","min"),i=r,a=Ma(e,r.shape),o=a,s=qf(o,r.rank);s!=null&&(r=r.transpose(s),o=Vf(o.length,r.rank));var u=[r],l=Ve.runKernelFunc(function(c,f){var d=c.min(r,o);return f([i,d]),d},{x:r},function(c,f){return Ape(c,f[1],f[0],a,s)},"Min",{axes:o},u,[!0]);if(t){var h=Ou(l.shape,a);l=l.reshape(h)}return l}}),o4=$e({moments_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=Ma(e,(n=Oe(n,"x","moments")).shape),i=n.mean(r,t),a=i.shape;t||(a=Ou(i.shape,r));var o=n.toFloat().sub(i.reshape(a)).square();return{mean:i,variance:o.mean(r,t)}}}),Za=$e({sum_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=Oe(n,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=Ma(e,r.shape);return JI(function(a){var o=qf(i,a.rank),s=i,u=a;o!=null&&(u=a.transpose(o),s=Vf(s.length,a.rank));var l=function(d){var p=a.shape.slice();return i.forEach(function(m){p[m]=1}),d.reshape(p).mul(Bp(a.shape,"float32"))},h={axes:s},c=Ve.runKernelFunc(function(d){return d.sum(u,s)},{x:u},function(d){return{x:function(){return l(d)}}},"Sum",h);if(t){var f=Ou(c.shape,i);c=c.reshape(f)}return{value:c,gradFunc:l}})(r)}}),zW=$e({prod_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=Oe(n,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=Ma(e,r.shape),a=qf(i,r.rank),o=i,s=r;a!=null&&(s=r.transpose(a),o=Vf(o.length,r.rank));var u=Ve.runKernelFunc(function(h){return h.prod(s,o)},{permutedX:s});if(t){var l=Ou(u.shape,i);u=u.reshape(l)}return u}}),zD=$e({elu_:function(n){var e=Oe(n,"x","elu");return Ve.runKernelFunc(function(t,r){var i=t.elu(e);return r([i]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return Ve.runKernelFunc(function(a){return a.eluDer(t,i)},{dy:t,y:i})}}})}}),WW=$e({leakyRelu_:function(n,e){e===void 0&&(e=.2);var t=Oe(n,"x","leakyRelu");return zp(jt(e).mul(t),t)}}),u4=$e({prelu_:function(n,e){var t=Oe(n,"x","prelu"),r=Oe(e,"alpha","prelu");return Ve.runKernelFunc(function(i,a){var o=i.prelu(t,r);return a([t,r]),o},{x:t,alpha:r},function(i,a){var o=a[0],s=a[1],u=o.greater(0);return{x:function(){return Np(u,i,i.mul(s))},alpha:function(){var l=Np(u,ar(i),i.mul(o)),h=Ja(s.shape,i.shape);return h.length>0&&(l=l.sum(h)),l.reshape(s.shape)}}},"Prelu")}}),M1=$e({relu_:function(n){var e=Oe(n,"x","relu");return e.dtype==="bool"?e.toInt():Ve.runKernelFunc(function(t,r){var i=t.relu(e);return r([e]),i},{x:e},function(t,r){var i=r[0];return{x:function(){return t.mulStrict(i.step().toFloat())}}},"Relu")}}),Npe=$e({relu6_:function(n){var e=Oe(n,"x","relu6");return e.dtype==="bool"?e.toInt():Ve.runKernelFunc(function(t,r){var i=t.relu6(e);return r([e]),i},{x:e},function(t,r){var i=r[0],a=i.lessEqual(6).mul(i.step());return{x:function(){return t.mulStrict(a.toFloat())}}},"Relu6")}}),jW=$e({selu_:function(n){var e=Oe(n,"x","selu");return Ve.runKernelFunc(function(t,r){var i=t.selu(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){var a=i.greater(jt(0)),o=jt(bW),s=jt(wW),u=t.mul(s),l=t.mul(o).mul(i.toFloat().exp());return Np(a,u,l)}}})}}),Ope=$e({localResponseNormalization_:function(n,e,t,r,i){e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),i===void 0&&(i=.5);var a=Oe(n,"x","localResponseNormalization");Pe(a.rank===4||a.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."}),Pe(ra(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var o=a,s=!1;a.rank===3&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=Ve.runKernelFunc(function(l,h){var c=l.localResponseNormalization4D(o,e,t,r,i);return h([o,c]),c},{x4D:o},function(l,h){var c=h[0],f=h[1];return{x4D:function(){return Ve.runKernelFunc(function(d){return d.LRNGrad(l,c,f,e,t,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Rpe=$e({norm_:function(n,e,t,r){e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var i=function s(u,l,h){if(h===void 0&&(h=null),u.rank===0)return u.abs();if(u.rank!==1&&h===null)return s(u.reshape([-1]),l,h);if(u.rank===1||typeof h=="number"||Array.isArray(h)&&h.length===1){if(l===1)return u.abs().sum(h);if(l===1/0)return u.abs().max(h);if(l===-1/0)return u.abs().min(h);if(l==="euclidean"||l===2)return u.abs().pow(jt(2,"int32")).sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(h)&&h.length===2){if(l===1)return u.abs().sum(h[0]).max(h[1]-1);if(l===1/0)return u.abs().sum(h[1]).max(h[0]);if(l===-1/0)return u.abs().sum(h[1]).min(h[0]);if(l==="fro"||l==="euclidean")return u.square().sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+h)}(n=Oe(n,"x","norm"),e,t),a=i.shape;if(r){var o=Ma(t,n.shape);a=Ou(i.shape,o)}return i.reshape(a)}}),Pje=$e({basicLSTMCell_:function(n,e,t,r,i,a){var o=Oe(n,"forgetBias","basicLSTMCell"),s=Oe(e,"lstmKernel","basicLSTMCell"),u=Oe(t,"lstmBias","basicLSTMCell"),l=Oe(r,"data","basicLSTMCell"),h=Oe(i,"c","basicLSTMCell"),c=Oe(a,"h","basicLSTMCell"),f=l.concat(c,1).matMul(s).add(u),d=f.shape[0],p=f.shape[1]/4,m=[d,p],g=f.slice([0,0],m),y=f.slice([0,p],m),v=f.slice([0,2*p],m),b=f.slice([0,3*p],m),w=g.sigmoid().mulStrict(y.tanh()).addStrict(h.mulStrict(o.add(v).sigmoid())),x=w.tanh().mulStrict(b.sigmoid());return[w,x]}}),Lje=$e({multiRNNCell_:function(n,e,t,r){for(var i=Oe(e,"data","multiRNNCell"),a=fO(t,"c","multiRNNCell"),o=fO(r,"h","multiRNNCell"),s=i,u=[],l=0;l<n.length;l++){var h=n[l](s,a[l],o[l]);u.push(h[0]),u.push(h[1]),s=h[1]}var c=[],f=[];for(l=0;l<u.length;l+=2)c.push(u[l]),f.push(u[l+1]);return[c,f]}}),Mje=$e({movingAverage_:function(n,e,t,r,i){i===void 0&&(i=!0);var a=Oe(n,"v","movingAverage"),o=Oe(e,"x","movingAverage"),s=Oe(t,"decay","movingAverage");Hfe(a,o),Pe(ts(a.shape,o.shape),function(){return"Shape mismatch in v and x"});var u=jt(1),l=u.sub(s),h=o.sub(a).mul(l);if(i){Pe(r!=null,function(){return"When using zeroDebias: true, step is required."});var c=Oe(r,"step","movingAverage");h=h.div(u.sub(bE(s,c)))}return a.add(h)}}),Ipe=$e({stridedSlice_:function(n,e,t,r,i,a,o,s,u){if(i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var l=Oe(n,"x","stridedSlice"),h=ZY(s),c=l.shape.slice();h.forEach(function(g){e[g]=0,t[g]=1,c.splice(g,0,1)}),l=l.reshape(c);for(var f=0;f<l.rank;f++)e[f]=Y7e(i,e,r,l.shape,f),t[f]=Q7e(a,t,r,l.shape,f),r[f]=r[f]||1;var d=ZY(u);d.forEach(function(g){t[g]=e[g]+1,r[g]=1});var p=fW(e,t,r),m=p.filter(function(g,y){return d.indexOf(y)===-1});return r.every(function(g){return g===1})?mc(l,e,p).reshape(m):Ve.runKernelFunc(function(g){return g.stridedSlice(l,e,t,r)},{$x:l}).reshape(m)}}),Fpe=$e({topk_:function(n,e,t){e===void 0&&(e=1),t===void 0&&(t=!0);var r=Oe(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var a=Ve.runKernelFunc(function(o){return o.topk(r,e,t)},{$x:r});return{values:a[0],indices:a[1]}}}),Ppe=$e({scatterND_:function(n,e,t){var r=Oe(n,"indices","scatterND","int32"),i=Oe(e,"updates","scatterND");return X7e(i,r,t),Ve.runKernelFunc(function(a){return a.scatterND(r,i,t)},{indices:r,updates:i},null,"ScatterNd",{shape:t})}}),l4=$e({fft_:function(n){Pe(n.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return Ve.runKernelFunc(function(i){return i.fft(r)},{input:n}).reshape(n.shape)}}),_E=$e({ifft_:function(n){Pe(n.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return Ve.runKernelFunc(function(i){return i.ifft(r)},{input:n}).reshape(n.shape)}}),c4=$e({rfft_:function(n,e){Pe(n.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+n.dtype});var t,r=n.shape[n.shape.length-1],i=n.size/r;if(e!=null&&e<r){var a=n.shape.map(function(y){return 0}),o=n.shape.map(function(y){return y});o[n.shape.length-1]=e,t=n.slice(a,o),r=e}else if(e!=null&&e>r){var s=n.shape.map(function(y){return y});s[n.shape.length-1]=e-r,t=n.concat(Lr(s),n.shape.length-1),r=e}else t=n;var u=t.zerosLike(),l=xs(t,u).as2D(i,r),h=l4(l),c=Math.floor(r/2)+1,f=pl(h),d=ih(h),p=f.split([c,r-c],f.shape.length-1),m=d.split([c,r-c],d.shape.length-1),g=t.shape.slice();return g[t.shape.length-1]=c,xs(p[0],m[0]).reshape(g)}}),$W=$e({irfft_:function(n){var e=n.shape[n.shape.length-1],t=n.size/e;if(e<=2){var r=n.as2D(t,e),i=_E(r);return pl(i)}var a=[t,2*(e-1)],o=pl(n).as2D(t,e),s=ih(n).as2D(t,e),u=o.slice([0,1],[t,e-2]).reverse(1),l=s.slice([0,1],[t,e-2]).reverse(1).mul(jt(-1)),h=o.concat(u,1),c=s.concat(l,1);return r=xs(h,c).as2D(a[0],a[1]),i=_E(r),pl(i)}}),Uje=Object.freeze({fft:l4,ifft:_E,rfft:c4,irfft:$W}),qW=$e({sparseToDense_:function(n,e,t,r){r===void 0&&(r=0);var i=Oe(n,"sparseIndices","sparseToDense","int32"),a=Oe(e,"sparseValues","sparseToDense"),o=Oe(r,"defaultValue","sparseToDense",a.dtype);return function(s,u,l,h){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var c=s.rank>0?s.shape[0]:1,f=s.rank>1?s.shape[1]:1;if(l.length!==f)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+f+".");var d=u.size;if(u.rank!==0&&(u.rank!==1||d!==c))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+c+"]");if(u.dtype!==h.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,t,o),Ve.runKernelFunc(function(s){return s.sparseToDense(i,a,t,o)},{$sparseIndices:i,$sparseValues:a,$defaultValue:o})}}),Lpe=$e({gatherND_:function(n,e){var t=Oe(e,"indices","gatherND","int32"),r=Oe(n,"x","gatherND");return Ve.runKernelFunc(function(i){return i.gatherND(r,t)},{x:r,indices:t},null,"GatherNd")}}),Bje=$e({diag_:function(n){var e=Oe(n,"x","diag").flatten(),t=n.shape.concat(n.shape);return Ve.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(t)}}),Mpe=$e({dropout_:function(n,e,t,r){var i=Oe(n,"x","dropout");if(Pe(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),Pe(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return n instanceof cr?i.clone():i;var a=function(u,l){if(l==null)return u.shape.slice();if(ts(u.shape,l))return l;if(u.shape.length===l.length){for(var h=[],c=0;c<u.shape.length;c++)l[c]==null&&u.shape[c]!=null?h.push(u.shape[c]):h.push(l[c]);return h}return l}(i,t),o=1-e,s=Tx(a,0,1,"float32",r).add(o).floor().div(o);return i.mul(s)}});function Upe(n,e,t){for(var r=1-n%2,i=new Float32Array(n),a=0;a<n;++a){var o=2*Math.PI*a/(n+r-1);i[a]=e-t*Math.cos(o)}return Ru(i,"float32")}var VW=$e({hannWindow_:function(n){return Upe(n,.5,.5)}}),Bpe=$e({hammingWindow_:function(n){return Upe(n,.54,.46)}}),HW=$e({frame_:function(n,e,t,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var a=0,o=[];a+e<=n.size;)o.push(mc(n,a,e)),a+=t;if(r)for(;a<n.size;){var s=a+e-n.size,u=Yo([mc(n,a,e-s),PD([s],i)]);o.push(u),a+=t}return o.length===0?Im([],[0,e]):Yo(o).as2D(o.length,e)}}),zpe=$e({stft_:function(n,e,t,r,i){var a;i===void 0&&(i=VW),r==null&&(a=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var o=HW(n,e,t),s=rn(o,i(e)),u=[],l=0;l<o.shape[0];l++)u.push(c4(s.slice([l,0],[1,e]),r));return Yo(u)}}),zje=Object.freeze({hannWindow:VW,hammingWindow:Bpe,frame:HW,stft:zpe}),yo,Wje=function(n,e,t){return t===void 0&&(t=1),Jt(this,void 0,void 0,function(){var r,i,a,o,s,u,l,h,c,f,d,p,m,g;return en(this,function(y){switch(y.label){case 0:return r=Oe(n,"predictions","inTopK"),i=Oe(e,"targets","inTopK"),Pe(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),Pe(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),Or(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],Pe(t>0&&t<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+t}),[4,r.data()];case 1:return o=y.sent(),[4,i.data()];case 2:for(s=y.sent(),u=[o.length/a,a],h=u[1],c=m1("bool",l=u[0]),f=0;f<l;f++){for(d=f*h,p=o.subarray(d,d+h),m=[],g=0;g<p.length;g++)m.push({value:p[g],index:g});for(m.sort(function(v,b){return b.value-v.value}),c[f]=0,g=0;g<t;g++)if(m[g].index===s[f]){c[f]=1;break}}return n!==r&&r.dispose(),e!==i&&i.dispose(),[2,Na(c,i.shape,"bool")]}})})};(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(yo||(yo={}));var jje=$e({absoluteDifference_:function(n,e,t,r){r===void 0&&(r=yo.SUM_BY_NONZERO_WEIGHTS);var i=Oe(n,"labels","absoluteDifference"),a=Oe(e,"predictions","absoluteDifference"),o=null;t!=null&&(o=Oe(t,"weights","absoluteDifference")),Or(i.shape,a.shape,"Error in absoluteDifference: ");var s=i.sub(a).abs();return jp(s,o,r)}}),jp=$e({computeWeightedLoss_:function(n,e,t){t===void 0&&(t=yo.SUM_BY_NONZERO_WEIGHTS);var r=Oe(n,"losses","computeWeightedLoss"),i=null;e!=null&&(i=Oe(e,"weights","computeWeightedLoss"));var a=i==null?r:r.mul(i);if(t===yo.NONE)return a;if(t===yo.SUM)return a.sum();if(t===yo.MEAN){if(i==null)return a.mean();var o=r.size/i.size,s=a.sum().div(i.sum());return o>1?s.div(jt(o)):s}if(t===yo.SUM_BY_NONZERO_WEIGHTS){if(i==null)return a.sum().div(jt(r.size));var u=i.mul(Bp(r.shape)).notEqual(jt(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+t)}}),$je=$e({cosineDistance_:function(n,e,t,r,i){i===void 0&&(i=yo.SUM_BY_NONZERO_WEIGHTS);var a=Oe(n,"labels","cosineDistance"),o=Oe(e,"predictions","cosineDistance"),s=null;r!=null&&(s=Oe(r,"weights","cosineDistance")),Or(a.shape,o.shape,"Error in cosineDistance: ");var u=jt(1).sub(a.mul(o).sum(t,!0));return jp(u,s,i)}}),qje=$e({hingeLoss_:function(n,e,t,r){r===void 0&&(r=yo.SUM_BY_NONZERO_WEIGHTS);var i=Oe(n,"labels","hingeLoss"),a=Oe(e,"predictions","hingeLoss"),o=null;t!=null&&(o=Oe(t,"weights","hingeLoss")),Or(i.shape,a.shape,"Error in hingeLoss: ");var s=jt(1);i=jt(2).mul(i).sub(s);var u=s.sub(i.mul(a)).relu();return jp(u,o,r)}}),Vje=$e({huberLoss_:function(n,e,t,r,i){r===void 0&&(r=1),i===void 0&&(i=yo.SUM_BY_NONZERO_WEIGHTS);var a=Oe(n,"labels","huberLoss"),o=Oe(e,"predictions","huberLoss"),s=null;t!=null&&(s=Oe(t,"weights","huberLoss")),Or(a.shape,o.shape,"Error in huberLoss: ");var u=jt(r),l=o.sub(a).abs(),h=LD(l,u),c=l.sub(h),f=jt(.5).mul(h.square()).add(u.mul(c));return jp(f,s,i)}}),Hje=$e({logLoss_:function(n,e,t,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=yo.SUM_BY_NONZERO_WEIGHTS);var a=Oe(n,"labels","logLoss"),o=Oe(e,"predictions","logLoss"),s=null;t!=null&&(s=Oe(t,"weights","logLoss")),Or(a.shape,o.shape,"Error in logLoss: ");var u=jt(1),l=jt(r),h=a.mul(o.add(l).log()).neg().sub(u.sub(a).mul(u.sub(o).add(l).log()));return jp(h,s,i)}}),Gje=$e({meanSquaredError_:function(n,e,t,r){r===void 0&&(r=yo.SUM_BY_NONZERO_WEIGHTS);var i=Oe(n,"labels","meanSquaredError"),a=Oe(e,"predictions","meanSquaredError"),o=null;t!=null&&(o=Oe(t,"weights","meanSquaredError")),Or(i.shape,a.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(a);return jp(s,o,r)}}),Xje=$e({sigmoidCrossEntropy_:function(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=yo.SUM_BY_NONZERO_WEIGHTS);var a=Oe(n,"multiClassLabels","sigmoidCrossEntropy"),o=Oe(e,"logits","sigmoidCrossEntropy"),s=null;if(t!=null&&(s=Oe(t,"weights","sigmoidCrossEntropy")),Or(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=jt(r),l=jt(1),h=jt(.5);a=a.mul(l.sub(u)).add(h.mul(u))}var c=function(f,d){var p=Oe(f,"labels","sigmoidCrossEntropyWithLogits"),m=Oe(d,"logits","sigmoidCrossEntropyWithLogits");Or(p.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=m.relu(),y=m.mul(p),v=m.abs().neg().exp().log1p();return g.sub(y).add(v)}(a,o);return jp(c,s,i)}}),Kje=$e({softmaxCrossEntropy_:function(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=yo.SUM_BY_NONZERO_WEIGHTS);var a=Oe(n,"onehotLabels","softmaxCrossEntropy"),o=Oe(e,"logits","softmaxCrossEntropy"),s=null;if(t!=null&&(s=Oe(t,"weights","softmaxCrossEntropy")),Or(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=jt(r),l=jt(1),h=jt(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(h))}var c=function(f,d,p){if(p===void 0&&(p=-1),p===-1&&(p=d.rank-1),p!==d.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+d.rank+" and dim was "+p);return JI(function(m,g,y){var v=g.logSumExp([p],!0),b=g.toFloat().sub(v);return y([m,b]),{value:b.mul(m).neg().sum([p]),gradFunc:function(w,x){var S=x[0],E=x[1],A=Ou(w.shape,[p]);return[w.reshape(A).mul(S.toFloat().sub(E.exp())),w.reshape(A).mul(E.exp().sub(S.toFloat()))]}}})(f,d)}(a,o);return jp(c,s,i)}}),Yje=Object.freeze({get Reduction(){return yo},absoluteDifference:jje,computeWeightedLoss:jp,cosineDistance:$je,hingeLoss:qje,huberLoss:Vje,logLoss:Hje,meanSquaredError:Gje,sigmoidCrossEntropy:Xje,softmaxCrossEntropy:Kje});function wQ(n,e){return e===void 0&&(e=!1),Ve.tidy(function(){if(n.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var t=n.shape[0],r=n.shape[1],i=CW(t),a=n.clone(),o=Im([[1]],[1,1]),s=o.clone(),u=t>=r?r:t,l=function(c){var f,d=a,p=s,m=i;f=Ve.tidy(function(){var g=a.slice([c,c],[t-c,1]),y=g.norm(),v=a.slice([c,c],[1,1]),b=Im([[-1]]).where(v.greater(0),Im([[1]])),w=v.sub(b.mul(y)),x=g.div(w);s=x.shape[0]===1?o.clone():o.concat(x.slice([1,0],[x.shape[0]-1,x.shape[1]]),0);var S=b.matMul(w).div(y).neg(),E=a.slice([c,0],[t-c,r]),A=S.mul(s),k=s.transpose();if(c===0)a=E.sub(A.matMul(k.matMul(E)));else{var T=E.sub(A.matMul(k.matMul(E)));a=a.slice([0,0],[c,r]).concat(T,0)}var O=A.transpose(),F=i.slice([0,c],[t,i.shape[1]-c]);if(c===0)i=F.sub(F.matMul(s).matMul(O));else{var I=F.sub(F.matMul(s).matMul(O));i=i.slice([0,0],[t,c]).concat(I,1)}return[s,a,i]}),s=f[0],a=f[1],i=f[2],rr([d,p,m])},h=0;h<u;++h)l(h);return!e&&t>r&&(i=i.slice([0,0],[t,r]),a=a.slice([0,0],[r,r])),[i,a]})}var Qje=$e({bandPart_:function(n,e,t){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=Oe(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,a=r.shape.slice(-2),o=a[0],s=a[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+o+").");if(!(t<=s))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+s+").");e<0&&(e=o),t<0&&(t=s);var u=vE(0,o,1,"int32").reshape([-1,1]),l=vE(0,s,1,"int32"),h=pa(u,l),c=yy(h.lessEqual(jt(+e,"int32")),h.greaterEqual(jt(-t,"int32"))),f=Lr([o,s],r.dtype);return mh(y1(r.reshape([-1,o,s])).map(function(d){return Np(c,d,f)})).reshape(i)}}),Zje=$e({gramSchmidt_:function(n){var e;if(Array.isArray(n)){e=!1,Pe(n!=null&&n.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=n[0].shape[0],r=function(u){Pe(n[u].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[u].shape[0]+" vs. "+t+")"})},i=1;i<n.length;++i)r(i)}else e=!0,n=Fm(n,n.shape[0],0).map(function(u){return XI(u,[0])});Pe(n.length<=n[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."});var a=[],o=n,s=function(u){a.push(Ve.tidy(function(){var l=o[u];if(u>0)for(var h=0;h<u;++h){var c=Za(a[h].mulStrict(l)).mul(a[h]);l=l.sub(c)}return l.div(Rpe(l,"euclidean"))}))};for(i=0;i<n.length;++i)s(i);return e?mh(a,0):a}}),Jje=$e({qr_:function(n,e){if(e===void 0&&(e=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(n.rank===2)return wQ(n,e);var t=n.shape.slice(0,n.shape.length-2).reduce(function(o,s){return o*s}),r=y1(n.reshape([t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],a=[];return r.forEach(function(o){var s=wQ(o,e),u=s[0],l=s[1];i.push(u),a.push(l)}),[mh(i,0).reshape(n.shape),mh(a,0).reshape(n.shape)]}}),Wpe=Object.freeze({bandPart:Qje,gramSchmidt:Zje,qr:Jje});function h4(n,e,t,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);var o=n.shape[0];return t=Math.min(t,o),Pe(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),Pe(n.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"}),Pe(n.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]}),Pe(e.rank===1,function(){return"scores must be a 1D tensor"}),Pe(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),Pe(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var e$e=$e({resizeBilinear_:function(n,e,t){t===void 0&&(t=!1);var r=Oe(n,"images","resizeBilinear");Pe(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),Pe(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=Ve.runKernelFunc(function(l,h){return h([i]),l.resizeBilinear(i,o,s,t)},{x:i},function(l,h){return{x:function(){return Ve.runKernelFunc(function(c){return c.resizeBilinearBackprop(l,h[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:o,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),t$e=$e({resizeNearestNeighbor_:function(n,e,t){t===void 0&&(t=!1);var r=Oe(n,"images","resizeNearestNeighbor");Pe(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),Pe(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),Pe(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=Ve.runKernelFunc(function(l,h){return h([i]),l.resizeNearestNeighbor(i,o,s,t)},{batchImages:i},function(l,h){return{batchImages:function(){return Ve.runKernelFunc(function(c){return c.resizeNearestNeighborBackprop(l,h[0],t)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),n$e=$e({nonMaxSuppression_:function(n,e,t,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var a=Oe(n,"boxes","nonMaxSuppression"),o=Oe(e,"scores","nonMaxSuppression"),s=h4(a,o,t,r,i);t=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var u={maxOutputSize:t,iouThreshold:r,scoreThreshold:i};return Ve.runKernelFunc(function(l){return l.nonMaxSuppression(a,o,t,r,i)},{boxes:a,scores:o},null,"NonMaxSuppressionV3",u)}}),r$e=function(n,e,t,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Jt(this,void 0,void 0,function(){var a,o,s,u,l,h,c;return en(this,function(f){switch(f.label){case 0:return a=Oe(n,"boxes","nonMaxSuppressionAsync"),o=Oe(e,"scores","nonMaxSuppressionAsync"),s=h4(a,o,t,r,i),t=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([a.data(),o.data()])];case 1:return u=f.sent(),l=u[0],h=u[1],c=gW(l,h,t,r,i),a!==n&&a.dispose(),o!==e&&o.dispose(),[2,c]}})})},i$e=$e({nonMaxSuppressionWithScore_:function(n,e,t,r,i,a){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0);var o=Oe(n,"boxes","nonMaxSuppression"),s=Oe(e,"scores","nonMaxSuppression"),u=h4(o,s,t,r,i,a),l={maxOutputSize:t=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},h=Ve.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},l);return{selectedIndices:h[0],selectedScores:h[1]}}}),a$e=function(n,e,t,r,i,a){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0),Jt(this,void 0,void 0,function(){var o,s,u,l,h,c,f;return en(this,function(d){switch(d.label){case 0:return o=Oe(n,"boxes","nonMaxSuppressionAsync"),s=Oe(e,"scores","nonMaxSuppressionAsync"),u=h4(o,s,t,r,i,a),t=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return l=d.sent(),h=l[0],c=l[1],f=mW(h,c,t,r,i,a),o!==n&&o.dispose(),s!==e&&s.dispose(),[2,f]}})})},s$e=$e({cropAndResize_:function(n,e,t,r,i,a){var o=Oe(n,"image","cropAndResize"),s=Oe(e,"boxes","cropAndResize","float32"),u=Oe(t,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var l=s.shape[0];return Pe(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),Pe(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),Pe(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),Pe(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),Pe(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),Pe(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),Ve.runKernelFunc(function(h,c){return h.cropAndResize(o,s,u,r,i,a)},{images:o,boxes:s,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:a,cropSize:r})}}),K0=Object.freeze({resizeBilinear:e$e,resizeNearestNeighbor:t$e,nonMaxSuppression:n$e,nonMaxSuppressionAsync:r$e,nonMaxSuppressionWithScore:i$e,nonMaxSuppressionWithScoreAsync:a$e,cropAndResize:s$e}),GW=function(n,e){return!(n>0)||e==="linear"},XW=function(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return n.mul(e.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},KW=function(n,e){var t=e,r=Ja(n.shape,e.shape);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},YW=function(n,e,t){if(e==="linear")return n;if(e==="relu")return M1(n);if(e==="elu")return zD(n);if(e==="relu6")return Npe(n);if(e==="prelu")return u4(n,t);throw new Error("Unknown fused activation "+e+".")},o$e=$e({fusedMatMul_:function(n){var e,t=n.a,r=n.b,i=n.transposeA,a=i!==void 0&&i,o=n.transposeB,s=o!==void 0&&o,u=n.bias,l=n.activation,h=l===void 0?"linear":l,c=n.preluActivationWeights;if(GW(Ve.state.gradientDepth,h)===!1){var f=RW(t,r,a,s);return u!=null&&(f=qn(f,u)),YW(f,h,c)}var d=Oe(t,"a","fused matMul"),p=Oe(r,"b","fused matMul");e=ji(d,p),d=e[0],p=e[1];var m=a?d.shape[d.rank-2]:d.shape[d.rank-1],g=s?p.shape[p.rank-1]:p.shape[p.rank-2],y=a?d.shape[d.rank-1]:d.shape[d.rank-2],v=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=d.shape.slice(0,-2),w=p.shape.slice(0,-2),x=Qt(b),S=Qt(w);Pe(d.rank>=2&&p.rank>=2&&d.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+p.rank+"."}),Pe(ts(b,w),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+d.shape+" and "+p.shape+" must match."}),Pe(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+d.shape+" and "+p.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var E,A,k=d.shape.slice(0,-2).concat([y,v]),T=a?d.as3D(x,m,y):d.as3D(x,y,m),O=s?p.as3D(S,v,g):p.as3D(S,g,v);u!=null&&Jn(k,(E=ji(E=Oe(u,"bias","fused matMul"),d)[0]).shape),c!=null&&(A=Oe(c,"prelu weights","fused matMul"));var F={a:T,b:O};u!=null&&(F.bias=E),c!=null&&(F.preluActivationWeights=A);var I=[T,O];return Ve.runKernelFunc(function(R,U){var B=R.fusedBatchMatMul({a:T,b:O,transposeA:a,transposeB:s,bias:E,activation:h,preluActivationWeights:A});return U([T,O,B]),B},F,function(R,U){var B=U[0],W=U[1],Y=U[2],z=XW(R,Y,h),j={};return u!=null&&(j={bias:function(){return KW(E,z)}}),Object.assign(a||s?!a&&s?{a:function(){return z.matMul(W,!1,!1)},b:function(){return z.matMul(B,!0,!1)}}:a&&!s?{a:function(){return W.matMul(z,!1,!0)},b:function(){return B.matMul(z,!1,!1)}}:{a:function(){return W.matMul(z,!0,!0)},b:function(){return z.matMul(B,!0,!0)}}:{a:function(){return z.matMul(W,!1,!0)},b:function(){return B.matMul(z,!0,!1)}},j)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:h},I,[!0]).reshape(k)}}),u$e=$e({fusedConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,i=n.pad,a=n.dataFormat,o=a===void 0?"NHWC":a,s=n.dilations,u=s===void 0?[1,1]:s,l=n.dimRoundingMode,h=n.bias,c=n.activation,f=c===void 0?"linear":c,d=n.preluActivationWeights;if(f=f||"linear",GW(Ve.state.gradientDepth,f)===!1){var p=Ax(e,t,r,i,o,u,l);return h!=null&&(p=qn(p,h)),YW(p,f,d)}var m=Oe(e,"x","conv2d"),g=Oe(t,"filter","conv2d"),y=m,v=!1;m.rank===3&&(v=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Pe(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),Pe(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),l!=null&&Pe(ra(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),Pe(y.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),Pe(Qo(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),Pe(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var b,w,x=P1(y.shape,g.shape,r,u,i,l);h!=null&&(b=ji(b=Oe(h,"bias","fused conv2d"),m)[0],Jn(x.outShape,b.shape)),d!=null&&(w=Oe(d,"prelu weights","fused conv2d"));var S={x:y,filter:g};h!=null&&(S.bias=b),d!=null&&(S.preluActivationWeights=w);var E=[g,y],A=Ve.runKernelFunc(function(k,T){var O=k.fusedConv2d({input:y,filter:g,convInfo:x,bias:b,activation:f,preluActivationWeights:w});return T([g,y,O]),O},S,function(k,T){var O=T,F=O[0],I=O[1],R=O[2],U=XW(k,R,f);Pe(ex(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var B={};return h!=null&&(B={bias:function(){return KW(b,U)}}),Object.assign({x:function(){return xpe(I.shape,U,F,r,i)},filter:function(){return NW(I,U,F.shape,r,i)}},B)},"FusedConv2D",{convInfo:x,activation:f},E,[!0]);return v?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}}),l$e=$e({fusedDepthwiseConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,i=n.pad,a=n.dataFormat,o=a===void 0?"NHWC":a,s=n.dilations,u=s===void 0?[1,1]:s,l=n.dimRoundingMode,h=n.bias,c=n.activation,f=c===void 0?"linear":c,d=n.preluActivationWeights;if(GW(Ve.state.gradientDepth,f)===!1){var p=BD(e,t,r,i,o,u,l);return h!=null&&(p=qn(p,h)),YW(p,f,d)}var m=Oe(e,"x","depthwiseConv2d"),g=Oe(t,"filter","depthwiseConv2d"),y=m,v=!1;m.rank===3&&(v=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Pe(y.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."}),Pe(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),Pe(y.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),u==null&&(u=[1,1]),Pe(Qo(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&Pe(ra(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var b,w,x=P1(y.shape,g.shape,r,u,i,l,!0);h!=null&&(b=ji(b=Oe(h,"bias","fused conv2d"),m)[0],Jn(x.outShape,b.shape)),d!=null&&(w=Oe(d,"prelu weights","fused depthwiseConv2d"));var S={x:y,filter:g};h!=null&&(S.bias=b),d!=null&&(S.preluActivationWeights=w);var E=[g,y],A=Ve.runKernelFunc(function(k,T){var O=k.fusedDepthwiseConv2D({input:y,filter:g,convInfo:x,bias:b,activation:f,preluActivationWeights:w});return T([g,y,O]),O},S,function(k,T){Pe(ex(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var O=T[0],F=T[1],I=T[2],R=XW(k,I,f),U={};return h!=null&&(U={bias:function(){return KW(b,R)}}),Object.assign({x:function(){return _pe(F.shape,R,O,x)},filter:function(){return Spe(F,R,O.shape,x)}},U)},"FusedDepthwiseConv2D",{convInfo:x,activation:f},E,[!0]);return v?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}}),x1=Object.freeze({matMul:o$e,conv2d:u$e,depthwiseConv2d:l$e}),c$e=Object.freeze({image:K0,linalg:Wpe,losses:Yje,spectral:Uje,fused:x1,signal:zje,add:qn,addN:rpe,batchNorm:Ex,batchNormalization:aje,batchNorm2d:ope,batchNormalization2d:sje,batchNorm3d:lpe,batchNormalization3d:oje,batchNorm4d:hpe,batchNormalization4d:uje,broadcastTo:fpe,clone:lje,div:ya,divNoNan:SW,eye:CW,multinomial:ppe,oneHot:tx,pad:Wp,pad1d:hje,pad2d:fje,pad3d:dje,pad4d:pje,rand:gje,randomGamma:vje,randomNormal:gpe,randomUniform:Tx,square:TW,squaredDifference:DW,tile:Pm,truncatedNormal:n4,conv1d:AW,conv2d:Ax,conv3d:kW,depthwiseConv2d:BD,separableConv2d:Cpe,conv2dTranspose:OW,conv3dTranspose:Tje,op:$e,booleanMaskAsync:Eje,complex:xs,real:pl,imag:ih,concat:Yo,concat1d:Zfe,concat2d:Jfe,concat3d:ede,concat4d:tde,split:Fm,matMul:RW,dot:Dje,outerProduct:Aje,reverse:Op,reverse1d:kje,reverse2d:Nje,reverse3d:Oje,reverse4d:Rje,maxPool:IW,avgPool:FW,pool:Ije,maxPool3d:PW,avgPool3d:LW,maxPoolWithArgmax:Dpe,slice:mc,slice1d:a4,slice2d:MW,slice3d:s4,slice4d:xE,abs:v1,acos:fde,acosh:dde,asin:pde,asinh:gde,atan:mde,atanh:yde,ceil:vde,clipByValue:Iu,cos:bde,cosh:wde,erf:xde,exp:_de,expm1:Sde,floor:sW,log:Zm,log1p:Cde,logSigmoid:F7e,neg:F1,reciprocal:Ede,round:Tde,rsqrt:oW,sigmoid:uW,sign:Dde,isNaN:P7e,isInf:L7e,isFinite:M7e,sin:Ade,sinh:kde,softplus:QI,sqrt:ZI,step:U7e,tan:Nde,tanh:lW,all:UW,any:wO,argMax:xO,argMin:kpe,logSumExp:Fje,max:w1,mean:Ia,min:BW,moments:o4,sum:Za,prod:zW,equal:Dx,equalStrict:bje,greater:r4,greaterEqual:i4,greaterEqualStrict:wje,greaterStrict:xje,less:mpe,lessEqual:ype,lessEqualStrict:_je,lessStrict:Sje,notEqual:wE,notEqualStrict:Cje,addStrict:B7e,atan2:Ode,divStrict:z7e,floorDiv:cW,maximum:zp,maximumStrict:W7e,minimum:LD,minimumStrict:j7e,mod:Rde,modStrict:$7e,mul:rn,mulStrict:hW,pow:bE,powStrict:q7e,squaredDifferenceStrict:V7e,sub:pa,subStrict:H7e,elu:zD,leakyRelu:WW,prelu:u4,relu:M1,relu6:Npe,selu:jW,logicalAnd:yy,logicalNot:dpe,logicalOr:xW,logicalXor:cje,where:Np,whereAsync:_W,buffer:Dn,print:R7e,batchToSpaceND:rW,cast:iW,cumsum:I7e,depthToSpace:nde,expandDims:oc,reshape:Df,spaceToBatchND:aW,squeeze:XI,stack:mh,unstack:y1,setdiff1dAsync:rde,fill:PD,linspace:Qfe,ones:Bp,range:vE,scalar:jt,tensor:Na,tensor1d:Ru,tensor2d:Im,tensor3d:Kfe,tensor4d:mv,tensor5d:N7e,tensor6d:O7e,variable:Yfe,zeros:Lr,onesLike:gc,zerosLike:ar,transpose:gr,softmax:Cx,logSoftmax:dW,localResponseNormalization:Ope,norm:Rpe,gather:UD,unsortedSegmentSum:vpe,basicLSTMCell:Pje,multiRNNCell:Lje,movingAverage:Mje,stridedSlice:Ipe,topk:Fpe,scatterND:Ppe,fft:l4,ifft:_E,rfft:c4,irfft:$W,sparseToDense:qW,gatherND:Lpe,diag:Bje,dropout:Mpe,hannWindow:VW,hammingWindow:Bpe,frame:HW,stft:zpe,inTopKAsync:Wje});function wt(n,e){Array.isArray(n)||(n=[n]),n.forEach(function(t){t!=null&&Pe(t.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function GU(n,e,t,r,i,a){for(var o=i.strideHeight,s=i.strideWidth,u=i.dilationHeight,l=i.dilationWidth,h=i.effectiveFilterHeight,c=i.effectiveFilterWidth,f=i.padInfo.top,d=i.padInfo.left,p=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Dn(i.outShape,t),g=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],b=i.outShape[3],w=0;w<i.batchSize;++w)for(var x=w*y,S=w*r[0],E=0;E<i.inChannels;++E)for(var A=0;A<i.outHeight;++A)for(var k=A*o-f,T=Math.max(0,k),O=Math.min(i.inHeight,h+k),F=x+A*v,I=0;I<i.outWidth;++I){for(var R=I*s-d,U=Math.max(0,R),B=Math.min(i.inWidth,c+R),W=p,Y=0,z=0,j=T;j<O;j+=u){for(var M=S+j*r[1],q=U;q<B;q+=l){var H=n[M+q*r[2]+E];a==="max"&&H>W?W=H:a==="avg"&&(Y+=H,z++)}if(isNaN(W))break}g[F+I*b+E]=a==="avg"?Y/z:W}return m}function jpe(n,e,t,r,i,a){i===void 0&&(i=!1),a===void 0&&(a=!1);for(var o=Dn(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,h=r.dilationWidth,c=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,m=Dn(e,t,n),g=0;g<r.batchSize;++g)for(var y=0;y<r.inChannels;++y)for(var v=0;v<r.outHeight;++v){for(var b=v*s-d,w=b;w<0;)w+=l;for(var x=Math.min(r.inHeight,c+b),S=0;S<r.outWidth;++S){for(var E=S*u-p,A=E;A<0;)A+=h;for(var k=Math.min(r.inWidth,f+E),T=Number.NEGATIVE_INFINITY,O=-1,F=w;F<x;F+=l)for(var I=F-b,R=A;R<k;R+=h){var U=R-E,B=m.get(g,F,R,y);B>T&&(T=B,O=i?a?((g*r.inHeight+F)*r.inWidth+R)*r.inChannels+y:(F*r.inWidth+R)*r.inChannels+y:I*f+U)}o.set(O,g,v,S,y)}}return o}function bM(n,e,t,r){if(t==="linear")return n.linear(e);if(t==="relu")return n.relu(e);if(t==="elu")return n.elu(e);if(t==="relu6")return n.relu6(e);if(t==="prelu")return n.prelu(e,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var h$e=function(n){function e(){var t=n.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new Mde(t,Ve),t}return Sh(e,n),e.prototype.write=function(t,r,i){this.firstUse&&(this.firstUse=!1,ct().get("IS_NODE")&&hO(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var a={};return this.data.set(a,{values:t,dtype:i}),a},e.prototype.move=function(t,r,i,a){this.data.set(t,{values:r,dtype:a})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return Jt(this,void 0,void 0,function(){return en(this,function(r){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var r=this.data.get(t),i=r.dtype,a=r.complexTensors;return i==="complex64"?HU(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),i=r;if(t.dtype==="string")try{i=r.map(function(a){return gE(a)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Dn(t.shape,t.dtype,i)},e.prototype.makeOutput=function(t,r,i){var a=this.write(t,r,i);return Ve.makeTensorFromDataId(a,r,i,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return Jt(this,void 0,void 0,function(){var r;return en(this,function(i){return r=rh(),t(),[2,{kernelMs:rh()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,r){var i=this.makeOutput(null,t.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:Ve.keep(t.clone()),imag:Ve.keep(r.clone())},i},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,i){if(wt(t,"slice"),Pde(t.shape,r,i)){var a=Lde(r,t.strides),o=Qt(i);return Na(this.readSync(t.dataId).subarray(a,a+o),i,t.dtype)}for(var s=Dn(i,t.dtype),u=this.bufferSync(t),l=0;l<s.size;++l){var h=s.indexToLoc(l).map(function(c,f){return c+r[f]});s.values[l]=u.get.apply(u,h)}return s.toTensor()},e.prototype.stridedSlice=function(t,r,i,a){wt(t,"stridedSlice");var o=fW(r,i,a);if(o.some(function(d){return d===0}))return Na([],o);for(var s=Dn(o,t.dtype),u=this.bufferSync(t),l=0;l<s.size;l++){for(var h=s.indexToLoc(l),c=new Array(h.length),f=0;f<c.length;f++)c[f]=h[f]*a[f]+r[f];s.set.apply(s,[u.get.apply(u,c)].concat(h))}return s.toTensor()},e.prototype.diag=function(t){for(var r=this.readSync(t.dataId),i=Dn([t.size,t.size],t.dtype),a=i.values,o=0;o<r.length;o++)a[o*t.size+o]=r[o];return i.toTensor()},e.prototype.unstack=function(t,r){for(var i=t.shape[r],a=new Array(t.rank-1),o=0,s=0;s<t.rank;s++)s!==r&&(a[o++]=t.shape[s]);var u=new Array(t.rank).fill(0),l=t.shape.slice();l[r]=1;var h=new Array(i);for(s=0;s<h.length;s++)u[r]=s,h[s]=this.slice(t,u,l).reshape(a);return h},e.prototype.reverse=function(t,r){wt(t,"reverse");for(var i=Dn(t.shape,t.dtype),a=this.bufferSync(t),o=function(u){var l=i.indexToLoc(u),h=l.slice();r.forEach(function(c){return h[c]=t.shape[c]-1-h[c]}),i.set.apply(i,[a.get.apply(a,h)].concat(l))},s=0;s<i.size;s++)o(s);return i.toTensor()},e.prototype.concat=function(t,r){var i=this;if(t[0].dtype==="complex64"){var a=t.map(function(d){return pl(d)}),o=t.map(function(d){return ih(d)});return xs(this.concat(a,r),this.concat(o,r))}var s=t.map(function(d){var p=Qt(d.shape.slice(r));return d.as2D(-1,p)}),u=Jw(s.map(function(d){return d.shape}),1),l=Dn(u,t[0].dtype).values;if(s[0].shape[0]===1){var h=0;s.forEach(function(d){l.set(i.readSync(d.dataId),h),h+=d.size})}else{var c=0;s.forEach(function(d){for(var p=i.readSync(d.dataId),m=0,g=0;g<d.shape[0];++g)for(var y=g*u[1]+c,v=0;v<d.shape[1];++v)l[y+v]=p[m++];c+=d.shape[1]})}var f=Jw(t.map(function(d){return d.shape}),r);return Na(l,f,t[0].dtype)},e.prototype.neg=function(t){return wt(t,"neg"),this.multiply(jt(-1),t)},e.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i+o,imag:a+s}}):this.broadcastedBinaryOp(t,r,js(t.dtype,r.dtype),function(i,a){return i+a})},e.prototype.addN=function(t){var r=this;wt(t,"addN");for(var i=t.map(function(h){return r.readSync(h.dataId)}),a=Dn(t[0].shape,t[0].dtype),o=a.values,s=0;s<t.length;s++)for(var u=i[s],l=0;l<o.length;l++)o[l]+=u[l];return a.toTensor()},e.prototype.softmax=function(t,r){var i=Ma([r],t.shape),a=this.max(t,i),o=Ou(a.shape,i),s=this.subtract(t,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return ya(u,l)},e.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i-o,imag:a-s}}):this.broadcastedBinaryOp(t,r,js(t.dtype,r.dtype),function(i,a){return i-a})},e.prototype.pow=function(t,r){return wt([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return Math.pow(i,a)})},e.prototype.batchMatMul=function(t,r,i,a){wt([t,r],"matMul");for(var o=i?t.shape[1]:t.shape[2],s=i?t.shape[2]:t.shape[1],u=a?r.shape[1]:r.shape[2],l=t.shape[0],h=this.readSync(t.dataId),c=this.readSync(r.dataId),f=i?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],d=f[0],p=f[1],m=f[2],g=a?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],y=g[0],v=g[1],b=g[2],w=s*u,x=Dn([l,s,u],t.dtype),S=x.values,E=this.blockSize,A=0;A<l;A++)for(var k=0;k<s;k+=E)for(var T=0;T<u;T+=E)for(var O=0;O<o;O+=E)for(var F=Math.min(k+E,s),I=Math.min(T+E,u),R=Math.min(O+E,o),U=k;U<F;U++)for(var B=T;B<I;B++){for(var W=0,Y=O;Y<R;Y++)W+=h[A*d+U*p+Y*m]*c[Y*y+B*v+A*b];S[A*w+(U*u+B)]+=W}return x.toTensor()},e.prototype.fusedBatchMatMul=function(t){var r=t.a,i=t.b,a=t.transposeA,o=t.transposeB,s=t.bias,u=t.activation,l=t.preluActivationWeights,h=this.batchMatMul(r,i,a,o);return s&&(h=this.add(h,s)),u&&(h=bM(this,h,u,l)),h},e.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i*o-a*s,imag:i*s+a*o}}):this.broadcastedBinaryOp(t,r,js(t.dtype,r.dtype),function(i,a){return i*a})},e.prototype.floorDiv=function(t,r){return wt([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",function(i,a){return Math.floor(i/a)})},e.prototype.sum=function(t,r){wt(t,"sum"),cl("sum",r,t.rank);for(var i=lo(t.shape,r),a=i[0],o=i[1],s=Lr(a,js(t.dtype,"int32")),u=Qt(o),l=this.readSync(s.dataId),h=this.readSync(t.dataId),c=0;c<l.length;++c){for(var f=c*u,d=0,p=0;p<u;++p)d+=h[f+p];l[c]=d}return s},e.prototype.prod=function(t,r){wt(t,"sum");for(var i=lo(t.shape,r),a=i[0],o=i[1],s=Lr(a,js(t.dtype,"int32")),u=Qt(o),l=this.readSync(s.dataId),h=this.readSync(t.dataId),c=0;c<l.length;++c){for(var f=c*u,d=1,p=0;p<u;++p)d*=h[f+p];l[c]=d}return s},e.prototype.unsortedSegmentSum=function(t,r,i){wt(t,"unsortedSegmentSum");for(var a=[],o=t.rank-r.rank,s=0;s<o;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var u=jt(s,"int32"),l=Dx(u,r).asType("float32").mul(t).sum(0);a.push(l)}return mh(a)},e.prototype.argMin=function(t,r){wt(t,"argMin");var i=[r];cl("argMin",i,t.rank);for(var a=lo(t.shape,i),o=a[0],s=a[1],u=Lr(o,"int32"),l=Qt(s),h=this.readSync(u.dataId),c=this.readSync(t.dataId),f=0;f<h.length;++f){for(var d=f*l,p=c[d],m=0,g=0;g<l;++g){var y=c[d+g];y<p&&(p=y,m=g)}h[f]=m}return u},e.prototype.argMax=function(t,r){wt(t,"argMax");var i=[r];cl("argMax",i,t.rank);for(var a=lo(t.shape,i),o=a[0],s=a[1],u=Lr(o,"int32"),l=Qt(s),h=this.readSync(u.dataId),c=this.readSync(t.dataId),f=0;f<h.length;++f){for(var d=f*l,p=c[d],m=0,g=0;g<l;++g){var y=c[d+g];y>p&&(p=y,m=g)}h[f]=m}return u},e.prototype.cumsum=function(t,r,i,a){if(wt(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var o=js(t.dtype,"int32"),s=Lr(t.shape,o),u=this.readSync(s.dataId),l=this.readSync(t.dataId),h=t.shape[t.rank-1],c=a?function(g,y){return g+h-y-1}:function(g,y){return g+y},f=0;f<l.length;f+=h)for(var d=0;d<h;d++){var p=c(f,d);if(d===0)u[p]=i?0:l[p];else{var m=c(f,d-1);u[p]=i?l[m]+u[m]:l[p]+u[m]}}return s},e.prototype.equal=function(t,r){return wt([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i===a?1:0})},e.prototype.notEqual=function(t,r){return wt([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i!==a?1:0})},e.prototype.less=function(t,r){return wt([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i<a?1:0})},e.prototype.lessEqual=function(t,r){return wt([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i<=a?1:0})},e.prototype.greater=function(t,r){return wt([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i>a?1:0})},e.prototype.greaterEqual=function(t,r){return wt([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i>=a?1:0})},e.prototype.logicalNot=function(t){wt(t,"logicalNot");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)i[a]=r[a]?0:1;return this.makeOutput(i,t.shape,"bool")},e.prototype.logicalAnd=function(t,r){return wt([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i&&a})},e.prototype.logicalOr=function(t,r){return wt([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i||a})},e.prototype.select=function(t,r,i){wt([t,r,i],"select");for(var a=this.readSync(t.dataId),o=this.readSync(r.dataId),s=this.readSync(i.dataId),u=Lr(r.shape,js(r.dtype,i.dtype)),l=this.readSync(u.dataId),h=0,c=t.rank===0||t.rank>1||r.rank===1?1:Qt(r.shape.slice(1)),f=0;f<a.length;f++)for(var d=0;d<c;d++)a[f]===1?l[h++]=o[f]:l[h++]=s[f];return u},e.prototype.where=function(t){wt([t],"where");var r=this.readSync(t.dataId);return yW(t.shape,r)},e.prototype.topk=function(t,r,i){return wt(t,"topk"),Vde(this.readSync(t.dataId),t.shape,t.dtype,r)},e.prototype.min=function(t,r){wt(t,"min"),cl("min",r,t.rank);for(var i=lo(t.shape,r),a=i[0],o=i[1],s=Lr(a,t.dtype),u=Qt(o),l=this.readSync(s.dataId),h=this.readSync(t.dataId),c=0;c<l.length;++c){for(var f=c*u,d=h[f],p=0;p<u;++p){var m=h[f+p];m<d&&(d=m)}l[c]=d}return s},e.prototype.minimum=function(t,r){return wt([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return Math.min(i,a)})},e.prototype.mod=function(t,r){return wt([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){var o=i%a;return i<0&&a<0||i>=0&&a>=0?o:(o+a)%a})},e.prototype.max=function(t,r){wt(t,"max"),cl("max",r,t.rank);for(var i=lo(t.shape,r),a=i[0],o=i[1],s=Lr(a,t.dtype),u=Qt(o),l=this.readSync(s.dataId),h=this.readSync(t.dataId),c=0;c<l.length;++c){for(var f=c*u,d=h[f],p=0;p<u;++p){var m=h[f+p];m>d&&(d=m)}l[c]=d}return s},e.prototype.maximum=function(t,r){return wt([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return Math.max(i,a)})},e.prototype.all=function(t,r){wt(t,"all"),cl("all",r,t.rank);for(var i=lo(t.shape,r),a=i[0],o=i[1],s=Lr(a,t.dtype),u=Qt(o),l=this.readSync(s.dataId),h=this.readSync(t.dataId),c=0;c<l.length;++c){for(var f=c*u,d=h[f],p=0;p<u;++p){var m=h[f+p];d=d&&m}l[c]=d}return s},e.prototype.any=function(t,r){wt(t,"any"),cl("any",r,t.rank);for(var i=lo(t.shape,r),a=i[0],o=i[1],s=Lr(a,t.dtype),u=Qt(o),l=this.readSync(s.dataId),h=this.readSync(t.dataId),c=0;c<l.length;++c){for(var f=c*u,d=h[f],p=0;p<u;++p){var m=h[f+p];d=d||m}l[c]=d}return s},e.prototype.squaredDifference=function(t,r){return wt([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){var o=i-a;return o*o})},e.prototype.ceil=function(t){wt(t,"ceil");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.ceil(r[a]);return this.makeOutput(i,t.shape,"float32")},e.prototype.floor=function(t){wt(t,"floor");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.floor(r[a]);return this.makeOutput(i,t.shape,"float32")},e.prototype.sign=function(t){wt(t,"x");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)r[a]<0?i[a]=-1:r[a]>0?i[a]=1:i[a]=0;return this.makeOutput(i,t.shape,"float32")},e.prototype.isNaN=function(t){wt(t,"x");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isNaN(r[a])&&(i[a]=1);return this.makeOutput(i,t.shape,"bool")},e.prototype.isInf=function(t){wt(t,"x");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Math.abs(r[a])===1/0&&(i[a]=1);return this.makeOutput(i,t.shape,"bool")},e.prototype.isFinite=function(t){wt(t,"x");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isFinite(r[a])&&(i[a]=1);return this.makeOutput(i,t.shape,"bool")},e.prototype.round=function(t){wt(t,"round");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=Math.floor(r[a]);r[a]-o<.5?i[a]=Math.floor(r[a]):r[a]-o>.5?i[a]=Math.ceil(r[a]):i[a]=o%2==0?o:o+1}return this.makeOutput(i,t.shape,"float32")},e.prototype.exp=function(t){wt(t,"exp");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.exp(r[a]);return this.makeOutput(i,t.shape,"float32")},e.prototype.expm1=function(t){wt(t,"expm1");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.expm1(r[a]);return this.makeOutput(i,t.shape,"float32")},e.prototype.log=function(t){wt(t,"log");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log(o)}return this.makeOutput(i,t.shape,"float32")},e.prototype.log1p=function(t){wt(t,"log1p");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log1p(o)}return this.makeOutput(i,t.shape,"float32")},e.prototype.sqrt=function(t){wt(t,"sqrt");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.sqrt(o)}return this.makeOutput(i,t.shape,"float32")},e.prototype.rsqrt=function(t){wt(t,"rsqrt");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=1/Math.sqrt(o)}return this.makeOutput(i,t.shape,"float32")},e.prototype.reciprocal=function(t){wt(t,"reciprocal");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=1/r[a];return this.makeOutput(i,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){wt(t,"relu");for(var r=Lr(t.shape,t.dtype),i=this.readSync(r.dataId),a=this.readSync(t.dataId),o=0;o<a.length;++o)i[o]=Math.max(0,a[o]);return r},e.prototype.relu6=function(t){wt(t,"relu");for(var r=Lr(t.shape,t.dtype),i=this.readSync(r.dataId),a=this.readSync(t.dataId),o=0;o<a.length;++o)i[o]=Math.min(Math.max(0,a[o]),6);return r},e.prototype.prelu=function(t,r){return wt([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return i<0?a*i:i})},e.prototype.elu=function(t){wt(t,"elu");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,t.shape,"float32")},e.prototype.eluDer=function(t,r){wt([t,r],"eluDer");for(var i=new Float32Array(r.size),a=this.readSync(r.dataId),o=this.readSync(t.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>=1?o[s]:o[s]*(u+1)}return this.makeOutput(i,r.shape,"float32")},e.prototype.selu=function(t){wt(t,"selu");for(var r=bW,i=wW,a=new Float32Array(t.size),o=this.readSync(t.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(a,t.shape,"float32")},e.prototype.clip=function(t,r,i){wt(t,"clip");for(var a=new Float32Array(t.size),o=this.readSync(t.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>i?i:u<r?r:u}return this.makeOutput(a,t.shape,"float32")},e.prototype.abs=function(t){for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.abs(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<t.size;++a){var o=i[2*a],s=i[2*a+1];r[a]=Math.hypot(o,s)}return this.makeOutput(r,t.shape,"float32")},e.prototype.int=function(t){wt(t,"int");for(var r=new Int32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=i[a];return this.makeOutput(r,t.shape,"int32")},e.prototype.sigmoid=function(t){wt(t,"sigmoid");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=1/(1+Math.exp(-i[a]));return this.makeOutput(r,t.shape,"float32")},e.prototype.softplus=function(t){wt(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o){var s=a[o]>-r,u=a[o]<r,l=Math.exp(a[o]),h=void 0;h=u?l:s?a[o]:Math.log(1+l),i[o]=h}return this.makeOutput(i,t.shape,"float32")},e.prototype.sin=function(t){wt(t,"sin");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.sin(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cos=function(t){wt(t,"cos");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.cos(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tan=function(t){wt(t,"tan");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.tan(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asin=function(t){wt(t,"asin");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.asin(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acos=function(t){wt(t,"acos");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.acos(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan=function(t){wt(t,"atan");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.atan(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan2=function(t,r){return wt([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return Math.atan2(i,a)})},e.prototype.sinh=function(t){wt(t,"sinh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.sinh(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cosh=function(t){wt(t,"cosh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.cosh(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tanh=function(t){wt(t,"tanh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Pfe(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asinh=function(t){wt(t,"asinh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.asinh(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acosh=function(t){wt(t,"acosh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.acosh(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atanh=function(t){wt(t,"atanh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.atanh(i[a]);return this.makeOutput(r,t.shape,"float32")},e.prototype.erf=function(t){wt(t,"erf");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a){var o=Math.sign(i[a]),s=Math.abs(i[a]),u=1/(1+.3275911*s);r[a]=o*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,t.shape,"float32")},e.prototype.step=function(t,r){r===void 0&&(r=0),wt(t,"step");for(var i=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o){var s=a[o];isNaN(s)?i[o]=NaN:i[o]=s>0?1:r}return this.makeOutput(i,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var r=t.input,i=t.filter,a=t.convInfo,o=t.bias,s=t.activation,u=t.preluActivationWeights,l=this.conv2d(r,i,a);return o&&(l=this.add(l,o)),s&&(l=bM(this,l,s,u)),l},e.prototype.conv2d=function(t,r,i){wt([t,r],"conv2d");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,h=i.padInfo.top,c=i.dataFormat==="channelsLast",f=Dn(i.outShape,t.dtype),d=t.strides[0],p=c?t.strides[1]:t.strides[2],m=c?t.strides[2]:1,g=c?1:t.strides[1],y=f.strides[0],v=c?f.strides[1]:f.strides[2],b=c?f.strides[2]:1,w=c?1:f.strides[1],x=this.readSync(t.dataId),S=this.readSync(r.dataId),E=f.values,A=0;A<i.batchSize;++A)for(var k=A*d,T=A*y,O=0;O<i.outHeight;++O)for(var F=T+O*v,I=O*i.strideHeight-h,R=0;R<a;R++){var U=I+R*s;if(!(U<0||U>=i.inHeight))for(var B=R*r.strides[0],W=k+U*p,Y=0;Y<i.outWidth;++Y)for(var z=F+Y*b,j=Y*i.strideWidth-l,M=0;M<o;M++){var q=j+M*u;if(!(q<0||q>=i.inWidth))for(var H=W+q*m,K=B+M*r.strides[1],Z=0;Z<i.inChannels;++Z){for(var J=x[H+Z*g],X=0;X<i.outChannels;++X)E[z+X*w]+=J*S[K+X];K+=i.outChannels}}}return f.toTensor()},e.prototype.conv3d=function(t,r,i){for(var a=i.filterDepth,o=i.filterHeight,s=i.filterWidth,u=i.dilationDepth,l=i.dilationHeight,h=i.dilationWidth,c=i.padInfo.front,f=i.padInfo.left,d=i.padInfo.top,p=Dn(i.outShape,t.dtype),m=this.readSync(t.dataId),g=this.readSync(r.dataId),y=p.values,v=0;v<i.batchSize;++v)for(var b=v*t.strides[0],w=v*p.strides[0],x=0;x<i.outDepth;++x)for(var S=w+x*p.strides[1],E=x*i.strideDepth-c,A=0;A<a;A++){var k=E+A*u;if(!(k<0||k>=i.inDepth))for(var T=A*r.strides[0],O=b+k*t.strides[1],F=0;F<i.outHeight;++F)for(var I=S+F*p.strides[2],R=F*i.strideHeight-d,U=0;U<o;U++){var B=R+U*l;if(!(B<0||B>=i.inHeight))for(var W=T+U*r.strides[1],Y=O+B*t.strides[2],z=0;z<i.outWidth;++z)for(var j=I+z*i.outChannels,M=z*i.strideWidth-f,q=0;q<s;q++){var H=M+q*h;if(!(H<0||H>=i.inWidth))for(var K=W+q*r.strides[2],Z=Y+H*i.inChannels,J=K,X=0;X<i.inChannels;++X){for(var ae=m[Z+X],ie=0;ie<i.outChannels;++ie)y[j+ie]+=ae*g[J+ie];J+=i.outChannels}}}}return p.toTensor()},e.prototype.conv2dDerInput=function(t,r,i){wt([t,r],"conv2dDerInput");for(var a=Dn(i.inShape,"float32"),o=a.values,s=this.readSync(t.dataId),u=this.readSync(r.dataId),l=r.strides,h=l[0],c=l[1],f=l[2],d=i.batchSize,p=i.filterHeight,m=i.filterWidth,g=i.inChannels,y=i.inHeight,v=i.inWidth,b=i.outChannels,w=i.outHeight,x=i.outWidth,S=i.strideHeight,E=i.strideWidth,A=i.dataFormat,k=p-1-i.padInfo.top,T=m-1-i.padInfo.left,O=A==="channelsLast",F=a.strides[0],I=O?a.strides[1]:a.strides[2],R=O?a.strides[2]:1,U=O?1:a.strides[1],B=t.strides[0],W=O?t.strides[1]:t.strides[2],Y=O?t.strides[2]:1,z=O?1:t.strides[1],j=0;j<d;++j)for(var M=0;M<g;++M)for(var q=0;q<y;++q)for(var H=q-k,K=Math.max(0,Math.ceil(H/S)),Z=Math.min(w,(p+H)/S),J=0;J<v;++J){for(var X=J-T,ae=Math.max(0,Math.ceil(X/E)),ie=Math.min(x,(m+X)/E),ce=0,ge=K;ge<Z;++ge)for(var Ce=ge*S-H,Ee=ae;Ee<ie;++Ee)for(var G=B*j+W*ge+Y*Ee,de=h*(p-1-Ce)+c*(m-1-(Ee*E-X))+f*M,ye=0;ye<b;++ye)ce+=s[G+z*ye]*u[de+ye];o[F*j+I*q+R*J+U*M]=ce}return a.toTensor()},e.prototype.conv3dDerInput=function(t,r,i){for(var a=Dn(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],h=s[2],c=s[3],f=this.readSync(t.dataId),d=t.strides,p=d[0],m=d[1],g=d[2],y=d[3],v=this.readSync(r.dataId),b=r.strides,w=b[0],x=b[1],S=b[2],E=b[3],A=i.batchSize,k=i.filterDepth,T=i.filterHeight,O=i.filterWidth,F=i.inChannels,I=i.inDepth,R=i.inHeight,U=i.inWidth,B=i.outChannels,W=i.outDepth,Y=i.outHeight,z=i.outWidth,j=i.strideDepth,M=i.strideHeight,q=i.strideWidth,H=k-1-i.padInfo.front,K=T-1-i.padInfo.top,Z=O-1-i.padInfo.left,J=0;J<A;++J)for(var X=0;X<F;++X)for(var ae=0;ae<I;++ae)for(var ie=ae-H,ce=Math.max(0,Math.ceil(ie/j)),ge=Math.min(W,(k+ie)/j),Ce=0;Ce<R;++Ce)for(var Ee=Ce-K,G=Math.max(0,Math.ceil(Ee/M)),de=Math.min(Y,(T+Ee)/M),ye=0;ye<U;++ye){for(var le=ye-Z,ne=Math.max(0,Math.ceil(le/q)),fe=Math.min(z,(O+le)/q),Ne=0,Ae=ce;Ae<ge;++Ae)for(var ue=Ae*j-ie,me=G;me<de;++me)for(var Se=me*M-Ee,Re=ne;Re<fe;++Re)for(var je=p*J+m*Ae+g*me+y*Re,rt=w*(k-1-ue)+x*(T-1-Se)+S*(O-1-(Re*q-le))+E*X,at=0;at<B;++at)Ne+=f[je+at]*v[rt+at];o[u*J+l*ae+h*Ce+c*ye+X]=Ne}return a.toTensor()},e.prototype.conv2dDerFilter=function(t,r,i){wt([t,r],"conv2dDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dataFormat==="channelsLast",h=Dn(i.filterShape,"float32"),c=i.padInfo.left,f=i.padInfo.top,d=this.bufferSync(t),p=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((f-m)/a)),y=Math.min(i.outHeight,(i.inHeight+f-m)/a),v=0;v<u;++v)for(var b=Math.max(0,Math.ceil((c-v)/o)),w=Math.min(i.outWidth,(i.inWidth+c-v)/o),x=0;x<i.inChannels;++x)for(var S=0;S<i.outChannels;++S){for(var E=0,A=0;A<i.batchSize;++A)for(var k=g;k<y;++k)for(var T=m+k*a-f,O=b;O<w;++O){var F=v+O*o-c;E+=l?d.get(A,T,F,x)*p.get(A,k,O,S):d.get(A,x,T,F)*p.get(A,S,k,O)}h.set(E,m,v,x,S)}return h.toTensor()},e.prototype.conv3dDerFilter=function(t,r,i){for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,h=i.filterWidth,c=Dn(i.filterShape,"float32"),f=c.values,d=c.strides,p=d[0],m=d[1],g=d[2],y=d[3],v=this.readSync(r.dataId),b=r.strides,w=b[0],x=b[1],S=b[2],E=b[3],A=this.readSync(t.dataId),k=t.strides,T=k[0],O=k[1],F=k[2],I=k[3],R=i.padInfo.front,U=i.padInfo.left,B=i.padInfo.top,W=0;W<u;++W)for(var Y=Math.max(0,Math.ceil((R-W)/a)),z=Math.min(i.outDepth,(i.inDepth+R-W)/a),j=W*p,M=0;M<l;++M)for(var q=Math.max(0,Math.ceil((B-M)/o)),H=Math.min(i.outHeight,(i.inHeight+B-M)/o),K=M*m+j,Z=0;Z<h;++Z)for(var J=Math.max(0,Math.ceil((U-Z)/s)),X=Math.min(i.outWidth,(i.inWidth+U-Z)/s),ae=Z*g+K,ie=0;ie<i.inChannels;++ie)for(var ce=ie*y+ae,ge=0;ge<i.outChannels;++ge){for(var Ce=0,Ee=0;Ee<i.batchSize;++Ee)for(var G=Ee*T,de=Ee*w,ye=Y;ye<z;++ye)for(var le=(W+ye*a-R)*O+G,ne=ye*x+de,fe=q;fe<H;++fe)for(var Ne=(M+fe*o-B)*F+le,Ae=fe*S+ne,ue=J;ue<X;++ue){var me=ue*E+Ae;Ce+=A[(Z+ue*s-U)*I+Ne+ie]*v[me+ge]}f[ce+ge]=Ce}return c.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,i=t.filter,a=t.convInfo,o=t.bias,s=t.activation,u=t.preluActivationWeights,l=this.depthwiseConv2D(r,i,a);return o&&(l=this.add(l,o)),s&&(l=bM(this,l,s,u)),l},e.prototype.depthwiseConv2D=function(t,r,i){wt([t,r],"depthwiseConv2D");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,h=i.padInfo.top,c=i.outChannels/i.inChannels,f=Dn(i.outShape,t.dtype),d=this.readSync(t.dataId),p=this.readSync(r.dataId),m=f.values,g=0;g<i.batchSize;++g)for(var y=g*t.strides[0],v=g*f.strides[0],b=0;b<i.outHeight;++b)for(var w=v+b*f.strides[1],x=b*i.strideHeight-l,S=0;S<a;++S){var E=x+S*s;if(!(E<0||E>=i.inHeight))for(var A=S*r.strides[0],k=y+E*t.strides[1],T=0;T<i.outWidth;++T)for(var O=w+T*f.strides[2],F=T*i.strideWidth-h,I=0;I<o;++I){var R=F+I*u;if(!(R<0||R>=i.inWidth))for(var U=A+I*r.strides[1],B=k+R*i.inChannels,W=O,Y=U,z=0;z<i.inChannels;++z){for(var j=d[B+z],M=0;M<c;++M)m[W+M]+=j*p[Y+M];W+=c,Y+=c}}}return f.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,r,i){wt([t,r],"depthwiseConv2DDerInput");for(var a=Dn(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],h=s[2],c=this.readSync(t.dataId),f=t.strides,d=f[0],p=f[1],m=f[2],g=this.readSync(r.dataId),y=r.strides,v=y[0],b=y[1],w=y[2],x=i.batchSize,S=i.filterHeight,E=i.filterWidth,A=i.inChannels,k=i.inHeight,T=i.inWidth,O=i.outChannels,F=i.outHeight,I=i.outWidth,R=i.strideHeight,U=i.strideWidth,B=S-1-i.padInfo.top,W=E-1-i.padInfo.left,Y=O/A,z=0;z<x;++z)for(var j=0;j<A;++j)for(var M=0;M<k;++M)for(var q=M-B,H=Math.max(0,Math.ceil(q/R)),K=Math.min(F,(S+q)/R),Z=0;Z<T;++Z){for(var J=Z-W,X=Math.max(0,Math.ceil(J/U)),ae=Math.min(I,(E+J)/U),ie=0,ce=H;ce<K;++ce)for(var ge=ce*R-q,Ce=X;Ce<ae;++Ce)for(var Ee=d*z+p*ce+m*Ce,G=v*(S-1-ge)+b*(E-1-(Ce*U-J))+w*j,de=0;de<Y;++de)ie+=c[Ee+(j*Y+de)]*g[G+de];o[u*z+l*M+h*Z+j]=ie}return a.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,r,i){wt([t,r],"depthwiseConv2DDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=Dn(i.filterShape,"float32"),h=i.padInfo.left,c=i.padInfo.top,f=i.outChannels/i.inChannels,d=this.bufferSync(t),p=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((c-m)/a)),y=Math.min(i.outHeight,(i.inHeight+c-m)/a),v=0;v<u;++v)for(var b=Math.max(0,Math.ceil((h-v)/o)),w=Math.min(i.outWidth,(i.inWidth+h-v)/o),x=0;x<i.outChannels;++x){for(var S=Math.trunc(x/f),E=x%f,A=0,k=0;k<i.batchSize;++k)for(var T=g;T<y;++T)for(var O=m+T*a-c,F=b;F<w;++F){var I=v+F*o-h;A+=d.get(k,O,I,S)*p.get(k,T,F,x)}l.set(A,m,v,S,E)}return l.toTensor()},e.prototype.tile=function(t,r){return wt(t,"tile"),qde(this.bufferSync(t),r)},e.prototype.pad=function(t,r,i){wt(t,"pad");var a=r.map(function(f,d){return f[0]+t.shape[d]+f[1]}),o=r.map(function(f){return f[0]}),s=this.bufferSync(t),u=Dn(a,t.dtype);i!==0&&u.values.fill(i);for(var l=0;l<t.size;l++){var h=s.indexToLoc(l),c=h.map(function(f,d){return f+o[d]});u.set.apply(u,[s.get.apply(s,h)].concat(c))}return u.toTensor()},e.prototype.gather=function(t,r,i){wt([t,r],"gather");var a=t.shape.slice(),o=this.readSync(r.dataId);a[i]=o.length;for(var s=Dn(a,t.dtype),u=this.bufferSync(t),l=0;l<s.size;++l){var h=s.indexToLoc(l),c=h.slice();c[i]=o[h[i]];var f=u.locToIndex(c);s.values[l]=u.values[f]}return s.toTensor()},e.prototype.batchToSpaceND=function(t,r,i){wt([t],"batchToSpaceND");var a=r.reduce(function(c,f){return c*f}),o=dO(t.shape,r,a),s=pO(o.length,r.length),u=gO(t.shape,r,a),l=ide(i,r.length),h=ade(u,i,r.length);return gr(t.reshape(o),s).reshape(u).slice(l,h)},e.prototype.spaceToBatchND=function(t,r,i){wt([t],"spaceToBatchND");var a=r.reduce(function(f,d){return f*d}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<t.shape.length;++s)o.push([0,0]);var u=t.pad(o),l=dO(u.shape,r,a,!1),h=pO(l.length,r.length,!1),c=gO(u.shape,r,a,!1);return gr(u.reshape(l),h).reshape(c)},e.prototype.maxPool=function(t,r){return wt(t,"maxPool"),GU(this.readSync(t.dataId),t.shape,t.dtype,t.strides,r,"max").toTensor()},e.prototype.maxPoolBackprop=function(t,r,i,a){wt([r,i],"maxPoolBackprop");for(var o=this.readSync(r.dataId),s=Dn(a.outShape,r.dtype,jpe(o,r.shape,r.dtype,a).values),u=a.strideHeight,l=a.strideWidth,h=a.dilationHeight,c=a.dilationWidth,f=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=d-1-a.padInfo.left,m=f-1-a.padInfo.top,g=Dn(r.shape,"float32"),y=this.bufferSync(t),v=0;v<a.batchSize;++v)for(var b=0;b<a.inChannels;++b)for(var w=0;w<a.inHeight;++w)for(var x=0;x<a.inWidth;++x){for(var S=w-m,E=x-p,A=0,k=0;k<f;k+=h){var T=(S+k)/u;if(!(T<0||T>=a.outHeight||Math.floor(T)!==T))for(var O=0;O<d;O+=c){var F=(E+O)/l;if(!(F<0||F>=a.outWidth||Math.floor(F)!==F)){var I=f*d-1-s.get(v,T,F,b)===k*d+O?1:0;I!==0&&(A+=y.get(v,T,F,b)*I)}}}g.set(A,v,w,x,b)}return g.toTensor()},e.prototype.avgPoolBackprop=function(t,r,i){wt([t,r],"avgPoolBackprop");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dilationHeight,h=i.dilationWidth,c=i.effectiveFilterHeight,f=i.effectiveFilterWidth,d=f-1-i.padInfo.left,p=c-1-i.padInfo.top,m=Dn(r.shape,"float32"),g=1/(s*u),y=this.bufferSync(t),v=0;v<i.batchSize;++v)for(var b=0;b<i.inChannels;++b)for(var w=0;w<i.inHeight;++w)for(var x=0;x<i.inWidth;++x){for(var S=w-p,E=x-d,A=0,k=0;k<c;k+=l){var T=(S+k)/a;if(!(T<0||T>=i.outHeight||Math.floor(T)!==T))for(var O=0;O<f;O+=h){var F=(E+O)/o;F<0||F>=i.outWidth||Math.floor(F)!==F||(A+=y.get(v,T,F,b))}}m.set(A*g,v,w,x,b)}return m.toTensor()},e.prototype.pool3d=function(t,r,i){wt(t,"pool3d");for(var a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,h=r.dilationWidth,c=r.effectiveFilterDepth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,y=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(t.dataId),b=Dn(r.outShape,t.dtype),w=b.values,x=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],A=r.outShape[4],k=0;k<r.batchSize;++k)for(var T=k*x,O=k*t.strides[0],F=0;F<r.inChannels;++F)for(var I=0;I<r.outDepth;++I){for(var R=I*a-p,U=R;U<0;)U+=u;for(var B=Math.min(r.inDepth,c+R),W=T+I*S,Y=0;Y<r.outHeight;++Y){for(var z=Y*o-m,j=z;j<0;)j+=l;for(var M=Math.min(r.inHeight,f+z),q=W+Y*E,H=0;H<r.outWidth;++H){for(var K=H*s-g,Z=K;Z<0;)Z+=h;for(var J=Math.min(r.inWidth,d+K),X=q+H*A,ae=y,ie=0,ce=0,ge=U;ge<B;ge+=u){for(var Ce=O+ge*t.strides[1],Ee=j;Ee<M;Ee+=l){for(var G=Ce+Ee*t.strides[2],de=Z;de<J;de+=h){var ye=v[G+de*t.strides[3]+F];if(i==="max"&&ye>ae?ae=ye:i==="avg"&&(ie+=ye,ce++),isNaN(ae))break}if(isNaN(ae))break}if(isNaN(ae))break}w[X+F]=i==="avg"?ie/ce:ae}}}return b.toTensor()},e.prototype.avgPool3d=function(t,r){return wt(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,r,i){wt([t,r],"avgPool3dBackprop");for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,h=i.filterWidth,c=i.dilationDepth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,m=i.effectiveFilterHeight,g=i.effectiveFilterWidth,y=p-1-i.padInfo.front,v=g-1-i.padInfo.left,b=m-1-i.padInfo.top,w=Dn(r.shape,"float32"),x=1/(u*l*h),S=this.bufferSync(t),E=0;E<i.batchSize;++E)for(var A=0;A<i.inChannels;++A)for(var k=0;k<i.inDepth;++k)for(var T=0;T<i.inHeight;++T)for(var O=0;O<i.inWidth;++O){for(var F=k-y,I=T-b,R=O-v,U=0,B=0;B<p;B+=c){var W=(F+B)/a;if(!(W<0||W>=i.outDepth||Math.floor(W)!==W))for(var Y=0;Y<m;Y+=f){var z=(I+Y)/o;if(!(z<0||z>=i.outHeight||Math.floor(z)!==z))for(var j=0;j<g;j+=d){var M=(R+j)/s;M<0||M>=i.outWidth||Math.floor(M)!==M||(U+=S.get(E,W,z,M,A))}}}w.set(U*x,E,k,T,O,A)}return w.toTensor()},e.prototype.maxPool3d=function(t,r){return wt(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,r){for(var i=Dn(r.outShape,"int32"),a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,h=r.dilationWidth,c=r.effectiveFilterDepth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,y=this.bufferSync(t),v=0;v<r.batchSize;++v)for(var b=0;b<r.inChannels;++b)for(var w=0;w<r.outDepth;++w){for(var x=w*a-p,S=x;S<0;)S+=u;for(var E=Math.min(r.inDepth,c+x),A=0;A<r.outHeight;++A){for(var k=A*o-m,T=k;T<0;)T+=l;for(var O=Math.min(r.inHeight,f+k),F=0;F<r.outWidth;++F){for(var I=F*s-g,R=I;R<0;)R+=h;for(var U=Math.min(r.inWidth,d+I),B=Number.NEGATIVE_INFINITY,W=-1,Y=S;Y<E;Y+=u)for(var z=Y-x,j=T;j<O;j+=l)for(var M=j-k,q=R;q<U;q+=h){var H=q-I,K=y.get(v,Y,j,q,b);K>=B&&(B=K,W=z*f*d+M*f+H)}i.set(W,v,w,A,F,b)}}}return i.toTensor()},e.prototype.maxPool3dBackprop=function(t,r,i,a){wt([r,i],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,a),s=a.strideDepth,u=a.strideHeight,l=a.strideWidth,h=a.dilationDepth,c=a.dilationHeight,f=a.dilationWidth,d=a.effectiveFilterDepth,p=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=d-1-a.padInfo.front,y=m-1-a.padInfo.left,v=p-1-a.padInfo.top,b=Dn(r.shape,"float32"),w=this.bufferSync(o),x=this.bufferSync(t),S=0;S<a.batchSize;++S)for(var E=0;E<a.inChannels;++E)for(var A=0;A<a.inDepth;++A)for(var k=0;k<a.inHeight;++k)for(var T=0;T<a.inWidth;++T){for(var O=A-g,F=k-v,I=T-y,R=0,U=0;U<d;U+=h){var B=(O+U)/s;if(!(B<0||B>=a.outDepth||Math.floor(B)!==B))for(var W=0;W<p;W+=c){var Y=(F+W)/u;if(!(Y<0||Y>=a.outHeight||Math.floor(Y)!==Y))for(var z=0;z<m;z+=f){var j=(I+z)/l;if(!(j<0||j>=a.outWidth||Math.floor(j)!==j)){var M=d*p*m-1-w.get(S,B,Y,j,E)===U*p*m+W*m+z?1:0;M!==0&&(R+=x.get(S,B,Y,j,E)*M)}}}}b.set(R,S,A,k,T,E)}return b.toTensor()},e.prototype.cast=function(t,r){return zde(t,r,this)},e.prototype.reshape=function(t,r){return VU(t,r)},e.prototype.avgPool=function(t,r){return wt(t,"avgPool"),wt(t,"maxPool"),GU(this.readSync(t.dataId),t.shape,t.dtype,t.strides,r,"avg").toTensor().toFloat()},e.prototype.resizeBilinear=function(t,r,i,a){wt(t,"resizeBilinear");for(var o=t.shape,s=o[0],u=o[1],l=o[2],h=o[3],c=this.readSync(t.dataId),f=new Float32Array(Qt([s,r,i,h])),d=[a&&r>1?u-1:u,a&&i>1?l-1:l],p=[a&&r>1?r-1:r,a&&i>1?i-1:i],m=0,g=d[0]/p[0],y=d[1]/p[1],v=0;v<s;v++)for(var b=0;b<r;b++)for(var w=g*b,x=Math.floor(w),S=w-x,E=Math.min(u-1,Math.ceil(w)),A=v*t.strides[0]+x*t.strides[1],k=v*t.strides[0]+E*t.strides[1],T=0;T<i;T++)for(var O=y*T,F=Math.floor(O),I=O-F,R=Math.min(l-1,Math.ceil(O)),U=A+F*t.strides[2],B=k+F*t.strides[2],W=A+R*t.strides[2],Y=k+R*t.strides[2],z=0;z<h;z++){var j=c[U+z],M=c[B+z],q=j+(c[W+z]-j)*I,H=q+(M+(c[Y+z]-M)*I-q)*S;f[m++]=H}return Na(f,[s,r,i,h])},e.prototype.resizeBilinearBackprop=function(t,r,i){wt([t,r],"resizeBilinearBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],h=t.shape,c=h[1],f=h[2],d=new Float32Array(o*s*u*l),p=[i&&c>1?s-1:s,i&&f>1?u-1:u],m=[i&&c>1?c-1:c,i&&f>1?f-1:f],g=p[0]/m[0],y=p[1]/m[1],v=this.readSync(t.dataId),b=0,w=0;w<o;w++)for(var x=w*r.strides[0],S=0;S<c;S++)for(var E=S*g,A=Math.floor(E),k=Math.min(Math.ceil(E),s-1),T=x+A*r.strides[1],O=x+k*r.strides[1],F=E-A,I=1-F,R=0;R<f;R++)for(var U=R*y,B=Math.floor(U),W=Math.min(Math.ceil(U),u-1),Y=U-B,z=1-Y,j=T+B*r.strides[2],M=T+W*r.strides[2],q=O+B*r.strides[2],H=O+W*r.strides[2],K=I*z,Z=I*Y,J=F*z,X=F*Y,ae=0;ae<l;ae++){var ie=v[b++];d[j+ae]+=ie*K,d[M+ae]+=ie*Z,d[q+ae]+=ie*J,d[H+ae]+=ie*X}return mv(d,[o,u,s,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(t,r,i,a){wt(t,"resizeNearestNeighbor");for(var o=t.shape,s=o[0],u=o[1],l=o[2],h=o[3],c=this.readSync(t.dataId),f=new Float32Array(s*r*i*h),d=[a&&r>1?u-1:u,a&&i>1?l-1:l],p=[a&&r>1?r-1:r,a&&i>1?i-1:i],m=d[0]/p[0],g=d[1]/p[1],y=0,v=0;v<s;v++)for(var b=v*t.strides[0],w=0;w<r;w++)for(var x=m*w,S=b+Math.min(u-1,a?Math.round(x):Math.floor(x))*t.strides[1],E=0;E<i;E++)for(var A=g*E,k=S+Math.min(l-1,a?Math.round(A):Math.floor(A))*t.strides[2],T=0;T<h;T++){var O=c[k+T];f[y++]=O}return Na(f,[s,r,i,h],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,r,i){wt([t,r],"resizeNearestNeighborBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],h=t.shape,c=h[1],f=h[2],d=new Float32Array(o*s*u*l),p=this.readSync(t.dataId),m=[i&&c>1?s-1:s,i&&f>1?u-1:u],g=[i&&c>1?c-1:c,i&&f>1?f-1:f],y=m[0]/g[0],v=m[1]/g[1],b=1/y,w=1/v,x=2*Math.ceil(b)+2,S=2*Math.ceil(w)+2,E=0;E<o;E++)for(var A=E*r.strides[0],k=0;k<s;k++)for(var T=A+k*r.strides[1],O=Math.floor(k*b),F=Math.floor(O-x/2),I=0;I<u;I++)for(var R=T+I*r.strides[2],U=Math.floor(I*w),B=Math.floor(U-S/2),W=0;W<l;W++){for(var Y=0,z=0;z<x;z++){var j=z+F;if(!(j<0||j>=c)){var M=A+j*t.strides[1],q=j*y;if(k===Math.min(s-1,i?Math.round(q):Math.floor(q)))for(var H=0;H<S;H++){var K=H+B;if(!(K<0||K>=f)){var Z=M+K*t.strides[2],J=K*v;I===Math.min(u-1,i?Math.round(J):Math.floor(J))&&(Y+=p[Z+W])}}}}d[R+W]=Y}return mv(d,r.shape,r.dtype)},e.prototype.batchNormalization=function(t,r,i,a,o,s){wt([t,r,i,o,s],"batchNorm");for(var u=this.readSync(t.dataId),l=this.readSync(r.dataId),h=this.readSync(i.dataId),c=o?this.readSync(o.dataId):new Float32Array([1]),f=s?this.readSync(s.dataId):new Float32Array([0]),d=new Float32Array(u.length),p=f.length,m=c.length,g=h.length,y=l.length,v=0,b=0,w=0,x=0,S=0;S<u.length;++S)d[S]=f[v++]+(u[S]-l[b++])*c[w++]/Math.sqrt(h[x++]+a),v>=p&&(v=0),b>=y&&(b=0),w>=m&&(w=0),x>=g&&(x=0);return mv(d,t.shape)},e.prototype.localResponseNormalization4D=function(t,r,i,a,o){wt(t,"localResponseNormalization4D");var s=t.shape[3],u=s-1,l=this.readSync(t.dataId),h=t.size,c=new Float32Array(h);function f(g){for(var y=g%s,v=g-y+Math.max(0,y-r),b=g-y+Math.min(y+r,u),w=0;v<=b;v++){var x=l[v];w+=x*x}return w}for(var d=0;d<h;d++){var p=f(d),m=l[d]*Math.pow(i+a*p,-o);c[d]=m}return mv(c,t.shape)},e.prototype.LRNGrad=function(t,r,i,a,o,s,u){wt(t,"LRNGrad");for(var l=t.shape[3],h=this.readSync(t.dataId),c=this.readSync(r.dataId),f=this.readSync(i.dataId),d=new Float32Array(t.size),p=t.size,m=0;m<p;m++){for(var g=m%l,y=m-g+Math.max(0,g-a),v=m-g+Math.min(l,g+a+1),b=0,w=y;w<v;w++)b+=Math.pow(c[w],2);for(b=s*b+o,w=y;w<v;w++){var x=-2*s*u*c[w]*f[m]/b;m===w&&(x+=Math.pow(b,-u)),x*=h[m],d[w]+=x}}return mv(d,t.shape)},e.prototype.multinomial=function(t,r,i,a){wt(t,"multinomial");for(var o=r?t:Cx(t),s=o.shape[0],u=o.shape[1],l=Lr([s,i],"int32"),h=this.readSync(l.dataId),c=this.readSync(o.dataId),f=0;f<s;++f){var d=f*u,p=new Float32Array(u-1);p[0]=c[d];for(var m=1;m<p.length;++m)p[m]=p[m-1]+c[d+m];for(var g=e4(a.toString()),y=f*i,v=0;v<i;++v){var b=g();h[y+v]=p.length;for(var w=0;w<p.length;w++)if(b<p[w]){h[y+v]=w;break}}}return l},e.prototype.oneHot=function(t,r,i,a){wt(t,"oneHot");var o=new Float32Array(t.size*r);o.fill(a);for(var s=this.readSync(t.dataId),u=0;u<t.size;++u)s[u]>=0&&s[u]<r&&(o[u*r+s[u]]=i);return Im(o,[t.size,r],"int32")},e.prototype.nonMaxSuppression=function(t,r,i,a,o){return wt(t,"nonMaxSuppression"),gW(this.readSync(t.dataId),this.readSync(r.dataId),i,a,o)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,r){for(var i=t.shape[0],a=t.shape[1],o=Dn(t.shape,"float32"),s=Dn(t.shape,"float32"),u=pl(t).as2D(i,a),l=ih(t).as2D(i,a),h=0;h<i;h++)for(var c=u.slice([h,0],[1,a]),f=l.slice([h,0],[1,a]),d=xs(c,f),p=this.readSync(this.fftImpl(d,r).dataId),m=0;m<a;m++){var g=JY(p,m);o.values[h*a+m]=g.real,s.values[h*a+m]=g.imag}return xs(o.toTensor(),s.toTensor()).as2D(i,a)},e.prototype.fftImpl=function(t,r){var i=t.as1D(),a=i.size;if(this.isExponentOf2(a)){var o=this.fftRadix2(i,a,r).as2D(t.shape[0],t.shape[1]);return r&&(o=xs(pl(o).div(jt(a)),ih(o).div(jt(a)))),o}var s=this.readSync(t.dataId),u=function(l){for(var h=new Float32Array(l.length/2),c=new Float32Array(l.length/2),f=0;f<l.length;f+=2)h[f/2]=l[f],c[f/2]=l[f+1];return{real:h,imag:c}}(this.fourierTransformByMatmul(s,a,r));return xs(u.real,u.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return(t&t-1)==0},e.prototype.fftRadix2=function(t,r,i){if(r===1)return t;var a=this.readSync(t.dataId),o=r/2,s=function(y){for(var v=Math.ceil(y.length/4),b=new Float32Array(v),w=new Float32Array(v),x=0;x<y.length;x+=4)b[Math.floor(x/4)]=y[x],w[Math.floor(x/4)]=y[x+1];return{real:b,imag:w}}(a),u=xs(s.real,s.imag).as1D(),l=function(y){for(var v=Math.floor(y.length/4),b=new Float32Array(v),w=new Float32Array(v),x=2;x<y.length;x+=4)b[Math.floor(x/4)]=y[x],w[Math.floor(x/4)]=y[x+1];return{real:b,imag:w}}(a),h=xs(l.real,l.imag).as1D();u=this.fftRadix2(u,o,i),h=this.fftRadix2(h,o,i);var c=function(y,v){for(var b=new Float32Array(y/2),w=new Float32Array(y/2),x=0;x<Math.ceil(y/2);x++){var S=(v?2:-2)*Math.PI*(x/y);b[x]=Math.cos(S),w[x]=Math.sin(S)}return{real:b,imag:w}}(r,i),f=xs(c.real,c.imag).mul(h),d=u.add(f),p=u.sub(f),m=pl(d).concat(pl(p)),g=ih(d).concat(ih(p));return xs(m,g).as1D()},e.prototype.fourierTransformByMatmul=function(t,r,i){for(var a=new Float32Array(2*r),o=0;o<r;o++){for(var s=0,u=0,l=0;l<r;l++){var h=eze(o*l,r,i),c=JY(t,l);s+=c.real*h.real-c.imag*h.imag,u+=c.real*h.imag+c.imag*h.real}i&&(s/=r,u/=r),J7e(a,s,u,o)}return a},e.prototype.depthToSpace=function(t,r,i){Pe(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),Pe(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var a=t.shape[0],o=t.shape[1],s=t.shape[2],u=t.shape[3],l=o*r,h=s*r,c=u/(r*r),f=this.readSync(t.dataId),d=new Float32Array(a*l*h*c),p=0,m=0;m<a;++m)for(var g=0;g<l;++g)for(var y=Math.floor(g/r),v=g%r,b=0;b<h;++b)for(var w=Math.floor(b/r),x=(v*r+b%r)*c,S=0;S<c;++S){var E=S+x+u*(w+s*(y+o*m));d[p++]=f[E]}return mv(d,[a,l,h,c])},e.prototype.broadcastedBinaryOp=function(t,r,i,a){var o=Jn(t.shape,r.shape),s=Dn(o,i),u=this.readSync(t.dataId),l=this.readSync(r.dataId),h=Nm(t.shape,o),c=Nm(r.shape,o),f=s.values;if(h.length+c.length===0)for(var d=0;d<f.length;++d)f[d]=a(u[d%u.length],l[d%l.length]);else{var p=this.bufferSync(t),m=this.bufferSync(r),g=function(y){var v=s.indexToLoc(y),b=v.slice(-t.rank);h.forEach(function(E){return b[E]=0});var w=p.locToIndex(b),x=v.slice(-r.rank);c.forEach(function(E){return x[E]=0});var S=m.locToIndex(x);f[y]=a(u[w],l[S])};for(d=0;d<f.length;++d)g(d)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,r,i){var a=Jn(t.shape,r.shape),o=Dn(a,"float32"),s=Dn(a,"float32"),u=this.readSync(t.dataId),l=this.readSync(r.dataId),h=Nm(t.shape,a),c=Nm(r.shape,a),f=o.values,d=s.values;if(h.length+c.length===0)for(var p=0;p<f.length;p++){var m=p%u.length,g=p%l.length,y=i(u[2*m],u[2*m+1],l[2*g],l[2*g+1]);f[p]=y.real,d[p]=y.imag}else{var v=this.bufferSync(this.data.get(t.dataId).complexTensors.real),b=this.bufferSync(this.data.get(r.dataId).complexTensors.real),w=function(x){var S=o.indexToLoc(x),E=S.slice(-t.rank);h.forEach(function(F){return E[F]=0});var A=v.locToIndex(E),k=S.slice(-r.rank);c.forEach(function(F){return k[F]=0});var T=b.locToIndex(k),O=i(u[2*A],u[2*A+1],l[2*T],l[2*T+1]);f[x]=O.real,d[x]=O.imag};for(p=0;p<f.length;p++)w(p)}return this.complex(o.toTensor(),s.toTensor())},e.prototype.split=function(t,r,i){return $de(t,r,i)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,r,i,a,o,s){for(var u=t.shape,l=u[0],h=u[1],c=u[2],f=u[3],d=r.shape[0],p=a[0],m=a[1],g=Dn([d,p,m,f],"float32"),y=this.readSync(r.dataId),v=this.readSync(i.dataId),b=this.readSync(t.dataId),w=t.strides,x=g.strides,S=0;S<d;S++){var E=4*S,A=y[E],k=y[E+1],T=y[E+2],O=y[E+3],F=v[S];if(!(F>=l))for(var I=p>1?(T-A)*(h-1)/(p-1):0,R=m>1?(O-k)*(c-1)/(m-1):0,U=0;U<p;U++){var B=p>1?A*(h-1)+U*I:.5*(A+T)*(h-1);if(B<0||B>h-1)for(var W=0;W<m;W++)for(var Y=0;Y<f;Y++){var z=Y+W*x[2]+U*x[1]+S*x[0];g.values[z]=s}else if(o==="bilinear"){var j=Math.floor(B),M=Math.ceil(B),q=B-j;for(W=0;W<m;W++)if((ge=m>1?k*(c-1)+W*R:.5*(k+O)*(c-1))<0||ge>c-1)for(Y=0;Y<f;Y++)z=Y+W*x[2]+U*x[1]+S*x[0],g.values[z]=s;else{var H=Math.floor(ge),K=Math.ceil(ge),Z=ge-H;for(Y=0;Y<f;Y++){var J=b[z=Y+H*w[2]+j*w[1]+F*w[0]],X=b[z=Y+K*w[2]+j*w[1]+F*w[0]],ae=b[z=Y+H*w[2]+M*w[1]+F*w[0]],ie=J+(X-J)*Z,ce=ae+(b[z=Y+K*w[2]+M*w[1]+F*w[0]]-ae)*Z;z=Y+W*x[2]+U*x[1]+S*x[0],g.values[z]=ie+(ce-ie)*q}}}else for(W=0;W<m;++W){var ge;if((ge=m>1?k*(c-1)+W*R:.5*(k+O)*(c-1))<0||ge>c-1)for(Y=0;Y<f;Y++)z=Y+W*x[2]+U*x[1]+S*x[0],g.values[z]=s;else{var Ce=Math.round(ge),Ee=Math.round(B);for(Y=0;Y<f;Y++){var G=Y+Ce*w[2]+Ee*w[1]+F*w[0],de=Y+W*x[2]+U*x[1]+S*x[0];g.values[de]=b[G]}}}}}return g.toTensor()},e.prototype.sparseToDense=function(t,r,i,a){var o=mO(0,t,i),s=o.sliceRank,u=o.numUpdates,l=o.sliceSize,h=o.strides,c=o.outputSize;return this.scatter(t,r,i,c,l,u,s,h,a,!1)},e.prototype.gatherND=function(t,r){var i=r.shape,a=i[i.length-1],o=Ide(t,r),s=o[0],u=o[1],l=o[2],h=o[3];if(u===0)return Na([],s,t.dtype);for(var c=new mE([u,l],t.dtype),f=this.readSync(r.dataId),d=this.readSync(t.dataId),p=0;p<u;p++){for(var m=[],g=0,y=0;y<a;y++){var v=f[p*a+y];g+=v*h[y],m.push(v)}if(g<0||g>=t.size/l)throw new Error("Invalid indices: "+m+" does not index into "+t.shape);for(var b=0;b<l;b++)c.values[p*l+b]=d[g*l+b]}return c.toTensor().reshape(s)},e.prototype.scatterND=function(t,r,i){var a=mO(0,t,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,h=a.outputSize,c=jt(0);return this.scatter(t,r,i,h,u,s,o,l,c,!0)},e.prototype.fill=function(t,r,i){var a=pE(i=i||_x(r),Qt(t));return a.fill(r),Ve.makeTensor(a,t,i,this)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var r=pE(t.dtype,Qt(t.shape));return this.makeOutput(r,t.shape,t.dtype)},e.prototype.linspace=function(t,r,i){return Wde(t,r,i)},e.prototype.scatter=function(t,r,i,a,o,s,u,l,h,c){var f=[a/o,o],d=this.readSync(t.dataId),p=this.readSync(r.dataId);if(a===0)return Na([],i,r.dtype);var m=new mE(f,r.dtype);m.values.fill(this.readSync(h.dataId)[0]);for(var g=0;g<s;g++){for(var y=[],v=0,b=0;b<u;b++){var w=d[g*u+b];y.push(w),v+=w*l[b]}if(v<0||v>=a/o)throw new Error("Invalid indices: "+y+" does not index into "+i);for(var x=0;x<o;x++)c?m.values[v*o+x]+=p[g*o+x]:m.values[v*o+x]=r.rank===0?p[0]:p[g*o+x]}return m.toTensor().reshape(i)},e}(Ude);function $pe(n,e){return{kernelName:n,backendName:"cpu",kernelFunc:function(t){var r=t.inputs,i=t.backend,a=r,o=a.a,s=a.b,u=i;wt([o,s],n);var l=u.data.get(o.dataId).values,h=u.data.get(s.dataId).values,c=e(o.shape,s.shape,l,h,o.dtype),f=c[0],d=c[1];return{dataId:u.write(f,d,o.dtype),shape:d,dtype:o.dtype}}}}function qpe(n){return function(e,t,r,i,a){var o=Jn(e,t),s=o.length,u=Au(o),l=m1(a,Qt(o)),h=e.length,c=t.length,f=Au(e),d=Au(t),p=Nm(e,o),m=Nm(t,o);if(p.length+m.length===0)for(var g=0;g<l.length;++g)l[g]=n(r[g%r.length],i[g%i.length]);else{var y=function(v){var b=Zz(v,s,u),w=b.slice(-h);p.forEach(function(A){return w[A]=0});var x=oO(w,h,f),S=b.slice(-c);m.forEach(function(A){return S[A]=0});var E=oO(S,c,d);l[v]=n(r[x],i[E])};for(g=0;g<l.length;++g)y(g)}return[l,o]}}Ve.registerBackend("cpu",function(){return new h$e},1);var f$e=qpe(function(n,e){return n/e}),d$e=$pe(KI,f$e),p$e={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.attrs,r=n.backend,i=e.x,a=t,o=a.filterSize,s=a.strides,u=a.pad,l=a.includeBatchInIndex,h=r;wt(i,"MaxPoolWithArgmax");var c=h.data.get(i.dataId).values,f=b1(i.shape,o,s,[1,1],u),d=function(v,b,w,x,S){var E=GU(v,0,w,Au(b),S,"max"),A=jpe(v,b,w,S,!0,x);return[E.values,A.values]}(c,i.shape,i.dtype,l,f),p=d[0],m=d[1],g=h.write(p,f.outShape,i.dtype),y=h.write(m,f.outShape,i.dtype);return[{dataId:g,shape:f.outShape,dtype:i.dtype},{dataId:y,shape:f.outShape,dtype:"int32"}]}},g$e={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,i=e,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,h=s.scoreThreshold,c=s.softNmsSigma,f=t;wt(a,"NonMaxSuppressionWithScore");var d=mW(f.data.get(a.dataId).values,f.data.get(o.dataId).values,u,l,h,c);return[d.selectedIndices,d.selectedScores]}},m$e={kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,i=t;wt(r,"square");for(var a=i.data.get(r.dataId).values,o=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];o[s]=u*u}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},y$e=qpe(function(n,e){var t=n-e;return t*t});function Vpe(n,e,t,r,i){for(var a=Qt(e),o=e.length,s=Au(e),u=Au(i),l=m1(t,Qt(i)),h=0;h<a;++h){for(var c=Zz(h,o,s),f=new Array(c.length),d=0;d<f.length;d++)f[d]=c[r[d]];l[oO(f,o,u)]=n[h]}return l}for(var wM=0,xQ=[g$e,m$e,$pe(YI,y$e),d$e,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.attrs,r=n.backend,i=e.x,a=t.perm,o=r;wt(i,"transpose");for(var s=i.shape.length,u=new Array(s),l=0;l<u.length;l++)u[l]=i.shape[a[l]];var h=Vpe(o.data.get(i.dataId).values,i.shape,i.dtype,a,u);return{dataId:o.write(h,u,i.dtype),shape:u,dtype:i.dtype}}},p$e];wM<xQ.length;wM++)Rfe(xQ[wM]);var Xb,v$e=function(n){this.variableNames=["A"];var e=mo(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},b$e=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=mo(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `},w$e=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];this.outputShape=t,this.rank=t.length;var i=Ci(this.rank),a=function(o){var s=o.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),h=0;h<o.length;h++)l[o[h]]=u[h];return l.join()}(e);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `},x$e=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Ci(this.rank),a=Hde("rc",this.rank),o=new Array(this.rank);for(r=0;r<e.length;r++)o[e[r]]=a[r];var s="vec2("+o.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+t[this.rank-1],l="getChannel(getA("+o.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `};for(var xM=0,_Q=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,i=e.pixels,a=r.numChannels,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=u[0],h=u[1],c=[h,l],f=[h,l,a];(s||o)&&(Xb==null&&(Xb=document.createElement("canvas").getContext("2d")),Xb.canvas.width=l,Xb.canvas.height=h,Xb.drawImage(i,0,0,l,h),i=Xb.canvas);var d=t.makeTensorInfo(c,"int32");t.texData.get(d.dataId).usage=ml.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(d.dataId),i);var p=ct().getBool("WEBGL_PACK")?new b$e(f):new v$e(f),m=t.runWebGLProgram(p,[d],"int32");return t.disposeData(d.dataId),m}},{kernelName:KI,backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e;return function(i,a,o){var s=new ta(wze,i.shape,a.shape);return ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(s=new sf(xze,i.shape,a.shape,!0)),o.runWebGLProgram(s,[i,a],"float32")}(r.a,r.b,t)}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs;hO("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=e,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,h=s.scoreThreshold,c=s.softNmsSigma,f=t,d=mW(f.readSync(a.dataId),f.readSync(o.dataId),u,l,h,c);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,i=t,a=new Un(r.shape,"return x * x;");return i.runWebGLProgram(a,[r],r.dtype)}},{kernelName:YI,backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,i=r.a,a=r.b,o=t,s=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sf("return (a - b) * (a - b);",i.shape,a.shape):new ta("return (a - b) * (a - b);",i.shape,a.shape);return o.compileAndRun(s,[i,a])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(n){for(var e,t=n.inputs,r=n.attrs,i=n.backend,a=t.x,o=r.perm,s=i,u=a.shape.length,l=new Array(u),h=0;h<l.length;h++)l[h]=a.shape[o[h]];if(s.shouldExecuteOnCPU([a])){var c=Vpe(s.texData.get(a.dataId).values,a.shape,a.dtype,o,l);e=s.makeTensorInfo(l,a.dtype),s.texData.get(e.dataId).values=c}else e=function(f,d,p){var m=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new x$e(f.shape,d):new w$e(f.shape,d);return p.runWebGLProgram(m,[f],f.dtype)}(a,o,s);return e}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.attrs,r=n.backend,i=e.x,a=t,o=a.filterSize,s=a.strides,u=a.pad,l=a.includeBatchInIndex,h=r;Pe(i.shape.length===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+i.shape.length+"."});var c=[1,1];Pe(Qo(s,c),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+c+"'"});var f=b1(i.shape,o,s,c,u),d=function(p,m,g,y){var v=new IC(g,"max",!1),b=y.runWebGLProgram(v,[p],"float32");return v=new IC(g,"max",!0,!0,m),[b,y.runWebGLProgram(v,[p],"float32")]}(i,l,f,h);return[d[0],d[1]]}}];xM<_Q.length;xM++)Rfe(_Q[xM]);for(var _M=0,SQ=[{kernelName:sde,inputsToSave:["a","b"],gradFunc:function(n,e){var t=e[0],r=e[1],i=Jn(t.shape,r.shape);return{a:function(){var a=n,o=Ja(t.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(t.shape)},b:function(){var a=n,o=Ja(r.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(r.shape)}}}},{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(n,e){var t={};return e.forEach(function(r,i){t[i]=function(){return n.clone()}}),t}},{kernelName:ode,gradFunc:function(n,e,t){for(var r=t,i=r.inputShape,a=r.shape,o=Array.from(a),s=i.length-1;s>=0;s--)if(i[s]===a[s])o[s]=1;else if(i[s]!==1)throw new Error("broadcastTo(): ["+i+"] cannot be broadcast to ["+a+"].");var u=[];for(s=0;s<o.length;s++)o[s]>1&&u.push(s);return{x:function(){return n.sum(u,!0)}}}},{kernelName:KI,inputsToSave:["a","b"],gradFunc:function(n,e){var t=e[0],r=e[1],i=Jn(t.shape,r.shape);return{a:function(){var a=ya(n,r.toFloat()),o=Ja(t.shape,i);return o.length>0?Za(a,o).reshape(t.shape):a},b:function(){var a=n.mul(t.toFloat()),o=Ja(r.shape,i);o.length>0&&(a=Za(a,o).reshape(r.shape));var s=TW(r);return F1(ya(a,s.toFloat()))}}}},{kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(n,e,t){var r=t.varianceEpsilon,i=e[0],a=e[1],o=e[2],s=e[3],u=ipe(i),l=s??jt(1),h=Ja(a.shape,u.shape),c=[];if(a.rank===1){for(var f=0;f<u.shape.length-1;++f)c.push(u.shape[f]);c.push(1)}var d=pa(i,a),p=rn(n,l),m=oW(qn(o,jt(r))),g=rn(rn(rn(m,m),m),jt(-.5));return{x:function(){return a.rank===1?Df(rn(rn(n,Pm(m.as4D(1,1,1,a.shape[0]),c)),l),i.shape):Df(rn(rn(n,m),l),i.shape)},mean:function(){var y=rn(rn(m,jt(-1)),p);return a.rank===1&&(y=Za(y,h)),Df(y,a.shape)},variance:function(){var y=rn(rn(g,d),p);return a.rank===1&&(y=Za(y,h)),Df(y,a.shape)},scale:function(){var y=rn(d,m),v=rn(n,y);return a.rank===1&&(v=Za(v,h)),Df(v,a.shape)},offset:function(){var y=n;return a.rank===1&&(y=Za(y,h)),Df(y,a.shape)}}}},{kernelName:lde,gradFunc:function(n){return{x:function(){return n.toFloat()}}}},{kernelName:ude,inputsToSave:["indices"],gradFunc:function(n,e){var t=e[0];return{indices:function(){return Lr(t.shape,"float32")}}}},{kernelName:hde,inputsToSave:["x"],gradFunc:function(n,e,t){var r=e[0],i=t.paddings.map(function(a){return a[0]});return{x:function(){return n.slice(i,r.shape)}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(n,e){var t=e[0];return{x:function(){return n.mul(t.toFloat().mul(2))}}}},{kernelName:YI,inputsToSave:["a","b"],gradFunc:function(n,e){var t=e[0],r=e[1],i=jt(2);return{a:function(){return rn(n,rn(i,pa(t,r)))},b:function(){return rn(n,rn(i,pa(r,t)))}}}},{kernelName:cde,inputsToSave:["x"],gradFunc:function(n,e,t){var r=e[0],i=t.reps;return{x:function(){var a=ar(r);if(r.rank===1)for(var o=0;o<i[0];++o)a=a.add(n.slice([o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(o=0;o<i[0];++o)for(var s=0;s<i[1];++s)a=a.add(n.slice([o*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(o=0;o<i[0];++o)for(s=0;s<i[1];++s)for(var u=0;u<i[2];++u)a=a.add(n.slice([o*r.shape[0],s*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(r.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(o=0;o<i[0];++o)for(s=0;s<i[1];++s)for(u=0;u<i[2];++u)for(var l=0;l<i[3];++l)a=a.add(n.slice([o*r.shape[0],s*r.shape[1],u*r.shape[2],l*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return a}}}},{kernelName:"Transpose",gradFunc:function(n,e,t){var r=nW(t.perm);return{x:function(){return gr(n,r)}}}}];_M<SQ.length;_M++)G9e(SQ[_M]);var _$e=function(){function n(){}return n.prototype.fetch=function(e,t){return fetch(e,t)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},n}();ct().get("IS_BROWSER")&&ct().setPlatform("browser",new _$e);var SM,S$e=function(){return require("node-fetch")},C$e=function(){function n(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(e,t){return ct().global.fetch!=null?ct().global.fetch(e,t):(SM==null&&(SM=S$e()),SM(e,t))},n.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)},n}();ct().get("IS_NODE")&&ct().setPlatform("node",new C$e);var XU={float32:4,int32:4,uint16:2,uint8:1,bool:1},_O=4;function Hpe(n,e){for(var t={},r=0,i=function(s){var u=s.name,l=s.dtype,h=s.shape,c=Qt(h),f=void 0;if("quantization"in s){var d=s.quantization;if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+d.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=XU[d.dtype],m=n.slice(r,r+c*p),g=d.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")f=Float32Array.from(g,function(S){return S*d.scale+d.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=Int32Array.from(g,function(S){return Math.round(S*d.scale+d.min)})}r+=c*p}else if(l==="string"){var y=Qt(s.shape);f=[];for(var v=0;v<y;v++){var b=new Uint32Array(n.slice(r,r+_O))[0];r+=_O;var w=new Uint8Array(n.slice(r,r+b));f.push(w),r+=b}}else{var x=XU[l];if(m=n.slice(r,r+c*x),l==="float32")f=new Float32Array(m);else if(l==="int32")f=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=new Uint8Array(m)}r+=c*x}t[u]=Na(f,h,l)},a=0,o=e;a<o.length;a++)i(o[a]);return t}function E$e(n){if(n===null)throw new Error("Invalid input value: "+JSON.stringify(n));var e=0,t=[];n.forEach(function(a){if(e+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+a.constructor.name)});var r=new Uint8Array(e),i=0;return t.forEach(function(a){r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}var KU=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function CQ(n){return KU?Buffer.byteLength(n):new Blob([n]).size}function QW(n){var e=0;n.forEach(function(i){e+=i.byteLength});var t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(new Uint8Array(i),r),r+=i.byteLength}),t.buffer}function EQ(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var e=n.split("/");return e[e.length-1]}function WD(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:CQ(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:CQ(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}var yl=function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerSaveRouter=function(e){n.getInstance().saveRouters.push(e)},n.registerLoadRouter=function(e){n.getInstance().loadRouters.push(e)},n.getSaveHandlers=function(e){return n.getHandlers(e,"save")},n.getLoadHandlers=function(e,t){return n.getHandlers(e,"load",t)},n.getHandlers=function(e,t,r){var i=[];return(t==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach(function(a){var o=a(e,r);o!==null&&i.push(o)}),i},n}(),O2="://",Lm=function(){function n(){this.managers={}}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerManager=function(e,t){Pe(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(O2)&&(e=e.slice(0,e.indexOf(O2))),Pe(e.length>0,function(){return"scheme must not be an empty string."});var r=n.getInstance();Pe(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=t},n.getManager=function(e){var t=this.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n}();function pN(n){if(n.indexOf(O2)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Lm.getSchemes().join(","));return{scheme:n.split(O2)[0],path:n.split(O2)[1]}}function TQ(n,e,t){return t===void 0&&(t=!1),Jt(this,void 0,void 0,function(){var r,i,a,o,s,u,l,h,c;return en(this,function(f){switch(f.label){case 0:return Pe(n!==e,function(){return"Old path and new path are the same: '"+n+"'"}),Pe((r=yl.getLoadHandlers(n)).length>0,function(){return"Copying failed because no load handler is found for source URL "+n+"."}),Pe(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."}),i=r[0],Pe((a=yl.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),Pe(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),o=a[0],s=pN(n).scheme,u=pN(n).path,l=s===pN(n).scheme,[4,i.load()];case 1:return h=f.sent(),t&&l?[4,Lm.getManager(s).removeModel(u)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,o.save(h)];case 4:return c=f.sent(),!t||l?[3,6]:[4,Lm.getManager(s).removeModel(u)];case 5:f.sent(),f.label=6;case 6:return[2,c.modelArtifactsInfo]}})})}var Iv="models_store",Om="model_info_store";function Gpe(){if(!ct().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function YU(n){var e=n.result;e.createObjectStore(Iv,{keyPath:"modelPath"}),e.createObjectStore(Om,{keyPath:"modelPath"})}var R2=function(){function n(e){if(this.indexedDB=Gpe(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return n.prototype.save=function(e){return Jt(this,void 0,void 0,function(){return en(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},n.prototype.load=function(){return Jt(this,void 0,void 0,function(){return en(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},n.prototype.databaseAction=function(e,t){var r=this;return new Promise(function(i,a){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return YU(o)},o.onsuccess=function(){var s=o.result;if(t==null){var u=s.transaction(Iv,"readonly"),l=u.objectStore(Iv).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(m){return s.close(),a(l.error)},u.oncomplete=function(){return s.close()}}else{var h,c=WD(t),f=s.transaction(Om,"readwrite"),d=f.objectStore(Om),p=d.put({modelPath:r.modelPath,modelArtifactsInfo:c});p.onsuccess=function(){var m=(h=s.transaction(Iv,"readwrite")).objectStore(Iv).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:c});m.onsuccess=function(){return i({modelArtifactsInfo:c})},m.onerror=function(g){var y=(d=f.objectStore(Om)).delete(r.modelPath);y.onsuccess=function(){return s.close(),a(m.error)},y.onerror=function(v){return s.close(),a(m.error)}}},p.onerror=function(m){return s.close(),a(p.error)},f.oncomplete=function(){h==null?s.close():h.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return a(o.error)}})},n.URL_SCHEME="indexeddb://",n}(),DQ=function(n){return ct().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(R2.URL_SCHEME)?(e=n.slice(R2.URL_SCHEME.length),new R2(e)):null;var e};yl.registerSaveRouter(DQ),yl.registerLoadRouter(DQ);var T$e=function(){function n(){this.indexedDB=Gpe()}return n.prototype.listModels=function(){return Jt(this,void 0,void 0,function(){var e=this;return en(this,function(t){return[2,new Promise(function(r,i){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return YU(a)},a.onsuccess=function(){var o=a.result,s=o.transaction(Om,"readonly"),u=s.objectStore(Om).getAll();u.onsuccess=function(){for(var l={},h=0,c=u.result;h<c.length;h++){var f=c[h];l[f.modelPath]=f.modelArtifactsInfo}r(l)},u.onerror=function(l){return o.close(),i(u.error)},s.oncomplete=function(){return o.close()}},a.onerror=function(o){return i(a.error)}})]})})},n.prototype.removeModel=function(e){return Jt(this,void 0,void 0,function(){var t=this;return en(this,function(r){var i;return e=(i=e).startsWith(R2.URL_SCHEME)?i.slice(R2.URL_SCHEME.length):i,[2,new Promise(function(a,o){var s=t.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return YU(s)},s.onsuccess=function(){var u,l=s.result,h=l.transaction(Om,"readwrite"),c=h.objectStore(Om),f=c.get(e);f.onsuccess=function(){if(f.result==null)return l.close(),o(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var d=c.delete(e),p=function(){var m=(u=l.transaction(Iv,"readwrite")).objectStore(Iv).delete(e);m.onsuccess=function(){return a(f.result.modelArtifactsInfo)},m.onerror=function(g){return o(f.error)}};d.onsuccess=p,d.onerror=function(m){return p(),l.close(),o(f.error)}},f.onerror=function(d){return l.close(),o(f.error)},h.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return o(s.error)}})]})})},n}();if(ct().getBool("IS_BROWSER"))try{Lm.registerManager(R2.URL_SCHEME,new T$e)}catch{}var fp="/",d2="tensorflowjs_models",Xpe="info",D$e="model_topology",A$e="weight_specs",k$e="weight_data",N$e="model_metadata";function Kpe(n){return{info:[d2,n,Xpe].join(fp),topology:[d2,n,D$e].join(fp),weightSpecs:[d2,n,A$e].join(fp),weightData:[d2,n,k$e].join(fp),modelMetadata:[d2,n,N$e].join(fp)}}function O$e(n){var e=n.split(fp);if(e.length<3)throw new Error("Invalid key format: "+n);return e.slice(1,e.length-1).join(fp)}var I2=function(){function n(e){if(!ct().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Kpe(this.modelPath)}return n.prototype.save=function(e){return Jt(this,void 0,void 0,function(){var t,r,i;return en(this,function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=WD(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(KU)return Buffer.from(o).toString("base64");for(var s=new Uint8Array(o),u="",l=0,h=s.length;l<h;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},n.prototype.load=function(){return Jt(this,void 0,void 0,function(){var e,t,r,i,a,o,s;return en(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=i,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(a),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,t.userDefinedMetadata=o.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(l){if(KU){var h=Buffer.from(l,"base64");return h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength)}for(var c=atob(l),f=new Uint8Array(c.length),d=0;d<c.length;++d)f.set([c.charCodeAt(d)],d);return f.buffer}(s),[2,t]})})},n.URL_SCHEME="localstorage://",n}(),AQ=function(n){return ct().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(I2.URL_SCHEME)?(e=n.slice(I2.URL_SCHEME.length),new I2(e)):null;var e};yl.registerSaveRouter(AQ),yl.registerLoadRouter(AQ);var R$e=function(){function n(){Pe(ct().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),Pe(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return n.prototype.listModels=function(){return Jt(this,void 0,void 0,function(){var e,t,r,i,a,o;return en(this,function(s){for(e={},t=d2+fp,r=fp+Xpe,i=0;i<this.LS.length;++i)(a=this.LS.key(i)).startsWith(t)&&a.endsWith(r)&&(o=O$e(a),e[o]=JSON.parse(this.LS.getItem(a)));return[2,e]})})},n.prototype.removeModel=function(e){return Jt(this,void 0,void 0,function(){var t,r;return en(this,function(i){var a;if(e=(a=e).startsWith(I2.URL_SCHEME)?a.slice(I2.URL_SCHEME.length):a,t=Kpe(e),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]})})},n}();if(ct().getBool("IS_BROWSER"))try{Lm.registerManager(I2.URL_SCHEME,new R$e)}catch{}var I$e="model",F$e=".json",P$e=".weights.bin";function kQ(n){return new Promise(function(e){return setTimeout(e)}).then(n)}var CM=function(){function n(e){if(!ct().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(n.URL_SCHEME)&&(e=e.slice(n.URL_SCHEME.length)),e!=null&&e.length!==0||(e=I$e),this.modelTopologyFileName=e+F$e,this.weightDataFileName=e+P$e}return n.prototype.save=function(e){return Jt(this,void 0,void 0,function(){var t,r,i,a,o,s;return en(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=a,[4,kQ(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),e.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=t,[4,kQ(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:WD(e)}]}})})},n.URL_SCHEME="downloads://",n}(),L$e=function(){function n(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return n.prototype.load=function(){return Jt(this,void 0,void 0,function(){var e,t,r=this;return en(this,function(i){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(a,o){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),h=l.modelTopology;if(h!=null){t.length===0&&a({modelTopology:h});var c=l.weightsManifest;if(c!=null){var f;try{f=r.checkManifestAndWeightFiles(c,t)}catch(g){return void o(g)}var d=[],p=[],m=[];c.forEach(function(g){g.paths.forEach(function(y){p.push(y),m.push(null)}),d.push.apply(d,g.weights)}),c.forEach(function(g){g.paths.forEach(function(y){var v=new FileReader;v.onload=function(b){var w=b.target.result,x=p.indexOf(y);m[x]=w,m.indexOf(null)===-1&&a({modelTopology:h,weightSpecs:d,weightData:QW(m),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},v.onerror=function(b){return o("Failed to weights data from file of path '"+y+"'.")},v.readAsArrayBuffer(f[y])})})}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(u){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)})]})})},n.prototype.checkManifestAndWeightFiles=function(e,t){for(var r=[],i=t.map(function(u){return EQ(u.name)}),a={},o=0,s=e;o<s.length;o++)s[o].paths.forEach(function(u){var l=EQ(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");a[u]=t[i.indexOf(l)]});if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return a},n}();function NQ(n,e,t,r){(function(a){Pe(a!=null&&Array.isArray(a)&&a.length>0,function(){return"promises must be a none empty array"})})(n),function(a,o){Pe(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a}),Pe(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),Pe(o>=a,function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+o})}(t=t??0,r=r??1);var i=0;return Promise.all(n.map(function(a){return a.then(function(o){var s=t+ ++i/n.length*(r-t);return e(s),o}),a}))}function Ype(n,e){return Jt(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,h;return en(this,function(c){switch(c.label){case 0:return e==null&&(e={}),t=e.fetchFunc==null?ct().platform.fetch:e.fetchFunc,r=n.map(function(f){return t(f,e.requestInit,{isBinary:!0})}),i=0,a=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=c.sent(),[3,4];case 2:return[4,NQ(r,e.onProgress,i,a)];case 3:o=c.sent(),c.label=4;case 4:return s=o.map(function(f){return f.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return h=c.sent(),[3,8];case 6:return[4,NQ(s,e.onProgress,u,l)];case 7:h=c.sent(),c.label=8;case 8:return[2,h]}})})}function OQ(n){var e=this;return function(t,r,i){return r===void 0&&(r=""),Jt(e,void 0,void 0,function(){var a,o,s,u,l,h,c,f,d,p;return en(this,function(m){switch(m.label){case 0:if(a=t.map(function(){return!1}),o={},s=i!=null?i.map(function(){return!1}):[],u=[],t.forEach(function(g,y){var v=0;g.weights.forEach(function(b){var w="quantization"in b?b.quantization.dtype:b.dtype,x=XU[w]*Qt(b.shape),S=function(){a[y]=!0,o[y]==null&&(o[y]=[]),o[y].push({manifestEntry:b,groupOffset:v,sizeBytes:x})};i!=null?i.forEach(function(E,A){E===b.name&&(S(),s[A]=!0)}):S(),u.push(b.name),v+=x})}),!s.every(function(g){return g}))throw l=i.filter(function(g,y){return!s[y]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return h=a.reduce(function(g,y,v){return y&&g.push(v),g},[]),c=[],h.forEach(function(g){t[g].paths.forEach(function(y){var v=r+(r.endsWith("/")?"":"/")+y;c.push(v)})}),[4,n(c)];case 1:return f=m.sent(),d={},p=0,h.forEach(function(g){for(var y=t[g].paths.length,v=0,b=0;b<y;b++)v+=f[p+b].byteLength;for(var w=new ArrayBuffer(v),x=new Uint8Array(w),S=0,E=0;E<y;E++){var A=new Uint8Array(f[p+E]);x.set(A,S),S+=A.byteLength}o[g].forEach(function(k){var T=Hpe(w.slice(k.groupOffset,k.groupOffset+k.sizeBytes),[k.manifestEntry]);for(var O in T)d[O]=T[O]}),p+=y}),[2,d]}})})}}yl.registerSaveRouter(function(n){return ct().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(CM.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new CM(e)}(n.slice(CM.URL_SCHEME.length)):null});var Qpe=function(){function n(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(Pe(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=ct().platform.fetch,Pe(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&Pe(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return n.prototype.save=function(e){return Jt(this,void 0,void 0,function(){var t,r,i,a;return en(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((a=o.sent()).ok)return[2,{modelArtifactsInfo:WD(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},n.prototype.load=function(){return Jt(this,void 0,void 0,function(){var e,t,r,i,a,o,s,u,l,h,c,f;return en(this,function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.json()];case 3:return t=d.sent(),[3,5];case 4:throw d.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=t.modelTopology,a=t.weightsManifest,o=t.generatedBy,s=t.convertedBy,u=t.format,l=t.userDefinedMetadata,i==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:f=d.sent(),h=f[0],c=f[1],d.label=7;case 7:return[2,{modelTopology:i,weightSpecs:h,weightData:c,userDefinedMetadata:l,generatedBy:o,convertedBy:s,format:u}]}})})},n.prototype.loadWeights=function(e){return Jt(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,h,c,f;return en(this,function(d){switch(d.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var m=p.lastIndexOf("/"),g=p.lastIndexOf("?"),y=p.substring(0,m),v=g>m?p.substring(g):"";return[y+"/",v]}(t),i=r[0],a=r[1],o=this.weightPathPrefix||i,s=[],u=0,l=e;u<l.length;u++)h=l[u],s.push.apply(s,h.weights);return c=[],e.forEach(function(p){p.paths.forEach(function(m){c.push(o+m+a)})}),[4,Ype(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=d.sent(),[2,[s,QW(f)]]}})})},n.URL_SCHEME_REGEX=/^https?:\/\//,n}();function QU(n){return n.match(Qpe.URL_SCHEME_REGEX)!=null}var RQ=function(n,e){return typeof fetch>"u"?null:(Array.isArray(n)?n.every(function(t){return QU(t)}):QU(n))?ZU(n,{onProgress:e}):null};function ZU(n,e){return new Qpe(n,e)}yl.registerSaveRouter(RQ),yl.registerLoadRouter(RQ);var EM=function(){function n(e){this.modelArtifacts=e}return n.prototype.load=function(){return Jt(this,void 0,void 0,function(){return en(this,function(e){return[2,this.modelArtifacts]})})},n}(),M$e=function(){function n(e){this.saveHandler=e}return n.prototype.save=function(e){return Jt(this,void 0,void 0,function(){return en(this,function(t){return[2,this.saveHandler(e)]})})},n}(),dp=Object.freeze({browserFiles:function(n){return new L$e(n)},browserHTTPRequest:function(n,e){return ZU(n,e)},concatenateArrayBuffers:QW,decodeWeights:Hpe,encodeWeights:function(n,e){return Jt(this,void 0,void 0,function(){var t,r,i,a,o,s=this;return en(this,function(u){switch(u.label){case 0:for(t=[],r=[],i=Array.isArray(n)?n.map(function(l){return l.name}):Object.keys(n),a=function(l){var h=i[l],c=Array.isArray(n)?n[l].tensor:n[h];if(c.dtype!=="float32"&&c.dtype!=="int32"&&c.dtype!=="bool"&&c.dtype!=="string")throw new Error("Unsupported dtype in weight '"+h+"': "+c.dtype);var f={name:h,shape:c.shape,dtype:c.dtype};if(c.dtype==="string"){var d=new Promise(function(p){return Jt(s,void 0,void 0,function(){var m,g,y,v,b,w,x;return en(this,function(S){switch(S.label){case 0:return[4,c.bytes()];case 1:for(m=S.sent(),g=m.reduce(function(E,A){return E+A.length},0)+_O*m.length,y=new Uint8Array(g),v=0,b=0;b<m.length;b++)w=m[b],x=new Uint8Array(new Uint32Array([w.length]).buffer),y.set(x,v),v+=_O,y.set(w,v),v+=w.length;return p(y),[2]}})})});r.push(d)}else r.push(c.data());e!=null&&(f.group=e),t.push(f)},o=0;o<i.length;++o)a(o);return[4,Promise.all(r)];case 1:return[2,{data:E$e(u.sent()),specs:t}]}})})},fromMemory:function(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new EM(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new EM({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new EM({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))},getLoadHandlers:function(n,e){return yl.getLoadHandlers(n,e)},getModelArtifactsInfoForJSON:WD,getSaveHandlers:function(n){return yl.getSaveHandlers(n)},http:ZU,isHTTPScheme:QU,loadWeights:function(n,e,t,r){return e===void 0&&(e=""),Jt(this,void 0,void 0,function(){return en(this,function(i){return[2,OQ(function(a){return Ype(a,{requestInit:r})})(n,e,t)]})})},registerLoadRouter:function(n){return yl.registerLoadRouter(n)},registerSaveRouter:function(n){return yl.registerSaveRouter(n)},weightsLoaderFactory:OQ,withSaveHandler:function(n){return new M$e(n)},copyModel:function(n,e){return Jt(this,void 0,void 0,function(){return en(this,function(t){return[2,TQ(n,e,!1)]})})},listModels:function(){return Jt(this,void 0,void 0,function(){var n,e,t,r,i,a,o;return en(this,function(s){switch(s.label){case 0:n=Lm.getSchemes(),e={},t=0,r=n,s.label=1;case 1:return t<r.length?(i=r[t],[4,Lm.getManager(i).listModels()]):[3,4];case 2:for(o in a=s.sent())e[i+O2+o]=a[o];s.label=3;case 3:return t++,[3,1];case 4:return[2,e]}})})},moveModel:function(n,e){return Jt(this,void 0,void 0,function(){return en(this,function(t){return[2,TQ(n,e,!0)]})})},removeModel:function(n){return Jt(this,void 0,void 0,function(){var e;return en(this,function(t){return e=pN(n),[2,Lm.getManager(e.scheme).removeModel(e.path)]})})}}),Kb;$e({confusionMatrix_:function(n,e,t){var r=Oe(n,"labels","confusionMatrix"),i=Oe(e,"predictions","confusionMatrix");Pe(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),Pe(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),Pe(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),Pe(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),Pe(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var a=tx(r.asType("int32"),t),o=tx(i.asType("int32"),t);return a.transpose().matMul(o).asType("int32")}});var U$e=$e({fromPixels_:function(n,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,i=!1,a=!1,o=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)a=!0;else{if(n.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);o=!0}if(i&&i&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(Ofe("FromPixels",Ve.backendName)!=null)return Ve.runKernel("FromPixels",{pixels:n},{numChannels:e});var s,u,l=i?[n.videoWidth,n.videoHeight]:[n.width,n.height],h=l[0],c=l[1];if(o?s=n.getContext("2d").getImageData(0,0,h,c).data:r||t?s=n.data:(a||i)&&(Kb==null&&(Kb=document.createElement("canvas").getContext("2d")),Kb.canvas.width=h,Kb.canvas.height=c,Kb.drawImage(n,0,0,h,c),s=Kb.getImageData(0,0,h,c).data),e===4)u=new Int32Array(s);else{var f=h*c;u=new Int32Array(f*e);for(var d=0;d<f;d++)for(var p=0;p<e;++p)u[d*e+p]=s[4*d+p]}return Kfe(u,[c,h,e],"int32")}}),B$e=Object.freeze({toPixels:function(n,e){return Jt(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,h,c,f,d,p,m,g,y,v,b,w,x,S,E,A;return en(this,function(k){switch(k.label){case 0:if(t=Oe(n,"img","toPixels"),n instanceof cr||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),i=r[0],a=r[1],(o=t.rank===2?1:t.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,t.data()];case 1:return s=k.sent(),u=t.min(),l=t.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(h=k.sent(),c=h[0],f=h[1],d=c[0],p=f[0],u.dispose(),l.dispose(),t.dtype==="float32"){if(d<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+p+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(d<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+p+"].")}for(m=t.dtype==="float32"?255:1,g=new Uint8ClampedArray(a*i*4),y=0;y<i*a;++y)v=void 0,b=void 0,w=void 0,x=void 0,o===1?(v=s[y]*m,b=s[y]*m,w=s[y]*m,x=255):o===3?(v=s[3*y]*m,b=s[3*y+1]*m,w=s[3*y+2]*m,x=255):o===4&&(v=s[4*y]*m,b=s[4*y+1]*m,w=s[4*y+2]*m,x=s[4*y+3]*m),g[(S=4*y)+0]=Math.round(v),g[S+1]=Math.round(b),g[S+2]=Math.round(w),g[S+3]=Math.round(x);return e!=null&&(e.width=a,e.height=i,E=e.getContext("2d"),A=new ImageData(g,a,i),E.putImageData(A,0,0)),t!==n&&t.dispose(),[2,g]}})})},fromPixels:U$e}),Zpe=function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(e,t){return new e(t)},n}(),Jpe=function(){function n(){this.classNameMap={}}return n.getMap=function(){return n.instance==null&&(n.instance=new n),n.instance},n.register=function(e){n.getMap().classNameMap[e.className]=[e,e.fromConfig]},n}();function vy(n){Pe(n.className!=null,function(){return"Class being registered does not have the static className property defined."}),Pe(typeof n.className=="string",function(){return"className is required to be a string, but got type "+typeof n.className}),Pe(n.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Jpe.register(n)}var St=Object.freeze({Serializable:Zpe,SerializationMap:Jpe,registerClass:vy}),by=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Sh(e,n),e.prototype.minimize=function(t,r,i){r===void 0&&(r=!1);var a=this.computeGradients(t,i),o=a.value,s=a.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return rr(s),r?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,r){return Z7e(t,r)},e.prototype.dispose=function(){this.iterations_!=null&&rr(this.iterations_)},e.prototype.saveIterations=function(){return Jt(this,void 0,void 0,function(){return en(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:jt(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return Jt(this,void 0,void 0,function(){return en(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return Jt(this,void 0,void 0,function(){return en(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return Jt(this,void 0,void 0,function(){var r;return en(this,function(i){switch(i.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,t.slice(1)]}})})},e}(Zpe);Object.defineProperty(by,Symbol.hasInstance,{value:function(n){return n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null}});var ege=function(n){function e(t,r,i){i===void 0&&(i=null);var a=n.call(this)||this;return a.learningRate=t,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],i==null&&(a.epsilon=Ve.backend.epsilon()),a}return Sh(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=Ve.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accum_grad",variable:Ze(function(){return ar(o).variable(!1)})}),r.accumulatedUpdates[a]==null&&(r.accumulatedUpdates[a]={originalName:i+"/accum_var",variable:Ze(function(){return ar(o).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[i];if(s!=null){var u=r.accumulatedGrads[a].variable,l=r.accumulatedUpdates[a].variable;Ze(function(){var h=u.mul(r.rho).add(s.square().mul(1-r.rho)),c=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),f=l.mul(r.rho).add(c.square().mul(1-r.rho));u.assign(h),l.assign(f);var d=c.mul(-r.learningRate).add(o);o.assign(d)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(rr(this.accumulatedGrads.map(function(t){return t.variable})),rr(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return Jt(this,void 0,void 0,function(){var t;return en(this,function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(t){return Jt(this,void 0,void 0,function(){var r;return en(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(by);vy(ege);var tge=function(n){function e(t,r){r===void 0&&(r=.1);var i=n.call(this)||this;return i.learningRate=t,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return Sh(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=Ve.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accumulator",variable:Ze(function(){return PD(o.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[i];if(s!=null){var u=r.accumulatedGrads[a].variable;Ze(function(){var l=u.add(s.square());u.assign(l);var h=s.div(l.add(Ve.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(h)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&rr(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Jt(this,void 0,void 0,function(){return en(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return Jt(this,void 0,void 0,function(){return en(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(by);vy(tge);var nge=function(n){function e(t,r,i,a){a===void 0&&(a=null);var o=n.call(this)||this;return o.learningRate=t,o.beta1=r,o.beta2=i,o.epsilon=a,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Ze(function(){o.accBeta1=jt(r).variable(),o.accBeta2=jt(i).variable()}),a==null&&(o.epsilon=Ve.backend.epsilon()),o}return Sh(e,n),e.prototype.applyGradients=function(t){var r=this,i=Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t);Ze(function(){var a=pa(1,r.accBeta1),o=pa(1,r.accBeta2);i.forEach(function(s,u){var l=Ve.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Ze(function(){return ar(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:Ze(function(){return ar(l).variable(!1)})});var h=Array.isArray(t)?t[u].tensor:t[s];if(h!=null){var c=r.accumulatedFirstMoment[u].variable,f=r.accumulatedSecondMoment[u].variable,d=c.mul(r.beta1).add(h.mul(1-r.beta1)),p=f.mul(r.beta2).add(h.square().mul(1-r.beta2)),m=d.div(a),g=p.div(o);c.assign(d),f.assign(p);var y=m.div(g.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(y)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&rr(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&rr(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Jt(this,void 0,void 0,function(){var t;return en(this,function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(t){return Jt(this,void 0,void 0,function(){var r,i=this;return en(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),Ze(function(){i.accBeta1.assign(bE(i.beta1,i.iterations_+1)),i.accBeta2.assign(bE(i.beta2,i.iterations_+1))}),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(by);vy(nge);var rge=function(n){function e(t,r,i,a,o){a===void 0&&(a=null),o===void 0&&(o=0);var s=n.call(this)||this;return s.learningRate=t,s.beta1=r,s.beta2=i,s.epsilon=a,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],Ze(function(){s.iteration=jt(0).variable(),s.accBeta1=jt(r).variable()}),a==null&&(s.epsilon=Ve.backend.epsilon()),s}return Sh(e,n),e.prototype.applyGradients=function(t){var r=this,i=Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t);Ze(function(){var a=pa(1,r.accBeta1),o=ya(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,u){var l=Ve.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:ar(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:ar(l).variable(!1)});var h=Array.isArray(t)?t[u].tensor:t[s];if(h!=null){var c=r.accumulatedFirstMoment[u].variable,f=r.accumulatedWeightedInfNorm[u].variable,d=c.mul(r.beta1).add(h.mul(1-r.beta1)),p=f.mul(r.beta2),m=h.abs(),g=p.maximum(m);c.assign(d),f.assign(g);var y=o.div(a).mul(d.div(g.add(r.epsilon))).add(l);l.assign(y)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&rr(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&rr(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Jt(this,void 0,void 0,function(){return en(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return Jt(this,void 0,void 0,function(){return en(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(by);vy(rge);var ZW=function(n){function e(t){var r=n.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return Sh(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=Array.isArray(t)?t[a].tensor:t[i];if(o!=null){var s=Ve.registeredVariables[i];Ze(function(){var u=r.c.mul(o).add(s);s.assign(u)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=kp(jt(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Jt(this,void 0,void 0,function(){return en(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return Jt(this,void 0,void 0,function(){return en(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,r){return new t(r.learningRate)},e.className="SGD",e}(by);vy(ZW);var ige=function(n){function e(t,r,i){i===void 0&&(i=!1);var a=n.call(this,t)||this;return a.learningRate=t,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=jt(a.momentum),a}return Sh(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=Ve.registeredVariables[i];r.accumulations[a]==null&&(r.accumulations[a]={originalName:i+"/momentum",variable:Ze(function(){return ar(o).variable(!1)})});var s=r.accumulations[a].variable,u=Array.isArray(t)?t[a].tensor:t[i];u!=null&&Ze(function(){var l,h=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(h.mul(r.m))).add(o):r.c.mul(h).add(o),s.assign(h),o.assign(l)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&rr(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return Jt(this,void 0,void 0,function(){return en(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return Jt(this,void 0,void 0,function(){return en(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(ZW);vy(ige);var age=function(n){function e(t,r,i,a,o){r===void 0&&(r=.9),i===void 0&&(i=0),a===void 0&&(a=null),o===void 0&&(o=!1);var s=n.call(this)||this;if(s.learningRate=t,s.decay=r,s.momentum=i,s.epsilon=a,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,a==null&&(s.epsilon=Ve.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Sh(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=Ve.registeredVariables[i];r.accumulatedMeanSquares[a]==null&&(r.accumulatedMeanSquares[a]={originalName:i+"/rms",variable:Ze(function(){return ar(o).variable(!1)})}),r.accumulatedMoments[a]==null&&(r.accumulatedMoments[a]={originalName:i+"/momentum",variable:Ze(function(){return ar(o).variable(!1)})}),r.accumulatedMeanGrads[a]==null&&r.centered&&(r.accumulatedMeanGrads[a]={originalName:i+"/mg",variable:Ze(function(){return ar(o).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[i];if(s!=null){var u=r.accumulatedMeanSquares[a].variable,l=r.accumulatedMoments[a].variable;Ze(function(){var h=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var c=r.accumulatedMeanGrads[a].variable,f=c.mul(r.decay).add(s.mul(1-r.decay)),d=l.mul(r.momentum).add(s.mul(r.learningRate).div(h.sub(f.square().add(r.epsilon)).sqrt()));u.assign(h),c.assign(f),l.assign(d);var p=o.sub(d);o.assign(p)}else{var m=u.mul(r.decay).add(s.square().mul(1-r.decay));d=l.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),u.assign(m),l.assign(d),p=o.sub(d),o.assign(p)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&rr(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&rr(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&rr(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Jt(this,void 0,void 0,function(){var t;return en(this,function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(t){return Jt(this,void 0,void 0,function(){var r;return en(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(by);vy(age);var ov=function(){function n(){}return n.sgd=function(e){return new ZW(e)},n.momentum=function(e,t,r){return r===void 0&&(r=!1),new ige(e,t,r)},n.rmsprop=function(e,t,r,i,a){return t===void 0&&(t=.9),r===void 0&&(r=0),i===void 0&&(i=null),a===void 0&&(a=!1),new age(e,t,r,i,a)},n.adam=function(e,t,r,i){return e===void 0&&(e=.001),t===void 0&&(t=.9),r===void 0&&(r=.999),i===void 0&&(i=null),new nge(e,t,r,i)},n.adadelta=function(e,t,r){return e===void 0&&(e=.001),t===void 0&&(t=.95),r===void 0&&(r=null),new ege(e,t,r)},n.adamax=function(e,t,r,i,a){return e===void 0&&(e=.002),t===void 0&&(t=.9),r===void 0&&(r=.999),i===void 0&&(i=null),a===void 0&&(a=0),new rge(e,t,r,i,a)},n.adagrad=function(e,t){return t===void 0&&(t=.1),new tge(e,t)},n}(),Yb={sgd:ov.sgd,momentum:ov.momentum,adadelta:ov.adadelta,adagrad:ov.adagrad,rmsprop:ov.rmsprop,adamax:ov.adamax,adam:ov.adam},z$e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:function(n){return n()};function TM(){return new Promise(function(n){return z$e(function(){return n()})})}cr.prototype.add=function(n){return qn(this,n)},cr.prototype.broadcastTo=function(n){return fpe(this,n)},cr.prototype.div=function(n){return ya(this,n)},cr.prototype.divNoNan=function(n){return SW(this,n)},cr.prototype.squaredDifference=function(n){return DW(this,n)},cr.prototype.tile=function(n){return Pm(this,n)},cr.prototype.oneHot=function(n,e,t){return e===void 0&&(e=1),t===void 0&&(t=0),tx(this,n,e,t)},cr.prototype.transpose=function(n){return gr(this,n)},cr.prototype.pad=function(n,e){return Wp(this,n,e)},cr.prototype.batchNorm=function(n,e,t,r,i){return Ex(this,n,e,t,r,i)},dt=c$e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var sge=function(n,e){return(sge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function mt(n,e){function t(){this.constructor=n}sge(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var DM,bC=function(){return(bC=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}).apply(this,arguments)};function Rn(n,e,t,r){return new(t||(t=Promise))(function(i,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function s(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):new t(function(h){h(l.value)}).then(o,s)}u((r=r.apply(n,[])).next())})}function Cn(n,e){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&h[0]?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return o.label++,{value:h[1],done:!1};case 5:o.label++,r=h[1],h=[0];continue;case 7:h=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){o=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){o.label=h[1];break}if(h[0]===6&&o.label<i[1]){o.label=i[1],i=h;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(h);break}i[2]&&o.ops.pop(),o.trys.pop();continue}h=e.call(n,o)}catch(c){h=[6,c],r=0}finally{t=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([u,l])}}}function Fa(){return DM==null&&(DM=D7e().epsilon()),DM}function yh(){return"channelsLast"}var vv=function(n){function e(t){var r=n.call(this,t)||this;return Object.setPrototypeOf(r,e.prototype),r}return mt(e,n),e}(Error),Of=function(n){function e(t){var r=n.call(this,t)||this;return Object.setPrototypeOf(r,e.prototype),r}return mt(e,n),e}(Error),Ke=function(n){function e(t){var r=n.call(this,t)||this;return Object.setPrototypeOf(r,e.prototype),r}return mt(e,n),e}(Error),Vn=function(n){function e(t){var r=n.call(this,t)||this;return Object.setPrototypeOf(r,e.prototype),r}return mt(e,n),e}(Error),W$e=function(n){function e(t){var r=n.call(this,t)||this;return Object.setPrototypeOf(r,e.prototype),r}return mt(e,n),e}(Error);(function(n){function e(t){var r=n.call(this,t)||this;return Object.setPrototypeOf(r,e.prototype),r}return mt(e,n),e})(Error);function _1(n,e){if(Array.isArray(n)){for(var t=[],r=0;r<e;r++)t=t.concat(n);return t}return(t=new Array(e)).fill(n),t}function Af(n,e){if(!n)throw new W$e(e)}function IQ(n,e){for(var t=0,r=0,i=n;r<i.length;r++)i[r]===e&&t++;return t}function $o(n){return n.length===1?n[0]:n}function _i(n){return Array.isArray(n)?n:[n]}function Pd(n){var e=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return e[0]!=="_"?e:"private"+e}function Ev(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,function(e,t){return t.toUpperCase()})}var Gl={};function JW(n){if(n==null)return null;var e={};return e.className=n.getClassName(),e.config=n.getConfig(),e}function JU(n){if(n!=null&&typeof n=="object")if(Array.isArray(n))n.forEach(function(a){return JU(a)});else for(var e=0,t=Object.keys(n);e<t.length;e++){var r=t[e],i=n[r];i!=null&&typeof i=="object"&&(Array.isArray(i)||i.type!=="ndarray"||typeof i.value!="number"?JU(i):n[r]=i.value)}}function jD(n,e,t,r,i){var a,o,s;if(e===void 0&&(e={}),t===void 0&&(t={}),r===void 0&&(r="object"),i===void 0&&(i=!1),typeof n=="string"){var u=n,l=void 0;if(u in t)l=t[u];else if(u in Gl)l=Gl[u];else if((l=e[u])==null)throw new Ke("Unknown "+r+": "+n+`. This may be due to one of the following reasons:
1. The `+r+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return l}var h=n;if(h.className==null||h.config==null)throw new Ke(r+": Improper config format: "+JSON.stringify(h)+`.
'className' and 'config' must set.`);var c=h.className,f=void 0,d=void 0;if(c in t?(f=(a=t[c])[0],d=a[1]):c in Gl?(f=(o=Gl.className)[0],d=o[1]):c in e&&(f=(s=e[c])[0],d=s[1]),f==null)throw new Ke("Unknown "+r+": "+c+`. This may be due to one of the following reasons:
1. The `+r+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(d!=null){for(var p={},m=0,g=Object.keys(Gl);m<g.length;m++)p[S=g[m]]=Gl[S];for(var y=0,v=Object.keys(t);y<v.length;y++)p[S=v[y]]=t[S];h.config.customObjects=p;for(var b=bC({},Gl),w=0,x=Object.keys(t);w<x.length;w++){var S=x[w];Gl[S]=t[S]}JU(h.config);var E=d(f,h.config,t,i);return Gl=bC({},b),E}b=bC({},Gl);for(var A=0,k=Object.keys(t);A<k.length;A++)S=k[A],Gl[S]=t[S];return E=new f(h.config),Gl=bC({},b),E}function j$e(n,e){return n<e?-1:n>e?1:0}function Pk(n,e){return-1*j$e(n,e)}function Mm(n){if(n==null)return n;for(var e=[],t=0,r=n;t<r.length;t++){var i=r[t];e.indexOf(i)===-1&&e.push(i)}return e}function $$e(n){if(n==null)throw new Ke("Invalid value in obj: "+JSON.stringify(n));for(var e in n)if(n.hasOwnProperty(e))return!1;return!0}function kx(n,e,t){if(t!=null&&n.indexOf(t)<0)throw new Ke(t+" is not a valid "+e+".  Valid values are "+n+" or null/undefined.")}function ej(n,e,t,r){return r===void 0&&(r=1/0),Af(t>=0),Af(r>=t),Array.isArray(n)&&n.length>=t&&n.length<=r&&n.every(function(i){return typeof i===e})}function Zo(n,e){Array.isArray(n)?(gn.assert(n.length>0,function(){return e+" is unexpectedly an empty array."}),n.forEach(function(t,r){return Zo(t,"element "+(r+1)+" of "+e)})):gn.assert(Number.isInteger(n)&&n>0,function(){return"Expected "+e+" to be a positive integer, but got "+oge(n)+"."})}function oge(n){return n===null?"null":Array.isArray(n)?"["+n.map(function(e){return oge(e)}).join(",")+"]":typeof n=="string"?'"'+n+'"':""+n}function q$e(n,e){var t,r=gn.now();return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=gn.now();return o-r<e?t:(r=o,t=n.apply(void 0,i))}}function uge(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}function tj(n,e){return Ze(function(){return ZI(Za(hW(n,n),e,!0))})}var $D=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.getConfig=function(){return{}},e}(St.Serializable),V$e=function(n){function e(t){var r=n.call(this)||this;return r.defaultMaxValue=2,r.defaultAxis=0,r.maxValue=t.maxValue!=null?t.maxValue:r.defaultMaxValue,r.axis=t.axis!=null?t.axis:r.defaultAxis,r}return mt(e,n),e.prototype.apply=function(t){var r=this;return Ze(function(){var i=tj(t,r.axis),a=Iu(i,0,r.maxValue);return rn(t,ya(a,qn(Fa(),i)))})},e.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},e.className="MaxNorm",e}($D);St.registerClass(V$e);var H$e=function(n){function e(t){var r=n.call(this)||this;return r.defaultAxis=0,r.axis=t.axis!=null?t.axis:r.defaultAxis,r}return mt(e,n),e.prototype.apply=function(t){var r=this;return Ze(function(){return ya(t,qn(Fa(),tj(t,r.axis)))})},e.prototype.getConfig=function(){return{axis:this.axis}},e.className="UnitNorm",e}($D);St.registerClass(H$e);var G$e=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return M1(t)},e.className="NonNeg",e}($D);St.registerClass(G$e);var X$e=function(n){function e(t){var r=n.call(this)||this;return r.defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=t.minValue!=null?t.minValue:r.defaultMinValue,r.maxValue=t.maxValue!=null?t.maxValue:r.defaultMaxValue,r.rate=t.rate!=null?t.rate:r.defaultRate,r.axis=t.axis!=null?t.axis:r.defaultAxis,r}return mt(e,n),e.prototype.apply=function(t){var r=this;return Ze(function(){var i=tj(t,r.axis),a=qn(rn(r.rate,Iu(i,r.minValue,r.maxValue)),rn(1-r.rate,i));return rn(t,ya(a,qn(Fa(),i)))})},e.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},e.className="MinMaxNorm",e}($D);St.registerClass(X$e);var FQ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Gr(n){return JW(n)}function PQ(n,e){return e===void 0&&(e={}),jD(n,St.SerializationMap.getMap().classNameMap,e,"constraint")}function Pa(n){return n==null?null:typeof n=="string"?PQ({className:n in FQ?FQ[n]:n,config:{}}):n instanceof $D?n:PQ(n)}var K$e=["channelsFirst","channelsLast"],Y$e=["valid","same","causal"],Q$e=["max","avg"],Z$e=["sum","mul","concat","ave"],Qb=new Map;function Ua(n){kx(K$e,"DataFormat",n)}function wc(n){kx(Y$e,"PaddingMode",n)}function lge(n){kx(Q$e,"PoolMode",n)}var FC=[],LQ="/";function Y0(n,e){FC.push(n);try{var t=e();return FC.pop(),t}catch(r){throw FC.pop(),r}}function J$e(){return FC.length===0?"":FC.join(LQ)+LQ}function cge(n){if(!fge(n))throw new Error("Not a valid tensor name: '"+n+"'");return J$e()+n}function hge(n){if(!fge(n))throw new Error("Not a valid tensor name: '"+n+"'");Qb.has(n)||Qb.set(n,0);var e=Qb.get(n);if(Qb.set(n,Qb.get(n)+1),e>0){var t=n+"_"+e;return Qb.set(t,1),t}return n}var eqe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function fge(n){return!!n.match(eqe)}function tqe(n){return n===parseInt(n.toString(),10)}function Um(n,e,t){e==null&&(e=0),t==null&&(t=n.length);for(var r=1,i=e;i<t;++i)r*=n[i];return r}function dge(n){return n=Array.isArray(n)?new Float32Array(n):n,Ru(n)}function nx(n){return BW(dge(n)).dataSync()[0]}function Jm(n){return w1(dge(n)).dataSync()[0]}function vh(n,e){if(e<n)throw new Ke("end ("+e+") < begin ("+n+") is forbidden.");for(var t=[],r=n;r<e;++r)t.push(r);return t}function qD(n,e){return n.asType(e)}function VD(n,e){e===void 0&&(e=-1);var t=n.shape.slice();return e<0&&(e=t.length+e+1),t.splice(e,0,1),n.reshape(t)}function nqe(n,e){return Ze(function(){if(n.shape.length!==2)throw new Ke("repeat() expects a rank-2 tensor, but received a rank-"+n.shape.length+" tensor.");return eB(VD(n,1),[1,e,1])})}function rqe(n){var e=[Um(n.shape)];return n.reshape(e)}function iqe(n){if(n.rank<=1)throw new Ke("batchFlatten requires a minimum rank of 2. Got rank: "+n.rank+".");var e=[n.shape[0],Um(n.shape,1)];return n.reshape(e)}function Q0(n,e,t){return Ze(function(){switch(n.rank){case 1:return a4(n,e,t);case 2:return MW(n,[e,0],[t,n.shape[1]]);case 3:return s4(n,[e,0,0],[t,n.shape[1],n.shape[2]]);case 4:return xE(n,[e,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3]]);case 5:return mc(n,[e,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return mc(n,[e,0,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new Ke("sliceAlongFirstAxis() received an unsupported tensor rank: "+n.rank)}})}function AM(n,e,t){return Ze(function(){switch(n.rank){case 1:return a4(n,e,t);case 2:return MW(n,[0,e],[n.shape[0],t]);case 3:return s4(n,[0,0,e],[n.shape[0],n.shape[1],t]);case 4:return xE(n,[0,0,0,e],[n.shape[0],n.shape[1],n.shape[2],t]);default:throw new Ke("sliceAlongLastAxis() received an unsupported tensor rank: "+n.rank)}})}function Lk(n,e,t,r){return Ze(function(){switch(n.rank){case 1:return a4(n,e,t);case 2:switch(r){case 1:return Q0(n,e,t);case 2:return AM(n,e,t);default:throw new Ke("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return Q0(n,e,t);case 2:return s4(n,[0,e,0],[n.shape[0],t,n.shape[2]]);case 3:return AM(n,e,t);default:throw new Ke("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return Q0(n,e,t);case 2:return xE(n,[0,e,0,0],[n.shape[0],t,n.shape[2],n.shape[3]]);case 3:return xE(n,[0,0,e,0],[n.shape[0],n.shape[1],t,n.shape[3]]);case 4:return AM(n,e,t);default:throw new Ke("The axis is not within the rank of the tensor "+r)}default:throw new Ke("sliceAlongLastAxis() received an unsupported tensor rank: "+n.rank)}})}function pge(n,e){var t;return e===void 0&&(e=-1),e<0&&(e=(t=n[0].rank)!==0?t:0),e===n[0].rank&&(e=-1),Yo(n,e)}function MQ(n,e){switch(n.rank){case 1:return Zfe([n,e]);case 2:return Jfe([n,e],0);case 3:return ede([n,e],0);case 4:return tde([n,e],0);default:throw new Ke("concatAlongFirstAxis() received an unsupported tensor rank: "+n.rank)}}function eB(n,e){if(Array.isArray(e)||(e=[e]),n.rank!==e.length)throw new Ke("The length of input n ("+e.length+") does not match the number of dimensions in input x ("+n.rank+")");return Pm(n,e)}function f4(n,e,t,r,i){return e===void 0&&(e=0),t===void 0&&(t=1),gpe(n,e,t,r,i)}function yp(n,e,t,r){if(n.rank<2||e.rank<2)throw new Vn("dot requires both inputs to be rank >= 2 but got x shape = "+n.shape+" and y shape = "+e.shape);if(e.rank>=3&&n.shape.slice(-1)[0]!==(h=e.shape.slice(-2)[0]))throw new Vn("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+n.shape+" and  y shape = "+e.shape);if(n.rank===2&&e.rank===2){var i=!1,a=!1;return x1.matMul({a:n,b:e,transposeA:i,transposeB:a,bias:r?tB(n.rank,r,yh()):null,activation:t})}var o=n.shape.slice(),s=o.pop();n=n.reshape([-1,s]);var u=e.shape.slice(),l=u.pop(),h=u.pop(),c=u.concat([l]),f=Array.from({length:e.rank},function(p,m){return m===0?e.rank-2:m<=e.rank-2?m-1:m});e=e.transpose(f).reshape([h,-1]);var d=o.concat(c);return i=!1,a=!1,x1.matMul({a:n,b:e,transposeA:i,transposeB:a,bias:r?tB(n.rank,r,yh()):null,activation:t}).reshape(d)}function gge(n,e,t){return Ze(function(){return e=Array.isArray(e)?Ru(e,"int32"):e.toInt(),UD(n,e,t)})}function HD(n){return hW(n,n)}function tB(n,e,t){var r=e.shape;if(e.rank!==1&&e.rank!==n)throw new Ke("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+n);if(n===5){if(t==="channelsFirst")return r.length===1?e.reshape([1,r[0],1,1,1]):e.reshape([1,r[3],r[0],r[1],r[2]]);if(t==="channelsLast")return r.length===1?e.reshape([1,1,1,1,r[0]]):e.reshape([1].concat(r))}else if(n===4){if(t==="channelsFirst")return r.length===1?e.reshape([1,r[0],1,1]):e.reshape([1,r[2],r[0],r[1]]);if(t==="channelsLast")return r.length===1?e.reshape([1,1,1,r[0]]):e.reshape([1].concat(r))}else if(n===3){if(t==="channelsFirst")return r.length===1?e.reshape([1,r[0],1]):e.reshape([1,r[1],r[0]]);if(t==="channelsLast")return r.length===1?e.reshape([1,1,r[0]]):e.reshape([1].concat(r))}else if(n<3)return e;throw new Ke("Unsupported input rank by biasAdd: "+e.rank)}function $p(n,e,t){return Ze(function(){return t==null&&(t=yh()),Ua(t),n.add(tB(n.rank,e,t))})}function aqe(n,e){if(e===void 0&&(e=1),e!==1)throw new Vn("Support for alpha values other than 1 ("+e+") is not implemented yet.");return zD(n)}function sqe(n){return Ze(function(){return ya(n,v1(n).add(1))})}function mge(n,e,t,r){return Ze(function(){return Mpe(n,e,t,r)})}function oqe(n){return Ze(function(){var e=qn(.5,rn(.2,n));return Iu(e,0,1)})}function rx(n,e,t){return t===void 0&&(t=!1),t?n():e()}var uqe=["fanIn","fanOut","fanAvg"],lqe=["normal","uniform","truncatedNormal"];function cqe(n){kx(uqe,"FanMode",n)}function hqe(n){kx(lqe,"Distribution",n)}var Eh=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.fromConfigUsesCustomObjects=function(){return!1},e.prototype.getConfig=function(){return{}},e}(St.Serializable),fqe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t,r){return Lr(t,r)},e.className="Zeros",e}(Eh);St.registerClass(fqe);var yge=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t,r){return Bp(t,r)},e.className="Ones",e}(Eh);St.registerClass(yge);var dqe=function(n){function e(t){var r=n.call(this)||this;if(typeof t!="object")throw new Ke("Expected argument of type ConstantConfig but got "+t);if(t.value===void 0)throw new Ke("config must have value set but got "+t);return r.value=t.value,r}return mt(e,n),e.prototype.apply=function(t,r){var i=this;return Ze(function(){return rn(jt(i.value),Bp(t,r))})},e.prototype.getConfig=function(){return{value:this.value}},e.className="Constant",e}(Eh);St.registerClass(dqe);var pqe=function(n){function e(t){var r=n.call(this)||this;return r.DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=t.minval||r.DEFAULT_MINVAL,r.maxval=t.maxval||r.DEFAULT_MAXVAL,r.seed=t.seed,r}return mt(e,n),e.prototype.apply=function(t,r){return Tx(t,this.minval,this.maxval,r)},e.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},e.className="RandomUniform",e}(Eh);St.registerClass(pqe);var gqe=function(n){function e(t){var r=n.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=t.mean||r.DEFAULT_MEAN,r.stddev=t.stddev||r.DEFAULT_STDDEV,r.seed=t.seed,r}return mt(e,n),e.prototype.apply=function(t,r){if((r=r||"float32")!=="float32"&&r!=="int32")throw new Vn("randomNormal does not support dType "+r+".");return f4(t,this.mean,this.stddev,r,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="RandomNormal",e}(Eh);St.registerClass(gqe);var mqe=function(n){function e(t){var r=n.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=t.mean||r.DEFAULT_MEAN,r.stddev=t.stddev||r.DEFAULT_STDDEV,r.seed=t.seed,r}return mt(e,n),e.prototype.apply=function(t,r){if((r=r||"float32")!=="float32"&&r!=="int32")throw new Vn("truncatedNormal does not support dType "+r+".");return n4(t,this.mean,this.stddev,r,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="TruncatedNormal",e}(Eh);St.registerClass(mqe);var yqe=function(n){function e(t){var r=n.call(this)||this;return r.gain=t.gain!=null?t.gain:1,r}return mt(e,n),e.prototype.apply=function(t,r){var i=this;return Ze(function(){if(t.length!==2||t[0]!==t[1])throw new Ke("Identity matrix initializer can only be used for 2D square matrices.");return rn(i.gain,CW(t[0]))})},e.prototype.getConfig=function(){return{gain:this.gain}},e.className="Identity",e}(Eh);function vqe(n,e){var t,r;if(e===void 0&&(e="channelsLast"),Ua(e),n.length===2)t=n[0],r=n[1];else if([3,4,5].indexOf(n.length)!==-1)if(e==="channelsFirst"){var i=Um(n,2);t=n[1]*i,r=n[0]*i}else e==="channelsLast"&&(i=Um(n,0,n.length-2),t=n[n.length-2]*i,r=n[n.length-1]*i);else{var a=Um(n);t=Math.sqrt(a),r=Math.sqrt(a)}return[t,r]}St.registerClass(yqe);var _l=function(n){function e(t){var r=n.call(this)||this;if(t.scale<0)throw new Ke("scale must be a positive float. Got: "+t.scale);return r.scale=t.scale==null?1:t.scale,r.mode=t.mode==null?"fanIn":t.mode,cqe(r.mode),r.distribution=t.distribution==null?"normal":t.distribution,hqe(r.distribution),r.seed=t.seed,r}return mt(e,n),e.prototype.apply=function(t,r){var i=vqe(t),a=i[0],o=i[1],s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,a):this.mode==="fanOut"?s/=Math.max(1,o):s/=Math.max(1,(a+o)/2),this.distribution==="normal"){var u=Math.sqrt(s);if((r=r||"float32")!=="float32"&&r!=="int32")throw new Vn(this.getClassName()+" does not support dType "+r+".");return n4(t,0,u,r,this.seed)}var l=Math.sqrt(3*s);return Tx(t,-l,l,r)},e.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},e.className="VarianceScaling",e}(Eh);St.registerClass(_l);var vge=function(n){function e(t){return n.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})||this}return mt(e,n),e.prototype.getClassName=function(){return _l.className},e.className="GlorotUniform",e}(_l);St.registerClass(vge);var bge=function(n){function e(t){return n.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})||this}return mt(e,n),e.prototype.getClassName=function(){return _l.className},e.className="GlorotNormal",e}(_l);St.registerClass(bge);var wge=function(n){function e(t){return n.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})||this}return mt(e,n),e.prototype.getClassName=function(){return _l.className},e.className="HeNormal",e}(_l);St.registerClass(wge);var xge=function(n){function e(t){return n.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})||this}return mt(e,n),e.prototype.getClassName=function(){return _l.className},e.className="HeUniform",e}(_l);St.registerClass(xge);var _ge=function(n){function e(t){return n.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})||this}return mt(e,n),e.prototype.getClassName=function(){return _l.className},e.className="LeCunNormal",e}(_l);St.registerClass(_ge);var Sge=function(n){function e(t){return n.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})||this}return mt(e,n),e.prototype.getClassName=function(){return _l.className},e.className="LeCunNormal",e}(_l);St.registerClass(Sge);var bqe=function(n){function e(t){var r=n.call(this)||this;if(r.DEFAULT_GAIN=1,r.gain=t.gain==null?r.DEFAULT_GAIN:t.gain,r.seed=t.seed,r.seed!=null)throw new Vn("Random seed is not implemented for Orthogonal Initializer yet.");return r}return mt(e,n),e.prototype.apply=function(t,r){var i=this;return Ze(function(){if(t.length!==2)throw new Vn("The Orthogonal Initializer does not support non-2D shapes yet.");t[0]*t[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+t[0]*t[1]+") elements: Slowness may result.");var a=f4(t[0]>t[1]?[t[1],t[0]]:t,0,1,"float32"),o=Wpe.gramSchmidt(a);return t[0]>t[1]&&(o=o.transpose()),rn(i.gain,o)})},e.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},e.className="Orthogonal",e}(Eh);St.registerClass(bqe);var UQ={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function BQ(n,e){return e===void 0&&(e={}),jD(n,St.SerializationMap.getMap().classNameMap,e,"initializer")}function yr(n){return JW(n)}function Ni(n){if(typeof n=="string"){var e=n in UQ?UQ[n]:n;if(e==="GlorotNormal")return new bge;if(e==="GlorotUniform")return new vge;if(e==="HeNormal")return new wge;if(e==="HeUniform")return new xge;if(e==="LeCunNormal")return new _ge;if(e==="LeCunUniform")return new Sge;var t={};return t.className=e,t.config={},BQ(t)}return n instanceof Eh?n:BQ(n)}var wqe=0;function Cge(){return wqe++}var Mk={};function d4(n){return n===void 0&&(n=""),n in Mk||(Mk[n]=0),Mk[n]+=1,n+Mk[n].toString()}function nB(n){return Array.isArray(n)&&Array.isArray(n[0])}function SO(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function Mn(n){var e;if(Array.isArray(n)){if(n.length!==1)throw new Ke("Expected Tensor length to be 1; got "+n.length);e=n[0]}else e=n;return e}function gi(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return(n=n)[0];throw new Ke("Expected exactly 1 Shape; got "+n.length)}return n}function CO(n){for(var e=0,t=0,r=n;t<r.length;t++){var i=r[t];i.shape.length===0?e+=1:e+=i.shape.reduce(function(a,o){return a*o})}return e}var zQ="Variable",xqe=function(){function n(e,t,r,i,a){t===void 0&&(t="float32"),r===void 0&&(r=zQ),i===void 0&&(i=!0),a===void 0&&(a=null),this.dtype=t??"float32",this.shape=e.shape,this.id=Cge(),r=r??zQ,this.originalName=cge(r),this.name=hge(this.originalName),this.trainable_=i,this.constraint=a,this.val=Yfe(e,this.trainable_,this.name,this.dtype)}return n.prototype.read=function(){return this.assertNotDisposed(),this.val},n.prototype.write=function(e){return this.assertNotDisposed(),_qe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this},n.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},n.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},Object.defineProperty(n.prototype,"trainable",{get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e},enumerable:!0,configurable:!0}),n}();function _qe(n,e){if(n.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(e.shape))}function rB(n){return n.map(function(e){return e.read()})}function nj(n){n.forEach(function(e){e[0].write(e[1])})}var Vs=function(){return function(n){this.dtype=n.dtype,this.shape=n.shape,n.shape!=null?this.ndim=n.shape.length:this.ndim=n.ndim,this.maxNDim=n.maxNDim,this.minNDim=n.minNDim,this.axes=n.axes||{}}}(),Rf=function(){return function(n,e,t,r,i,a,o){this.dtype=n,this.shape=e,this.sourceLayer=t,this.inputs=r,this.callArgs=i,this.outputTensorIndex=o,this.id=Cge(),a!=null&&(this.originalName=cge(a),this.name=hge(this.originalName)),this.rank=e.length}}(),Sqe=0,p4=function(){function n(e,t){this.callArgs=t,this.id=Sqe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(var r=0,i=e.inboundLayers;r<i.length;r++){var a=i[r];a!=null&&a.outboundNodes.push(this)}e.outboundLayer.inboundNodes.push(this)}return n.prototype.getConfig=function(){for(var e=[],t=0,r=this.inboundLayers;t<r.length;t++){var i=r[t];i!=null?e.push(i.name):e.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},n}(),Cqe=0,ur=function(n){function e(t){var r=n.call(this)||this;r._callHook=null,r._addedWeightNames=[],r._stateful=!1,r.id=Cqe++,r.activityRegularizer=null,r.inputSpec=null,r.supportsMasking=!1,r._trainableWeights=[],r._nonTrainableWeights=[],r._losses=[],r._updates=[],r._built=!1,r.inboundNodes=[],r.outboundNodes=[];var i=t.name;if(!i){var a=r.getClassName();i=Pd(a)+"_"+d4(a)}if(r.name=i,r.trainable_=t.trainable==null||t.trainable,t.inputShape!=null||t.batchInputShape!=null){var o=void 0;if(t.batchInputShape!=null)o=t.batchInputShape;else if(t.inputShape!=null){var s=null;t.batchSize!=null&&(s=t.batchSize),o=[s].concat(t.inputShape)}r.batchInputShape=o;var u=t.dtype;u==null&&(u=t.inputDType),u==null&&(u="float32"),r.dtype=u}return t.weights!=null?r.initialWeights=t.weights:r.initialWeights=null,r._refCount=null,r.fastWeightInitDuringBuild=!1,r}return mt(e,n),e.nodeKey=function(t,r){return t.name+"_ib-"+r.toString()},e.prototype.getNodeAtIndex=function(t,r){if(this.inboundNodes.length===0)throw new Of("The layer has never been called and thus has no defined "+r+".");if(this.inboundNodes.length<=t)throw new Ke("Asked to get "+r+" at node "+t+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[t]},e.prototype.getInputAt=function(t){return $o(this.getNodeAtIndex(t,"input").inputTensors)},e.prototype.getOutputAt=function(t){return $o(this.getNodeAtIndex(t,"output").outputTensors)},Object.defineProperty(e.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new vv("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(this.inboundNodes.length===0)throw new vv("Layer "+this.name+" is not connected, no input to return.");return $o(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){if(this.inboundNodes.length===0)throw new vv("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new vv("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return $o(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),e.prototype.calculateLosses=function(){return this.losses.map(function(t){return t()})},Object.defineProperty(e.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"built",{get:function(){return this._built},set:function(t){this._built=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainable",{get:function(){return this.trainable_},set:function(t){this._trainableWeights.forEach(function(r){return r.trainable=t}),this.trainable_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable_?this._trainableWeights.filter(function(t){return t.trainable}):[]},set:function(t){this._trainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._trainableWeights.filter(function(t){return!t.trainable}).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(t){this._nonTrainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),e.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},e.prototype.assertInputCompatibility=function(t){if(t=_i(t),this.inputSpec!=null&&this.inputSpec.length!==0){var r=_i(this.inputSpec);if(t.length!==r.length)throw new Ke("Layer "+this.name+" expects "+r.length+" inputs, but it received "+t.length+" input tensors. Input received: "+t);for(var i=0;i<t.length;i++){var a=t[i],o=r[i];if(o!=null){var s=a.rank;if(o.ndim!=null&&s!==o.ndim)throw new Ke("Input "+i+" is incompatible with layer "+this.name+": expected ndim="+o.ndim+", found ndim="+s);if(o.maxNDim!=null&&s>o.maxNDim)throw new Ke("Input "+i+" is incompatible with layer "+this.name+": expected max_ndim="+o.maxNDim+", found ndim="+s);if(o.minNDim!=null&&s<o.minNDim)throw new Ke("Input "+i+" is incompatible with layer "+this.name+": expected min_ndim="+o.minNDim+", found ndim="+s+".");if(o.dtype!=null&&a.dtype!==o.dtype)throw new Ke("Input "+i+" is incompatible with layer "+this.name+" : expected dtype="+o.dtype+", found dtype="+a.dtype+".");if(o.axes){var u=a.shape;for(var l in o.axes){var h=Number(l),c=o.axes[l],f=h>=0?u[h]:u[u.length+h];if(c!=null&&[c,null].indexOf(f)===-1)throw new Ke("Input "+i+" is incompatible with layer "+this.name+": expected axis "+h+" of input shape to have value "+c+" but got shape "+u+".")}}if(o.shape!=null)for(var d=0;d<o.shape.length;++d){var p=o.shape[d],m=a.shape[d];if(p!=null&&m!=null&&p!==m)throw new Ke("Input "+i+" is incompatible with layer "+this.name+": expected shape="+o.shape+", found shape="+a.shape+".")}}}}},e.prototype.call=function(t,r){return t},e.prototype.invokeCallHook=function(t,r){this._callHook!=null&&this._callHook(t,r)},e.prototype.setCallHook=function(t){this._callHook=t},e.prototype.clearCallHook=function(){this._callHook=null},e.prototype.apply=function(t,r){var i=this;r=r||{},this.assertNotDisposed();for(var a=_i(t),o=!0,s=0,u=a;s<u.length;s++)if(!(u[s]instanceof Rf)){o=!1;break}for(var l=!0,h=0,c=a;h<c.length;h++)if(c[h]instanceof Rf){l=!1;break}if(o===l)throw new Ke("Arguments to apply() must be all SymbolicTensors or all Tensors");return Y0(this.name,function(){if(!i.built){i.assertInputCompatibility(t);for(var f=[],d=0,p=_i(t);d<p.length;d++){var m=p[d];f.push(m.shape)}i.build($o(f)),i.built=!0,i.initialWeights&&i.setWeights(i.initialWeights),i._refCount===null&&l&&(i._refCount=1)}if(i.assertInputCompatibility(t),l){for(var g=[],y=0,v=_i(S=i.call(t,r));y<v.length;y++){var b=v[y];a.indexOf(b)!==-1&&(b=b.clone()),g.push(b)}if(S=$o(g),i.activityRegularizer!=null)throw new Vn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return S}var w=Eqe(t),x=i.computeOutputShape(w),S=void 0,E=Tqe(t);if(i.warnOnIncompatibleInputShape(Array.isArray(t)?w[0]:w),S=x!=null&&x.length>0&&Array.isArray(x[0])?x.map(function(A,k){return new Rf(E,A,i,_i(t),r,i.name,k)}):new Rf(E,x,i,_i(t),r,i.name),i.addInboundNode(t,S,null,null,w,x,r),i._refCount++,i.activityRegularizer!=null)throw new Vn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return S})},e.prototype.warnOnIncompatibleInputShape=function(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var r=!1;this.batchInputShape.forEach(function(i,a){i!=null&&t[a]!=null&&t[a]!==i&&(r=!0)}),r&&console.warn("The shape of the input tensor ("+JSON.stringify(t)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(e.prototype,"outputShape",{get:function(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new vv("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var t=[],r=0,i=this.inboundNodes;r<i.length;r++){var a=i[r],o=JSON.stringify(a.outputShapes);t.indexOf(o)===-1&&t.push(o)}if(t.length===1){var s=this.inboundNodes[0].outputShapes;return Array.isArray(s)&&Array.isArray(s[0])&&s.length===1?s[0]:s}throw new vv("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),e.prototype.countParams=function(){if(!this.built)throw new Of("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return CO(this.weights)},e.prototype.build=function(t){this.built=!0},e.prototype.getWeights=function(t){return t===void 0&&(t=!1),rB(t?this.trainableWeights:this.weights)},e.prototype.setWeights=function(t){var r=this;Ze(function(){var i=r.weights;if(i.length!==t.length)throw new Ke('You called setWeights(weights) on layer "'+r.name+'" with a weight list of length '+t.length+", but the layer was expecting "+i.length+" weights. Provided weights: "+t+"...");if(i.length!==0){for(var a=[],o=rB(i),s=0;s<o.length;++s){var u=o[s],l=i[s],h=t[s];if(!gn.arraysEqual(u.shape,h.shape))throw new Ke("Layer weight shape "+u.shape+" not compatible with provided weight shape "+h.shape);a.push([l,h])}nj(a)}})},e.prototype.addWeight=function(t,r,i,a,o,s,u){if(this._addedWeightNames.indexOf(t)!==-1)throw new Ke("Duplicate weight name "+t+" for layer "+this.name);this._addedWeightNames.push(t),i==null&&(i="float32"),this.fastWeightInitDuringBuild&&(a=Ni("zeros"));var l=a.apply(r,i),h=new xqe(l,i,t,s,u);return l.dispose(),o!=null&&this.addLoss(function(){return o.apply(h.read())}),s==null&&(s=!0),s?this._trainableWeights.push(h):this._nonTrainableWeights.push(h),h},e.prototype.setFastWeightInitDuringBuild=function(t){this.fastWeightInitDuringBuild=t},e.prototype.addLoss=function(t){var r;t==null||Array.isArray(t)&&t.length===0||(t=_i(t),this._losses!==void 0&&this._losses!==null&&(r=this.losses).push.apply(r,t))},e.prototype.computeOutputShape=function(t){return t},e.prototype.computeMask=function(t,r){var i=this;if(!this.supportsMasking){if(r!=null){if(!Array.isArray(r))throw new TypeError("Layer "+this.name+" does not support masking, but was passed an inputMask.");r.forEach(function(a){if(a!=null)throw new TypeError("Layer "+i.name+" does not support masking, but was passed an inputMask.")})}return null}return r},e.prototype.addInboundNode=function(t,r,i,a,o,s,u){u===void 0&&(u=null);var l=_i(t);r=_i(r),i=_i(i),a=_i(a),o=SO(o),s=SO(s);for(var h=[],c=[],f=[],d=0,p=l;d<p.length;d++){var m=p[d];h.push(m.sourceLayer),c.push(m.nodeIndex),f.push(m.tensorIndex)}new p4({outboundLayer:this,inboundLayers:h,nodeIndices:c,tensorIndices:f,inputTensors:l,outputTensors:r,inputMasks:i,outputMasks:a,inputShapes:o,outputShapes:s},u);for(var g=0;g<r.length;g++)r[g].sourceLayer=this,r[g].nodeIndex=this.inboundNodes.length-1,r[g].tensorIndex=g},e.prototype.getConfig=function(){var t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t},e.prototype.disposeWeights=function(){return this.weights.forEach(function(t){return t.dispose()}),this.weights.length},e.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Layer '"+this.name+"' is already disposed.")},e.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(this._refCount===null)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var t=0;return--this._refCount==0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}},e}(St.Serializable);function Eqe(n){for(var e=[],t=0,r=n=_i(n);t<r.length;t++){var i=r[t];e.push(i.shape)}return $o(e)}function Tqe(n){return"float32"}function Ege(n,e,t){if((e==null||t!=null&&t>0)&&(e=n.sourceLayer,t=n.nodeIndex),e.inboundNodes.length===0)return[n];var r=e.inboundNodes[t];if(r.inboundLayers.length===0)return r.inputTensors;for(var i=[],a=0;a<r.inboundLayers.length;a++)for(var o=0,s=Ege(r.inputTensors[a],r.inboundLayers[a],r.nodeIndices[a]);o<s.length;o++){var u=s[o];i.indexOf(u)===-1&&i.push(u)}return i}var WQ,g4=function(n){function e(t){var r=n.call(this,{dtype:t.dtype,name:t.name!=null?t.name:d4("input").toString()})||this;if(t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new Ke("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var i=t.batchInputShape;if(i==null){if(t.inputShape==null)throw new Ke("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");i=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new Ke("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var a=t.dtype||"float32";r.batchInputShape=i,r.dtype=a,r.inputSpec=[{shape:i}];var o=new Rf(r.dtype,r.batchInputShape,r,[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new p4({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[i],outputShapes:[i]}),r}return mt(e,n),e.prototype.apply=function(t,r){throw new Ke("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},e.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},e.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},e.className="InputLayer",e}(ur);function Dqe(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new Ke("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var e=n.batchShape;n.shape!=null&&e==null&&(e=[null].concat(n.shape));var t=n.dtype;return t==null&&(t="float32"),new g4({batchInputShape:e,name:n.name,dtype:t,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}function Bg(n){return Rn(this,void 0,void 0,function(){var e,t,r,i,a,o,s,u;return Cn(this,function(l){switch(l.label){case 0:if(n==null)return[2];for(i in e=[],t=[],r=[],n)typeof(a=n[i])!="number"&&(o=a,e.push(o.data()),t.push(i),r.push(o));return e.length>0?[4,Promise.all(e)]:[3,2];case 1:for(s=l.sent(),u=0;u<s.length;++u)n[t[u]]=s[u][0];rr(r),l.label=2;case 2:return[2]}})})}function Tge(n){if(n!=null)for(var e in n){var t=n[e];typeof t!="number"&&t.dispose()}}St.registerClass(g4),function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"}(WQ||(WQ={}));var Aqe=125,ix=function(){function n(){this.validationData=null}return n.prototype.setParams=function(e){this.params=e},n.prototype.onEpochBegin=function(e,t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){return[2]})})},n.prototype.onEpochEnd=function(e,t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){return[2]})})},n.prototype.onBatchBegin=function(e,t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){return[2]})})},n.prototype.onBatchEnd=function(e,t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){return[2]})})},n.prototype.onTrainBegin=function(e){return Rn(this,void 0,void 0,function(){return Cn(this,function(t){return[2]})})},n.prototype.onTrainEnd=function(e){return Rn(this,void 0,void 0,function(){return Cn(this,function(t){return[2]})})},n.prototype.setModel=function(e){},n}(),kqe=function(){function n(e,t){t===void 0&&(t=10),e==null&&(e=[]),this.callbacks=e,this.queueLength=t}return n.prototype.append=function(e){this.callbacks.push(e)},n.prototype.setParams=function(e){for(var t=0,r=this.callbacks;t<r.length;t++)r[t].setParams(e)},n.prototype.setModel=function(e){for(var t=0,r=this.callbacks;t<r.length;t++)r[t].setModel(e)},n.prototype.onEpochBegin=function(e,t){return Rn(this,void 0,void 0,function(){var r,i;return Cn(this,function(a){switch(a.label){case 0:t==null&&(t={}),r=0,i=this.callbacks,a.label=1;case 1:return r<i.length?[4,i[r].onEpochBegin(e,t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},n.prototype.onEpochEnd=function(e,t){return Rn(this,void 0,void 0,function(){var r,i;return Cn(this,function(a){switch(a.label){case 0:t==null&&(t={}),r=0,i=this.callbacks,a.label=1;case 1:return r<i.length?[4,i[r].onEpochEnd(e,t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},n.prototype.onBatchBegin=function(e,t){return Rn(this,void 0,void 0,function(){var r,i;return Cn(this,function(a){switch(a.label){case 0:t==null&&(t={}),r=0,i=this.callbacks,a.label=1;case 1:return r<i.length?[4,i[r].onBatchBegin(e,t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},n.prototype.onBatchEnd=function(e,t){return Rn(this,void 0,void 0,function(){var r,i;return Cn(this,function(a){switch(a.label){case 0:t==null&&(t={}),r=0,i=this.callbacks,a.label=1;case 1:return r<i.length?[4,i[r].onBatchEnd(e,t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},n.prototype.onTrainBegin=function(e){return Rn(this,void 0,void 0,function(){var t,r;return Cn(this,function(i){switch(i.label){case 0:e==null&&(e={}),t=0,r=this.callbacks,i.label=1;case 1:return t<r.length?[4,r[t].onTrainBegin(e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},n.prototype.onTrainEnd=function(e){return Rn(this,void 0,void 0,function(){var t,r;return Cn(this,function(i){switch(i.label){case 0:e==null&&(e={}),t=0,r=this.callbacks,i.label=1;case 1:return t<r.length?[4,r[t].onTrainEnd(e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},n}(),Nqe=function(n){function e(){return n.call(this)||this}return mt(e,n),e.prototype.onEpochBegin=function(t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){return this.seen=0,this.totals={},[2]})})},e.prototype.onBatchEnd=function(t,r){return Rn(this,void 0,void 0,function(){var i,a,o,s,u=this;return Cn(this,function(l){for(s in r==null&&(r={}),i=r.size==null?0:r.size,this.seen+=i,a=function(h){var c=r[h];if(typeof c=="number")o.totals.hasOwnProperty(h)||(o.totals[h]=0),o.totals[h]=o.totals[h]+c*i;else{var f=void 0;h in o.totals?f=o.totals[h]:o.totals[h]=0;var d=Ze(function(){return qn(u.totals[h],rn(c,i))});o.totals[h]=d,f!=null&&f.dispose()}},o=this,r)a(s);return[2]})})},e.prototype.onEpochEnd=function(t,r){return Rn(this,void 0,void 0,function(){var i,a,o,s,u,l=this;return Cn(this,function(h){if(r!=null)for(i=function(c){if(a.totals[c]==null)return"continue";typeof a.totals[c]=="number"?r[c]=a.totals[c]/a.seen:Ze(function(){var f=rn(ya(1,l.seen),l.totals[c]);r[c]=f,l.totals[c].dispose(),kp(r[c])})},a=this,o=0,s=this.params.metrics;o<s.length;o++)u=s[o],i(u);return[2]})})},e}(ix),Oqe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.onTrainBegin=function(t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){return this.epoch=[],this.history={},[2]})})},e.prototype.onEpochEnd=function(t,r){return Rn(this,void 0,void 0,function(){var i;return Cn(this,function(a){for(i in r==null&&(r={}),this.epoch.push(t),r)this.history[i]==null&&(this.history[i]=[]),this.history[i].push(r[i]);return[2]})})},e.prototype.syncData=function(){return Rn(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,h;return Cn(this,function(c){switch(c.label){case 0:for(a in t=[],r=[],i=[],this.history)for(o=this.history[a],s=0;s<o.length;++s)typeof o[s]!="number"&&(u=o[s],t.push(u.data()),r.push(a),i.push(s));return[4,Promise.all(t)];case 1:for(l=c.sent(),h=0;h<l.length;++h)this.history[r[h]][i[h]].dispose(),this.history[r[h]][i[h]]=l[h][0];return[2]}})})},e}(ix),Rqe=function(n){function e(t,r){var i=n.call(this)||this;if(i.currentEpoch=0,i.yieldEvery=r||"auto",i.yieldEvery==="auto"&&(i.yieldEvery=Aqe),i.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return gn.isNumber(i.yieldEvery)&&(i.maybeWait=q$e(i.maybeWait.bind(i),i.yieldEvery)),i.trainBegin=t.onTrainBegin,i.trainEnd=t.onTrainEnd,i.epochBegin=t.onEpochBegin,i.epochEnd=t.onEpochEnd,i.batchBegin=t.onBatchBegin,i.batchEnd=t.onBatchEnd,i.yield=t.onYield,i}return mt(e,n),e.prototype.maybeWait=function(t,r,i){return Rn(this,void 0,void 0,function(){var a;return Cn(this,function(o){switch(o.label){case 0:return a=[],this.yield==null?[3,2]:[4,Bg(i)];case 1:o.sent(),a.push(this.yield(t,r,i)),o.label=2;case 2:return a.push(TM()),[4,Promise.all(a)];case 3:return o.sent(),[2]}})})},e.prototype.onEpochBegin=function(t,r){return Rn(this,void 0,void 0,function(){return Cn(this,function(i){switch(i.label){case 0:return this.currentEpoch=t,this.epochBegin==null?[3,3]:[4,Bg(r)];case 1:return i.sent(),[4,this.epochBegin(t,r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.onEpochEnd=function(t,r){return Rn(this,void 0,void 0,function(){var i;return Cn(this,function(a){switch(a.label){case 0:return i=[],this.epochEnd==null?[3,2]:[4,Bg(r)];case 1:a.sent(),i.push(this.epochEnd(t,r)),a.label=2;case 2:return this.yieldEvery==="epoch"&&i.push(TM()),[4,Promise.all(i)];case 3:return a.sent(),[2]}})})},e.prototype.onBatchBegin=function(t,r){return Rn(this,void 0,void 0,function(){return Cn(this,function(i){switch(i.label){case 0:return this.batchBegin==null?[3,3]:[4,Bg(r)];case 1:return i.sent(),[4,this.batchBegin(t,r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.onBatchEnd=function(t,r){return Rn(this,void 0,void 0,function(){var i;return Cn(this,function(a){switch(a.label){case 0:return i=[],this.batchEnd==null?[3,2]:[4,Bg(r)];case 1:a.sent(),i.push(this.batchEnd(t,r)),a.label=2;case 2:return this.yieldEvery==="batch"?i.push(TM()):gn.isNumber(this.yieldEvery)&&i.push(this.maybeWait(this.currentEpoch,t,r)),[4,Promise.all(i)];case 3:return a.sent(),[2]}})})},e.prototype.onTrainBegin=function(t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){switch(r.label){case 0:return this.trainBegin==null?[3,3]:[4,Bg(t)];case 1:return r.sent(),[4,this.trainBegin(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.onTrainEnd=function(t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){switch(r.label){case 0:return this.trainEnd==null?[3,3]:[4,Bg(t)];case 1:return r.sent(),[4,this.trainEnd(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e}(ix);function Dge(n,e){return n==null&&(n={}),n instanceof ix?[n]:Array.isArray(n)&&n[0]instanceof ix?n:_i(n).map(function(t){return new Rqe(t,e)})}var Iqe=function(){function n(){}return n.registerCallbackConstructor=function(e,t){gn.assert(e>=0&&Number.isInteger(e),function(){return"Verbosity level is expected to be an integer >= 0, but got "+e}),n.checkForDuplicate(t),n.constructors[e]==null&&(n.constructors[e]=[]),n.constructors[e].push(t)},n.checkForDuplicate=function(e){for(var t in n.constructors)n.constructors[+t].forEach(function(r){if(r===e)throw new Ke("Duplicate callback constructor.")})},n.clear=function(){n.constructors={}},n.createCallbacks=function(e){var t=[];for(var r in n.constructors){var i=+r;e>=i&&t.push.apply(t,n.constructors[i])}return t.map(function(a){return new a})},n.constructors={},n}();function Age(n,e,t,r,i,a,o,s,u){var l=new Oqe,h=[new Nqe].concat(Iqe.createCallbacks(e));n!=null&&h.push.apply(h,n),h.push(l);var c=new kqe(h);return c.setParams({epochs:t,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:e,doValidation:s,metrics:u}),{callbackList:c,history:l}}function vp(n,e,t){return e===void 0&&(e={}),t===void 0&&(t=!1),jD(n,St.SerializationMap.getMap().classNameMap,e,"layer",t)}function EO(n,e){return Ze(function(){n.dtype!=="float32"&&(n=n.asType("float32"));var t=Za(HD(n),e,!0),r=PD(t.shape,Fa()),i=ZI(zp(t,r));return ya(n,i)})}function m4(n,e){return Ze(function(){return Ia(HD(pa(e,n)),-1)})}function rj(n,e){return Ze(function(){return Ia(v1(pa(e,n)),-1)})}function ij(n,e){return Ze(function(){var t=pa(n,e),r=Iu(v1(n),Fa(),Number.MAX_VALUE),i=v1(ya(t,r));return rn(100,Ia(i,-1))})}function Fqe(n,e){return Ze(function(){var t=Iu(e,Fa(),Number.MAX_VALUE),r=Zm(qn(1,t)),i=Iu(n,Fa(),Number.MAX_VALUE),a=Zm(qn(1,i));return Ia(HD(pa(r,a)),-1)})}function Pqe(n,e){return Ze(function(){var t=zp(0,pa(1,rn(n,e)));return Ia(HD(t),-1)})}function Lqe(n,e){return Ze(function(){var t=zp(0,pa(1,rn(n,e)));return Ia(t,-1)})}function Mqe(n,e){return Ze(function(){var t=Za(rn(n,e),-1),r=w1(rn(pa(1,n),e),-1);return zp(0,qn(1,pa(r,t)))})}function Uqe(n,e){return Ze(function(){var t=Math.log(2),r=pa(e,n),i=pa(qn(r,QI(rn(-2,r))),t);return Ia(i,-1)})}function SE(n,e,t){return t===void 0&&(t=!1),Ze(function(){if(t)e=Cx(e);else{var r=Za(e,e.shape.length-1,!0);e=ya(e,r)}return e=Iu(e,Fa(),1-Fa()),F1(Za(rn(n.toFloat(),Zm(e)),e.shape.length-1))})}function TO(n,e){return Ze(function(){var t=sW(rqe(n)).toInt(),r=(e=Iu(e,Fa(),1-Fa())).shape;return SE(tx(t,r[r.length-1]).reshape(r),e,!1)})}function Bqe(n,e){if(!gn.arraysEqual(n.shape,e.shape))throw new Ke("logits and labels must have the same shape, but got shapes "+JSON.stringify(n.shape)+" and "+JSON.stringify(e.shape));return Ze(function(){var t=e.relu(),r=e.abs().neg();return t.sub(e.mul(n)).add(r.exp().log1p())})}function y4(n,e){return Ze(function(){var t;return t=Iu(e,Fa(),1-Fa()),t=Zm(ya(t,pa(1,t))),Ia(Bqe(n,t),-1)})}function zqe(n,e){return Ze(function(){var t=Iu(n,Fa(),1),r=Iu(e,Fa(),1);return Za(rn(n,Zm(ya(t,r))),-1)})}function Wqe(n,e){return Ze(function(){var t=Zm(qn(Fa(),e));return Ia(pa(e,rn(n,t)),-1)})}function kge(n,e){return Ze(function(){var t=EO(n,-1),r=EO(e,-1),i=rn(t,r);return F1(Za(i,-1))})}var DO={meanSquaredError:m4,meanAbsoluteError:rj,meanAbsolutePercentageError:ij,meanSquaredLogarithmicError:Fqe,squaredHinge:Pqe,hinge:Lqe,categoricalHinge:Mqe,logcosh:Uqe,categoricalCrossentropy:SE,sparseCategoricalCrossentropy:TO,binaryCrossentropy:y4,kullbackLeiblerDivergence:zqe,poisson:Wqe,cosineProximity:kge};function kM(n){if(typeof n=="string"){if(n in DO)return DO[n];var e="Unknown loss "+n;throw n.toLowerCase().includes("softmaxcrossentropy")&&(e="Unknown loss "+n+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Ke(e)}return n}function Nge(n,e){return Ze(function(){var t=rn(.5,gc(e)),r=qD(r4(e,t),n.dtype);return Ia(Dx(n,r),-1)})}function Oge(n,e){return Ze(function(){return qD(Dx(xO(n,-1),xO(e,-1)),"float32")})}function jqe(n,e){return Ze(function(){return yy(n.equal(1),e.equal(1)).sum().cast("float32")})}function $qe(n,e){return Ze(function(){return yy(n.equal(0),e.equal(1)).sum().cast("float32")})}function qqe(n,e){return Ze(function(){var t=jqe(n,e),r=$qe(n,e),i=t.add(r);return Np(r4(i,0),t.div(i),0).cast("float32")})}function Vqe(n,e){return y4(n,e)}function Hqe(n,e){return n.rank===e.rank&&(n=n.squeeze([n.rank-1])),(e=e.argMax(-1)).dtype!==n.dtype&&(e=e.asType(n.dtype)),Dx(n,e).asType("float32")}var Gqe=m4,Xqe=m4,Kqe=rj,Yqe=rj,Qqe=ij,Zqe=ij,Rge=SE,Jqe=kge,Ige=TO,AO={binaryAccuracy:Nge,categoricalAccuracy:Oge,precision:qqe,categoricalCrossentropy:Rge,sparseCategoricalCrossentropy:Ige,mse:Gqe,MSE:Xqe,mae:Kqe,MAE:Yqe,mape:Qqe,MAPE:Zqe,cosine:Jqe};function eVe(n){if(typeof n=="string"&&n in AO)return AO[n];if(typeof n!="string"&&n!=null)return n;throw new Ke("Unknown metric "+n)}function Uk(n){if(Af(n!==null,"Unknown LossOrMetricFn "+n),typeof n=="string")return n;for(var e=void 0,t=0,r=Object.keys(DO);t<r.length;t++){var i=r[t];if(DO[i]===n){e=i;break}}if(e!==void 0)return e;for(var a=0,o=Object.keys(AO);a<o.length;a++)if(i=o[a],AO[i]===n){e=i;break}return e!==void 0?e:n.name}function tVe(n){var e={Adagrad:function(){return Yb.adagrad(.01)},Adadelta:function(){return Yb.adadelta(1,.95,Fa())},Adam:function(){return Yb.adam(.001,.9,.999,Fa())},Adamax:function(){return Yb.adamax(.002,.9,.999,Fa(),0)},RMSProp:function(){return Yb.rmsprop(.001,.9,0,Fa())},SGD:function(){return Yb.sgd(.01)}};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,n in e)return e[n]();throw new Ke("Unknown Optimizer "+n)}var jQ=1048576;function $Q(n,e,t){if(t===void 0&&(t=!1),n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!iB(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){var r=JSON.stringify(n);r.length>jQ&&console.warn('User-defined metadata of model "'+e+'" is too large in size (length='+r.length+" when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+jQ+".")}}function iB(n){if(n===null)return!0;if(typeof n=="object"){if(Object.getPrototypeOf(n)===Object.prototype){for(var e=0,t=Object.keys(n);e<t.length;e++){var r=t[e];if(typeof r!="string"||!iB(n[r]))return!1}return!0}if(Array.isArray(n)){for(var i=0,a=n;i<a.length;i++)if(!iB(a[i]))return!1;return!0}return!1}var o=typeof n;return o==="string"||o==="number"||o==="boolean"}function nVe(n,e,t,r){r===void 0&&(r=console.log);var i,a=iVe(n),o=["Layer (type)","Output shape","Param #"];if(a?(e=e||65,t=t||[.45,.85,1]):(e=e||98,t=t||[.33,.55,.67,1]),t[t.length-1]<=1&&(t=t.map(function(f){return Math.floor(e*f)})),!a)for(var s in o.push("Receives inputs"),i=[],n.nodesByDepth)i.push.apply(i,n.nodesByDepth[s]);r("_".repeat(e)),kO(o,t,r),r("=".repeat(e));for(var u=n.layers,l=0;l<u.length;++l)a?aVe(u[l],t,r):sVe(u[l],t,i,r),r((l===u.length-1?"=":"_").repeat(e));n.checkTrainableWeightsConsistency();var h=rVe(n),c=CO(n.nonTrainableWeights);r("Total params: "+(h+c)),r("Trainable params: "+h),r("Non-trainable params: "+c),r("_".repeat(e))}function rVe(n){return n.collectedTrainableWeights!=null?CO(n.collectedTrainableWeights):CO(n.trainableWeights)}function iVe(n){var e=!0,t=[],r=[];for(var i in n.nodesByDepth)t.push(n.nodesByDepth[i]);for(var a=0,o=t;a<o.length;a++){var s=o[a];if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push.apply(r,s)}if(e)for(var u=0,l=n.layers;u<l.length;u++){for(var h=!1,c=0,f=l[u].inboundNodes;c<f.length;c++){var d=f[c];if(r.indexOf(d)!==-1){if(h){e=!1;break}h=!0}}if(!e)break}return e}function kO(n,e,t){t===void 0&&(t=console.log);for(var r="",i=0;i<n.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=n[i]).slice(0,e[i]),r+=" ".repeat(e[i]-r.length);t(r)}function aVe(n,e,t){var r;try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}kO([n.name+" ("+n.getClassName()+")",r,n.countParams().toString()],e,t)}function sVe(n,e,t,r){var i;try{i=JSON.stringify(n.outputShape)}catch{i="multiple"}for(var a=[],o=0,s=n.inboundNodes;o<s.length;o++){var u=s[o];if(!(t!=null&&t.length>0&&t.indexOf(u)===-1))for(var l=0;l<u.inboundLayers.length;++l){var h=u.inboundLayers[l].name,c=u.nodeIndices[l],f=u.tensorIndices[l];a.push(h+"["+c+"]["+f+"]")}}var d=n.name,p=n.getClassName(),m=a.length===0?"":a[0];for(kO([d+" ("+p+")",i,n.countParams().toString(),m],e,r),l=1;l<a.length;++l)kO(["","","",a[l]],e,r)}function Fge(n,e,t){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&e===0&&typeof t=="string"}function aB(n,e){if(n===null)return null;if(typeof n=="string")return Ev(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){for(var t=[],r=n.length,i=0;i<r;++i){var a=n[i];Fge(e,i,a)?t.push(a):t.push(aB(a,e))}return t}for(var o={},s=0,u=Object.keys(n);s<u.length;s++){var l=u[s],h=n[l];if(l==="name"&&typeof h=="string")o[l]=h;else{var c=Ev(l);o[c]=aB(h,c)}}return o}function sB(n,e){if(n==null)return null;if(typeof n=="string")return Pd(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){for(var t=[],r=n.length,i=0;i<r;++i){var a=n[i];Fge(e,i,a)?t.push(a):t.push(sB(a,e))}return t}for(var o={},s=0,u=Object.keys(n);s<u.length;s++){var l=u[s],h=n[l],c=Pd(l);o[c]=l!=="name"&&l!=="className"||typeof h!="string"?sB(h,l):h}return o}var Pge="1.7.4";function oVe(n,e){if(n.dtype==null||n.dtype===e.dtype)return e;try{return iW(e,n.dtype)}catch{throw new Ke("The dtype of the feed ("+e.dtype+") can not be cast to the dtype of the key '"+n.name+"' ("+n.dtype+").")}}var g2=function(){function n(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof n)for(var t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(var r=0,i=e;r<i.length;r++){var a=i[r];this.add(a.key,a.value)}}}return n.prototype.add=function(e,t,r){if(this.id2Value[e.id]!=null)throw new Ke("Duplicate key: name="+e.name+", id="+e.id);return this.id2Value[e.id]=oVe(e,t),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r),this},n.prototype.addFeed=function(e){this.add(e.key,e.value)},n.prototype.hasKey=function(e){return this.id2Value[e.id]!=null},n.prototype.names=function(){return Object.keys(this.name2Id)},n.prototype.getValue=function(e){if(e instanceof Rf){if(this.id2Value[e.id]==null)throw new Ke("Nonexistent key: "+e.name);return this.id2Value[e.id]}var t=this.name2Id[e];if(t==null)throw new Ke("Feed dict has no SymbolicTensor name: "+e);return this.id2Value[t]},n.prototype.getMask=function(e){if(e instanceof Rf){if(this.id2Value[e.id]==null)throw new Ke("Nonexistent key: "+e.name);return this.id2Mask[e.id]}var t=this.name2Id[e];if(t==null)throw new Ke("Feed dict has no SymbolicTensor name: "+e);return this.id2Mask[t]},n.prototype.disposeMasks=function(){this.id2Mask!=null&&rr(this.id2Mask)},n}(),NM={},qQ={};function wC(n,e,t,r){for(var i=t!=null&&t.training,a=Array.isArray(n),o=a?n:[n],s=o.map(function(j){return j.name}),u=[],l=e.names(),h=0,c=s;h<c.length;h++){var f=c[h];l.indexOf(f)!==-1?u.push(e.getValue(f)):u.push(null)}var d,p,m=s.join(",")+"|"+e.names().join(",");if(NM[m]==null){var g=uVe(o,e);d=g.sorted,p=g.recipientCounts,NM[m]=d,qQ[m]=p}d=NM[m],p={},i||Object.assign(p,qQ[m]);for(var y=new g2(e),v=0;v<d.length;++v){var b=d[v],w=b.sourceLayer;if(!(w instanceof g4)){for(var x=[],S=[],E=[],A=!1,k=0,T=b.inputs;k<T.length;k++){var O=T[k],F=y.getValue(O),I=y.getMask(O);x.push(F),S.push(I),I!=null&&(A=!0),i||(p[O.name]--,p[O.name]!==0||e.hasKey(O)||s.indexOf(O.name)!==-1||F.isDisposed||O.sourceLayer.stateful===!0||E.push(F))}A&&((t=t||{}).mask=S[0]);var R=_i(w.apply(x,t)),U=null;w.supportsMasking&&(U=w.computeMask(x,S));for(var B=cVe(b),W=Array.isArray(B)?B:[B],Y=0;Y<W.length;++Y){y.hasKey(W[Y])||y.add(W[Y],R[Y],Array.isArray(U)?U[0]:U);var z=s.indexOf(W[Y].name);z!==-1&&(u[z]=R[Y])}i||rr(E)}}return y.disposeMasks(),a?u:u[0]}function uVe(n,e){gn.assert(n!=null&&n.length>0,function(){return"Expected at least one fetch, got none"});var t=[],r={};if(n.length===1){var i=VQ(n[0],e);t=i.sorted,r=i.recipientMap}else for(var a=new Set,o=0,s=n;o<s.length;o++){for(var u=VQ(s[o],e),l=u.sorted,h=u.recipientMap,c=0,f=l;c<f.length;c++){var d=f[c];a.has(d.name)||(t.push(d),a.add(d.name))}var p=function(g){r[g]==null&&(r[g]=new Set),h[g].forEach(function(y){return r[g].add(y)})};for(var m in h)p(m)}return{sorted:t,recipientCounts:lVe(r)}}function lVe(n){var e={};for(var t in n)e[t]=n[t].size;return e}function VQ(n,e){for(var t=new Set,r=[],i={},a=0,o=e.names();a<o.length;a++){var s=o[a];t.add(s)}var u=[],l=[];for(u.push(n);u.length>0;){var h=u[u.length-1];if(t.has(h.name))u.pop();else{var c=l[l.length-1]===u.length-1;if(h.inputs.length===0||c)u.pop(),r.push(h),t.add(h.name),c&&l.pop();else{l.push(u.length-1);for(var f=0,d=h.inputs;f<d.length;f++){var p=d[f];i[p.name]==null&&(i[p.name]=new Set),i[p.name].add(h.name),t.has(p.name)||u.push(p)}}}}return{sorted:r,recipientMap:i}}function cVe(n){var e;if(n.sourceLayer.inboundNodes.length===1)e=n.sourceLayer.output;else{for(var t=null,r=0;r<n.sourceLayer.inboundNodes.length;++r)for(var i=0,a=n.sourceLayer.inboundNodes[r].outputTensors;i<a.length;i++)if(a[i].id===n.id){t=r;break}e=n.sourceLayer.getOutputAt(t)}return e}var hVe=function(n){function e(t){var r=n.call(this,{})||this;if(r.containerNodes=new Set,r.name=t.name,r.name==null){var i=r.getClassName().toLowerCase();r.name=d4(i)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(t.inputs)?r.inputs=t.inputs.slice():r.inputs=[t.inputs],Array.isArray(t.outputs)?r.outputs=t.outputs.slice():r.outputs=[t.outputs],Mm(r.inputs).length!==r.inputs.length)throw new Ke("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map(function(me){return me.name}));Mm(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map(function(me){return me.name})),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];for(var a=0,o=r.outputs;a<o.length;a++){var s=(T=o[a]).sourceLayer,u=T.nodeIndex,l=T.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}for(var h=0,c=r.inputs;h<c.length;h++)s=(T=c[h]).sourceLayer,u=T.nodeIndex,l=T.tensorIndex,Af(u===0,"input layer has >1 nodes"),Af(l===0,"input layer has >1 tensors"),r.inputLayers.push(s),r.inputLayersNodeIndices.push(u),r.inputLayersTensorIndices.push(l);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var f=0;f<r.inputLayers.length;f++){if(!((s=r.inputLayers[f])instanceof g4))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: "+t.inputs+". Input "+f+" (0-based) originates from layer type "+s.getClassName()+".");r.inputNames.push(s.name),r.feedInputShapes.push(s.batchInputShape),r.feedInputNames.push(s.name)}for(var d=0,p=r.outputLayers;d<p.length;d++)s=p[d],r.outputNames.push(s.name);r.internalInputShapes=r.inputs.map(function(me){return me.shape}),r.internalOutputShapes=r.outputs.map(function(me){return me.shape});for(var m={},g={},y={},v={},b={},w=[],x=function(me,Se,Re,je,rt,at){je!=null&&rt!=null&&at!=null||(je=me.sourceLayer,rt=me.nodeIndex,at=me.tensorIndex);var yt=je.inboundNodes[rt];if(Re.indexOf(yt)!==-1)throw new Of("The tensor "+me.name+' at layer "'+je.name+'" is part of a cycle.');if(Se.indexOf(yt)===-1){r.containerNodes.add(e.nodeKey(je,rt)),je.id in b||(b[je.id]=Object.keys(b).length),Re.indexOf(yt)===-1&&Re.push(yt);for(var pt=yt.inboundLayers.length,Le=0;Le<pt;Le++){var tt=yt.inputTensors[Le],ft=yt.inboundLayers[Le],Et=yt.nodeIndices[Le],xt=yt.tensorIndices[Le];x(tt,Se,Re,ft,Et,xt)}for(Se.push(yt);Re.indexOf(yt)>=0;)Re.splice(Re.indexOf(yt),1);w.push(yt)}},S=[],E=[],A=0,k=r.outputs;A<k.length;A++){var T=k[A];x(T,S,E)}for(var O=0,F=w.slice().reverse();O<F.length;O++){g[(G=F[O]).id]=G,G.id in m||(m[G.id]=0);var I=m[G.id],R=y[G.outboundLayer.id]==null?0:y[G.outboundLayer.id];for(I=Math.max(I,R),y[G.outboundLayer.id]=I,v[G.outboundLayer.id]=G.outboundLayer,m[G.id]=I,f=0;f<G.inboundLayers.length;f++){var U=G.inboundLayers[f],B=(u=G.nodeIndices[f],U.inboundNodes[u]),W=m[B.id]==null?0:m[B.id];m[B.id]=Math.max(I+1,W),g[B.id]=B}}var Y={};for(var z in m)(I=m[z])in Y||(Y[I]=[]),Y[I].push(g[z]);var j={};for(var M in y)(I=y[M])in j||(j[I]=[]),j[I].push(v[M]);var q=Object.keys(j).map(function(me){return parseInt(me,10)}).sort(Pk);r.layers=[];for(var H=0,K=q;H<K.length;H++){var Z=j[I=K[H]];Z.sort(function(me,Se){var Re=b[me.id],je=b[Se.id];return Re<je?-1:Re>je?1:0});for(var J=0,X=Z;J<X.length;J++)(s=X[J])instanceof e&&r.internalContainerRefs.push(s),r.layers.push(s)}r.layersByDepth=j,q=Object.keys(Y).map(function(me){return parseInt(me,10)}).sort(Pk);for(var ae=r.inputs.slice(),ie=[],ce=0,ge=q;ce<ge.length;ce++)for(var Ce=0,Ee=Y[I=ge[ce]];Ce<Ee.length;Ce++){var G;if((s=(G=Ee[Ce]).outboundLayer)!=null){for(var de=0,ye=G.inputTensors;de<ye.length;de++)if(T=ye[de],ae.indexOf(T)===-1)throw new Of("Graph disconnected: cannot obtain value for tensor "+T+' at layer "'+s.name+'". The following previous layers were accessed without issue: '+ie);for(var le=0,ne=G.outputTensors;le<ne.length;le++)T=ne[le],ae.push(T);ie.push(s.name)}}r.nodesByDepth=Y;for(var fe=r.layers.map(function(me){return me.name}),Ne=function(me){var Se=fe.filter(function(Re){return Re===me}).length;if(Se!==1)throw new Of('The name "'+me+'" is used '+Se+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(fe))},Ae=0,ue=fe;Ae<ue.length;Ae++)Ne(ue[Ae]);return r.outboundNodes=[],r.inboundNodes=[],new p4({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map(function(me){return null}),outputMasks:r.outputs.map(function(me){return null}),inputShapes:r.inputs.map(function(me){return me.shape}),outputShapes:r.outputs.map(function(me){return me.shape})}),r.built=!0,r._refCount=1,r}return mt(e,n),e.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Container '"+this.name+"' is already disposed.")},e.prototype.dispose=function(){this.assertNotDisposed();var t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount==0){for(var r=0,i=this.layers;r<i.length;r++){var a=i[r];t.numDisposedVariables+=a.dispose().numDisposedVariables}for(var o=0,s=this.internalContainerRefs;o<s.length;o++){var u=s[o];t.numDisposedVariables+=u.dispose().numDisposedVariables}}return t.refCountAfterDispose=this._refCount,t},Object.defineProperty(e.prototype,"trainable",{get:function(){return this.trainable_},set:function(t){this.layers.forEach(function(r){r._trainableWeights.forEach(function(i){return i.trainable=t})}),this.trainable_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new Ke("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var t=[],r=0,i=this.layers;r<i.length;r++){var a=i[r];t=t.concat(a.trainableWeights)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],r=0,i=this.layers;r<i.length;r++){var a=i[r];t.push.apply(t,a.nonTrainableWeights)}if(!this.trainable){for(var o=[],s=0,u=this.layers;s<u.length;s++)a=u[s],o.push.apply(o,a.trainableWeights);return o.concat(t)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.loadWeights=function(t,r){r===void 0&&(r=!0);for(var i={},a=0,o=0,s=this.layers;o<s.length;o++)for(var u=0,l=s[o].weights;u<l.length;u++){var h=l[u];if(i[h.originalName]!=null)throw new Ke("Duplicate weight name: "+h.originalName);i[h.originalName]=h,a++}var c=[];for(var f in t){if(i[f]!=null)c.push([i[f],t[f]]);else if(r)throw new Ke("Provided weight data has no target variable: "+f);delete i[f]}if(r){var d=[];for(var p in i)d.push(p);if(d.length>0)throw new Ke(d.length+" of "+a+" weights are not set: "+d)}nj(c)},e.prototype.updatedConfig=function(){var t=this.getConfig(),r={};return r.className=this.getClassName(),r.config=t,r.kerasVersion="tfjs-layers "+Pge,r.backend="TensorFlow.js",r},e.prototype.toJSON=function(t,r){r===void 0&&(r=!0);var i=sB(this.updatedConfig());return r?JSON.stringify(i):i},e.prototype.call=function(t,r){var i=this;return Ze(function(){t=_i(t);for(var a=new g2,o=0;o<i.inputs.length;++o)a.add(i.inputs[o],t[o]);return wC(i.outputs,a,r)})},e.prototype.computeMask=function(t,r){var i=this;return Ze(function(){var a;return t=_i(t),a=r==null?_1(null,t.length):_i(r),i.runInternalGraph(t,a)[1]})},e.prototype.computeOutputShape=function(t){var r=SO(t);if(r.length!==this.inputLayers.length)throw new Ke("Invalid inputShape argument "+t+": model has "+this.inputLayers.length+" tensor inputs.");for(var i={},a=0;a<r.length;a++){var o=this.inputLayers[a],s=r[a];i[k=o.name+"_0_0"]=s}var u=Object.keys(this.nodesByDepth).map(function(O){return parseInt(O,10)}).sort(Pk);if(u.length>1)for(var l=0,h=u;l<h.length;l++)for(var c=h[l],f=0,d=this.nodesByDepth[c];f<d.length;f++){var p=d[f];if(o=p.outboundLayer,this.inputLayers.map(function(O){return O.id}).indexOf(o.id)===-1){for(var m=[],g=0;g<p.inboundLayers.length;g++){var y=p.inboundLayers[g],v=p.nodeIndices[g],b=p.tensorIndices[g],w=i[k=y.name+"_"+v+"_"+b];m.push(w)}var x=SO(o.computeOutputShape($o(m))),S=o.inboundNodes.indexOf(p);for(g=0;g<x.length;g++)i[k=o.name+"_"+S+"_"+g]=x[g]}}var E=[],A=[];for(a=0;a<this.outputLayers.length;a++){o=this.outputLayers[a],S=this.outputLayersNodeIndices[a],b=this.outputLayersTensorIndices[a];var k=o.name+"_"+S+"_"+b;A.push(k)}for(a=0;a<A.length;a++){var T=A[a];Af(T in i),E.push(i[T])}return $o(E)},e.prototype.runInternalGraph=function(t,r){r==null&&(r=_1(null,t.length));for(var i={},a=0;a<this.inputs.length;++a){var o=this.inputs[a],s=t[a],u=r[a];i[o.id]=[s,u]}for(var l=0,h=Object.keys(this.nodesByDepth).map(function(j){return parseInt(j,10)}).sort(Pk);l<h.length;l++)for(var c=h[l],f=0,d=this.nodesByDepth[c];f<d.length;f++){for(var p=d[f],m=p.outboundLayer,g=p.inputTensors,y=p.outputTensors,v=new Array,b=0,w=g;b<w.length;b++)(o=w[b]).id in i&&v.push(i[o.id]);if(v.length===g.length){var x={},S=void 0,E=void 0,A=void 0,k=void 0;if(p.callArgs!=null&&(x=p.callArgs),v.length===1){var T=v[0],O=T[0],F=T[1];x.mask==null&&(x.mask=F),A=_i(m.call(O,x)),k=_i(m.computeMask(O,F)),S=[O],E=[F]}else S=v.map(function(j){return j[0]}),E=v.map(function(j){return j[1]}),x.mask==null&&(x.mask=E),A=_i(m.call(S,x)),k=_i(m.computeMask(S,E));if(m.activityRegularizer)throw new Vn("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(a=0;a<y.length;++a)o=y[a],s=A[a],u=k[a],i[o.id]=[s,u]}}for(var I=[],R=[],U=[],B=0,W=this.outputs;B<W.length;B++){Af((o=W[B]).id in i,"Could not compute output "+o.name+" : "+o.id);var Y=i[o.id],z=Y[0];u=Y[1],U.push(z.shape),I.push(z),R.push(u)}return[I,R,U]},e.prototype.buildNodeConversionMap=function(t){for(var r,i={},a=0,o=this.layers;a<o.length;a++){var s=o[a];r=s instanceof e?1:0;for(var u=0;u<s.inboundNodes.length;u++){var l=e.nodeKey(s,u);this.containerNodes.has(l)&&(i[l]=r,r+=1)}}return i},e.prototype.getLayer=function(t,r){if(r!=null){if(this.layers.length<=r)throw new Ke("Was asked to retrieve layer at index "+r+", but model only has "+this.layers.length+" layer(s).");return this.layers[r]}if(t==null)throw new Ke("Provide either a layer name or layer index");for(var i=0,a=this.layers;i<a.length;i++){var o=a[i];if(o.name===t)return o}throw new Ke("No such layer: "+t)},e.prototype.calculateLosses=function(){var t=this;return Ze(function(){for(var r=[],i=0,a=t.layers;i<a.length;i++)for(var o=a[i],s=0;s<o.inboundNodes.length;++s){var u=e.nodeKey(o,s);t.containerNodes.has(u)&&r.push.apply(r,o.calculateLosses())}return r})},e.prototype.getConfig=function(){for(var t={name:this.name},r=this.buildNodeConversionMap(this.layers),i=[],a=0,o=this.layers;a<o.length;a++){for(var s=(x=o[a]).getClassName(),u=x.getConfig(),l=[],h=0;h<x.inboundNodes.length;h++){var c=x.inboundNodes[h],f=e.nodeKey(x,h),d={};if(this.containerNodes.has(f)){if(c.callArgs)try{JSON.stringify(c.callArgs),d=c.callArgs}catch{console.warn("Layer "+x.name+" was passed non-serializable keyword arguments: "+c.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),d={}}if(c.inboundLayers.length>0){for(var p=[],m=0;m<c.inboundLayers.length;m++){var g=c.inboundLayers[m],y=c.nodeIndices[m],v=c.tensorIndices[m];(E=r[e.nodeKey(g,y)])==null&&(E=0),p.push([g.name,E,v,d])}l.push(p)}}}var b={};b.name=x.name,b.className=s,b.config=u,b.inboundNodes=l,i.push(b)}t.layers=i;var w=[];for(m=0;m<this.inputLayers.length;m++){var x=this.inputLayers[m];y=this.inputLayersNodeIndices[m],f=e.nodeKey(x,y),this.containerNodes.has(f)&&((E=r[f])!==null&&E!==void 0||(E=0),v=this.inputLayersTensorIndices[m],w.push([x.name,E,v]))}t.inputLayers=w;var S=[];for(m=0;m<this.outputLayers.length;m++)if(x=this.outputLayers[m],y=this.outputLayersNodeIndices[m],f=e.nodeKey(x,y),this.containerNodes.has(f)){var E;(E=r[f])!==null&&E!==void 0||(E=0),v=this.outputLayersTensorIndices[m],S.push([x.name,E,v])}return t.outputLayers=S,t},e.fromConfig=function(t,r,i,a){a===void 0&&(a=!1);var o={},s={};function u(B,W){B.name in s?s[B.name].push(W):s[B.name]=[W]}function l(B,W){for(var Y,z=[],j=0,M=W;j<M.length;j++){var q=M[j],H=q[0],K=q[1],Z=q[2];if(Y=q[3]==null?{}:q[3],!(H in o))return void u(B,W);var J=o[H];if(J.inboundNodes.length<=K)return void u(B,W);var X=J.inboundNodes[K];z.push(X.outputTensors[Z])}z.length>0&&B.apply($o(z),Y)}function h(B){var W=B.name,Y=vp(B,r.customObjects!=null?r.customObjects:{});Y.setFastWeightInitDuringBuild(a),o[W]=Y,B.inboundNodes.forEach(function(z){if(!(z instanceof Array))throw new Ke("Corrupted configuration, expected array for nodeData: "+z);u(Y,z)})}for(var c=r.name,f=r.layers,d=0,p=f;d<p.length;d++)h(y=p[d]);for(;!$$e(s);)for(var m=0,g=f;m<g.length;m++){var y=g[m];if((U=o[y.name]).name in s){var v=s[U.name];delete s[U.name];for(var b=0,w=v;b<w.length;b++)l(U,w[b])}}for(var x=[],S=[],E=0,A=r.inputLayers;E<A.length;E++){var k=(y=A[E])[0],T=y[1],O=y[2];Af(k in o);var F=(U=o[k]).inboundNodes[T].outputTensors;x.push(F[O])}for(var I=0,R=r.outputLayers;I<R.length;I++){k=(y=R[I])[0],T=y[1],O=y[2],Af(k in o);var U;F=(U=o[k]).inboundNodes[T].outputTensors,S.push(F[O])}return new t({inputs:x,outputs:S,name:c})},Object.defineProperty(e.prototype,"stateful",{get:function(){if(this._stateful)throw new Ke("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var t=0,r=this.layers;t<r.length;t++)if(r[t].stateful)return!0;return!1},enumerable:!0,configurable:!0}),e.prototype.resetStates=function(){var t=this;Ze(function(){t.layers.forEach(function(r){r.stateful&&r.resetStates()})})},e}(ur);function fVe(n,e,t){var r=e.length;if(n==null||Array.isArray(n)&&n.length===0)return e.map(function(a){return null});if(r===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&e[0]in n?[n[e[0]]]:[n];if(Array.isArray(n)){if(n.length!==r)throw new Error("Provided "+t+" is an array of "+n.length+" element(s), but the model has "+r+" outputs. Make sure a set of weights is provided for each model output.");return n}if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){var i=[];return e.forEach(function(a){a in n?i.push(n[a]):i.push(null)}),i}throw new Error("The model has multiple ("+r+") outputs, so "+t+" must be either an array with "+r+" elements or an object with "+e+" keys. Provided "+t+" not understood: "+JSON.stringify(n))}function Lge(n,e){return fVe(n,e,"classWeight")}function Mge(n,e,t,r){return Rn(this,void 0,void 0,function(){var i,a,o,s,u;return Cn(this,function(l){switch(l.label){case 0:return t==null?[3,2]:(i=Ze(function(){if(n.shape.length===1)return n.clone();if(n.shape.length===2){if(n.shape[1]>1)return n.argMax(1);if(n.shape[1]===1)return n.reshape([n.shape[0]]);throw new Error("Encountered unexpected last-dimension size ("+n.shape[1]+") during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor ("+n.rank+") during handling of class weights. The rank is expected to be 1 or 2.")}),s=(o=Array).from,[4,i.data()]);case 1:return a=s.apply(o,[l.sent()]),rr(i),u=[],a.forEach(function(h){if(t[h]==null)throw new Error("classWeight must contain all classes in the training data. The class "+h+" exists in the data but not in classWeight");u.push(t[h])}),[2,Ru(u,"float32")];case 2:return[2,null]}})})}function dVe(n,e){return rn(n,e)}var pVe=32;function Uge(n,e){var t,r,i=e;t=i.xs,r=i.ys,gn.assert(t!=null&&r!=null,function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+e});var a=HQ("input",n.inputNames,t),o=HQ("output",n.outputNames,r),s=a[0].shape[0];gn.assert(a.length===n.inputs.length,function(){return"LayersModel has "+n.inputs.length+" inputs, but the dataset provides "+a.length+" inputs.  (Expected input keys: "+JSON.stringify(n.inputNames)+")"}),gn.assert(o.length===n.outputs.length,function(){return"LayersModel has "+n.outputs.length+" outputs, but the dataset provides "+o.length+" outputs.  (Expected output keys: "+JSON.stringify(n.outputNames)+")"});for(var u=function(f){gn.assert(a[f].shape[0]===s,function(){return"Batch size mismatch: input "+n.inputNames[f]+" has "+a[f].shape[0]+"; expected  "+s+" based on input "+n.inputNames[0]+"."})},l=0;l<a.length;l++)u(l);for(var h=function(f){gn.assert(o[f].shape[0]===s,function(){return"Batch size mismatch: output "+n.outputNames[f]+" has "+o[f].shape[0]+"; expected  "+s+" based on input "+n.inputNames[0]+"."})},c=0;c<o.length;c++)h(c);return{xs:a,ys:o}}function HQ(n,e,t){if(t instanceof cr)return[t];if(Array.isArray(t))return gn.assert(t.length===e.length,function(){return"Received an array of "+t.length+" Tensors, but expected "+e.length+" to match the "+n+" keys "+e+"."}),t;for(var r=[],i=0,a=e;i<a.length;i++){var o=a[i];if(t[o]==null)throw new Ke("The feature data generated by the dataset lacks the required "+n+" key '"+o+"'.");r.push(t[o])}return r}function gVe(n){if(n.length===3)throw new Vn("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}function mVe(n,e,t){return Rn(this,void 0,void 0,function(){var r,i,a,o,s,u,l,h,c,f,d,p,m,g,y,v,b,w,x,S,E,A,k,T,O,F,I,R,U,B,W,Y,z,j;return Cn(this,function(M){switch(M.label){case 0:if(r=t.batchesPerEpoch!=null,gn.assert(n.optimizer!=null,function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."}),gn.assert(t!=null,function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."}),gn.assert(t.epochs!=null&&t.epochs>0&&Number.isInteger(t.epochs),function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got "+t.epochs}),gn.assert(!r||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+t.batchesPerEpoch}),gn.assert(t.validationSplit==null,function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."}),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0,M.label=1;case 1:return M.trys.push([1,,26,27]),i=t.validationData!=null,a=void 0,o=void 0,i&&(GQ(t.validationData)?gn.assert(t.validationBatches==null||t.validationBatches>0&&Number.isInteger(t.validationBatches),function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+t.validationBatches}):(s=gVe(t.validationData),a=s.xs,o=s.ys)),u=n.makeTrainFunction(),l=n.getDedupedMetricsNames(),h=void 0,h=i?l.slice().concat(l.map(function(q){return"val_"+q})):l.slice(),c=Dge(t.callbacks,t.yieldEvery),f=t.verbose==null?1:t.verbose,d=Age(c,f,t.epochs,null,null,yVe(e,t),null,i,h),p=d.callbackList,m=d.history,p.setModel(n),n.history=m,[4,p.onTrainBegin()];case 2:return M.sent(),n.stopTraining_=!1,g=t.initialEpoch==null?0:t.initialEpoch,[4,e.iterator()];case 3:y=M.sent(),M.label=4;case 4:return g<t.epochs?(v={},[4,p.onEpochBegin(g)]):[3,23];case 5:return M.sent(),b=0,w=0,r?[3,7]:[4,e.iterator()];case 6:y=M.sent(),M.label=7;case 7:return!r||b<t.batchesPerEpoch?[4,y.next()]:[3,21];case 8:return x=M.sent(),r&&x.done?(console.warn("You provided `batchesPerEpoch` as "+t.batchesPerEpoch+", but your dataset iterator ran out of data after "+b+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+t.batchesPerEpoch*t.epochs+" batches). You may need to use the repeat() function when building your dataset."),[3,21]):x.value==null?[3,15]:(S=Uge(n,x.value),E=S.xs,A=S.ys,(k={}).batch=w,k.size=E[0].shape[0],[4,p.onBatchBegin(w,k)]);case 9:if(M.sent(),T=[],t.classWeight==null)return[3,13];O=Lge(t.classWeight,n.outputNames),j=0,M.label=10;case 10:return j<O.length?(I=(F=T).push,[4,Mge(A[j],null,O[j])]):[3,13];case 11:I.apply(F,[M.sent()]),M.label=12;case 12:return++j,[3,10];case 13:for(R=E.concat(A).concat(T),U=u(R),rr(R),j=0;j<l.length;++j)B=l[j],W=U[j],k[B]=W,kp(W);return[4,p.onBatchEnd(w,k)];case 14:M.sent(),Tge(k),w++,b++,M.label=15;case 15:return(r?b>=t.batchesPerEpoch:x.done)?i?(Y=void 0,GQ(t.validationData)?(z=_i,[4,n.evaluateDataset(t.validationData,{batches:t.validationBatches})]):[3,17]):[3,19]:[3,20];case 16:return Y=z.apply(void 0,[M.sent()]),[3,18];case 17:Y=_i(n.evaluate(a,o,{batchSize:t.validationBatchSize==null?pVe:t.validationBatchSize,verbose:0})),M.label=18;case 18:for(j=0;j<n.metricsNames.length;++j)v["val_"+n.metricsNames[j]]=Y[j];M.label=19;case 19:return[3,21];case 20:return n.stopTraining_?[3,21]:[3,7];case 21:return[4,p.onEpochEnd(g,v)];case 22:return M.sent(),g++,n.stopTraining_?[3,23]:[3,4];case 23:return[4,p.onTrainEnd()];case 24:return M.sent(),[4,n.history.syncData()];case 25:return M.sent(),[2,n.history];case 26:return n.isTraining=!1,[7];case 27:return[2]}})})}function yVe(n,e){var t=null;return e.batchesPerEpoch!=null?t=e.batchesPerEpoch:Number.isFinite(n.size)&&(t=n.size),t}function GQ(n){return typeof n.iterator=="function"}function vVe(n){return typeof n.next=="function"}function bVe(n,e,t){return Rn(this,void 0,void 0,function(){var r,i,a,o,s,u,l,h,c,f;return Cn(this,function(d){switch(d.label){case 0:if(r=(t=t||{}).batches!=null,i=n.testFunction,a=[],t.verbose>0)throw new Vn("Verbose mode is not implemented yet.");return gn.assert(!r||t.batches>0&&Number.isInteger(t.batches),function(){return"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(t.batches)}),vVe(e)?(s=e,[3,3]):[3,1];case 1:return[4,e.iterator()];case 2:s=d.sent(),d.label=3;case 3:o=s,u=0,l=0,h=function(){var p;return Cn(this,function(m){switch(m.label){case 0:return[4,o.next()];case 1:return p=m.sent(),a=Ze(function(){if(p.value){var g=Uge(n,p.value),y=g.xs,v=g.ys,b=y.concat(v),w=Ze(function(){return i(b)});if(rr(b),l===0)for(var x=0;x<w.length;++x)a.push(jt(0));var S=b[0].shape[0],E=function(A){var k=w[A],T=a[A];a[A]=Ze(function(){return qn(a[A],rn(S,k))}),l>0&&rr(T)};for(x=0;x<w.length;++x)E(x);rr(w),u+=S,++l}return a}),p.done?(r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+t.batches+" batches). You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}})},d.label=4;case 4:return!r||l<t.batches?[5,h()]:[3,6];case 5:return d.sent()==="break"?[3,6]:[3,4];case 6:for(c=0;c<a.length;++c)f=a[c],a[c]=ya(a[c],u),rr(f);return[2,$o(a)]}})})}function oB(n){gn.assert(n>0&&Number.isInteger(n),function(){return"batchSize is required to be a positive integer, but got "+n})}function xC(n,e,t){return n==null?[null]:Array.isArray(n)?n.map(function(r){return Q0(r,e,t-e)}):Q0(n,e,t-e)}function aj(n,e){return Ze(function(){return n==null?null:Array.isArray(n)?n.map(function(t){return aj(t,e)}):gge(n,e.dtype==="int32"?e:e.toInt())})}function uB(n,e){for(var t=[],r=0,i=null;r<n;)(i=r+e)>=n&&(i=n),t.push([r,i]),r=i;return t}function wVe(n,e,t,r,i,a,o,s,u,l,h,c,f,d,p){return Rn(this,void 0,void 0,function(){var m,g,y,v,b,w,x,S;return Cn(this,function(E){switch(E.label){case 0:return i==null&&(i=32),a==null&&(a=1),h==null&&(h=!0),f==null&&(f=0),m=!1,u!=null&&l!=null&&(m=!0),p!=null,(g=n.checkNumSamples(t,i,d,"steps_per_epoch"))!=null&&(y=vh(0,g)),o==null&&(o=1),v=Age(s,o,a,f,g,d,i,m,c),b=v.callbackList,w=v.history,b.setModel(n),n.history=w,[4,b.onTrainBegin()];case 1:E.sent(),n.stopTraining_=!1,x=function(A){var k,T,O,F,I;return Cn(this,function(R){switch(R.label){case 0:return[4,b.onEpochBegin(A)];case 1:if(R.sent(),k={},d==null)return[3,2];case 2:if(h==="batch")throw new Vn("batch shuffling is not implemneted yet");h&&gn.shuffle(y),T=Ru(y),O=uB(g,i),F=function(U){var B;return Cn(this,function(W){switch(W.label){case 0:return B={},[4,b.onBatchBegin(U,B)];case 1:return W.sent(),Ze(function(){var Y=O[U][0],z=O[U][1],j=Q0(T,Y,z-Y);B.batch=U,B.size=z-Y;for(var M=aj(t,j),q=e(M),H=0;H<r.length;++H){var K=r[H],Z=q[H];B[K]=Z,kp(Z)}if(U===O.length-1&&m){var J=n.testLoop(u,l,i);for(H=0;H<r.length;++H)K=r[H],Z=J[H],kp(Z),k["val_"+K]=Z}}),[4,b.onBatchEnd(U,B)];case 2:return W.sent(),Tge(B),n.stopTraining_?[2,"break"]:[2]}})},I=0,R.label=3;case 3:return I<O.length?[5,F(I)]:[3,6];case 4:if(R.sent()==="break")return[3,6];R.label=5;case 5:return++I,[3,3];case 6:T.dispose(),R.label=7;case 7:return[4,b.onEpochEnd(A,k)];case 8:return R.sent(),n.stopTraining_?[2,"break"]:[2]}})},S=f,E.label=2;case 2:return S<a?[5,x(S)]:[3,5];case 3:if(E.sent()==="break")return[3,5];E.label=4;case 4:return++S,[3,2];case 5:return[4,b.onTrainEnd()];case 6:return E.sent(),[4,n.history.syncData()];case 7:return E.sent(),[2,n.history]}})})}function xVe(n,e,t,r){return r===void 0&&(r={}),Rn(this,void 0,void 0,function(){var i,a,o,s,u,l,h,c,f,d,p,m,g,y,v,b,w,x,S,E,A,k;return Cn(this,function(T){switch(T.label){case 0:if(n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0,T.label=1;case 1:return T.trys.push([1,,7,8]),oB(c=r.batchSize==null?32:r.batchSize),f=!1,[4,n.standardizeUserData(e,t,r.sampleWeight,r.classWeight,f,c)];case 2:if(d=T.sent(),i=d[0],a=d[1],h=d[2],p=!1,m=void 0,!(r.validationData!=null&&r.validationData.length>0))return[3,4];if(p=!0,r.validationData.length!==2)throw r.validationData.length===3?new Vn("validationData including sample weights is not supported yet."):new Ke("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+r.validationData+" is invalid.");return o=r.validationData[0],s=r.validationData[1],g=!0,[4,n.standardizeUserData(o,s,null,null,g,c)];case 3:return y=T.sent(),u=y[0],l=y[1],m=u.concat(l),[3,5];case 4:r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1?(p=!0,v=Math.floor(i[0].shape[0]*(1-r.validationSplit)),b=i[0].shape[0],u=xC(i,v,b),i=xC(i,0,v),l=xC(a,v,b),a=xC(a,0,v),m=u.concat(l)):r.validationSteps!=null&&(p=!0),T.label=5;case 5:return w=i.concat(a).concat(h),n.checkTrainableWeightsConsistency(),x=n.makeTrainFunction(),S=n.getDedupedMetricsNames(),E=void 0,A=void 0,p?(n.makeTestFunction(),E=n.testFunction,A=S.slice().concat(S.map(function(O){return"val_"+O}))):(E=null,m=[],A=S.slice()),k=Dge(r.callbacks,r.yieldEvery),[4,wVe(n,x,w,S,c,r.epochs,r.verbose,k,E,m,r.shuffle,A,r.initialEpoch,null,null)];case 6:return[2,T.sent()];case 7:return n.isTraining=!1,Fv(i,e),Fv(a,t),Fv(u,o),Fv(l,s),h!=null&&rr(h),[7];case 8:return[2]}})})}function Bge(n){var e=[];n instanceof cr&&(n=[n]);for(var t=0;t<n.length;++t){var r=n[t];if(r.rank===1)e.push(VD(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Fv(n,e){if(n!=null){var t=[];if(e instanceof cr)t.push(e.id);else if(Array.isArray(e))e.forEach(function(u){return t.push(u.id)});else if(e!=null)for(var r in e){var i=e[r];t.push(i.id)}var a=[];if(n instanceof cr)t.indexOf(n.id)===-1&&a.push(n);else if(Array.isArray(n))n.forEach(function(u){t.indexOf(u.id)===-1&&a.push(u)});else if(n!=null)for(var o in n){var s=n[o];t.indexOf(s.id)===-1&&a.push(s)}a.forEach(function(u){u.isDisposed||u.dispose()})}}function _Ve(n){return n instanceof cr}function lB(n){return Array.isArray(n)}function XQ(n){return!_Ve(n)&&!lB(n)}function KQ(n,e,t,r,i){if(i===void 0&&(i=""),e==null||e.length===0){if(n!=null){var a=!1;if(lB(n)&&n.length>0)a=!0;else if(XQ(n)){for(var o in n)if(n.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new Ke("Error when checking model "+i+" expected no data, but got "+n)}return[]}if(n==null)return e.map(function(g){return null});var s;if(XQ(n)){n=n,s=[];for(var u=0,l=e;u<l.length;u++){var h=l[u];if(n[h]==null)throw new Ke('No data provided for "'+h+'". Need data for each key in: '+e);s.push(n[h])}}else if(lB(n)){if((n=n).length!==e.length)throw new Ke("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+e.length+" Tensor(s), but instead got the following list of Tensor(s): "+n);s=n}else{if(n=n,e.length>1)throw new Ke("The model "+i+" expects "+e.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+n.shape);s=[n]}if(s=Bge(s),t!=null){for(var c=0;c<e.length;++c)if(t[c]!=null){var f=s[c];if(f.shape.length!==t[c].length)throw new Ke("Error when checking "+i+": expected "+e[c]+" to have "+t[c].length+" dimension(s). but got array with shape "+f.shape);for(var d=0;d<t[c].length;++d)if(d!==0||r){var p=f.shape[d],m=t[c][d];if(m!=null&&m>=0&&p!==m)throw new Ke("Error when checking "+i+": expected "+e[c]+" to have shape ["+t[c]+"], but got array with shape ["+f.shape+"].")}}}return s}function SVe(n,e,t){var r=Mm(n.map(function(a){return a.shape[0]}));r.sort();var i=Mm(e.map(function(a){return a.shape[0]}));if(i.sort(),r.length>1)throw new Ke("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(n.map(function(a){return a.shape})));if(i.length>1)throw new Ke("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(function(a){return a.shape})));if(r.length>0&&i.length>0&&!gn.arraysEqual(r,i))throw new Ke("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+i[0]+" target sample(s).")}function CVe(n,e,t){for(var r=[m4,y4,SE],i=0;i<n.length;++i){var a=n[i],o=e[i],s=t[i];if(o!=null){if(o===SE&&a.shape[a.shape.length-1]===1)throw new Ke("You are passing a target array of shape "+a.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(r.indexOf(o)!==-1)for(var u=a.shape.slice(1),l=s.slice(1),h=0;h<u.length;++h){var c=u[h],f=l[h];if(f!=null&&c!==f)throw new Ke("A target Tensor with shape "+a.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}function YQ(n,e,t,r,i){var a;if(r===void 0&&(r=!0),i===void 0&&(i=""),Array.isArray(n)){if(n.length!==e.length)throw new Ke("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+e.length+" Tensor(s), but instead got "+n.length+" Tensors(s).");a=n}else{if(e.length>1)throw new Ke("The model expects "+e.length+" "+i+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(n.shape)+".");a=[n]}if(t!=null){for(var o=0;o<e.length;++o)if(t[o]!=null){var s=a[o];if(s.shape.length!==t[o].length)throw new Ke("Error when checking "+i+": expected "+e[o]+" to have "+t[o].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var u=0;u<t[o].length;++u)if(u!==0||r){var l=s.shape[u],h=t[o][u];if(h!=null&&h!==l)throw new Ke("Error when checking "+i+": expected "+e[o]+" to have shape "+JSON.stringify(t[o])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}}function EVe(n,e){if(n==null||Array.isArray(n)&&n.length===0)return e.map(function(u){return[]});var t;if(typeof n=="string"||typeof n=="function")t=[n];else{if(!Array.isArray(n)&&typeof n!="object")throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+n);t=n}if(Array.isArray(t))return e.map(function(u){return t});for(var r=[],i=0,a=e;i<a.length;i++){var o=a[i],s=t.hasOwnProperty(o)?t[o]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}var TVe="layers-model",PC=function(n){function e(t){var r=n.call(this,t)||this;return r.isTraining=!1,r}return mt(e,n),e.prototype.summary=function(t,r,i){if(i===void 0&&(i=console.log),!this.built)throw new Ke("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");nVe(this,t,r,i)},e.prototype.compile=function(t){var r=this;if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=tVe(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof by))throw new Ke("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}var i=[];if(Array.isArray(t.loss)||typeof t.loss=="string"||typeof t.loss=="function")if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new Ke("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+t.loss+".");var a=t.loss;i=a.map(function(g){return kM(g)})}else{var o=kM(t.loss);this.outputs.forEach(function(g){i.push(o)})}else{for(var s in t.loss=t.loss,t.loss)if(this.outputNames.indexOf(s)===-1)throw new Ke('Unknown entry in loss dictionary: "'+s+'". Only expected the following keys: '+this.outputNames);for(var u=0,l=this.outputNames;u<l.length;u++){var h=l[u];t.loss[h]==null&&console.warn('Output "'+h+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+h+" during training"),i.push(kM(t.loss[h]))}}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var f=this.internalOutputShapes[c],d=this.outputNames[c];this.feedOutputNames.push(d),this.feedOutputShapes.push(f),this.feedLossFns.push(this.lossFunctions[c])}var p=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Y0("loss",function(){for(var g=0;g<r.outputs.length;++g)if(p.indexOf(g)===-1){var y=r.lossFunctions[g];r.outputs.length>1&&(r.metricsTensors.push([y,g]),r.metricsNames.push(r.outputNames[g]+"_loss"))}});var m=EVe(t.metrics,this.outputNames);Y0("metric",function(){for(var g=function(v){if(p.indexOf(v)!==-1)return"continue";(function(b){for(var w,x,S,E=function(T){if(typeof T=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(T)!==-1){var O=r.internalOutputShapes[v];O[O.length-1]===1||r.lossFunctions[v]===y4?["accuracy","acc"].indexOf(T)!==-1?x=Nge:["crossentropy","ce"].indexOf(T)!==-1&&(x=Vqe):r.lossFunctions[v]===TO?["accuracy","acc"].indexOf(T)!==-1?x=Hqe:["crossentropy","ce"].indexOf(T)!==-1&&(x=Ige):["accuracy","acc"].indexOf(T)!==-1?x=Oge:["crossentropy","ce"].indexOf(T)!==-1&&(x=Rge);var F=void 0;["accuracy","acc"].indexOf(T)!==-1?F="acc":["crossentropy","ce"].indexOf(T)!==-1&&(F="ce"),S=x,w=""+F}else{var I=eVe(T);S=I,w=""+Uk(T)}var R;Y0(w,function(){R=S}),function(U,B,W){r.outputNames.length>1&&(B=r.outputNames[U]+"_"+B),r.metricsNames.push(B),r.metricsTensors.push([W,U])}(v,w,R)},A=0,k=b;A<k.length;A++)E(k[A])})(m[v])},y=0;y<r.outputs.length;++y)g(y)}),this.collectedTrainableWeights=this.trainableWeights},e.prototype.checkTrainableWeightsConsistency=function(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},e.prototype.evaluate=function(t,r,i){i===void 0&&(i={});var a=i.batchSize==null?32:i.batchSize;oB(a);var o=this.standardizeUserDataXY(t,r,!0,a);try{var s=o[0].concat(o[1]);this.makeTestFunction();var u=this.testFunction;return $o(this.testLoop(u,s,a,i.verbose,i.steps))}finally{Fv(o[0],t),Fv(o[1],r)}},e.prototype.evaluateDataset=function(t,r){return Rn(this,void 0,void 0,function(){return Cn(this,function(i){return this.makeTestFunction(),[2,bVe(this,t,r)]})})},e.prototype.checkNumSamples=function(t,r,i,a){var o;if(a===void 0&&(a="steps"),i!=null){if(o=null,r!=null)throw new Ke("If "+a+" is set, batchSize must be null or undefined.Got batchSize = "+r)}else{if(t==null)throw new Ke("Either the input data should have a defined shape, or "+a+" shoud be specified.");o=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return o},e.prototype.execute=function(t,r){if(Array.isArray(r)&&r.length===0)throw new Ke("`outputs` is an empty Array, which is not allowed.");var i=Array.isArray(r),a=i?r:[r],o=this.retrieveSymbolicTensors(a),s=new g2;if(t instanceof cr&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new Ke("The number of inputs provided ("+t.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var u=0;u<this.inputs.length;++u)s.add(this.inputs[u],t[u])}else for(var l=0,h=this.inputs;l<h.length;l++){var c=h[l],f=t[c.name];if(f==null)throw new Ke("No value is provided for the model's input "+c.name);s.add(c,f)}var d=wC(o,s);return i?d:d[0]},e.prototype.retrieveSymbolicTensors=function(t){for(var r=_1(null,t.length),i=t.length,a=0,o=this.layers;a<o.length;a++){for(var s=o[a],u=Array.isArray(s.output)?s.output:[s.output],l=u.map(function(d){return d.name}),h=0;h<t.length;++h){var c=l.indexOf(t[h]);if(c!==-1&&(r[h]=u[c],i--),i===0)break}if(i===0)break}if(i>0){var f=[];throw r.forEach(function(d,p){d==null&&f.push(t[p])}),new Ke("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(f))}return r},e.prototype.predictLoop=function(t,r,i){var a=this;return r===void 0&&(r=32),i===void 0&&(i=!1),Ze(function(){var o=a.checkNumSamples(t);if(i)throw new Vn("Verbose predictLoop() is not implemented yet.");for(var s=uB(o,r),u=a.outputs.map(function(c){return[]}),l=function(c){Ze(function(){var f=s[c][0],d=s[c][1],p=xC(t,f,d),m=[];if(Array.isArray(p))for(var g=0;g<p.length;++g)m.push({key:a.inputs[g],value:p[g]});else m.push({key:a.inputs[0],value:p});var y=new g2(m);return wC(a.outputs,y)}).forEach(function(f,d){return u[d].push(f)})},h=0;h<s.length;++h)l(h);return $o(u.map(function(c){return Yo(c,0)}))})},e.prototype.predict=function(t,r){r===void 0&&(r={});var i=Bge(t);YQ(i,this.inputNames,this.feedInputShapes,!1);try{var a=r.batchSize==null?32:r.batchSize;return oB(a),this.predictLoop(i,a)}finally{Fv(i,t)}},e.prototype.predictOnBatch=function(t){YQ(t,this.inputNames,this.feedInputShapes,!0);var r=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,r)},e.prototype.standardizeUserDataXY=function(t,r,i,a){if(this.optimizer_==null)throw new Of("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var o=[],s=0;s<this.feedOutputShapes.length;++s){var u=this.feedOutputShapes[s];this.feedLossFns[s]===TO?o.push(u.slice(0,u.length-1).concat([1])):o.push(u)}if(SVe(t=KQ(t,this.feedInputNames,this.feedInputShapes,!1,"input"),r=KQ(r,this.feedOutputNames,o,!1,"target")),CVe(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&a!=null&&a>0&&t[0].shape[0]%a!=0)throw new Ke("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+a+". Found: "+t[0].shape[0]+" sample(s).");return[t,r]},e.prototype.standardizeUserData=function(t,r,i,a,o,s){return o===void 0&&(o=!0),Rn(this,void 0,void 0,function(){var u,l,h,c,f,d,p,m;return Cn(this,function(g){switch(g.label){case 0:if(u=this.standardizeUserDataXY(t,r,o,s),l=u[0],h=u[1],i!=null)throw new Error("sample weight is not supported yet.");if(c=null,a==null)return[3,4];f=Lge(a,this.outputNames),c=[],d=0,g.label=1;case 1:return d<f.length?(m=(p=c).push,[4,Mge(h[d],null,f[d])]):[3,4];case 2:m.apply(p,[g.sent()]),g.label=3;case 3:return++d,[3,1];case 4:return[2,[l,h,c]]}})})},e.prototype.testLoop=function(t,r,i,a,o){var s=this;return a===void 0&&(a=0),Ze(function(){var u=s.checkNumSamples(r,i,o,"steps"),l=[];if(a>0)throw new Vn("Verbose mode is not implemented yet.");if(o!=null)throw new Vn("steps mode in testLoop() is not implemented yet");for(var h=uB(u,i),c=Ru(vh(0,u)),f=0;f<h.length;++f){var d=h[f][0],p=h[f][1],m=Q0(c,d,p-d),g=aj(r,m),y=t(g);if(f===0)for(var v=0;v<y.length;++v)l.push(jt(0));for(v=0;v<y.length;++v){var b=y[v];l[v]=qn(l[v],rn(p-d,b))}}for(v=0;v<l.length;++v)l[v]=ya(l[v],u);return l})},e.prototype.getDedupedMetricsNames=function(){for(var t=this.metricsNames,r=[],i=0;i<t.length;++i){var a=t[i],o=a;IQ(t,a)>1&&(o+="_"+IQ(t.slice(0,i),a)),r.push(o)}return r},e.prototype.makeTrainFunction=function(){var t=this;return function(r){var i=[],a=r.slice(0,t.inputs.length),o=r.slice(t.inputs.length,t.inputs.length+t.outputs.length),s=r.slice(t.inputs.length+t.outputs.length,t.inputs.length+2*t.outputs.length),u=[],l=t.collectedTrainableWeights.map(function(h){return h.read()});return[t.optimizer_.minimize(function(){for(var h=[],c=0;c<t.inputs.length;++c)h.push({key:t.inputs[c],value:a[c]});var f,d=new g2(h),p=wC(t.outputs,d,{training:!0});for(c=0;c<t.lossFunctions.length;++c){var m=(0,t.lossFunctions[c])(o[c],p[c]);s[c]!=null&&(m=dVe(m,s[c]));var g=Ia(m);i.push(g),f=c===0?m:qn(f,m)}for(c=0;c<t.metricsTensors.length;++c){var y=void 0;if(t.outputs.length>1&&c<t.outputs.length)y=i[c];else{var v=t.metricsTensors[c][0],b=t.metricsTensors[c][1];y=Ia(v(o[b],p[b]))}kp(y),u.push(y)}return f=Ia(f),t.calculateLosses().forEach(function(w){f=qn(f,w)}),f},!0,l)].concat(u)}},e.prototype.makeTestFunction=function(){var t=this;this.testFunction=function(r){return Ze(function(){for(var i,a=[],o=r.slice(0,t.inputs.length),s=r.slice(t.inputs.length,t.inputs.length+t.outputs.length),u=[],l=0;l<t.inputs.length;++l)u.push({key:t.inputs[l],value:o[l]});var h=new g2(u),c=wC(t.outputs,h);for(l=0;l<t.lossFunctions.length;++l){var f=t.lossFunctions[l],d=Ia(f(s[l],c[l]));i=l===0?d:qn(i,d),a.push(i)}for(l=0;l<t.metricsTensors.length;++l){var p=t.metricsTensors[l][0],m=t.metricsTensors[l][1],g=Ia(p(s[m],c[m]));a.push(g)}return a})}},e.prototype.fit=function(t,r,i){return i===void 0&&(i={}),Rn(this,void 0,void 0,function(){return Cn(this,function(a){return[2,xVe(this,t,r,i)]})})},e.prototype.fitDataset=function(t,r){return Rn(this,void 0,void 0,function(){return Cn(this,function(i){return[2,mVe(this,t,r)]})})},e.prototype.trainOnBatch=function(t,r){return Rn(this,void 0,void 0,function(){var i,a,o,s,u,l,h,c,f;return Cn(this,function(d){switch(d.label){case 0:return[4,this.standardizeUserData(t,r)];case 1:i=d.sent(),a=i[0],o=i[1],s=this.makeTrainFunction(),u=s(a.concat(o)),l=[],h=0,c=u,d.label=2;case 2:return h<c.length?[4,c[h].data()]:[3,5];case 3:f=d.sent(),l.push(f[0]),d.label=4;case 4:return h++,[3,2];case 5:return rr(u),[2,$o(l)]}})})},e.prototype.getNamedWeights=function(t){for(var r=[],i=t!=null&&t.trainableOnly,a=i?this.trainableWeights:this.weights,o=this.getWeights(i),s=0;s<a.length;++s)i&&!a[s].trainable||r.push({name:a[s].originalName,tensor:o[s]});return r},Object.defineProperty(e.prototype,"stopTraining",{get:function(){return this.stopTraining_},set:function(t){this.stopTraining_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optimizer",{get:function(){return this.optimizer_},set:function(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=n.prototype.dispose.call(this);if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){var r=YY().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=r-YY().numTensors}return t},e.prototype.getLossIdentifiers=function(){var t;if(typeof this.loss=="string")t=Pd(this.loss);else if(Array.isArray(this.loss)){for(var r=0,i=this.loss;r<i.length;r++)if(typeof i[r]!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(function(h){return Pd(h)})}else{var a=Object.keys(this.loss);t={};for(var o=this.loss,s=0,u=a;s<u.length;s++){var l=u[s];if(typeof o[l]!="string")throw new Error("Serialization of non-string loss is not supported.");t[l]=Pd(o[l])}}return t},e.prototype.getMetricIdentifiers=function(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Pd(Uk(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(function(i){return Pd(Uk(i))});var t={};for(var r in this.metrics)t[r]=Pd(Uk(this.metrics[r]));return t},e.prototype.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},e.prototype.loadTrainingConfig=function(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");var r,i,a=vp(aB(t.optimizer_config));if(typeof t.loss=="string")r=Ev(t.loss);else if(Array.isArray(t.loss))r=t.loss.map(function(s){return Ev(s)});else if(t.loss!=null)for(var o in r={},t.loss)r[o]=Ev(t.loss[o]);if(Array.isArray(t.metrics))i=t.metrics.map(function(s){return Ev(s)});else if(t.metrics!=null)for(var o in i={},t.metrics)i[o]=Ev(t.metrics[o]);this.compile({loss:r,metrics:i,optimizer:a})},e.prototype.save=function(t,r){return Rn(this,void 0,void 0,function(){var i,a,o,s,u,l,h,c,f,d,p,m,g,y;return Cn(this,function(v){switch(v.label){case 0:if(typeof t=="string"){if((i=dp.getSaveHandlers(t)).length===0)throw new Ke("Cannot find any save handlers for URL '"+t+"'");if(i.length>1)throw new Ke("Found more than one ("+i.length+") save handlers for URL '"+t+"'");t=i[0]}if(t.save==null)throw new Ke("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,dp.encodeWeights(this.getNamedWeights(r))];case 1:return a=v.sent(),o=!1,s=null,u=this.toJSON(s,o),l={modelTopology:u,format:TVe,generatedBy:"TensorFlow.js tfjs-layers v"+Pge,convertedBy:null},r!=null&&r.includeOptimizer&&this.optimizer!=null?(l.trainingConfig=this.getTrainingConfig(),h="optimizer",m=(p=dp).encodeWeights,[4,this.optimizer.getWeights()]):[3,4];case 2:return[4,m.apply(p,[v.sent(),h])];case 3:c=v.sent(),f=c.data,d=c.specs,(y=a.specs).push.apply(y,d),a.data=dp.concatenateArrayBuffers([a.data,f]),v.label=4;case 4:return this.userDefinedMetadata!=null&&(g=!0,$Q(this.userDefinedMetadata,this.name,g),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=a.data,l.weightSpecs=a.specs,[2,t.save(l)]}})})},e.prototype.setUserDefinedMetadata=function(t){$Q(t,this.name),this.userDefinedMetadata=t},e.prototype.getUserDefinedMetadata=function(){return this.userDefinedMetadata},e.className="Model",e}(hVe);St.registerClass(PC);var DVe=function(n){function e(t){var r=n.call(this,{inputs:[],outputs:[]})||this;if(t=t||{},r.trainable=!0,r.built=!1,r.name=t.name!=null?t.name:d4("sequential_"),t.layers!=null)for(var i=0,a=t.layers;i<a.length;i++){var o=a[i];r.add(o)}return r}return mt(e,n),e.prototype.checkShape=function(t){if(t.inboundNodes[0].outputTensors[0].shape.some(function(r){return r<0}))throw new Ke("Negative dimension size caused by adding layer "+t.name+" with input shape ["+t.inboundNodes[0].inputTensors[0].shape+"]")},e.prototype.add=function(t){var r,i=t instanceof e||t instanceof PC;if(i){if((r=t).outputs.length!==1)throw new Ke("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Ke("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new Ke("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=Dqe({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(a)}if(i)this.outputs=r.outputs,this.inputs=r.inputs;else{if(t.inboundNodes.length!==1)throw new Ke("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer "+t.name+" which has "+t.inboundNodes.length+" pre-existing inbound connections.");if(t.inboundNodes[0].outputTensors.length!==1)throw new Ke("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=Ege(this.outputs[0])}this.inboundNodes=[],new p4({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:_1(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(s){return s.shape}),outputShapes:this.outputs[0].shape})}else{var o=t.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1},e.prototype.pop=function(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},e.prototype.call=function(t,r){return this.model==null&&this.build(),this.model.call(t,r)},e.prototype.build=function(t){if(gi(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new PC({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},e.prototype.countParams=function(){return this.built||this.build(),n.prototype.countParams.call(this)},e.prototype.summary=function(t,r,i){i===void 0&&(i=console.log),this.built||this.build(),n.prototype.summary.call(this,t,r,i)},e.prototype.setWeights=function(t){this.model==null&&this.build(),this.model.setWeights(t)},e.prototype.evaluate=function(t,r,i){if(i===void 0&&(i={}),!this.built)throw new Of("The model needs to be compiled before being used.");return this.model.evaluate(t,r,i)},e.prototype.evaluateDataset=function(t,r){return Rn(this,void 0,void 0,function(){return Cn(this,function(i){if(!this.built)throw new Of("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(t,r)]})})},e.prototype.predict=function(t,r){return r===void 0&&(r={}),this.model==null&&this.build(),this.model.predict(t,r)},e.prototype.predictOnBatch=function(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)},e.prototype.compile=function(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},Object.defineProperty(e.prototype,"optimizer",{get:function(){return this.model==null?void 0:this.model.optimizer},set:function(t){this.model.optimizer=t},enumerable:!0,configurable:!0}),e.prototype.fit=function(t,r,i){return i===void 0&&(i={}),Rn(this,void 0,void 0,function(){return Cn(this,function(a){if(!this.built)throw new Of("The model needs to be compiled before being used.");return[2,this.model.fit(t,r,i)]})})},e.prototype.fitDataset=function(t,r){return Rn(this,void 0,void 0,function(){return Cn(this,function(i){if(!this.built)throw new Of("The model needs to be compiled before being used.");return[2,this.model.fitDataset(t,r)]})})},e.prototype.trainOnBatch=function(t,r){return Rn(this,void 0,void 0,function(){return Cn(this,function(i){return[2,this.model.trainOnBatch(t,r)]})})},e.fromConfig=function(t,r,i,a){var o;a===void 0&&(a=!1);var s={};if(r instanceof Array){if(r[0].className==null||r[0].className==="Merge")throw new Ke("Legacy serialization format not supported yet.");o=r}else gn.assert(r.layers!=null,function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."}),o=r.layers,delete r.layers,s=r;var u=new t(s);if(!(u instanceof e))throw new Vn("Sequential.fromConfig called on non-Sequential input: "+u);for(var l=0,h=o;l<h.length;l++){var c=vp(h[l],void 0,a);a&&c.setFastWeightInitDuringBuild(!0),u.add(c)}return u},Object.defineProperty(e.prototype,"stopTraining",{get:function(){if(this.model==null)throw new Ke("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(t){if(this.model==null)throw new Ke("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){for(var t=[],r=0,i=this.layers;r<i.length;r++){var a=i[r],o={};o.className=a.getClassName(),o.config=a.getConfig(),t.push(o)}return{name:this.name,layers:t}},e.className="Sequential",e}(PC);St.registerClass(DVe);var Dl=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.getConfig=function(){return{}},e}(St.Serializable),AVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t,r){return r===void 0&&(r=1),aqe(t,r)},e.className="elu",e}(Dl);St.registerClass(AVe);var kVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return jW(t)},e.className="selu",e}(Dl);St.registerClass(kVe);var NVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return M1(t)},e.className="relu",e}(Dl);St.registerClass(NVe);var OVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return Ze(function(){return LD(6,M1(t))})},e.className="relu6",e}(Dl);St.registerClass(OVe);var RVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return t},e.className="linear",e}(Dl);St.registerClass(RVe);var IVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return uW(t)},e.className="sigmoid",e}(Dl);St.registerClass(IVe);var FVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return oqe(t)},e.className="hardSigmoid",e}(Dl);St.registerClass(FVe);var PVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return QI(t)},e.className="softplus",e}(Dl);St.registerClass(PVe);var LVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return sqe(t)},e.className="softsign",e}(Dl);St.registerClass(LVe);var MVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t){return lW(t)},e.className="tanh",e}(Dl);St.registerClass(MVe);var zge=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t,r){return r===void 0&&(r=-1),Cx(t,r)},e.className="softmax",e}(Dl);St.registerClass(zge);var UVe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.apply=function(t,r){return r===void 0&&(r=-1),dW(t,r)},e.className="logSoftmax",e}(Dl);function Sl(n){return n.getClassName()}function OM(n,e){return e===void 0&&(e={}),jD(n,St.SerializationMap.getMap().classNameMap,e,"activation")}function ey(n){var e;return n==null?OM(e={className:"linear",config:{}}):typeof n=="string"?((e={}).className=n,e.config={},OM(e)):n instanceof Dl?n:OM(n)}function BVe(n){if(n!=null&&typeof n!="object")throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+n)}St.registerClass(UVe);var Wge=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e}(St.Serializable),zVe=function(n){function e(t){var r=n.call(this)||this;return BVe(t),r.l1=t==null||t.l1==null?.01:t.l1,r.l2=t==null||t.l2==null?.01:t.l2,r.hasL1=r.l1!==0,r.hasL2=r.l2!==0,r}return mt(e,n),e.prototype.apply=function(t){var r=this;return Ze(function(){var i=Lr([1]);return r.hasL1&&(i=qn(i,Za(rn(r.l1,v1(t))))),r.hasL2&&(i=qn(i,Za(rn(r.l2,HD(t))))),i.asScalar()})},e.prototype.getConfig=function(){return{l1:this.l1,l2:this.l2}},e.fromConfig=function(t,r){return new t({l1:r.l1,l2:r.l2})},e.className="L1L2",e}(Wge);St.registerClass(zVe);var QQ={l1l2:"L1L2"};function jn(n){return JW(n)}function ZQ(n,e){return e===void 0&&(e={}),jD(n,St.SerializationMap.getMap().classNameMap,e,"regularizer")}function Oi(n){return n==null?null:typeof n=="string"?ZQ({className:n in QQ?QQ[n]:n,config:{}}):n instanceof Wge?n:ZQ(n)}var WVe=function(n){function e(t){var r=n.call(this,t??{})||this;return r.supportsMasking=!0,t!=null&&(r.maxValue=t.maxValue),r}return mt(e,n),e.prototype.call=function(t,r){t=Mn(t);var i=M1(t);return this.maxValue!=null&&(i=Iu(i,0,this.maxValue)),i},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var t={maxValue:this.maxValue},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="ReLU",e}(ur);St.registerClass(WVe);var jVe=function(n){function e(t){var r=n.call(this,t??{})||this;return r.DEFAULT_ALPHA=.3,t==null&&(t={}),r.alpha=t.alpha==null?r.DEFAULT_ALPHA:t.alpha,r}return mt(e,n),e.prototype.call=function(t,r){var i=Mn(t);return WW(i,this.alpha)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var t={alpha:this.alpha},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="LeakyReLU",e}(ur);St.registerClass(jVe);var $Ve=function(n){function e(t){var r=n.call(this,t??{})||this;if(r.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),r.supportsMasking=!0,r.alphaInitializer=Ni(t.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=Oi(t.alphaRegularizer),r.alphaConstraint=Pa(t.alphaConstraint),t.sharedAxes==null)r.sharedAxes=null;else if(Array.isArray(t.sharedAxes))r.sharedAxes=t.sharedAxes;else{if(typeof t.sharedAxes!="number")throw new Ke("Expected sharedAxes to be a number or an array of numbers, but got "+t.sharedAxes);r.sharedAxes=[t.sharedAxes]}return r}return mt(e,n),e.prototype.build=function(t){var r=(t=gi(t)).slice(1);if(this.sharedAxes!=null)for(var i=0,a=this.sharedAxes;i<a.length;i++)r[(s=a[i])-1]=1;this.alpha=this.addWeight("alpha",r,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var o={};if(this.sharedAxes!=null)for(var s=1;s<t.length;++s)o[s]=t[s];this.inputSpec=[new Vs({ndim:t.length,axes:o})],this.built=!0},e.prototype.call=function(t,r){return t=Mn(t),u4(t,this.alpha.read())},e.prototype.getConfig=function(){var t={alphaInitializer:yr(this.alphaInitializer),alphaRegularizer:jn(this.alphaRegularizer),alphaConstraint:Gr(this.alphaConstraint),sharedAxes:this.sharedAxes},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="PReLU",e}(ur);St.registerClass($Ve);var qVe=function(n){function e(t){var r=n.call(this,t??{})||this;if(r.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==r.DEFAULT_ALPHA)throw new Vn("Non-default alpha value ("+t.alpha+") is not supported by the ELU layer yet.");return r.alpha=t.alpha==null?r.DEFAULT_ALPHA:t.alpha,r}return mt(e,n),e.prototype.call=function(t,r){var i=Mn(t);return zD(i)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var t={alpha:this.alpha},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="ELU",e}(ur);St.registerClass(qVe);var VVe=function(n){function e(t){var r=n.call(this,t??{})||this;return r.DEFAULT_THETA=1,t==null&&(t={}),r.theta=t.theta==null?r.DEFAULT_THETA:t.theta,r}return mt(e,n),e.prototype.call=function(t,r){var i=Mn(t);return i.mul(qD(i.greater(this.theta),"float32"))},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var t={theta:this.theta},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="ThresholdedReLU",e}(ur);St.registerClass(VVe);var HVe=function(n){function e(t){var r=n.call(this,t??{})||this;return r.DEFAULT_AXIS=1,t==null&&(t={}),r.softmax=new zge().apply,r.axis=t.axis==null?r.DEFAULT_AXIS:t.axis,r}return mt(e,n),e.prototype.call=function(t,r){var i=Mn(t);return this.softmax(i,this.axis)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var t={axis:this.axis},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Softmax",e}(ur);function RM(n,e,t){if(typeof n=="number")return _1(n,e);if(n.length!==e)throw new Ke("The "+t+" argument must be an integer or tuple of "+e+" integers. Received: "+n.length+" elements.");for(var r=0;r<e;++r){var i=n[r];if(!tqe(i))throw new Ke("The "+t+" argument must be an integer or tuple of "+e+" integers. Received: "+JSON.stringify(n)+" including a non-integer number "+i)}return n}function bp(n,e,t,r,i){return i===void 0&&(i=1),n==null?n:(a=t==="same"?n:n-(e+(e-1)*(i-1))+1,Math.floor((a+r-1)/r));var a}function Bk(n,e,t,r){if(n==null)return null;if(r==="valid")n=n*e+Jm([t-e,0]);else{if(r!=="same")throw new Ke("Unsupport padding mode: "+r+".");n*=e}return n}function sj(n,e){return Ze(function(){return Ua(e),e==="channelsFirst"?gr(n,[0,2,3,1]):n})}function jge(n,e){return Ze(function(){return Ua(e),e==="channelsFirst"?gr(n,[0,2,3,4,1]):n})}function GVe(n,e,t,r,i,a,o){return r===void 0&&(r=1),i===void 0&&(i="valid"),o===void 0&&(o=1),Ze(function(){if(a==null&&(a=yh()),Ua(a),n.shape.length!==3)throw new Ke("The input of a conv1dWithBias operation should be 3, but is "+n.shape.length+" instead.");if(e.shape.length!==3)throw new Ke("The kernel for a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead");if(t!=null&&t.shape.length!==1)throw new Ke("The bias for a conv1dWithBias operation should be 1, but is "+e.shape.length+" instead");if(a==="channelsFirst"&&(n=gr(n,[0,2,1])),i==="causal")throw new Vn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=AW(n,e,r,i==="same"?"same":"valid","NWC",o);return t!=null&&(s=$p(s,t)),s})}function JQ(n,e,t,r,i,a,o,s){return r===void 0&&(r=[1,1]),i===void 0&&(i="valid"),s===void 0&&(s=null),Ze(function(){if(a==null&&(a=yh()),Ua(a),n.rank!==3&&n.rank!==4)throw new Ke("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received "+n.rank+".");if(e.rank!==3&&e.rank!==4)throw new Ke("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received "+n.rank+".");var u=sj(n,a);if(i==="causal")throw new Vn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=x1.conv2d({x:u,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:t,activation:s}),a==="channelsFirst"&&(u=gr(u,[0,3,1,2])),u})}function XVe(n,e,t,r,i,a,o){return r===void 0&&(r=[1,1,1]),i===void 0&&(i="valid"),Ze(function(){if(a==null&&(a=yh()),Ua(a),n.rank!==4&&n.rank!==5)throw new Ke("conv3dWithBias expects input to be of rank 4 or 5, but received "+n.rank+".");if(e.rank!==4&&e.rank!==5)throw new Ke("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+n.rank+".");var s=jge(n,a);if(i==="causal")throw new Vn("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=kW(s,e,r,i==="same"?"same":"valid","NDHWC",o),t!=null&&(s=$p(s,t)),a==="channelsFirst"&&(s=gr(s,[0,4,1,2,3])),s})}St.registerClass(HVe);var $ge=function(n){function e(t,r){var i=n.call(this,r)||this;if(i.bias=null,i.DEFAULT_KERNEL_INITIALIZER="glorotNormal",i.DEFAULT_BIAS_INITIALIZER="zeros",e.verifyArgs(r),i.rank=t,Zo(i.rank,"rank"),i.rank!==1&&i.rank!==2&&i.rank!==3)throw new Vn("Convolution layer for rank other than 1, 2, or 3 ("+i.rank+") is not implemented yet.");if(i.kernelSize=RM(r.kernelSize,t,"kernelSize"),i.strides=RM(r.strides==null?1:r.strides,t,"strides"),i.padding=r.padding==null?"valid":r.padding,wc(i.padding),i.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Ua(i.dataFormat),i.activation=ey(r.activation),i.useBias=r.useBias==null||r.useBias,i.biasInitializer=Ni(r.biasInitializer||i.DEFAULT_BIAS_INITIALIZER),i.biasConstraint=Pa(r.biasConstraint),i.biasRegularizer=Oi(r.biasRegularizer),i.activityRegularizer=Oi(r.activityRegularizer),i.dilationRate=RM(r.dilationRate==null?1:r.dilationRate,t,"dilationRate"),i.rank===1&&Array.isArray(i.dilationRate)&&i.dilationRate.length!==1)throw new Ke("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(i.dilationRate));if(i.rank===2){if(typeof i.dilationRate=="number")i.dilationRate=[i.dilationRate,i.dilationRate];else if(i.dilationRate.length!==2)throw new Ke("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(i.dilationRate))}else if(i.rank===3){if(typeof i.dilationRate=="number")i.dilationRate=[i.dilationRate,i.dilationRate,i.dilationRate];else if(i.dilationRate.length!==3)throw new Ke("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(i.dilationRate))}return i}return mt(e,n),e.verifyArgs=function(t){if(Af("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!ej(t.kernelSize,"number",1,3))throw new Ke("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received "+JSON.stringify(t.kernelSize)+".")},e.prototype.getConfig=function(){var t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Sl(this.activation),useBias:this.useBias,biasInitializer:yr(this.biasInitializer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),biasConstraint:Gr(this.biasConstraint)},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e}(ur),v4=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.kernel=null,e.verifyArgs(r),i.filters=r.filters,Zo(i.filters,"filters"),i.kernelInitializer=Ni(r.kernelInitializer||i.DEFAULT_KERNEL_INITIALIZER),i.kernelConstraint=Pa(r.kernelConstraint),i.kernelRegularizer=Oi(r.kernelRegularizer),i}return mt(e,n),e.prototype.build=function(t){var r;t=gi(t);var i=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[i]==null)throw new Ke("The channel dimension of the input should be defined. Found "+t[i]);var a=t[i],o=this.kernelSize.concat([a,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(r={},r[i]=a,r)}],this.built=!0},e.prototype.call=function(t,r){var i=this;return Ze(function(){var a;t=Mn(t);var o=i.bias==null?null:i.bias.read(),s=uge(i.activation.getClassName());if(s!=null&&i.rank===2)a=JQ(t,i.kernel.read(),o,i.strides,i.padding,i.dataFormat,i.dilationRate,s);else{if(i.rank===1)a=GVe(t,i.kernel.read(),o,i.strides[0],i.padding,i.dataFormat,i.dilationRate[0]);else if(i.rank===2)a=JQ(t,i.kernel.read(),o,i.strides,i.padding,i.dataFormat,i.dilationRate);else{if(i.rank!==3)throw new Vn("convolutions greater than 3D are not implemented yet.");a=XVe(t,i.kernel.read(),o,i.strides,i.padding,i.dataFormat,i.dilationRate)}i.activation!=null&&(a=i.activation.apply(a))}return a})},e.prototype.computeOutputShape=function(t){t=gi(t);for(var r=[],i=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2),a=0;a<i.length;++a){var o=bp(i[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);r.push(o)}var s=[t[0]];return this.dataFormat==="channelsLast"?(s=s.concat(r)).push(this.filters):(s.push(this.filters),s=s.concat(r)),s},e.prototype.getConfig=function(){var t={filters:this.filters,kernelInitializer:yr(this.kernelInitializer),kernelRegularizer:jn(this.kernelRegularizer),kernelConstraint:Gr(this.kernelConstraint)},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.verifyArgs=function(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new Ke("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))},e}($ge),qge=function(n){function e(t){var r=n.call(this,2,t)||this;return e.verifyArgs(t),r}return mt(e,n),e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this);return delete t.rank,t},e.verifyArgs=function(t){if(typeof t.kernelSize!="number"&&!ej(t.kernelSize,"number",1,2))throw new Ke("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv2D",e}(v4);St.registerClass(qge);var KVe=function(n){function e(t){var r=n.call(this,3,t)||this;return e.verifyArgs(t),r}return mt(e,n),e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this);return delete t.rank,t},e.verifyArgs=function(t){if(typeof t.kernelSize!="number"&&(!Array.isArray(t.kernelSize)||t.kernelSize.length!==1&&t.kernelSize.length!==3))throw new Ke("Conv3D expects config.kernelSize to be number or [number, number, number], but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv3D",e}(v4);St.registerClass(KVe);var YVe=function(n){function e(t){var r=n.call(this,t)||this;if(r.inputSpec=[new Vs({ndim:4})],r.padding!=="same"&&r.padding!=="valid")throw new Ke("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+r.padding);return r}return mt(e,n),e.prototype.build=function(t){var r;if((t=gi(t)).length!==4)throw new Ke("Input should have rank 4; Received input shape: "+JSON.stringify(t));var i=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[i]==null)throw new Ke("The channel dimension of the inputs should be defined. Found `None`.");var a=t[i],o=this.kernelSize.concat([this.filters,a]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Vs({ndim:4,axes:(r={},r[i]=a,r)})],this.built=!0},e.prototype.call=function(t,r){var i=this;return Ze(function(){var a=Mn(t);if(a.shape.length!==4)throw new Ke("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+a.shape.length);var o,s,u=a.shape,l=u[0];i.dataFormat==="channelsFirst"?(o=2,s=3):(o=1,s=2);var h=u[o],c=u[s],f=i.kernelSize[0],d=i.kernelSize[1],p=i.strides[0],m=i.strides[1],g=[l,Bk(h,p,f,i.padding),Bk(c,m,d,i.padding),i.filters];i.dataFormat!=="channelsLast"&&(a=gr(a,[0,2,3,1]));var y=OW(a,i.kernel.read(),g,i.strides,i.padding);return i.dataFormat!=="channelsLast"&&(y=gr(y,[0,3,1,2])),i.bias!=null&&(y=$p(y,i.bias.read(),i.dataFormat)),i.activation!=null&&(y=i.activation.apply(y)),y})},e.prototype.computeOutputShape=function(t){var r,i,a,o=(t=gi(t)).slice();this.dataFormat==="channelsFirst"?(r=1,i=2,a=3):(r=3,i=1,a=2);var s=this.kernelSize[0],u=this.kernelSize[1],l=this.strides[0],h=this.strides[1];return o[r]=this.filters,o[i]=Bk(o[i],l,s,this.padding),o[a]=Bk(o[a],h,u,this.padding),o},e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this);return delete t.dilationRate,t},e.className="Conv2DTranspose",e}(qge);St.registerClass(YVe);var QVe=function(n){function e(t,r){var i=n.call(this,t,r)||this;if(i.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",i.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",i.depthwiseKernel=null,i.pointwiseKernel=null,r.filters==null)throw new Ke("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(r.kernelInitializer!=null||r.kernelRegularizer!=null||r.kernelConstraint!=null)throw new Ke("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(r.padding!=null&&r.padding!=="same"&&r.padding!=="valid")throw new Ke("SeparableConv"+i.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(r.padding));return i.depthMultiplier=r.depthMultiplier==null?1:r.depthMultiplier,i.depthwiseInitializer=Ni(r.depthwiseInitializer||i.DEFAULT_DEPTHWISE_INITIALIZER),i.depthwiseRegularizer=Oi(r.depthwiseRegularizer),i.depthwiseConstraint=Pa(r.depthwiseConstraint),i.pointwiseInitializer=Ni(r.depthwiseInitializer||i.DEFAULT_POINTWISE_INITIALIZER),i.pointwiseRegularizer=Oi(r.pointwiseRegularizer),i.pointwiseConstraint=Pa(r.pointwiseConstraint),i}return mt(e,n),e.prototype.build=function(t){var r;if((t=gi(t)).length<this.rank+2)throw new Ke("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(t));var i=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[i]==null||t[i]<0)throw new Ke("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[i]));for(var a=t[i],o=this.kernelSize.concat([a,this.depthMultiplier]),s=[],u=0;u<this.rank;++u)s.push(1);s.push(a*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new Vs({ndim:this.rank+2,axes:(r={},r[i]=a,r)})],this.built=!0},e.prototype.call=function(t,r){var i=this;return Ze(function(){var a;if(t=Mn(t),i.rank===1)throw new Vn("1D separable convolution is not implemented yet.");return i.rank===2&&(i.dataFormat==="channelsFirst"&&(t=gr(t,[0,2,3,1])),a=Cpe(t,i.depthwiseKernel.read(),i.pointwiseKernel.read(),i.strides,i.padding,i.dilationRate,"NHWC")),i.useBias&&(a=$p(a,i.bias.read(),i.dataFormat)),i.activation!=null&&(a=i.activation.apply(a)),i.dataFormat==="channelsFirst"&&(a=gr(a,[0,3,1,2])),a})},e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this);return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=yr(this.depthwiseInitializer),t.pointwiseInitializer=yr(this.pointwiseInitializer),t.depthwiseRegularizer=jn(this.depthwiseRegularizer),t.pointwiseRegularizer=jn(this.pointwiseRegularizer),t.depthwiseConstraint=Gr(this.depthwiseConstraint),t.pointwiseConstraint=Gr(this.pointwiseConstraint),t},e.className="SeparableConv",e}(v4),ZVe=function(n){function e(t){return n.call(this,2,t)||this}return mt(e,n),e.className="SeparableConv2D",e}(QVe);St.registerClass(ZVe);var JVe=function(n){function e(t){var r=n.call(this,1,t)||this;return e.verifyArgs(t),r.inputSpec=[{ndim:3}],r}return mt(e,n),e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this);return delete t.rank,delete t.dataFormat,t},e.verifyArgs=function(t){if(typeof t.kernelSize!="number"&&!ej(t.kernelSize,"number",1,1))throw new Ke("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv1D",e}(v4);St.registerClass(JVe);var eHe=function(n){function e(t){var r=n.call(this,t)||this;return typeof t.cropping=="number"?r.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?r.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:r.cropping=t.cropping,r.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,r.inputSpec=[{ndim:4}],r}return mt(e,n),e.prototype.computeOutputShape=function(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]},e.prototype.call=function(t,r){var i=this;return Ze(function(){return t=Mn(t),i.dataFormat==="channelsLast"?Lk(Lk(t,i.cropping[0][0],t.shape[1]-i.cropping[0][0]-i.cropping[0][1],2),i.cropping[1][0],t.shape[2]-i.cropping[1][1]-i.cropping[1][0],3):Lk(Lk(t,i.cropping[0][0],t.shape[2]-i.cropping[0][0]-i.cropping[0][1],3),i.cropping[1][0],t.shape[3]-i.cropping[1][1]-i.cropping[1][0],4)})},e.prototype.getConfig=function(){var t={cropping:this.cropping,dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Cropping2D",e}(ur);St.registerClass(eHe);var tHe=function(n){function e(t){var r=n.call(this,t)||this;return r.DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=t.size==null?r.DEFAULT_SIZE:t.size,r.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,r}return mt(e,n),e.prototype.computeOutputShape=function(t){if(this.dataFormat==="channelsFirst"){var r=t[2]==null?null:this.size[0]*t[2],i=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],r,i]}return r=t[1]==null?null:this.size[0]*t[1],i=t[2]==null?null:this.size[1]*t[2],[t[0],r,i,t[3]]},e.prototype.call=function(t,r){var i=this;return Ze(function(){var a=Mn(t),o=a.shape;if(i.dataFormat==="channelsFirst"){a=gr(a,[0,2,3,1]);var s=i.size[0]*o[2],u=i.size[1]*o[3],l=a.resizeNearestNeighbor([s,u]);return gr(l,[0,3,1,2])}return s=i.size[0]*o[1],u=i.size[1]*o[2],a.resizeNearestNeighbor([s,u])})},e.prototype.getConfig=function(){var t={size:this.size,dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="UpSampling2D",e}(ur);function nHe(n,e,t,r,i,a){return t===void 0&&(t=[1,1]),r===void 0&&(r="valid"),Ze(function(){i==null&&(i=yh()),Ua(i);var o=sj(n,i);if(n.rank!==4)throw new Ke("Input for depthwiseConv2d is required to be 4-D, but is instead "+n.rank+"-D");if(e.rank!==4)throw new Ke("depthwiseKernel is required to be 4-D, but is instead "+e.rank+"-D");return o=BD(o,e,t,r==="same"?"same":"valid","NHWC",a),i==="channelsFirst"&&(o=gr(o,[0,3,1,2])),o})}St.registerClass(tHe);var rHe=function(n){function e(t){var r=n.call(this,2,t)||this;return r.depthwiseKernel=null,r.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,r.depthwiseInitializer=Ni(t.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=Pa(t.depthwiseConstraint),r.depthwiseRegularizer=Oi(t.depthwiseRegularizer),r}return mt(e,n),e.prototype.build=function(t){if((t=gi(t)).length<4)throw new Ke("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(t)+".");var r=this.dataFormat==="channelsFirst"?1:3;if(t[r]==null||t[r]<0)throw new Ke("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+t[r]+").");var i=t[r],a=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},e.prototype.call=function(t,r){var i=this;return Ze(function(){var a=nHe(t=Mn(t),i.depthwiseKernel.read(),i.strides,i.padding,i.dataFormat,null);return i.useBias&&(a=$p(a,i.bias.read(),i.dataFormat)),i.activation!=null&&(a=i.activation.apply(a)),a})},e.prototype.computeOutputShape=function(t){t=gi(t);var r=this.dataFormat==="channelsFirst"?t[2]:t[1],i=this.dataFormat==="channelsFirst"?t[3]:t[2],a=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,o=bp(r,this.kernelSize[0],this.padding,this.strides[0]),s=bp(i,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],a,o,s]:[t[0],o,s,a]},e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this);return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=yr(this.depthwiseInitializer),t.depthwiseRegularizer=jn(this.depthwiseRegularizer),t.depthwiseConstraint=Gr(this.depthwiseRegularizer),t},e.className="DepthwiseConv2D",e}($ge);St.registerClass(rHe);var Vge=function(n){function e(t){var r=n.call(this,t)||this;return r.rate=Math.max(Math.min(t.rate,1),0),r.noiseShape=t.noiseShape,r.seed=t.seed,r.supportsMasking=!0,r}return mt(e,n),e.prototype.getNoiseShape=function(t){if(this.noiseShape==null)return this.noiseShape;for(var r=t.shape,i=[],a=0;a<this.noiseShape.length;++a)i.push(this.noiseShape[a]==null?r[a]:this.noiseShape[a]);return i},e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r);var a=Mn(t);if(0<i.rate&&i.rate<1){var o=r.training!=null&&r.training,s=i.getNoiseShape(a);return rx(function(){return mge(a,i.rate,s,i.seed)},function(){return a},o)}return t})},e.prototype.getConfig=function(){var t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.prototype.dispose=function(){return n.prototype.dispose.call(this)},e.className="Dropout",e}(ur);St.registerClass(Vge);var iHe=function(n){function e(t){var r=n.call(this,t)||this;return r.inputSpec=[{ndim:3}],r}return mt(e,n),e.prototype.getNoiseShape=function(t){var r=t.shape;return[r[0],1,r[2]]},e.className="SpatialDropout1D",e}(Vge);St.registerClass(iHe);var aHe=function(n){function e(t){var r=n.call(this,t)||this;if(r.activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){var i=null;t.batchSize!=null&&(i=t.batchSize),r.batchInputShape=[i,t.inputDim]}return r.units=t.units,Zo(r.units,"units"),r.activation=ey(t.activation),t.useBias!=null&&(r.useBias=t.useBias),r.kernelInitializer=Ni(t.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=Ni(t.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=Pa(t.kernelConstraint),r.biasConstraint=Pa(t.biasConstraint),r.kernelRegularizer=Oi(t.kernelRegularizer),r.biasRegularizer=Oi(t.biasRegularizer),r.activityRegularizer=Oi(t.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return mt(e,n),e.prototype.build=function(t){var r,i=(t=gi(t))[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[i,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(r={},r[-1]=i,r)}],this.built=!0},e.prototype.computeOutputShape=function(t){var r=(t=gi(t)).slice();return r[r.length-1]=this.units,r},e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r);var a,o=Mn(t),s=uge(i.activation.getClassName());return s!=null?a=yp(o,i.kernel.read(),s,i.bias?i.bias.read():null):(a=yp(o,i.kernel.read()),i.bias!=null&&(a=$p(a,i.bias.read())),i.activation!=null&&(a=i.activation.apply(a))),a})},e.prototype.getConfig=function(){var t={units:this.units,activation:Sl(this.activation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:Gr(this.kernelConstraint),biasConstraint:Gr(this.biasConstraint)},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Dense",e}(ur);St.registerClass(aHe);var sHe=function(n){function e(t){var r=this;return t=t||{},(r=n.call(this,t)||this).inputSpec=[{minNDim:3}],r.dataFormat=t.dataFormat,r}return mt(e,n),e.prototype.computeOutputShape=function(t){for(var r=0,i=(t=gi(t)).slice(1);r<i.length;r++)if(i[r]==null)throw new Ke('The shape of the input to "Flatten" is not fully defined (got '+t.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],Um(t,1)]},e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r);var a=Mn(t);if(i.dataFormat==="channelsFirst"&&a.rank>1){for(var o=[0],s=2;s<a.rank;++s)o.push(s);o.push(1),a=a.transpose(o)}return iqe(a)})},e.prototype.getConfig=function(){var t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);var r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Flatten",e}(ur);St.registerClass(sHe);var oHe=function(n){function e(t){var r=n.call(this,t)||this;return r.supportsMasking=!0,r.activation=ey(t.activation),r}return mt(e,n),e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r);var a=Mn(t);return i.activation.apply(a)})},e.prototype.getConfig=function(){var t={activation:Sl(this.activation)},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Activation",e}(ur);St.registerClass(oHe);var uHe=function(n){function e(t){var r=n.call(this,t)||this;return r.n=t.n,r.inputSpec=[{ndim:2}],r}return mt(e,n),e.prototype.computeOutputShape=function(t){return[t[0],this.n,t[1]]},e.prototype.call=function(t,r){var i=this;return Ze(function(){return nqe(t=Mn(t),i.n)})},e.prototype.getConfig=function(){var t={n:this.n},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="RepeatVector",e}(ur);St.registerClass(uHe);var lHe=function(n){function e(t){var r=n.call(this,t)||this;r.targetShape=t.targetShape;for(var i=0;i<r.targetShape.length;++i)r.isUnknown(r.targetShape[i])&&(r.targetShape[i]=null);return r}return mt(e,n),e.prototype.isUnknown=function(t){return t<0||t==null},e.prototype.fixUnknownDimension=function(t,r){for(var i="Total size of new array must be unchanged.",a=r.slice(),o=1,s=null,u=0;u<a.length;++u){var l=a[u];if(this.isUnknown(l)){if(s!==null)throw new Ke("Can only specifiy one unknown dimension.");s=u}else o*=l}var h=Um(t);if(s!==null){if(o===0||h%o!=0)throw new Ke(i);a[s]=h/o}else if(h!==o)throw new Ke(i);return a},e.prototype.computeOutputShape=function(t){for(var r=!1,i=0;i<t.length;++i)if(this.isUnknown(t[i])){r=!0;break}return r?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))},e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r);var a=Mn(t),o=a.shape,s=o.slice(0,1).concat(i.fixUnknownDimension(o.slice(1),i.targetShape));return a.reshape(s)})},e.prototype.getConfig=function(){var t={targetShape:this.targetShape},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Reshape",e}(ur);St.registerClass(lHe);var cHe=function(n){function e(t){var r=n.call(this,t)||this;if(t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+t.dims+" instead.");var i=vh(1,t.dims.length+1);if(!gn.arraysEqual(t.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=t.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Vs({ndim:r.dims.length+1})],r}return mt(e,n),e.prototype.computeOutputShape=function(t){var r=(t=gi(t)).slice();return this.dims.forEach(function(i,a){r[a+1]=t[i]}),r},e.prototype.call=function(t,r){return gr(Mn(t),this.dimsIncludingBatch)},e.prototype.getConfig=function(){var t={dims:this.dims},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Permute",e}(ur);St.registerClass(cHe);var hHe=function(n){function e(t){var r=n.call(this,t??{})||this;return r.supportsMasking=!0,r.maskValue=t!=null?t.maskValue==null?0:t.maskValue:0,r}return mt(e,n),e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this),r={maskValue:this.maskValue};return Object.assign(r,t),r},e.prototype.computeMask=function(t,r){var i=Mn(t);return wO(wE(i,this.maskValue),-1)},e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r);var a=Mn(t),o=wO(wE(a,i.maskValue),-1,!0);return a.mul(o.asType(a.dtype))})},e.className="Masking",e}(ur);St.registerClass(hHe);var fHe=function(n){function e(t){var r=n.call(this,t)||this;if(r.embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){var i=null;t.batchSize!=null&&(i=t.batchSize),t.inputLength==null?r.batchInputShape=[i,null]:r.batchInputShape=[i].concat(_i(t.inputLength))}return r.inputDim=t.inputDim,Zo(r.inputDim,"inputDim"),r.outputDim=t.outputDim,Zo(r.outputDim,"outputDim"),r.embeddingsInitializer=Ni(t.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=Oi(t.embeddingsRegularizer),r.activityRegularizer=Oi(t.activityRegularizer),r.embeddingsConstraint=Pa(t.embeddingsConstraint),r.maskZero=t.maskZero,r.supportsMasking=t.maskZero,r.inputLength=t.inputLength,r}return mt(e,n),e.prototype.build=function(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},e.prototype.warnOnIncompatibleInputShape=function(t){},e.prototype.computeMask=function(t,r){var i=this;return Ze(function(){return i.maskZero?(t=Mn(t),wE(t,ar(t))):null})},e.prototype.computeOutputShape=function(t){if(t=gi(t),this.inputLength==null)return t.concat([this.outputDim]);var r=_i(this.inputLength);if(r.length!==t.length-1)throw new Ke('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);for(var i=0,a=0;a<r.length;++a){var o=r[a],s=t[a+1];if(o!=null&&s!=null&&o!==s)throw new Ke('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);o==null&&(r[i]=s),i++}return[t[0]].concat(r,[this.outputDim])},e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r);var a=Mn(t);return a.dtype!=="int32"&&(a=qD(a,"int32")),gge(i.embeddings.read(),a.as1D()).reshape(gi(i.computeOutputShape(a.shape)))})},e.prototype.getConfig=function(){var t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:yr(this.embeddingsInitializer),embeddingsRegularizer:jn(this.embeddingsRegularizer),activityRegularizer:jn(this.activityRegularizer),embeddingsConstraint:Gr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Embedding",e}(ur);St.registerClass(fHe);var U1=function(n){function e(t){var r=n.call(this,t||{})||this;return r.supportsMasking=!0,r}return mt(e,n),e.prototype.mergeFunction=function(t){throw new Vn},e.prototype.computeElementwiseOpOutputShape=function(t,r){if(t==null||r==null)return null;if(t.length<r.length)return this.computeElementwiseOpOutputShape(r,t);if(r.length===0)return t;for(var i=t.slice(0,t.length-r.length),a=0;a<r.length;++a){var o=t[t.length-r.length+a],s=r[a];if(o==null||s==null||o<0||s<0)i.push(null);else if(o===1)i.push(s);else if(s===1)i.push(o);else{if(o!==s)throw new Ke("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(r));i.push(o)}}return i},e.prototype.build=function(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[gi(t)]),(t=t).length<2)throw new Ke("A merge layer should be called on an Array of at least 2 inputs. Got "+t.length+" input(s).");for(var r=[],i=0,a=t;i<a.length;i++)(u=a[i])!=null&&u[0]!==null&&r.push(u[0]);if((r=Mm(r)).length>1)throw new Ke("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(t)+".");for(var o=t[0]==null?null:t[0].slice(1),s=1;s<t.length;++s){var u=t[s]==null?null:t[s].slice(1);o=this.computeElementwiseOpOutputShape(o,u)}var l=t.map(function(h){return h.length});t.indexOf(null)===-1&&Mm(l).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0},e.prototype.call=function(t,r){var i=this;return Ze(function(){if(t=t,i.reshapeRequired){var a=[],o=t.map(function(A){return A.rank});if(o.indexOf(null)===-1){for(var s=Jm(o),u=0,l=t;u<l.length;u++){for(var h=(m=l[u]).rank,c=0;c<s-h;++c)m=VD(m,1);a.push(m)}return i.mergeFunction(a)}for(var f=!1,d=0,p=t;d<p.length;d++){var m;if((h=(m=p[d]).rank)==null){var g=m.shape,y=g[0],v=g.slice(1).concat([y]),b=m.reshape([y].concat(Um(g.slice(1))));b=(b=gr(b,[1,0])).reshape(v),a.push(b),f=!0}else if(h>1){var w=vh(1,h).concat([0]);a.push(gr(m,w)),f=!0}else a.push(m)}var x=i.mergeFunction(a),S=x.rank;if(f)if(S==null){var E=x.shape;v=[y=E[E.length-1]].concat(E.slice(0,E.length-1)),x=gr(x.reshape([-1,y]),[1,0]).reshape(v)}else S>1&&(w=[S-1].concat(vh(0,S-1)),x=gr(x,w));return x}return i.mergeFunction(t)})},e.prototype.computeOutputShape=function(t){var r;r=(t=t)[0]==null?null:t[0].slice(1);for(var i=1;i<t.length;++i){var a=t[i]==null?null:t[i].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}for(var o=[],s=0,u=t;s<u.length;s++)(a=u[s])!=null&&a[0]!==null&&o.push(a[0]);return r=(o=Mm(o)).length===1?o.concat(r):[null].concat(r)},e.prototype.computeMask=function(t,r){return Ze(function(){if(r==null)return null;if(!Array.isArray(r))throw new Ke("`mask` should be an Array");if(!Array.isArray(t))throw new Ke("`inputs` should be an Array");if(r.length!==t.length)throw new Ke("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths ("+t.length+" vs "+r.length+")");if(r.every(function(o){return o==null}))return null;for(var i=(r=r.map(function(o){return o==null?o:oc(o,0)}))[0],a=1;a<r.length-1;++a)i=yy(i,r[a]);return i})},e}(ur),dHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.mergeFunction=function(t){return Ze(function(){for(var r=t[0].clone(),i=1;i<t.length;++i)r=qn(r,t[i]);return r})},e.className="Add",e}(U1);St.registerClass(dHe);var pHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.mergeFunction=function(t){return Ze(function(){for(var r=t[0].clone(),i=1;i<t.length;++i)r=rn(r,t[i]);return r})},e.className="Multiply",e}(U1);St.registerClass(pHe);var gHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.mergeFunction=function(t){return Ze(function(){for(var r=t[0].clone(),i=1;i<t.length;++i)r=qn(r,t[i]);return rn(1/t.length,r)})},e.className="Average",e}(U1);St.registerClass(gHe);var mHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.mergeFunction=function(t){return Ze(function(){for(var r=t[0],i=1;i<t.length;++i)r=zp(r,t[i]);return r})},e.className="Maximum",e}(U1);St.registerClass(mHe);var yHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.mergeFunction=function(t){return Ze(function(){for(var r=t[0],i=1;i<t.length;++i)r=LD(r,t[i]);return r})},e.className="Minimum",e}(U1);St.registerClass(yHe);var vHe=function(n){function e(t){var r=n.call(this,t)||this;return r.DEFAULT_AXIS=-1,t==null&&(t={}),r.axis=t.axis==null?r.DEFAULT_AXIS:t.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return mt(e,n),e.prototype.build=function(t){if(!Array.isArray(t)||!Array.isArray(t[0])||t.length===1)throw new Ke("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var r=!0,i=0,a=t=t;i<a.length;i++)if((f=a[i])!=null){r=!1;break}if(!r){for(var o=[],s=0;s<t.length;++s){var u=t[s].slice();u.splice(this.axis,1);for(var l=!1,h=0,c=o;h<c.length;h++){var f=c[h];if(gn.arraysEqual(f,u)){l=!0;break}}l||o.push(u)}if(o.length>1)throw new Ke("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}},e.prototype.mergeFunction=function(t){var r=this;return Ze(function(){return pge(t,r.axis)})},e.prototype.computeOutputShape=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Ke("A `Concatenate` layer should be called on a list of inputs.");for(var r=t,i=r[0].slice(),a=this.axis<0?i.length+this.axis:this.axis,o=0,s=r.slice(1);o<s.length;o++){var u=s[o];if(i[a]==null||u[a]==null){i[a]=null;break}i[a]+=u[a]}return i},e.prototype.computeMask=function(t,r){var i=this;if(r==null)return null;if(!Array.isArray(r))throw new Ke("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new Ke("`inputs` should be an array for Concatenate");if(r.length!==t.length)throw new Ke("Mismatch in the length of mask ("+r.length+") and the legnth of inputs ("+t.length+")");return Ze(function(){var a=!0;if(r.forEach(function(l){l==null||(a=!1)}),a)return null;for(var o=[],s=0;s<t.length;++s)r[s]==null?o.push(gc(t[s]).asType("bool")):r[s].rank<t[s].rank?o.push(oc(r[s],-1)):o.push(r[s]);var u=Yo(o,i.axis);return UW(u,-1,!1)})},e.prototype.getConfig=function(){var t={axis:this.axis},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Concatenate",e}(U1);function tS(n,e){for(;n<0;)n+=e;return n}function bHe(n,e,t){if(n.shape.length>3||e.shape.length>3)throw new Vn("batchDot is not implemented for tensors of 4D or higher rank yet");if(gn.assert(n.shape.length>=2,function(){return"batchDot requires the rank of x to be >= 2, but got "+n.shape.length}),gn.assert(n.shape.length>=2,function(){return"batchDot requires the rank of y to be >= 2, but got "+e.shape.length}),typeof t=="number"&&(t=[t,t]),n.dtype==="complex64"||e.dtype==="complex64")throw new Vn("batchDot is not implemented for complex64-type Tensors yet.");var r=n.shape.length,i=e.shape.length;t==null&&(t=[r-1,i-2]);var a=t;return Ze(function(){var o,s;if(r>i){o=r-i;for(var u=[],l=0;l<o;++l)u.push(1);e=e.reshape(e.shape.concat(u))}else if(i>r){for(o=i-r,u=[],l=0;l<o;++l)u.push(1);n=n.reshape(n.shape.concat(u))}else o=0;if(n.shape.length===2&&e.shape.length===2)s=a[0]===a[1]?n.mulStrict(e).sum(a[0]):n.transpose([1,0]).mulStrict(e).sum(a[1]);else{var h=a[0]!==n.shape.length-1,c=a[1]===e.shape.length-1;s=n.matMul(e,h,c)}if(o>0){var f=void 0,d=[];for(l=f=r>i?r+i-3:r-1;l<f+o;++l)d.push(l);s=s.squeeze(d)}return s.shape.length===1&&(s=s.expandDims(1)),s})}St.registerClass(vHe);var wHe=function(n){function e(t){var r=n.call(this,t)||this;return r.axes=t.axes,r.normalize=t.normalize!=null&&t.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return mt(e,n),e.prototype.build=function(t){gn.assert(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var r=t[0],i=t[1];if(r.length>3||i.length>3)throw new Vn("Dot layer does not support tensors of 4D or higher rank yet.");var a=this.interpretAxes(r,i);if(r[a[0]]!==i[a[1]])throw new Ke("Dimension incompatibility: "+r[a[0]]+" !== "+i[a[1]])},e.prototype.mergeFunction=function(t){if(t.length!==2)throw new Ke("A `Dot` layer must be called on exactly 2 inputs, but received "+t.length+" input(s).");var r,i=t[0],a=t[1];return r=Array.isArray(this.axes)?this.axes.map(function(o,s){return tS(o,t[s].shape.length)}):[tS(this.axes,i.shape.length),tS(this.axes,a.shape.length)],this.normalize&&(i=EO(i,r[0]),a=EO(a,r[1])),bHe(i,a,r)},e.prototype.interpretAxes=function(t,r){return Array.isArray(this.axes)?this.axes:[tS(this.axes,t.length),tS(this.axes,r.length)]},e.prototype.computeOutputShape=function(t){gn.assert(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var r=t[0].slice(),i=t[1].slice();if(r.length>3||i.length>3)throw new Vn("Dot layer does not support tensors of 4D or higher rank yet.");var a=this.interpretAxes(r,i);r.splice(a[0],1),i.splice(a[1],1),i.splice(0,1);var o=r.concat(i);return o.length===1&&o.push(1),o},e.prototype.computeMask=function(t,r){return null},e.prototype.getConfig=function(){var t={axes:this.axes,normalize:this.normalize},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="Dot",e}(U1);St.registerClass(wHe);var xHe=function(n){function e(t){var r=n.call(this,t)||this;return r.supportsMasking=!0,r.stddev=t.stddev,r}return mt(e,n),e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this),r={stddev:this.stddev};return Object.assign(r,t),r},e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r);var a=Mn(t);return rx(function(){return f4(a.shape,0,i.stddev).add(a)},function(){return a},r.training||!1)})},e.className="GaussianNoise",e}(ur);St.registerClass(xHe);var _He=function(n){function e(t){var r=n.call(this,t)||this;return r.supportsMasking=!0,r.rate=t.rate,r}return mt(e,n),e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this),r={rate:this.rate};return Object.assign(r,t),r},e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r);var a=Mn(t);return i.rate>0&&i.rate<1?rx(function(){var o=Math.sqrt(i.rate/(1-i.rate));return a.mul(f4(a.shape,1,o))},function(){return a},r.training||!1):a})},e.className="GaussianDropout",e}(ur);St.registerClass(_He);var SHe=function(n){function e(t){var r=n.call(this,t)||this;return r.supportsMasking=!0,r.rate=t.rate,r.noiseShape=t.noiseShape,r}return mt(e,n),e.prototype._getNoiseShape=function(t){return this.noiseShape||Mn(t).shape},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var t=n.prototype.getConfig.call(this),r={rate:this.rate};return Object.assign(r,t),r},e.prototype.call=function(t,r){var i=this;return Ze(function(){if(i.rate<1&&i.rate>0){var a=i._getNoiseShape(t);return rx(function(){var o=Mn(t),s=-1.7580993408473766,u=i4(Tx(a),i.rate);u=qD(u,"float32");var l=Math.pow((1-i.rate)*(1+i.rate*Math.pow(s,2)),-.5),h=-l*s*i.rate;return o.mul(u).add(u.add(-1).mul(s)).mul(l).add(h)},function(){return Mn(t)},r.training||!1)}return t})},e.className="AlphaDropout",e}(ur);function CE(n,e,t,r,i,a){var o;if(a===void 0&&(a=.001),n.rank===2)o=ope(n,e,t,r,i,a);else if(n.rank===3)o=lpe(n,e,t,r,i,a);else{if(n.rank!==4)throw new Vn("batchNormalization is not implemented for array of rank "+n.rank+" yet");o=hpe(n,e,t,r,i,a)}return o}function CHe(n,e,t,r,i){return i===void 0&&(i=.001),Ze(function(){var a=o4(n,r),o=a.mean,s=a.variance;return[CE(n,o,s,t,e,i),o,s]})}function EHe(n,e,t,r,i){return i===void 0&&(i=.001),Ze(function(){for(var a=o4(n,r),o=a.mean,s=a.variance,u=[],l=0,h=vh(0,n.rank);l<h.length;l++){var c=h[l];r.indexOf(c)!==-1?u.push(1):u.push(n.shape[c])}var f=o.reshape(u),d=s.reshape(u),p=e==null?null:e.reshape(u),m=t==null?null:t.reshape(u);return[CE(n,f,d,m,p,i),o,s]})}function THe(n,e,t,r,i){return i===void 0&&(i=.001),gn.arraysEqual(r.slice().sort(),vh(0,n.rank-1))?CHe(n,e,t,r,i):EHe(n,e,t,r,i)}St.registerClass(SHe);var DHe=function(n){function e(t){var r=this;return t==null&&(t={}),(r=n.call(this,t)||this).supportsMasking=!0,r.axis=t.axis==null?-1:t.axis,r.momentum=t.momentum==null?.99:t.momentum,r.epsilon=t.epsilon==null?.001:t.epsilon,r.center=t.center==null||t.center,r.scale=t.scale==null||t.scale,r.betaInitializer=Ni(t.betaInitializer||"zeros"),r.gammaInitializer=Ni(t.gammaInitializer||"ones"),r.movingMeanInitializer=Ni(t.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=Ni(t.movingVarianceInitializer||"ones"),r.betaConstraint=Pa(t.betaConstraint),r.gammaConstraint=Pa(t.gammaConstraint),r.betaRegularizer=Oi(t.betaRegularizer),r.gammaRegularizer=Oi(t.gammaRegularizer),r}return mt(e,n),e.prototype.build=function(t){var r;t=gi(t);var i=this.axis>=0?this.axis:this.axis+t.length,a=t[i];if(a==null)throw new Ke("Axis "+i+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(t)+".");this.inputSpec=[new Vs({ndim:t.length,axes:(r={},r[i]=a,r)})];var o=[a];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0},e.prototype.call=function(t,r){var i=this;return Ze(function(){var a=r.training!=null&&r.training,o=Mn(t),s=o.shape,u=s.length,l=vh(0,u),h=i.axis>=0?i.axis:i.axis+u;l.splice(h,1);var c=_1(1,u);c[h]=s[h];var f=l.slice();f.sort();var d=!gn.arraysEqual(f,vh(0,u).slice(0,u-1));if(!a)return function(){if(d){var b=i.movingMean.read().reshape(c),w=i.movingVariance.read().reshape(c),x=i.center?i.beta.read().reshape(c):null,S=i.scale?i.gamma.read().reshape(c):null;return CE(o,b,w,x,S,i.epsilon)}return CE(o,i.movingMean.read(),i.movingVariance.read(),i.beta==null?null:i.beta.read(),i.gamma==null?null:i.gamma.read(),i.epsilon)}();var p=THe(o,i.gamma.read(),i.beta.read(),l,i.epsilon),m=p[0],g=p[1],y=p[2],v=function(b,w,x){Ze(function(){var S=1-x,E=b.read(),A=E.sub(w).mul(S);b.write(E.sub(A))})};return v(i.movingMean,g,i.momentum),v(i.movingVariance,y,i.momentum),m})},e.prototype.getConfig=function(){var t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yr(this.betaInitializer),gammaInitializer:yr(this.gammaInitializer),movingMeanInitializer:yr(this.movingMeanInitializer),movingVarianceInitializer:yr(this.movingVarianceInitializer),betaRegularizer:jn(this.betaRegularizer),gammaRegularizer:jn(this.gammaRegularizer),betaConstraint:Gr(this.betaConstraint),gammaConstraint:Gr(this.gammaConstraint)},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="BatchNormalization",e}(ur);St.registerClass(DHe);var AHe=function(n){function e(t){var r=this;if(t==null&&(t={}),(r=n.call(this,t)||this).axis=t.axis==null?-1:t.axis,typeof r.axis=="number"){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received "+r.axis)}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(r.axis));for(var i=0,a=r.axis;i<a.length;i++){var o=a[i];if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(r.axis))}}return r.epsilon=t.epsilon==null?.001:t.epsilon,r.center=t.center==null||t.center,r.scale=t.scale==null||t.scale,r.betaInitializer=Ni(t.betaInitializer||"zeros"),r.gammaInitializer=Ni(t.gammaInitializer||"ones"),r.betaRegularizer=Oi(t.betaRegularizer),r.gammaRegularizer=Oi(t.gammaRegularizer),r.supportsMasking=!0,r}return mt(e,n),e.prototype.build=function(t){var r=(t=gi(t)).length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(var i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=r);for(var a=0,o=this.axis;a<o.length;a++){var s=o[a];if(s<0||s>=r)throw new Error("Invalid axis: "+s)}if(this.axis.length!==Mm(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);var u=this.axis.map(function(l){return t[l]});this.scale?this.gamma=this.addWeight("gamma",u,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",u,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0},e.prototype.call=function(t,r){var i=this,a=Mn(t),o=a.shape,s=o.length;return Ze(function(){for(var u=o4(a,i.axis,!0),l=u.mean,h=u.variance,c=_1(1,s),f=0,d=i.axis;f<d.length;f++){var p=d[f];c[p]=o[p]}for(var m=function(x){return x!=null&&x.shape.length!==s&&i.axis!==[s-1]?x.reshape(c):x},g=m(i.gamma.read()),y=m(i.beta.read()),v=[],b=[],w=0;w<s;++w)i.axis.indexOf(w)!==-1?(v.push(o[w]),b.push(1)):(v.push(1),b.push(o[w]));return l=l.tile(v),h=h.tile(v),g=g.tile(b),y=y.tile(b),CE(a,l,h,y,g,i.epsilon)})},e.prototype.getConfig=function(){var t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yr(this.betaInitializer),gammaInitializer:yr(this.gammaInitializer),betaRegularizer:jn(this.betaRegularizer),gammaRegularizer:jn(this.gammaRegularizer)},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="LayerNormalization",e}(ur);function kHe(n,e,t){return Ze(function(){if(n.rank!==4)throw new Ke("temporalPadding expects input tensor to be 4-D, but received a "+n.rank+"-D tensor.");if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Ke("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(t==null&&(t=yh()),t!=="channelsLast"&&t!=="channelsFirst")throw new Ke("Unknown data format: "+t+". Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r=t==="channelsFirst"?[[0,0],[0,0],e[0],e[1]]:[[0,0],e[0],e[1],[0,0]],Wp(n,r)})}St.registerClass(AHe);var NHe=function(n){function e(t){var r=this;if(t==null&&(t={}),(r=n.call(this,t)||this).dataFormat=t.dataFormat==null?yh():t.dataFormat,t.padding==null)r.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")r.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new Ke("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+t.padding.length+" array.");var i=void 0,a=void 0;if(typeof t.padding[0]=="number")i=[t.padding[0],t.padding[0]],a=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new Ke("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+t.padding[0].length+" array.");if(i=t.padding[0],t.padding[1].length!==2)throw new Ke("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+t.padding[1].length+" array.");a=t.padding[1]}r.padding=[i,a]}return r.inputSpec=[new Vs({ndim:4})],r}return mt(e,n),e.prototype.computeOutputShape=function(t){var r,i;return t=gi(t),this.dataFormat==="channelsFirst"?(r=t[2]!=null&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,i=t[3]!=null&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],r,i]):(r=t[1]!=null&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,i=t[2]!=null&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],r,i,t[3]])},e.prototype.call=function(t,r){var i=this;return Ze(function(){return kHe(Mn(t),i.padding,i.dataFormat)})},e.prototype.getConfig=function(){var t={padding:this.padding,dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="ZeroPadding2D",e}(ur);function b4(n,e,t,r,i,a){return Ze(function(){var o;Ua(i),lge(a),wc(r),t==null&&(t=[1,1]),r==null&&(r="valid"),i==null&&(i=yh()),a==null&&(a="max"),n=sj(n,i);var s=r==="same"?"same":"valid";return o=a==="max"?IW(n,e,t,s):FW(n,e,t,s),i==="channelsFirst"&&(o=gr(o,[0,3,1,2])),o})}function Hge(n,e,t,r,i,a){return Ze(function(){var o;Ua(i),lge(a),wc(r),t==null&&(t=[1,1,1]),r==null&&(r="valid"),i==null&&(i=yh()),a==null&&(a="max"),n=jge(n,i);var s=r==="same"?"same":"valid";return o=a==="max"?PW(n,e,t,s):LW(n,e,t,s),i==="channelsFirst"&&(o=gr(o,[0,4,1,2,3])),o})}St.registerClass(NHe);var Gge=function(n){function e(t){var r=this;if(t.poolSize==null&&(t.poolSize=2),r=n.call(this,t)||this,typeof t.poolSize=="number")r.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||t.poolSize.length!==1||typeof t.poolSize[0]!="number")throw new Ke("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));r.poolSize=t.poolSize}if(Zo(r.poolSize,"poolSize"),t.strides==null)r.strides=r.poolSize;else if(typeof t.strides=="number")r.strides=[t.strides];else{if(!Array.isArray(t.strides)||t.strides.length!==1||typeof t.strides[0]!="number")throw new Ke("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));r.strides=t.strides}return Zo(r.strides,"strides"),r.padding=t.padding==null?"valid":t.padding,wc(r.padding),r.inputSpec=[new Vs({ndim:3})],r}return mt(e,n),e.prototype.computeOutputShape=function(t){var r=bp((t=gi(t))[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],r,t[2]]},e.prototype.call=function(t,r){var i=this;return Ze(function(){i.invokeCallHook(t,r),t=VD(Mn(t),2);var a=i.poolingFunction(Mn(t),[i.poolSize[0],1],[i.strides[0],1],i.padding,"channelsLast");return XI(a,[2])})},e.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e}(ur),OHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.poolingFunction=function(t,r,i,a,o){return Ua(o),wc(a),b4(t,r,i,a,o,"max")},e.className="MaxPooling1D",e}(Gge);St.registerClass(OHe);var RHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.poolingFunction=function(t,r,i,a,o){return Ua(o),wc(a),b4(t,r,i,a,o,"avg")},e.className="AveragePooling1D",e}(Gge);St.registerClass(RHe);var Xge=function(n){function e(t){var r=this;if(t.poolSize==null&&(t.poolSize=[2,2]),(r=n.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)r.strides=r.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new Ke("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");r.strides=t.strides}else r.strides=[t.strides,t.strides];return Zo(r.poolSize,"poolSize"),Zo(r.strides,"strides"),r.padding=t.padding==null?"valid":t.padding,r.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ua(r.dataFormat),wc(r.padding),r.inputSpec=[new Vs({ndim:4})],r}return mt(e,n),e.prototype.computeOutputShape=function(t){t=gi(t);var r=this.dataFormat==="channelsFirst"?t[2]:t[1],i=this.dataFormat==="channelsFirst"?t[3]:t[2];return r=bp(r,this.poolSize[0],this.padding,this.strides[0]),i=bp(i,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],r,i]:[t[0],r,i,t[3]]},e.prototype.call=function(t,r){var i=this;return Ze(function(){return i.invokeCallHook(t,r),i.poolingFunction(Mn(t),i.poolSize,i.strides,i.padding,i.dataFormat)})},e.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e}(ur),IHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.poolingFunction=function(t,r,i,a,o){return Ua(o),wc(a),b4(t,r,i,a,o,"max")},e.className="MaxPooling2D",e}(Xge);St.registerClass(IHe);var FHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.poolingFunction=function(t,r,i,a,o){return Ua(o),wc(a),b4(t,r,i,a,o,"avg")},e.className="AveragePooling2D",e}(Xge);St.registerClass(FHe);var Kge=function(n){function e(t){var r=this;if(t.poolSize==null&&(t.poolSize=[2,2,2]),(r=n.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)r.strides=r.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new Ke("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+t.strides.length+".");r.strides=t.strides}else r.strides=[t.strides,t.strides,t.strides];return Zo(r.poolSize,"poolSize"),Zo(r.strides,"strides"),r.padding=t.padding==null?"valid":t.padding,r.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ua(r.dataFormat),wc(r.padding),r.inputSpec=[new Vs({ndim:5})],r}return mt(e,n),e.prototype.computeOutputShape=function(t){t=gi(t);var r=this.dataFormat==="channelsFirst"?t[2]:t[1],i=this.dataFormat==="channelsFirst"?t[3]:t[2],a=this.dataFormat==="channelsFirst"?t[4]:t[3];return r=bp(r,this.poolSize[0],this.padding,this.strides[0]),i=bp(i,this.poolSize[1],this.padding,this.strides[1]),a=bp(a,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],r,i,a]:[t[0],r,i,a,t[4]]},e.prototype.call=function(t,r){var i=this;return Ze(function(){return i.invokeCallHook(t,r),i.poolingFunction(Mn(t),i.poolSize,i.strides,i.padding,i.dataFormat)})},e.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e}(ur),PHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.poolingFunction=function(t,r,i,a,o){return Ua(o),wc(a),Hge(t,r,i,a,o,"max")},e.className="MaxPooling3D",e}(Kge);St.registerClass(PHe);var LHe=function(n){function e(t){return n.call(this,t)||this}return mt(e,n),e.prototype.poolingFunction=function(t,r,i,a,o){return Ua(o),wc(a),Hge(t,r,i,a,o,"avg")},e.className="AveragePooling3D",e}(Kge);St.registerClass(LHe);var Yge=function(n){function e(t){var r=n.call(this,t)||this;return r.inputSpec=[new Vs({ndim:3})],r}return mt(e,n),e.prototype.computeOutputShape=function(t){return[t[0],t[2]]},e.prototype.call=function(t,r){throw new Vn},e}(ur),MHe=function(n){function e(t){return n.call(this,t||{})||this}return mt(e,n),e.prototype.call=function(t,r){return Ze(function(){var i=Mn(t);return Ia(i,1)})},e.className="GlobalAveragePooling1D",e}(Yge);St.registerClass(MHe);var UHe=function(n){function e(t){return n.call(this,t||{})||this}return mt(e,n),e.prototype.call=function(t,r){return Ze(function(){var i=Mn(t);return w1(i,1)})},e.className="GlobalMaxPooling1D",e}(Yge);St.registerClass(UHe);var Qge=function(n){function e(t){var r=n.call(this,t)||this;return r.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ua(r.dataFormat),r.inputSpec=[new Vs({ndim:4})],r}return mt(e,n),e.prototype.computeOutputShape=function(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]},e.prototype.call=function(t,r){throw new Vn},e.prototype.getConfig=function(){var t={dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e}(ur),BHe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.call=function(t,r){var i=this;return Ze(function(){var a=Mn(t);return i.dataFormat==="channelsLast"?Ia(a,[1,2]):Ia(a,[2,3])})},e.className="GlobalAveragePooling2D",e}(Qge);St.registerClass(BHe);var zHe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e.prototype.call=function(t,r){var i=this;return Ze(function(){var a=Mn(t);return i.dataFormat==="channelsLast"?w1(a,[1,2]):w1(a,[2,3])})},e.className="GlobalMaxPooling2D",e}(Qge);function Zge(n,e,t,r){if(Array.isArray(n)){if(e!=null||t!=null)throw new Ke("When inputs is an array, neither initialState or constants should be provided");r!=null&&(t=n.slice(n.length-r,n.length),n=n.slice(0,n.length-r)),n.length>1&&(e=n.slice(1,n.length)),n=n[0]}function i(a){return a==null||Array.isArray(a)?a:[a]}return{inputs:n,initialState:e=i(e),constants:t=i(t)}}function Jge(n,e,t,r,i,a,o,s){return r===void 0&&(r=!1),o===void 0&&(o=!1),s===void 0&&(s=!1),Ze(function(){var u=e.shape.length;if(u<3)throw new Ke("Input should be at least 3D, but is "+u+"D.");var l=[1,0].concat(vh(2,u));e=gr(e,l),a!=null,o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&((i=i.asType("bool").asType("float32")).rank===u-1&&(i=oc(i,-1)),i=gr(i,l)),r&&(e=Op(e,0),i!=null&&(i=Op(i,0)));var h,c,f=[],d=t,p=e.shape[0],m=y1(e);i!=null&&(c=y1(i));for(var g,y=function(b){var w=m[b],x=Ze(function(){return n(w,d)});if(i==null)h=x[0],d=x[1];else{var S=Ze(function(){var E=c[b],A=gc(E).sub(E);return{output:x[0].mul(E).addStrict(d[0].mul(A)),newStates:d.map(function(k,T){return x[1][T].mul(E).addStrict(k.mul(A))})}});h=S.output,d=S.newStates}s&&f.push(h)},v=0;v<p;++v)y(v);return s&&(g=mh(f,1)),[h,g,d]})}St.registerClass(zHe);var w4=function(n){function e(t){var r,i=n.call(this,t)||this;if(t.cell==null)throw new Ke("cell property is missing for the constructor of RNN.");if((r=Array.isArray(t.cell)?new rme({cells:t.cell}):t.cell).stateSize==null)throw new Ke("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return i.cell=r,i.returnSequences=t.returnSequences!=null&&t.returnSequences,i.returnState=t.returnState!=null&&t.returnState,i.goBackwards=t.goBackwards!=null&&t.goBackwards,i._stateful=t.stateful!=null&&t.stateful,i.unroll=t.unroll!=null&&t.unroll,i.supportsMasking=!0,i.inputSpec=[new Vs({ndim:3})],i.stateSpec=null,i.states_=null,i.numConstants=null,i.keptStates=[],i}return mt(e,n),e.prototype.getStates=function(){return this.states_==null?vh(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(t){return null}):this.states_},e.prototype.setStates=function(t){this.states_=t},e.prototype.computeOutputShape=function(t){nB(t)&&(t=t[0]),t=t;var r=this.cell.stateSize;Array.isArray(r)||(r=[r]);var i,a=r[0];if(i=this.returnSequences?[t[0],t[1],a]:[t[0],a],this.returnState){for(var o=[],s=0,u=r;s<u.length;s++){var l=u[s];o.push([t[0],l])}return[i].concat(o)}return i},e.prototype.computeMask=function(t,r){var i=this;return Ze(function(){Array.isArray(r)&&(r=r[0]);var a=i.returnSequences?r:null;if(i.returnState){var o=i.states.map(function(s){return null});return[a].concat(o)}return a})},Object.defineProperty(e.prototype,"states",{get:function(){if(this.states_==null){for(var t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,r=[],i=0;i<t;++i)r.push(null);return r}return this.states_},set:function(t){this.states_=t},enumerable:!0,configurable:!0}),e.prototype.build=function(t){if(this.numConstants!=null)throw new Vn("Constants support is not implemented in RNN yet.");nB(t)&&(t=t[0]),t=t;var r=this.stateful?t[0]:null,i=t[t.length-1];this.inputSpec[0]=new Vs({shape:[r,null,i]});var a,o=[t[0]].concat(t.slice(2));if(this.cell.build(o),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],this.stateSpec!=null){if(!gn.arraysEqual(this.stateSpec.map(function(s){return s.shape[s.shape.length-1]}),a))throw new Ke("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=a.map(function(s){return new Vs({shape:[null,s]})});this.stateful&&this.resetStates()},e.prototype.resetStates=function(t,r){var i=this;r===void 0&&(r=!1),Ze(function(){if(!i.stateful)throw new vv("Cannot call resetStates() on an RNN Layer that is not stateful.");var a=i.inputSpec[0].shape[0];if(a==null)throw new Ke("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(i.states_==null)Array.isArray(i.cell.stateSize)?i.states_=i.cell.stateSize.map(function(h){return Lr([a,h])}):i.states_=[Lr([a,i.cell.stateSize])];else if(t==null)rr(i.states_),i.keptStates!=null&&(rr(i.keptStates),i.keptStates=[]),Array.isArray(i.cell.stateSize)?i.states_=i.cell.stateSize.map(function(h){return Lr([a,h])}):i.states_[0]=Lr([a,i.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==i.states_.length)throw new Ke("Layer "+i.name+" expects "+i.states_.length+" state(s), but it received "+t.length+" state value(s). Input received: "+t);r===!0?i.keptStates.push(i.states_.slice()):rr(i.states_);for(var o=0;o<i.states_.length;++o){var s=t[o],u=Array.isArray(i.cell.stateSize)?i.cell.stateSize[o]:i.cell.stateSize,l=[a,u];if(!gn.arraysEqual(s.shape,l))throw new Ke("State "+o+" is incompatible with layer "+i.name+": expected shape="+l+", received shape="+s.shape);i.states_[o]=s}}i.states_=i.states_.map(function(h){return kp(h.clone())})})},e.prototype.apply=function(t,r){var i=r==null?null:r.initialState,a=r==null?null:r.constants;r==null&&(r={});var o=Zge(t,i,a,this.numConstants);t=o.inputs,i=o.initialState,a=o.constants;var s=[],u=[];if(i!=null){r.initialState=i,s=s.concat(i),this.stateSpec=[];for(var l=0,h=i;l<h.length;l++){var c=h[l];this.stateSpec.push(new Vs({shape:c.shape}))}u=u.concat(this.stateSpec)}if(a!=null&&(r.constants=a,s=s.concat(a),this.numConstants=a.length),s[0]instanceof Rf){var f=[t].concat(s),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;var m=n.prototype.apply.call(this,f,r);return this.inputSpec=p,m}return n.prototype.apply.call(this,t,r)},e.prototype.call=function(t,r){var i=this;return Ze(function(){var a=r==null?null:r.mask,o=r==null?null:r.training,s=r==null?null:r.initialState;t=Mn(t),s==null&&(s=i.stateful?i.states_:i.getInitialState(t));var u=Array.isArray(i.cell.stateSize)?i.cell.stateSize.length:1;if(s.length!==u)throw new Ke("RNN Layer has "+u+" state(s) but was passed "+s.length+" initial state(s).");i.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var l={training:o},h=Jge(function(m,g){var y=i.cell.call([m].concat(g),l);return[y[0],y.slice(1)]},t,s,i.goBackwards,a,null,i.unroll,i.returnSequences),c=h[0],f=h[1],d=h[2];i.stateful&&i.resetStates(d,o);var p=i.returnSequences?f:c;return i.returnState?[p].concat(d):p})},e.prototype.getInitialState=function(t){var r=this;return Ze(function(){var i=Lr(t.shape);return i=VD(i=Za(i,[1,2])),Array.isArray(r.cell.stateSize)?r.cell.stateSize.map(function(a){return a>1?eB(i,[1,a]):i}):r.cell.stateSize>1?[eB(i,[1,r.cell.stateSize])]:[i]})},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),e.prototype.setFastWeightInitDuringBuild=function(t){n.prototype.setFastWeightInitDuringBuild.call(this,t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)},e.prototype.getConfig=function(){var t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();t.cell={className:this.cell.getClassName(),config:r};var i=n.prototype.getConfig.call(this);return Object.assign(t,i),t},e.fromConfig=function(t,r,i){i===void 0&&(i={});var a=vp(r.cell,i);return new t(Object.assign(r,{cell:a}))},e.className="RNN",e}(ur);St.registerClass(w4);var x4=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return mt(e,n),e}(ur),eme=function(n){function e(t){var r=n.call(this,t)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=t.units,Zo(r.units,"units"),r.activation=ey(t.activation==null?r.DEFAULT_ACTIVATION:t.activation),r.useBias=t.useBias==null||t.useBias,r.kernelInitializer=Ni(t.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Ni(t.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Ni(t.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Oi(t.kernelRegularizer),r.recurrentRegularizer=Oi(t.recurrentRegularizer),r.biasRegularizer=Oi(t.biasRegularizer),r.kernelConstraint=Pa(t.kernelConstraint),r.recurrentConstraint=Pa(t.recurrentConstraint),r.biasConstraint=Pa(t.biasConstraint),r.dropout=nx([1,Jm([0,t.dropout==null?0:t.dropout])]),r.recurrentDropout=nx([1,Jm([0,t.recurrentDropout==null?0:t.recurrentDropout])]),r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return mt(e,n),e.prototype.build=function(t){t=gi(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},e.prototype.call=function(t,r){var i=this;return Ze(function(){if((t=t).length!==2)throw new Ke("SimpleRNNCell expects 2 input Tensors, got "+t.length+".");var a=t[1];t=t[0];var o,s=r.training!=null&&r.training;0<i.dropout&&i.dropout<1&&i.dropoutMask==null&&(i.dropoutMask=ax(function(){return gc(t)},i.dropout,s)),0<i.recurrentDropout&&i.recurrentDropout<1&&i.recurrentDropoutMask==null&&(i.recurrentDropoutMask=ax(function(){return gc(a)},i.recurrentDropout,s));var u=i.dropoutMask,l=i.recurrentDropoutMask;o=yp(u!=null?rn(t,u):t,i.kernel.read()),i.bias!=null&&(o=$p(o,i.bias.read())),l!=null&&(a=rn(a,l));var h=qn(o,yp(a,i.recurrentKernel.read()));return i.activation!=null&&(h=i.activation.apply(h)),[h,h]})},e.prototype.getConfig=function(){var t={units:this.units,activation:Sl(this.activation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:Gr(this.kernelConstraint),recurrentConstraint:Gr(this.recurrentConstraint),biasConstraint:Gr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="SimpleRNNCell",e}(x4);St.registerClass(eme);var WHe=function(n){function e(t){return t.cell=new eme(t),n.call(this,t)||this}return mt(e,n),e.prototype.call=function(t,r){var i=this;return Ze(function(){i.cell.dropoutMask!=null&&(rr(i.cell.dropoutMask),i.cell.dropoutMask=null),i.cell.recurrentDropoutMask!=null&&(rr(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=r==null?null:r.mask,o=r==null?null:r.training,s=r==null?null:r.initialState;return n.prototype.call.call(i,t,{mask:a,training:o,initialState:s})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var t={units:this.units,activation:Sl(this.activation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:Gr(this.kernelConstraint),recurrentConstraint:Gr(this.recurrentConstraint),biasConstraint:Gr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},r=n.prototype.getConfig.call(this);return delete r.cell,Object.assign(t,r),t},e.fromConfig=function(t,r){return new t(r)},e.className="SimpleRNN",e}(w4);St.registerClass(WHe);var tme=function(n){function e(t){var r=n.call(this,t)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=t.units,Zo(r.units,"units"),r.activation=ey(t.activation===void 0?r.DEFAULT_ACTIVATION:t.activation),r.recurrentActivation=ey(t.recurrentActivation===void 0?r.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),r.useBias=t.useBias==null||t.useBias,r.kernelInitializer=Ni(t.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Ni(t.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Ni(t.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Oi(t.kernelRegularizer),r.recurrentRegularizer=Oi(t.recurrentRegularizer),r.biasRegularizer=Oi(t.biasRegularizer),r.kernelConstraint=Pa(t.kernelConstraint),r.recurrentConstraint=Pa(t.recurrentConstraint),r.biasConstraint=Pa(t.biasConstraint),r.dropout=nx([1,Jm([0,t.dropout==null?0:t.dropout])]),r.recurrentDropout=nx([1,Jm([0,t.recurrentDropout==null?0:t.recurrentDropout])]),r.implementation=t.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return mt(e,n),e.prototype.build=function(t){var r=(t=gi(t))[t.length-1];this.kernel=this.addWeight("kernel",[r,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},e.prototype.call=function(t,r){var i=this;return Ze(function(){if((t=t).length!==2)throw new Ke("GRUCell expects 2 input Tensors (inputs, h, c), got "+t.length+".");var a=r.training!=null&&r.training,o=t[1];t=t[0],0<i.dropout&&i.dropout<1&&i.dropoutMask==null&&(i.dropoutMask=ax(function(){return gc(t)},i.dropout,a,3)),0<i.recurrentDropout&&i.recurrentDropout<1&&i.recurrentDropoutMask==null&&(i.recurrentDropoutMask=ax(function(){return gc(o)},i.recurrentDropout,a,3));var s,u,l,h=i.dropoutMask,c=i.recurrentDropoutMask;0<i.dropout&&i.dropout<1&&(t=rn(t,h[0]));var f=yp(t,i.kernel.read());i.useBias&&(f=$p(f,i.bias.read())),0<i.recurrentDropout&&i.recurrentDropout<1&&(o=rn(o,c[0]));var d=i.recurrentKernel.read(),p=Fm(d,[2*i.units,i.units],d.rank-1),m=p[0],g=p[1],y=yp(o,m),v=Fm(f,3,f.rank-1),b=v[0],w=v[1],x=v[2],S=Fm(y,2,y.rank-1),E=S[0],A=S[1];s=i.recurrentActivation.apply(qn(b,E)),u=i.recurrentActivation.apply(qn(w,A));var k=yp(rn(u,o),g);l=i.activation.apply(qn(x,k));var T=qn(rn(s,o),rn(qn(1,F1(s)),l));return[T,T]})},e.prototype.getConfig=function(){var t={units:this.units,activation:Sl(this.activation),recurrentActivation:Sl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:Gr(this.kernelConstraint),recurrentConstraint:Gr(this.recurrentConstraint),biasConstraint:Gr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="GRUCell",e}(x4);St.registerClass(tme);var jHe=function(n){function e(t){return t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new tme(t),n.call(this,t)||this}return mt(e,n),e.prototype.call=function(t,r){var i=this;return Ze(function(){i.cell.dropoutMask!=null&&(rr(i.cell.dropoutMask),i.cell.dropoutMask=null),i.cell.recurrentDropoutMask!=null&&(rr(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=r==null?null:r.mask,o=r==null?null:r.training,s=r==null?null:r.initialState;return n.prototype.call.call(i,t,{mask:a,training:o,initialState:s})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var t={units:this.units,activation:Sl(this.activation),recurrentActivation:Sl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:Gr(this.kernelConstraint),recurrentConstraint:Gr(this.recurrentConstraint),biasConstraint:Gr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=n.prototype.getConfig.call(this);return delete r.cell,Object.assign(t,r),t},e.fromConfig=function(t,r){return r.implmentation===0&&(r.implementation=1),new t(r)},e.className="GRU",e}(w4);St.registerClass(jHe);var nme=function(n){function e(t){var r=n.call(this,t)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=t.units,Zo(r.units,"units"),r.activation=ey(t.activation===void 0?r.DEFAULT_ACTIVATION:t.activation),r.recurrentActivation=ey(t.recurrentActivation===void 0?r.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),r.useBias=t.useBias==null||t.useBias,r.kernelInitializer=Ni(t.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Ni(t.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Ni(t.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=t.unitForgetBias,r.kernelRegularizer=Oi(t.kernelRegularizer),r.recurrentRegularizer=Oi(t.recurrentRegularizer),r.biasRegularizer=Oi(t.biasRegularizer),r.kernelConstraint=Pa(t.kernelConstraint),r.recurrentConstraint=Pa(t.recurrentConstraint),r.biasConstraint=Pa(t.biasConstraint),r.dropout=nx([1,Jm([0,t.dropout==null?0:t.dropout])]),r.recurrentDropout=nx([1,Jm([0,t.recurrentDropout==null?0:t.recurrentDropout])]),r.implementation=t.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return mt(e,n),e.prototype.build=function(t){var r,i,a=(t=gi(t))[t.length-1];if(this.kernel=this.addWeight("kernel",[a,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var o=this.biasInitializer,s=this.units;i=new((r=function(u){function l(){return u!==null&&u.apply(this,arguments)||this}return mt(l,u),l.prototype.apply=function(h,c){var f=o.apply([s]),d=new yge().apply([s]),p=o.apply([2*s]);return MQ(MQ(f,d),p)},l}(Eh)).className="CustomInit",r)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},e.prototype.call=function(t,r){var i=this;return Ze(function(){var a=r.training!=null&&r.training;if((t=t).length!==3)throw new Ke("LSTMCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");var o=t[1],s=t[2];t=t[0],0<i.dropout&&i.dropout<1&&i.dropoutMask==null&&(i.dropoutMask=ax(function(){return gc(t)},i.dropout,a,4)),0<i.recurrentDropout&&i.recurrentDropout<1&&i.recurrentDropoutMask==null&&(i.recurrentDropoutMask=ax(function(){return gc(o)},i.recurrentDropout,a,4));var u,l,h,c,f=i.dropoutMask,d=i.recurrentDropoutMask;0<i.dropout&&i.dropout<1&&(t=rn(t,f[0]));var p=yp(t,i.kernel.read());0<i.recurrentDropout&&i.recurrentDropout<1&&(o=rn(o,d[0])),p=qn(p,yp(o,i.recurrentKernel.read())),i.useBias&&(p=$p(p,i.bias.read()));var m=Fm(p,4,p.rank-1),g=m[0],y=m[1],v=m[2],b=m[3];u=i.recurrentActivation.apply(g),l=i.recurrentActivation.apply(y),h=qn(rn(l,s),rn(u,i.activation.apply(v))),c=i.recurrentActivation.apply(b);var w=rn(c,i.activation.apply(h));return[w,w,h]})},e.prototype.getConfig=function(){var t={units:this.units,activation:Sl(this.activation),recurrentActivation:Sl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:Gr(this.kernelConstraint),recurrentConstraint:Gr(this.recurrentConstraint),biasConstraint:Gr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.className="LSTMCell",e}(x4);St.registerClass(nme);var $He=function(n){function e(t){return t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new nme(t),n.call(this,t)||this}return mt(e,n),e.prototype.call=function(t,r){var i=this;return Ze(function(){i.cell.dropoutMask!=null&&(rr(i.cell.dropoutMask),i.cell.dropoutMask=null),i.cell.recurrentDropoutMask!=null&&(rr(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=r==null?null:r.mask,o=r==null?null:r.training,s=r==null?null:r.initialState;return n.prototype.call.call(i,t,{mask:a,training:o,initialState:s})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var t={units:this.units,activation:Sl(this.activation),recurrentActivation:Sl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:Gr(this.kernelConstraint),recurrentConstraint:Gr(this.recurrentConstraint),biasConstraint:Gr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=n.prototype.getConfig.call(this);return delete r.cell,Object.assign(t,r),t},e.fromConfig=function(t,r){return r.implmentation===0&&(r.implementation=1),new t(r)},e.className="LSTM",e}(w4);St.registerClass($He);var rme=function(n){function e(t){var r=n.call(this,t)||this;return r.cells=t.cells,r}return mt(e,n),Object.defineProperty(e.prototype,"stateSize",{get:function(){for(var t=[],r=0,i=this.cells.slice().reverse();r<i.length;r++){var a=i[r];Array.isArray(a.stateSize)?t.push.apply(t,a.stateSize):t.push(a.stateSize)}return t},enumerable:!0,configurable:!0}),e.prototype.call=function(t,r){var i=this;return Ze(function(){for(var a=(t=t).slice(1),o=[],s=0,u=i.cells.slice().reverse();s<u.length;s++){var l=u[s];Array.isArray(l.stateSize)?o.push(a.splice(0,l.stateSize.length)):o.push(a.splice(0,1))}o.reverse();for(var h,c=[],f=0;f<i.cells.length;++f)l=i.cells[f],a=o[f],h=f===0?[t[0]].concat(a):[h[0]].concat(a),h=l.call(h,r),c.push(h.slice(1));a=[];for(var d=0,p=c.slice().reverse();d<p.length;d++){var m=p[d];a.push.apply(a,m)}return[h[0]].concat(a)})},e.prototype.build=function(t){var r;nB(t)&&(t=t[0]),t=t,this.cells.forEach(function(i,a){Y0("RNNCell_"+a,function(){i.build(t),r=Array.isArray(i.stateSize)?i.stateSize[0]:i.stateSize,t=[t[0],r]})}),this.built=!0},e.prototype.getConfig=function(){for(var t=[],r=0,i=this.cells;r<i.length;r++){var a=i[r];t.push({className:a.getClassName(),config:a.getConfig()})}var o={cells:t},s=n.prototype.getConfig.call(this);return Object.assign(o,s),o},e.fromConfig=function(t,r,i){i===void 0&&(i={});for(var a=[],o=0,s=r.cells;o<s.length;o++){var u=s[o];a.push(vp(u,i))}return new t({cells:a})},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var t=[],r=0,i=this.cells;r<i.length;r++){var a=i[r];t.push.apply(t,a.trainableWeights)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],r=0,i=this.cells;r<i.length;r++){var a=i[r];t.push.apply(t,a.nonTrainableWeights)}if(!this.trainable){for(var o=[],s=0,u=this.cells;s<u.length;s++)a=u[s],o.push.apply(o,a.trainableWeights);return o.concat(t)}return t},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){for(var t=[],r=0,i=this.cells;r<i.length;r++){var a=i[r];t.push.apply(t,a.weights)}return rB(t)},e.prototype.setWeights=function(t){for(var r=[],i=0,a=this.cells;i<a.length;i++)for(var o=a[i],s=o.weights.length,u=t.splice(s),l=0;l<o.weights.length;++l)r.push([o.weights[l],u[l]]);nj(r)},e.className="StackedRNNCells",e}(x4);function ax(n,e,t,r){function i(){return mge(n(),e)}if(t===void 0&&(t=null),r===void 0&&(r=1),r>1){for(var a=[],o=0;o<r;o++)a.push(rx(i,n,t));return a.map(function(s){return kp(s.clone())})}return kp(rx(i,n,t).clone())}St.registerClass(rme);var ime=function(n){function e(t){var r=n.call(this,t)||this;return r.layer=t.layer,r}return mt(e,n),e.prototype.build=function(t){this.built=!0},Object.defineProperty(e.prototype,"trainable",{get:function(){return this.layer!=null&&this.layer.trainable},set:function(t){this.layer!=null&&(this.layer.trainable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.layer.getWeights()},e.prototype.setWeights=function(t){this.layer.setWeights(t)},e.prototype.getConfig=function(){var t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.prototype.setFastWeightInitDuringBuild=function(t){n.prototype.setFastWeightInitDuringBuild.call(this,t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)},e.fromConfig=function(t,r,i){i===void 0&&(i={});var a=vp(r.layer,i);delete r.layer;var o={layer:a};return Object.assign(o,r),new t(o)},e}(ur),qHe=function(n){function e(t){var r=n.call(this,t)||this;return r.supportsMasking=!0,r}return mt(e,n),e.prototype.build=function(t){if((t=gi(t)).length<3)throw new Ke("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];var r=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),n.prototype.build.call(this,t)},e.prototype.computeOutputShape=function(t){var r=[(t=gi(t))[0]].concat(t.slice(2)),i=this.layer.computeOutputShape(r),a=t[1];return[i[0],a].concat(i.slice(1))},e.prototype.call=function(t,r){var i=this;return Ze(function(){return Jge(function(a,o){return[Mn(i.layer.call(a,r)),[]]},t=Mn(t),[],!1,null,null,!1,!0)[1]})},e.className="TimeDistributed",e}(ime);function VHe(n){kx(Z$e,"BidirectionalMergeMode",n)}St.registerClass(qHe);var HHe="concat",GHe=function(n){function e(t){var r=n.call(this,t)||this,i=t.layer.getConfig(),a={};a.className=t.layer.getClassName(),a.config=i,r.forwardLayer=vp(a),i.goBackwards=i.goBackwards!==!0;var o={};if(o.className=t.layer.getClassName(),o.config=i,r.backwardLayer=vp(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=t.mergeMode===void 0?HHe:t.mergeMode,VHe(r.mergeMode),t.weights)throw new Vn("weights support is not implemented for Bidirectional layer yet.");return r._stateful=t.layer.stateful,r.returnSequences=t.layer.returnSequences,r.returnState=t.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=t.layer.inputSpec,r.numConstants=null,r}return mt(e,n),Object.defineProperty(e.prototype,"trainable",{get:function(){return this._trainable},set:function(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},e.prototype.setWeights=function(t){var r=t.length,i=Math.floor(r/2);this.forwardLayer.setWeights(t.slice(0,i)),this.backwardLayer.setWeights(t.slice(i))},e.prototype.computeOutputShape=function(t){var r,i,a,o=this.forwardLayer.computeOutputShape(t);return Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),o=o,this.returnState&&(a=o.slice(1)),r=o[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):i=this.mergeMode==null?[r,r.slice()]:[r],this.returnState?this.mergeMode==null?i.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):$o(i)},e.prototype.apply=function(t,r){var i=r==null?null:r.initialState,a=r==null?null:r.constants;r==null&&(r={});var o=Zge(t,i,a,this.numConstants);if(t=o.inputs,i=o.initialState,a=o.constants,Array.isArray(t)&&(i=t.slice(1),t=t[0]),(i==null||i.length===0)&&a==null)return n.prototype.apply.call(this,t,r);var s=[],u=[];if(i!=null){var l=i.length;if(l%2>0)throw new Ke("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=i,s.push.apply(s,i);var h=i.map(function(v){return new Vs({shape:v.shape})});this.forwardLayer.stateSpec=h.slice(0,l/2),this.backwardLayer.stateSpec=h.slice(l/2),u.push.apply(u,h)}if(a!=null)throw new Vn("Support for constants in Bidirectional layers is not implemented yet.");for(var c=s[0]instanceof Rf,f=0,d=s;f<d.length;f++)if(d[f]instanceof Rf!==c)throw new Ke("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){var p=[t].concat(s),m=this.inputSpec.concat(u),g=this.inputSpec;this.inputSpec=m;var y=n.prototype.apply.call(this,p,r);return this.inputSpec=g,y}return n.prototype.apply.call(this,t,r)},e.prototype.call=function(t,r){var i=this;return Ze(function(){var a,o,s,u,l=r.initialState;if(l==null)a=i.forwardLayer.call(t,r),o=i.backwardLayer.call(t,r);else{var h=l.slice(0,l.length/2),c=l.slice(l.length/2);a=i.forwardLayer.call(t,Object.assign(r,{initialState:h})),o=i.backwardLayer.call(t,Object.assign(r,{initialState:c}))}return i.returnState&&(Array.isArray(a)&&(s=a.slice(1).concat(o.slice(1))),a=a[0],o=o[0]),i.returnSequences&&(o=Op(o,1)),i.mergeMode==="concat"?u=pge([a,o]):i.mergeMode==="sum"?u=qn(a,o):i.mergeMode==="ave"?u=rn(.5,qn(a,o)):i.mergeMode==="mul"?u=rn(a,o):i.mergeMode==null&&(u=[a,o]),i.returnState?i.mergeMode==null?u.concat(s):[u].concat(s):u})},e.prototype.resetStates=function(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},e.prototype.build=function(t){var r=this;Y0(this.forwardLayer.name,function(){r.forwardLayer.build(t)}),Y0(this.backwardLayer.name,function(){r.backwardLayer.build(t)}),this.built=!0},e.prototype.computeMask=function(t,r){var i;if(Array.isArray(r)&&(r=r[0]),i=this.returnSequences?this.mergeMode==null?[r,r]:r:this.mergeMode==null?[null,null]:null,this.returnState){var a=this.forwardLayer.states.map(function(o){return null});return Array.isArray(i)?i.concat(a).concat(a):[i].concat(a).concat(a)}return i},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.setFastWeightInitDuringBuild=function(t){n.prototype.setFastWeightInitDuringBuild.call(this,t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)},e.prototype.getConfig=function(){var t={mergeMode:this.mergeMode},r=n.prototype.getConfig.call(this);return Object.assign(t,r),t},e.fromConfig=function(t,r){var i=vp(r.layer);if(delete r.layer,r.numConstants!=null)throw new Vn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var a=r;return a.layer=i,new t(a)},e.className="Bidirectional",e}(ime);St.registerClass(GHe);var XHe=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.model=null,t}return mt(e,n),e.prototype.setModel=function(t){if(!(t instanceof PC))throw new Error("model must be a LayersModel, not some other Container");this.model=t},e}(ix);function zk(n,e){return n<e}function eZ(n,e){return n>e}(function(n){function e(t){var r=n.call(this)||this;if(t==null&&(t={}),t.restoreBestWeights)throw new Vn("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=t.monitor||"val_loss",r.minDelta=Math.abs(t.minDelta||0),r.patience=t.patience||0,r.verbose=t.verbose||0,r.mode=t.mode||"auto",r.baseline=t.baseline,["auto","min","max"].indexOf(r.mode)===-1&&(console.warn("EarlyStopping mode '"+r.mode+"' is invalid. Falling back to mode 'auto'."),r.mode="auto"),r.mode==="min"?r.monitorFunc=zk:r.mode==="max"||r.monitor.indexOf("acc")!==-1?r.monitorFunc=eZ:r.monitorFunc=zk,r.monitorFunc===zk&&(r.minDelta*=-1),r}return mt(e,n),e.prototype.onTrainBegin=function(t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){return this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===zk?1/0:-1/0,[2]})})},e.prototype.onEpochEnd=function(t,r){return Rn(this,void 0,void 0,function(){var i;return Cn(this,function(a){switch(a.label){case 0:return[4,Bg(r)];case 1:return a.sent(),(i=this.getMonitorValue(r))==null?[2]:(this.monitorFunc(i-this.minDelta,this.best)?(this.best=i,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)),[2])}})})},e.prototype.onTrainEnd=function(t){return Rn(this,void 0,void 0,function(){return Cn(this,function(r){return this.stoppedEpoch>0&&this.verbose&&console.log("Epoch "+this.stoppedEpoch+": early stopping."),[2]})})},e.prototype.getMonitorValue=function(t){t==null&&(t={});var r=t[this.monitor];return r==null&&console.warn("Metric for EarlyStopping "+this.monitor+" is not available. Available metrics are: "+Object.keys(t)),r},e})(XHe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var zc,tZ,cB=function(){return(cB=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}).apply(this,arguments)};function Z0(n,e,t,r){return new(t||(t=Promise))(function(i,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function s(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):new t(function(h){h(l.value)}).then(o,s)}u((r=r.apply(n,[])).next())})}function J0(n,e){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&h[0]?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return o.label++,{value:h[1],done:!1};case 5:o.label++,r=h[1],h=[0];continue;case 7:h=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){o=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){o.label=h[1];break}if(h[0]===6&&o.label<i[1]){o.label=i[1],i=h;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(h);break}i[2]&&o.ops.pop(),o.trys.pop();continue}h=e.call(n,o)}catch(c){h=[6,c],r=0}finally{t=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([u,l])}}}(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(zc||(zc={})),function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))}(tZ||(tZ={}));var KHe={};function ame(n){return KHe[n]}function _e(n,e,t,r){var i=e.inputParams[n];if(i&&i.inputIndexStart!==void 0){var a=i.inputIndexStart,o=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd;if(i.type==="tensor")return qo(e.inputNames[i.inputIndexStart],t,r);if(i.type==="tensors")return e.inputNames.slice(a,o).map(function(l){return qo(l,t,r)});var s=Array.prototype.slice.call(qo(e.inputNames.slice(a)[0],t,r).dataSync());return i.type==="number"?s[0]:s}var u=e.attrParams[n];return u&&u.value}function qo(n,e,t){var r=ol(n),i=r[0],a=r[1],o=t.currentContextIds.find(function(s){return!!e[NO(i,s)]});return o!==void 0?e[NO(i,o)][a]:void 0}function YHe(n,e,t){return e[NO(n,t.currentContextId)]}function F2(n,e){var t=ol(n),r=t[0],i=t[1];return[NO(r,e&&e.currentContextId),i]}function NO(n,e){return e?n+"-"+e:n}function ol(n){var e=n.lastIndexOf(":");return e===-1?[n,0]:[n.substring(0,e),Number(n.substring(e+1))]}function IM(n,e){for(var t=[],r=0;r<n.length;r+=e)t.push(n.slice(r,r+e));return t}var QHe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ZHe=Object.freeze({json:QHe}),JHe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],eGe=Object.freeze({json:JHe}),tGe=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}],nGe=Object.freeze({json:tGe}),rGe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],iGe=Object.freeze({json:rGe}),aGe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],sGe=Object.freeze({json:aGe}),oGe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],uGe=Object.freeze({json:oGe}),lGe=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],cGe=Object.freeze({json:lGe}),hGe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],fGe=Object.freeze({json:hGe}),dGe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],pGe=Object.freeze({json:dGe}),gGe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],mGe=Object.freeze({json:gGe}),yGe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],vGe=Object.freeze({json:yGe}),bGe=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],wGe=Object.freeze({json:bGe}),xGe=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}],_Ge=Object.freeze({json:xGe}),SGe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],CGe=Object.freeze({json:SGe}),EGe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],TGe=Object.freeze({json:EGe}),DGe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}],AGe=Object.freeze({json:DGe}),kGe=function(){function n(){var e=[ZHe,eGe,nGe,iGe,sGe,uGe,cGe,mGe,pGe,fGe,vGe,wGe,_Ge,CGe,TGe,AGe],t=[].concat.apply([],e.map(function(r){return r.json}));this.opMappers=t.reduce(function(r,i){return r[i.tfOpName]=i,r},{})}return Object.defineProperty(n,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),n.prototype.transformGraph=function(e,t){var r=this;t===void 0&&(t={});var i=[],a=[],o=e.node.reduce(function(f,d){return f[d.name]=r.mapNode(d),d.op.startsWith("Placeholder")&&i.push(f[d.name]),d.op==="Const"&&a.push(f[d.name]),f},{}),s=[],u=[],l={},h={};t!=null&&(l=this.mapSignatureEntries(t.inputs),h=this.mapSignatureEntries(t.outputs));var c=Object.keys(o);return c.forEach(function(f){var d=o[f];d.inputNames.forEach(function(p){var m=F2(p)[0];d.inputs.push(o[m]),o[m].children.push(d)})}),Object.keys(h).length===0?c.forEach(function(f){var d=o[f];d.children.length===0&&u.push(d)}):Object.keys(h).forEach(function(f){var d=F2(f)[0],p=o[d];p!=null&&(p.signatureKey=h[f],u.push(p))}),Object.keys(l).length>0?Object.keys(l).forEach(function(f){var d=F2(f)[0],p=o[d];p&&(p.signatureKey=l[f],s.push(p))}):s=i,{nodes:o,inputs:s,outputs:u,weights:a,placeholders:i,signature:t}},n.prototype.mapSignatureEntries=function(e){return Object.keys(e||{}).reduce(function(t,r){return t[e[r].name]=r,t},{})},n.prototype.mapNode=function(e){var t=ame(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});var r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(function(i){return i.startsWith("^")?i.substr(1):i}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return t.inputs!=null&&(r.inputParams=t.inputs.reduce(function(i,a){return i[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},i},{})),t.attrs!=null&&(r.attrParams=t.attrs.reduce(function(i,a){var o=a.type,s=void 0;switch(a.type){case"string":(s=hB(e.attr,a.tfName,a.defaultValue))===void 0&&a.tfDeprecatedName&&(s=hB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":(s=vB(e.attr,a.tfName,a.defaultValue))===void 0&&a.tfDeprecatedName&&(s=vB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":(s=dB(e.attr,a.tfName,a.defaultValue||0))===void 0&&a.tfDeprecatedName&&(s=dB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":(s=yB(e.attr,a.tfName,a.defaultValue))===void 0&&a.tfDeprecatedName&&(s=yB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":(s=fB(e.attr,a.tfName,a.defaultValue))===void 0&&a.tfDeprecatedName&&(s=fB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":(s=wB(e.attr,a.tfName,a.defaultValue))===void 0&&a.tfDeprecatedName&&(s=wB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":(s=mB(e.attr,a.tfName,a.defaultValue))===void 0&&a.tfDeprecatedName&&(s=mB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":(s=bB(e.attr,a.tfName,a.defaultValue))===void 0&&a.tfDeprecatedName&&(s=bB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":(s=pB(e.attr,a.tfName,a.defaultValue))===void 0&&a.tfDeprecatedName&&(s=pB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":(s=gB(e.attr,a.tfName,a.defaultValue))===void 0&&a.tfDeprecatedName&&(s=gB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+a.type+" for op: "+e.op)}return i[a.name]={value:s,type:o},i},{})),r},n}();function NGe(n){var e=ct().global;if(e.atob!==void 0)return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function sme(n,e){var t=Array.isArray(n)?String.fromCharCode.apply(null,n):NGe(n);return e?t:t.toLowerCase()}function hB(n,e,t,r){r===void 0&&(r=!1);var i=n[e];return i!=null?sme(i.s,r):t}function fB(n,e,t){var r=n[e];return r?r.b:t}function dB(n,e,t){var r=n[e]||{},i=r.i!=null?r.i:r.f!=null?r.f:t;return typeof i=="number"?i:parseInt(i,10)}function ome(n){switch(typeof n=="string"&&(n=zc[n]),n){case zc.DT_FLOAT:return"float32";case zc.DT_INT32:case zc.DT_INT64:case zc.DT_INT8:case zc.DT_UINT8:return"int32";case zc.DT_BOOL:return"bool";case zc.DT_DOUBLE:return"float32";case zc.DT_STRING:return"string";default:return null}}function pB(n,e,t){var r=n[e];return r&&r.type?ome(r.type):t}function gB(n,e,t){var r=n[e];return r&&r.list&&r.list.type?r.list.type.map(function(i){return ome(i)}):t}function ume(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(function(e){return typeof e.size=="number"?e.size:parseInt(e.size,10)}):[]}function mB(n,e,t){var r=n[e];return r&&r.shape?ume(r.shape):t}function yB(n,e,t){var r=n[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(function(i){return typeof i=="number"?i:parseInt(i,10)}):t}function vB(n,e,t,r){r===void 0&&(r=!1);var i=n[e];return i&&i.list&&i.list.s?i.list.s.map(function(a){return sme(a,r)}):t}function bB(n,e,t){var r=n[e];return r&&r.list&&r.list.shape?r.list.shape.map(function(i){return ume(i)}):t}function wB(n,e,t){var r=n[e];return r&&r.list&&r.list.b?r.list.b:t}var OGe=function(){function n(e,t,r){var i=this;this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(function(a){return i.getInput(a)}),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce(function(a,o){return a[o]=i.getAttr(o),a},{}))}return n.prototype.getInput=function(e){return qo(e,this.tensorMap,this.context)},n.prototype.getAttr=function(e,t){var r=this.node.rawAttrs[e];if(r.tensor!=null)return qo(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return dB(this.node.rawAttrs,e,t);if(r.s!=null)return hB(this.node.rawAttrs,e,t);if(r.b!=null)return fB(this.node.rawAttrs,e,t);if(r.shape!=null)return mB(this.node.rawAttrs,e,t);if(r.type!=null)return pB(this.node.rawAttrs,e,t);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return yB(this.node.rawAttrs,e,t);if(r.list.s!=null)return vB(this.node.rawAttrs,e,t);if(r.list.shape!=null)return bB(this.node.rawAttrs,e,t);if(r.list.b!=null)return wB(this.node.rawAttrs,e,t);if(r.list.type!=null)return gB(this.node.rawAttrs,e,t)}return t},n}(),RGe=function(n,e,t){switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[qn(_e("a",n,e,t),_e("b",n,e,t))];case"AddN":return[rpe(_e("tensors",n,e,t))];case"FloorMod":case"Mod":return[Rde(_e("a",n,e,t),_e("b",n,e,t))];case"Mul":return[rn(_e("a",n,e,t),_e("b",n,e,t))];case"RealDiv":case"Div":return[ya(_e("a",n,e,t),_e("b",n,e,t))];case"DivNoNan":return[SW(_e("a",n,e,t),_e("b",n,e,t))];case"FloorDiv":return[cW(_e("a",n,e,t),_e("b",n,e,t))];case"Sub":return[pa(_e("a",n,e,t),_e("b",n,e,t))];case"Minimum":return[LD(_e("a",n,e,t),_e("b",n,e,t))];case"Maximum":return[zp(_e("a",n,e,t),_e("b",n,e,t))];case"Pow":return[bE(_e("a",n,e,t),_e("b",n,e,t))];case"SquaredDifference":return[DW(_e("a",n,e,t),_e("b",n,e,t))];default:throw TypeError("Node type "+n.op+" is not implemented")}},IGe=function(n,e,t){switch(n.op){case"Abs":case"ComplexAbs":return[v1(_e("x",n,e,t))];case"Acos":return[fde(_e("x",n,e,t))];case"Acosh":return[dde(_e("x",n,e,t))];case"Asin":return[pde(_e("x",n,e,t))];case"Asinh":return[gde(_e("x",n,e,t))];case"Atan":return[mde(_e("x",n,e,t))];case"Atan2":return[Ode(_e("x",n,e,t),_e("y",n,e,t))];case"Atanh":return[yde(_e("x",n,e,t))];case"Ceil":return[vde(_e("x",n,e,t))];case"Complex":return[xs(_e("real",n,e,t),_e("imag",n,e,t))];case"Cos":return[bde(_e("x",n,e,t))];case"Cosh":return[wde(_e("x",n,e,t))];case"Elu":return[zD(_e("x",n,e,t))];case"Erf":return[xde(_e("x",n,e,t))];case"Exp":return[_de(_e("x",n,e,t))];case"Expm1":return[Sde(_e("x",n,e,t))];case"Floor":return[sW(_e("x",n,e,t))];case"Log":return[Zm(_e("x",n,e,t))];case"Log1p":return[Cde(_e("x",n,e,t))];case"Imag":return[ih(_e("x",n,e,t))];case"Neg":return[F1(_e("x",n,e,t))];case"Reciprocal":return[Ede(_e("x",n,e,t))];case"Real":return[pl(_e("x",n,e,t))];case"Relu":return[M1(_e("x",n,e,t))];case"Round":return[Tde(_e("x",n,e,t))];case"Selu":return[jW(_e("x",n,e,t))];case"Sigmoid":return[uW(_e("x",n,e,t))];case"Sin":return[Ade(_e("x",n,e,t))];case"Sign":return[Dde(_e("x",n,e,t))];case"Sinh":return[kde(_e("x",n,e,t))];case"Softplus":return[QI(_e("x",n,e,t))];case"Sqrt":return[ZI(_e("x",n,e,t))];case"Square":return[TW(_e("x",n,e,t))];case"Tanh":return[lW(_e("x",n,e,t))];case"Tan":return[Nde(_e("x",n,e,t))];case"Relu6":case"ClipByValue":return[Iu(_e("x",n,e,t),_e("clipValueMin",n,e,t),_e("clipValueMax",n,e,t))];case"Rsqrt":return[oW(qo(n.inputNames[0],e,t))];case"Prod":return[zW(_e("x",n,e,t),_e("axes",n,e,t))];case"LeakyRelu":return[WW(_e("x",n,e,t),_e("alpha",n,e,t))];case"Prelu":return[u4(_e("x",n,e,t),_e("alpha",n,e,t))];default:throw TypeError("Node type "+n.op+" is not implemented")}},FGe=function(){function n(e,t,r,i,a,o,s){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=n.nextId++}return Object.defineProperty(n.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),n.prototype.clearAndClose=function(){this.tensors.forEach(function(e){return e.tensor.dispose()}),this.tensors=[],this.closed_=!0},n.prototype.size=function(){return this.tensors.length},n.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.tensors.length)throw new Error("Tried to read from index "+e+", but array size is: "+this.tensors.length);var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},n.prototype.readMany=function(e){var t=this;return e.map(function(r){return t.read(r)})},n.prototype.write=function(e,t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+`,
          because the value dtype is `+t.dtype+", but TensorArray dtype is "+this.dtype+".");if(this.size()!==0||this.elementShape!=null&&this.elementShape.length!==0||(this.elementShape=t.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,t.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),r&&r.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(r&&r.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");r.tensor=t,r.written=!0,this.tensors[e]=r},n.prototype.writeMany=function(e,t){var r=this;if(e.length!==t.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+e.length+" is not the same as tensors size: "+t.length+".");e.forEach(function(i,a){return r.write(i,t[a])})},n.prototype.gather=function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+t);if(!e){e=[];for(var r=0;r<this.size();r++)e.push(r)}if(e.length===0)return Na([],[0].concat(this.elementShape));var i=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),mh(i,0)},n.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(this.size()===0)return Na([],[0].concat(this.elementShape));for(var t=[],r=0;r<this.size();r++)t.push(r);var i=this.readMany(t);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,i[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+i[0].shape+")"),Yo(i,0)},n.prototype.scatter=function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var r=Math.max.apply(Math,e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error("Max index must be < array size ("+r+"  vs. "+this.maxSize+")");this.writeMany(e,y1(t,0))},n.prototype.split=function(e,t){var r=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);var i=0,a=e.map(function(h){return i+=h});if(i!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        `+i+", and tensor's shape is: "+t.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var o=i===0?0:t.size/i,s=[];Ze(function(){t=t.reshape([1,i,o]);for(var h=0;h<e.length;++h){var c=[0,h===0?0:a[h-1],0],f=[1,e[h],o];s[h]=mc(t,c,f).reshape(r.elementShape)}return s});for(var u=[],l=0;l<e.length;l++)u[l]=l;this.writeMany(u,s)},n.prototype.assertShapesMatchAllowUndefinedSize=function(e,t,r){r===void 0&&(r=""),gn.assert(this.shapesEqualAllowUndefinedSize(e,t),function(){return r+" Shapes "+e+" and "+t+" must match"})},n.prototype.shapesEqualAllowUndefinedSize=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==-1&&t[r]!==-1&&e[r]!==t[r])return!1;return!0},n.nextId=0,n}(),PGe=void 0,LGe=function(n,e,t){return Z0(PGe,void 0,void 0,function(){var r,i,a,o,s,u,l,h,c,f,d,p,m,g,y,v,b,w,x,S,E,A,k,T,O,F,I,R,U,B,W,Y,z,j,M;return J0(this,function(q){switch(q.label){case 0:switch(n.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[_e("pred",n,e,t).clone()]];case 2:return r=_e("pred",n,e,t),i=_e("data",n,e,t),[4,r.data()];case 3:return[2,q.sent()[0]?[void 0,i.clone()]:[i.clone(),void 0]];case 4:return[2,(a=n.inputNames.find(function(H){return qo(H,e,t)!==void 0}))?[qo(a,e,t).clone()]:void 0];case 5:return o=_e("frameName",n,e,t),s=_e("tensor",n,e,t),t.enterFrame(o),[2,[s.clone()]];case 6:return u=_e("tensor",n,e,t),t.exitFrame(),[2,[u.clone()]];case 7:return l=_e("tensor",n,e,t),t.nextIteration(),[2,[l.clone()]];case 8:return h=_e("size",n,e,t),c=_e("dtype",n,e,t),f=_e("elementShape",n,e,t),d=_e("dynamicSize",n,e,t),p=_e("clearAfterRead",n,e,t),m=_e("identicalElementShapes",n,e,t),g=_e("name",n,e,t),y=new FGe(g,c,h,f,m,d,p),t.addTensorArray(y),[2,[jt(y.id),jt(1)]];case 9:return v=_e("tensorArrayId",n,e,t),b=_e("index",n,e,t),w=_e("tensor",n,e,t),t.getTensorArray(v).write(b,w),[2,[jt(1)]];case 10:return x=_e("tensorArrayId",n,e,t),S=_e("index",n,e,t),[2,[t.getTensorArray(x).read(S)]];case 11:return E=_e("tensorArrayId",n,e,t),A=_e("indices",n,e,t),k=_e("dtype",n,e,t),[2,[t.getTensorArray(E).gather(A,k)]];case 12:return T=_e("tensorArrayId",n,e,t),O=_e("indices",n,e,t),F=_e("tensor",n,e,t),t.getTensorArray(T).scatter(O,F),[2,[jt(1)]];case 13:return I=_e("tensorArrayId",n,e,t),R=t.getTensorArray(I),U=_e("dtype",n,e,t),[2,[R.concat(U)]];case 14:return B=_e("tensorArrayId",n,e,t),W=_e("tensor",n,e,t),Y=_e("lengths",n,e,t),t.getTensorArray(B).split(Y,W),[2,[jt(1)]];case 15:return z=_e("tensorArrayId",n,e,t),j=t.getTensorArray(z),[2,[jt(j.size(),"int32")]];case 16:return M=_e("tensorArrayId",n,e,t),t.getTensorArray(M).clearAndClose(),[2,[jt(0)]];case 17:throw TypeError("Node type "+n.op+" is not implemented")}})})},MGe=function(n,e,t){switch(n.op){case"Conv1D":var r=_e("stride",n,e,t),i=_e("pad",n,e,t),a=_e("dataFormat",n,e,t).toUpperCase(),o=_e("dilation",n,e,t);return[AW(_e("x",n,e,t),_e("filter",n,e,t),r,i,a,o)];case"Conv2D":r=_e("strides",n,e,t),i=_e("pad",n,e,t),a=_e("dataFormat",n,e,t).toUpperCase();var s=_e("dilations",n,e,t);return[Ax(_e("x",n,e,t),_e("filter",n,e,t),[r[1],r[2]],i,a,[s[1],s[2]])];case"_FusedConv2D":case"FusedDepthwiseConv2dNative":var u=_e("fusedOps",n,e,t),l=u[0],h=u[1],c=l==="biasadd",f=h==="prelu",d=l==="fusedbatchnorm",p=_e("numArgs",n,e,t);if(c){if(f&&p!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!f&&p!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(d)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");r=_e("strides",n,e,t),i=_e("pad",n,e,t),a=_e("dataFormat",n,e,t).toUpperCase(),s=_e("dilations",n,e,t);var m=_e("args",n,e,t),g=m[0],y=m[1];return[(n.op==="_FusedConv2D"?x1.conv2d:x1.depthwiseConv2d)({x:_e("x",n,e,t),filter:_e("filter",n,e,t),strides:[r[1],r[2]],pad:i,dataFormat:a,dilations:[s[1],s[2]],bias:g,activation:h,preluActivationWeights:y})];case"Conv2DBackpropInput":case"Conv2dTranspose":var v=_e("outputShape",n,e,t);return r=_e("strides",n,e,t),i=_e("pad",n,e,t),[OW(_e("x",n,e,t),_e("filter",n,e,t),v,[r[1],r[2]],i)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return r=_e("strides",n,e,t),i=_e("pad",n,e,t),s=_e("dilations",n,e,t),a=_e("dataFormat",n,e,t).toUpperCase(),[BD(_e("input",n,e,t),_e("filter",n,e,t),[r[1],r[2]],i,a,[s[1],s[2]])];case"Conv3D":return r=_e("strides",n,e,t),i=_e("pad",n,e,t),a=_e("dataFormat",n,e,t).toUpperCase(),s=_e("dilations",n,e,t),[kW(_e("x",n,e,t),_e("filter",n,e,t),[r[1],r[2],r[3]],i,a,[s[1],s[2],s[3]])];case"AvgPool":r=_e("strides",n,e,t),i=_e("pad",n,e,t);var b=_e("kernelSize",n,e,t);return[FW(_e("x",n,e,t),[b[1],b[2]],[r[1],r[2]],i)];case"MaxPool":return r=_e("strides",n,e,t),i=_e("pad",n,e,t),b=_e("kernelSize",n,e,t),[IW(_e("x",n,e,t),[b[1],b[2]],[r[1],r[2]],i)];case"MaxPoolWithArgmax":r=_e("strides",n,e,t),i=_e("pad",n,e,t),b=_e("kernelSize",n,e,t);var w=_e("includeBatchInIndex",n,e,t),x=Dpe(_e("x",n,e,t),[b[1],b[2]],[r[1],r[2]],i,w);return[x.result,x.indexes];case"AvgPool3D":return r=_e("strides",n,e,t),i=_e("pad",n,e,t),b=_e("kernelSize",n,e,t),[LW(_e("x",n,e,t),[b[1],b[2],b[3]],[r[1],r[2],r[3]],i)];case"MaxPool3D":return r=_e("strides",n,e,t),i=_e("pad",n,e,t),b=_e("kernelSize",n,e,t),[PW(_e("x",n,e,t),[b[1],b[2],b[3]],[r[1],r[2],r[3]],i)];default:throw TypeError("Node type "+n.op+" is not implemented")}},UGe=function(n,e,t){switch(n.op){case"Fill":var r=_e("shape",n,e,t),i=_e("dtype",n,e,t),a=_e("value",n,e,t);return[PD(r,a,i)];case"LinSpace":var o=_e("start",n,e,t),s=_e("stop",n,e,t),u=_e("num",n,e,t);return[Qfe(o,s,u)];case"Multinomial":var l=_e("logits",n,e,t),h=_e("numSamples",n,e,t),c=_e("seed",n,e,t);return[ppe(l,h,c)];case"OneHot":var f=_e("indices",n,e,t),d=_e("depth",n,e,t),p=_e("onValue",n,e,t),m=_e("offValue",n,e,t);return[tx(f,d,p,m)];case"Ones":return[Bp(_e("shape",n,e,t),_e("dtype",n,e,t))];case"OnesLike":return[gc(_e("x",n,e,t))];case"RandomUniform":return[Tx(_e("shape",n,e,t),_e("minval",n,e,t),_e("maxval",n,e,t),_e("dtype",n,e,t))];case"Range":o=_e("start",n,e,t);var g=_e("stop",n,e,t),y=_e("step",n,e,t);return[vE(o,g,y,_e("dtype",n,e,t))];case"TruncatedNormal":r=_e("shape",n,e,t);var v=_e("mean",n,e,t),b=_e("stdDev",n,e,t);return c=_e("seed",n,e,t),[n4(r,v,b,_e("dtype",n,e,t),c)];case"Zeros":return[Lr(_e("shape",n,e,t),_e("dtype",n,e,t))];case"ZerosLike":return[ar(_e("x",n,e,t))];default:throw TypeError("Node type "+n.op+" is not implemented")}},BGe=void 0,zGe=function(n,e,t){return Z0(BGe,void 0,void 0,function(){var r,i,a,o,s,u,l,h;return J0(this,function(c){switch(c.label){case 0:switch(n.op){case"NonMaxSuppressionV5":case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,5];case"ListDiff":return[3,7]}return[3,8];case 1:return r=_e("boxes",n,e,t),i=_e("scores",n,e,t),a=_e("maxOutputSize",n,e,t),o=_e("iouThreshold",n,e,t),s=_e("scoreThreshold",n,e,t),n.op!=="NonMaxSuppressionV5"?[3,3]:(u=_e("softNmsSigma",n,e,t),[4,K0.nonMaxSuppressionWithScoreAsync(r,i,a,o,s,u)]);case 2:return[2,[(h=c.sent()).selectedIndices,h.selectedScores]];case 3:return[4,K0.nonMaxSuppressionAsync(r,i,a,o,s)];case 4:return[2,[c.sent()]];case 5:return l=_e("condition",n,e,t).asType("bool"),[4,_W(l)];case 6:return h=[c.sent()],l.dispose(),[2,h];case 7:return[2,rde(_e("x",n,e,t),_e("y",n,e,t))];case 8:throw TypeError("Node type "+n.op+" is not implemented")}})})},WGe=function(n,e,t){switch(n.op){case"TopKV2":var r=_e("x",n,e,t),i=_e("k",n,e,t),a=_e("sorted",n,e,t),o=Fpe(r,i,a);return[o.values,o.indices];default:throw TypeError("Node type "+n.op+" is not implemented")}},jGe=function(n,e,t){switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":var r=_e("default",n,e,t);return[qo(n.name,e,t)||r];case"Placeholder":return[qo(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[_e("x",n,e,t).clone()];case"IdentityN":return _e("x",n,e,t).map(function(l){return l.clone()});case"Snapshot":return[_e("x",n,e,t).clone()];case"Shape":return[Ru(_e("x",n,e,t).shape,"int32")];case"ShapeN":return _e("x",n,e,t).map(function(l){return Ru(l.shape)});case"Size":return[jt(_e("x",n,e,t).size,"int32")];case"Rank":return[jt(_e("x",n,e,t).rank,"int32")];case"NoOp":return[jt(1)];case"Print":var i=_e("x",n,e,t),a=_e("data",n,e,t),o=_e("message",n,e,t),s=_e("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,s));return[i];default:throw TypeError("Node type "+n.op+" is not implemented")}},$Ge=function(n,e,t){switch(n.op){case"ResizeBilinear":var r=_e("images",n,e,t),i=_e("size",n,e,t),a=_e("alignCorners",n,e,t);return[K0.resizeBilinear(r,[i[0],i[1]],a)];case"ResizeNearestNeighbor":return r=_e("images",n,e,t),i=_e("size",n,e,t),a=_e("alignCorners",n,e,t),[K0.resizeNearestNeighbor(r,[i[0],i[1]],a)];case"CropAndResize":var o=_e("image",n,e,t),s=_e("boxes",n,e,t),u=_e("boxInd",n,e,t),l=_e("cropSize",n,e,t),h=_e("method",n,e,t),c=_e("extrapolationValue",n,e,t);return[K0.cropAndResize(o,s,u,l,h,c)];default:throw TypeError("Node type "+n.op+" is not implemented")}},qGe=function(n,e,t){switch(n.op){case"Equal":return[Dx(_e("a",n,e,t),_e("b",n,e,t))];case"NotEqual":return[wE(_e("a",n,e,t),_e("b",n,e,t))];case"Greater":return[r4(_e("a",n,e,t),_e("b",n,e,t))];case"GreaterEqual":return[i4(_e("a",n,e,t),_e("b",n,e,t))];case"Less":return[mpe(_e("a",n,e,t),_e("b",n,e,t))];case"LessEqual":return[ype(_e("a",n,e,t),_e("b",n,e,t))];case"LogicalAnd":return[yy(_e("a",n,e,t),_e("b",n,e,t))];case"LogicalNot":return[dpe(_e("a",n,e,t))];case"LogicalOr":return[xW(_e("a",n,e,t),_e("b",n,e,t))];case"Select":case"SelectV2":return[Np(_e("condition",n,e,t),_e("a",n,e,t),_e("b",n,e,t))];default:throw TypeError("Node type "+n.op+" is not implemented")}},VGe=function(n,e,t){switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[RW(_e("a",n,e,t),_e("b",n,e,t),_e("transposeA",n,e,t),_e("transposeB",n,e,t))];case"Transpose":return[gr(_e("x",n,e,t),_e("perm",n,e,t))];case"_FusedMatMul":var r=_e("fusedOps",n,e,t),i=r[0],a=r[1],o=i==="biasadd",s=a==="prelu",u=_e("numArgs",n,e,t);if(o){if(s&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var l=_e("args",n,e,t),h=l[0],c=l[1];return[x1.matMul({a:_e("a",n,e,t),b:_e("b",n,e,t),transposeA:_e("transposeA",n,e,t),transposeB:_e("transposeB",n,e,t),bias:h,activation:a,preluActivationWeights:c})];default:throw TypeError("Node type "+n.op+" is not implemented")}},HGe=function(n,e,t){switch(n.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Ex(_e("x",n,e,t),_e("mean",n,e,t),_e("variance",n,e,t),_e("offset",n,e,t),_e("scale",n,e,t),_e("epsilon",n,e,t))];case"LRN":return[Ope(_e("x",n,e,t),_e("radius",n,e,t),_e("bias",n,e,t),_e("alpha",n,e,t),_e("beta",n,e,t))];case"Softmax":return[Cx(_e("x",n,e,t))];case"LogSoftmax":return[dW(_e("x",n,e,t))];case"SparseToDense":return[qW(_e("sparseIndices",n,e,t),_e("outputShape",n,e,t),_e("sparseValues",n,e,t),_e("defaultValue",n,e,t))];default:throw TypeError("Node type "+n.op+" is not implemented")}},GGe=function(n,e,t){switch(n.op){case"Max":var r=_e("axis",n,e,t),i=_e("keepDims",n,e,t);return[w1(_e("x",n,e,t),r,i)];case"Mean":return r=_e("axis",n,e,t),i=_e("keepDims",n,e,t),[Ia(_e("x",n,e,t),r,i)];case"Min":return r=_e("axis",n,e,t),i=_e("keepDims",n,e,t),[BW(_e("x",n,e,t),r,i)];case"Sum":return r=_e("axis",n,e,t),i=_e("keepDims",n,e,t),[Za(_e("x",n,e,t),r,i)];case"All":return r=_e("axis",n,e,t),i=_e("keepDims",n,e,t),[UW(_e("x",n,e,t),r,i)];case"Any":return r=_e("axis",n,e,t),i=_e("keepDims",n,e,t),[wO(_e("x",n,e,t),r,i)];case"ArgMax":return r=_e("axis",n,e,t),[xO(_e("x",n,e,t),r)];case"ArgMin":return r=_e("axis",n,e,t),[kpe(_e("x",n,e,t),r)];case"Prod":return r=_e("axis",n,e,t),i=_e("keepDims",n,e,t),[zW(_e("x",n,e,t),r,i)];default:throw TypeError("Node type "+n.op+" is not implemented")}},XGe=function(n,e,t){switch(n.op){case"ConcatV2":case"Concat":var r=_e("n",n,e,t),i=_e("axis",n,e,t),a=_e("tensors",n,e,t);return a=a.slice(0,r),[Yo(a,i)];case"GatherV2":case"Gather":i=_e("axis",n,e,t);var o=_e("x",n,e,t),s=_e("indices",n,e,t);return[UD(o,s.asType("int32"),i)];case"ReverseV2":case"Reverse":return i=_e("axis",n,e,t),o=_e("x",n,e,t),[Op(o,i)];case"Slice":var u=_e("begin",n,e,t),l=_e("size",n,e,t);return[mc(_e("x",n,e,t),u,l)];case"StridedSlice":u=_e("begin",n,e,t);var h=_e("end",n,e,t),c=_e("strides",n,e,t),f=_e("beginMask",n,e,t),d=_e("endMask",n,e,t),p=_e("ellipsisMask",n,e,t),m=_e("newAxisMask",n,e,t),g=_e("shrinkAxisMask",n,e,t),y=_e("x",n,e,t);if(u.length===1&&y.shape.length>1)for(var v=1;v<y.shape.length;v++)u.push(0),h.push(y.shape[v]),c.push(c[0]);return[Ipe(y,u,h,c,f,d,p,m,g)];case"Pack":return Ze(function(){var T=_e("axis",n,e,t),O=_e("tensors",n,e,t),F=O[0].shape,I=O[0].squeeze().shape,R=O.map(function(U){var B=gn.arraysEqual(U.shape,F);if(!B&&!gn.arraysEqual(U.squeeze().shape,I))throw new Error("the input tensors shape does not match");return B?U:U.reshape(F)});return[mh(R,T)]});case"Unpack":return Ze(function(){var T=_e("axis",n,e,t),O=_e("tensor",n,e,t);return y1(O,T)});case"Tile":var b=_e("reps",n,e,t);return[Pm(_e("x",n,e,t),b)];case"Split":case"SplitV":i=_e("axis",n,e,t);var w=_e("numOrSizeSplits",n,e,t);return Fm(_e("x",n,e,t),w,i);case"ScatterNd":s=_e("indices",n,e,t);var x=_e("values",n,e,t),S=_e("shape",n,e,t);return[Ppe(s,x,S)];case"GatherNd":var E=_e("x",n,e,t);return s=_e("indices",n,e,t),[Lpe(E,s)];case"SparseToDense":s=_e("sparseIndices",n,e,t),S=_e("outputShape",n,e,t);var A=_e("sparseValues",n,e,t),k=_e("defaultValue",n,e,t);return[qW(s,A,S,A.dtype===k.dtype?k:k.asType(A.dtype))];default:throw TypeError("Node type "+n.op+" is not implemented")}},KGe=function(n,e,t){switch(n.op){case"FFT":return[l4(_e("x",n,e,t))];case"IFFT":return[_E(_e("x",n,e,t))];case"RFFT":return[c4(_e("x",n,e,t))];case"IRFFT":return[$W(_e("x",n,e,t))];default:throw TypeError("Node type "+n.op+" is not implemented")}},YGe=function(n,e,t){switch(n.op){case"Cast":return[iW(_e("x",n,e,t),_e("dtype",n,e,t))];case"ExpandDims":var r=_e("axis",n,e,t);return[oc(_e("x",n,e,t),r)];case"Squeeze":return r=_e("axis",n,e,t),[XI(_e("x",n,e,t),r)];case"Reshape":return[Df(_e("x",n,e,t),_e("shape",n,e,t))];case"PadV2":case"Pad":return[Wp(_e("x",n,e,t),IM(_e("padding",n,e,t),2),_e("constantValue",n,e,t))];case"SpaceToBatchND":var i=_e("blockShape",n,e,t),a=IM(_e("paddings",n,e,t),2);return[aW(_e("x",n,e,t),i,a)];case"BatchToSpaceND":i=_e("blockShape",n,e,t);var o=IM(_e("crops",n,e,t),2);return[rW(_e("x",n,e,t),i,o)];case"DepthToSpace":var s=_e("blockSize",n,e,t),u=_e("dataFormat",n,e,t).toUpperCase();return[nde(_e("x",n,e,t),s,u)];default:throw TypeError("Node type "+n.op+" is not implemented")}};function nZ(n,e,t){var r=function(i,a,o){switch(i.category){case"arithmetic":return Ze(function(){return RGe(i,a,o)});case"basic_math":return Ze(function(){return IGe(i,a,o)});case"control":return LGe(i,a,o);case"convolution":return Ze(function(){return MGe(i,a,o)});case"creation":return Ze(function(){return UGe(i,a,o)});case"dynamic":return zGe(i,a,o);case"evaluation":return Ze(function(){return WGe(i,a,o)});case"image":return Ze(function(){return $Ge(i,a,o)});case"graph":return Ze(function(){return jGe(i,a,o)});case"logical":return Ze(function(){return qGe(i,a,o)});case"matrices":return Ze(function(){return VGe(i,a,o)});case"normalization":return Ze(function(){return HGe(i,a,o)});case"reduction":return Ze(function(){return GGe(i,a,o)});case"slice_join":return Ze(function(){return XGe(i,a,o)});case"spectral":return Ze(function(){return KGe(i,a,o)});case"transformation":return Ze(function(){return YGe(i,a,o)});case"custom":var s=ame(i.op);if(s&&s.customExecutor)return s.customExecutor(new OGe(i,a,o));throw TypeError("Custom op "+i.op+" is not registered.");default:throw TypeError("Unknown op '"+i.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(n,e,t);return r instanceof Promise?r.then(function(i){return[].concat(i)}):[].concat(r)}var rZ=function(){function n(e,t){this.weightMap=e,this.tensorArrayMap=t,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return n.prototype.newFrame=function(e,t){return{id:e,frameName:t,iterationId:0}},Object.defineProperty(n.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),n.prototype.generateCurrentContextIds=function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e},n.prototype.contextIdforContexts=function(e){return e?e.map(function(t){return t.id===0&&t.iterationId===0?"":t.frameName+"-"+t.iterationId}).join("/"):""},n.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},n.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},n.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},n.prototype.getWeight=function(e){return this.weightMap[e]},n.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},n.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},n}();function iZ(n,e,t){for(var r=new Set,i=[],a=null,o=null,s=new Set,u=Object.keys(n).map(function(c){return ol(c)[0]}),l=e.slice();l.length>0;){var h=l.pop();(lme(h)||eXe(h))&&a==null&&(o=(a=h).children.map(function(c){return c.name}).filter(function(c){return r.has(c)})),r.add(h.name),t[h.name]==null&&u.indexOf(h.name)===-1&&(h.inputs.length!==0?h.inputs.forEach(function(c){s.has(c.name)||(s.add(c.name),l.push(c))}):i.push(h.name))}return{inputs:n,outputs:e,usedNodes:r,missingInputs:i,dynamicNode:a,syncInputs:o}}function QGe(n,e,t){var r=t.usedNodes,i=t.inputs,a=[];Object.keys(i).map(function(l){return ol(l)[0]}).map(function(l){return n.nodes[l]}).forEach(function(l){r.has(l.name)&&a.push(l)}),n.weights.forEach(function(l){r.has(l.name)&&a.push(l)});for(var o=new Set,s=[];a.length>0;){var u=a.pop();o.add(u.name),e[u.name]||s.push(u),u.children.forEach(function(l){!o.has(l.name)&&r.has(l.name)&&l.inputs.every(function(h){return o.has(h.name)})&&a.push(l)})}return s}var ZGe=["Switch","Merge","Enter","Exit","NextIteration"],JGe=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"];function lme(n){return ZGe.indexOf(n.op)>=0}function eXe(n){return JGe.indexOf(n.op)>=0}var tXe=function(){function n(e){this.graph=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._outputs=e.outputs,this._inputs=e.inputs,this._signature=e.signature}return Object.defineProperty(n.prototype,"weightMap",{get:function(){return this._weightMap},set:function(e){var t=Object.keys(e).map(function(r){return e[r].map(function(i){return i.id})});this.weightIds=[].concat.apply([],t),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputs",{get:function(){return this._inputs.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outputs",{get:function(){return this._outputs.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputNodes",{get:function(){return this._inputs.map(function(e){return e.signatureKey||e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outputNodes",{get:function(){return this._outputs.map(function(e){return e.signatureKey||e.name})},enumerable:!0,configurable:!0}),n.prototype.getCompilationKey=function(e,t){var r=e.map(function(a){return a.name}).sort(),i=t.map(function(a){return a.name}).sort();return r.join(this.SEPERATOR)+"--"+i.join(this.SEPERATOR)},n.prototype.compile=function(e,t){var r=iZ(e,t,this.weightMap),i=r.missingInputs,a=r.dynamicNode,o=r.syncInputs;if(a!=null)throw new Error("This execution contains the node '"+a.name+"', which has the dynamic op '"+a.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+o+"]");if(i.length>0){var s=t.map(function(l){return l.name}),u=Object.keys(e);throw new Error("Cannot compute the outputs ["+s+"] from the provided inputs ["+u+"]. Missing the following inputs: ["+i+"]")}return QGe(this.graph,this.weightMap,r)},n.prototype.execute=function(e,t){var r=this;e=this.mapInputs(e);var i=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=i.map(function(h){return r.graph.nodes[ol(h)[0]]}),o=t.map(function(h){return r.graph.nodes[ol(h)[0]]}),s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);u==null&&(u=this.compile(e,o),this.compiledMap.set(s,u));var l={};return Ze(function(){var h=new rZ(r._weightMap,l),c=cB({},r.weightMap);Object.keys(e).forEach(function(y){var v=ol(y),b=v[0],w=[];w[v[1]]=e[y],c[b]=w});for(var f=r.getFrozenTensorIds(c),d={},p=0;p<u.length;p++){var m=u[p];if(!c[m.name]){var g=nZ(m,c,h);if(g instanceof Promise)throw new Error("The execution of the op '"+m.op+"' returned a promise. Please use model.executeAsync() instead.");c[m.name]=g,r.checkTensorForDisposal(m.name,m,c,h,f,t,d)}}return t.map(function(y){return qo(y,c,h)})})},n.prototype.getFrozenTensorIds=function(e){var t=[].concat.apply([],Object.keys(e).map(function(r){return e[r]}).map(function(r){return r.map(function(i){return i.id})}));return new Set(t)},n.prototype.checkTensorForDisposal=function(e,t,r,i,a,o,s){t.category!=="control"&&o.indexOf(e)===-1&&(r[e].forEach(function(u){u!=null&&(s[u.id]=(s[u.id]||0)+t.children.length)}),t.inputs.forEach(function(u){if(u.category!=="control"){var l=YHe(u.name,r,i);l!=null&&l.forEach(function(h){if(h&&!a.has(h.id)){var c=s[h.id];c===1?(h.dispose(),delete s[h.id]):c!=null&&s[h.id]--}})}}))},n.prototype.executeAsync=function(e,t){return Z0(this,void 0,void 0,function(){var r,i,a,o,s,u,l=this;return J0(this,function(h){switch(h.label){case 0:return e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t),r={},i=new rZ(this._weightMap,r),[4,this.executeWithControlFlow(e,i,t)];case 1:return a=h.sent(),o=t.map(function(c){return qo(c,a,i)}),s=new Set(o.map(function(c){return c.id})),u=new Set(Object.keys(e).map(function(c){return e[c].id})),Object.keys(a).forEach(function(c){a[c].forEach(function(f){!f||f.isDisposed||s.has(f.id)||u.has(f.id)||l.weightIds.indexOf(f.id)!==-1||f.dispose()})}),[2,o]}})})},n.prototype.executeWithControlFlow=function(e,t,r){return Z0(this,void 0,void 0,function(){var i,a,o,s,u,l,h,c,f,d,p,m,g,y,v,b,w=this;return J0(this,function(x){switch(x.label){case 0:i=Object.keys(e),a=i.map(function(S){return w.graph.nodes[ol(S)[0]]}),o=r.map(function(S){return w.graph.nodes[ol(S)[0]]}),s=iZ(e,o,this.weightMap),u=s.usedNodes,l=s.missingInputs,h=s.dynamicNode,c=s.syncInputs,f=a.concat(this.graph.weights).map(function(S){return{node:S,contexts:t.currentContext}}),d=cB({},this.weightMap),Object.keys(e).forEach(function(S){var E=ol(S),A=E[0],k=[];k[E[1]]=e[S],d[A]=k}),p={},m=this.getFrozenTensorIds(d),g={},x.label=1;case 1:return f.length>0?(y=this.processStack(a,f,t,d,g,m,r,p,u),[4,Promise.all(y)]):[3,3];case 2:return x.sent(),[3,1];case 3:if(h==null&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(v=o.filter(function(S){return!lme(S)&&!qo(S.name,d,t)}).map(function(S){return S.name})).length>0)throw b="",h!=null&&(b="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+c+"]"),new Error("Cannot compute the outputs ["+v+"] from the provided inputs ["+i+"]. Consider providing the following inputs: ["+l+"]. "+b);return[2,d]}})})},n.prototype.processStack=function(e,t,r,i,a,o,s,u,l){for(var h=this,c=[],f=function(){var p=t.pop();r.currentContext=p.contexts;var m="";if(p.node.op==="Enter"&&_e("isConstant",p.node,i,r)&&(m=F2(p.node.name,r)[0]),e.indexOf(p.node)===-1){var g=nZ(p.node,i,r);m||(m=F2(p.node.name,r)[0]);var y=r.currentContext;g instanceof Promise?c.push(g.then(function(v){return i[m]=v,r.currentContext=y,h.checkTensorForDisposal(m,p.node,i,r,o,s,u),h.processChildNodes(p.node,t,r,i,a,l),v})):(i[m]=g,d.checkTensorForDisposal(m,p.node,i,r,o,s,u),d.processChildNodes(p.node,t,r,i,a,l))}else d.processChildNodes(p.node,t,r,i,a,l)},d=this;t.length>0;)f();return c},n.prototype.processChildNodes=function(e,t,r,i,a,o){e.children.forEach(function(s){var u=F2(s.name,r)[0];!a[u]&&o.has(s.name)&&(s.op==="Merge"?s.inputNames.some(function(l){return!!qo(l,i,r)})&&(a[u]=!0,t.push({contexts:r.currentContext,node:s})):s.inputNames.every(function(l){return!!qo(l,i,r)})&&(a[u]=!0,t.push({contexts:r.currentContext,node:s})))})},n.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach(function(t){return e.weightMap[t].forEach(function(r){return r.dispose()})})},n.prototype.checkInputShapeAndType=function(e){var t=this;Object.keys(e).forEach(function(r){var i=e[r],a=ol(r)[0],o=t.graph.nodes[a];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,u=s.length===i.shape.length&&i.shape.every(function(l,h){return s[h]===-1||s[h]===l});gn.assert(u,function(){return"The shape of dict['"+o.name+"'] provided in model.execute(dict) must be ["+s+"], but was ["+i.shape+"]"})}o.attrParams.dtype&&o.attrParams.dtype.value&&gn.assert(i.dtype===o.attrParams.dtype.value,function(){return"The dtype of dict['"+o.name+"'] provided in model.execute(dict) must be "+o.attrParams.dtype.value+", but was "+i.dtype})})},n.prototype.mapInputs=function(e){var t={};for(var r in e)this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null?t[this._signature.inputs[r].name]=e[r]:t[r]=e[r];return t},n.prototype.checkInputs=function(e){var t=this,r=Object.keys(e).filter(function(i){var a=ol(i)[0];return t.graph.nodes[a]==null});if(r.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+r+"] that are not part of graph")},n.prototype.mapOutputs=function(e){var t=this;return e.map(function(r){return t._signature!=null&&t._signature.outputs!=null&&t._signature.outputs[r]!=null?t._signature.outputs[r].name:r},{})},n.prototype.checkOutputs=function(e){var t=this;e.forEach(function(r){var i=ol(r)[0];if(!t.graph.nodes[i])throw new Error("The output '"+r+"' is not found in the graph")})},n}();(function(){function n(e,t){t===void 0&&(t={}),this.modelUrl=e,this.loadOptions=t,this.version="n/a",t==null&&(this.loadOptions={})}return Object.defineProperty(n.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),n.prototype.findIOHandler=function(){var e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=dp.browserHTTPRequest(e,this.loadOptions);else{var t=dp.getLoadHandlers(e,this.loadOptions.onProgress);if(t.length===0)t.push(dp.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for URL '"+[e]+"'");this.handler=t[0]}},n.prototype.load=function(){return Z0(this,void 0,void 0,function(){var e,t,r,i;return J0(this,function(a){switch(a.label){case 0:if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return e=this,[4,this.handler.load()];case 1:return e.artifacts=a.sent(),t=this.artifacts.modelTopology,r={},this.artifacts.userDefinedMetadata!=null&&(r=this.artifacts.userDefinedMetadata.signature),this.version=t.versions.producer+"."+t.versions.minConsumer,i=dp.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs),this.executor=new tXe(kGe.Instance.transformGraph(t,r)),this.executor.weightMap=this.convertTensorMapToTensorsMap(i),[2,!0]}})})},n.prototype.save=function(e,t){return Z0(this,void 0,void 0,function(){var r;return J0(this,function(i){if(typeof e=="string"){if((r=dp.getSaveHandlers(e)).length===0)throw new Error("Cannot find any save handlers for URL '"+e+"'");if(r.length>1)throw new Error("Found more than one ("+r.length+") save handlers for URL '"+e+"'");e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[2,e.save(this.artifacts)]})})},n.prototype.predict=function(e,t){return this.execute(e,this.outputNodes)},n.prototype.normalizeInputs=function(e){if(!(e instanceof cr||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+e.length+" input tensors.");return this.inputNodes.reduce(function(t,r,i){return t[r]=e[i],t},{})},n.prototype.normalizeOutputs=function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]},n.prototype.execute=function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var r=this.executor.execute(e,t);return r.length>1?r:r[0]},n.prototype.executeAsync=function(e,t){return Z0(this,void 0,void 0,function(){var r;return J0(this,function(i){switch(i.label){case 0:return e=this.normalizeInputs(e),t=this.normalizeOutputs(t),[4,this.executor.executeAsync(e,t)];case 1:return[2,(r=i.sent()).length>1?r:r[0]]}})})},n.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce(function(t,r){return t[r]=[e[r]],t},{})},n.prototype.dispose=function(){this.executor.dispose()},n})();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var cme=function(n,e){return(cme=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function Rr(n,e){function t(){this.constructor=n}cme(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function $t(n,e,t,r){return new(t||(t=Promise))(function(i,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function s(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):new t(function(h){h(l.value)}).then(o,s)}u((r=r.apply(n,[])).next())})}function qt(n,e){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&h[0]?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return o.label++,{value:h[1],done:!1};case 5:o.label++,r=h[1],h=[0];continue;case 7:h=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){o=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){o.label=h[1];break}if(h[0]===6&&o.label<i[1]){o.label=i[1],i=h;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(h);break}i[2]&&o.ops.pop(),o.trys.pop();continue}h=e.call(n,o)}catch(c){h=[6,c],r=0}finally{t=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([u,l])}}}function B1(n,e){return n(e={exports:{}},e.exports),e.exports}var nXe=B1(function(n){(function(e,t,r){function i(o,s){return s.c=o.c,s.s0=o.s0,s.s1=o.s1,s.s2=o.s2,s}function a(o,s){var u=new function(c){var f,d=this,p=(f=4022871197,function(m){m=m.toString();for(var g=0;g<m.length;g++){var y=.02519603282416938*(f+=m.charCodeAt(g));y-=f=y>>>0,f=(y*=f)>>>0,f+=4294967296*(y-=f)}return 23283064365386963e-26*(f>>>0)});d.next=function(){var m=2091639*d.s0+23283064365386963e-26*d.c;return d.s0=d.s1,d.s1=d.s2,d.s2=m-(d.c=0|m)},d.c=1,d.s0=p(" "),d.s1=p(" "),d.s2=p(" "),d.s0-=p(c),d.s0<0&&(d.s0+=1),d.s1-=p(c),d.s1<0&&(d.s1+=1),d.s2-=p(c),d.s2<0&&(d.s2+=1),p=null}(o),l=s&&s.state,h=u.next;return h.int32=function(){return 4294967296*u.next()|0},h.double=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.quick=h,l&&(typeof l=="object"&&i(l,u),h.state=function(){return i(u,{})}),h}t&&t.exports?t.exports=a:this.alea=a})(0,n)}),rXe=B1(function(n){(function(e,t,r){function i(o,s){return s.x=o.x,s.y=o.y,s.z=o.z,s.w=o.w,s}function a(o,s){var u=new function(c){var f=this,d="";f.x=0,f.y=0,f.z=0,f.w=0,f.next=function(){var m=f.x^f.x<<11;return f.x=f.y,f.y=f.z,f.z=f.w,f.w^=f.w>>>19^m^m>>>8},c===(0|c)?f.x=c:d+=c;for(var p=0;p<d.length+64;p++)f.x^=0|d.charCodeAt(p),f.next()}(o),l=s&&s.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var c=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(c===0);return c},h.int32=u.next,h.quick=h,l&&(typeof l=="object"&&i(l,u),h.state=function(){return i(u,{})}),h}t&&t.exports?t.exports=a:this.xor128=a})(0,n)}),iXe=B1(function(n){(function(e,t,r){function i(o,s){return s.x=o.x,s.y=o.y,s.z=o.z,s.w=o.w,s.v=o.v,s.d=o.d,s}function a(o,s){var u=new function(c){var f=this,d="";f.next=function(){var m=f.x^f.x>>>2;return f.x=f.y,f.y=f.z,f.z=f.w,f.w=f.v,(f.d=f.d+362437|0)+(f.v=f.v^f.v<<4^m^m<<1)|0},f.x=0,f.y=0,f.z=0,f.w=0,f.v=0,c===(0|c)?f.x=c:d+=c;for(var p=0;p<d.length+64;p++)f.x^=0|d.charCodeAt(p),p==d.length&&(f.d=f.x<<10^f.x>>>4),f.next()}(o),l=s&&s.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var c=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(c===0);return c},h.int32=u.next,h.quick=h,l&&(typeof l=="object"&&i(l,u),h.state=function(){return i(u,{})}),h}t&&t.exports?t.exports=a:this.xorwow=a})(0,n)}),aXe=B1(function(n){(function(e,t,r){function i(o,s){return s.x=o.x.slice(),s.i=o.i,s}function a(o,s){o==null&&(o=+new Date);var u=new function(c){var f=this;f.next=function(){var d,p,m=f.x,g=f.i;return d=m[g],p=(d^=d>>>7)^d<<24,p^=(d=m[g+1&7])^d>>>10,p^=(d=m[g+3&7])^d>>>3,p^=(d=m[g+4&7])^d<<7,d=m[g+7&7],p^=(d^=d<<13)^d<<9,m[g]=p,f.i=g+1&7,p},function(d,p){var m,g=[];if(p===(0|p))g[0]=p;else for(p=""+p,m=0;m<p.length;++m)g[7&m]=g[7&m]<<15^p.charCodeAt(m)+g[m+1&7]<<13;for(;g.length<8;)g.push(0);for(m=0;m<8&&g[m]===0;++m);for(m==8?g[7]=-1:g[m],d.x=g,d.i=0,m=256;m>0;--m)d.next()}(f,c)}(o),l=s&&s.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var c=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(c===0);return c},h.int32=u.next,h.quick=h,l&&(l.x&&i(l,u),h.state=function(){return i(u,{})}),h}t&&t.exports?t.exports=a:this.xorshift7=a})(0,n)}),sXe=B1(function(n){(function(e,t,r){function i(o,s){return s.i=o.i,s.w=o.w,s.X=o.X.slice(),s}function a(o,s){o==null&&(o=+new Date);var u=new function(c){var f=this;f.next=function(){var d,p,m=f.w,g=f.X,y=f.i;return f.w=m=m+1640531527|0,p=g[y+34&127],d=g[y=y+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=g[y]=p^d,f.i=y,p+(m^m>>>16)|0},function(d,p){var m,g,y,v,b,w=[],x=128;for(p===(0|p)?(g=p,p=null):(p+="\0",g=0,x=Math.max(x,p.length)),y=0,v=-32;v<x;++v)p&&(g^=p.charCodeAt((v+32)%p.length)),v===0&&(b=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,v>=0&&(b=b+1640531527|0,y=(m=w[127&v]^=g+b)==0?y+1:0);for(y>=128&&(w[127&(p&&p.length||0)]=-1),y=127,v=512;v>0;--v)g=w[y+34&127],m=w[y=y+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,w[y]=g^m;d.w=b,d.X=w,d.i=y}(f,c)}(o),l=s&&s.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var c=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(c===0);return c},h.int32=u.next,h.quick=h,l&&(l.X&&i(l,u),h.state=function(){return i(u,{})}),h}t&&t.exports?t.exports=a:this.xor4096=a})(0,n)}),oXe=B1(function(n){(function(e,t,r){function i(o,s){return s.a=o.a,s.b=o.b,s.c=o.c,s.d=o.d,s}function a(o,s){var u=new function(c){var f=this,d="";f.next=function(){var m=f.b,g=f.c,y=f.d,v=f.a;return m=m<<25^m>>>7^g,g=g-y|0,y=y<<24^y>>>8^v,v=v-m|0,f.b=m=m<<20^m>>>12^g,f.c=g=g-y|0,f.d=y<<16^g>>>16^v,f.a=v-m|0},f.a=0,f.b=0,f.c=-1640531527,f.d=1367130551,c===Math.floor(c)?(f.a=c/4294967296|0,f.b=0|c):d+=c;for(var p=0;p<d.length+20;p++)f.b^=0|d.charCodeAt(p),f.next()}(o),l=s&&s.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var c=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(c===0);return c},h.int32=u.next,h.quick=h,l&&(typeof l=="object"&&i(l,u),h.state=function(){return i(u,{})}),h}t&&t.exports?t.exports=a:this.tychei=a})(0,n)}),bv=B1(function(n){(function(e,t){var r,i=this,a=256,o=6,s="random",u=t.pow(a,o),l=t.pow(2,52),h=2*l,c=a-1;function f(g,y,v){var b=[],w=p(function E(A,k){var T,O=[],F=typeof A;if(k&&F=="object")for(T in A)try{O.push(E(A[T],k-1))}catch{}return O.length?O:F=="string"?A:A+"\0"}((y=y==1?{entropy:!0}:y||{}).entropy?[g,m(e)]:g??function(){try{var E;return r&&(E=r.randomBytes)?E=E(a):(E=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(E)),m(E)}catch{var A=i.navigator,k=A&&A.plugins;return[+new Date,i,k,i.screen,m(e)]}}(),3),b),x=new function(E){var A,k=E.length,T=this,O=0,F=T.i=T.j=0,I=T.S=[];for(k||(E=[k++]);O<a;)I[O]=O++;for(O=0;O<a;O++)I[O]=I[F=c&F+E[O%k]+(A=I[O])],I[F]=A;(T.g=function(R){for(var U,B=0,W=T.i,Y=T.j,z=T.S;R--;)U=z[W=c&W+1],B=B*a+z[c&(z[W]=z[Y=c&Y+U])+(z[Y]=U)];return T.i=W,T.j=Y,B})(a)}(b),S=function(){for(var E=x.g(o),A=u,k=0;E<l;)E=(E+k)*a,A*=a,k=x.g(1);for(;E>=h;)E/=2,A/=2,k>>>=1;return(E+k)/A};return S.int32=function(){return 0|x.g(4)},S.quick=function(){return x.g(4)/4294967296},S.double=S,p(m(x.S),e),(y.pass||v||function(E,A,k,T){return T&&(T.S&&d(T,x),E.state=function(){return d(x,{})}),k?(t[s]=E,A):E})(S,w,"global"in y?y.global:this==t,y.state)}function d(g,y){return y.i=g.i,y.j=g.j,y.S=g.S.slice(),y}function p(g,y){for(var v,b=g+"",w=0;w<b.length;)y[c&w]=c&(v^=19*y[c&w])+b.charCodeAt(w++);return m(y)}function m(g){return String.fromCharCode.apply(0,g)}if(t["seed"+s]=f,p(t.random(),e),n.exports){n.exports=f;try{r=require("crypto")}catch{}}})([],Math)});bv.alea=nXe,bv.xor128=rXe,bv.xorwow=iXe,bv.xorshift7=aXe,bv.xor4096=sXe,bv.tychei=oXe;var uXe=bv,hme=uXe.alea;function lXe(n,e){return OO(n,e)}function OO(n,e,t,r){if(t===void 0&&(t=new Map),r===void 0&&(r=new Set),n==null)return null;if(r.has(n))throw new Error("Circular references are not supported.");if(t.has(n))return t.get(n);var i=e(n);if(i.recurse&&i.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(_4(n)){var a=Array.isArray(n)?[]:{};for(var o in r.add(n),n){var s=OO(n[o],e,t,r);a[o]=s}return r.delete(n),a}throw new Error("Can't recurse into non-iterable type: "+n)}return t.set(n,i.value),i.value}function cXe(n,e){return e===void 0&&(e=dme),fme(n,e)}function fme(n,e,t){t===void 0&&(t=new Set);var r=n[0];if(t.has(r))throw new Error("Circular references are not supported.");var i=e(n);if(i.recurse&&i.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(_4(r)){var a=Array.isArray(r)?[]:{};t.add(r);var o=function(u){var l=fme(n.map(function(h){return h[u]}),e,t);a[u]=l};for(var s in r)o(s);return t.delete(r),a}throw new Error("Can't recurse into non-iterable type: "+r)}return i.value}function dme(n){return n===null?null:_4(n[0])?{value:null,recurse:!0}:{value:n,recurse:!1}}function hXe(n,e){return $t(this,void 0,void 0,function(){var t,r,i,a,o,s;return qt(this,function(u){switch(u.label){case 0:t=new Map,OO(n,e,t),r=0,i=Array.from(t.keys()),u.label=1;case 1:return r<i.length?(a=i[r],(o=t.get(a))instanceof Promise?[4,o]:[3,3]):[3,4];case 2:s=u.sent(),t.set(a,s),u.label=3;case 3:return r++,[3,1];case 4:return[2,OO(n,e,t)]}})})}function _4(n){return n!=null&&!ArrayBuffer.isView(n)&&(Array.isArray(n)||typeof n=="object"&&!(n instanceof cr))}function fXe(n){return n==null||dXe(n)||Array.isArray(n)||typeof n=="object"&&n instanceof cr||gn.isTypedArray(n)}function dXe(n){return n===null||typeof n!="object"&&typeof n!="function"}function pXe(n){return lXe(n,gXe)}function gXe(n){return n instanceof cr?{value:n.clone(),recurse:!1}:_4(n)?{value:null,recurse:!0}:{value:n,recurse:!1}}var pme=function(){function n(e){if(this.capacity=e,this.begin=0,this.end=0,e==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}return n.prototype.wrap=function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity},n.prototype.get=function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]},n.prototype.set=function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t},n.prototype.length=function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e},n.prototype.isFull=function(){return this.length()===this.capacity},n.prototype.isEmpty=function(){return this.length()===0},n.prototype.push=function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)},n.prototype.pushAll=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];this.push(i)}},n.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e},n.prototype.unshift=function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)},n.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e},n.prototype.shuffleExcise=function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),r=this.get(t);return this.set(t,this.pop()),r},n}(),mXe=function(n){function e(){return n.call(this,e.INITIAL_CAPACITY)||this}return Rr(e,n),e.prototype.isFull=function(){return!1},e.prototype.push=function(t){n.prototype.isFull.call(this)&&this.expand(),n.prototype.push.call(this,t)},e.prototype.unshift=function(t){n.prototype.isFull.call(this)&&this.expand(),n.prototype.unshift.call(this,t)},e.prototype.expand=function(){for(var t=2*this.capacity,r=new Array(t),i=this.length(),a=0;a<i;a++)r[a]=this.get(this.wrap(this.begin+a));this.data=r,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=i},e.INITIAL_CAPACITY=32,e}(pme);function yXe(n){return new wXe(n)}function vXe(n){return new xXe(n)}function bXe(n,e){return new gme(n,e)}var m2,rs=function(){function n(){}return n.prototype.toArray=function(){return $t(this,void 0,void 0,function(){var e,t;return qt(this,function(r){switch(r.label){case 0:return e=[],[4,this.next()];case 1:t=r.sent(),r.label=2;case 2:return t.done?[3,4]:(e.push(t.value),[4,this.next()]);case 3:return t=r.sent(),[3,2];case 4:return[2,e]}})})},n.prototype.toArrayForTest=function(){return $t(this,void 0,void 0,function(){var e,t,r;return qt(this,function(i){switch(i.label){case 0:return e=this.prefetch(100),t=[],[4,e.next()];case 1:r=i.sent(),i.label=2;case 2:return r.done?[3,4]:(t.push(r.value),[4,e.next()]);case 3:return r=i.sent(),[3,2];case 4:return[2,t]}})})},n.prototype.resolveFully=function(){return $t(this,void 0,void 0,function(){var e;return qt(this,function(t){switch(t.label){case 0:return[4,this.next()];case 1:e=t.sent(),t.label=2;case 2:return e.done?[3,4]:[4,this.next()];case 3:return e=t.sent(),[3,2];case 4:return[2]}})})},n.prototype.resolveWhile=function(e){return $t(this,void 0,void 0,function(){var t,r;return qt(this,function(i){switch(i.label){case 0:return[4,this.next()];case 1:t=i.sent(),r=e(t.value),i.label=2;case 2:return t.done||!r?[3,4]:[4,this.next()];case 3:return t=i.sent(),r=e(t.value),[3,2];case 4:return[2]}})})},n.prototype.handleErrors=function(e){return new AXe(this,e)},n.prototype.filter=function(e){return new TXe(this,e)},n.prototype.map=function(e){return new DXe(this,e)},n.prototype.mapAsync=function(e){return new aZ(this,e)},n.prototype.serialMapAsync=function(e){return new aZ(this,e).serial()},n.prototype.flatmap=function(e){return new kXe(this,e)},n.prototype.forEachAsync=function(e){return $t(this,void 0,void 0,function(){return qt(this,function(t){return[2,this.map(e).resolveFully()]})})},n.prototype.serialForEach=function(e){return $t(this,void 0,void 0,function(){return qt(this,function(t){return[2,this.serialMapAsync(e).resolveWhile(function(r){return r===!0})]})})},n.prototype.rowMajorBatch=function(e,t){return t===void 0&&(t=!0),new EXe(this,e,t)},n.prototype.columnMajorBatch=function(e,t,r){return t===void 0&&(t=!0),r===void 0&&(r=dme),this.rowMajorBatch(e,t).map(function(i){return cXe(i,r)})},n.prototype.concatenate=function(e,t){return new gme(yXe([this,e]),t)},n.prototype.take=function(e){return e<0||e==null?this:new CXe(this,e)},n.prototype.skip=function(e){return e<0||e==null?this:new SXe(this,e)},n.prototype.prefetch=function(e){return new mme(this,e)},n.prototype.shuffle=function(e,t){return new NXe(this,e,t)},n.prototype.serial=function(){return new _Xe(this)},n}(),wXe=function(n){function e(t){var r=n.call(this)||this;return r.items=t,r.trav=0,r}return Rr(e,n),e.prototype.summary=function(){return"Array of "+this.items.length+" items"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t;return qt(this,function(r){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(t=this.items[this.trav],this.trav++,[2,{value:pXe(t),done:!1}])})})},e}(rs),xXe=function(n){function e(t){var r=n.call(this)||this;return r.nextFn=t,r}return Rr(e,n),e.prototype.summary=function(){return"Function call"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){try{return[2,this.nextFn()]}catch(r){throw r.message="Error thrown while iterating through a dataset: "+r.message,r}return[2]})})},e}(rs),_Xe=function(n){function e(t){var r=n.call(this)||this;return r.upstream=t,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> Serial"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t=this;return qt(this,function(r){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){return[2,this.upstream.next()]})})},e}(rs),SXe=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.maxCount=r,i.count=0,i.lastRead=Promise.resolve({value:null,done:!1}),i}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> Skip"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t=this;return qt(this,function(r){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return $t(this,void 0,void 0,function(){var t;return qt(this,function(r){switch(r.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(t=r.sent()).done?[2,t]:(rr(t.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},e}(rs),CXe=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.maxCount=r,i.count=0,i}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> Take"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},e}(rs),EXe=function(n){function e(t,r,i){i===void 0&&(i=!0);var a=n.call(this)||this;return a.upstream=t,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t=this;return qt(this,function(r){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return $t(this,void 0,void 0,function(){var t,r;return qt(this,function(i){switch(i.label){case 0:t=[],i.label=1;case 1:return t.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return(r=i.sent()).done?this.enableSmallLastBatch&&t.length>0?[2,{value:t,done:!1}]:[2,{value:null,done:!0}]:(t.push(r.value),[3,1]);case 3:return[2,{value:t,done:!1}]}})})},e}(rs),TXe=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.predicate=r,i.lastRead=Promise.resolve({value:null,done:!1}),i}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> Filter"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t=this;return qt(this,function(r){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return $t(this,void 0,void 0,function(){var t;return qt(this,function(r){switch(r.label){case 0:return[4,this.upstream.next()];case 1:return(t=r.sent()).done||this.predicate(t.value)?[2,t]:(rr(t.value),[3,0]);case 2:return[2]}})})},e}(rs),DXe=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.transform=r,i}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> Map"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t,r,i,a,o,s,u;return qt(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:if((t=l.sent()).done)return[2,{value:null,done:!0}];for(r=mp.getTensorsInContainer(t.value),i=this.transform(t.value),a=mp.getTensorsInContainer(i),o=0,s=r;o<s.length;o++)u=s[o],mp.isTensorInList(u,a)||u.dispose();return[2,{value:i,done:!1}]}})})},e}(rs),AXe=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.handler=r,i.count=0,i.lastRead=Promise.resolve({value:null,done:!1}),i}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> handleErrors"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t=this;return qt(this,function(r){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return $t(this,void 0,void 0,function(){var t;return qt(this,function(r){switch(r.label){case 0:r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,r.sent()];case 3:return t=r.sent(),this.handler(t)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}})})},e}(rs),aZ=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.transform=r,i}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> AsyncMap"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t,r,i,a,o,s,u;return qt(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:return(t=l.sent()).done?[2,{value:null,done:!0}]:(r=mp.getTensorsInContainer(t.value),[4,this.transform(t.value)]);case 2:for(i=l.sent(),a=mp.getTensorsInContainer(i),o=0,s=r;o<s.length;o++)u=s[o],mp.isTensorInList(u,a)||u.dispose();return[2,{value:i,done:!1}]}})})},e}(rs),oj=function(n){function e(){var t=n.call(this)||this;return t.outputQueue=new mXe,t.lastRead=Promise.resolve({value:null,done:!1}),t}return Rr(e,n),e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t=this;return qt(this,function(r){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return this.outputQueue.length()!==0?[3,2]:[4,this.pump()];case 1:return t.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},e}(rs),kXe=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.transform=r,i}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> Flatmap"},e.prototype.pump=function(){return $t(this,void 0,void 0,function(){var t,r,i,a,o,s,u;return qt(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:if((t=l.sent()).done)return[2,!1];for(r=mp.getTensorsInContainer(t.value),i=this.transform(t.value),a=mp.getTensorsInContainer(i),this.outputQueue.pushAll(i),o=0,s=r;o<s.length;o++)u=s[o],mp.isTensorInList(u,a)||u.dispose();return[2,!0]}})})},e}(oj),gme=function(n){function e(t,r){var i=n.call(this)||this;return i.baseErrorHandler=r,i.lastRead=null,i.iterator=null,i.moreIterators=t,i}return Rr(e,n),e.prototype.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},e.prototype.next=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},e.prototype.readFromChain=function(t){return $t(this,void 0,void 0,function(){var r,i;return qt(this,function(a){switch(a.label){case 0:return[4,t];case 1:return a.sent(),this.iterator!=null?[3,3]:[4,this.moreIterators.next()];case 2:if((r=a.sent()).done)return[2,{value:null,done:!0}];this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),a.label=3;case 3:return[4,this.iterator.next()];case 4:return(i=a.sent()).done?(this.iterator=null,[2,this.readFromChain(t)]):[2,i]}})})},e}(rs);(function(n){n[n.FAIL=0]="FAIL",n[n.SHORTEST=1]="SHORTEST",n[n.LONGEST=2]="LONGEST"})(m2||(m2={}));(function(n){function e(t,r){r===void 0&&(r=m2.FAIL);var i=n.call(this)||this;return i.iterators=t,i.mismatchMode=r,i.count=0,i.currentPromise=null,i}return Rr(e,n),e.prototype.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},e.prototype.nextState=function(t){return $t(this,void 0,void 0,function(){function r(s){return s instanceof rs?{value:s.next().then(function(u){return i++,u.done&&a++,u.value}),recurse:!1}:{value:null,recurse:!0}}var i,a,o;return qt(this,function(s){switch(s.label){case 0:return[4,t];case 1:return s.sent(),i=0,a=0,[4,hXe(this.iterators,r)];case 2:if(o=s.sent(),i===a)return[2,{value:null,done:!0}];if(a>0)switch(this.mismatchMode){case m2.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case m2.SHORTEST:return[2,{value:null,done:!0}];case m2.LONGEST:}return this.count++,[2,{value:o,done:!1}]}})})},e.prototype.next=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]})})},e})(rs);var mme=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.bufferSize=r,i.buffer=new pme(r),i}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> Prefetch"},e.prototype.refill=function(){for(;!this.buffer.isFull();){var t=this.upstream.next();this.buffer.push(t)}},e.prototype.next=function(){return this.refill(),this.buffer.shift()},e}(rs),NXe=function(n){function e(t,r,i){var a=n.call(this,t,r)||this;return a.upstream=t,a.windowSize=r,a.upstreamExhausted=!1,a.random=hme(i||gn.now().toString()),a.lastRead=Promise.resolve({value:null,done:!1}),a}return Rr(e,n),e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t=this;return qt(this,function(r){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.randomInt=function(t){return Math.floor(this.random()*t)},e.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},e.prototype.serialNext=function(){return $t(this,void 0,void 0,function(){var t,r;return qt(this,function(i){switch(i.label){case 0:this.upstreamExhausted||this.refill(),i.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(t=this.chooseIndex(),[4,this.buffer.shuffleExcise(t)]);case 2:return(r=i.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,r]);case 3:return[2,{value:null,done:!0}]}})})},e}(mme),uj=function(){function n(){this.size=null}return n.prototype.batch=function(e,t){var r=this;t===void 0&&(t=!0);var i=this;return gn.assert(e>0,function(){return`batchSize needs to be positive, but it is
      `+e}),rf(function(){return $t(r,void 0,void 0,function(){return qt(this,function(a){switch(a.label){case 0:return[4,i.iterator()];case 1:return[2,a.sent().columnMajorBatch(e,t,OXe)]}})})},this.size===1/0||this.size==null?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e))},n.prototype.concatenate=function(e){var t=this,r=this;return rf(function(){return $t(t,void 0,void 0,function(){var i,a;return qt(this,function(o){switch(o.label){case 0:return[4,r.iterator()];case 1:return a=(i=o.sent()).concatenate,[4,e.iterator()];case 2:return[2,a.apply(i,[o.sent()])]}})})},this.size===1/0||e.size===1/0?1/0:this.size!=null&&e.size!=null?this.size+e.size:null)},n.prototype.filter=function(e){var t=this,r=this;return rf(function(){return $t(t,void 0,void 0,function(){return qt(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().filter(function(a){return Ze(function(){return e(a)})})]}})})},this.size===1/0?1/0:null)},n.prototype.forEachAsync=function(e){return $t(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return[4,this.iterator()];case 1:return[2,t.sent().forEachAsync(e)]}})})},n.prototype.forEach=function(e){return $t(this,void 0,void 0,function(){return qt(this,function(t){return tW("dataset.forEach() is deprecated and will be removed. Please use dataset.forEachAsync() instead"),[2,this.forEachAsync(e)]})})},n.prototype.map=function(e){var t=this,r=this;return rf(function(){return $t(t,void 0,void 0,function(){return qt(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().map(function(a){return Ze(function(){return e(a)})})]}})})},this.size)},n.prototype.mapAsync=function(e){var t=this,r=this;return rf(function(){return $t(t,void 0,void 0,function(){return qt(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().mapAsync(e)]}})})},this.size)},n.prototype.prefetch=function(e){var t=this;if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var r=this;return rf(function(){return $t(t,void 0,void 0,function(){return qt(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().prefetch(e)]}})})},this.size)},n.prototype.repeat=function(e){var t=this,r=this;return rf(function(){return $t(t,void 0,void 0,function(){var i=this;return qt(this,function(a){return[2,bXe(vXe(function(){return $t(i,void 0,void 0,function(){var o;return qt(this,function(s){switch(s.label){case 0:return o={},[4,r.iterator()];case 1:return[2,(o.value=s.sent(),o.done=!1,o)]}})})}).take(e))]})})},this.size!=null&&e>0?this.size*e:e===0?0:this.size!=null&&(e===void 0||e<0)?1/0:null)},n.prototype.skip=function(e){var t=this,r=this;return rf(function(){return $t(t,void 0,void 0,function(){return qt(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().skip(e)]}})})},this.size!=null&&e>=0&&this.size>=e?this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?0:null)},n.prototype.shuffle=function(e,t,r){var i=this;if(r===void 0&&(r=!0),e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var a=this,o=hme(t||gn.now().toString());return rf(function(){return $t(i,void 0,void 0,function(){var s;return qt(this,function(u){switch(u.label){case 0:return s=o.int32(),r&&(s+=o.int32()),[4,a.iterator()];case 1:return[2,u.sent().shuffle(e,s.toString())]}})})},this.size)},n.prototype.take=function(e){var t=this,r=this;return rf(function(){return $t(t,void 0,void 0,function(){return qt(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().take(e)]}})})},this.size!=null&&this.size>e?e:this.size!=null&&this.size<=e?this.size:null)},n.prototype.toArray=function(){return $t(this,void 0,void 0,function(){return qt(this,function(e){switch(e.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,e.sent().toArray()]}})})},n.prototype.toArrayForTest=function(){return $t(this,void 0,void 0,function(){return qt(this,function(e){switch(e.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,e.sent().toArrayForTest()]}})})},n.MAX_BUFFER_SIZE=1e4,n}();function rf(n,e){return e===void 0&&(e=null),new(function(t){function r(){var i=t!==null&&t.apply(this,arguments)||this;return i.size=e,i}return Rr(r,t),r.prototype.iterator=function(){return $t(this,void 0,void 0,function(){return qt(this,function(i){return[2,n()]})})},r}(uj))}function OXe(n){return n===null?null:fXe(n[0])?{value:RXe(n),recurse:!1}:{value:null,recurse:!0}}function RXe(n){if(n.length===0)throw new Error("Can't make a batch of zero elements.");return n[0]instanceof cr?mh(n):Na(n)}var IXe=function(n){function e(t){var r=n.call(this)||this;return r.input=t,r}return Rr(e,n),e.prototype.iterator=function(){return $t(this,void 0,void 0,function(){var t,r;return qt(this,function(i){switch(i.label){case 0:return[4,this.input.iterator()];case 1:return t=i.sent(),r=t.decodeUTF8(),[2,r.split(`
`).map(function(a){return a.endsWith("\r")&&(a=a.slice(0,-1)),a})]}})})},e}(uj),Wk='"',nS=Symbol("out"),sZ=Symbol("field"),jk=Symbol("quote"),FM=Symbol("quoteafterquote"),oZ=Symbol("quoteinquote");(function(n){function e(t,r){var i=n.call(this)||this;return i.input=t,i.hasHeader=!0,i.fullColumnNames=null,i.columnNamesValidated=!1,i.columnConfigs=null,i.configuredColumnsOnly=!1,i.delimiter=",",i.delimWhitespace=!1,i.base=new IXe(t),r||(r={}),i.hasHeader=r.hasHeader!==!1,i.fullColumnNames=r.columnNames,i.columnConfigs=r.columnConfigs,i.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(gn.assert(r.delimiter==null,function(){return"Delimiter should not be provided when delimWhitespace is true."}),i.delimWhitespace=!0,i.delimiter=" "):i.delimiter=r.delimiter?r.delimiter:",",i}return Rr(e,n),e.prototype.columnNames=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:t.sent(),t.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}})})},e.prototype.setColumnNames=function(){return $t(this,void 0,void 0,function(){var t,r,i,a,o,s,u=this;return qt(this,function(l){switch(l.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(t=l.sent(),!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&t&&gn.assert(t.length===this.fullColumnNames.length,function(){return"The length of provided columnNames ("+u.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."}),this.fullColumnNames||(this.fullColumnNames=t),r=this.fullColumnNames.reduce(function(h,c){return h[c]=h[c]+1||1,h},{}),i=Object.keys(r).filter(function(h){return r[h]>1}),gn.assert(i.length===0,function(){return"Duplicate column names found: "+i.toString()}),this.columnConfigs){for(a=0,o=Object.keys(this.columnConfigs);a<o.length;a++)if(s=o[a],this.fullColumnNames.indexOf(s)===-1)throw new Error('The key "'+s+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}return this.columnNamesValidated=!0,[2]}})})},e.prototype.maybeReadHeaderLine=function(){return $t(this,void 0,void 0,function(){var t,r;return qt(this,function(i){switch(i.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return[4,i.sent().next()];case 2:if((t=i.sent()).done)throw new Error("No data was found for CSV parsing.");return r=t.value,[2,this.parseRow(r,!1)];case 3:return[2,null]}})})},e.prototype.iterator=function(){return $t(this,void 0,void 0,function(){var t,r=this;return qt(this,function(i){switch(i.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:i.sent(),i.label=2;case 2:return[4,this.base.iterator()];case 3:return t=i.sent(),this.hasHeader&&(t=t.skip(1)),[2,t.map(function(a){return r.makeDataElement(a)})]}})})},e.prototype.makeDataElement=function(t){for(var r=this.parseRow(t),i={},a={},o=0;o<this.fullColumnNames.length;o++){var s=this.fullColumnNames[o],u=this.columnConfigs?this.columnConfigs[s]:null;if(!this.configuredColumnsOnly||u){var l=r[o],h=null;if(l==="")if(u&&u.default!==void 0)h=u.default;else{if(u&&(u.required||u.isLabel))throw new Error("Required column "+s+" is empty in this line: "+t);h=void 0}else{var c=Number(l);if(isNaN(c))h=u&&u.dtype==="bool"?this.getBoolean(l):l;else if(u&&u.dtype)switch(u.dtype){case"float32":h=c;break;case"int32":h=Math.floor(c);break;case"bool":h=this.getBoolean(l);break;default:h=c}else h=c}u&&u.isLabel?a[s]=h:i[s]=h}}return Object.keys(a).length===0?i:{xs:i,ys:a}},e.prototype.getBoolean=function(t){return t==="1"||t.toLowerCase()==="true"?1:0},e.prototype.parseRow=function(t,r){r===void 0&&(r=!0);for(var i=[],a=0,o=t.length,s=nS,u=0;u<o;u++)switch(s){case nS:switch(t.charAt(u)){case Wk:a=u+1,s=jk;break;case this.delimiter:if(a=u+1,this.delimiter===" "&&this.delimWhitespace)break;i.push(""),s=nS;break;default:s=sZ,a=u}break;case sZ:switch(t.charAt(u)){case this.delimiter:i.push(t.substring(a,u)),s=nS,a=u+1}break;case jk:switch(t.charAt(u)){case Wk:s=FM}break;case FM:switch(t.charAt(u)){case this.delimiter:i.push(t.substring(a,u-1)),s=nS,a=u+1;break;case Wk:s=jk;break;default:s=oZ}break;case oZ:switch(t.charAt(u)){case Wk:s=jk}}if(s===FM?i.push(t.substring(a,o-1)):i.push(t.substring(a)),r&&i.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+i);return i},e})(uj);(function(n){function e(t){var r=n.call(this)||this;r.microphoneConfig=t,r.isClosed=!1,r.fftSize=t.fftSize||1024;var i=Math.log2(r.fftSize);if(r.fftSize<0||i<4||i>14||!Number.isInteger(i))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+r.fftSize);if(r.numFrames=t.numFramesPerSpectrogram||43,r.sampleRateHz=t.sampleRateHz,r.columnTruncateLength=t.columnTruncateLength||r.fftSize,r.audioTrackConstraints=t.audioTrackConstraints,r.smoothingTimeConstant=t.smoothingTimeConstant||0,r.includeSpectrogram=t.includeSpectrogram!==!1,r.includeWaveform=t.includeWaveform===!0,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return Rr(e,n),e.prototype.summary=function(){return"microphone"},e.create=function(t){return t===void 0&&(t={}),$t(this,void 0,void 0,function(){var r;return qt(this,function(i){switch(i.label){case 0:if(ct().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");return[4,(r=new e(t)).start()];case 1:return i.sent(),[2,r]}})})},e.prototype.start=function(){return $t(this,void 0,void 0,function(){var t,r,i,a;return qt(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=this,[4,navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null||this.audioTrackConstraints,video:!1})];case 1:return t.stream=o.sent(),[3,3];case 2:throw r=o.sent(),new Error("Error thrown while initializing video stream: "+r.message);case 3:if(!this.stream)throw new Error("Could not obtain audio from microphone.");if(i=window.AudioContext||window.webkitAudioContext,this.audioContext=new i,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;return a=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,a.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}})})},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t,r,i,a,o;return qt(this,function(s){switch(s.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return i=s.sent(),this.includeSpectrogram&&(a=this.flattenQueue(i.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(o=this.flattenQueue(i.timeDataQueue),r=this.getTensorFromAudioDataArray(o,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:t,waveform:r},done:!1}]}})})},e.prototype.capture=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return[4,this.next()];case 1:return[2,t.sent().value]}})})},e.prototype.getAudioData=function(){return $t(this,void 0,void 0,function(){var t,r,i,a=this;return qt(this,function(o){return t=[],r=[],i=0,[2,new Promise(function(s){var u=setInterval(function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&s({freqDataQueue:t,timeDataQueue:r}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),r.push(a.timeData.slice())),++i===a.numFrames&&(clearInterval(u),s({freqDataQueue:t,timeDataQueue:r}))},a.fftSize/a.sampleRateHz*1e3)})]})})},e.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},e.prototype.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},e.prototype.getSampleRate=function(){return this.sampleRateHz},e.prototype.flattenQueue=function(t){var r=t[0].length,i=new Float32Array(t.length*r);return t.forEach(function(a,o){return i.set(a,o*r)}),i},e.prototype.getTensorFromAudioDataArray=function(t,r){var i=new Float32Array(gn.sizeFromShape(r));return i.set(t,i.length-t.length),Na(i,r)},e})(rs);(function(n){function e(t,r){var i=n.call(this)||this;if(i.webcamVideoElement=t,i.webcamConfig=r,i.isClosed=!0,i.resize=!1,i.needToResize())if(i.resize=!0,i.cropSize=[i.webcamConfig.resizeHeight,i.webcamConfig.resizeWidth],i.cropBoxInd=Ru([0],"int32"),i.webcamConfig.centerCrop){var a=1*i.webcamConfig.resizeWidth/i.webcamVideoElement.width,o=1*i.webcamConfig.resizeHeight/i.webcamVideoElement.height,s=(1-a)/2,u=(1-o)/2,l=s+a,h=o+u;i.cropBox=Im([u,s,h,l],[1,4])}else i.cropBox=Im([0,0,1,1],[1,4]);return i}return Rr(e,n),e.prototype.summary=function(){return"webcam"},e.create=function(t,r){return r===void 0&&(r={}),$t(this,void 0,void 0,function(){var i;return qt(this,function(a){switch(a.label){case 0:if(ct().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!r.resizeWidth||!r.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=r.resizeWidth,t.height=r.resizeHeight}return[4,(i=new e(t,r)).start()];case 1:return a.sent(),[2,i]}})})},e.prototype.start=function(){return $t(this,void 0,void 0,function(){var t,r,i=this;return qt(this,function(a){switch(a.label){case 0:this.webcamConfig.facingMode&&gn.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",function(){return"Invalid webcam facing mode: "+i.webcamConfig.facingMode+". Please provide 'user' or 'environment'"}),a.label=1;case 1:return a.trys.push([1,3,,4]),t=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return t.stream=a.sent(),[3,4];case 3:throw(r=a.sent()).message="Error thrown while initializing video stream: "+r.message,r;case 4:if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(o){console.log(o),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise(function(o){i.webcamVideoElement.onloadedmetadata=function(){o()}})]}})})},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t;return qt(this,function(r){if(this.isClosed)return[2,{value:null,done:!0}];try{t=B$e.fromPixels(this.webcamVideoElement)}catch(i){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(i))}if(!this.resize)return[2,{value:t,done:!1}];try{return[2,{value:this.cropAndResizeFrame(t),done:!1}]}catch(i){throw new Error("Error thrown cropping the video: "+i.message)}finally{t.dispose()}return[2]})})},e.prototype.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},e.prototype.cropAndResizeFrame=function(t){var r=this;return Ze(function(){var i,a=t.toFloat().expandDims(0),o=(i=K0.cropAndResize(a,r.cropBox,r.cropBoxInd,r.cropSize,"bilinear")).shape;return i.reshape(o.slice(1))})},e.prototype.capture=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return[4,this.next()];case 1:return[2,t.sent().value]}})})},e.prototype.stop=function(){this.stream.getTracks().forEach(function(t){return t.stop()});try{this.webcamVideoElement.srcObject=null}catch(t){console.log(t),this.webcamVideoElement.src=null}this.isClosed=!0},e.prototype.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},e})(rs);var yme=function(){return function(){}}(),vme=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Rr(e,n),e.prototype.split=function(t){return new FXe(this,t)},e}(rs),FXe=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.impl=new PXe(t,r),i}return Rr(e,n),e.prototype.summary=function(){return this.impl.summary()},e.prototype.next=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){return[2,this.impl.next()]})})},e}(vme),PXe=function(n){function e(t,r){var i=n.call(this)||this;return i.upstream=t,i.separator=r,i.carryover="",i}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},e.prototype.pump=function(){return $t(this,void 0,void 0,function(){var t,r,i,a,o;return qt(this,function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:if((t=s.sent()).done)return this.carryover===""?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((r=t.value.split(this.separator))[0]=this.carryover+r[0],i=0,a=r.slice(0,-1);i<a.length;i++)o=a[i],this.outputQueue.push(o);return this.carryover=r[r.length-1],[2,!0]}})})},e}(oj),LXe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Rr(e,n),e.prototype.decodeUTF8=function(){return new MXe(this)},e}(rs),MXe=function(n){function e(t){var r=n.call(this)||this;return r.upstream=t,r.impl=new UXe(t),r}return Rr(e,n),e.prototype.summary=function(){return this.impl.summary()},e.prototype.next=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){return[2,this.impl.next()]})})},e}(vme),UXe=function(n){function e(t){var r=n.call(this)||this;if(r.upstream=t,ct().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var i=require("string_decoder").StringDecoder;r.decoder=new i("utf8")}return r}return Rr(e,n),e.prototype.summary=function(){return this.upstream.summary()+" -> Utf8"},e.prototype.pump=function(){return $t(this,void 0,void 0,function(){var t,r,i;return qt(this,function(a){switch(a.label){case 0:return[4,this.upstream.next()];case 1:return(t=a.sent()).done?[2,!1]:(r=t.value,i=ct().get("IS_BROWSER")?this.decoder.decode(r,{stream:!0}):this.decoder.write(Buffer.from(r.buffer)),this.outputQueue.push(i),[2,!0])}})})},e}(oj),bme=function(n){function e(t,r){r===void 0&&(r={});var i=n.call(this)||this;return i.file=t,i.options=r,gn.assert(t instanceof Uint8Array||!!ct().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."}),i.offset=r.offset||0,i.chunkSize=r.chunkSize||1048576,i}return Rr(e,n),e.prototype.summary=function(){return"FileChunks "+this.file},e.prototype.next=function(){return $t(this,void 0,void 0,function(){var t,r,i=this;return qt(this,function(a){switch(a.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(t=new Promise(function(o,s){var u=i.offset+i.chunkSize;if(i.file instanceof Uint8Array)o(new Uint8Array(i.file.slice(i.offset,u)));else{var l=new FileReader;l.onload=function(c){var f=l.result;if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),!(f instanceof Uint8Array))return s(new TypeError("FileReader returned unknown type."));o(f)},l.onabort=function(c){return s(new Error("Aborted"))},l.onerror=function(c){return s(new Error(c.type))};var h=i.file.slice(i.offset,u);l.readAsArrayBuffer(h)}i.offset=u}),r={},[4,t]);case 1:return[2,(r.value=a.sent(),r.done=!1,r)]}})})},e}(LXe);function BXe(n,e){return e===void 0&&(e={}),$t(this,void 0,void 0,function(){var t,r,i,a,o;return qt(this,function(s){switch(s.label){case 0:return typeof n=="string"?t=n:(t=n.url,r=zXe(n)),[4,gn.fetch(t,r)];case 1:return(i=s.sent()).ok?(o=Uint8Array.bind,[4,i.arrayBuffer()]):[3,3];case 2:return a=new(o.apply(Uint8Array,[void 0,s.sent()])),[2,new bme(a,e)];case 3:throw new Error(i.statusText)}})})}var zXe=function(n){return{method:n.method,headers:n.headers,body:n.body,mode:n.mode,credentials:n.credentials,cache:n.cache,redirect:n.redirect,referrer:n.referrer,integrity:n.integrity}};function wme(n){return typeof n=="string"&&n.substr(0,7)==="file://"}var WXe=function(n){function e(t,r){r===void 0&&(r={});var i=n.call(this)||this;return i.input=t,i.options=r,i}return Rr(e,n),e.prototype.iterator=function(){return $t(this,void 0,void 0,function(){var t;return qt(this,function(r){return wme(this.input)&&ct().get("IS_NODE")&&(t=require("fs"),this.input=t.readFileSync(this.input.substr(7))),[2,new bme(this.input,this.options)]})})},e}(yme);(function(n){function e(t,r){r===void 0&&(r={});var i=n.call(this)||this;return i.url=t,i.fileOptions=r,i}return Rr(e,n),e.prototype.iterator=function(){return $t(this,void 0,void 0,function(){return qt(this,function(t){return wme(this.url)?[2,new WXe(this.url,this.fileOptions).iterator()]:[2,BXe(this.url,this.fileOptions)]})})},e})(yme);const jXe=({text:n,x:e,y:t})=>Ie.jsx("div",{style:{position:"absolute",left:e,top:t,background:"white",padding:"4px",cursor:"move"},children:n});var PM={},uZ;function $Xe(){return uZ||(uZ=1,function(n){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"4.6.0"};if(n.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var t=fN,r=new t.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=r.document,e.jsdomImplForWrapper=fN.implForWrapper,e.nodeCanvas=fN.Canvas,e.window=r,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function s(d,p){if(this.__eventListeners[d]){var m=this.__eventListeners[d];p?m[m.indexOf(p)]=!1:e.util.array.fill(m,!1)}}function u(d,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in d)this.on(m,d[m]);else this.__eventListeners[d]||(this.__eventListeners[d]=[]),this.__eventListeners[d].push(p);return this}function l(d,p){var m=(function(){p.apply(this,arguments),this.off(d,m)}).bind(this);this.on(d,m)}function h(d,p){if(arguments.length===1)for(var m in d)l.call(this,m,d[m]);else l.call(this,d,p);return this}function c(d,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(d in this.__eventListeners)s.call(this,d);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in d)s.call(this,m,d[m]);else s.call(this,d,p);return this}function f(d,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[d];if(!m)return this;for(var g=0,y=m.length;g<y;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[d]=m.filter(function(v){return v!==!1}),this}e.Observable={fire:f,on:u,once:h,off:c}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var s=0,u=arguments.length;s<u;s++)this._onObjectAdded(arguments[s]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(s,u,l){var h=this._objects;return l?h[u]=s:h.splice(u,0,s),this._onObjectAdded&&this._onObjectAdded(s),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var s=this._objects,u,l=!1,h=0,c=arguments.length;h<c;h++)u=s.indexOf(arguments[h]),u!==-1&&(l=!0,s.splice(u,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&l&&this.requestRenderAll(),this},forEachObject:function(s,u){for(var l=this.getObjects(),h=0,c=l.length;h<c;h++)s.call(u,l[h],h,l);return this},getObjects:function(s){return typeof s>"u"?this._objects.concat():this._objects.filter(function(u){return u.type===s})},item:function(s){return this._objects[s]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(s,u){return this._objects.indexOf(s)>-1?!0:u?this._objects.some(function(l){return typeof l.contains=="function"&&l.contains(s,!0)}):!1},complexity:function(){return this._objects.reduce(function(s,u){return s+=u.complexity?u.complexity():0,s},0)}},e.CommonMethods={_setOptions:function(s){for(var u in s)this.set(u,s[u])},_initGradient:function(s,u){s&&s.colorStops&&!(s instanceof e.Gradient)&&this.set(u,new e.Gradient(s))},_initPattern:function(s,u,l){s&&s.source&&!(s instanceof e.Pattern)?this.set(u,new e.Pattern(s,l)):l&&l()},_setObject:function(s){for(var u in s)this._set(u,s[u])},set:function(s,u){return typeof s=="object"?this._setObject(s):this._set(s,u),this},_set:function(s,u){this[s]=u},toggle:function(s){var u=this.get(s);return typeof u=="boolean"&&this.set(s,!u),this},get:function(s){return this[s]}},function(s){var u=Math.sqrt,l=Math.atan2,h=Math.pow,c=Math.PI/180,f=Math.PI/2;e.util={cos:function(d){if(d===0)return 1;d<0&&(d=-d);var p=d/f;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(d)},sin:function(d){if(d===0)return 0;var p=d/f,m=1;switch(d<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(d)},removeFromArray:function(d,p){var m=d.indexOf(p);return m!==-1&&d.splice(m,1),d},getRandomInt:function(d,p){return Math.floor(Math.random()*(p-d+1))+d},degreesToRadians:function(d){return d*c},radiansToDegrees:function(d){return d/c},rotatePoint:function(d,p,m){var g=new e.Point(d.x-p.x,d.y-p.y),y=e.util.rotateVector(g,m);return new e.Point(y.x,y.y).addEquals(p)},rotateVector:function(d,p){var m=e.util.sin(p),g=e.util.cos(p),y=d.x*g-d.y*m,v=d.x*m+d.y*g;return{x:y,y:v}},transformPoint:function(d,p,m){return m?new e.Point(p[0]*d.x+p[2]*d.y,p[1]*d.x+p[3]*d.y):new e.Point(p[0]*d.x+p[2]*d.y+p[4],p[1]*d.x+p[3]*d.y+p[5])},makeBoundingBoxFromPoints:function(d,p){if(p)for(var m=0;m<d.length;m++)d[m]=e.util.transformPoint(d[m],p);var g=[d[0].x,d[1].x,d[2].x,d[3].x],y=e.util.array.min(g),v=e.util.array.max(g),b=v-y,w=[d[0].y,d[1].y,d[2].y,d[3].y],x=e.util.array.min(w),S=e.util.array.max(w),E=S-x;return{left:y,top:x,width:b,height:E}},invertTransform:function(d){var p=1/(d[0]*d[3]-d[1]*d[2]),m=[p*d[3],-p*d[1],-p*d[2],p*d[0]],g=e.util.transformPoint({x:d[4],y:d[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(d,p){return parseFloat(Number(d).toFixed(p))},parseUnit:function(d,p){var m=/\D{0,2}$/.exec(d),g=parseFloat(d);switch(p||(p=e.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*e.DPI/25.4;case"cm":return g*e.DPI/2.54;case"in":return g*e.DPI;case"pt":return g*e.DPI/72;case"pc":return g*e.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(d,p){return d=e.util.string.camelize(d.charAt(0).toUpperCase()+d.slice(1)),e.util.resolveNamespace(p)[d]},getSvgAttributes:function(d){var p=["instantiated_by_use","style","id","class"];switch(d){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(d){if(!d)return e;var p=d.split("."),m=p.length,g,y=s||e.window;for(g=0;g<m;++g)y=y[p[g]];return y},loadImage:function(d,p,m,g){if(!d){p&&p.call(m,d);return}var y=e.util.createImage(),v=function(){p&&p.call(m,y,!1),y=y.onload=y.onerror=null};y.onload=v,y.onerror=function(){e.log("Error loading "+y.src),p&&p.call(m,null,!0),y=y.onload=y.onerror=null},d.indexOf("data")!==0&&g!==void 0&&g!==null&&(y.crossOrigin=g),d.substring(0,14)==="data:image/svg"&&(y.onload=null,e.util.loadImageInDom(y,v)),y.src=d},loadImageInDom:function(d,p){var m=e.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(d),e.document.querySelector("body").appendChild(m),d.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(d,p,m,g){d=d||[];var y=[],v=0,b=d.length;function w(){++v===b&&p&&p(y.filter(function(x){return x}))}if(!b){p&&p(y);return}d.forEach(function(x,S){if(!x||!x.type){w();return}var E=e.util.getKlass(x.type,m);E.fromObject(x,function(A,k){k||(y[S]=A),g&&g(x,A,k),w()})})},enlivenPatterns:function(d,p){d=d||[];function m(){++y===v&&p&&p(g)}var g=[],y=0,v=d.length;if(!v){p&&p(g);return}d.forEach(function(b,w){b&&b.source?new e.Pattern(b,function(x){g[w]=x,m()}):(g[w]=b,m())})},groupSVGElements:function(d,p,m){var g;return d&&d.length===1?d[0]:(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new e.Group(d,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(d,p,m){if(m&&Object.prototype.toString.call(m)==="[object Array]")for(var g=0,y=m.length;g<y;g++)m[g]in d&&(p[m[g]]=d[m[g]])},drawDashedLine:function(d,p,m,g,y,v){var b=g-p,w=y-m,x=u(b*b+w*w),S=l(w,b),E=v.length,A=0,k=!0;for(d.save(),d.translate(p,m),d.moveTo(0,0),d.rotate(S),p=0;x>p;)p+=v[A++%E],p>x&&(p=x),d[k?"lineTo":"moveTo"](p,0),k=!k;d.restore()},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(d){var p=e.util.createCanvasElement();return p.width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0),p},toDataURL:function(d,p,m){return d.toDataURL("image/"+p,m)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(d,p,m){return[d[0]*p[0]+d[2]*p[1],d[1]*p[0]+d[3]*p[1],d[0]*p[2]+d[2]*p[3],d[1]*p[2]+d[3]*p[3],m?0:d[0]*p[4]+d[2]*p[5]+d[4],m?0:d[1]*p[4]+d[3]*p[5]+d[5]]},qrDecompose:function(d){var p=l(d[1],d[0]),m=h(d[0],2)+h(d[1],2),g=u(m),y=(d[0]*d[3]-d[2]*d[1])/g,v=l(d[0]*d[2]+d[1]*d[3],m);return{angle:p/c,scaleX:g,scaleY:y,skewX:v/c,skewY:0,translateX:d[4],translateY:d[5]}},calcRotateMatrix:function(d){if(!d.angle)return e.iMatrix.concat();var p=e.util.degreesToRadians(d.angle),m=e.util.cos(p),g=e.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(d){var p=typeof d.scaleX>"u"?1:d.scaleX,m=typeof d.scaleY>"u"?1:d.scaleY,g=[d.flipX?-p:p,0,0,d.flipY?-m:m,0,0],y=e.util.multiplyTransformMatrices,v=e.util.degreesToRadians;return d.skewX&&(g=y(g,[1,0,Math.tan(v(d.skewX)),1],!0)),d.skewY&&(g=y(g,[1,Math.tan(v(d.skewY)),0,1],!0)),g},composeMatrix:function(d){var p=[1,0,0,1,d.translateX||0,d.translateY||0],m=e.util.multiplyTransformMatrices;return d.angle&&(p=m(p,e.util.calcRotateMatrix(d))),(d.scaleX!==1||d.scaleY!==1||d.skewX||d.skewY||d.flipX||d.flipY)&&(p=m(p,e.util.calcDimensionsMatrix(d))),p},resetObjectTransform:function(d){d.scaleX=1,d.scaleY=1,d.skewX=0,d.skewY=0,d.flipX=!1,d.flipY=!1,d.rotate(0)},saveObjectTransform:function(d){return{scaleX:d.scaleX,scaleY:d.scaleY,skewX:d.skewX,skewY:d.skewY,angle:d.angle,left:d.left,flipX:d.flipX,flipY:d.flipY,top:d.top}},isTransparent:function(d,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var y=!0,v,b,w=d.getImageData(p,m,g*2||1,g*2||1),x=w.data.length;for(v=3;v<x&&(b=w.data[v],y=b<=0,y!==!1);v+=4);return w=null,y},parsePreserveAspectRatioAttribute:function(d){var p="meet",m="Mid",g="Mid",y=d.split(" "),v;return y&&y.length&&(p=y.pop(),p!=="meet"&&p!=="slice"?(v=p,p="meet"):y.length&&(v=y.pop())),m=v!=="none"?v.slice(1,4):"none",g=v!=="none"?v.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(d){d=(d||"").toLowerCase(),d?e.charWidthsCache[d]&&delete e.charWidthsCache[d]:e.charWidthsCache={}},limitDimsByArea:function(d,p){var m=Math.sqrt(p*d),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(d,p,m){return Math.max(d,Math.min(p,m))},findScaleToFit:function(d,p){return Math.min(p.width/d.width,p.height/d.height)},findScaleToCover:function(d,p){return Math.max(p.width/d.width,p.height/d.height)},matrixToSVG:function(d){return"matrix("+d.map(function(p){return e.util.toFixed(p,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(d,p){var m=e.util.invertTransform(p),g=e.util.multiplyTransformMatrices(m,d.calcOwnMatrix());e.util.applyTransformToObject(d,g)},addTransformToObject:function(d,p){e.util.applyTransformToObject(d,e.util.multiplyTransformMatrices(p,d.calcOwnMatrix()))},applyTransformToObject:function(d,p){var m=e.util.qrDecompose(p),g=new e.Point(m.translateX,m.translateY);d.flipX=!1,d.flipY=!1,d.set("scaleX",m.scaleX),d.set("scaleY",m.scaleY),d.skewX=m.skewX,d.skewY=m.skewY,d.angle=m.angle,d.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(d,p,m){var g=d/2,y=p/2,v=[{x:-g,y:-y},{x:g,y:-y},{x:-g,y},{x:g,y}],b=e.util.calcDimensionsMatrix(m),w=e.util.makeBoundingBoxFromPoints(v,b);return{x:w.width,y:w.height}}}}(n),function(){var s=Array.prototype.join,u={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};function h(M,q,H,K,Z,J,X,ae,ie,ce,ge){var Ce=e.util.cos(M),Ee=e.util.sin(M),G=e.util.cos(q),de=e.util.sin(q),ye=H*Z*G-K*J*de+X,le=K*Z*G+H*J*de+ae,ne=ce+ie*(-H*Z*Ee-K*J*Ce),fe=ge+ie*(-K*Z*Ee+H*J*Ce),Ne=ye+ie*(H*Z*de+K*J*G),Ae=le+ie*(K*Z*de-H*J*G);return["C",ne,fe,Ne,Ae,ye,le]}function c(M,q,H,K,Z,J,X){var ae=Math.PI,ie=X*ae/180,ce=e.util.sin(ie),ge=e.util.cos(ie),Ce=0,Ee=0;H=Math.abs(H),K=Math.abs(K);var G=-ge*M*.5-ce*q*.5,de=-ge*q*.5+ce*M*.5,ye=H*H,le=K*K,ne=de*de,fe=G*G,Ne=ye*le-ye*ne-le*fe,Ae=0;if(Ne<0){var ue=Math.sqrt(1-Ne/(ye*le));H*=ue,K*=ue}else Ae=(Z===J?-1:1)*Math.sqrt(Ne/(ye*ne+le*fe));var me=Ae*H*de/K,Se=-Ae*K*G/H,Re=ge*me-ce*Se+M*.5,je=ce*me+ge*Se+q*.5,rt=f(1,0,(G-me)/H,(de-Se)/K),at=f((G-me)/H,(de-Se)/K,(-G-me)/H,(-de-Se)/K);J===0&&at>0?at-=2*ae:J===1&&at<0&&(at+=2*ae);for(var yt=Math.ceil(Math.abs(at/ae*2)),pt=[],Le=at/yt,tt=8/3*Math.sin(Le/4)*Math.sin(Le/4)/Math.sin(Le/2),ft=rt+Le,Et=0;Et<yt;Et++)pt[Et]=h(rt,ft,ge,ce,H,K,Re,je,tt,Ce,Ee),Ce=pt[Et][5],Ee=pt[Et][6],rt=ft,ft+=Le;return pt}function f(M,q,H,K){var Z=Math.atan2(q,M),J=Math.atan2(K,H);return J>=Z?J-Z:2*Math.PI-(Z-J)}function d(M,q,H,K,Z,J,X,ae){var ie;if(e.cachesBoundsOfCurve&&(ie=s.call(arguments),e.boundsOfCurveCache[ie]))return e.boundsOfCurveCache[ie];var ce=Math.sqrt,ge=Math.min,Ce=Math.max,Ee=Math.abs,G=[],de=[[],[]],ye,le,ne,fe,Ne,Ae,ue,me;le=6*M-12*H+6*Z,ye=-3*M+9*H-9*Z+3*X,ne=3*H-3*M;for(var Se=0;Se<2;++Se){if(Se>0&&(le=6*q-12*K+6*J,ye=-3*q+9*K-9*J+3*ae,ne=3*K-3*q),Ee(ye)<1e-12){if(Ee(le)<1e-12)continue;fe=-ne/le,0<fe&&fe<1&&G.push(fe);continue}ue=le*le-4*ne*ye,!(ue<0)&&(me=ce(ue),Ne=(-le+me)/(2*ye),0<Ne&&Ne<1&&G.push(Ne),Ae=(-le-me)/(2*ye),0<Ae&&Ae<1&&G.push(Ae))}for(var Re,je,rt=G.length,at=rt,yt;rt--;)fe=G[rt],yt=1-fe,Re=yt*yt*yt*M+3*yt*yt*fe*H+3*yt*fe*fe*Z+fe*fe*fe*X,de[0][rt]=Re,je=yt*yt*yt*q+3*yt*yt*fe*K+3*yt*fe*fe*J+fe*fe*fe*ae,de[1][rt]=je;de[0][at]=M,de[1][at]=q,de[0][at+1]=X,de[1][at+1]=ae;var pt=[{x:ge.apply(null,de[0]),y:ge.apply(null,de[1])},{x:Ce.apply(null,de[0]),y:Ce.apply(null,de[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[ie]=pt),pt}function p(M,q,H){for(var K=H[1],Z=H[2],J=H[3],X=H[4],ae=H[5],ie=H[6],ce=H[7],ge=c(ie-M,ce-q,K,Z,X,ae,J),Ce=0,Ee=ge.length;Ce<Ee;Ce++)ge[Ce][1]+=M,ge[Ce][2]+=q,ge[Ce][3]+=M,ge[Ce][4]+=q,ge[Ce][5]+=M,ge[Ce][6]+=q;return ge}function m(M){var q=0,H=0,K=M.length,Z=0,J=0,X,ae,ie,ce=[],ge,Ce,Ee;for(ae=0;ae<K;++ae){switch(ie=!1,X=M[ae].slice(0),X[0]){case"l":X[0]="L",X[1]+=q,X[2]+=H;case"L":q=X[1],H=X[2];break;case"h":X[1]+=q;case"H":X[0]="L",X[2]=H,q=X[1];break;case"v":X[1]+=H;case"V":X[0]="L",H=X[1],X[1]=q,X[2]=H;break;case"m":X[0]="M",X[1]+=q,X[2]+=H;case"M":q=X[1],H=X[2],Z=X[1],J=X[2];break;case"c":X[0]="C",X[1]+=q,X[2]+=H,X[3]+=q,X[4]+=H,X[5]+=q,X[6]+=H;case"C":Ce=X[3],Ee=X[4],q=X[5],H=X[6];break;case"s":X[0]="S",X[1]+=q,X[2]+=H,X[3]+=q,X[4]+=H;case"S":ge==="C"?(Ce=2*q-Ce,Ee=2*H-Ee):(Ce=q,Ee=H),q=X[3],H=X[4],X[0]="C",X[5]=X[3],X[6]=X[4],X[3]=X[1],X[4]=X[2],X[1]=Ce,X[2]=Ee,Ce=X[3],Ee=X[4];break;case"q":X[0]="Q",X[1]+=q,X[2]+=H,X[3]+=q,X[4]+=H;case"Q":Ce=X[1],Ee=X[2],q=X[3],H=X[4];break;case"t":X[0]="T",X[1]+=q,X[2]+=H;case"T":ge==="Q"?(Ce=2*q-Ce,Ee=2*H-Ee):(Ce=q,Ee=H),X[0]="Q",q=X[1],H=X[2],X[1]=Ce,X[2]=Ee,X[3]=q,X[4]=H;break;case"a":X[0]="A",X[6]+=q,X[7]+=H;case"A":ie=!0,ce=ce.concat(p(q,H,X)),q=X[6],H=X[7];break;case"z":case"Z":q=Z,H=J;break}ie||ce.push(X),ge=X[0]}return ce}function g(M,q,H,K){return Math.sqrt((H-M)*(H-M)+(K-q)*(K-q))}function y(M){return M*M*M}function v(M){return 3*M*M*(1-M)}function b(M){return 3*M*(1-M)*(1-M)}function w(M){return(1-M)*(1-M)*(1-M)}function x(M,q,H,K,Z,J,X,ae){return function(ie){var ce=y(ie),ge=v(ie),Ce=b(ie),Ee=w(ie);return{x:X*ce+Z*ge+H*Ce+M*Ee,y:ae*ce+J*ge+K*Ce+q*Ee}}}function S(M,q,H,K,Z,J,X,ae){return function(ie){var ce=1-ie,ge=3*ce*ce*(H-M)+6*ce*ie*(Z-H)+3*ie*ie*(X-Z),Ce=3*ce*ce*(K-q)+6*ce*ie*(J-K)+3*ie*ie*(ae-J);return Math.atan2(Ce,ge)}}function E(M){return M*M}function A(M){return 2*M*(1-M)}function k(M){return(1-M)*(1-M)}function T(M,q,H,K,Z,J){return function(X){var ae=E(X),ie=A(X),ce=k(X);return{x:Z*ae+H*ie+M*ce,y:J*ae+K*ie+q*ce}}}function O(M,q,H,K,Z,J){return function(X){var ae=1-X,ie=2*ae*(H-M)+2*X*(Z-H),ce=2*ae*(K-q)+2*X*(J-K);return Math.atan2(ce,ie)}}function F(M,q,H){var K={x:q,y:H},Z,J=0,X;for(X=1;X<=100;X+=1)Z=M(X/100),J+=g(K.x,K.y,Z.x,Z.y),K=Z;return J}function I(M,q){for(var H=0,K=0,Z=M.iterator,J={x:M.x,y:M.y},X,ae,ie=.01,ce=M.angleFinder,ge;K<q&&H<=1&&ie>1e-4;)X=Z(H),ge=H,ae=g(J.x,J.y,X.x,X.y),ae+K>q?(ie/=2,H-=ie):(J=X,H+=ie,K+=ae);return X.angle=ce(ge),X}function R(M){for(var q=0,H=M.length,K,Z=0,J=0,X=0,ae=0,ie=[],ce,ge,Ce,Ee=0;Ee<H;Ee++){switch(K=M[Ee],ge={x:Z,y:J,command:K[0]},K[0]){case"M":ge.length=0,X=Z=K[1],ae=J=K[2];break;case"L":ge.length=g(Z,J,K[1],K[2]),Z=K[1],J=K[2];break;case"C":ce=x(Z,J,K[1],K[2],K[3],K[4],K[5],K[6]),Ce=S(Z,J,K[1],K[2],K[3],K[4],K[5],K[6]),ge.iterator=ce,ge.angleFinder=Ce,ge.length=F(ce,Z,J),Z=K[5],J=K[6];break;case"Q":ce=T(Z,J,K[1],K[2],K[3],K[4]),Ce=O(Z,J,K[1],K[2],K[3],K[4]),ge.iterator=ce,ge.angleFinder=Ce,ge.length=F(ce,Z,J),Z=K[3],J=K[4];break;case"Z":case"z":ge.destX=X,ge.destY=ae,ge.length=g(Z,J,X,ae),Z=X,J=ae;break}q+=ge.length,ie.push(ge)}return ie.push({length:q,x:Z,y:J}),ie}function U(M,q,H){H||(H=R(M));for(var K=0;q-H[K].length>0&&K<H.length-2;)q-=H[K].length,K++;var Z=H[K],J=q/Z.length,X=Z.command,ae=M[K],ie;switch(X){case"M":return{x:Z.x,y:Z.y,angle:0};case"Z":case"z":return ie=new e.Point(Z.x,Z.y).lerp(new e.Point(Z.destX,Z.destY),J),ie.angle=Math.atan2(Z.destY-Z.y,Z.destX-Z.x),ie;case"L":return ie=new e.Point(Z.x,Z.y).lerp(new e.Point(ae[1],ae[2]),J),ie.angle=Math.atan2(ae[2]-Z.y,ae[1]-Z.x),ie;case"C":return I(Z,q);case"Q":return I(Z,q)}}function B(M){var q=[],H=[],K,Z,J=e.rePathCommand,X="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",ae="("+X+")"+e.commaWsp,ie="([01])"+e.commaWsp+"?",ce=ae+"?"+ae+"?"+ae+ie+ie+ae+"?("+X+")",ge=new RegExp(ce,"g"),Ce,Ee,G;if(!M||!M.match)return q;G=M.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var de=0,ye,le=G.length;de<le;de++){K=G[de],Ee=K.slice(1).trim(),H.length=0;var ne=K.charAt(0);if(ye=[ne],ne.toLowerCase()==="a")for(var fe;fe=ge.exec(Ee);)for(var Ne=1;Ne<fe.length;Ne++)H.push(fe[Ne]);else for(;Ce=J.exec(Ee);)H.push(Ce[0]);for(var Ne=0,Ae=H.length;Ne<Ae;Ne++)Z=parseFloat(H[Ne]),isNaN(Z)||ye.push(Z);var ue=u[ne.toLowerCase()],me=l[ne]||ne;if(ye.length-1>ue)for(var Se=1,Re=ye.length;Se<Re;Se+=ue)q.push([ne].concat(ye.slice(Se,Se+ue))),ne=me;else q.push(ye)}return q}function W(M,q){var H=[],K,Z=new e.Point(M[0].x,M[0].y),J=new e.Point(M[1].x,M[1].y),X=M.length,ae=1,ie=0,ce=X>2;for(q=q||0,ce&&(ae=M[2].x<J.x?-1:M[2].x===J.x?0:1,ie=M[2].y<J.y?-1:M[2].y===J.y?0:1),H.push(["M",Z.x-ae*q,Z.y-ie*q]),K=1;K<X;K++){if(!Z.eq(J)){var ge=Z.midPointFrom(J);H.push(["Q",Z.x,Z.y,ge.x,ge.y])}Z=M[K],K+1<M.length&&(J=M[K+1])}return ce&&(ae=Z.x>M[K-2].x?1:Z.x===M[K-2].x?0:-1,ie=Z.y>M[K-2].y?1:Z.y===M[K-2].y?0:-1),H.push(["L",Z.x+ae*q,Z.y+ie*q]),H}function Y(M,q,H){return H&&(q=e.util.multiplyTransformMatrices(q,[1,0,0,1,-H.x,-H.y])),M.map(function(K){for(var Z=K.slice(0),J={},X=1;X<K.length-1;X+=2)J.x=K[X],J.y=K[X+1],J=e.util.transformPoint(J,q),Z[X]=J.x,Z[X+1]=J.y;return Z})}function z(M,q,H,K,Z,J,X,ae,ie){for(var ce=0,ge=0,Ce,Ee=[],G=c(ae-M,ie-q,H,K,J,X,Z),de=0,ye=G.length;de<ye;de++)Ce=d(ce,ge,G[de][1],G[de][2],G[de][3],G[de][4],G[de][5],G[de][6]),Ee.push({x:Ce[0].x+M,y:Ce[0].y+q}),Ee.push({x:Ce[1].x+M,y:Ce[1].y+q}),ce=G[de][5],ge=G[de][6];return Ee}function j(M,q,H,K){K=K.slice(0).unshift("X");var Z=p(q,H,K);Z.forEach(function(J){M.bezierCurveTo.apply(M,J.slice(1))})}e.util.joinPath=function(M){return M.map(function(q){return q.join(" ")}).join(" ")},e.util.parsePath=B,e.util.makePathSimpler=m,e.util.getSmoothPathFromPoints=W,e.util.getPathSegmentsInfo=R,e.util.getBoundsOfCurve=d,e.util.getPointOnPath=U,e.util.transformPath=Y,e.util.fromArcToBeizers=p,e.util.getBoundsOfArc=z,e.util.drawArc=j}(),function(){var s=Array.prototype.slice;function u(d,p){for(var m=s.call(arguments,2),g=[],y=0,v=d.length;y<v;y++)g[y]=m.length?d[y][p].apply(d[y],m):d[y][p].call(d[y]);return g}function l(d,p){return f(d,p,function(m,g){return m>=g})}function h(d,p){return f(d,p,function(m,g){return m<g})}function c(d,p){for(var m=d.length;m--;)d[m]=p;return d}function f(d,p,m){if(!(!d||d.length===0)){var g=d.length-1,y=p?d[g][p]:d[g];if(p)for(;g--;)m(d[g][p],y)&&(y=d[g][p]);else for(;g--;)m(d[g],y)&&(y=d[g]);return y}}e.util.array={fill:c,invoke:u,min:h,max:l}}(),function(){function s(l,h,c){if(c)if(!e.isLikelyNode&&h instanceof Element)l=h;else if(h instanceof Array){l=[];for(var f=0,d=h.length;f<d;f++)l[f]=s({},h[f],c)}else if(h&&typeof h=="object")for(var p in h)p==="canvas"||p==="group"?l[p]=null:h.hasOwnProperty(p)&&(l[p]=s({},h[p],c));else l=h;else for(var p in h)l[p]=h[p];return l}function u(l,h){return s({},l,h)}e.util.object={extend:s,clone:u},e.util.object.extend(e.util,e.Observable)}(),function(){function s(f){return f.replace(/-+(.)?/g,function(d,p){return p?p.toUpperCase():""})}function u(f,d){return f.charAt(0).toUpperCase()+(d?f.slice(1):f.slice(1).toLowerCase())}function l(f){return f.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(f){var d=0,p,m=[];for(d=0,p;d<f.length;d++)(p=c(f,d))!==!1&&m.push(p);return m}function c(f,d){var p=f.charCodeAt(d);if(isNaN(p))return"";if(p<55296||p>57343)return f.charAt(d);if(55296<=p&&p<=56319){if(f.length<=d+1)throw"High surrogate without following low surrogate";var m=f.charCodeAt(d+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return f.charAt(d)+f.charAt(d+1)}if(d===0)throw"Low surrogate without preceding high surrogate";var g=f.charCodeAt(d-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:s,capitalize:u,escapeXml:l,graphemeSplit:h}}(),function(){var s=Array.prototype.slice,u=function(){},l=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),h=function(p,m,g){for(var y in m)y in p.prototype&&typeof p.prototype[y]=="function"&&(m[y]+"").indexOf("callSuper")>-1?p.prototype[y]=function(v){return function(){var b=this.constructor.superclass;this.constructor.superclass=g;var w=m[v].apply(this,arguments);if(this.constructor.superclass=b,v!=="initialize")return w}}(y):p.prototype[y]=m[y],l&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function c(){}function f(p){for(var m=null,g=this;g.constructor.superclass;){var y=g.constructor.superclass.prototype[p];if(g[p]!==y){m=y;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,s.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function d(){var p=null,m=s.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(c.prototype=p.prototype,g.prototype=new c,p.subclasses.push(g));for(var y=0,v=m.length;y<v;y++)h(g,m[y],p);return g.prototype.initialize||(g.prototype.initialize=u),g.prototype.constructor=g,g.prototype.callSuper=f,g}e.util.createClass=d}(),function(){var s=!!e.document.createElement("div").attachEvent,u=["touchstart","touchmove","touchend"];e.util.addListener=function(h,c,f,d){h&&h.addEventListener(c,f,s?!1:d)},e.util.removeListener=function(h,c,f,d){h&&h.removeEventListener(c,f,s?!1:d)};function l(h){var c=h.changedTouches;return c&&c[0]?c[0]:h}e.util.getPointer=function(h){var c=h.target,f=e.util.getScrollLeftTop(c),d=l(h);return{x:d.clientX+f.left,y:d.clientY+f.top}},e.util.isTouchEvent=function(h){return u.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function s(d,p){var m=d.style;if(!m)return d;if(typeof p=="string")return d.style.cssText+=";"+p,p.indexOf("opacity")>-1?f(d,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):d;for(var g in p)if(g==="opacity")f(d,p[g]);else{var y=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m[y]=p[g]}return d}var u=e.document.createElement("div"),l=typeof u.style.opacity=="string",h=typeof u.style.filter=="string",c=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,f=function(d){return d};l?f=function(d,p){return d.style.opacity=p,d}:h&&(f=function(d,p){var m=d.style;return d.currentStyle&&!d.currentStyle.hasLayout&&(m.zoom=1),c.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(c,p)):m.filter+=" alpha(opacity="+p*100+")",d}),e.util.setStyle=s}(),function(){var s=Array.prototype.slice;function u(w){return typeof w=="string"?e.document.getElementById(w):w}var l,h=function(w){return s.call(w,0)};try{l=h(e.document.childNodes)instanceof Array}catch{}l||(h=function(w){for(var x=new Array(w.length),S=w.length;S--;)x[S]=w[S];return x});function c(w,x){var S=e.document.createElement(w);for(var E in x)E==="class"?S.className=x[E]:E==="for"?S.htmlFor=x[E]:S.setAttribute(E,x[E]);return S}function f(w,x){w&&(" "+w.className+" ").indexOf(" "+x+" ")===-1&&(w.className+=(w.className?" ":"")+x)}function d(w,x,S){return typeof x=="string"&&(x=c(x,S)),w.parentNode&&w.parentNode.replaceChild(x,w),x.appendChild(w),x}function p(w){for(var x=0,S=0,E=e.document.documentElement,A=e.document.body||{scrollLeft:0,scrollTop:0};w&&(w.parentNode||w.host)&&(w=w.parentNode||w.host,w===e.document?(x=A.scrollLeft||E.scrollLeft||0,S=A.scrollTop||E.scrollTop||0):(x+=w.scrollLeft||0,S+=w.scrollTop||0),!(w.nodeType===1&&w.style.position==="fixed")););return{left:x,top:S}}function m(w){var x,S=w&&w.ownerDocument,E={left:0,top:0},A={left:0,top:0},k,T={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!S)return A;for(var O in T)A[T[O]]+=parseInt(g(w,O),10)||0;return x=S.documentElement,typeof w.getBoundingClientRect<"u"&&(E=w.getBoundingClientRect()),k=p(w),{left:E.left+k.left-(x.clientLeft||0)+A.left,top:E.top+k.top-(x.clientTop||0)+A.top}}var g;e.document.defaultView&&e.document.defaultView.getComputedStyle?g=function(w,x){var S=e.document.defaultView.getComputedStyle(w,null);return S?S[x]:void 0}:g=function(w,x){var S=w.style[x];return!S&&w.currentStyle&&(S=w.currentStyle[x]),S},function(){var w=e.document.documentElement.style,x="userSelect"in w?"userSelect":"MozUserSelect"in w?"MozUserSelect":"WebkitUserSelect"in w?"WebkitUserSelect":"KhtmlUserSelect"in w?"KhtmlUserSelect":"";function S(A){return typeof A.onselectstart<"u"&&(A.onselectstart=e.util.falseFunction),x?A.style[x]="none":typeof A.unselectable=="string"&&(A.unselectable="on"),A}function E(A){return typeof A.onselectstart<"u"&&(A.onselectstart=null),x?A.style[x]="":typeof A.unselectable=="string"&&(A.unselectable=""),A}e.util.makeElementUnselectable=S,e.util.makeElementSelectable=E}();function y(w){var x=e.jsdomImplForWrapper(w);return x._canvas||x._image}function v(w){if(e.isLikelyNode){var x=e.jsdomImplForWrapper(w);x&&(x._image=null,x._canvas=null,x._currentSrc=null,x._attributes=null,x._classList=null)}}function b(w,x){w.imageSmoothingEnabled=w.imageSmoothingEnabled||w.webkitImageSmoothingEnabled||w.mozImageSmoothingEnabled||w.msImageSmoothingEnabled||w.oImageSmoothingEnabled,w.imageSmoothingEnabled=x}e.util.setImageSmoothing=b,e.util.getById=u,e.util.toArray=h,e.util.addClass=f,e.util.makeElement=c,e.util.wrapElement=d,e.util.getScrollLeftTop=p,e.util.getElementOffset=m,e.util.getNodeCanvas=y,e.util.cleanUpJsdomNode=v}(),function(){function s(h,c){return h+(/\?/.test(h)?"&":"?")+c}function u(){}function l(h,c){c||(c={});var f=c.method?c.method.toUpperCase():"GET",d=c.onComplete||function(){},p=new e.window.XMLHttpRequest,m=c.body||c.parameters;return p.onreadystatechange=function(){p.readyState===4&&(d(p),p.onreadystatechange=u)},f==="GET"&&(m=null,typeof c.parameters=="string"&&(h=s(h,c.parameters))),p.open(f,h,!0),(f==="POST"||f==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}e.util.request=l}(),e.log=console.log,e.warn=console.warn,function(){function s(){return!1}function u(p,m,g,y){return-g*Math.cos(p/y*(Math.PI/2))+g+m}function l(p){var m=!1;return f(function(g){p||(p={});var y=g||+new Date,v=p.duration||500,b=y+v,w,x=p.onChange||s,S=p.abort||s,E=p.onComplete||s,A=p.easing||u,k="startValue"in p?p.startValue:0,T="endValue"in p?p.endValue:100,O=p.byValue||T-k;p.onStart&&p.onStart(),function F(I){w=I||+new Date;var R=w>b?v:w-y,U=R/v,B=A(R,k,O,v),W=Math.abs((B-k)/O);if(!m){if(S(B,W,U)){E(T,1,1);return}if(w>b){x(T,1,1),E(T,1,1);return}else x(B,W,U),f(F)}}(y)}),function(){m=!0}}var h=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(p){return e.window.setTimeout(p,1e3/60)},c=e.window.cancelAnimationFrame||e.window.clearTimeout;function f(){return h.apply(e.window,arguments)}function d(){return c.apply(e.window,arguments)}e.util.animate=l,e.util.requestAnimFrame=f,e.util.cancelAnimFrame=d}(),function(){function s(l,h,c){var f="rgba("+parseInt(l[0]+c*(h[0]-l[0]),10)+","+parseInt(l[1]+c*(h[1]-l[1]),10)+","+parseInt(l[2]+c*(h[2]-l[2]),10);return f+=","+(l&&h?parseFloat(l[3]+c*(h[3]-l[3])):1),f+=")",f}function u(l,h,c,f){var d=new e.Color(l).getSource(),p=new e.Color(h).getSource(),m=f.onComplete,g=f.onChange;return f=f||{},e.util.animate(e.util.object.extend(f,{duration:c||500,startValue:d,endValue:p,byValue:p,easing:function(y,v,b,w){var x=f.colorEasing?f.colorEasing(y,w):1-Math.cos(y/w*(Math.PI/2));return s(v,b,x)},onComplete:function(y,v,b){if(m)return m(s(p,p,0),v,b)},onChange:function(y,v,b){if(g){if(Array.isArray(y))return g(s(y,y,0),v,b);g(y,v,b)}}}))}e.util.animateColor=u}(),function(){function s(z,j,M,q){return z<Math.abs(j)?(z=j,q=M/4):j===0&&z===0?q=M/(2*Math.PI)*Math.asin(1):q=M/(2*Math.PI)*Math.asin(j/z),{a:z,c:j,p:M,s:q}}function u(z,j,M){return z.a*Math.pow(2,10*(j-=1))*Math.sin((j*M-z.s)*(2*Math.PI)/z.p)}function l(z,j,M,q){return M*((z=z/q-1)*z*z+1)+j}function h(z,j,M,q){return z/=q/2,z<1?M/2*z*z*z+j:M/2*((z-=2)*z*z+2)+j}function c(z,j,M,q){return M*(z/=q)*z*z*z+j}function f(z,j,M,q){return-M*((z=z/q-1)*z*z*z-1)+j}function d(z,j,M,q){return z/=q/2,z<1?M/2*z*z*z*z+j:-M/2*((z-=2)*z*z*z-2)+j}function p(z,j,M,q){return M*(z/=q)*z*z*z*z+j}function m(z,j,M,q){return M*((z=z/q-1)*z*z*z*z+1)+j}function g(z,j,M,q){return z/=q/2,z<1?M/2*z*z*z*z*z+j:M/2*((z-=2)*z*z*z*z+2)+j}function y(z,j,M,q){return-M*Math.cos(z/q*(Math.PI/2))+M+j}function v(z,j,M,q){return M*Math.sin(z/q*(Math.PI/2))+j}function b(z,j,M,q){return-M/2*(Math.cos(Math.PI*z/q)-1)+j}function w(z,j,M,q){return z===0?j:M*Math.pow(2,10*(z/q-1))+j}function x(z,j,M,q){return z===q?j+M:M*(-Math.pow(2,-10*z/q)+1)+j}function S(z,j,M,q){return z===0?j:z===q?j+M:(z/=q/2,z<1?M/2*Math.pow(2,10*(z-1))+j:M/2*(-Math.pow(2,-10*--z)+2)+j)}function E(z,j,M,q){return-M*(Math.sqrt(1-(z/=q)*z)-1)+j}function A(z,j,M,q){return M*Math.sqrt(1-(z=z/q-1)*z)+j}function k(z,j,M,q){return z/=q/2,z<1?-M/2*(Math.sqrt(1-z*z)-1)+j:M/2*(Math.sqrt(1-(z-=2)*z)+1)+j}function T(z,j,M,q){var H=1.70158,K=0,Z=M;if(z===0)return j;if(z/=q,z===1)return j+M;K||(K=q*.3);var J=s(Z,M,K,H);return-u(J,z,q)+j}function O(z,j,M,q){var H=1.70158,K=0,Z=M;if(z===0)return j;if(z/=q,z===1)return j+M;K||(K=q*.3);var J=s(Z,M,K,H);return J.a*Math.pow(2,-10*z)*Math.sin((z*q-J.s)*(2*Math.PI)/J.p)+J.c+j}function F(z,j,M,q){var H=1.70158,K=0,Z=M;if(z===0)return j;if(z/=q/2,z===2)return j+M;K||(K=q*(.3*1.5));var J=s(Z,M,K,H);return z<1?-.5*u(J,z,q)+j:J.a*Math.pow(2,-10*(z-=1))*Math.sin((z*q-J.s)*(2*Math.PI)/J.p)*.5+J.c+j}function I(z,j,M,q,H){return H===void 0&&(H=1.70158),M*(z/=q)*z*((H+1)*z-H)+j}function R(z,j,M,q,H){return H===void 0&&(H=1.70158),M*((z=z/q-1)*z*((H+1)*z+H)+1)+j}function U(z,j,M,q,H){return H===void 0&&(H=1.70158),z/=q/2,z<1?M/2*(z*z*(((H*=1.525)+1)*z-H))+j:M/2*((z-=2)*z*(((H*=1.525)+1)*z+H)+2)+j}function B(z,j,M,q){return M-W(q-z,0,M,q)+j}function W(z,j,M,q){return(z/=q)<1/2.75?M*(7.5625*z*z)+j:z<2/2.75?M*(7.5625*(z-=1.5/2.75)*z+.75)+j:z<2.5/2.75?M*(7.5625*(z-=2.25/2.75)*z+.9375)+j:M*(7.5625*(z-=2.625/2.75)*z+.984375)+j}function Y(z,j,M,q){return z<q/2?B(z*2,0,M,q)*.5+j:W(z*2-q,0,M,q)*.5+M*.5+j}e.util.ease={easeInQuad:function(z,j,M,q){return M*(z/=q)*z+j},easeOutQuad:function(z,j,M,q){return-M*(z/=q)*(z-2)+j},easeInOutQuad:function(z,j,M,q){return z/=q/2,z<1?M/2*z*z+j:-M/2*(--z*(z-2)-1)+j},easeInCubic:function(z,j,M,q){return M*(z/=q)*z*z+j},easeOutCubic:l,easeInOutCubic:h,easeInQuart:c,easeOutQuart:f,easeInOutQuart:d,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:y,easeOutSine:v,easeInOutSine:b,easeInExpo:w,easeOutExpo:x,easeInOutExpo:S,easeInCirc:E,easeOutCirc:A,easeInOutCirc:k,easeInElastic:T,easeOutElastic:O,easeInOutElastic:F,easeInBack:I,easeOutBack:R,easeInOutBack:U,easeInBounce:B,easeOutBounce:W,easeInOutBounce:Y}}(),function(s){var u=s.fabric||(s.fabric={}),l=u.util.object.extend,h=u.util.object.clone,c=u.util.toFixed,f=u.util.parseUnit,d=u.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],y=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},w="font-size",x="clip-path";u.svgValidTagNamesRegEx=A(p),u.svgViewBoxElementsRegEx=A(m),u.svgInvalidAncestorsRegEx=A(g),u.svgValidParentsRegEx=A(y),u.cssRules={},u.gradientDefs={},u.clipPaths={};function S(K){return K in v?v[K]:K}function E(K,Z,J,X){var ae=Object.prototype.toString.call(Z)==="[object Array]",ie;if((K==="fill"||K==="stroke")&&Z==="none")Z="";else{if(K==="strokeUniform")return Z==="non-scaling-stroke";if(K==="strokeDashArray")Z==="none"?Z=null:Z=Z.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(K==="transformMatrix")J&&J.transformMatrix?Z=d(J.transformMatrix,u.parseTransformAttribute(Z)):Z=u.parseTransformAttribute(Z);else if(K==="visible")Z=Z!=="none"&&Z!=="hidden",J&&J.visible===!1&&(Z=!1);else if(K==="opacity")Z=parseFloat(Z),J&&typeof J.opacity<"u"&&(Z*=J.opacity);else if(K==="textAnchor")Z=Z==="start"?"left":Z==="end"?"right":"center";else if(K==="charSpacing")ie=f(Z,X)/X*1e3;else if(K==="paintFirst"){var ce=Z.indexOf("fill"),ge=Z.indexOf("stroke"),Z="fill";(ce>-1&&ge>-1&&ge<ce||ce===-1&&ge>-1)&&(Z="stroke")}else{if(K==="href"||K==="xlink:href"||K==="font")return Z;if(K==="imageSmoothing")return Z==="optimizeQuality";ie=ae?Z.map(f):f(Z,X)}}return!ae&&isNaN(ie)?Z:ie}function A(K){return new RegExp("^("+K.join("|")+")\\b","i")}function k(K){for(var Z in b)if(!(typeof K[b[Z]]>"u"||K[Z]==="")){if(typeof K[Z]>"u"){if(!u.Object.prototype[Z])continue;K[Z]=u.Object.prototype[Z]}if(K[Z].indexOf("url(")!==0){var J=new u.Color(K[Z]);K[Z]=J.setAlpha(c(J.getAlpha()*K[b[Z]],2)).toRgba()}}return K}function T(K,Z){var J,X=[],ae,ie,ce;for(ie=0,ce=Z.length;ie<ce;ie++)J=Z[ie],ae=K.getElementsByTagName(J),X=X.concat(Array.prototype.slice.call(ae));return X}u.parseTransformAttribute=function(){function K(ue,me){var Se=u.util.cos(me[0]),Re=u.util.sin(me[0]),je=0,rt=0;me.length===3&&(je=me[1],rt=me[2]),ue[0]=Se,ue[1]=Re,ue[2]=-Re,ue[3]=Se,ue[4]=je-(Se*je-Re*rt),ue[5]=rt-(Re*je+Se*rt)}function Z(ue,me){var Se=me[0],Re=me.length===2?me[1]:me[0];ue[0]=Se,ue[3]=Re}function J(ue,me,Se){ue[Se]=Math.tan(u.util.degreesToRadians(me[0]))}function X(ue,me){ue[4]=me[0],me.length===2&&(ue[5]=me[1])}var ae=u.iMatrix,ie=u.reNum,ce=u.commaWsp,ge="(?:(skewX)\\s*\\(\\s*("+ie+")\\s*\\))",Ce="(?:(skewY)\\s*\\(\\s*("+ie+")\\s*\\))",Ee="(?:(rotate)\\s*\\(\\s*("+ie+")(?:"+ce+"("+ie+")"+ce+"("+ie+"))?\\s*\\))",G="(?:(scale)\\s*\\(\\s*("+ie+")(?:"+ce+"("+ie+"))?\\s*\\))",de="(?:(translate)\\s*\\(\\s*("+ie+")(?:"+ce+"("+ie+"))?\\s*\\))",ye="(?:(matrix)\\s*\\(\\s*("+ie+")"+ce+"("+ie+")"+ce+"("+ie+")"+ce+"("+ie+")"+ce+"("+ie+")"+ce+"("+ie+")\\s*\\))",le="(?:"+ye+"|"+de+"|"+G+"|"+Ee+"|"+ge+"|"+Ce+")",ne="(?:"+le+"(?:"+ce+"*"+le+")*)",fe="^\\s*(?:"+ne+"?)\\s*$",Ne=new RegExp(fe),Ae=new RegExp(le,"g");return function(ue){var me=ae.concat(),Se=[];if(!ue||ue&&!Ne.test(ue))return me;ue.replace(Ae,function(je){var rt=new RegExp(le).exec(je).filter(function(pt){return!!pt}),at=rt[1],yt=rt.slice(2).map(parseFloat);switch(at){case"translate":X(me,yt);break;case"rotate":yt[0]=u.util.degreesToRadians(yt[0]),K(me,yt);break;case"scale":Z(me,yt);break;case"skewX":J(me,yt,2);break;case"skewY":J(me,yt,1);break;case"matrix":me=yt;break}Se.push(me.concat()),me=ae.concat()});for(var Re=Se[0];Se.length>1;)Se.shift(),Re=u.util.multiplyTransformMatrices(Re,Se[0]);return Re}}();function O(K,Z){var J,X;K.replace(/;\s*$/,"").split(";").forEach(function(ae){var ie=ae.split(":");J=ie[0].trim().toLowerCase(),X=ie[1].trim(),Z[J]=X})}function F(K,Z){var J,X;for(var ae in K)typeof K[ae]>"u"||(J=ae.toLowerCase(),X=K[ae],Z[J]=X)}function I(K,Z){var J={};for(var X in u.cssRules[Z])if(R(K,X.split(" ")))for(var ae in u.cssRules[Z][X])J[ae]=u.cssRules[Z][X][ae];return J}function R(K,Z){var J,X=!0;return J=B(K,Z.pop()),J&&Z.length&&(X=U(K,Z)),J&&X&&Z.length===0}function U(K,Z){for(var J,X=!0;K.parentNode&&K.parentNode.nodeType===1&&Z.length;)X&&(J=Z.pop()),K=K.parentNode,X=B(K,J);return Z.length===0}function B(K,Z){var J=K.nodeName,X=K.getAttribute("class"),ae=K.getAttribute("id"),ie,ce;if(ie=new RegExp("^"+J,"i"),Z=Z.replace(ie,""),ae&&Z.length&&(ie=new RegExp("#"+ae+"(?![a-zA-Z\\-]+)","i"),Z=Z.replace(ie,"")),X&&Z.length)for(X=X.split(" "),ce=X.length;ce--;)ie=new RegExp("\\."+X[ce]+"(?![a-zA-Z\\-]+)","i"),Z=Z.replace(ie,"");return Z.length===0}function W(K,Z){var J;if(K.getElementById&&(J=K.getElementById(Z)),J)return J;var X,ae,ie,ce=K.getElementsByTagName("*");for(ae=0,ie=ce.length;ae<ie;ae++)if(X=ce[ae],Z===X.getAttribute("id"))return X}function Y(K){for(var Z=T(K,["use","svg:use"]),J=0;Z.length&&J<Z.length;){var X=Z[J],ae=X.getAttribute("xlink:href")||X.getAttribute("href");if(ae===null)return;var ie=ae.substr(1),ce=X.getAttribute("x")||0,ge=X.getAttribute("y")||0,Ce=W(K,ie).cloneNode(!0),Ee=(Ce.getAttribute("transform")||"")+" translate("+ce+", "+ge+")",G,de=Z.length,ye,le,ne,fe,Ne=u.svgNS;if(j(Ce),/^svg$/i.test(Ce.nodeName)){var Ae=Ce.ownerDocument.createElementNS(Ne,"g");for(le=0,ne=Ce.attributes,fe=ne.length;le<fe;le++)ye=ne.item(le),Ae.setAttributeNS(Ne,ye.nodeName,ye.nodeValue);for(;Ce.firstChild;)Ae.appendChild(Ce.firstChild);Ce=Ae}for(le=0,ne=X.attributes,fe=ne.length;le<fe;le++)ye=ne.item(le),!(ye.nodeName==="x"||ye.nodeName==="y"||ye.nodeName==="xlink:href"||ye.nodeName==="href")&&(ye.nodeName==="transform"?Ee=ye.nodeValue+" "+Ee:Ce.setAttribute(ye.nodeName,ye.nodeValue));Ce.setAttribute("transform",Ee),Ce.setAttribute("instantiated_by_use","1"),Ce.removeAttribute("id"),G=X.parentNode,G.replaceChild(Ce,X),Z.length===de&&J++}}var z=new RegExp("^\\s*("+u.reNum+"+)\\s*,?\\s*("+u.reNum+"+)\\s*,?\\s*("+u.reNum+"+)\\s*,?\\s*("+u.reNum+"+)\\s*$");function j(K){if(!u.svgViewBoxElementsRegEx.test(K.nodeName))return{};var Z=K.getAttribute("viewBox"),J=1,X=1,ae=0,ie=0,ce,ge,Ce,Ee,G=K.getAttribute("width"),de=K.getAttribute("height"),ye=K.getAttribute("x")||0,le=K.getAttribute("y")||0,ne=K.getAttribute("preserveAspectRatio")||"",fe=!Z||!(Z=Z.match(z)),Ne=!G||!de||G==="100%"||de==="100%",Ae=fe&&Ne,ue={},me="",Se=0,Re=0;if(ue.width=0,ue.height=0,ue.toBeParsed=Ae,fe&&(ye||le)&&K.parentNode&&K.parentNode.nodeName!=="#document"&&(me=" translate("+f(ye)+" "+f(le)+") ",Ce=(K.getAttribute("transform")||"")+me,K.setAttribute("transform",Ce),K.removeAttribute("x"),K.removeAttribute("y")),Ae)return ue;if(fe)return ue.width=f(G),ue.height=f(de),ue;if(ae=-parseFloat(Z[1]),ie=-parseFloat(Z[2]),ce=parseFloat(Z[3]),ge=parseFloat(Z[4]),ue.minX=ae,ue.minY=ie,ue.viewBoxWidth=ce,ue.viewBoxHeight=ge,Ne?(ue.width=ce,ue.height=ge):(ue.width=f(G),ue.height=f(de),J=ue.width/ce,X=ue.height/ge),ne=u.util.parsePreserveAspectRatioAttribute(ne),ne.alignX!=="none"&&(ne.meetOrSlice==="meet"&&(X=J=J>X?X:J),ne.meetOrSlice==="slice"&&(X=J=J>X?J:X),Se=ue.width-ce*J,Re=ue.height-ge*J,ne.alignX==="Mid"&&(Se/=2),ne.alignY==="Mid"&&(Re/=2),ne.alignX==="Min"&&(Se=0),ne.alignY==="Min"&&(Re=0)),J===1&&X===1&&ae===0&&ie===0&&ye===0&&le===0)return ue;if((ye||le)&&K.parentNode.nodeName!=="#document"&&(me=" translate("+f(ye)+" "+f(le)+") "),Ce=me+" matrix("+J+" 0 0 "+X+" "+(ae*J+Se)+" "+(ie*X+Re)+") ",K.nodeName==="svg"){for(Ee=K.ownerDocument.createElementNS(u.svgNS,"g");K.firstChild;)Ee.appendChild(K.firstChild);K.appendChild(Ee)}else Ee=K,Ee.removeAttribute("x"),Ee.removeAttribute("y"),Ce=Ee.getAttribute("transform")+Ce;return Ee.setAttribute("transform",Ce),ue}function M(K,Z){for(;K&&(K=K.parentNode);)if(K.nodeName&&Z.test(K.nodeName.replace("svg:",""))&&!K.getAttribute("instantiated_by_use"))return!0;return!1}u.parseSVGDocument=function(K,Z,J,X){if(K){Y(K);var ae=u.Object.__uid++,ie,ce,ge=j(K),Ce=u.util.toArray(K.getElementsByTagName("*"));if(ge.crossOrigin=X&&X.crossOrigin,ge.svgUid=ae,Ce.length===0&&u.isLikelyNode){Ce=K.selectNodes('//*[name(.)!="svg"]');var Ee=[];for(ie=0,ce=Ce.length;ie<ce;ie++)Ee[ie]=Ce[ie];Ce=Ee}var G=Ce.filter(function(ye){return j(ye),u.svgValidTagNamesRegEx.test(ye.nodeName.replace("svg:",""))&&!M(ye,u.svgInvalidAncestorsRegEx)});if(!G||G&&!G.length){Z&&Z([],{});return}var de={};Ce.filter(function(ye){return ye.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ye){var le=ye.getAttribute("id");de[le]=u.util.toArray(ye.getElementsByTagName("*")).filter(function(ne){return u.svgValidTagNamesRegEx.test(ne.nodeName.replace("svg:",""))})}),u.gradientDefs[ae]=u.getGradientDefs(K),u.cssRules[ae]=u.getCSSRules(K),u.clipPaths[ae]=de,u.parseElements(G,function(ye,le){Z&&(Z(ye,ge,le,Ce),delete u.gradientDefs[ae],delete u.cssRules[ae],delete u.clipPaths[ae])},h(ge),J,X)}};function q(K,Z){var J=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],X="xlink:href",ae=Z.getAttribute(X).substr(1),ie=W(K,ae);if(ie&&ie.getAttribute(X)&&q(K,ie),J.forEach(function(ge){ie&&!Z.hasAttribute(ge)&&ie.hasAttribute(ge)&&Z.setAttribute(ge,ie.getAttribute(ge))}),!Z.children.length)for(var ce=ie.cloneNode(!0);ce.firstChild;)Z.appendChild(ce.firstChild);Z.removeAttribute(X)}var H=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+u.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+u.reNum+"))?\\s+(.*)");l(u,{parseFontDeclaration:function(K,Z){var J=K.match(H);if(J){var X=J[1],ae=J[3],ie=J[4],ce=J[5],ge=J[6];X&&(Z.fontStyle=X),ae&&(Z.fontWeight=isNaN(parseFloat(ae))?ae:parseFloat(ae)),ie&&(Z.fontSize=f(ie)),ge&&(Z.fontFamily=ge),ce&&(Z.lineHeight=ce==="normal"?1:ce)}},getGradientDefs:function(K){var Z=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],J=T(K,Z),X,ae=0,ie={};for(ae=J.length;ae--;)X=J[ae],X.getAttribute("xlink:href")&&q(K,X),ie[X.getAttribute("id")]=X;return ie},parseAttributes:function(K,Z,J){if(K){var X,ae={},ie,ce;typeof J>"u"&&(J=K.getAttribute("svgUid")),K.parentNode&&u.svgValidParentsRegEx.test(K.parentNode.nodeName)&&(ae=u.parseAttributes(K.parentNode,Z,J));var ge=Z.reduce(function(ne,fe){return X=K.getAttribute(fe),X&&(ne[fe]=X),ne},{}),Ce=l(I(K,J),u.parseStyleAttribute(K));ge=l(ge,Ce),Ce[x]&&K.setAttribute(x,Ce[x]),ie=ce=ae.fontSize||u.Text.DEFAULT_SVG_FONT_SIZE,ge[w]&&(ge[w]=ie=f(ge[w],ce));var Ee,G,de={};for(var ye in ge)Ee=S(ye),G=E(Ee,ge[ye],ae,ie),de[Ee]=G;de&&de.font&&u.parseFontDeclaration(de.font,de);var le=l(ae,de);return u.svgValidParentsRegEx.test(K.nodeName)?le:k(le)}},parseElements:function(K,Z,J,X,ae){new u.ElementsParser(K,Z,J,X,ae).parse()},parseStyleAttribute:function(K){var Z={},J=K.getAttribute("style");return J&&(typeof J=="string"?O(J,Z):F(J,Z)),Z},parsePointsAttribute:function(K){if(!K)return null;K=K.replace(/,/g," ").trim(),K=K.split(/\s+/);var Z=[],J,X;for(J=0,X=K.length;J<X;J+=2)Z.push({x:parseFloat(K[J]),y:parseFloat(K[J+1])});return Z},getCSSRules:function(K){var Z=K.getElementsByTagName("style"),J,X,ae={},ie;for(J=0,X=Z.length;J<X;J++){var ce=Z[J].textContent;ce=ce.replace(/\/\*[\s\S]*?\*\//g,""),ce.trim()!==""&&(ie=ce.match(/[^{]*\{[\s\S]*?\}/g),ie=ie.map(function(ge){return ge.trim()}),ie.forEach(function(ge){var Ce=ge.match(/([\s\S]*?)\s*\{([^}]*)\}/),Ee={},G=Ce[2].trim(),de=G.replace(/;$/,"").split(/\s*;\s*/);for(J=0,X=de.length;J<X;J++){var ye=de[J].split(/\s*:\s*/),le=ye[0],ne=ye[1];Ee[le]=ne}ge=Ce[1],ge.split(",").forEach(function(fe){fe=fe.replace(/^svg/i,"").trim(),fe!==""&&(ae[fe]?u.util.object.extend(ae[fe],Ee):ae[fe]=u.util.object.clone(Ee))})}))}return ae},loadSVGFromURL:function(K,Z,J,X){K=K.replace(/^\n\s*/,"").trim(),new u.util.request(K,{method:"get",onComplete:ae});function ae(ie){var ce=ie.responseXML;if(!ce||!ce.documentElement)return Z&&Z(null),!1;u.parseSVGDocument(ce.documentElement,function(ge,Ce,Ee,G){Z&&Z(ge,Ce,Ee,G)},J,X)}},loadSVGFromString:function(K,Z,J,X){var ae=new u.window.DOMParser,ie=ae.parseFromString(K.trim(),"text/xml");u.parseSVGDocument(ie.documentElement,function(ce,ge,Ce,Ee){Z(ce,ge,Ce,Ee)},J,X)}})}(n),e.ElementsParser=function(s,u,l,h,c,f){this.elements=s,this.callback=u,this.options=l,this.reviver=h,this.svgUid=l&&l.svgUid||0,this.parsingOptions=c,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=f},function(s){s.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},s.createObjects=function(){var u=this;this.elements.forEach(function(l,h){l.setAttribute("svgUid",u.svgUid),u.createObject(l,h)})},s.findTag=function(u){return e[e.util.string.capitalize(u.tagName.replace("svg:",""))]},s.createObject=function(u,l){var h=this.findTag(u);if(h&&h.fromElement)try{h.fromElement(u,this.createCallback(l,u),this.options)}catch(c){e.log(c)}else this.checkIfDone()},s.createCallback=function(u,l){var h=this;return function(c){var f;h.resolveGradient(c,l,"fill"),h.resolveGradient(c,l,"stroke"),c instanceof e.Image&&c._originalElement&&(f=c.parsePreserveAspectRatioAttribute(l)),c._removeTransformMatrix(f),h.resolveClipPath(c,l),h.reviver&&h.reviver(l,c),h.instances[u]=c,h.checkIfDone()}},s.extractPropertyDefinition=function(u,l,h){var c=u[l],f=this.regexUrl;if(f.test(c)){f.lastIndex=0;var d=f.exec(c)[1];return f.lastIndex=0,e[h][this.svgUid][d]}},s.resolveGradient=function(u,l,h){var c=this.extractPropertyDefinition(u,h,"gradientDefs");if(c){var f=l.getAttribute(h+"-opacity"),d=e.Gradient.fromElement(c,u,f,this.options);u.set(h,d)}},s.createClipPathCallback=function(u,l){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,l.push(h)}},s.resolveClipPath=function(u,l){var h=this.extractPropertyDefinition(u,"clipPath","clipPaths"),c,f,d,p,m,g;if(h){p=[],d=e.util.invertTransform(u.calcTransformMatrix());for(var y=h[0].parentNode,v=l;v.parentNode&&v.getAttribute("clip-path")!==u.clipPath;)v=v.parentNode;v.parentNode.appendChild(y);for(var b=0;b<h.length;b++)c=h[b],f=this.findTag(c),f.fromElement(c,this.createClipPathCallback(u,p),this.options);p.length===1?h=p[0]:h=new e.Group(p),m=e.util.multiplyTransformMatrices(d,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,v);var g=e.util.qrDecompose(m);h.flipX=!1,h.flipY=!1,h.set("scaleX",g.scaleX),h.set("scaleY",g.scaleY),h.angle=g.angle,h.skewX=g.skewX,h.skewY=0,h.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),u.clipPath=h}else delete u.clipPath},s.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(u){return u!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(s){var u=s.fabric||(s.fabric={});if(u.Point){u.warn("fabric.Point is already defined");return}u.Point=l;function l(h,c){this.x=h,this.y=c}l.prototype={type:"point",constructor:l,add:function(h){return new l(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new l(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new l(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new l(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new l(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new l(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,c){return typeof c>"u"&&(c=.5),c=Math.max(Math.min(1,c),0),new l(this.x+(h.x-this.x)*c,this.y+(h.y-this.y)*c)},distanceFrom:function(h){var c=this.x-h.x,f=this.y-h.y;return Math.sqrt(c*c+f*f)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new l(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new l(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,c){return this.x=h,this.y=c,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var c=this.x,f=this.y;this.x=h.x,this.y=h.y,h.x=c,h.y=f},clone:function(){return new l(this.x,this.y)}}}(n),function(s){var u=s.fabric||(s.fabric={});if(u.Intersection){u.warn("fabric.Intersection is already defined");return}function l(h){this.status=h,this.points=[]}u.Intersection=l,u.Intersection.prototype={constructor:l,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},u.Intersection.intersectLineLine=function(h,c,f,d){var p,m=(d.x-f.x)*(h.y-f.y)-(d.y-f.y)*(h.x-f.x),g=(c.x-h.x)*(h.y-f.y)-(c.y-h.y)*(h.x-f.x),y=(d.y-f.y)*(c.x-h.x)-(d.x-f.x)*(c.y-h.y);if(y!==0){var v=m/y,b=g/y;0<=v&&v<=1&&0<=b&&b<=1?(p=new l("Intersection"),p.appendPoint(new u.Point(h.x+v*(c.x-h.x),h.y+v*(c.y-h.y)))):p=new l}else m===0||g===0?p=new l("Coincident"):p=new l("Parallel");return p},u.Intersection.intersectLinePolygon=function(h,c,f){var d=new l,p=f.length,m,g,y,v;for(v=0;v<p;v++)m=f[v],g=f[(v+1)%p],y=l.intersectLineLine(h,c,m,g),d.appendPoints(y.points);return d.points.length>0&&(d.status="Intersection"),d},u.Intersection.intersectPolygonPolygon=function(h,c){var f=new l,d=h.length,p;for(p=0;p<d;p++){var m=h[p],g=h[(p+1)%d],y=l.intersectLinePolygon(m,g,c);f.appendPoints(y.points)}return f.points.length>0&&(f.status="Intersection"),f},u.Intersection.intersectPolygonRectangle=function(h,c,f){var d=c.min(f),p=c.max(f),m=new u.Point(p.x,d.y),g=new u.Point(d.x,p.y),y=l.intersectLinePolygon(d,m,h),v=l.intersectLinePolygon(m,p,h),b=l.intersectLinePolygon(p,g,h),w=l.intersectLinePolygon(g,d,h),x=new l;return x.appendPoints(y.points),x.appendPoints(v.points),x.appendPoints(b.points),x.appendPoints(w.points),x.points.length>0&&(x.status="Intersection"),x}}(n),function(s){var u=s.fabric||(s.fabric={});if(u.Color){u.warn("fabric.Color is already defined.");return}function l(c){c?this._tryParsingColor(c):this.setSource([0,0,0,1])}u.Color=l,u.Color.prototype={_tryParsingColor:function(c){var f;c in l.colorNameMap&&(c=l.colorNameMap[c]),c==="transparent"&&(f=[255,255,255,0]),f||(f=l.sourceFromHex(c)),f||(f=l.sourceFromRgb(c)),f||(f=l.sourceFromHsl(c)),f||(f=[0,0,0,1]),f&&this.setSource(f)},_rgbToHsl:function(c,f,d){c/=255,f/=255,d/=255;var p,m,g,y=u.util.array.max([c,f,d]),v=u.util.array.min([c,f,d]);if(g=(y+v)/2,y===v)p=m=0;else{var b=y-v;switch(m=g>.5?b/(2-y-v):b/(y+v),y){case c:p=(f-d)/b+(f<d?6:0);break;case f:p=(d-c)/b+2;break;case d:p=(c-f)/b+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(c){this._source=c},toRgb:function(){var c=this.getSource();return"rgb("+c[0]+","+c[1]+","+c[2]+")"},toRgba:function(){var c=this.getSource();return"rgba("+c[0]+","+c[1]+","+c[2]+","+c[3]+")"},toHsl:function(){var c=this.getSource(),f=this._rgbToHsl(c[0],c[1],c[2]);return"hsl("+f[0]+","+f[1]+"%,"+f[2]+"%)"},toHsla:function(){var c=this.getSource(),f=this._rgbToHsl(c[0],c[1],c[2]);return"hsla("+f[0]+","+f[1]+"%,"+f[2]+"%,"+c[3]+")"},toHex:function(){var c=this.getSource(),f,d,p;return f=c[0].toString(16),f=f.length===1?"0"+f:f,d=c[1].toString(16),d=d.length===1?"0"+d:d,p=c[2].toString(16),p=p.length===1?"0"+p:p,f.toUpperCase()+d.toUpperCase()+p.toUpperCase()},toHexa:function(){var c=this.getSource(),f;return f=Math.round(c[3]*255),f=f.toString(16),f=f.length===1?"0"+f:f,this.toHex()+f.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(c){var f=this.getSource();return f[3]=c,this.setSource(f),this},toGrayscale:function(){var c=this.getSource(),f=parseInt((c[0]*.3+c[1]*.59+c[2]*.11).toFixed(0),10),d=c[3];return this.setSource([f,f,f,d]),this},toBlackWhite:function(c){var f=this.getSource(),d=(f[0]*.3+f[1]*.59+f[2]*.11).toFixed(0),p=f[3];return c=c||127,d=Number(d)<Number(c)?0:255,this.setSource([d,d,d,p]),this},overlayWith:function(c){c instanceof l||(c=new l(c));var f=[],d=this.getAlpha(),p=.5,m=this.getSource(),g=c.getSource(),y;for(y=0;y<3;y++)f.push(Math.round(m[y]*(1-p)+g[y]*p));return f[3]=d,this.setSource(f),this}},u.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,u.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,u.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,u.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(c,f,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?c+(f-c)*6*d:d<1/2?f:d<2/3?c+(f-c)*(2/3-d)*6:c}u.Color.fromRgb=function(c){return l.fromSource(l.sourceFromRgb(c))},u.Color.sourceFromRgb=function(c){var f=c.match(l.reRGBa);if(f){var d=parseInt(f[1],10)/(/%$/.test(f[1])?100:1)*(/%$/.test(f[1])?255:1),p=parseInt(f[2],10)/(/%$/.test(f[2])?100:1)*(/%$/.test(f[2])?255:1),m=parseInt(f[3],10)/(/%$/.test(f[3])?100:1)*(/%$/.test(f[3])?255:1);return[parseInt(d,10),parseInt(p,10),parseInt(m,10),f[4]?parseFloat(f[4]):1]}},u.Color.fromRgba=l.fromRgb,u.Color.fromHsl=function(c){return l.fromSource(l.sourceFromHsl(c))},u.Color.sourceFromHsl=function(c){var f=c.match(l.reHSLa);if(f){var d=(parseFloat(f[1])%360+360)%360/360,p=parseFloat(f[2])/(/%$/.test(f[2])?100:1),m=parseFloat(f[3])/(/%$/.test(f[3])?100:1),g,y,v;if(p===0)g=y=v=m;else{var b=m<=.5?m*(p+1):m+p-m*p,w=m*2-b;g=h(w,b,d+1/3),y=h(w,b,d),v=h(w,b,d-1/3)}return[Math.round(g*255),Math.round(y*255),Math.round(v*255),f[4]?parseFloat(f[4]):1]}},u.Color.fromHsla=l.fromHsl,u.Color.fromHex=function(c){return l.fromSource(l.sourceFromHex(c))},u.Color.sourceFromHex=function(c){if(c.match(l.reHex)){var f=c.slice(c.indexOf("#")+1),d=f.length===3||f.length===4,p=f.length===8||f.length===4,m=d?f.charAt(0)+f.charAt(0):f.substring(0,2),g=d?f.charAt(1)+f.charAt(1):f.substring(2,4),y=d?f.charAt(2)+f.charAt(2):f.substring(4,6),v=p?d?f.charAt(3)+f.charAt(3):f.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(y,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},u.Color.fromSource=function(c){var f=new l;return f.setSource(c),f}}(n),function(s){var u=s.fabric||(s.fabric={}),l=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],c={},f="left",d="top",p="right",m="bottom",g="center",y={top:m,bottom:d,left:p,right:f,center:g},v=u.util.radiansToDegrees,b=Math.sign||function(Ee){return(Ee>0)-(Ee<0)||+Ee};function w(Ee,G){var de=Ee.angle+v(Math.atan2(G.y,G.x))+360;return Math.round(de%360/45)}function x(Ee,G){var de=G.transform.target,ye=de.canvas,le=u.util.object.clone(G);le.target=de,ye&&ye.fire("object:"+Ee,le),de.fire(Ee,G)}function S(Ee,G){var de=G.canvas,ye=de.uniScaleKey,le=Ee[ye];return de.uniformScaling&&!le||!de.uniformScaling&&le}function E(Ee){return Ee.originX===g&&Ee.originY===g}function A(Ee,G,de){var ye=Ee.lockScalingX,le=Ee.lockScalingY;return!!(ye&&le||!G&&(ye||le)&&de||ye&&G==="x"||le&&G==="y")}function k(Ee,G,de){var ye="not-allowed",le=S(Ee,de),ne="";if(G.x!==0&&G.y===0?ne="x":G.x===0&&G.y!==0&&(ne="y"),A(de,ne,le))return ye;var fe=w(de,G);return l[fe]+"-resize"}function T(Ee,G,de){var ye="not-allowed";if(G.x!==0&&de.lockSkewingY||G.y!==0&&de.lockSkewingX)return ye;var le=w(de,G)%4;return h[le]+"-resize"}function O(Ee,G,de){return Ee[de.canvas.altActionKey]?c.skewCursorStyleHandler(Ee,G,de):c.scaleCursorStyleHandler(Ee,G,de)}function F(Ee,G,de){var ye=Ee[de.canvas.altActionKey];if(G.x===0)return ye?"skewX":"scaleY";if(G.y===0)return ye?"skewY":"scaleX"}function I(Ee,G,de){return de.lockRotation?"not-allowed":G.cursorStyle}function R(Ee,G,de,ye){return{e:Ee,transform:G,pointer:{x:de,y:ye}}}function U(Ee){return function(G,de,ye,le){var ne=de.target,fe=ne.getCenterPoint(),Ne=ne.translateToOriginPoint(fe,de.originX,de.originY),Ae=Ee(G,de,ye,le);return ne.setPositionByOrigin(Ne,de.originX,de.originY),Ae}}function B(Ee,G){return function(de,ye,le,ne){var fe=G(de,ye,le,ne);return fe&&x(Ee,R(de,ye,le,ne)),fe}}function W(Ee,G,de,ye,le){var ne=Ee.target,fe=ne.controls[Ee.corner],Ne=ne.canvas.getZoom(),Ae=ne.padding/Ne,ue=ne.toLocalPoint(new u.Point(ye,le),G,de);return ue.x>=Ae&&(ue.x-=Ae),ue.x<=-Ae&&(ue.x+=Ae),ue.y>=Ae&&(ue.y-=Ae),ue.y<=Ae&&(ue.y+=Ae),ue.x-=fe.offsetX,ue.y-=fe.offsetY,ue}function Y(Ee){return Ee.flipX!==Ee.flipY}function z(Ee,G,de,ye,le){if(Ee[G]!==0){var ne=Ee._getTransformedDimensions()[ye],fe=le/ne*Ee[de];Ee.set(de,fe)}}function j(Ee,G,de,ye){var le=G.target,ne=le._getTransformedDimensions(0,le.skewY),fe=W(G,G.originX,G.originY,de,ye),Ne=Math.abs(fe.x*2)-ne.x,Ae=le.skewX,ue;Ne<2?ue=0:(ue=v(Math.atan2(Ne/le.scaleX,ne.y/le.scaleY)),G.originX===f&&G.originY===m&&(ue=-ue),G.originX===p&&G.originY===d&&(ue=-ue),Y(le)&&(ue=-ue));var me=Ae!==ue;if(me){var Se=le._getTransformedDimensions().y;le.set("skewX",ue),z(le,"skewY","scaleY","y",Se)}return me}function M(Ee,G,de,ye){var le=G.target,ne=le._getTransformedDimensions(le.skewX,0),fe=W(G,G.originX,G.originY,de,ye),Ne=Math.abs(fe.y*2)-ne.y,Ae=le.skewY,ue;Ne<2?ue=0:(ue=v(Math.atan2(Ne/le.scaleY,ne.x/le.scaleX)),G.originX===f&&G.originY===m&&(ue=-ue),G.originX===p&&G.originY===d&&(ue=-ue),Y(le)&&(ue=-ue));var me=Ae!==ue;if(me){var Se=le._getTransformedDimensions().x;le.set("skewY",ue),z(le,"skewX","scaleX","x",Se)}return me}function q(Ee,G,de,ye){var le=G.target,ne=le.skewX,fe,Ne=G.originY;if(le.lockSkewingX)return!1;if(ne===0){var Ae=W(G,g,g,de,ye);Ae.x>0?fe=f:fe=p}else ne>0&&(fe=Ne===d?f:p),ne<0&&(fe=Ne===d?p:f),Y(le)&&(fe=fe===f?p:f);G.originX=fe;var ue=B("skewing",U(j));return ue(Ee,G,de,ye)}function H(Ee,G,de,ye){var le=G.target,ne=le.skewY,fe,Ne=G.originX;if(le.lockSkewingY)return!1;if(ne===0){var Ae=W(G,g,g,de,ye);Ae.y>0?fe=d:fe=m}else ne>0&&(fe=Ne===f?d:m),ne<0&&(fe=Ne===f?m:d),Y(le)&&(fe=fe===d?m:d);G.originY=fe;var ue=B("skewing",U(M));return ue(Ee,G,de,ye)}function K(Ee,G,de,ye){var le=G,ne=le.target,fe=ne.translateToOriginPoint(ne.getCenterPoint(),le.originX,le.originY);if(ne.lockRotation)return!1;var Ne=Math.atan2(le.ey-fe.y,le.ex-fe.x),Ae=Math.atan2(ye-fe.y,de-fe.x),ue=v(Ae-Ne+le.theta),me=!0;if(ne.snapAngle>0){var Se=ne.snapAngle,Re=ne.snapThreshold||Se,je=Math.ceil(ue/Se)*Se,rt=Math.floor(ue/Se)*Se;Math.abs(ue-rt)<Re?ue=rt:Math.abs(ue-je)<Re&&(ue=je)}return ue<0&&(ue=360+ue),ue%=360,me=ne.angle!==ue,ne.angle=ue,me}function Z(Ee,G,de,ye,le){le=le||{};var ne=G.target,fe=ne.lockScalingX,Ne=ne.lockScalingY,Ae=le.by,ue,me,Se,Re,je=S(Ee,ne),rt=A(ne,Ae,je),at,yt,pt=G.gestureScale;if(rt)return!1;if(pt)me=G.scaleX*pt,Se=G.scaleY*pt;else{if(ue=W(G,G.originX,G.originY,de,ye),at=Ae!=="y"?b(ue.x):1,yt=Ae!=="x"?b(ue.y):1,G.signX||(G.signX=at),G.signY||(G.signY=yt),ne.lockScalingFlip&&(G.signX!==at||G.signY!==yt))return!1;if(Re=ne._getTransformedDimensions(),je&&!Ae){var Le=Math.abs(ue.x)+Math.abs(ue.y),tt=G.original,ft=Math.abs(Re.x*tt.scaleX/ne.scaleX)+Math.abs(Re.y*tt.scaleY/ne.scaleY),Et=Le/ft;me=tt.scaleX*Et,Se=tt.scaleY*Et}else me=Math.abs(ue.x*ne.scaleX/Re.x),Se=Math.abs(ue.y*ne.scaleY/Re.y);E(G)&&(me*=2,Se*=2),G.signX!==at&&Ae!=="y"&&(G.originX=y[G.originX],me*=-1,G.signX=at),G.signY!==yt&&Ae!=="x"&&(G.originY=y[G.originY],Se*=-1,G.signY=yt)}var xt=ne.scaleX,Ot=ne.scaleY;return Ae?(Ae==="x"&&ne.set("scaleX",me),Ae==="y"&&ne.set("scaleY",Se)):(!fe&&ne.set("scaleX",me),!Ne&&ne.set("scaleY",Se)),xt!==ne.scaleX||Ot!==ne.scaleY}function J(Ee,G,de,ye){return Z(Ee,G,de,ye)}function X(Ee,G,de,ye){return Z(Ee,G,de,ye,{by:"x"})}function ae(Ee,G,de,ye){return Z(Ee,G,de,ye,{by:"y"})}function ie(Ee,G,de,ye){return Ee[G.target.canvas.altActionKey]?c.skewHandlerX(Ee,G,de,ye):c.scalingY(Ee,G,de,ye)}function ce(Ee,G,de,ye){return Ee[G.target.canvas.altActionKey]?c.skewHandlerY(Ee,G,de,ye):c.scalingX(Ee,G,de,ye)}function ge(Ee,G,de,ye){var le=G.target,ne=W(G,G.originX,G.originY,de,ye),fe=le.strokeWidth/(le.strokeUniform?le.scaleX:1),Ne=E(G)?2:1,Ae=le.width,ue=Math.abs(ne.x*Ne/le.scaleX)-fe;return le.set("width",Math.max(ue,0)),Ae!==ue}function Ce(Ee,G,de,ye){var le=G.target,ne=de-G.offsetX,fe=ye-G.offsetY,Ne=!le.get("lockMovementX")&&le.left!==ne,Ae=!le.get("lockMovementY")&&le.top!==fe;return Ne&&le.set("left",ne),Ae&&le.set("top",fe),(Ne||Ae)&&x("moving",R(Ee,G,de,ye)),Ne||Ae}c.scaleCursorStyleHandler=k,c.skewCursorStyleHandler=T,c.scaleSkewCursorStyleHandler=O,c.rotationWithSnapping=B("rotating",U(K)),c.scalingEqually=B("scaling",U(J)),c.scalingX=B("scaling",U(X)),c.scalingY=B("scaling",U(ae)),c.scalingYOrSkewingX=ie,c.scalingXOrSkewingY=ce,c.changeWidth=B("resizing",U(ge)),c.skewHandlerX=q,c.skewHandlerY=H,c.dragHandler=Ce,c.scaleOrSkewActionName=F,c.rotationStyleHandler=I,c.fireEvent=x,c.wrapWithFixedAnchor=U,c.wrapWithFireEvent=B,c.getLocalPoint=W,u.controlsUtils=c}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.util.degreesToRadians,h=u.controlsUtils;function c(d,p,m,g,y){g=g||{};var v=this.sizeX||g.cornerSize||y.cornerSize,b=this.sizeY||g.cornerSize||y.cornerSize,w=typeof g.transparentCorners<"u"?g.transparentCorners:y.transparentCorners,x=w?"stroke":"fill",S=!w&&(g.cornerStrokeColor||y.cornerStrokeColor),E=p,A=m,k;d.save(),d.fillStyle=g.cornerColor||y.cornerColor,d.strokeStyle=g.cornerStrokeColor||y.cornerStrokeColor,v>b?(k=v,d.scale(1,b/v),A=m*v/b):b>v?(k=b,d.scale(v/b,1),E=p*b/v):k=v,d.lineWidth=1,d.beginPath(),d.arc(E,A,k/2,0,2*Math.PI,!1),d[x](),S&&d.stroke(),d.restore()}function f(d,p,m,g,y){g=g||{};var v=this.sizeX||g.cornerSize||y.cornerSize,b=this.sizeY||g.cornerSize||y.cornerSize,w=typeof g.transparentCorners<"u"?g.transparentCorners:y.transparentCorners,x=w?"stroke":"fill",S=!w&&(g.cornerStrokeColor||y.cornerStrokeColor),E=v/2,A=b/2;d.save(),d.fillStyle=g.cornerColor||y.cornerColor,d.strokeStyle=g.cornerStrokeColor||y.cornerStrokeColor,d.lineWidth=1,d.translate(p,m),d.rotate(l(y.angle)),d[x+"Rect"](-E,-A,v,b),S&&d.strokeRect(-E,-A,v,b),d.restore()}h.renderCircleControl=c,h.renderSquareControl=f}(n),function(s){var u=s.fabric||(s.fabric={});function l(h){for(var c in h)this[c]=h[c]}u.Control=l,u.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,c){return c.cursorStyle},getActionName:function(h,c){return c.actionName},getVisibility:function(h,c){var f=h._controlsVisibility;return f&&typeof f[c]<"u"?f[c]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,c){var f=u.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},c);return f},calcCornerCoords:function(h,c,f,d,p){var m,g,y,v,b=p?this.touchSizeX:this.sizeX,w=p?this.touchSizeY:this.sizeY;if(b&&w&&b!==w){var x=Math.atan2(w,b),S=Math.sqrt(b*b+w*w)/2,E=x-u.util.degreesToRadians(h),A=Math.PI/2-x-u.util.degreesToRadians(h);m=S*u.util.cos(E),g=S*u.util.sin(E),y=S*u.util.cos(A),v=S*u.util.sin(A)}else{var k=b&&w?b:c;S=k*.7071067812;var E=u.util.degreesToRadians(45-h);m=y=S*u.util.cos(E),g=v=S*u.util.sin(E)}return{tl:{x:f-v,y:d-y},tr:{x:f+m,y:d-g},bl:{x:f-m,y:d+g},br:{x:f+v,y:d+y}}},render:function(h,c,f,d,p){switch(d=d||{},d.cornerStyle||p.cornerStyle){case"circle":u.controlsUtils.renderCircleControl.call(this,h,c,f,d,p);break;default:u.controlsUtils.renderSquareControl.call(this,h,c,f,d,p)}}}}(n),function(){function s(f,d){var p=f.getAttribute("style"),m=f.getAttribute("offset")||0,g,y,v,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var w=p.split(/\s*;\s*/);for(w[w.length-1]===""&&w.pop(),b=w.length;b--;){var x=w[b].split(/\s*:\s*/),S=x[0].trim(),E=x[1].trim();S==="stop-color"?g=E:S==="stop-opacity"&&(v=E)}}return g||(g=f.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=f.getAttribute("stop-opacity")),g=new e.Color(g),y=g.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=y*d,{offset:m,color:g.toRgb(),opacity:v}}function u(f){return{x1:f.getAttribute("x1")||0,y1:f.getAttribute("y1")||0,x2:f.getAttribute("x2")||"100%",y2:f.getAttribute("y2")||0}}function l(f){return{x1:f.getAttribute("fx")||f.getAttribute("cx")||"50%",y1:f.getAttribute("fy")||f.getAttribute("cy")||"50%",r1:0,x2:f.getAttribute("cx")||"50%",y2:f.getAttribute("cy")||"50%",r2:f.getAttribute("r")||"50%"}}var h=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(f){f||(f={}),f.coords||(f.coords={});var d,p=this;Object.keys(f).forEach(function(m){p[m]=f[m]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,d={x1:f.coords.x1||0,y1:f.coords.y1||0,x2:f.coords.x2||0,y2:f.coords.y2||0},this.type==="radial"&&(d.r1=f.coords.r1||0,d.r2=f.coords.r2||0),this.coords=d,this.colorStops=f.colorStops.slice()},addColorStop:function(f){for(var d in f){var p=new e.Color(f[d]);this.colorStops.push({offset:parseFloat(d),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(f){var d={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,d,f),d},toSVG:function(f,y){var p=h(this.coords,!0),m,g,y=y||{},v,b,w=h(this.colorStops,!0),x=p.r1>p.r2,S=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),E=-this.offsetX,A=-this.offsetY,k=!!y.additionalTransform,T=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(w.sort(function(U,B){return U.offset-B.offset}),T==="objectBoundingBox"?(E/=f.width,A/=f.height):(E+=f.width/2,A+=f.height/2),f.type==="path"&&this.gradientUnits!=="percentage"&&(E-=f.pathOffset.x,A-=f.pathOffset.y),S[4]-=E,S[5]-=A,b='id="SVGID_'+this.id+'" gradientUnits="'+T+'"',b+=' gradientTransform="'+(k?y.additionalTransform+" ":"")+e.util.matrixToSVG(S)+'" ',this.type==="linear"?v=["<linearGradient ",b,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",b,' cx="',x?p.x1:p.x2,'" cy="',x?p.y1:p.y2,'" r="',x?p.r1:p.r2,'" fx="',x?p.x2:p.x1,'" fy="',x?p.y2:p.y1,`">
`]),this.type==="radial"){if(x)for(w=w.concat(),w.reverse(),m=0,g=w.length;m<g;m++)w[m].offset=1-w[m].offset;var O=Math.min(p.r1,p.r2);if(O>0){var F=Math.max(p.r1,p.r2),I=O/F;for(m=0,g=w.length;m<g;m++)w[m].offset+=I*(1-w[m].offset)}}for(m=0,g=w.length;m<g;m++){var R=w[m];v.push("<stop ",'offset="',R.offset*100+"%",'" style="stop-color:',R.color,typeof R.opacity<"u"?";stop-opacity: "+R.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(f){var d,p=e.util.object.clone(this.coords),m,g;if(this.type){for(this.type==="linear"?d=f.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(d=f.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var y=this.colorStops[m].color,v=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof v<"u"&&(y=new e.Color(y).setAlpha(v).toRgba()),d.addColorStop(b,y)}return d}}}),e.util.object.extend(e.Gradient,{fromElement:function(f,d,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var y=f.getElementsByTagName("stop"),v,b=f.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",w=f.getAttribute("gradientTransform")||"",x=[],S,E,A=0,k=0,T;for(f.nodeName==="linearGradient"||f.nodeName==="LINEARGRADIENT"?(v="linear",S=u(f)):(v="radial",S=l(f)),E=y.length;E--;)x.push(s(y[E],g));T=e.parseTransformAttribute(w),c(d,S,m,b),b==="pixels"&&(A=-d.left,k=-d.top);var O=new e.Gradient({id:f.getAttribute("id"),type:v,coords:S,colorStops:x,gradientUnits:b,gradientTransform:T,offsetX:A,offsetY:k});return O}});function c(f,d,p,m){var g,y;Object.keys(d).forEach(function(v){g=d[v],g==="Infinity"?y=1:g==="-Infinity"?y=0:(y=parseFloat(d[v],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(y*=.01,m==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(y*=p.viewBoxWidth||p.width),(v==="y1"||v==="y2")&&(y*=p.viewBoxHeight||p.height)))),d[v]=y})}}(),function(){var s=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(u,l){if(u||(u={}),this.id=e.Object.__uid++,this.setOptions(u),!u.source||u.source&&typeof u.source!="string"){l&&l(this);return}else{var h=this;this.source=e.util.createImage(),e.util.loadImage(u.source,function(c,f){h.source=c,l&&l(h,f)},null,this.crossOrigin)}},toObject:function(u){var l=e.Object.NUM_FRACTION_DIGITS,h,c;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),c={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:s(this.offsetX,l),offsetY:s(this.offsetY,l),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,c,u),c},toSVG:function(u){var l=typeof this.source=="function"?this.source():this.source,h=l.width/u.width,c=l.height/u.height,f=this.offsetX/u.width,d=this.offsetY/u.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(c=1,d&&(c+=Math.abs(d))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,f&&(h+=Math.abs(f))),l.src?p=l.src:l.toDataURL&&(p=l.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+f+'" y="'+d+'" width="'+h+'" height="'+c+`">
<image x="0" y="0" width="`+l.width+'" height="'+l.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(u){for(var l in u)this[l]=u[l]},toLive:function(u){var l=this.source;return!l||typeof l.src<"u"&&(!l.complete||l.naturalWidth===0||l.naturalHeight===0)?"":u.createPattern(l,this.repeat)}})}(),function(s){var u=s.fabric||(s.fabric={}),l=u.util.toFixed;if(u.Shadow){u.warn("fabric.Shadow is already defined.");return}u.Shadow=u.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var c in h)this[c]=h[c];this.id=u.Object.__uid++},_parseShadow:function(h){var c=h.trim(),f=u.Shadow.reOffsetsAndBlur.exec(c)||[],d=c.replace(u.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:d.trim(),offsetX:parseFloat(f[1],10)||0,offsetY:parseFloat(f[2],10)||0,blur:parseFloat(f[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var c=40,f=40,d=u.Object.NUM_FRACTION_DIGITS,p=u.util.rotateVector({x:this.offsetX,y:this.offsetY},u.util.degreesToRadians(-h.angle)),m=20,g=new u.Color(this.color);return h.width&&h.height&&(c=l((Math.abs(p.x)+this.blur)/h.width,d)*100+m,f=l((Math.abs(p.y)+this.blur)/h.height,d)*100+m),h.flipX&&(p.x*=-1),h.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+f+'%" height="'+(100+2*f)+'%" x="-'+c+'%" width="'+(100+2*c)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+l(this.blur?this.blur/2:0,d)+`"></feGaussianBlur>
	<feOffset dx="`+l(p.x,d)+'" dy="'+l(p.y,d)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},c=u.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(f){this[f]!==c[f]&&(h[f]=this[f])},this),h}}),u.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(n),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var s=e.util.object.extend,u=e.util.getElementOffset,l=e.util.removeFromArray,h=e.util.toFixed,c=e.util.transformPoint,f=e.util.invertTransform,d=e.util.getNodeCanvas,p=e.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(g,y){y||(y={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,y)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,y){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(y),this.interactive||this._initRetinaScaling(),y.overlayImage&&this.setOverlayImage(y.overlayImage,v),y.backgroundImage&&this.setBackgroundImage(y.backgroundImage,v),y.backgroundColor&&this.setBackgroundColor(y.backgroundColor,v),y.overlayColor&&this.setOverlayColor(y.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?e.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=e.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,y,v){y.setAttribute("width",this.width*g),y.setAttribute("height",this.height*g),v.scale(g,g)},calcOffset:function(){return this._offset=u(this.lowerCanvasEl),this},setOverlayImage:function(g,y,v){return this.__setBgOverlayImage("overlayImage",g,y,v)},setBackgroundImage:function(g,y,v){return this.__setBgOverlayImage("backgroundImage",g,y,v)},setOverlayColor:function(g,y){return this.__setBgOverlayColor("overlayColor",g,y)},setBackgroundColor:function(g,y){return this.__setBgOverlayColor("backgroundColor",g,y)},__setBgOverlayImage:function(g,y,v,b){return typeof y=="string"?e.util.loadImage(y,function(w,x){if(w){var S=new e.Image(w,b);this[g]=S,S.canvas=this}v&&v(w,x)},this,b&&b.crossOrigin):(b&&y.setOptions(b),this[g]=y,y&&(y.canvas=this),v&&v(y,!1)),this},__setBgOverlayColor:function(g,y,v){return this[g]=y,this._initGradient(y,g),this._initPattern(y,g,v),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var y=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(y.width,10)||0,this.height=this.height||parseInt(y.height,10)||0,this.lowerCanvasEl.style&&(y.width=this.width,y.height=this.height,y.style.width=this.width+"px",y.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=e.util.getById(g)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,y){return this.setDimensions({width:g},y)},setHeight:function(g,y){return this.setDimensions({height:g},y)},setDimensions:function(g,y){var v;y=y||{};for(var b in g)v=g[b],y.cssOnly||(this._setBackstoreDimension(b,g[b]),v+="px",this.hasLostContext=!0),y.backstoreOnly||this._setCssDimension(b,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),y.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,y){return this.lowerCanvasEl[g]=y,this.upperCanvasEl&&(this.upperCanvasEl[g]=y),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=y),this[g]=y,this},_setCssDimension:function(g,y){return this.lowerCanvasEl.style[g]=y,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=y),this.wrapperEl&&(this.wrapperEl.style[g]=y),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var y=this._activeObject,v=this.backgroundImage,b=this.overlayImage,w,x,S;for(this.viewportTransform=g,x=0,S=this._objects.length;x<S;x++)w=this._objects[x],w.group||w.setCoords(!0);return y&&y.setCoords(),v&&v.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,y){var v=g,b=this.viewportTransform.slice(0);g=c(g,f(this.viewportTransform)),b[0]=y,b[3]=y;var w=c(g,b);return b[4]+=v.x-w.x,b[5]+=v.y-w.y,this.setViewportTransform(b)},setZoom:function(g){return this.zoomToPoint(new e.Point(0,0),g),this},absolutePan:function(g){var y=this.viewportTransform.slice(0);return y[4]=-g.x,y[5]=-g.y,this.setViewportTransform(y)},relativePan:function(g){return this.absolutePan(new e.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},y=this.width,v=this.height,b=f(this.viewportTransform);return g.tl=c({x:0,y:0},b),g.br=c({x:y,y:v},b),g.tr=new e.Point(g.br.x,g.tl.y),g.bl=new e.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,y){var v=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),e.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(g,y),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var y=this.viewportTransform,v=this.clipPath;g.save(),g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),g.globalCompositeOperation="destination-in",v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},_renderObjects:function(g,y){var v,b;for(v=0,b=y.length;v<b;++v)y[v]&&y[v].render(g)},_renderBackgroundOrOverlay:function(g,y){var v=this[y+"Color"],b=this[y+"Image"],w=this.viewportTransform,x=this[y+"Vpt"];if(!(!v&&!b)){if(v){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=v.toLive?v.toLive(g,this):v,x&&g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),g.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var S=v.gradientTransform||v.patternTransform;S&&g.transform(S[0],S[1],S[2],S[3],S[4],S[5]),g.fill(),g.restore()}b&&(g.save(),x&&g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),b.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(g){return this._centerObject(g,new e.Point(this.getCenter().left,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new e.Point(g.getCenterPoint().x,this.getCenter().top))},centerObject:function(g){var y=this.getCenter();return this._centerObject(g,new e.Point(y.left,y.top))},viewportCenterObject:function(g){var y=this.getVpCenter();return this._centerObject(g,y)},viewportCenterObjectH:function(g){var y=this.getVpCenter();return this._centerObject(g,new e.Point(y.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var y=this.getVpCenter();return this._centerObject(g,new e.Point(g.getCenterPoint().x,y.y))},getVpCenter:function(){var g=this.getCenter(),y=f(this.viewportTransform);return c({x:g.left,y:g.top},y)},_centerObject:function(g,y){return g.setPositionByOrigin(y,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,y){var v=this.clipPath,b={version:e.version,objects:this._toObjects(g,y)};return v&&!v.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,g,y)),s(b,this.__serializeBgOverlay(g,y)),e.util.populateWithProperties(this,b,y),b},_toObjects:function(g,y){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,g,y)},this)},_toObject:function(g,y,v){var b;this.includeDefaultValues||(b=g.includeDefaultValues,g.includeDefaultValues=!1);var w=g[y](v);return this.includeDefaultValues||(g.includeDefaultValues=b),w},__serializeBgOverlay:function(g,y){var v={},b=this.backgroundImage,w=this.overlayImage,x=this.backgroundColor,S=this.overlayColor;return x&&x.toObject?x.excludeFromExport||(v.background=x.toObject(y)):x&&(v.background=x),S&&S.toObject?S.excludeFromExport||(v.overlay=S.toObject(y)):S&&(v.overlay=S),b&&!b.excludeFromExport&&(v.backgroundImage=this._toObject(b,g,y)),w&&!w.excludeFromExport&&(v.overlayImage=this._toObject(w,g,y)),v},svgViewportTransformation:!0,toSVG:function(g,y){g||(g={}),g.reviver=y;var v=[];return this._setSVGPreamble(v,g),this._setSVGHeader(v,g),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",y),this._setSVGObjects(v,y),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",y),v.push("</svg>"),v.join("")},_setSVGPreamble:function(g,y){y.suppressPreamble||g.push('<?xml version="1.0" encoding="',y.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,y){var v=y.width||this.width,b=y.height||this.height,w,x='viewBox="0 0 '+this.width+" "+this.height+'" ',S=e.Object.NUM_FRACTION_DIGITS;y.viewBox?x='viewBox="'+y.viewBox.x+" "+y.viewBox.y+" "+y.viewBox.width+" "+y.viewBox.height+'" ':this.svgViewportTransformation&&(w=this.viewportTransform,x='viewBox="'+h(-w[4]/w[0],S)+" "+h(-w[5]/w[3],S)+" "+h(this.width/w[0],S)+" "+h(this.height/w[3],S)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',b,'" ',x,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(y),`</defs>
`)},createSVGClipPathMarkup:function(g){var y=this.clipPath;return y?(y.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+y.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,y=["background","overlay"].map(function(v){var b=g[v+"Color"];if(b&&b.toLive){var w=g[v+"Vpt"],x=g.viewportTransform,S={width:g.width/(w?x[0]:1),height:g.height/(w?x[3]:1)};return b.toSVG(S,{additionalTransform:w?e.util.matrixToSVG(x):""})}});return y.join("")},createSVGFontFacesMarkup:function(){var g="",y={},v,b,w,x,S,E,A,k,T,O=e.fontPaths,F=[];for(this._objects.forEach(function R(U){F.push(U),U._objects&&U._objects.forEach(R)}),k=0,T=F.length;k<T;k++)if(v=F[k],b=v.fontFamily,!(v.type.indexOf("text")===-1||y[b]||!O[b])&&(y[b]=!0,!!v.styles)){w=v.styles;for(S in w){x=w[S];for(A in x)E=x[A],b=E.fontFamily,!y[b]&&O[b]&&(y[b]=!0)}}for(var I in y)g+=[`		@font-face {
`,"			font-family: '",I,`';
`,"			src: url('",O[I],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,y){var v,b,w,x=this._objects;for(b=0,w=x.length;b<w;b++)v=x[b],!v.excludeFromExport&&this._setSVGObject(g,v,y)},_setSVGObject:function(g,y,v){g.push(y.toSVG(v))},_setSVGBgOverlayImage:function(g,y,v){this[y]&&!this[y].excludeFromExport&&this[y].toSVG&&g.push(this[y].toSVG(v))},_setSVGBgOverlayColor:function(g,y){var v=this[y+"Color"],b=this.viewportTransform,w=this.width,x=this.height;if(v)if(v.toLive){var S=v.repeat,E=e.util.invertTransform(b),A=this[y+"Vpt"],k=A?e.util.matrixToSVG(E):"";g.push('<rect transform="'+k+" translate(",w/2,",",x/2,')"',' x="',v.offsetX-w/2,'" y="',v.offsetY-x/2,'" ','width="',S==="repeat-y"||S==="no-repeat"?v.source.width:w,'" height="',S==="repeat-x"||S==="no-repeat"?v.source.height:x,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var y=this._activeObject,v,b,w;if(g===y&&g.type==="activeSelection")for(w=y._objects,v=w.length;v--;)b=w[v],l(this._objects,b),this._objects.unshift(b);else l(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var y=this._activeObject,v,b,w;if(g===y&&g.type==="activeSelection")for(w=y._objects,v=0;v<w.length;v++)b=w[v],l(this._objects,b),this._objects.push(b);else l(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,y){if(!g)return this;var v=this._activeObject,b,w,x,S,E,A=0;if(g===v&&g.type==="activeSelection")for(E=v._objects,b=0;b<E.length;b++)w=E[b],x=this._objects.indexOf(w),x>0+A&&(S=x-1,l(this._objects,w),this._objects.splice(S,0,w)),A++;else x=this._objects.indexOf(g),x!==0&&(S=this._findNewLowerIndex(g,x,y),l(this._objects,g),this._objects.splice(S,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,y,v){var b,w;if(v)for(b=y,w=y-1;w>=0;--w){var x=g.intersectsWithObject(this._objects[w])||g.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(g);if(x){b=w;break}}else b=y-1;return b},bringForward:function(g,y){if(!g)return this;var v=this._activeObject,b,w,x,S,E,A=0;if(g===v&&g.type==="activeSelection")for(E=v._objects,b=E.length;b--;)w=E[b],x=this._objects.indexOf(w),x<this._objects.length-1-A&&(S=x+1,l(this._objects,w),this._objects.splice(S,0,w)),A++;else x=this._objects.indexOf(g),x!==this._objects.length-1&&(S=this._findNewUpperIndex(g,x,y),l(this._objects,g),this._objects.splice(S,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,y,v){var b,w,x;if(v)for(b=y,w=y+1,x=this._objects.length;w<x;++w){var S=g.intersectsWithObject(this._objects[w])||g.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(g);if(S){b=w;break}}else b=y+1;return b},moveTo:function(g,y){return l(this._objects,g),this._objects.splice(y,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),s(e.StaticCanvas.prototype,e.Observable),s(e.StaticCanvas.prototype,e.Collection),s(e.StaticCanvas.prototype,e.DataURLExporter),s(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var y=p();if(!y||!y.getContext)return null;var v=y.getContext("2d");if(!v)return null;switch(g){case"setLineDash":return typeof v.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var g=d(this.lowerCanvasEl);return g&&g.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(g){var y=d(this.lowerCanvasEl);return y&&y.createJPEGStream(g)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var s=this.canvas.contextTop;s.strokeStyle=this.color,s.lineWidth=this.width,s.lineCap=this.strokeLineCap,s.miterLimit=this.strokeMiterLimit,s.lineJoin=this.strokeLineJoin,s.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(s){var u=this.canvas.viewportTransform;s.save(),s.transform(u[0],u[1],u[2],u[3],u[4],u[5])},_setShadow:function(){if(this.shadow){var s=this.canvas,u=this.shadow,l=s.contextTop,h=s.getZoom();s&&s._isRetinaScaling()&&(h*=e.devicePixelRatio),l.shadowColor=u.color,l.shadowBlur=u.blur*h,l.shadowOffsetX=u.offsetX*h,l.shadowOffsetY=u.offsetY*h}},needsFullRender:function(){var s=new e.Color(this.color);return s.getAlpha()<1||!!this.shadow},_resetShadow:function(){var s=this.canvas.contextTop;s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0},_isOutSideCanvas:function(s){return s.x<0||s.x>this.canvas.getWidth()||s.y<0||s.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,initialize:function(s){this.canvas=s,this._points=[]},_drawSegment:function(s,u,l){var h=u.midPointFrom(l);return s.quadraticCurveTo(u.x,u.y,h.x,h.y),h},onMouseDown:function(s,u){this.canvas._isMainEvent(u.e)&&(this._prepareForDrawing(s),this._captureDrawingPath(s),this._render())},onMouseMove:function(s,u){if(this.canvas._isMainEvent(u.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(s))&&this._captureDrawingPath(s)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var l=this._points,h=l.length,c=this.canvas.contextTop;this._saveAndTransform(c),this.oldEnd&&(c.beginPath(),c.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(c,l[h-2],l[h-1],!0),c.stroke(),c.restore()}},onMouseUp:function(s){return this.canvas._isMainEvent(s.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(s){var u=new e.Point(s.x,s.y);this._reset(),this._addPoint(u),this.canvas.contextTop.moveTo(u.x,u.y)},_addPoint:function(s){return this._points.length>1&&s.eq(this._points[this._points.length-1])?!1:(this._points.push(s),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(s){var u=new e.Point(s.x,s.y);return this._addPoint(u)},_render:function(){var s=this.canvas.contextTop,u,l,h=this._points[0],c=this._points[1];if(this._saveAndTransform(s),s.beginPath(),this._points.length===2&&h.x===c.x&&h.y===c.y){var f=this.width/1e3;h=new e.Point(h.x,h.y),c=new e.Point(c.x,c.y),h.x-=f,c.x+=f}for(s.moveTo(h.x,h.y),u=1,l=this._points.length;u<l;u++)this._drawSegment(s,h,c),h=this._points[u],c=this._points[u+1];s.lineTo(h.x,h.y),s.stroke(),s.restore()},convertPointsToSVGPath:function(s){var u=this.width/1e3;return e.util.getSmoothPathFromPoints(s,u)},_isEmptySVGPath:function(s){var u=e.util.joinPath(s);return u==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(s){var u=new e.Path(s,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,u.shadow=new e.Shadow(this.shadow)),u},decimatePoints:function(s,u){if(s.length<=2)return s;var l=this.canvas.getZoom(),h=Math.pow(u/l,2),c,f=s.length-1,d=s[0],p=[d],m;for(c=1;c<f-1;c++)m=Math.pow(d.x-s[c].x,2)+Math.pow(d.y-s[c].y,2),m>=h&&(d=s[c],p.push(d));return p.push(s[f]),p},_finalizeAndAddPath:function(){var s=this.canvas.contextTop;s.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var u=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(u)){this.canvas.requestRenderAll();return}var l=this.createPath(u);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.requestRenderAll(),l.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:l})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(s){this.canvas=s,this.points=[]},drawDot:function(s){var u=this.addPoint(s),l=this.canvas.contextTop;this._saveAndTransform(l),this.dot(l,u),l.restore()},dot:function(s,u){s.fillStyle=u.fill,s.beginPath(),s.arc(u.x,u.y,u.radius,0,Math.PI*2,!1),s.closePath(),s.fill()},onMouseDown:function(s){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(s)},_render:function(){var s=this.canvas.contextTop,u,l,h=this.points;for(this._saveAndTransform(s),u=0,l=h.length;u<l;u++)this.dot(s,h[u]);s.restore()},onMouseMove:function(s){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(s)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(s),this._render()):this.drawDot(s))},onMouseUp:function(){var s=this.canvas.renderOnAddRemove,u,l;this.canvas.renderOnAddRemove=!1;var h=[];for(u=0,l=this.points.length;u<l;u++){var c=this.points[u],f=new e.Circle({radius:c.radius,left:c.x,top:c.y,originX:"center",originY:"center",fill:c.fill});this.shadow&&(f.shadow=new e.Shadow(this.shadow)),h.push(f)}var d=new e.Group(h);d.canvas=this.canvas,this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=s,this.canvas.requestRenderAll()},addPoint:function(s){var u=new e.Point(s.x,s.y),l=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return u.radius=l,u.fill=h,this.points.push(u),u}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(s){this.canvas=s,this.sprayChunks=[]},onMouseDown:function(s){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(s),this.render(this.sprayChunkPoints)},onMouseMove:function(s){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(s)||(this.addSprayChunk(s),this.render(this.sprayChunkPoints))},onMouseUp:function(){var s=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var u=[],l=0,h=this.sprayChunks.length;l<h;l++)for(var c=this.sprayChunks[l],f=0,d=c.length;f<d;f++){var p=new e.Rect({width:c[f].width,height:c[f].width,left:c[f].x+1,top:c[f].y+1,originX:"center",originY:"center",fill:this.color});u.push(p)}this.optimizeOverlapping&&(u=this._getOptimizedRects(u));var m=new e.Group(u);this.shadow&&m.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=s,this.canvas.requestRenderAll()},_getOptimizedRects:function(s){var u={},l,h,c;for(h=0,c=s.length;h<c;h++)l=s[h].left+""+s[h].top,u[l]||(u[l]=s[h]);var f=[];for(l in u)f.push(u[l]);return f},render:function(s){var u=this.canvas.contextTop,l,h;for(u.fillStyle=this.color,this._saveAndTransform(u),l=0,h=s.length;l<h;l++){var c=s[l];typeof c.opacity<"u"&&(u.globalAlpha=c.opacity),u.fillRect(c.x,c.y,c.width,c.width)}u.restore()},_render:function(){var s=this.canvas.contextTop,u,l;for(s.fillStyle=this.color,this._saveAndTransform(s),u=0,l=this.sprayChunks.length;u<l;u++)this.render(this.sprayChunks[u]);s.restore()},addSprayChunk:function(s){this.sprayChunkPoints=[];var u,l,h,c=this.width/2,f;for(f=0;f<this.density;f++){u=e.util.getRandomInt(s.x-c,s.x+c),l=e.util.getRandomInt(s.y-c,s.y+c),this.dotWidthVariance?h=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var d=new e.Point(u,l);d.width=h,this.randomOpacity&&(d.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(d)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var s=20,u=5,l=e.util.createCanvasElement(),h=l.getContext("2d");return l.width=l.height=s+u,h.fillStyle=this.color,h.beginPath(),h.arc(s/2,s/2,s/2,0,Math.PI*2,!1),h.closePath(),h.fill(),l},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(s){var u=this.callSuper("createPath",s),l=u._getLeftTopCoords().scalarAdd(u.strokeWidth/2);return u.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-l.x,offsetY:-l.y}),u}}),function(){var s=e.util.getPointer,u=e.util.degreesToRadians,l=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(c,f){f||(f={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(c,f),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var c=this.getActiveObjects(),f,d,p;if(c.length>0&&!this.preserveObjectStacking){d=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)f=this._objects[m],c.indexOf(f)===-1?d.push(f):p.push(f);c.length>1&&(this._activeObject._objects=p),d.push.apply(d,p)}else d=this._objects;return d},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var c=this.contextContainer;return this.renderCanvas(c,this._chooseObjectsToRender()),this},renderTopLayer:function(c){c.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(c),this.contextTopDirty=!0),c.restore()},renderTop:function(){var c=this.contextTop;return this.clearContext(c),this.renderTopLayer(c),this.fire("after:render"),this},_normalizePointer:function(c,f){var d=c.calcTransformMatrix(),p=e.util.invertTransform(d),m=this.restorePointerVpt(f);return e.util.transformPoint(m,p)},isTargetTransparent:function(c,f,d){if(c.shouldCache()&&c._cacheCanvas&&c!==this._activeObject){var p=this._normalizePointer(c,{x:f,y:d}),m=Math.max(c.cacheTranslationX+p.x*c.zoomX,0),g=Math.max(c.cacheTranslationY+p.y*c.zoomY,0),w=e.util.isTransparent(c._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return w}var y=this.contextCache,v=c.selectionBackgroundColor,b=this.viewportTransform;c.selectionBackgroundColor="",this.clearContext(y),y.save(),y.transform(b[0],b[1],b[2],b[3],b[4],b[5]),c.render(y),y.restore(),c.selectionBackgroundColor=v;var w=e.util.isTransparent(y,f,d,this.targetFindTolerance);return w},_isSelectionKeyPressed:function(c){var f=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?f=!!this.selectionKey.find(function(d){return c[d]===!0}):f=c[this.selectionKey],f},_shouldClearSelection:function(c,f){var d=this.getActiveObjects(),p=this._activeObject;return!f||f&&p&&d.length>1&&d.indexOf(f)===-1&&p!==f&&!this._isSelectionKeyPressed(c)||f&&!f.evented||f&&!f.selectable&&p&&p!==f},_shouldCenterTransform:function(c,f,d){if(c){var p;return f==="scale"||f==="scaleX"||f==="scaleY"||f==="resizing"?p=this.centeredScaling||c.centeredScaling:f==="rotate"&&(p=this.centeredRotation||c.centeredRotation),p?!d:d}},_getOriginFromCorner:function(c,f){var d={x:c.originX,y:c.originY};return f==="ml"||f==="tl"||f==="bl"?d.x="right":(f==="mr"||f==="tr"||f==="br")&&(d.x="left"),f==="tl"||f==="mt"||f==="tr"?d.y="bottom":(f==="bl"||f==="mb"||f==="br")&&(d.y="top"),d},_getActionFromCorner:function(c,f,d,p){if(!f||!c)return"drag";var m=p.controls[f];return m.getActionName(d,m,p)},_setupCurrentTransform:function(c,f,d){if(f){var p=this.getPointer(c),m=f.__corner,g=f.controls[m],y=d&&m?g.getActionHandler(c,f,g):e.controlsUtils.dragHandler,v=this._getActionFromCorner(d,m,c,f),b=this._getOriginFromCorner(f,m),w=c[this.centeredKey],x={target:f,action:v,actionHandler:y,corner:m,scaleX:f.scaleX,scaleY:f.scaleY,skewX:f.skewX,skewY:f.skewY,offsetX:p.x-f.left,offsetY:p.y-f.top,originX:b.x,originY:b.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:u(f.angle),width:f.width*f.scaleX,shiftKey:c.shiftKey,altKey:w,original:e.util.saveObjectTransform(f)};this._shouldCenterTransform(f,v,w)&&(x.originX="center",x.originY="center"),x.original.originX=b.x,x.original.originY=b.y,this._currentTransform=x,this._beforeTransform(c)}},setCursor:function(c){this.upperCanvasEl.style.cursor=c},_drawSelection:function(c){var f=this._groupSelector,d=new e.Point(f.ex,f.ey),p=e.util.transformPoint(d,this.viewportTransform),m=new e.Point(f.ex+f.left,f.ey+f.top),g=e.util.transformPoint(m,this.viewportTransform),y=Math.min(p.x,g.x),v=Math.min(p.y,g.y),b=Math.max(p.x,g.x),w=Math.max(p.y,g.y),x=this.selectionLineWidth/2;this.selectionColor&&(c.fillStyle=this.selectionColor,c.fillRect(y,v,b-y,w-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(c.lineWidth=this.selectionLineWidth,c.strokeStyle=this.selectionBorderColor,y+=x,v+=x,b-=x,w-=x,e.Object.prototype._setLineDash.call(this,c,this.selectionDashArray),c.strokeRect(y,v,b-y,w-v))},findTarget:function(c,f){if(!this.skipTargetFind){var d=!0,p=this.getPointer(c,d),m=this._activeObject,g=this.getActiveObjects(),y,v,b=l(c),w=g.length>1&&!f||g.length===1;if(this.targets=[],w&&m._findTargetCorner(p,b)||g.length>1&&!f&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)y=m,v=this.targets,this.targets=[];else return m;var x=this._searchPossibleTargets(this._objects,p);return c[this.altSelectionKey]&&x&&y&&x!==y&&(x=y,this.targets=v),x}},_checkTarget:function(c,f,d){if(f&&f.visible&&f.evented&&f.containsPoint(c))if((this.perPixelTargetFind||f.perPixelTargetFind)&&!f.isEditing){var p=this.isTargetTransparent(f,d.x,d.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(c,f){for(var d,p=c.length,m;p--;){var g=c[p],y=g.group?this._normalizePointer(g.group,f):f;if(this._checkTarget(y,g,f)){d=c[p],d.subTargetCheck&&d instanceof e.Group&&(m=this._searchPossibleTargets(d._objects,f),m&&this.targets.push(m));break}}return d},restorePointerVpt:function(c){return e.util.transformPoint(c,e.util.invertTransform(this.viewportTransform))},getPointer:function(c,f){if(this._absolutePointer&&!f)return this._absolutePointer;if(this._pointer&&f)return this._pointer;var d=s(c),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,y=m.height||0,v;(!g||!y)&&("top"in m&&"bottom"in m&&(y=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),d.x=d.x-this._offset.left,d.y=d.y-this._offset.top,f||(d=this.restorePointerVpt(d));var b=this.getRetinaScaling();return b!==1&&(d.x/=b,d.y/=b),g===0||y===0?v={width:1,height:1}:v={width:p.width/g,height:p.height/y},{x:d.x*v.width,y:d.y*v.height}},_createUpperCanvas:function(){var c=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),f=this.lowerCanvasEl,d=this.upperCanvasEl;d?d.className="":(d=this._createCanvasElement(),this.upperCanvasEl=d),e.util.addClass(d,"upper-canvas "+c),this.wrapperEl.appendChild(d),this._copyCanvasStyle(f,d),this._applyCanvasStyle(d),this.contextTop=d.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(c){var f=this.width||c.width,d=this.height||c.height;e.util.setStyle(c,{position:"absolute",width:f+"px",height:d+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),c.width=f,c.height=d,e.util.makeElementUnselectable(c)},_copyCanvasStyle:function(c,f){f.style.cssText=c.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var c=this._activeObject;return c?c.type==="activeSelection"&&c._objects?c._objects.slice(0):[c]:[]},_onObjectRemoved:function(c){c===this._activeObject&&(this.fire("before:selection:cleared",{target:c}),this._discardActiveObject(),this.fire("selection:cleared",{target:c}),c.fire("deselected")),c===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",c)},_fireSelectionEvents:function(c,f){var d=!1,p=this.getActiveObjects(),m=[],g=[];c.forEach(function(y){p.indexOf(y)===-1&&(d=!0,y.fire("deselected",{e:f,target:y}),g.push(y))}),p.forEach(function(y){c.indexOf(y)===-1&&(d=!0,y.fire("selected",{e:f,target:y}),m.push(y))}),c.length>0&&p.length>0?d&&this.fire("selection:updated",{e:f,selected:m,deselected:g,updated:m[0]||g[0],target:this._activeObject}):p.length>0?this.fire("selection:created",{e:f,selected:m,target:this._activeObject}):c.length>0&&this.fire("selection:cleared",{e:f,deselected:g})},setActiveObject:function(c,f){var d=this.getActiveObjects();return this._setActiveObject(c,f),this._fireSelectionEvents(d,f),this},_setActiveObject:function(c,f){return this._activeObject===c||!this._discardActiveObject(f,c)||c.onSelect({e:f})?!1:(this._activeObject=c,!0)},_discardActiveObject:function(c,f){var d=this._activeObject;if(d){if(d.onDeselect({e:c,object:f}))return!1;this._activeObject=null}return!0},discardActiveObject:function(c){var f=this.getActiveObjects(),d=this.getActiveObject();return f.length&&this.fire("before:selection:cleared",{target:d,e:c}),this._discardActiveObject(c),this._fireSelectionEvents(f,c),this},dispose:function(){var c=this.wrapperEl;return this.removeListeners(),c.removeChild(this.upperCanvasEl),c.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(f){e.util.cleanUpJsdomNode(this[f]),this[f]=void 0}).bind(this)),c.parentNode&&c.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(c){var f=this._activeObject;f&&f._renderControls(c)},_toObject:function(c,f,d){var p=this._realizeGroupTransformOnObject(c),m=this.callSuper("_toObject",c,f,d);return this._unwindGroupTransformOnObject(c,p),m},_realizeGroupTransformOnObject:function(c){if(c.group&&c.group.type==="activeSelection"&&this._activeObject===c.group){var f=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],d={};return f.forEach(function(p){d[p]=c[p]}),e.util.addTransformToObject(c,this._activeObject.calcOwnMatrix()),d}else return null},_unwindGroupTransformOnObject:function(c,f){f&&c.set(f)},_setSVGObject:function(c,f,d){var p=this._realizeGroupTransformOnObject(f);this.callSuper("_setSVGObject",c,f,d),this._unwindGroupTransformOnObject(f,p)},setViewportTransform:function(c){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,c)}});for(var h in e.StaticCanvas)h!=="prototype"&&(e.Canvas[h]=e.StaticCanvas[h])}(),function(){var s=e.util.addListener,u=e.util.removeListener,l=3,h=2,c=1,f={passive:!1};function d(p,m){return p.button&&p.button===m-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(s,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,y=this._getEventPrefix();p(e.window,"resize",this._onResize),p(g,y+"down",this._onMouseDown),p(g,y+"move",this._onMouseMove,f),p(g,y+"out",this._onMouseOut),p(g,y+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,f),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(u,"remove");var p=this._getEventPrefix();u(e.document,p+"up",this._onMouseUp),u(e.document,"touchend",this._onTouchEnd,f),u(e.document,p+"move",this._onMouseMove,f),u(e.document,"touchmove",this._onMouseMove,f)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(y){g.fire("mouse:out",{target:m,e:p}),y&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(y){y.isEditing&&y.hiddenTextarea.focus()})},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,f),s(e.document,"touchmove",this._onMouseMove,f),u(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();u(m,g+"move",this._onMouseMove,f),s(e.document,g+"up",this._onMouseUp),s(e.document,g+"move",this._onMouseMove,f)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();u(e.document,"touchend",this._onTouchEnd,f),u(e.document,"touchmove",this._onMouseMove,f);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){s(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(u(e.document,g+"up",this._onMouseUp),u(e.document,g+"move",this._onMouseMove,f),s(m,g+"move",this._onMouseMove,f))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,y=this._groupSelector,v=!1,b=!y||y.left===0&&y.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),d(p,l)){this.fireRightClick&&this._handleEvent(p,"up",l,b);return}if(d(p,h)){this.fireMiddleClick&&this._handleEvent(p,"up",h,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),v=g.actionPerformed),!b){var w=m===this._activeObject;this._maybeGroupObjects(p),v||(v=this._shouldRender(m)||!w&&m===this._activeObject)}if(m){if(m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),v=!0;else{var x=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p)),S=m.controls[x],E=S&&S.getMouseUpHandler(p,m,S);if(E){var A=this.getPointer(p);E(p,g,A.x,A.y)}}m.isMoving=!1}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",c,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),v?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),y=this.targets,v={e:m,target:g,subTargets:y};if(this.fire(p,v),g&&g.fire(p,v),!y)return g;for(var b=0;b<y.length;b++)y[b].fire(p,v);return g},_handleEvent:function(p,m,g,y){var v=this._target,b=this.targets||[],w={e:p,target:v,subTargets:b,button:g||c,isClick:y||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(w.currentTarget=this.findTarget(p),w.currentSubTargets=this.targets),this.fire("mouse:"+m,w),v&&v.fire("mouse"+m,w);for(var x=0;x<b.length;x++)b[x].fire("mouse"+m,w)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,y,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&(m.actionPerformed&&(y=this._addEventOptions(v,m),this._fire(y,v)),this._fire("modified",v))},_addEventOptions:function(p,m){var g,y;switch(m.action){case"scaleX":g="scaled",y="x";break;case"scaleY":g="scaled",y="y";break;case"skewX":g="skewed",y="x";break;case"skewY":g="skewed",y="y";break;case"scale":g="scaled",y="equally";break;case"rotate":g="rotated";break;case"drag":g="moved";break}return p.by=y,g},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(d(p,l)){this.fireRightClick&&this._handleEvent(p,"down",l);return}if(d(p,h)){this.fireMiddleClick&&this._handleEvent(p,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var y=this._shouldRender(m),v=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):v&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var w=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p));if(m.__corner=w,m===this._activeObject&&(w||!v)){this._setupCurrentTransform(p,m,b);var x=m.controls[w],g=this.getPointer(p),S=x&&x.getMouseDownHandler(p,m,x);S&&S(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(y||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var y=this._groupSelector;y?(g=this._absolutePointer,y.left=g.x-y.ex,y.top=g.y-y.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,y=this._hoveredTargets,v=this.targets,b=Math.max(y.length,v.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var w=0;w<b;w++)this.fireSyntheticInOutEvents(v[w],m,{oldTarget:y[w],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,y=this._hoveredTargets,v=this.targets,b=Math.max(y.length,v.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var w=0;w<b;w++)this.fireSyntheticInOutEvents(v[w],m,{oldTarget:y[w],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var y,v,b=g.oldTarget,w,x,S=b!==p,E=g.canvasEvtIn,A=g.canvasEvtOut;S&&(y={e:m,target:p,previousTarget:b},v={e:m,target:b,nextTarget:p}),x=p&&S,w=b&&S,w&&(A&&this.fire(A,v),b.fire(g.evtOut,v)),x&&(E&&this.fire(E,y),p.fire(g.evtIn,y))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var y=g.x,v=g.y,b=m.action,w=!1,x=m.actionHandler;x&&(w=x(p,m,y,v)),b==="drag"&&w&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||w},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,y=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!y||!y.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));v?this.setCursor(this.getCornerCursor(v,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){g=b.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var y=m.controls[p];return y.cursorStyleHandler(g,y,m)}})}(),function(){var s=Math.min,u=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(l,h){var c=this._activeObject;return c&&this._isSelectionKeyPressed(l)&&h&&h.selectable&&this.selection&&(c!==h||c.type==="activeSelection")&&!h.onSelect({e:l})},_handleGrouping:function(l,h){var c=this._activeObject;c.__corner||h===c&&(h=this.findTarget(l,!0),!h||!h.selectable)||(c&&c.type==="activeSelection"?this._updateActiveSelection(h,l):this._createActiveSelection(h,l))},_updateActiveSelection:function(l,h){var c=this._activeObject,f=c._objects.slice(0);c.contains(l)?(c.removeWithUpdate(l),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat(),c.size()===1&&this._setActiveObject(c.item(0),h)):(c.addWithUpdate(l),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(f,h)},_createActiveSelection:function(l,h){var c=this.getActiveObjects(),f=this._createGroup(l);this._hoveredTarget=f,this._setActiveObject(f,h),this._fireSelectionEvents(c,h)},_createGroup:function(l){var h=this._objects,c=h.indexOf(this._activeObject)<h.indexOf(l),f=c?[this._activeObject,l]:[l,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(f,{canvas:this})},_groupSelectedObjects:function(l){var h=this._collectObjects(l),c;h.length===1?this.setActiveObject(h[0],l):h.length>1&&(c=new e.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(c,l))},_collectObjects:function(l){for(var h=[],c,f=this._groupSelector.ex,d=this._groupSelector.ey,p=f+this._groupSelector.left,m=d+this._groupSelector.top,g=new e.Point(s(f,p),s(d,m)),y=new e.Point(u(f,p),u(d,m)),v=!this.selectionFullyContained,b=f===p&&d===m,w=this._objects.length;w--&&(c=this._objects[w],!(!(!c||!c.selectable||!c.visible)&&(v&&c.intersectsWithRect(g,y,!0)||c.isContainedWithinRect(g,y,!0)||v&&c.containsPoint(g,null,!0)||v&&c.containsPoint(y,null,!0))&&(h.push(c),b))););return h.length>1&&(h=h.filter(function(x){return!x.onSelect({e:l})})),h},_maybeGroupObjects:function(l){this.selection&&this._groupSelector&&this._groupSelectedObjects(l),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(s){s||(s={});var u=s.format||"png",l=s.quality||1,h=(s.multiplier||1)*(s.enableRetinaScaling?this.getRetinaScaling():1),c=this.toCanvasElement(h,s);return e.util.toDataURL(c,u,l)},toCanvasElement:function(s,u){s=s||1,u=u||{};var l=(u.width||this.width)*s,h=(u.height||this.height)*s,c=this.getZoom(),f=this.width,d=this.height,p=c*s,m=this.viewportTransform,g=(m[4]-(u.left||0))*s,y=(m[5]-(u.top||0))*s,v=this.interactive,b=[p,0,0,p,g,y],w=this.enableRetinaScaling,x=e.util.createCanvasElement(),S=this.contextTop;return x.width=l,x.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=l,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),this._objects),this.viewportTransform=m,this.width=f,this.height=d,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=w,this.contextTop=S,x}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(s,u,l){if(s){var h=typeof s=="string"?JSON.parse(s):e.util.object.clone(s),c=this,f=h.clipPath,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(p){c.clear(),c._setBgOverlay(h,function(){f?c._enlivenObjects([f],function(m){c.clipPath=m[0],c.__setupCanvas.call(c,h,p,d,u)}):c.__setupCanvas.call(c,h,p,d,u)})},l),this}},__setupCanvas:function(s,u,l,h){var c=this;u.forEach(function(f,d){c.insertAt(f,d)}),this.renderOnAddRemove=l,delete s.objects,delete s.backgroundImage,delete s.overlayImage,delete s.background,delete s.overlay,this._setOptions(s),this.renderAll(),h&&h()},_setBgOverlay:function(s,u){var l={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!s.backgroundImage&&!s.overlayImage&&!s.background&&!s.overlay){u&&u();return}var h=function(){l.backgroundImage&&l.overlayImage&&l.backgroundColor&&l.overlayColor&&u&&u()};this.__setBgOverlay("backgroundImage",s.backgroundImage,l,h),this.__setBgOverlay("overlayImage",s.overlayImage,l,h),this.__setBgOverlay("backgroundColor",s.background,l,h),this.__setBgOverlay("overlayColor",s.overlay,l,h)},__setBgOverlay:function(s,u,l,h){var c=this;if(!u){l[s]=!0,h&&h();return}s==="backgroundImage"||s==="overlayImage"?e.util.enlivenObjects([u],function(f){c[s]=f[0],l[s]=!0,h&&h()}):this["set"+e.util.string.capitalize(s,!0)](u,function(){l[s]=!0,h&&h()})},_enlivenObjects:function(s,u,l){if(!s||s.length===0){u&&u([]);return}e.util.enlivenObjects(s,function(h){u&&u(h)},null,l)},_toDataURL:function(s,u){this.clone(function(l){u(l.toDataURL(s))})},_toDataURLWithMultiplier:function(s,u,l){this.clone(function(h){l(h.toDataURLWithMultiplier(s,u))})},clone:function(s,u){var l=JSON.stringify(this.toJSON(u));this.cloneWithoutData(function(h){h.loadFromJSON(l,function(){s&&s(h)})})},cloneWithoutData:function(s){var u=e.util.createCanvasElement();u.width=this.width,u.height=this.height;var l=new e.Canvas(u);this.backgroundImage?(l.setBackgroundImage(this.backgroundImage.src,function(){l.renderAll(),s&&s(l)}),l.backgroundImageOpacity=this.backgroundImageOpacity,l.backgroundImageStretch=this.backgroundImageStretch):s&&s(l)}}),function(s){var u=s.fabric||(s.fabric={}),l=u.util.object.extend,h=u.util.object.clone,c=u.util.toFixed,f=u.util.string.capitalize,d=u.util.degreesToRadians,p=!u.isLikelyNode,m=2;u.Object||(u.Object=u.util.createClass(u.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=u.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var y=u.perfLimitSizeTotal,v=g.width,b=g.height,w=u.maxCacheSideLimit,x=u.minCacheSideLimit;if(v<=w&&b<=w&&v*b<=y)return v<x&&(g.width=x),b<x&&(g.height=x),g;var S=v/b,E=u.util.limitDimsByArea(S,y),A=u.util.capValue,k=A(x,E.x,w),T=A(x,E.y,w);return v>k&&(g.zoomX/=v/k,g.width=k,g.capped=!0),b>T&&(g.zoomY/=b/T,g.height=T,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),y=this._getTransformedDimensions(0,0),v=y.x*g.scaleX/this.scaleX,b=y.y*g.scaleY/this.scaleY;return{width:v+m,height:b+m,zoomX:g.scaleX,zoomY:g.scaleY,x:v,y:b}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var y=g._currentTransform.target,v=g._currentTransform.action;if(this===y&&v.slice&&v.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,w=this._limitCacheSize(this._getCacheCanvasDimensions()),x=u.minCacheSideLimit,S=w.width,E=w.height,A,k,T=w.zoomX,O=w.zoomY,F=S!==this.cacheWidth||E!==this.cacheHeight,I=this.zoomX!==T||this.zoomY!==O,R=F||I,U=0,B=0,W=!1;if(F){var Y=this._cacheCanvas.width,z=this._cacheCanvas.height,j=S>Y||E>z,M=(S<Y*.9||E<z*.9)&&Y>x&&z>x;W=j||M,j&&!w.capped&&(S>x||E>x)&&(U=S*.1,B=E*.1)}return this instanceof u.Text&&this.path&&(R=!0,W=!0,U+=this.getHeightOfLine(0)*this.zoomX,B+=this.getHeightOfLine(0)*this.zoomY),R?(W?(b.width=Math.ceil(S+U),b.height=Math.ceil(E+B)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),A=w.x/2,k=w.y/2,this.cacheTranslationX=Math.round(b.width/2-A)+A,this.cacheTranslationY=Math.round(b.height/2-k)+k,this.cacheWidth=S,this.cacheHeight=E,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(T,O),this.zoomX=T,this.zoomY=O,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var y=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,v=this.calcTransformMatrix(!y);g.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(g){var y=u.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:u.version,originX:this.originX,originY:this.originY,left:c(this.left,y),top:c(this.top,y),width:c(this.width,y),height:c(this.height,y),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:c(this.strokeWidth,y),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:c(this.strokeMiterLimit,y),scaleX:c(this.scaleX,y),scaleY:c(this.scaleY,y),angle:c(this.angle,y),flipX:this.flipX,flipY:this.flipY,opacity:c(this.opacity,y),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:c(this.skewX,y),skewY:c(this.skewY,y)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(g),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),u.util.populateWithProperties(this,v,g),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var y=u.util.getKlass(g.type).prototype,v=y.stateProperties;return v.forEach(function(b){if(!(b==="left"||b==="top")){g[b]===y[b]&&delete g[b];var w=Object.prototype.toString.call(g[b])==="[object Array]"&&Object.prototype.toString.call(y[b])==="[object Array]";w&&g[b].length===0&&y[b].length===0&&delete g[b]}}),g},toString:function(){return"#<fabric."+f(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=u.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),y=g.scaleX,v=g.scaleY;if(this.canvas){var b=this.canvas.getZoom(),w=this.canvas.getRetinaScaling();y*=b*w,v*=b*w}return{scaleX:y,scaleY:v}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,y){var v=g==="scaleX"||g==="scaleY",b=this[g]!==y,w=!1;return v&&(y=this._constrainScale(y)),g==="scaleX"&&y<0?(this.flipX=!this.flipX,y*=-1):g==="scaleY"&&y<0?(this.flipY=!this.flipY,y*=-1):g==="shadow"&&y&&!(y instanceof u.Shadow)?y=new u.Shadow(y):g==="dirty"&&this.group&&this.group.set("dirty",y),this[g]=y,b&&(w=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,w&&this.group.set("dirty",!0)):w&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:u.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g){var y=this.clipPath;if(g.save(),y.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",y.absolutePositioned){var v=u.util.invertTransform(this.calcTransformMatrix());g.transform(v[0],v[1],v[2],v[3],v[4],v[5])}y.transform(g),g.scale(1/y.zoomX,1/y.zoomY),g.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),g.restore()},drawObject:function(g,y){var v=this.fill,b=this.stroke;y?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g),this.fill=v,this.stroke=b},_drawClipPath:function(g){var y=this.clipPath;y&&(y.canvas=this.canvas,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCache(g))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!g){var y=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-y/2,-v/2,y,v)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var y=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-y.x/2,-y.y/2,y.x,y.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,y){var v=y.stroke;v&&(g.lineWidth=y.strokeWidth,g.lineCap=y.strokeLineCap,g.lineDashOffset=y.strokeDashOffset,g.lineJoin=y.strokeLineJoin,g.miterLimit=y.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(g,v):(g.strokeStyle=v.toLive(g,this),this._applyPatternGradientTransform(g,v)):g.strokeStyle=y.stroke)},_setFillStyles:function(g,y){var v=y.fill;v&&(v.toLive?(g.fillStyle=v.toLive(g,this),this._applyPatternGradientTransform(g,y.fill)):g.fillStyle=v)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,y){!y||y.length===0||(1&y.length&&y.push.apply(y,y),g.setLineDash(y))},_renderControls:function(g,y){var v=this.getViewportTransform(),b=this.calcTransformMatrix(),w,x,S;y=y||{},x=typeof y.hasBorders<"u"?y.hasBorders:this.hasBorders,S=typeof y.hasControls<"u"?y.hasControls:this.hasControls,b=u.util.multiplyTransformMatrices(v,b),w=u.util.qrDecompose(b),g.save(),g.translate(w.translateX,w.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),g.rotate(d(w.angle)),y.forActiveSelection||this.group?x&&this.drawBordersInGroup(g,w,y):x&&this.drawBorders(g,y),S&&this.drawControls(g,y),g.restore()},_setShadow:function(g){if(this.shadow){var y=this.shadow,v=this.canvas,b,w=v&&v.viewportTransform[0]||1,x=v&&v.viewportTransform[3]||1;y.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),v&&v._isRetinaScaling()&&(w*=u.devicePixelRatio,x*=u.devicePixelRatio),g.shadowColor=y.color,g.shadowBlur=y.blur*u.browserShadowBlurConstant*(w+x)*(b.scaleX+b.scaleY)/4,g.shadowOffsetX=y.offsetX*w*b.scaleX,g.shadowOffsetY=y.offsetY*x*b.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,y){if(!y||!y.toLive)return{offsetX:0,offsetY:0};var v=y.gradientTransform||y.patternTransform,b=-this.width/2+y.offsetX||0,w=-this.height/2+y.offsetY||0;return y.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,b,w):g.transform(1,0,0,1,b,w),v&&g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:b,offsetY:w}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var y=this.getObjectScaling();g.scale(1/y.scaleX,1/y.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,y){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),b=u.util.createCanvasElement(),w,x=this.canvas.getRetinaScaling(),S=v.x/this.scaleX/x,E=v.y/this.scaleY/x;b.width=S,b.height=E,w=b.getContext("2d"),w.beginPath(),w.moveTo(0,0),w.lineTo(S,0),w.lineTo(S,E),w.lineTo(0,E),w.closePath(),w.translate(S/2,E/2),w.scale(v.zoomX/this.scaleX/x,v.zoomY/this.scaleY/x),this._applyPatternGradientTransform(w,y),w.fillStyle=y.toLive(g),w.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(x*this.scaleX/v.zoomX,x*this.scaleY/v.zoomY),g.strokeStyle=w.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=u.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var y=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),y=u.util.transformPoint(y,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,y.x+=g.offsetLeft,y.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(y,"center","center")},clone:function(g,y){var v=this.toObject(y);this.constructor.fromObject?this.constructor.fromObject(v,g):u.Object._fromObject("Object",v,g)},cloneAsImage:function(g,y){var v=this.toCanvasElement(y);return g&&g(new u.Image(v)),this},toCanvasElement:function(g){g||(g={});var y=u.util,v=y.saveObjectTransform(this),b=this.group,w=this.shadow,x=Math.abs,S=(g.multiplier||1)*(g.enableRetinaScaling?u.devicePixelRatio:1);delete this.group,g.withoutTransform&&y.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var E=u.util.createCanvasElement(),A=this.getBoundingRect(!0,!0),k=this.shadow,T,O={x:0,y:0},F,I,R;k&&(F=k.blur,k.nonScaling?T={scaleX:1,scaleY:1}:T=this.getObjectScaling(),O.x=2*Math.round(x(k.offsetX)+F)*x(T.scaleX),O.y=2*Math.round(x(k.offsetY)+F)*x(T.scaleY)),I=A.width+O.x,R=A.height+O.y,E.width=Math.ceil(I),E.height=Math.ceil(R);var U=new u.StaticCanvas(E,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(U.backgroundColor="#fff"),this.setPositionByOrigin(new u.Point(U.width/2,U.height/2),"center","center");var B=this.canvas;U.add(this);var W=U.toCanvasElement(S||1,g);return this.shadow=w,this.set("canvas",B),b&&(this.group=b),this.set(v).setCoords(),U._objects=[],U.dispose(),U=null,W},toDataURL:function(g){return g||(g={}),u.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var y=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return y&&this._setOriginToCenter(),this.set("angle",g),y&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,y){y=y||this.canvas.getPointer(g);var v=new u.Point(y.x,y.y),b=this._getLeftTopCoords();return this.angle&&(v=u.util.rotatePoint(v,b,d(-this.angle))),{x:v.x-b.x,y:v.y-b.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)}}),u.util.createAccessors&&u.util.createAccessors(u.Object),l(u.Object.prototype,u.Observable),u.Object.NUM_FRACTION_DIGITS=2,u.Object._fromObject=function(g,y,v,b){var w=u[g];y=h(y,!0),u.util.enlivenPatterns([y.fill,y.stroke],function(x){typeof x[0]<"u"&&(y.fill=x[0]),typeof x[1]<"u"&&(y.stroke=x[1]),u.util.enlivenObjects([y.clipPath],function(S){y.clipPath=S[0];var E=b?new w(y[b],y):new w(y);v&&v(E)})})},u.Object.__uid=0)}(n),function(){var s=e.util.degreesToRadians,u={left:-.5,center:0,right:.5},l={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(h,c,f,d,p){var m=h.x,g=h.y,y,v,b;return typeof c=="string"?c=u[c]:c-=.5,typeof d=="string"?d=u[d]:d-=.5,y=d-c,typeof f=="string"?f=l[f]:f-=.5,typeof p=="string"?p=l[p]:p-=.5,v=p-f,(y||v)&&(b=this._getTransformedDimensions(),m=h.x+y*b.x,g=h.y+v*b.y),new e.Point(m,g)},translateToCenterPoint:function(h,c,f){var d=this.translateToGivenOrigin(h,c,f,"center","center");return this.angle?e.util.rotatePoint(d,h,s(this.angle)):d},translateToOriginPoint:function(h,c,f){var d=this.translateToGivenOrigin(h,"center","center",c,f);return this.angle?e.util.rotatePoint(d,h,s(this.angle)):d},getCenterPoint:function(){var h=new e.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,c){var f=this.getCenterPoint();return this.translateToOriginPoint(f,h,c)},toLocalPoint:function(h,c,f){var d=this.getCenterPoint(),p,m;return typeof c<"u"&&typeof f<"u"?p=this.translateToGivenOrigin(d,"center","center",c,f):p=new e.Point(this.left,this.top),m=new e.Point(h.x,h.y),this.angle&&(m=e.util.rotatePoint(m,d,-s(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(h,c,f){var d=this.translateToCenterPoint(h,c,f),p=this.translateToOriginPoint(d,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(h){var c=s(this.angle),f=this.getScaledWidth(),d=e.util.cos(c)*f,p=e.util.sin(c)*f,m,g;typeof this.originX=="string"?m=u[this.originX]:m=this.originX-.5,typeof h=="string"?g=u[h]:g=h-.5,this.left+=d*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function s(f){return[new e.Point(f.tl.x,f.tl.y),new e.Point(f.tr.x,f.tr.y),new e.Point(f.br.x,f.br.y),new e.Point(f.bl.x,f.bl.y)]}var u=e.util,l=u.degreesToRadians,h=u.multiplyTransformMatrices,c=u.transformPoint;u.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(f,d){return d?f?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),f?this.aCoords:this.lineCoords)},getCoords:function(f,d){return s(this._getCoords(f,d))},intersectsWithRect:function(f,d,p,m){var g=this.getCoords(p,m),y=e.Intersection.intersectPolygonRectangle(g,f,d);return y.status==="Intersection"},intersectsWithObject:function(f,d,p){var m=e.Intersection.intersectPolygonPolygon(this.getCoords(d,p),f.getCoords(d,p));return m.status==="Intersection"||f.isContainedWithinObject(this,d,p)||this.isContainedWithinObject(f,d,p)},isContainedWithinObject:function(f,d,p){for(var m=this.getCoords(d,p),g=d?f.aCoords:f.lineCoords,y=0,v=f._getImageLines(g);y<4;y++)if(!f.containsPoint(m[y],v))return!1;return!0},isContainedWithinRect:function(f,d,p,m){var g=this.getBoundingRect(p,m);return g.left>=f.x&&g.left+g.width<=d.x&&g.top>=f.y&&g.top+g.height<=d.y},containsPoint:function(f,y,p,m){var g=this._getCoords(p,m),y=y||this._getImageLines(g),v=this._findCrossPoints(f,y);return v!==0&&v%2===1},isOnScreen:function(f){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,f);return m.some(function(g){return g.x<=p.x&&g.x>=d.x&&g.y<=p.y&&g.y>=d.y})||this.intersectsWithRect(d,p,!0,f)?!0:this._containsCenterOfCanvas(d,p,f)},_containsCenterOfCanvas:function(f,d,p){var m={x:(f.x+d.x)/2,y:(f.y+d.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(f){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(d,p,!0,f))return!0;var m=this.getCoords(!0,f).every(function(g){return(g.x>=p.x||g.x<=d.x)&&(g.y>=p.y||g.y<=d.y)});return m&&this._containsCenterOfCanvas(d,p,f)},_getImageLines:function(f){var d={topline:{o:f.tl,d:f.tr},rightline:{o:f.tr,d:f.br},bottomline:{o:f.br,d:f.bl},leftline:{o:f.bl,d:f.tl}};return d},_findCrossPoints:function(f,d){var p,m,g,y,v,b=0,w;for(var x in d)if(w=d[x],!(w.o.y<f.y&&w.d.y<f.y)&&!(w.o.y>=f.y&&w.d.y>=f.y)&&(w.o.x===w.d.x&&w.o.x>=f.x?v=w.o.x:(p=0,m=(w.d.y-w.o.y)/(w.d.x-w.o.x),g=f.y-p*f.x,y=w.o.y-m*w.o.x,v=-(g-y)/(p-m)),v>=f.x&&(b+=1),b===2))break;return b},getBoundingRect:function(f,d){var p=this.getCoords(f,d);return u.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(f){return Math.abs(f)<this.minScaleLimit?f<0?-this.minScaleLimit:this.minScaleLimit:f===0?1e-4:f},scale:function(f){return this._set("scaleX",f),this._set("scaleY",f),this.setCoords()},scaleToWidth:function(f,d){var p=this.getBoundingRect(d).width/this.getScaledWidth();return this.scale(f/this.width/p)},scaleToHeight:function(f,d){var p=this.getBoundingRect(d).height/this.getScaledHeight();return this.scale(f/this.height/p)},calcCoords:function(f){return f?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var f=this.getViewportTransform(),d=this.padding,p=l(this.angle),m=u.cos(p),g=u.sin(p),y=m*d,v=g*d,b=y+v,w=y-v,x=this.calcACoords(),S={tl:c(x.tl,f),tr:c(x.tr,f),bl:c(x.bl,f),br:c(x.br,f)};return d&&(S.tl.x-=w,S.tl.y-=b,S.tr.x+=b,S.tr.y-=w,S.bl.x-=b,S.bl.y+=w,S.br.x+=w,S.br.y+=b),S},calcOCoords:function(){var f=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=h(p,d),g=h(m,f),g=h(g,[1/p[0],0,0,1/p[3],0,0]),y=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(b,w,x){v[w]=b.positionHandler(y,g,x)}),v},calcACoords:function(){var f=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=h(d,f),m=this._getTransformedDimensions(),g=m.x/2,y=m.y/2;return{tl:c({x:-g,y:-y},p),tr:c({x:g,y:-y},p),bl:c({x:-g,y},p),br:c({x:g,y},p)}},setCoords:function(f){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),f?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return u.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var f=this.getCenterPoint();return[1,0,0,1,f.x,f.y]},transformMatrixKey:function(f){var d="_",p="";return!f&&this.group&&(p=this.group.transformMatrixKey(f)+d),p+this.top+d+this.left+d+this.scaleX+d+this.scaleY+d+this.skewX+d+this.skewY+d+this.angle+d+this.originX+d+this.originY+d+this.width+d+this.height+d+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(f){var d=this.calcOwnMatrix();if(f||!this.group)return d;var p=this.transformMatrixKey(f),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(d=h(this.group.calcTransformMatrix(!1),d)),m.key=p,m.value=d,d)},calcOwnMatrix:function(){var f=this.transformMatrixKey(!0),d=this.ownMatrixCache||(this.ownMatrixCache={});if(d.key===f)return d.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return d.key=f,d.value=u.composeMatrix(m),d.value},_calcDimensionsTransformMatrix:function(f,d,p){return u.calcDimensionsMatrix({skewX:f,skewY:d,scaleX:this.scaleX*(p&&this.flipX?-1:1),scaleY:this.scaleY*(p&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var f=this.strokeWidth,d=this.width+f,p=this.height+f;return{x:d,y:p}},_getTransformedDimensions:function(f,d){typeof f>"u"&&(f=this.skewX),typeof d>"u"&&(d=this.skewY);var p,m,g,y=f===0&&d===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),y)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var v=u.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:f,skewY:d});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(f,d){return this.strokeUniform?{x:f+this.strokeWidth,y:d+this.strokeWidth}:{x:f,y:d}},_calculateCurrentDimensions:function(){var f=this.getViewportTransform(),d=this._getTransformedDimensions(),p=c(d,f,!0);return p.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(s){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,s):this.canvas&&this.canvas.sendBackwards(this,s),this},bringForward:function(s){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,s):this.canvas&&this.canvas.bringForward(this,s),this},moveTo:function(s){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,s):this.canvas&&this.canvas.moveTo(this,s),this}}),function(){function s(l,h){if(h){if(h.toLive)return l+": url(#SVGID_"+h.id+"); ";var c=new e.Color(h),f=l+": "+c.toRgb()+"; ",d=c.getAlpha();return d!==1&&(f+=l+"-opacity: "+d.toString()+"; "),f}else return l+": none; "}var u=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(l){var h=this.fillRule?this.fillRule:"nonzero",c=this.strokeWidth?this.strokeWidth:"0",f=this.strokeDashArray?this.strokeDashArray.join(" "):"none",d=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",y=typeof this.opacity<"u"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",b=l?"":this.getSvgFilter(),w=s("fill",this.fill),x=s("stroke",this.stroke);return[x,"stroke-width: ",c,"; ","stroke-dasharray: ",f,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",d,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",w,"fill-rule: ",h,"; ","opacity: ",y,";",b,v].join("")},getSvgSpanStyles:function(l,h){var c="; ",d=l.fontFamily?"font-family: "+(l.fontFamily.indexOf("'")===-1&&l.fontFamily.indexOf('"')===-1?"'"+l.fontFamily+"'":l.fontFamily)+c:"",f=l.strokeWidth?"stroke-width: "+l.strokeWidth+c:"",d=d,p=l.fontSize?"font-size: "+l.fontSize+"px"+c:"",m=l.fontStyle?"font-style: "+l.fontStyle+c:"",g=l.fontWeight?"font-weight: "+l.fontWeight+c:"",y=l.fill?s("fill",l.fill):"",v=l.stroke?s("stroke",l.stroke):"",b=this.getSvgTextDecoration(l),w=l.deltaY?"baseline-shift: "+-l.deltaY+"; ":"";return b&&(b="text-decoration: "+b+c),[v,f,d,p,m,g,b,y,w,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(l){return["overline","underline","line-through"].filter(function(h){return l[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(l,h){var c=l?this.calcTransformMatrix():this.calcOwnMatrix(),f='transform="'+e.util.matrixToSVG(c);return f+(h||"")+'" '},_setSVGBg:function(l){if(this.backgroundColor){var h=e.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',u(-this.width/2,h),'" y="',u(-this.height/2,h),'" width="',u(this.width,h),'" height="',u(this.height,h),`"></rect>
`)}},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(l),{reviver:l})},toClipPathSVG:function(l){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(l),{reviver:l})},_createBaseClipPathSVGMarkup:function(l,h){h=h||{};var c=h.reviver,f=h.additionalTransform||"",d=[this.getSvgTransform(!0,f),this.getSvgCommons()].join(""),p=l.indexOf("COMMON_PARTS");return l[p]=d,c?c(l.join("")):l.join("")},_createBaseSVGMarkup:function(l,h){h=h||{};var c=h.noStyle,f=h.reviver,d=c?"":'style="'+this.getSvgStyles()+'" ',p=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",y=m&&m.absolutePositioned,v=this.stroke,b=this.fill,w=this.shadow,x,S=[],E,A=l.indexOf("COMMON_PARTS"),k=h.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+e.Object.__uid++,E='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(f)+`</clipPath>
`),y&&S.push("<g ",p,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),y?"":p+this.getSvgCommons(),` >
`),x=[d,g,c?"":this.addPaintOrder()," ",k?'transform="'+k+'" ':""].join(""),l[A]=x,b&&b.toLive&&S.push(b.toSVG(this)),v&&v.toLive&&S.push(v.toSVG(this)),w&&S.push(w.toSVG(this)),m&&S.push(E),S.push(l.join("")),S.push(`</g>
`),y&&S.push(`</g>
`),f?f(S.join("")):S.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var s=e.util.object.extend,u="stateProperties";function l(c,f,d){var p={},m=!0;d.forEach(function(g){p[g]=c[g]}),s(c[f],p,m)}function h(c,f,d){if(c===f)return!0;if(Array.isArray(c)){if(!Array.isArray(f)||c.length!==f.length)return!1;for(var p=0,m=c.length;p<m;p++)if(!h(c[p],f[p]))return!1;return!0}else if(c&&typeof c=="object"){var g=Object.keys(c),y;if(!f||typeof f!="object"||!d&&g.length!==Object.keys(f).length)return!1;for(var p=0,m=g.length;p<m;p++)if(y=g[p],!(y==="canvas"||y==="group")&&!h(c[y],f[y]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(c){c=c||u;var f="_"+c;return Object.keys(this[f]).length<this[c].length?!0:!h(this[f],this,!0)},saveState:function(c){var f=c&&c.propertySet||u,d="_"+f;return this[d]?(l(this,d,this[f]),c&&c.stateProperties&&l(this,d,c.stateProperties),this):this.setupState(c)},setupState:function(c){c=c||{};var f=c.propertySet||u;return c.propertySet=f,this["_"+f]={},this.saveState(c),this}})}(),function(){var s=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(u,l){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=u.x,c=u.y,f,d,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(d=this._getImageLines(l?this.oCoords[g].touchCorner:this.oCoords[g].corner),f=this._findCrossPoints({x:h,y:c},d),f!==0&&f%2===1))return this.__corner=g,g;return!1},forEachControl:function(u){for(var l in this.controls)u(this.controls[l],l,this)},_setCornerCoords:function(){var u=this.oCoords;for(var l in u){var h=this.controls[l];u[l].corner=h.calcCornerCoords(this.angle,this.cornerSize,u[l].x,u[l].y,!1),u[l].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,u[l].x,u[l].y,!0)}},drawSelectionBackground:function(u){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;u.save();var l=this.getCenterPoint(),h=this._calculateCurrentDimensions(),c=this.canvas.viewportTransform;return u.translate(l.x,l.y),u.scale(1/c[0],1/c[3]),u.rotate(s(this.angle)),u.fillStyle=this.selectionBackgroundColor,u.fillRect(-h.x/2,-h.y/2,h.x,h.y),u.restore(),this},drawBorders:function(u,l){l=l||{};var h=this._calculateCurrentDimensions(),c=this.borderScaleFactor,f=h.x+c,d=h.y+c,p=typeof l.hasControls<"u"?l.hasControls:this.hasControls,m=!1;return u.save(),u.strokeStyle=l.borderColor||this.borderColor,this._setLineDash(u,l.borderDashArray||this.borderDashArray),u.strokeRect(-f/2,-d/2,f,d),p&&(u.beginPath(),this.forEachControl(function(g,y,v){g.withConnection&&g.getVisibility(v,y)&&(m=!0,u.moveTo(g.x*f,g.y*d),u.lineTo(g.x*f+g.offsetX,g.y*d+g.offsetY))}),m&&u.stroke()),u.restore(),this},drawBordersInGroup:function(u,l,h){h=h||{};var c=e.util.sizeAfterTransform(this.width,this.height,l),f=this.strokeWidth,d=this.strokeUniform,p=this.borderScaleFactor,m=c.x+f*(d?this.canvas.getZoom():l.scaleX)+p,g=c.y+f*(d?this.canvas.getZoom():l.scaleY)+p;return u.save(),this._setLineDash(u,h.borderDashArray||this.borderDashArray),u.strokeStyle=h.borderColor||this.borderColor,u.strokeRect(-m/2,-g/2,m,g),u.restore(),this},drawControls:function(u,l){l=l||{},u.save();var h=this.canvas.getRetinaScaling(),c,f;return u.setTransform(h,0,0,h,0,0),u.strokeStyle=u.fillStyle=l.cornerColor||this.cornerColor,this.transparentCorners||(u.strokeStyle=l.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(u,l.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(c=this.group.calcTransformMatrix()),this.forEachControl(function(d,p,m){f=m.oCoords[p],d.getVisibility(m,p)&&(c&&(f=e.util.transformPoint(f,c)),d.render(u,f.x,f.y,l,m))}),u.restore(),this},isControlVisible:function(u){return this.controls[u]&&this.controls[u].getVisibility(this,u)},setControlVisible:function(u,l){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[u]=l,this},setControlsVisibility:function(u){u||(u={});for(var l in u)this.setControlVisible(l,u[l]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(s,u){u=u||{};var l=function(){},h=u.onComplete||l,c=u.onChange||l,f=this;return e.util.animate({startValue:s.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(d){s.set("left",d),f.requestRenderAll(),c()},onComplete:function(){s.setCoords(),h()}}),this},fxCenterObjectV:function(s,u){u=u||{};var l=function(){},h=u.onComplete||l,c=u.onChange||l,f=this;return e.util.animate({startValue:s.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(d){s.set("top",d),f.requestRenderAll(),c()},onComplete:function(){s.setCoords(),h()}}),this},fxRemove:function(s,u){u=u||{};var l=function(){},h=u.onComplete||l,c=u.onChange||l,f=this;return e.util.animate({startValue:s.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(d){s.set("opacity",d),f.requestRenderAll(),c()},onComplete:function(){f.remove(s),h()}}),this}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var s=[],u,l;for(u in arguments[0])s.push(u);for(var h=0,c=s.length;h<c;h++)u=s[h],l=h!==c-1,this._animate(u,arguments[0][u],arguments[1],l)}else this._animate.apply(this,arguments);return this},_animate:function(s,u,l,h){var c=this,f;u=u.toString(),l?l=e.util.object.clone(l):l={},~s.indexOf(".")&&(f=s.split("."));var d=c.colorProperties.indexOf(s)>-1||f&&c.colorProperties.indexOf(f[1])>-1,p=f?this.get(f[0])[f[1]]:this.get(s);"from"in l||(l.from=p),d||(~u.indexOf("=")?u=p+parseFloat(u.replace("=","")):u=parseFloat(u));var m={startValue:l.from,endValue:u,byValue:l.by,easing:l.easing,duration:l.duration,abort:l.abort&&function(g,y,v){return l.abort.call(c,g,y,v)},onChange:function(g,y,v){f?c[f[0]][f[1]]=g:c.set(s,g),!h&&l.onChange&&l.onChange(g,y,v)},onComplete:function(g,y,v){h||(c.setCoords(),l.onComplete&&l.onComplete(g,y,v))}};return d?e.util.animateColor(m.startValue,m.endValue,m.duration,m):e.util.animate(m)}}),function(s){var u=s.fabric||(s.fabric={}),l=u.util.object.extend,h=u.util.object.clone,c={x1:1,x2:1,y1:1,y2:1};if(u.Line){u.warn("fabric.Line is already defined");return}u.Line=u.util.createClass(u.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:u.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(d,p){d||(d=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",d[0]),this.set("y1",d[1]),this.set("x2",d[2]),this.set("y2",d[3]),this._setWidthHeight(p)},_setWidthHeight:function(d){d||(d={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in d?d.left:this._getLeftToOriginX(),this.top="top"in d?d.top:this._getTopToOriginY()},_set:function(d,p){return this.callSuper("_set",d,p),typeof c[d]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:f({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:f({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(d){d.beginPath();var p=this.calcLinePoints();d.moveTo(p.x1,p.y1),d.lineTo(p.x2,p.y2),d.lineWidth=this.strokeWidth;var m=d.strokeStyle;d.strokeStyle=this.stroke||d.fillStyle,this.stroke&&this._renderStroke(d),d.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(d){return l(this.callSuper("toObject",d),this.calcLinePoints())},_getNonTransformedDimensions:function(){var d=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(d.y-=this.strokeWidth),this.height===0&&(d.x-=this.strokeWidth)),d},calcLinePoints:function(){var d=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=d*this.width*.5,g=p*this.height*.5,y=d*this.width*-.5,v=p*this.height*-.5;return{x1:m,x2:y,y1:g,y2:v}},_toSVG:function(){var d=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`" />
`]}}),u.Line.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),u.Line.fromElement=function(d,p,m){m=m||{};var g=u.parseAttributes(d,u.Line.ATTRIBUTE_NAMES),y=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new u.Line(y,l(g,m)))},u.Line.fromObject=function(d,p){function m(y){delete y.points,p&&p(y)}var g=h(d,!0);g.points=[d.x1,d.y1,d.x2,d.y2],u.Object._fromObject("Line",g,m,"points")};function f(d,p){var m=d.origin,g=d.axis1,y=d.axis2,v=d.dimension,b=p.nearest,w=p.center,x=p.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(g),this.get(y));case w:return Math.min(this.get(g),this.get(y))+.5*this.get(v);case x:return Math.max(this.get(g),this.get(y))}}}}(n),function(s){var u=s.fabric||(s.fabric={}),l=Math.PI;if(u.Circle){u.warn("fabric.Circle is already defined.");return}u.Circle=u.util.createClass(u.Object,{type:"circle",radius:0,startAngle:0,endAngle:l*2,cacheProperties:u.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(c,f){return this.callSuper("_set",c,f),c==="radius"&&this.setRadius(f),this},toObject:function(c){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(c))},_toSVG:function(){var c,f=0,d=0,p=(this.endAngle-this.startAngle)%(2*l);if(p===0)c=["<circle ","COMMON_PARTS",'cx="'+f+'" cy="'+d+'" ','r="',this.radius,`" />
`];else{var m=u.util.cos(this.startAngle)*this.radius,g=u.util.sin(this.startAngle)*this.radius,y=u.util.cos(this.endAngle)*this.radius,v=u.util.sin(this.endAngle)*this.radius,b=p>l?"1":"0";c=['<path d="M '+m+" "+g," A "+this.radius+" "+this.radius," 0 ",+b+" 1"," "+y+" "+v,'" ',"COMMON_PARTS",` />
`]}return c},_render:function(c){c.beginPath(),c.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(c)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(c){return this.radius=c,this.set("width",c*2).set("height",c*2)}}),u.Circle.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),u.Circle.fromElement=function(c,f){var d=u.parseAttributes(c,u.Circle.ATTRIBUTE_NAMES);if(!h(d))throw new Error("value of `r` attribute is required and can not be negative");d.left=(d.left||0)-d.radius,d.top=(d.top||0)-d.radius,f(new u.Circle(d))};function h(c){return"radius"in c&&c.radius>=0}u.Circle.fromObject=function(c,f){u.Object._fromObject("Circle",c,f)}}(n),function(s){var u=s.fabric||(s.fabric={});if(u.Triangle){u.warn("fabric.Triangle is already defined");return}u.Triangle=u.util.createClass(u.Object,{type:"triangle",width:100,height:100,_render:function(l){var h=this.width/2,c=this.height/2;l.beginPath(),l.moveTo(-h,c),l.lineTo(0,-c),l.lineTo(h,c),l.closePath(),this._renderPaintInOrder(l)},_toSVG:function(){var l=this.width/2,h=this.height/2,c=[-l+" "+h,"0 "+-h,l+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',c,'" />']}}),u.Triangle.fromObject=function(l,h){return u.Object._fromObject("Triangle",l,h)}}(n),function(s){var u=s.fabric||(s.fabric={}),l=Math.PI*2;if(u.Ellipse){u.warn("fabric.Ellipse is already defined.");return}u.Ellipse=u.util.createClass(u.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:u.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,c){switch(this.callSuper("_set",h,c),h){case"rx":this.rx=c,this.set("width",c*2);break;case"ry":this.ry=c,this.set("height",c*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,l,!1),h.restore(),this._renderPaintInOrder(h)}}),u.Ellipse.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),u.Ellipse.fromElement=function(h,c){var f=u.parseAttributes(h,u.Ellipse.ATTRIBUTE_NAMES);f.left=(f.left||0)-f.rx,f.top=(f.top||0)-f.ry,c(new u.Ellipse(f))},u.Ellipse.fromObject=function(h,c){u.Object._fromObject("Ellipse",h,c)}}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.util.object.extend;if(u.Rect){u.warn("fabric.Rect is already defined");return}u.Rect=u.util.createClass(u.Object,{stateProperties:u.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:u.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var c=this.rx?Math.min(this.rx,this.width/2):0,f=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,p=this.height,m=-this.width/2,g=-this.height/2,y=c!==0||f!==0,v=1-.5522847498;h.beginPath(),h.moveTo(m+c,g),h.lineTo(m+d-c,g),y&&h.bezierCurveTo(m+d-v*c,g,m+d,g+v*f,m+d,g+f),h.lineTo(m+d,g+p-f),y&&h.bezierCurveTo(m+d,g+p-v*f,m+d-v*c,g+p,m+d-c,g+p),h.lineTo(m+c,g+p),y&&h.bezierCurveTo(m+v*c,g+p,m,g+p-v*f,m,g+p-f),h.lineTo(m,g+f),y&&h.bezierCurveTo(m,g+v*f,m+v*c,g,m+c,g),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,c=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',c,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),u.Rect.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),u.Rect.fromElement=function(h,c,f){if(!h)return c(null);f=f||{};var d=u.parseAttributes(h,u.Rect.ATTRIBUTE_NAMES);d.left=d.left||0,d.top=d.top||0,d.height=d.height||0,d.width=d.width||0;var p=new u.Rect(l(f?u.util.object.clone(f):{},d));p.visible=p.visible&&p.width>0&&p.height>0,c(p)},u.Rect.fromObject=function(h,c){return u.Object._fromObject("Rect",h,c)}}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.util.object.extend,h=u.util.array.min,c=u.util.array.max,f=u.util.toFixed;if(u.Polyline){u.warn("fabric.Polyline is already defined");return}u.Polyline=u.util.createClass(u.Object,{type:"polyline",points:null,cacheProperties:u.Object.prototype.cacheProperties.concat("points"),initialize:function(d,p){p=p||{},this.points=d||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_setPositionDimensions:function(d){var p=this._calcDimensions(d),m;this.width=p.width,this.height=p.height,d.fromSVG||(m=this.translateToGivenOrigin({x:p.left-this.strokeWidth/2,y:p.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof d.left>"u"&&(this.left=d.fromSVG?p.left:m.x),typeof d.top>"u"&&(this.top=d.fromSVG?p.top:m.y),this.pathOffset={x:p.left+this.width/2,y:p.top+this.height/2}},_calcDimensions:function(){var d=this.points,p=h(d,"x")||0,m=h(d,"y")||0,g=c(d,"x")||0,y=c(d,"y")||0,v=g-p,b=y-m;return{left:p,top:m,width:v,height:b}},toObject:function(d){return l(this.callSuper("toObject",d),{points:this.points.concat()})},_toSVG:function(){for(var d=[],p=this.pathOffset.x,m=this.pathOffset.y,g=u.Object.NUM_FRACTION_DIGITS,y=0,v=this.points.length;y<v;y++)d.push(f(this.points[y].x-p,g),",",f(this.points[y].y-m,g)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',d.join(""),`" />
`]},commonRender:function(d){var p,m=this.points.length,g=this.pathOffset.x,y=this.pathOffset.y;if(!m||isNaN(this.points[m-1].y))return!1;d.beginPath(),d.moveTo(this.points[0].x-g,this.points[0].y-y);for(var v=0;v<m;v++)p=this.points[v],d.lineTo(p.x-g,p.y-y);return!0},_render:function(d){this.commonRender(d)&&this._renderPaintInOrder(d)},complexity:function(){return this.get("points").length}}),u.Polyline.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat(),u.Polyline.fromElementGenerator=function(d){return function(p,m,g){if(!p)return m(null);g||(g={});var y=u.parsePointsAttribute(p.getAttribute("points")),v=u.parseAttributes(p,u[d].ATTRIBUTE_NAMES);v.fromSVG=!0,m(new u[d](y,l(v,g)))}},u.Polyline.fromElement=u.Polyline.fromElementGenerator("Polyline"),u.Polyline.fromObject=function(d,p){return u.Object._fromObject("Polyline",d,p,"points")}}(n),function(s){var u=s.fabric||(s.fabric={});if(u.Polygon){u.warn("fabric.Polygon is already defined");return}u.Polygon=u.util.createClass(u.Polyline,{type:"polygon",_render:function(l){this.commonRender(l)&&(l.closePath(),this._renderPaintInOrder(l))}}),u.Polygon.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat(),u.Polygon.fromElement=u.Polyline.fromElementGenerator("Polygon"),u.Polygon.fromObject=function(l,h){u.Object._fromObject("Polygon",l,h,"points")}}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.util.array.min,h=u.util.array.max,c=u.util.object.extend,f=Object.prototype.toString,d=u.util.toFixed;if(u.Path){u.warn("fabric.Path is already defined");return}u.Path=u.util.createClass(u.Object,{type:"path",path:null,cacheProperties:u.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:u.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=m||{},this.callSuper("initialize",m),p||(p=[]);var g=f.call(p)==="[object Array]";this.path=u.util.makePathSimpler(g?p:u.util.parsePath(p)),this.path&&u.Polyline.prototype._setPositionDimensions.call(this,m)},_renderPathCommands:function(p){var m,g=0,y=0,v=0,b=0,w=0,x=0,S=-this.pathOffset.x,E=-this.pathOffset.y;p.beginPath();for(var A=0,k=this.path.length;A<k;++A)switch(m=this.path[A],m[0]){case"L":v=m[1],b=m[2],p.lineTo(v+S,b+E);break;case"M":v=m[1],b=m[2],g=v,y=b,p.moveTo(v+S,b+E);break;case"C":v=m[5],b=m[6],w=m[3],x=m[4],p.bezierCurveTo(m[1]+S,m[2]+E,w+S,x+E,v+S,b+E);break;case"Q":p.quadraticCurveTo(m[1]+S,m[2]+E,m[3]+S,m[4]+E),v=m[3],b=m[4],w=m[1],x=m[2];break;case"z":case"Z":v=g,b=y,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return c(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=u.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=u.Object.NUM_FRACTION_DIGITS;return" translate("+d(-this.pathOffset.x,p)+", "+d(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,y=0,v=0,b=0,w=0,x,S=0,E=this.path.length;S<E;++S){switch(g=this.path[S],g[0]){case"L":b=g[1],w=g[2],x=[];break;case"M":b=g[1],w=g[2],y=b,v=w,x=[];break;case"C":x=u.util.getBoundsOfCurve(b,w,g[1],g[2],g[3],g[4],g[5],g[6]),b=g[5],w=g[6];break;case"Q":x=u.util.getBoundsOfCurve(b,w,g[1],g[2],g[1],g[2],g[3],g[4]),b=g[3],w=g[4];break;case"z":case"Z":b=y,w=v;break}x.forEach(function(R){p.push(R.x),m.push(R.y)}),p.push(b),m.push(w)}var A=l(p)||0,k=l(m)||0,T=h(p)||0,O=h(m)||0,F=T-A,I=O-k;return{left:A,top:k,width:F,height:I}}}),u.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;u.loadSVGFromURL(g,function(y){var v=y[0];v.setOptions(p),m&&m(v)})}else u.Object._fromObject("Path",p,m,"path")},u.Path.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat(["d"]),u.Path.fromElement=function(p,m,g){var y=u.parseAttributes(p,u.Path.ATTRIBUTE_NAMES);y.fromSVG=!0,m(new u.Path(y.d,c(y,g)))}}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.util.array.min,h=u.util.array.max;u.Group||(u.Group=u.util.createClass(u.Object,u.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(c,f,d){f=f||{},this._objects=[],d&&this.callSuper("initialize",f),this._objects=c||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(d)this._updateObjectsACoords();else{var m=f&&f.centerPoint;f.originX!==void 0&&(this.originX=f.originX),f.originY!==void 0&&(this.originY=f.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete f.centerPoint,this.callSuper("initialize",f)}this.setCoords()},_updateObjectsACoords:function(){for(var c=!0,f=this._objects.length;f--;)this._objects[f].setCoords(c)},_updateObjectsCoords:function(f){for(var f=f||this.getCenterPoint(),d=this._objects.length;d--;)this._updateObjectCoords(this._objects[d],f)},_updateObjectCoords:function(c,f){var d=c.left,p=c.top,m=!0;c.set({left:d-f.x,top:p-f.y}),c.group=this,c.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(c){var f=!!this.group;return this._restoreObjectsState(),u.util.resetObjectTransform(this),c&&(f&&u.util.removeTransformFromObject(c,this.group.calcTransformMatrix()),this._objects.push(c),c.group=this,c._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,f?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(c){return this._restoreObjectsState(),u.util.resetObjectTransform(this),this.remove(c),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(c){this.dirty=!0,c.group=this,c._set("canvas",this.canvas)},_onObjectRemoved:function(c){this.dirty=!0,delete c.group},_set:function(c,f){var d=this._objects.length;if(this.useSetOnGroup)for(;d--;)this._objects[d].setOnGroup(c,f);if(c==="canvas")for(;d--;)this._objects[d]._set(c,f);u.Object.prototype._set.call(this,c,f)},toObject:function(c){var f=this.includeDefaultValues,d=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=f;var y=m.toObject(c);return m.includeDefaultValues=g,y}),p=u.Object.prototype.toObject.call(this,c);return p.objects=d,p},toDatalessObject:function(c){var f,d=this.sourcePath;if(d)f=d;else{var p=this.includeDefaultValues;f=this._objects.map(function(g){var y=g.includeDefaultValues;g.includeDefaultValues=p;var v=g.toDatalessObject(c);return g.includeDefaultValues=y,v})}var m=u.Object.prototype.toDatalessObject.call(this,c);return m.objects=f,m},render:function(c){this._transformDone=!0,this.callSuper("render",c),this._transformDone=!1},shouldCache:function(){var c=u.Object.prototype.shouldCache.call(this);if(c){for(var f=0,d=this._objects.length;f<d;f++)if(this._objects[f].willDrawShadow())return this.ownCaching=!1,!1}return c},willDrawShadow:function(){if(u.Object.prototype.willDrawShadow.call(this))return!0;for(var c=0,f=this._objects.length;c<f;c++)if(this._objects[c].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(c){for(var f=0,d=this._objects.length;f<d;f++)this._objects[f].render(c);this._drawClipPath(c)},isCacheDirty:function(c){if(this.callSuper("isCacheDirty",c))return!0;if(!this.statefullCache)return!1;for(var f=0,d=this._objects.length;f<d;f++)if(this._objects[f].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var c=this.calcOwnMatrix();return this._objects.forEach(function(f){u.util.addTransformToObject(f,c),delete f.group,f.setCoords()}),this},realizeTransform:function(c,f){return u.util.addTransformToObject(c,f),c},destroy:function(){return this._objects.forEach(function(c){c.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var c=this._objects,f=this.canvas;this._objects=[];var d=this.toObject();delete d.objects;var p=new u.ActiveSelection([]);return p.set(d),p.type="activeSelection",f.remove(this),c.forEach(function(m){m.group=p,m.dirty=!0,f.add(m)}),p.canvas=f,p._objects=c,f._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var c=!0;return this.forEachObject(function(f){f.setCoords(c)}),this},_calcBounds:function(c){for(var f=[],d=[],p,m,g,y=["tr","br","bl","tl"],v=0,b=this._objects.length,w,x=y.length;v<b;++v){for(p=this._objects[v],g=p.calcACoords(),w=0;w<x;w++)m=y[w],f.push(g[m].x),d.push(g[m].y);p.aCoords=g}this._getBounds(f,d,c)},_getBounds:function(c,f,d){var p=new u.Point(l(c),l(f)),m=new u.Point(h(c),h(f)),g=p.y||0,y=p.x||0,v=m.x-p.x||0,b=m.y-p.y||0;this.width=v,this.height=b,d||this.setPositionByOrigin({x:y,y:g},"left","top")},_toSVG:function(c){for(var f=["<g ","COMMON_PARTS",` >
`],d=0,p=this._objects.length;d<p;d++)f.push("		",this._objects[d].toSVG(c));return f.push(`</g>
`),f},getSvgStyles:function(){var c=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",f=this.visible?"":" visibility: hidden;";return[c,this.getSvgFilter(),f].join("")},toClipPathSVG:function(c){for(var f=[],d=0,p=this._objects.length;d<p;d++)f.push("	",this._objects[d].toClipPathSVG(c));return this._createBaseClipPathSVGMarkup(f,{reviver:c})}}),u.Group.fromObject=function(c,f){var d=c.objects,p=u.util.object.clone(c,!0);if(delete p.objects,typeof d=="string"){u.loadSVGFromURL(d,function(m){var g=u.util.groupSVGElements(m,c,d);g.set(p),f&&f(g)});return}u.util.enlivenObjects(d,function(m){u.util.enlivenObjects([c.clipPath],function(g){var y=u.util.object.clone(c,!0);y.clipPath=g[0],delete y.objects,f&&f(new u.Group(m,y,!0))})})})}(n),function(s){var u=s.fabric||(s.fabric={});u.ActiveSelection||(u.ActiveSelection=u.util.createClass(u.Group,{type:"activeSelection",initialize:function(l,h){h=h||{},this._objects=l||[];for(var c=this._objects.length;c--;)this._objects[c].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),u.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var l=this._objects.concat();this._objects=[];var h=u.Object.prototype.toObject.call(this),c=new u.Group([]);if(delete h.type,c.set(h),l.forEach(function(d){d.canvas.remove(d),d.group=c}),c._objects=l,!this.canvas)return c;var f=this.canvas;return f.add(c),f._activeObject=c,c.setCoords(),c},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(l,h,c){l.save(),l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",l,h),c=c||{},typeof c.hasControls>"u"&&(c.hasControls=!1),c.forActiveSelection=!0;for(var f=0,d=this._objects.length;f<d;f++)this._objects[f]._renderControls(l,c);l.restore()}}),u.ActiveSelection.fromObject=function(l,h){u.util.enlivenObjects(l.objects,function(c){delete l.objects,h&&h(new u.ActiveSelection(c,l,!0))})})}(n),function(s){var u=e.util.object.extend;if(s.fabric||(s.fabric={}),s.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(l,h){h||(h={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",h),this._initElement(l,h)},getElement:function(){return this._element||{}},setElement:function(l,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=l,this._originalElement=l,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(l){var h=e.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(l)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(l){e.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var l=this.getElement();return{width:l.naturalWidth||l.width,height:l.naturalHeight||l.height}},_stroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,c=this.height/2;l.beginPath(),l.moveTo(-h,-c),l.lineTo(h,-c),l.lineTo(h,c),l.lineTo(-h,c),l.lineTo(-h,-c),l.closePath()}},toObject:function(l){var h=[];this.filters.forEach(function(f){f&&h.push(f.toObject())});var c=u(this.callSuper("toObject",["cropX","cropY"].concat(l)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(c.resizeFilter=this.resizeFilter.toObject()),c},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l=[],h=[],c,f=this._element,d=-this.width/2,p=-this.height/2,m="",g="";if(!f)return[];if(this.hasCrop()){var y=e.Object.__uid++;l.push('<clipPath id="imageCrop_'+y+`">
`,'	<rect x="'+d+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+y+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',d-this.cropX,'" y="',p-this.cropY,'" width="',f.width||f.naturalWidth,'" height="',f.height||f.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,c=["	<rect ",'x="',d,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?l=l.concat(c,h):l=l.concat(h,c),l},getSrc:function(l){var h=l?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(l,h,c){return e.util.loadImage(l,function(f,d){this.setElement(f,c),this._setWidthHeight(),h&&h(this,d)},this,c&&c.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var l=this.resizeFilter,h=this.minimumScaleTrigger,c=this.getTotalObjectScaling(),f=c.scaleX,d=c.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!l||f>h&&d>h){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=f,this._lastScaleY=d;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var m=e.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,y=p.width,v=p.height;m.width=y,m.height=v,this._element=m,this._lastScaleX=l.scaleX=f,this._lastScaleY=l.scaleY=d,e.filterBackend.applyFilters([l],p,y,v,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(l){if(l=l||this.filters||[],l=l.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),l.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,c=h.naturalWidth||h.width,f=h.naturalHeight||h.height;if(this._element===this._originalElement){var d=e.util.createCanvasElement();d.width=c,d.height=f,this._element=d,this._filteredEl=d}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,c,f),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(l,this._originalElement,c,f,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(l){e.util.setImageSmoothing(l,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(l),this._renderPaintInOrder(l)},drawCacheOnCanvas:function(l){e.util.setImageSmoothing(l,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,l)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(l){var h=this._element;if(h){var c=this._filterScalingX,f=this._filterScalingY,d=this.width,p=this.height,m=Math.min,g=Math.max,y=g(this.cropX,0),v=g(this.cropY,0),b=h.naturalWidth||h.width,w=h.naturalHeight||h.height,x=y*c,S=v*f,E=m(d*c,b-x),A=m(p*f,w-S),k=-d/2,T=-p/2,O=m(d,b/c-y),F=m(p,w/f-v);h&&l.drawImage(h,x,S,E,A,k,T,O,F)}},_needsResize:function(){var l=this.getTotalObjectScaling();return l.scaleX!==this._lastScaleX||l.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(l,h){this.setElement(e.util.getById(l),h),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(l){l||(l={}),this.setOptions(l),this._setWidthHeight(l)},_initFilters:function(l,h){l&&l.length?e.util.enlivenObjects(l,function(c){h&&h(c)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(l){l||(l={});var h=this.getElement();this.width=l.width||h.naturalWidth||h.width||0,this.height=l.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var l=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,c=this._element.height,f=1,d=1,p=0,m=0,g=0,y=0,v,b=this.width,w=this.height,x={width:b,height:w};return l&&(l.alignX!=="none"||l.alignY!=="none")?(l.meetOrSlice==="meet"&&(f=d=e.util.findScaleToFit(this._element,x),v=(b-h*f)/2,l.alignX==="Min"&&(p=-v),l.alignX==="Max"&&(p=v),v=(w-c*d)/2,l.alignY==="Min"&&(m=-v),l.alignY==="Max"&&(m=v)),l.meetOrSlice==="slice"&&(f=d=e.util.findScaleToCover(this._element,x),v=h-b/f,l.alignX==="Mid"&&(g=v/2),l.alignX==="Max"&&(g=v),v=c-w/d,l.alignY==="Mid"&&(y=v/2),l.alignY==="Max"&&(y=v),h=b/f,c=w/d)):(f=b/h,d=w/c),{width:h,height:c,scaleX:f,scaleY:d,offsetLeft:p,offsetTop:m,cropX:g,cropY:y}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(l,h){var c=e.util.object.clone(l);e.util.loadImage(c.src,function(f,d){if(d){h&&h(null,!0);return}e.Image.prototype._initFilters.call(c,c.filters,function(p){c.filters=p||[],e.Image.prototype._initFilters.call(c,[c.resizeFilter],function(m){c.resizeFilter=m[0],e.util.enlivenObjects([c.clipPath],function(g){c.clipPath=g[0];var y=new e.Image(f,c);h(y,!1)})})})},null,c.crossOrigin)},e.Image.fromURL=function(l,h,c){e.util.loadImage(l,function(f,d){h&&h(new e.Image(f,c),d)},null,c&&c.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(l,h,c){var f=e.parseAttributes(l,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(f["xlink:href"],h,u(c?e.util.object.clone(c):{},f))}}(n),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var s=this.angle%360;return s>0?Math.round((s-1)/90)*90:Math.round(s/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(s){s=s||{};var u=function(){},l=s.onComplete||u,h=s.onChange||u,c=this;return e.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(f){c.rotate(f),h()},onComplete:function(){c.setCoords(),l()}}),this}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(s){return s.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(s){return s.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function s(l,h){var c="precision "+h+` float;
void main(){}`,f=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(f,c),l.compileShader(f),!!l.getShaderParameter(f,l.COMPILE_STATUS)}e.isWebglSupported=function(l){if(e.isLikelyNode)return!1;l=l||e.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),c=h.getContext("webgl")||h.getContext("experimental-webgl"),f=!1;if(c){e.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),f=e.maxTextureSize>=l;for(var d=["highp","mediump","lowp"],p=0;p<3;p++)if(s(c,d[p])){e.webGlPrecision=d[p];break}}return this.isSupported=f,f},e.WebglFilterBackend=u;function u(l){l&&l.tileSize&&(this.tileSize=l.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}u.prototype={tileSize:2048,resources:{},setupGLContext:function(l,h){this.dispose(),this.createWebGLCanvas(l,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(l,h)},chooseFastestCopyGLTo2DMethod:function(l,h){var c=typeof window.performance<"u",f;try{new ImageData(1,1),f=!0}catch{f=!1}var d=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(c&&f&&d&&p){var m=e.util.createCanvasElement(),g=new ArrayBuffer(l*h*4);if(e.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=o;return}var y={imageBuffer:g,destinationWidth:l,destinationHeight:h,targetCanvas:m},v,b,w;m.width=l,m.height=h,v=window.performance.now(),a.call(y,this.gl,y),b=window.performance.now()-v,v=window.performance.now(),o.call(y,this.gl,y),w=window.performance.now()-v,b>w?(this.imageBuffer=g,this.copyGLTo2D=o):this.copyGLTo2D=a}},createWebGLCanvas:function(l,h){var c=e.util.createCanvasElement();c.width=l,c.height=h;var f={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},d=c.getContext("webgl",f);d||(d=c.getContext("experimental-webgl",f)),d&&(d.clearColor(0,0,0,0),this.canvas=c,this.gl=d)},applyFilters:function(l,h,c,f,d,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,h));var y={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:c,sourceHeight:f,destinationWidth:c,destinationHeight:f,context:m,sourceTexture:this.createTexture(m,c,f,!g&&h),targetTexture:this.createTexture(m,c,f),originalTexture:g||this.createTexture(m,c,f,!g&&h),passes:l.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:d},v=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,v),l.forEach(function(b){b&&b.applyTo(y)}),i(y),this.copyGLTo2D(m,y),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(y.sourceTexture),m.deleteTexture(y.targetTexture),m.deleteFramebuffer(v),d.getContext("2d").setTransform(1,0,0,1,0,0),y},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(l,h,c,f){var d=l.createTexture();return l.bindTexture(l.TEXTURE_2D,d),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),f?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,f):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,h,c,0,l.RGBA,l.UNSIGNED_BYTE,null),d},getCachedTexture:function(l,h){if(this.textureCache[l])return this.textureCache[l];var c=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[l]=c,c},evictCachesForKey:function(l){this.textureCache[l]&&(this.gl.deleteTexture(this.textureCache[l]),delete this.textureCache[l])},copyGLTo2D:a,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var l=this.gl,h={renderer:"",vendor:""};if(!l)return h;var c=l.getExtension("WEBGL_debug_renderer_info");if(c){var f=l.getParameter(c.UNMASKED_RENDERER_WEBGL),d=l.getParameter(c.UNMASKED_VENDOR_WEBGL);f&&(h.renderer=f.toLowerCase()),d&&(h.vendor=d.toLowerCase())}return this.gpuInfo=h,h}}}();function i(s){var u=s.targetCanvas,l=u.width,h=u.height,c=s.destinationWidth,f=s.destinationHeight;(l!==c||h!==f)&&(u.width=c,u.height=f)}function a(s,u){var l=s.canvas,h=u.targetCanvas,c=h.getContext("2d");c.translate(0,h.height),c.scale(1,-1);var f=l.height-h.height;c.drawImage(l,0,f,h.width,h.height,0,0,h.width,h.height)}function o(s,u){var l=u.targetCanvas,h=l.getContext("2d"),c=u.destinationWidth,f=u.destinationHeight,d=c*f*4,p=new Uint8Array(this.imageBuffer,0,d),m=new Uint8ClampedArray(this.imageBuffer,0,d);s.readPixels(0,0,c,f,s.RGBA,s.UNSIGNED_BYTE,p);var g=new ImageData(m,c,f);h.putImageData(g,0,0)}(function(){var s=function(){};e.Canvas2dFilterBackend=u;function u(){}u.prototype={evictCachesForKey:s,dispose:s,clearWebGLCaches:s,resources:{},applyFilters:function(l,h,c,f,d){var p=d.getContext("2d");p.drawImage(h,0,0,c,f);var m=p.getImageData(0,0,c,f),g=p.getImageData(0,0,c,f),y={sourceWidth:c,sourceHeight:f,imageData:m,originalEl:h,originalImageData:g,canvasEl:d,ctx:p,filterBackend:this};return l.forEach(function(v){v.applyTo(y)}),(y.imageData.width!==c||y.imageData.height!==f)&&(d.width=y.imageData.width,d.height=y.imageData.height),p.putImageData(y.imageData,0,0),y}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(s){s&&this.setOptions(s)},setOptions:function(s){for(var u in s)this[u]=s[u]},createProgram:function(s,u,l){u=u||this.fragmentSource,l=l||this.vertexSource,e.webGlPrecision!=="highp"&&(u=u.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var h=s.createShader(s.VERTEX_SHADER);if(s.shaderSource(h,l),s.compileShader(h),!s.getShaderParameter(h,s.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+s.getShaderInfoLog(h));var c=s.createShader(s.FRAGMENT_SHADER);if(s.shaderSource(c,u),s.compileShader(c),!s.getShaderParameter(c,s.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+s.getShaderInfoLog(c));var f=s.createProgram();if(s.attachShader(f,h),s.attachShader(f,c),s.linkProgram(f),!s.getProgramParameter(f,s.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+s.getProgramInfoLog(f));var d=this.getAttributeLocations(s,f),p=this.getUniformLocations(s,f)||{};return p.uStepW=s.getUniformLocation(f,"uStepW"),p.uStepH=s.getUniformLocation(f,"uStepH"),{program:f,attributeLocations:d,uniformLocations:p}},getAttributeLocations:function(s,u){return{aPosition:s.getAttribLocation(u,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(s,u,l){var h=u.aPosition,c=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,c),s.enableVertexAttribArray(h),s.vertexAttribPointer(h,2,s.FLOAT,!1,0,0),s.bufferData(s.ARRAY_BUFFER,l,s.STATIC_DRAW)},_setupFrameBuffer:function(s){var u=s.context,l,h;s.passes>1?(l=s.destinationWidth,h=s.destinationHeight,(s.sourceWidth!==l||s.sourceHeight!==h)&&(u.deleteTexture(s.targetTexture),s.targetTexture=s.filterBackend.createTexture(u,l,h)),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,s.targetTexture,0)):(u.bindFramebuffer(u.FRAMEBUFFER,null),u.finish())},_swapTextures:function(s){s.passes--,s.pass++;var u=s.targetTexture;s.targetTexture=s.sourceTexture,s.sourceTexture=u},isNeutralState:function(){var s=this.mainParameter,u=e.Image.filters[this.type].prototype;if(s)if(Array.isArray(u[s])){for(var l=u[s].length;l--;)if(this[s][l]!==u[s][l])return!1;return!0}else return u[s]===this[s];else return!1},applyTo:function(s){s.webgl?(this._setupFrameBuffer(s),this.applyToWebGL(s),this._swapTextures(s)):this.applyTo2d(s)},retrieveShader:function(s){return s.programCache.hasOwnProperty(this.type)||(s.programCache[this.type]=this.createProgram(s.context)),s.programCache[this.type]},applyToWebGL:function(s){var u=s.context,l=this.retrieveShader(s);s.pass===0&&s.originalTexture?u.bindTexture(u.TEXTURE_2D,s.originalTexture):u.bindTexture(u.TEXTURE_2D,s.sourceTexture),u.useProgram(l.program),this.sendAttributeData(u,l.attributeLocations,s.aPosition),u.uniform1f(l.uniformLocations.uStepW,1/s.sourceWidth),u.uniform1f(l.uniformLocations.uStepH,1/s.sourceHeight),this.sendUniformData(u,l.uniformLocations),u.viewport(0,0,s.destinationWidth,s.destinationHeight),u.drawArrays(u.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(s,u,l){s.activeTexture(l),s.bindTexture(s.TEXTURE_2D,u),s.activeTexture(s.TEXTURE0)},unbindAdditionalTexture:function(s,u){s.activeTexture(u),s.bindTexture(s.TEXTURE_2D,null),s.activeTexture(s.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(s){this[this.mainParameter]=s},sendUniformData:function(){},createHelpLayer:function(s){if(!s.helpLayer){var u=document.createElement("canvas");u.width=s.sourceWidth,u.height=s.sourceHeight,s.helpLayer=u}},toObject:function(){var s={type:this.type},u=this.mainParameter;return u&&(s[u]=this[u]),s},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(s,u){var l=new e.Image.filters[s.type](s);return u&&u(l),l},function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.ColorMatrix=h(l.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(c){this.callSuper("initialize",c),this.matrix=this.matrix.slice(0)},applyTo2d:function(c){var f=c.imageData,d=f.data,p=d.length,m=this.matrix,g,y,v,b,w,x=this.colorsOnly;for(w=0;w<p;w+=4)g=d[w],y=d[w+1],v=d[w+2],x?(d[w]=g*m[0]+y*m[1]+v*m[2]+m[4]*255,d[w+1]=g*m[5]+y*m[6]+v*m[7]+m[9]*255,d[w+2]=g*m[10]+y*m[11]+v*m[12]+m[14]*255):(b=d[w+3],d[w]=g*m[0]+y*m[1]+v*m[2]+b*m[3]+m[4]*255,d[w+1]=g*m[5]+y*m[6]+v*m[7]+b*m[8]+m[9]*255,d[w+2]=g*m[10]+y*m[11]+v*m[12]+b*m[13]+m[14]*255,d[w+3]=g*m[15]+y*m[16]+v*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(c,f){return{uColorMatrix:c.getUniformLocation(f,"uColorMatrix"),uConstants:c.getUniformLocation(f,"uConstants")}},sendUniformData:function(c,f){var d=this.matrix,p=[d[0],d[1],d[2],d[3],d[5],d[6],d[7],d[8],d[10],d[11],d[12],d[13],d[15],d[16],d[17],d[18]],m=[d[4],d[9],d[14],d[19]];c.uniformMatrix4fv(f.uColorMatrix,!1,p),c.uniform4fv(f.uConstants,m)}}),u.Image.filters.ColorMatrix.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Brightness=h(l.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(c){if(this.brightness!==0){var f=c.imageData,d=f.data,p,m=d.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)d[p]=d[p]+g,d[p+1]=d[p+1]+g,d[p+2]=d[p+2]+g}},getUniformLocations:function(c,f){return{uBrightness:c.getUniformLocation(f,"uBrightness")}},sendUniformData:function(c,f){c.uniform1f(f.uBrightness,this.brightness)}}),u.Image.filters.Brightness.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.util.object.extend,h=u.Image.filters,c=u.util.createClass;h.Convolute=c(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(f){var d=Math.sqrt(this.matrix.length),p=this.type+"_"+d+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return f.programCache.hasOwnProperty(p)||(f.programCache[p]=this.createProgram(f.context,m)),f.programCache[p]},applyTo2d:function(f){var d=f.imageData,p=d.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),y=Math.floor(g/2),v=d.width,b=d.height,w=f.ctx.createImageData(v,b),x=w.data,S=this.opaque?1:0,E,A,k,T,O,F,I,R,U,B,W,Y,z;for(W=0;W<b;W++)for(B=0;B<v;B++){for(O=(W*v+B)*4,E=0,A=0,k=0,T=0,z=0;z<g;z++)for(Y=0;Y<g;Y++)I=W+z-y,F=B+Y-y,!(I<0||I>=b||F<0||F>=v)&&(R=(I*v+F)*4,U=m[z*g+Y],E+=p[R]*U,A+=p[R+1]*U,k+=p[R+2]*U,S||(T+=p[R+3]*U));x[O]=E,x[O+1]=A,x[O+2]=k,S?x[O+3]=p[O+3]:x[O+3]=T}f.imageData=w},getUniformLocations:function(f,d){return{uMatrix:f.getUniformLocation(d,"uMatrix"),uOpaque:f.getUniformLocation(d,"uOpaque"),uHalfSize:f.getUniformLocation(d,"uHalfSize"),uSize:f.getUniformLocation(d,"uSize")}},sendUniformData:function(f,d){f.uniform1fv(d.uMatrix,this.matrix)},toObject:function(){return l(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),u.Image.filters.Convolute.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Grayscale=h(l.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(c){var f=c.imageData,d=f.data,p,m=d.length,g,y=this.mode;for(p=0;p<m;p+=4)y==="average"?g=(d[p]+d[p+1]+d[p+2])/3:y==="lightness"?g=(Math.min(d[p],d[p+1],d[p+2])+Math.max(d[p],d[p+1],d[p+2]))/2:y==="luminosity"&&(g=.21*d[p]+.72*d[p+1]+.07*d[p+2]),d[p]=g,d[p+1]=g,d[p+2]=g},retrieveShader:function(c){var f=this.type+"_"+this.mode;if(!c.programCache.hasOwnProperty(f)){var d=this.fragmentSource[this.mode];c.programCache[f]=this.createProgram(c.context,d)}return c.programCache[f]},getUniformLocations:function(c,f){return{uMode:c.getUniformLocation(f,"uMode")}},sendUniformData:function(c,f){var d=1;c.uniform1i(f.uMode,d)},isNeutralState:function(){return!1}}),u.Image.filters.Grayscale.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Invert=h(l.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(c){var f=c.imageData,d=f.data,p,m=d.length;for(p=0;p<m;p+=4)d[p]=255-d[p],d[p+1]=255-d[p+1],d[p+2]=255-d[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(c,f){return{uInvert:c.getUniformLocation(f,"uInvert")}},sendUniformData:function(c,f){c.uniform1i(f.uInvert,this.invert)}}),u.Image.filters.Invert.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.util.object.extend,h=u.Image.filters,c=u.util.createClass;h.Noise=c(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(f){if(this.noise!==0){var d=f.imageData,p=d.data,m,g=p.length,y=this.noise,v;for(m=0,g=p.length;m<g;m+=4)v=(.5-Math.random())*y,p[m]+=v,p[m+1]+=v,p[m+2]+=v}},getUniformLocations:function(f,d){return{uNoise:f.getUniformLocation(d,"uNoise"),uSeed:f.getUniformLocation(d,"uSeed")}},sendUniformData:function(f,d){f.uniform1f(d.uNoise,this.noise/255),f.uniform1f(d.uSeed,Math.random())},toObject:function(){return l(this.callSuper("toObject"),{noise:this.noise})}}),u.Image.filters.Noise.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Pixelate=h(l.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(c){var f=c.imageData,d=f.data,p=f.height,m=f.width,g,y,v,b,w,x,S,E,A,k,T;for(y=0;y<p;y+=this.blocksize)for(v=0;v<m;v+=this.blocksize)for(g=y*4*m+v*4,b=d[g],w=d[g+1],x=d[g+2],S=d[g+3],k=Math.min(y+this.blocksize,p),T=Math.min(v+this.blocksize,m),E=y;E<k;E++)for(A=v;A<T;A++)g=E*4*m+A*4,d[g]=b,d[g+1]=w,d[g+2]=x,d[g+3]=S},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(c,f){return{uBlocksize:c.getUniformLocation(f,"uBlocksize"),uStepW:c.getUniformLocation(f,"uStepW"),uStepH:c.getUniformLocation(f,"uStepH")}},sendUniformData:function(c,f){c.uniform1f(f.uBlocksize,this.blocksize)}}),u.Image.filters.Pixelate.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.util.object.extend,h=u.Image.filters,c=u.util.createClass;h.RemoveColor=c(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(f){var d=f.imageData,p=d.data,m,g=this.distance*255,y,v,b,w=new u.Color(this.color).getSource(),x=[w[0]-g,w[1]-g,w[2]-g],S=[w[0]+g,w[1]+g,w[2]+g];for(m=0;m<p.length;m+=4)y=p[m],v=p[m+1],b=p[m+2],y>x[0]&&v>x[1]&&b>x[2]&&y<S[0]&&v<S[1]&&b<S[2]&&(p[m+3]=0)},getUniformLocations:function(f,d){return{uLow:f.getUniformLocation(d,"uLow"),uHigh:f.getUniformLocation(d,"uHigh")}},sendUniformData:function(f,d){var p=new u.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],y=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];f.uniform4fv(d.uLow,g),f.uniform4fv(d.uHigh,y)},toObject:function(){return l(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),u.Image.filters.RemoveColor.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass,c={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var f in c)l[f]=h(l.ColorMatrix,{type:f,matrix:c[f],mainParameter:!1,colorsOnly:!0}),u.Image.filters[f].fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric,l=u.Image.filters,h=u.util.createClass;l.BlendColor=h(l.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(c){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[c]+`}
}`},retrieveShader:function(c){var f=this.type+"_"+this.mode,d;return c.programCache.hasOwnProperty(f)||(d=this.buildSource(this.mode),c.programCache[f]=this.createProgram(c.context,d)),c.programCache[f]},applyTo2d:function(c){var f=c.imageData,d=f.data,p=d.length,m,g,y,v,b,w,x,S=1-this.alpha;x=new u.Color(this.color).getSource(),m=x[0]*this.alpha,g=x[1]*this.alpha,y=x[2]*this.alpha;for(var E=0;E<p;E+=4)switch(v=d[E],b=d[E+1],w=d[E+2],this.mode){case"multiply":d[E]=v*m/255,d[E+1]=b*g/255,d[E+2]=w*y/255;break;case"screen":d[E]=255-(255-v)*(255-m)/255,d[E+1]=255-(255-b)*(255-g)/255,d[E+2]=255-(255-w)*(255-y)/255;break;case"add":d[E]=v+m,d[E+1]=b+g,d[E+2]=w+y;break;case"diff":case"difference":d[E]=Math.abs(v-m),d[E+1]=Math.abs(b-g),d[E+2]=Math.abs(w-y);break;case"subtract":d[E]=v-m,d[E+1]=b-g,d[E+2]=w-y;break;case"darken":d[E]=Math.min(v,m),d[E+1]=Math.min(b,g),d[E+2]=Math.min(w,y);break;case"lighten":d[E]=Math.max(v,m),d[E+1]=Math.max(b,g),d[E+2]=Math.max(w,y);break;case"overlay":d[E]=m<128?2*v*m/255:255-2*(255-v)*(255-m)/255,d[E+1]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,d[E+2]=y<128?2*w*y/255:255-2*(255-w)*(255-y)/255;break;case"exclusion":d[E]=m+v-2*m*v/255,d[E+1]=g+b-2*g*b/255,d[E+2]=y+w-2*y*w/255;break;case"tint":d[E]=m+v*S,d[E+1]=g+b*S,d[E+2]=y+w*S}},getUniformLocations:function(c,f){return{uColor:c.getUniformLocation(f,"uColor")}},sendUniformData:function(c,f){var d=new u.Color(this.color).getSource();d[0]=this.alpha*d[0]/255,d[1]=this.alpha*d[1]/255,d[2]=this.alpha*d[2]/255,d[3]=this.alpha,c.uniform4fv(f.uColor,d)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),u.Image.filters.BlendColor.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric,l=u.Image.filters,h=u.util.createClass;l.BlendImage=h(l.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(c){var f=this.type+"_"+this.mode,d=this.fragmentSource[this.mode];return c.programCache.hasOwnProperty(f)||(c.programCache[f]=this.createProgram(c.context,d)),c.programCache[f]},applyToWebGL:function(c){var f=c.context,d=this.createTexture(c.filterBackend,this.image);this.bindAdditionalTexture(f,d,f.TEXTURE1),this.callSuper("applyToWebGL",c),this.unbindAdditionalTexture(f,f.TEXTURE1)},createTexture:function(c,f){return c.getCachedTexture(f.cacheKey,f._element)},calculateMatrix:function(){var c=this.image,f=c._element.width,d=c._element.height;return[1/c.scaleX,0,0,0,1/c.scaleY,0,-c.left/f,-c.top/d,1]},applyTo2d:function(c){var f=c.imageData,d=c.filterBackend.resources,p=f.data,m=p.length,g=f.width,y=f.height,v,b,w,x,S,E,A,k,T,O,F=this.image,I;d.blendImage||(d.blendImage=u.util.createCanvasElement()),T=d.blendImage,O=T.getContext("2d"),T.width!==g||T.height!==y?(T.width=g,T.height=y):O.clearRect(0,0,g,y),O.setTransform(F.scaleX,0,0,F.scaleY,F.left,F.top),O.drawImage(F._element,0,0,g,y),I=O.getImageData(0,0,g,y).data;for(var R=0;R<m;R+=4)switch(S=p[R],E=p[R+1],A=p[R+2],k=p[R+3],v=I[R],b=I[R+1],w=I[R+2],x=I[R+3],this.mode){case"multiply":p[R]=S*v/255,p[R+1]=E*b/255,p[R+2]=A*w/255,p[R+3]=k*x/255;break;case"mask":p[R+3]=x;break}},getUniformLocations:function(c,f){return{uTransformMatrix:c.getUniformLocation(f,"uTransformMatrix"),uImage:c.getUniformLocation(f,"uImage")}},sendUniformData:function(c,f){var d=this.calculateMatrix();c.uniform1i(f.uImage,1),c.uniformMatrix3fv(f.uTransformMatrix,!1,d)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),u.Image.filters.BlendImage.fromObject=function(c,f){u.Image.fromObject(c.image,function(d){var p=u.util.object.clone(c);p.image=d,f(new u.Image.filters.BlendImage(p))})}}(n),function(s){var u=s.fabric||(s.fabric={}),l=Math.pow,h=Math.floor,c=Math.sqrt,f=Math.abs,d=Math.round,p=Math.sin,m=Math.ceil,g=u.Image.filters,y=u.util.createClass;g.Resize=y(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,b){return{uDelta:v.getUniformLocation(b,"uDelta"),uTaps:v.getUniformLocation(b,"uTaps")}},sendUniformData:function(v,b){v.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(v){var b=this.getFilterWindow(),w=this.type+"_"+b;if(!v.programCache.hasOwnProperty(w)){var x=this.generateShader(b);v.programCache[w]=this.createProgram(v.context,x)}return v.programCache[w]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,w=this.getFilterWindow(),x=new Array(w),S=1;S<=w;S++)x[S-1]=v(S*b);return x},generateShader:function(x){for(var b=new Array(x),w=this.fragmentSourceTOP,x,S=1;S<=x;S++)b[S-1]=S+".0 * uDelta";return w+="uniform float uTaps["+x+`];
`,w+=`void main() {
`,w+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,w+=`  float sum = 1.0;
`,b.forEach(function(E,A){w+="  color += texture2D(uTexture, vTexCoord + "+E+") * uTaps["+A+`];
`,w+="  color += texture2D(uTexture, vTexCoord - "+E+") * uTaps["+A+`];
`,w+="  sum += 2.0 * uTaps["+A+`];
`}),w+=`  gl_FragColor = color / sum;
`,w+="}",w},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(b){if(b>=v||b<=-v)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var w=b/v;return p(b)/b*p(w)/w}},applyTo2d:function(v){var b=v.imageData,w=this.scaleX,x=this.scaleY;this.rcpScaleX=1/w,this.rcpScaleY=1/x;var S=b.width,E=b.height,A=d(S*w),k=d(E*x),T;this.resizeType==="sliceHack"?T=this.sliceByTwo(v,S,E,A,k):this.resizeType==="hermite"?T=this.hermiteFastResize(v,S,E,A,k):this.resizeType==="bilinear"?T=this.bilinearFiltering(v,S,E,A,k):this.resizeType==="lanczos"&&(T=this.lanczosResize(v,S,E,A,k)),v.imageData=T},sliceByTwo:function(v,b,w,x,S){var E=v.imageData,A=.5,k=!1,T=!1,O=b*A,F=w*A,I=u.filterBackend.resources,R,U,B=0,W=0,Y=b,z=0;for(I.sliceByTwo||(I.sliceByTwo=document.createElement("canvas")),R=I.sliceByTwo,(R.width<b*1.5||R.height<w)&&(R.width=b*1.5,R.height=w),U=R.getContext("2d"),U.clearRect(0,0,b*1.5,w),U.putImageData(E,0,0),x=h(x),S=h(S);!k||!T;)b=O,w=F,x<h(O*A)?O=h(O*A):(O=x,k=!0),S<h(F*A)?F=h(F*A):(F=S,T=!0),U.drawImage(R,B,W,b,w,Y,z,O,F),B=Y,W=z,z+=F;return U.getImageData(B,W,x,S)},lanczosResize:function(v,b,w,x,S){function E(M){var q,H,K,Z,J,X,ae,ie,ce,ge,Ce;for(z.x=(M+.5)*F,j.x=h(z.x),q=0;q<S;q++){for(z.y=(q+.5)*I,j.y=h(z.y),J=0,X=0,ae=0,ie=0,ce=0,H=j.x-B;H<=j.x+B;H++)if(!(H<0||H>=b)){ge=h(1e3*f(H-z.x)),Y[ge]||(Y[ge]={});for(var Ee=j.y-W;Ee<=j.y+W;Ee++)Ee<0||Ee>=w||(Ce=h(1e3*f(Ee-z.y)),Y[ge][Ce]||(Y[ge][Ce]=O(c(l(ge*R,2)+l(Ce*U,2))/1e3)),K=Y[ge][Ce],K>0&&(Z=(Ee*b+H)*4,J+=K,X+=K*A[Z],ae+=K*A[Z+1],ie+=K*A[Z+2],ce+=K*A[Z+3]))}Z=(q*x+M)*4,T[Z]=X/J,T[Z+1]=ae/J,T[Z+2]=ie/J,T[Z+3]=ce/J}return++M<x?E(M):k}var A=v.imageData.data,k=v.ctx.createImageData(x,S),T=k.data,O=this.lanczosCreate(this.lanczosLobes),F=this.rcpScaleX,I=this.rcpScaleY,R=2/this.rcpScaleX,U=2/this.rcpScaleY,B=m(F*this.lanczosLobes/2),W=m(I*this.lanczosLobes/2),Y={},z={},j={};return E(0)},bilinearFiltering:function(v,b,w,x,S){var E,A,k,T,O,F,I,R,U,B,W,Y,z=0,j,M=this.rcpScaleX,q=this.rcpScaleY,H=4*(b-1),K=v.imageData,Z=K.data,J=v.ctx.createImageData(x,S),X=J.data;for(I=0;I<S;I++)for(R=0;R<x;R++)for(O=h(M*R),F=h(q*I),U=M*R-O,B=q*I-F,j=4*(F*b+O),W=0;W<4;W++)E=Z[j+W],A=Z[j+4+W],k=Z[j+H+W],T=Z[j+H+4+W],Y=E*(1-U)*(1-B)+A*U*(1-B)+k*B*(1-U)+T*U*B,X[z++]=Y;return J},hermiteFastResize:function(v,b,w,x,S){for(var E=this.rcpScaleX,A=this.rcpScaleY,k=m(E/2),T=m(A/2),O=v.imageData,F=O.data,I=v.ctx.createImageData(x,S),R=I.data,U=0;U<S;U++)for(var B=0;B<x;B++){for(var W=(B+U*x)*4,Y=0,z=0,j=0,M=0,q=0,H=0,K=0,Z=(U+.5)*A,J=h(U*A);J<(U+1)*A;J++)for(var X=f(Z-(J+.5))/T,ae=(B+.5)*E,ie=X*X,ce=h(B*E);ce<(B+1)*E;ce++){var ge=f(ae-(ce+.5))/k,Ce=c(ie+ge*ge);Ce>1&&Ce<-1||(Y=2*Ce*Ce*Ce-3*Ce*Ce+1,Y>0&&(ge=4*(ce+J*b),K+=Y*F[ge+3],j+=Y,F[ge+3]<255&&(Y=Y*F[ge+3]/250),M+=Y*F[ge],q+=Y*F[ge+1],H+=Y*F[ge+2],z+=Y))}R[W]=M/z,R[W+1]=q/z,R[W+2]=H/z,R[W+3]=K/j}return I},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),u.Image.filters.Resize.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Contrast=h(l.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(c){if(this.contrast!==0){var f=c.imageData,d,m,p=f.data,m=p.length,g=Math.floor(this.contrast*255),y=259*(g+255)/(255*(259-g));for(d=0;d<m;d+=4)p[d]=y*(p[d]-128)+128,p[d+1]=y*(p[d+1]-128)+128,p[d+2]=y*(p[d+2]-128)+128}},getUniformLocations:function(c,f){return{uContrast:c.getUniformLocation(f,"uContrast")}},sendUniformData:function(c,f){c.uniform1f(f.uContrast,this.contrast)}}),u.Image.filters.Contrast.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Saturation=h(l.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(c){if(this.saturation!==0){var f=c.imageData,d=f.data,p=d.length,m=-this.saturation,g,y;for(g=0;g<p;g+=4)y=Math.max(d[g],d[g+1],d[g+2]),d[g]+=y!==d[g]?(y-d[g])*m:0,d[g+1]+=y!==d[g+1]?(y-d[g+1])*m:0,d[g+2]+=y!==d[g+2]?(y-d[g+2])*m:0}},getUniformLocations:function(c,f){return{uSaturation:c.getUniformLocation(f,"uSaturation")}},sendUniformData:function(c,f){c.uniform1f(f.uSaturation,-this.saturation)}}),u.Image.filters.Saturation.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Vibrance=h(l.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(c){if(this.vibrance!==0){var f=c.imageData,d=f.data,p=d.length,m=-this.vibrance,g,y,v,b;for(g=0;g<p;g+=4)y=Math.max(d[g],d[g+1],d[g+2]),v=(d[g]+d[g+1]+d[g+2])/3,b=Math.abs(y-v)*2/255*m,d[g]+=y!==d[g]?(y-d[g])*b:0,d[g+1]+=y!==d[g+1]?(y-d[g+1])*b:0,d[g+2]+=y!==d[g+2]?(y-d[g+2])*b:0}},getUniformLocations:function(c,f){return{uVibrance:c.getUniformLocation(f,"uVibrance")}},sendUniformData:function(c,f){c.uniform1f(f.uVibrance,-this.vibrance)}}),u.Image.filters.Vibrance.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Blur=h(l.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(c){c.webgl?(this.aspectRatio=c.sourceWidth/c.sourceHeight,c.passes++,this._setupFrameBuffer(c),this.horizontal=!0,this.applyToWebGL(c),this._swapTextures(c),this._setupFrameBuffer(c),this.horizontal=!1,this.applyToWebGL(c),this._swapTextures(c)):this.applyTo2d(c)},applyTo2d:function(c){c.imageData=this.simpleBlur(c)},simpleBlur:function(c){var f=c.filterBackend.resources,d,p,m=c.imageData.width,g=c.imageData.height;f.blurLayer1||(f.blurLayer1=u.util.createCanvasElement(),f.blurLayer2=u.util.createCanvasElement()),d=f.blurLayer1,p=f.blurLayer2,(d.width!==m||d.height!==g)&&(p.width=d.width=m,p.height=d.height=g);var y=d.getContext("2d"),v=p.getContext("2d"),b=15,w,x,S,E,A=this.blur*.06*.5;for(y.putImageData(c.imageData,0,0),v.clearRect(0,0,m,g),E=-15;E<=b;E++)w=(Math.random()-.5)/4,x=E/b,S=A*x*m+w,v.globalAlpha=1-Math.abs(x),v.drawImage(d,S,w),y.drawImage(p,0,0),v.globalAlpha=1,v.clearRect(0,0,p.width,p.height);for(E=-15;E<=b;E++)w=(Math.random()-.5)/4,x=E/b,S=A*x*g+w,v.globalAlpha=1-Math.abs(x),v.drawImage(d,w,S),y.drawImage(p,0,0),v.globalAlpha=1,v.clearRect(0,0,p.width,p.height);c.ctx.drawImage(d,0,0);var k=c.ctx.getImageData(0,0,d.width,d.height);return y.globalAlpha=1,y.clearRect(0,0,d.width,d.height),k},getUniformLocations:function(c,f){return{delta:c.getUniformLocation(f,"uDelta")}},sendUniformData:function(c,f){var d=this.chooseRightDelta();c.uniform2fv(f.delta,d)},chooseRightDelta:function(){var c=1,f=[0,0],d;return this.horizontal?this.aspectRatio>1&&(c=1/this.aspectRatio):this.aspectRatio<1&&(c=this.aspectRatio),d=c*this.blur*.12,this.horizontal?f[0]=d:f[1]=d,f}}),l.Blur.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Gamma=h(l.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(c){this.gamma=[1,1,1],l.BaseFilter.prototype.initialize.call(this,c)},applyTo2d:function(c){var f=c.imageData,d=f.data,p=this.gamma,m=d.length,g=1/p[0],y=1/p[1],v=1/p[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,g)*255,this.gVals[b]=Math.pow(b/255,y)*255,this.bVals[b]=Math.pow(b/255,v)*255;for(b=0,m=d.length;b<m;b+=4)d[b]=this.rVals[d[b]],d[b+1]=this.gVals[d[b+1]],d[b+2]=this.bVals[d[b+2]]},getUniformLocations:function(c,f){return{uGamma:c.getUniformLocation(f,"uGamma")}},sendUniformData:function(c,f){c.uniform3fv(f.uGamma,this.gamma)}}),u.Image.filters.Gamma.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.Composed=h(l.BaseFilter,{type:"Composed",subFilters:[],initialize:function(c){this.callSuper("initialize",c),this.subFilters=this.subFilters.slice(0)},applyTo:function(c){c.passes+=this.subFilters.length-1,this.subFilters.forEach(function(f){f.applyTo(c)})},toObject:function(){return u.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(c){return c.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(c){return!c.isNeutralState()})}}),u.Image.filters.Composed.fromObject=function(c,f){var d=c.subFilters||[],p=d.map(function(g){return new u.Image.filters[g.type](g)}),m=new u.Image.filters.Composed({subFilters:p});return f&&f(m),m}}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.Image.filters,h=u.util.createClass;l.HueRotation=h(l.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var c=this.rotation*Math.PI,f=u.util.cos(c),d=u.util.sin(c),p=1/3,m=Math.sqrt(p)*d,g=1-f;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=f+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=f+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=f+p*g},isNeutralState:function(c){return this.calculateMatrix(),l.BaseFilter.prototype.isNeutralState.call(this,c)},applyTo:function(c){this.calculateMatrix(),l.BaseFilter.prototype.applyTo.call(this,c)}}),u.Image.filters.HueRotation.fromObject=u.Image.filters.BaseFilter.fromObject}(n),function(s){var u=s.fabric||(s.fabric={}),l=u.util.object.clone;if(u.Text){u.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");u.Text=u.util.createClass(u.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:u.Object.prototype.stateProperties.concat(h),cacheProperties:u.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(c,f){this.styles=f?f.styles||{}:{},this.text=c,this.__skipDimension=!0,this.callSuper("initialize",f),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var c=this.path;c&&(c.segmentsInfo=u.util.getPathSegmentsInfo(c.path))},getMeasuringContext:function(){return u._measuringContext||(u._measuringContext=this.canvas&&this.canvas.contextCache||u.util.createCanvasElement().getContext("2d")),u._measuringContext},_splitText:function(){var c=this._splitTextIntoLines(this.text);return this.textLines=c.lines,this._textLines=c.graphemeLines,this._unwrappedTextLines=c._unwrappedLines,this._text=c.graphemeText,c},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var c,f,d,p,m,g,y,v=0,b=this._textLines.length;v<b;v++)if(!(this.textAlign!=="justify"&&(v===b-1||this.isEndOfWrapping(v)))&&(p=0,m=this._textLines[v],f=this.getLineWidth(v),f<this.width&&(y=this.textLines[v].match(this._reSpacesAndTabs)))){d=y.length,c=(this.width-f)/d;for(var w=0,x=m.length;w<=x;w++)g=this.__charBounds[v][w],this._reSpaceAndTab.test(m[w])?(g.width+=c,g.kernedWidth+=c,g.left+=p,p+=c):g.left+=p}},isEndOfWrapping:function(c){return c===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var c=this.callSuper("_getCacheCanvasDimensions"),f=this.fontSize;return c.width+=f*c.zoomX,c.height+=f*c.zoomY,c},_render:function(c){var f=this.path;f&&!f.isNotVisible()&&f._render(c),this._setTextStyles(c),this._renderTextLinesBackground(c),this._renderTextDecoration(c,"underline"),this._renderText(c),this._renderTextDecoration(c,"overline"),this._renderTextDecoration(c,"linethrough")},_renderText:function(c){this.paintFirst==="stroke"?(this._renderTextStroke(c),this._renderTextFill(c)):(this._renderTextFill(c),this._renderTextStroke(c))},_setTextStyles:function(c,f,d){c.textBaseline="alphabetic",c.font=this._getFontDeclaration(f,d)},calcTextWidth:function(){for(var c=this.getLineWidth(0),f=1,d=this._textLines.length;f<d;f++){var p=this.getLineWidth(f);p>c&&(c=p)}return c},_renderTextLine:function(c,f,d,p,m,g){this._renderChars(c,f,d,p,m,g)},_renderTextLinesBackground:function(c){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var f,d,p=c.fillStyle,m,g,y=this._getLeftOffset(),v=this._getTopOffset(),b=0,w=0,x,S,E=this.path,A,k=0,T=this._textLines.length;k<T;k++){if(f=this.getHeightOfLine(k),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",k)){v+=f;continue}m=this._textLines[k],d=this._getLineLeftOffset(k),w=0,b=0,g=this.getValueOfPropertyAt(k,0,"textBackgroundColor");for(var O=0,F=m.length;O<F;O++)x=this.__charBounds[k][O],S=this.getValueOfPropertyAt(k,O,"textBackgroundColor"),E?(c.save(),c.translate(x.renderLeft,x.renderTop),c.rotate(x.angle),c.fillStyle=S,S&&c.fillRect(-x.width/2,-f/this.lineHeight*(1-this._fontSizeFraction),x.width,f/this.lineHeight),c.restore()):S!==g?(A=y+d+b,this.direction==="rtl"&&(A=this.width-A-w),c.fillStyle=g,g&&c.fillRect(A,v,w,f/this.lineHeight),b=x.left,w=x.width,g=S):w+=x.kernedWidth;S&&!E&&(A=y+d+b,this.direction==="rtl"&&(A=this.width-A-w),c.fillStyle=S,c.fillRect(A,v,w,f/this.lineHeight)),v+=f}c.fillStyle=p,this._removeShadow(c)}},getFontCache:function(c){var f=c.fontFamily.toLowerCase();u.charWidthsCache[f]||(u.charWidthsCache[f]={});var d=u.charWidthsCache[f],p=c.fontStyle.toLowerCase()+"_"+(c.fontWeight+"").toLowerCase();return d[p]||(d[p]={}),d[p]},_measureChar:function(c,f,d,p){var m=this.getFontCache(f),g=this._getFontDeclaration(f),y=this._getFontDeclaration(p),v=d+c,b=g===y,w,x,S,E=f.fontSize/this.CACHE_FONT_SIZE,A;if(d&&m[d]!==void 0&&(S=m[d]),m[c]!==void 0&&(A=w=m[c]),b&&m[v]!==void 0&&(x=m[v],A=x-S),w===void 0||S===void 0||x===void 0){var k=this.getMeasuringContext();this._setTextStyles(k,f,!0)}return w===void 0&&(A=w=k.measureText(c).width,m[c]=w),S===void 0&&b&&d&&(S=k.measureText(d).width,m[d]=S),b&&x===void 0&&(x=k.measureText(v).width,m[v]=x,A=x-S),{width:w*E,kernedWidth:A*E}},getHeightOfChar:function(c,f){return this.getValueOfPropertyAt(c,f,"fontSize")},measureLine:function(c){var f=this._measureLine(c);return this.charSpacing!==0&&(f.width-=this._getWidthOfCharSpacing()),f.width<0&&(f.width=0),f},_measureLine:function(c){var f=0,d,p,m=this._textLines[c],g,y,v=0,b=new Array(m.length),w=0,x,S,E=this.path,A=this.pathSide==="right";for(this.__charBounds[c]=b,d=0;d<m.length;d++)p=m[d],y=this._getGraphemeBox(p,c,d,g),b[d]=y,f+=y.kernedWidth,g=p;if(b[d]={left:y?y.left+y.width:0,width:0,kernedWidth:0,height:this.fontSize},E){switch(S=E.segmentsInfo[E.segmentsInfo.length-1].length,x=u.util.getPointOnPath(E.path,0,E.segmentsInfo),x.x+=E.pathOffset.x,x.y+=E.pathOffset.y,this.textAlign){case"left":w=A?S-f:0;break;case"center":w=(S-f)/2;break;case"right":w=A?0:S-f;break}for(w+=this.pathStartOffset*(A?-1:1),d=A?m.length-1:0;A?d>=0:d<m.length;A?d--:d++)y=b[d],w>S?w%=S:w<0&&(w+=S),this._setGraphemeOnPath(w,y,x),w+=y.kernedWidth}return{width:f,numOfSpaces:v}},_setGraphemeOnPath:function(c,f,d){var p=c+f.kernedWidth/2,m=this.path,g=u.util.getPointOnPath(m.path,p,m.segmentsInfo);f.renderLeft=g.x-d.x,f.renderTop=g.y-d.y,f.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(c,f,d,p,m){var g=this.getCompleteStyleDeclaration(f,d),y=p?this.getCompleteStyleDeclaration(f,d-1):{},v=this._measureChar(c,g,p,y),b=v.kernedWidth,w=v.width,x;this.charSpacing!==0&&(x=this._getWidthOfCharSpacing(),w+=x,b+=x);var S={width:w,left:0,height:g.fontSize,kernedWidth:b,deltaY:g.deltaY};if(d>0&&!m){var E=this.__charBounds[f][d-1];S.left=E.left+E.width+v.kernedWidth-v.width}return S},getHeightOfLine:function(c){if(this.__lineHeights[c])return this.__lineHeights[c];for(var f=this._textLines[c],d=this.getHeightOfChar(c,0),p=1,m=f.length;p<m;p++)d=Math.max(this.getHeightOfChar(c,p),d);return this.__lineHeights[c]=d*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var c,f=0,d=0,p=this._textLines.length;d<p;d++)c=this.getHeightOfLine(d),f+=d===p-1?c/this.lineHeight:c;return f},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(c,f){c.save();for(var d=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,y=this._textLines.length;g<y;g++){var v=this.getHeightOfLine(g),b=v/this.lineHeight,w=this._getLineLeftOffset(g);this._renderTextLine(f,c,this._textLines[g],p+w,m+d+b,g),d+=v}c.restore()},_renderTextFill:function(c){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(c,"fillText")},_renderTextStroke:function(c){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(c),c.save(),this._setLineDash(c,this.strokeDashArray),c.beginPath(),this._renderTextCommon(c,"strokeText"),c.closePath(),c.restore())},_renderChars:function(c,f,d,p,m,g){var y=this.getHeightOfLine(g),v=this.textAlign.indexOf("justify")!==-1,b,w,x="",S,E=0,A,k=this.path,T=!v&&this.charSpacing===0&&this.isEmptyStyles(g)&&!k,O=this.direction==="ltr",F=this.direction==="ltr"?1:-1,I;if(f.save(),m-=y*this._fontSizeFraction/this.lineHeight,T){f.canvas.setAttribute("dir",O?"ltr":"rtl"),f.direction=O?"ltr":"rtl",f.textAlign=O?"left":"right",this._renderChar(c,f,g,0,d.join(""),p,m,y),f.restore();return}for(var R=0,U=d.length-1;R<=U;R++)A=R===U||this.charSpacing||k,x+=d[R],S=this.__charBounds[g][R],E===0?(p+=F*(S.kernedWidth-S.width),E+=S.width):E+=S.kernedWidth,v&&!A&&this._reSpaceAndTab.test(d[R])&&(A=!0),A||(b=b||this.getCompleteStyleDeclaration(g,R),w=this.getCompleteStyleDeclaration(g,R+1),A=this._hasStyleChanged(b,w)),A&&(k?(f.save(),f.translate(S.renderLeft,S.renderTop),f.rotate(S.angle),this._renderChar(c,f,g,R,x,-E/2,0,y),f.restore()):(I=p,f.canvas.setAttribute("dir",O?"ltr":"rtl"),f.direction=O?"ltr":"rtl",f.textAlign=O?"left":"right",this._renderChar(c,f,g,R,x,I,m,y)),x="",b=w,p+=F*E,E=0);f.restore()},_applyPatternGradientTransformText:function(c){var f=u.util.createCanvasElement(),d,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return f.width=p,f.height=m,d=f.getContext("2d"),d.beginPath(),d.moveTo(0,0),d.lineTo(p,0),d.lineTo(p,m),d.lineTo(0,m),d.closePath(),d.translate(p/2,m/2),d.fillStyle=c.toLive(d),this._applyPatternGradientTransform(d,c),d.fill(),d.createPattern(f,"no-repeat")},handleFiller:function(c,f,d){var p,m;return d.toLive?d.gradientUnits==="percentage"||d.gradientTransform||d.patternTransform?(p=-this.width/2,m=-this.height/2,c.translate(p,m),c[f]=this._applyPatternGradientTransformText(d),{offsetX:p,offsetY:m}):(c[f]=d.toLive(c,this),this._applyPatternGradientTransform(c,d)):(c[f]=d,{offsetX:0,offsetY:0})},_setStrokeStyles:function(c,f){return c.lineWidth=f.strokeWidth,c.lineCap=this.strokeLineCap,c.lineDashOffset=this.strokeDashOffset,c.lineJoin=this.strokeLineJoin,c.miterLimit=this.strokeMiterLimit,this.handleFiller(c,"strokeStyle",f.stroke)},_setFillStyles:function(c,f){return this.handleFiller(c,"fillStyle",f.fill)},_renderChar:function(c,f,d,p,m,g,y){var v=this._getStyleDeclaration(d,p),b=this.getCompleteStyleDeclaration(d,p),w=c==="fillText"&&b.fill,x=c==="strokeText"&&b.stroke&&b.strokeWidth,S,E;!x&&!w||(f.save(),w&&(S=this._setFillStyles(f,b)),x&&(E=this._setStrokeStyles(f,b)),f.font=this._getFontDeclaration(b),v&&v.textBackgroundColor&&this._removeShadow(f),v&&v.deltaY&&(y+=v.deltaY),w&&f.fillText(m,g-S.offsetX,y-S.offsetY),x&&f.strokeText(m,g-E.offsetX,y-E.offsetY),f.restore())},setSuperscript:function(c,f){return this._setScript(c,f,this.superscript)},setSubscript:function(c,f){return this._setScript(c,f,this.subscript)},_setScript:function(c,f,d){var p=this.get2DCursorLocation(c,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),y={fontSize:m*d.size,deltaY:g+m*d.baseline};return this.setSelectionStyles(y,c,f),this},_hasStyleChanged:function(c,f){return c.fill!==f.fill||c.stroke!==f.stroke||c.strokeWidth!==f.strokeWidth||c.fontSize!==f.fontSize||c.fontFamily!==f.fontFamily||c.fontWeight!==f.fontWeight||c.fontStyle!==f.fontStyle||c.deltaY!==f.deltaY},_hasStyleChangedForSvg:function(c,f){return this._hasStyleChanged(c,f)||c.overline!==f.overline||c.underline!==f.underline||c.linethrough!==f.linethrough},_getLineLeftOffset:function(c){var f=this.getLineWidth(c),d=this.width-f,p=this.textAlign,m=this.direction,y,g=0,y=this.isEndOfWrapping(c);return p==="justify"||p==="justify-center"&&!y||p==="justify-right"&&!y||p==="justify-left"&&!y?0:(p==="center"&&(g=d/2),p==="right"&&(g=d),p==="justify-center"&&(g=d/2),p==="justify-right"&&(g=d),m==="rtl"&&(g-=d),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var c=this._forceClearCache;return c||(c=this.hasStateChanged("_dimensionAffectingProps")),c&&(this.dirty=!0,this._forceClearCache=!1),c},getLineWidth:function(c){if(this.__lineWidths[c])return this.__lineWidths[c];var f,d=this._textLines[c],p;return d===""?f=0:(p=this.measureLine(c),f=p.width),this.__lineWidths[c]=f,f},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(c,f,d){var p=this._getStyleDeclaration(c,f);return p&&typeof p[d]<"u"?p[d]:this[d]},_renderTextDecoration:function(c,f){if(!(!this[f]&&!this.styleHas(f))){for(var d,p,m,g,y,v,b,w,x=this._getLeftOffset(),S=this._getTopOffset(),E,A,k,T,O,F,I,R,U=this.path,B=this._getWidthOfCharSpacing(),W=this.offsets[f],Y=0,z=this._textLines.length;Y<z;Y++){if(d=this.getHeightOfLine(Y),!this[f]&&!this.styleHas(f,Y)){S+=d;continue}b=this._textLines[Y],F=d/this.lineHeight,g=this._getLineLeftOffset(Y),A=0,k=0,w=this.getValueOfPropertyAt(Y,0,f),R=this.getValueOfPropertyAt(Y,0,"fill"),E=S+F*(1-this._fontSizeFraction),p=this.getHeightOfChar(Y,0),y=this.getValueOfPropertyAt(Y,0,"deltaY");for(var j=0,M=b.length;j<M;j++)if(T=this.__charBounds[Y][j],O=this.getValueOfPropertyAt(Y,j,f),I=this.getValueOfPropertyAt(Y,j,"fill"),m=this.getHeightOfChar(Y,j),v=this.getValueOfPropertyAt(Y,j,"deltaY"),U&&O&&I)c.save(),c.fillStyle=R,c.translate(T.renderLeft,T.renderTop),c.rotate(T.angle),c.fillRect(-T.kernedWidth/2,W*m+v,T.kernedWidth,this.fontSize/15),c.restore();else if((O!==w||I!==R||m!==p||v!==y)&&k>0){var q=x+g+A;this.direction==="rtl"&&(q=this.width-q-k),w&&R&&(c.fillStyle=R,c.fillRect(q,E+W*p+y,k,this.fontSize/15)),A=T.left,k=T.width,w=O,R=I,p=m,y=v}else k+=T.kernedWidth;var q=x+g+A;this.direction==="rtl"&&(q=this.width-q-k),c.fillStyle=I,O&&I&&c.fillRect(q,E+W*p+y,k-B,this.fontSize/15),S+=d}this._removeShadow(c)}},_getFontDeclaration:function(c,f){var d=c||this,p=this.fontFamily,m=u.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?d.fontFamily:'"'+d.fontFamily+'"';return[u.isLikelyNode?d.fontWeight:d.fontStyle,u.isLikelyNode?d.fontStyle:d.fontWeight,f?this.CACHE_FONT_SIZE+"px":d.fontSize+"px",g].join(" ")},render:function(c){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",c)))},_splitTextIntoLines:function(c){for(var f=c.split(this._reNewline),d=new Array(f.length),p=[`
`],m=[],g=0;g<f.length;g++)d[g]=u.util.string.graphemeSplit(f[g]),m=m.concat(d[g],p);return m.pop(),{_unwrappedLines:d,lines:f,graphemeText:m,graphemeLines:d}},toObject:function(c){var f=h.concat(c),d=this.callSuper("toObject",f);return d.styles=l(this.styles,!0),d.path&&(d.path=this.path.toObject()),d},set:function(c,f){this.callSuper("set",c,f);var d=!1,p=!1;if(typeof c=="object")for(var m in c)m==="path"&&this.setPathInfo(),d=d||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else d=this._dimensionAffectingProps.indexOf(c)!==-1,p=c==="path";return p&&this.setPathInfo(),d&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),u.Text.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),u.Text.DEFAULT_SVG_FONT_SIZE=16,u.Text.fromElement=function(c,f,d){if(!c)return f(null);var p=u.parseAttributes(c,u.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(d=u.util.object.extend(d?l(d):{},p),d.top=d.top||0,d.left=d.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(d.underline=!0),g.indexOf("overline")!==-1&&(d.overline=!0),g.indexOf("line-through")!==-1&&(d.linethrough=!0),delete d.textDecoration}"dx"in p&&(d.left+=p.dx),"dy"in p&&(d.top+=p.dy),"fontSize"in d||(d.fontSize=u.Text.DEFAULT_SVG_FONT_SIZE);var y="";"textContent"in c?y=c.textContent:"firstChild"in c&&c.firstChild!==null&&"data"in c.firstChild&&c.firstChild.data!==null&&(y=c.firstChild.data),y=y.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=d.strokeWidth;d.strokeWidth=0;var b=new u.Text(y,d),w=b.getScaledHeight()/b.height,x=(b.height+b.strokeWidth)*b.lineHeight-b.height,S=x*w,E=b.getScaledHeight()+S,A=0;m==="center"&&(A=b.getScaledWidth()/2),m==="right"&&(A=b.getScaledWidth()),b.set({left:b.left-A,top:b.top-(E-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof v<"u"?v:1}),f(b)},u.Text.fromObject=function(c,f){var d=l(c),p=c.path;return delete d.path,u.Object._fromObject("Text",d,function(m){p?u.Object._fromObject("Path",p,function(g){m.set("path",g),f(m)},"path"):f(m)},"text")},u.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],u.util.createAccessors&&u.util.createAccessors(u.Text)}(n),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(s){if(!this.styles||typeof s<"u"&&!this.styles[s])return!0;var u=typeof s>"u"?this.styles:{line:this.styles[s]};for(var l in u)for(var h in u[l])for(var c in u[l][h])return!1;return!0},styleHas:function(s,u){if(!this.styles||!s||s===""||typeof u<"u"&&!this.styles[u])return!1;var l=typeof u>"u"?this.styles:{0:this.styles[u]};for(var h in l)for(var c in l[h])if(typeof l[h][c][s]<"u")return!0;return!1},cleanStyle:function(s){if(!this.styles||!s||s==="")return!1;var u=this.styles,l=0,h,c,f=!0,d=0,p;for(var m in u){h=0;for(var g in u[m]){var p=u[m][g],y=p.hasOwnProperty(s);l++,y?(c?p[s]!==c&&(f=!1):c=p[s],p[s]===this[s]&&delete p[s]):f=!1,Object.keys(p).length!==0?h++:delete u[m][g]}h===0&&delete u[m]}for(var v=0;v<this._textLines.length;v++)d+=this._textLines[v].length;f&&l===d&&(this[s]=c,this.removeStyle(s))},removeStyle:function(s){if(!(!this.styles||!s||s==="")){var u=this.styles,l,h,c;for(h in u){l=u[h];for(c in l)delete l[c][s],Object.keys(l[c]).length===0&&delete l[c];Object.keys(l).length===0&&delete u[h]}}},_extendStyles:function(s,u){var l=this.get2DCursorLocation(s);this._getLineStyle(l.lineIndex)||this._setLineStyle(l.lineIndex),this._getStyleDeclaration(l.lineIndex,l.charIndex)||this._setStyleDeclaration(l.lineIndex,l.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(l.lineIndex,l.charIndex),u)},get2DCursorLocation:function(s,u){typeof s>"u"&&(s=this.selectionStart);for(var l=u?this._unwrappedTextLines:this._textLines,h=l.length,c=0;c<h;c++){if(s<=l[c].length)return{lineIndex:c,charIndex:s};s-=l[c].length+this.missingNewlineOffset(c)}return{lineIndex:c-1,charIndex:l[c-1].length<s?l[c-1].length:s}},getSelectionStyles:function(s,u,l){typeof s>"u"&&(s=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||s);for(var h=[],c=s;c<u;c++)h.push(this.getStyleAtPosition(c,l));return h},getStyleAtPosition:function(s,u){var l=this.get2DCursorLocation(s),h=u?this.getCompleteStyleDeclaration(l.lineIndex,l.charIndex):this._getStyleDeclaration(l.lineIndex,l.charIndex);return h||{}},setSelectionStyles:function(s,u,l){typeof u>"u"&&(u=this.selectionStart||0),typeof l>"u"&&(l=this.selectionEnd||u);for(var h=u;h<l;h++)this._extendStyles(h,s);return this._forceClearCache=!0,this},_getStyleDeclaration:function(s,u){var l=this.styles&&this.styles[s];return l?l[u]:null},getCompleteStyleDeclaration:function(s,u){for(var l=this._getStyleDeclaration(s,u)||{},h={},c,f=0;f<this._styleProperties.length;f++)c=this._styleProperties[f],h[c]=typeof l[c]>"u"?this[c]:l[c];return h},_setStyleDeclaration:function(s,u,l){this.styles[s][u]=l},_deleteStyleDeclaration:function(s,u){delete this.styles[s][u]},_getLineStyle:function(s){return!!this.styles[s]},_setLineStyle:function(s){this.styles[s]={}},_deleteLineStyle:function(s){delete this.styles[s]}})}(),function(){function s(u){u.textDecoration&&(u.textDecoration.indexOf("underline")>-1&&(u.underline=!0),u.textDecoration.indexOf("line-through")>-1&&(u.linethrough=!0),u.textDecoration.indexOf("overline")>-1&&(u.overline=!0),delete u.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(u,l){this.callSuper("initialize",u,l),this.initBehavior()},setSelectionStart:function(u){u=Math.max(u,0),this._updateAndFire("selectionStart",u)},setSelectionEnd:function(u){u=Math.min(u,this.text.length),this._updateAndFire("selectionEnd",u)},_updateAndFire:function(u,l){this[u]!==l&&(this._fireSelectionChanged(),this[u]=l),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(u){this.clearContextTop(),this.callSuper("render",u),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(u){this.callSuper("_render",u)},clearContextTop:function(u){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var l=this.canvas.contextTop,h=this.canvas.viewportTransform;l.save(),l.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(l),this._clearTextArea(l),u||l.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var u=this._getCursorBoundaries(),l=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(u,l):this.renderSelection(u,l),l.restore()}},_clearTextArea:function(u){var l=this.width+4,h=this.height+4;u.clearRect(-l/2,-h/2,l,h)},_getCursorBoundaries:function(u){typeof u>"u"&&(u=this.selectionStart);var l=this._getLeftOffset(),h=this._getTopOffset(),c=this._getCursorBoundariesOffsets(u);return{left:l,top:h,leftOffset:c.left,topOffset:c.top}},_getCursorBoundariesOffsets:function(u){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var l,h,c,f=0,d=0,p,m=this.get2DCursorLocation(u);c=m.charIndex,h=m.lineIndex;for(var g=0;g<h;g++)f+=this.getHeightOfLine(g);l=this._getLineLeftOffset(h);var y=this.__charBounds[h][c];return y&&(d=y.left),this.charSpacing!==0&&c===this._textLines[h].length&&(d-=this._getWidthOfCharSpacing()),p={top:f,left:l+(d>0?d:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(u,l){var h=this.get2DCursorLocation(),c=h.lineIndex,f=h.charIndex>0?h.charIndex-1:0,d=this.getValueOfPropertyAt(c,f,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=u.topOffset,y=this.getValueOfPropertyAt(c,f,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(c)/this.lineHeight-d*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(u,l),l.fillStyle=this.cursorColor||this.getValueOfPropertyAt(c,f,"fill"),l.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,l.fillRect(u.left+u.leftOffset-m/2,g+u.top+y,m,d)},renderSelection:function(u,l){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,c=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,f=this.textAlign.indexOf("justify")!==-1,d=this.get2DCursorLocation(h),p=this.get2DCursorLocation(c),m=d.lineIndex,g=p.lineIndex,y=d.charIndex<0?0:d.charIndex,v=p.charIndex<0?0:p.charIndex,b=m;b<=g;b++){var w=this._getLineLeftOffset(b)||0,x=this.getHeightOfLine(b),S=0,E=0,A=0;if(b===m&&(E=this.__charBounds[m][y].left),b>=m&&b<g)A=f&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(v===0)A=this.__charBounds[g][v].left;else{var k=this._getWidthOfCharSpacing();A=this.__charBounds[g][v-1].left+this.__charBounds[g][v-1].width-k}S=x,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(x/=this.lineHeight);var T=u.left+w+E,O=A-E,F=x,I=0;this.inCompositionMode?(l.fillStyle=this.compositionColor||"black",F=1,I=x):l.fillStyle=this.selectionColor,this.direction==="rtl"&&(T=this.width-T-O),l.fillRect(T,u.top+u.topOffset+I,O,F),u.topOffset+=S}},getCurrentCharFontSize:function(){var u=this._getCurrentCharIndex();return this.getValueOfPropertyAt(u.l,u.c,"fontSize")},getCurrentCharColor:function(){var u=this._getCurrentCharIndex();return this.getValueOfPropertyAt(u.l,u.c,"fill")},_getCurrentCharIndex:function(){var u=this.get2DCursorLocation(this.selectionStart,!0),l=u.charIndex>0?u.charIndex-1:0;return{l:u.lineIndex,c:l}}}),e.IText.fromObject=function(u,l){if(s(u),u.styles)for(var h in u.styles)for(var c in u.styles[h])s(u.styles[h][c]);e.Object._fromObject("IText",u,l,"text")}}(),function(){var s=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var u=this;this.on("added",function(){var l=u.canvas;l&&(l._hasITextHandlers||(l._hasITextHandlers=!0,u._initCanvasHandlers(l)),l._iTextInstances=l._iTextInstances||[],l._iTextInstances.push(u))})},initRemovedHandler:function(){var u=this;this.on("removed",function(){var l=u.canvas;l&&(l._iTextInstances=l._iTextInstances||[],e.util.removeFromArray(l._iTextInstances,u),l._iTextInstances.length===0&&(l._hasITextHandlers=!1,u._removeCanvasHandlers(l)))})},_initCanvasHandlers:function(u){u._mouseUpITextHandler=function(){u._iTextInstances&&u._iTextInstances.forEach(function(l){l.__isMousedown=!1})},u.on("mouse:up",u._mouseUpITextHandler)},_removeCanvasHandlers:function(u){u.off("mouse:up",u._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(u,l,h,c){var f;return f={isAborted:!1,abort:function(){this.isAborted=!0}},u.animate("_currentCursorOpacity",l,{duration:h,onComplete:function(){f.isAborted||u[c]()},onChange:function(){u.canvas&&u.selectionStart===u.selectionEnd&&u.renderCursorOrSelection()},abort:function(){return f.isAborted}}),f},_onTickComplete:function(){var u=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){u._currentTickCompleteState=u._animateCursor(u,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(u){var l=this,h=u?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){l._tick()},h)},abortCursorAnimation:function(){var u=this._currentTickState||this._currentTickCompleteState,l=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,u&&l&&l.clearContext(l.contextTop||l.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(u){var l=0,h=u-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)l++,h--;for(;/\S/.test(this._text[h])&&h>-1;)l++,h--;return u-l},findWordBoundaryRight:function(u){var l=0,h=u;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)l++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)l++,h++;return u+l},findLineBoundaryLeft:function(u){for(var l=0,h=u-1;!/\n/.test(this._text[h])&&h>-1;)l++,h--;return u-l},findLineBoundaryRight:function(u){for(var l=0,h=u;!/\n/.test(this._text[h])&&h<this._text.length;)l++,h++;return u+l},searchWordBoundary:function(u,l){for(var h=this._text,c=this._reSpace.test(h[u])?u-1:u,f=h[c],d=e.reNonWord;!d.test(f)&&c>0&&c<h.length;)c+=l,f=h[c];return d.test(f)&&(c+=l===1?0:1),c},selectWord:function(u){u=u||this.selectionStart;var l=this.searchWordBoundary(u,-1),h=this.searchWordBoundary(u,1);this.selectionStart=l,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(u){u=u||this.selectionStart;var l=this.findLineBoundaryLeft(u),h=this.findLineBoundaryRight(u);return this.selectionStart=l,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(u){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(u),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(u){u._iTextInstances&&u._iTextInstances.forEach(function(l){l.selected=!1,l.isEditing&&l.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(u){if(!(!this.__isMousedown||!this.isEditing)){var l=this.getSelectionStartFromPointer(u.e),h=this.selectionStart,c=this.selectionEnd;(l!==this.__selectionStartOnMouseDown||h===c)&&(h===l||c===l)||(l>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=l):(this.selectionStart=l,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==c)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(u,l,h){var c=h.slice(0,u),f=e.util.string.graphemeSplit(c).length;if(u===l)return{selectionStart:f,selectionEnd:f};var d=h.slice(u,l),p=e.util.string.graphemeSplit(d).length;return{selectionStart:f,selectionEnd:f+p}},fromGraphemeToStringSelection:function(u,l,h){var c=h.slice(0,u),f=c.join("").length;if(u===l)return{selectionStart:f,selectionEnd:f};var d=h.slice(u,l),p=d.join("").length;return{selectionStart:f,selectionEnd:f+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var u=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=u.selectionStart,this.hiddenTextarea.selectionEnd=u.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var u=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=u.selectionEnd,this.inCompositionMode||(this.selectionStart=u.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var u=this._calcTextareaPosition();this.hiddenTextarea.style.left=u.left,this.hiddenTextarea.style.top=u.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var u=this.inCompositionMode?this.compositionStart:this.selectionStart,l=this._getCursorBoundaries(u),h=this.get2DCursorLocation(u),c=h.lineIndex,f=h.charIndex,d=this.getValueOfPropertyAt(c,f,"fontSize")*this.lineHeight,p=l.leftOffset,m=this.calcTransformMatrix(),g={x:l.left+p,y:l.top+l.topOffset+d},y=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,b=v.width/y,w=v.height/y,x=b-d,S=w-d,E=v.clientWidth/b,A=v.clientHeight/w;return g=e.util.transformPoint(g,m),g=e.util.transformPoint(g,this.canvas.viewportTransform),g.x*=E,g.y*=A,g.x<0&&(g.x=0),g.x>x&&(g.x=x),g.y<0&&(g.y=0),g.y>S&&(g.y=S),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:d+"px",charHeight:d}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var u=this._textBeforeEdit!==this.text,l=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,l&&(l.blur&&l.blur(),l.parentNode&&l.parentNode.removeChild(l)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),u&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),u&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var u in this.styles)this._textLines[u]||delete this.styles[u]},removeStyleFromTo:function(u,l){var h=this.get2DCursorLocation(u,!0),c=this.get2DCursorLocation(l,!0),f=h.lineIndex,d=h.charIndex,p=c.lineIndex,m=c.charIndex,g,y;if(f!==p){if(this.styles[f])for(g=d;g<this._unwrappedTextLines[f].length;g++)delete this.styles[f][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)y=this.styles[p][g],y&&(this.styles[f]||(this.styles[f]={}),this.styles[f][d+g-m]=y);for(g=f+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,f-p)}else if(this.styles[f]){y=this.styles[f];var v=m-d,b,w;for(g=d;g<m;g++)delete y[g];for(w in this.styles[f])b=parseInt(w,10),b>=m&&(y[b-v]=y[w],delete y[w])}},shiftLineStyles:function(u,l){var h=s(this.styles);for(var c in this.styles){var f=parseInt(c,10);f>u&&(this.styles[f+l]=h[f],h[f-l]||delete this.styles[f])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(u,l,h,c){var f,d={},p=!1,m=this._unwrappedTextLines[u].length===l;h||(h=1),this.shiftLineStyles(u,h),this.styles[u]&&(f=this.styles[u][l===0?l:l-1]);for(var g in this.styles[u]){var y=parseInt(g,10);y>=l&&(p=!0,d[y-l]=this.styles[u][g],m&&l===0||delete this.styles[u][g])}var v=!1;for(p&&!m&&(this.styles[u+h]=d,v=!0),v&&h--;h>0;)c&&c[h-1]?this.styles[u+h]={0:s(c[h-1])}:f?this.styles[u+h]={0:s(f)}:delete this.styles[u+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(u,l,h,c){this.styles||(this.styles={});var f=this.styles[u],d=f?s(f):{};h||(h=1);for(var p in d){var m=parseInt(p,10);m>=l&&(f[m+h]=d[m],d[m-h]||delete f[m])}if(this._forceClearCache=!0,c){for(;h--;)Object.keys(c[h]).length&&(this.styles[u]||(this.styles[u]={}),this.styles[u][l+h]=s(c[h]));return}if(f)for(var g=f[l?l-1:1];g&&h--;)this.styles[u][l+h]=s(g)},insertNewStyleBlock:function(u,l,h){for(var c=this.get2DCursorLocation(l,!0),f=[0],d=0,p=0;p<u.length;p++)u[p]===`
`?(d++,f[d]=0):f[d]++;f[0]>0&&(this.insertCharStyleObject(c.lineIndex,c.charIndex,f[0],h),h=h&&h.slice(f[0]+1)),d&&this.insertNewlineStyleObject(c.lineIndex,c.charIndex+f[0],d);for(var p=1;p<d;p++)f[p]>0?this.insertCharStyleObject(c.lineIndex+p,0,f[p],h):h&&(this.styles[c.lineIndex+p][0]=h[0]),h=h&&h.slice(f[p]+1);f[p]>0&&this.insertCharStyleObject(c.lineIndex+p,0,f[p],h)},setSelectionStartEndWithShift:function(u,l,h){h<=u?(l===u?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=u),this.selectionStart=h):h>u&&h<l?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(l===u?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=l),this.selectionEnd=h)},setSelectionInBoundaries:function(){var u=this.text.length;this.selectionStart>u?this.selectionStart=u:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>u?this.selectionEnd=u:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(s){if(this.canvas){this.__newClickTime=+new Date;var u=s.pointer;this.isTripleClick(u)&&(this.fire("tripleclick",s),this._stopEvent(s.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=u,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(s){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===s.x&&this.__lastPointer.y===s.y},_stopEvent:function(s){s.preventDefault&&s.preventDefault(),s.stopPropagation&&s.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(s){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(s.e))},tripleClickHandler:function(s){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(s.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(s){!this.canvas||!this.editable||s.e.button&&s.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(s.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(s){!this.canvas||!this.editable||s.e.button&&s.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(s){if(this.__isMousedown=!1,!(!this.editable||this.group||s.transform&&s.transform.actionPerformed||s.e.button&&s.e.button!==1)){if(this.canvas){var u=this.canvas._activeObject;if(u&&u!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(s.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(s){var u=this.getSelectionStartFromPointer(s),l=this.selectionStart,h=this.selectionEnd;s.shiftKey?this.setSelectionStartEndWithShift(l,h,u):(this.selectionStart=u,this.selectionEnd=u),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(s){for(var u=this.getLocalPointer(s),l=0,h=0,c=0,f=0,d=0,p,m,g=0,y=this._textLines.length;g<y&&c<=u.y;g++)c+=this.getHeightOfLine(g)*this.scaleY,d=g,g>0&&(f+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(d),h=p*this.scaleX,m=this._textLines[d],this.direction==="rtl"&&(u.x=this.width*this.scaleX-u.x+h);for(var v=0,b=m.length;v<b&&(l=h,h+=this.__charBounds[d][v].kernedWidth*this.scaleX,h<=u.x);v++)f++;return this._getNewSelectionStartFromOffset(u,l,h,f,b)},_getNewSelectionStartFromOffset:function(s,u,l,h,c){var f=s.x-u,d=l-s.x,p=d>f||d<0?0:1,m=h+p;return this.flipX&&(m=c-m),m>this._text.length&&(m=this._text.length),m}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var s=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+s.top+"; left: "+s.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+s.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(s){if(this.isEditing){var u=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(s.keyCode in u)this[u[s.keyCode]](s);else if(s.keyCode in this.ctrlKeysMapDown&&(s.ctrlKey||s.metaKey))this[this.ctrlKeysMapDown[s.keyCode]](s);else return;s.stopImmediatePropagation(),s.preventDefault(),s.keyCode>=33&&s.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(s){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(s.keyCode in this.ctrlKeysMapUp&&(s.ctrlKey||s.metaKey))this[this.ctrlKeysMapUp[s.keyCode]](s);else return;s.stopImmediatePropagation(),s.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(s){var u=this.fromPaste;if(this.fromPaste=!1,s&&s.stopPropagation(),!!this.isEditing){var l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,c=l.length,f,d,p=c-h,m=this.selectionStart,g=this.selectionEnd,y=m!==g,v,b,w;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var x=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=m>x.selectionStart;y?(f=this._text.slice(m,g),p+=g-m):c<h&&(S?f=this._text.slice(g+p,g):f=this._text.slice(m,m-p)),d=l.slice(x.selectionEnd-p,x.selectionEnd),f&&f.length&&(d.length&&(v=this.getSelectionStyles(m,m+1,!1),v=d.map(function(){return v[0]})),y?(b=m,w=g):S?(b=g-f.length,w=g):(b=g,w=g+f.length),this.removeStyleFromTo(b,w)),d.length&&(u&&d.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(v=e.copiedTextStyle),this.insertNewStyleBlock(d,m,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(s){this.compositionStart=s.target.selectionStart,this.compositionEnd=s.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(s){return s&&s.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(s,u){var l=this._getLineLeftOffset(s),h;return u>0&&(h=this.__charBounds[s][u-1],l+=h.left+h.width),l},getDownCursorOffset:function(s,u){var l=this._getSelectionForOffset(s,u),h=this.get2DCursorLocation(l),c=h.lineIndex;if(c===this._textLines.length-1||s.metaKey||s.keyCode===34)return this._text.length-l;var f=h.charIndex,d=this._getWidthBeforeCursor(c,f),p=this._getIndexOnLine(c+1,d),m=this._textLines[c].slice(f);return m.length+p+1+this.missingNewlineOffset(c)},_getSelectionForOffset:function(s,u){return s.shiftKey&&this.selectionStart!==this.selectionEnd&&u?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(s,u){var l=this._getSelectionForOffset(s,u),h=this.get2DCursorLocation(l),c=h.lineIndex;if(c===0||s.metaKey||s.keyCode===33)return-l;var f=h.charIndex,d=this._getWidthBeforeCursor(c,f),p=this._getIndexOnLine(c-1,d),m=this._textLines[c].slice(0,f),g=this.missingNewlineOffset(c-1);return-this._textLines[c-1].length+p-m.length+(1-g)},_getIndexOnLine:function(s,u){for(var l=this._textLines[s],h=this._getLineLeftOffset(s),c=h,f=0,d,p,m=0,g=l.length;m<g;m++)if(d=this.__charBounds[s][m].width,c+=d,c>u){p=!0;var y=c-d,v=c,b=Math.abs(y-u),w=Math.abs(v-u);f=w<b?m:m-1;break}return p||(f=l.length-1),f},moveCursorDown:function(s){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",s)},moveCursorUp:function(s){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",s)},_moveCursorUpOrDown:function(s,u){var l="get"+s+"CursorOffset",h=this[l](u,this._selectionDirection==="right");u.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(s){var u=this._selectionDirection==="left"?this.selectionStart+s:this.selectionEnd+s;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,u),s!==0},moveCursorWithoutShift:function(s){return s<0?(this.selectionStart+=s,this.selectionEnd=this.selectionStart):(this.selectionEnd+=s,this.selectionStart=this.selectionEnd),s!==0},moveCursorLeft:function(s){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",s)},_move:function(s,u,l){var h;if(s.altKey)h=this["findWordBoundary"+l](this[u]);else if(s.metaKey||s.keyCode===35||s.keyCode===36)h=this["findLineBoundary"+l](this[u]);else return this[u]+=l==="Left"?-1:1,!0;if(typeof h!==void 0&&this[u]!==h)return this[u]=h,!0},_moveLeft:function(s,u){return this._move(s,u,"Left")},_moveRight:function(s,u){return this._move(s,u,"Right")},moveCursorLeftWithoutShift:function(s){var u=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(u=this._moveLeft(s,"selectionStart")),this.selectionEnd=this.selectionStart,u},moveCursorLeftWithShift:function(s){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(s,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(s,"selectionStart")},moveCursorRight:function(s){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",s)},_moveCursorLeftOrRight:function(s,u){var l="moveCursor"+s+"With";this._currentCursorOpacity=1,u.shiftKey?l+="Shift":l+="outShift",this[l](u)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(s){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(s,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(s,"selectionEnd")},moveCursorRightWithoutShift:function(s){var u=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(u=this._moveRight(s,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,u},removeChars:function(s,u){typeof u>"u"&&(u=s+1),this.removeStyleFromTo(s,u),this._text.splice(s,u-s),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(s,u,l,h){typeof h>"u"&&(h=l),h>l&&this.removeStyleFromTo(l,h);var c=e.util.string.graphemeSplit(s);this.insertNewStyleBlock(c,l,u),this._text=[].concat(this._text.slice(0,l),c,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var s=e.util.toFixed,u=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var h=!0,c=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",c?'text-decoration="'+c+'" ':"",'style="',this.getSvgStyles(h),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,h){var c=[],f=[],d=l,p;this._setSVGBg(f);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(f,m,h+p,d),this._setSVGTextLineText(c,m,h+p,d),d+=this.getHeightOfLine(m);return{textSpans:c,textBgRects:f}},_createTextCharSpan:function(l,h,c,f){var d=l!==l.trim()||l.match(u),p=this.getSvgSpanStyles(h,d),m=p?'style="'+p+'"':"",g=h.deltaY,y="",v=e.Object.NUM_FRACTION_DIGITS;return g&&(y=' dy="'+s(g,v)+'" '),['<tspan x="',s(c,v),'" y="',s(f,v),'" ',y,m,">",e.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,h,c,f){var d=this.getHeightOfLine(h),p=this.textAlign.indexOf("justify")!==-1,m,g,y="",v,b,w=0,x=this._textLines[h],S;f+=d*(1-this._fontSizeFraction)/this.lineHeight;for(var E=0,A=x.length-1;E<=A;E++)S=E===A||this.charSpacing,y+=x[E],v=this.__charBounds[h][E],w===0?(c+=v.kernedWidth-v.width,w+=v.width):w+=v.kernedWidth,p&&!S&&this._reSpaceAndTab.test(x[E])&&(S=!0),S||(m=m||this.getCompleteStyleDeclaration(h,E),g=this.getCompleteStyleDeclaration(h,E+1),S=this._hasStyleChangedForSvg(m,g)),S&&(b=this._getStyleDeclaration(h,E)||{},l.push(this._createTextCharSpan(y,b,c,f)),y="",m=g,c+=w,w=0)},_pushTextBgRect:function(l,h,c,f,d,p){var m=e.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(h),' x="',s(c,m),'" y="',s(f,m),'" width="',s(d,m),'" height="',s(p,m),`"></rect>
`)},_setSVGTextLineBg:function(l,h,c,f){for(var d=this._textLines[h],p=this.getHeightOfLine(h)/this.lineHeight,m=0,g=0,y,v,b=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),w=0,x=d.length;w<x;w++)y=this.__charBounds[h][w],v=this.getValueOfPropertyAt(h,w,"textBackgroundColor"),v!==b?(b&&this._pushTextBgRect(l,b,c+g,f,m,p),g=y.left,m=y.width,b=v):m+=y.kernedWidth;v&&this._pushTextBgRect(l,v,c+g,f,m,p)},_getFillAttributes:function(l){var h=l&&typeof l=="string"?new e.Color(l):"";return!h||!h.getSource()||h.getAlpha()===1?'fill="'+l+'"':'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(l){for(var h=0,c=0,f=0;f<l;f++)h+=this.getHeightOfLine(f);return c=this.getHeightOfLine(f),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*c/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){var h=e.Object.prototype.getSvgStyles.call(this,l);return h+" white-space: pre;"}})}(),function(s){var u=s.fabric||(s.fabric={});u.Textbox=u.util.createClass(u.IText,u.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:u.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(l){for(var h=0,c=0,f=0,d={},p=0;p<l.graphemeLines.length;p++)l.graphemeText[f]===`
`&&p>0?(c=0,f++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(l.graphemeText[f])&&p>0&&(c++,f++),d[p]={line:h,offset:c},f+=l.graphemeLines[p].length,c+=l.graphemeLines[p].length;return d},styleHas:function(l,h){if(this._styleMap&&!this.isWrapping){var c=this._styleMap[h];c&&(h=c.line)}return u.Text.prototype.styleHas.call(this,l,h)},isEmptyStyles:function(l){if(!this.styles)return!0;var h=0,c=l+1,f,d,p=!1,m=this._styleMap[l],g=this._styleMap[l+1];m&&(l=m.line,h=m.offset),g&&(c=g.line,p=c===l,f=g.offset),d=typeof l>"u"?this.styles:{line:this.styles[l]};for(var y in d)for(var v in d[y])if(v>=h&&(!p||v<f))for(var b in d[y][v])return!1;return!0},_getStyleDeclaration:function(l,h){if(this._styleMap&&!this.isWrapping){var c=this._styleMap[l];if(!c)return null;l=c.line,h=c.offset+h}return this.callSuper("_getStyleDeclaration",l,h)},_setStyleDeclaration:function(l,h,c){var f=this._styleMap[l];l=f.line,h=f.offset+h,this.styles[l][h]=c},_deleteStyleDeclaration:function(l,h){var c=this._styleMap[l];l=c.line,h=c.offset+h,delete this.styles[l][h]},_getLineStyle:function(l){var h=this._styleMap[l];return!!this.styles[h.line]},_setLineStyle:function(l){var h=this._styleMap[l];this.styles[h.line]={}},_wrapText:function(l,h){var c=[],f;for(this.isWrapping=!0,f=0;f<l.length;f++)c=c.concat(this._wrapLine(l[f],f,h));return this.isWrapping=!1,c},_measureWord:function(l,h,c){var f=0,d,p=!0;c=c||0;for(var m=0,g=l.length;m<g;m++){var y=this._getGraphemeBox(l[m],h,m+c,d,p);f+=y.kernedWidth,d=l[m]}return f},_wrapLine:function(l,h,c,T){var d=0,p=this.splitByGrapheme,m=[],g=[],y=p?u.util.string.graphemeSplit(l):l.split(this._wordJoiners),v="",b=0,w=p?"":" ",x=0,S=0,E=0,A=!0,k=this._getWidthOfCharSpacing(),T=T||0;y.length===0&&y.push([]),c-=T;for(var O=0;O<y.length;O++)v=p?y[O]:u.util.string.graphemeSplit(y[O]),x=this._measureWord(v,h,b),b+=v.length,d+=S+x-k,d>c&&!A?(m.push(g),g=[],d=x,A=!0):d+=k,!A&&!p&&g.push(w),g=g.concat(v),S=p?0:this._measureWord([w],h,b),b++,A=!1,x>E&&(E=x);return O&&m.push(g),E+T>this.dynamicMinWidth&&(this.dynamicMinWidth=E-k+T),m},isEndOfWrapping:function(l){return!this._styleMap[l+1]||this._styleMap[l+1].line!==this._styleMap[l].line},missingNewlineOffset:function(l){return this.splitByGrapheme?this.isEndOfWrapping(l)?1:0:1},_splitTextIntoLines:function(l){for(var h=u.Text.prototype._splitTextIntoLines.call(this,l),c=this._wrapText(h.lines,this.width),f=new Array(c.length),d=0;d<c.length;d++)f[d]=c[d].join("");return h.lines=f,h.graphemeLines=c,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var l={};for(var h in this._styleMap)this._textLines[h]&&(l[this._styleMap[h].line]=1);for(var h in this.styles)l[h]||delete this.styles[h]},toObject:function(l){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(l))}}),u.Textbox.fromObject=function(l,h){return u.Object._fromObject("Textbox",l,h,"text")}}(n),function(){var s=e.controlsUtils,u=s.scaleSkewCursorStyleHandler,l=s.scaleCursorStyleHandler,h=s.scalingEqually,c=s.scalingYOrSkewingX,f=s.scalingXOrSkewingY,d=s.scaleOrSkewActionName,p=e.Object.prototype.controls;if(p.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:u,actionHandler:f,getActionName:d}),p.mr=new e.Control({x:.5,y:0,cursorStyleHandler:u,actionHandler:f,getActionName:d}),p.mb=new e.Control({x:0,y:.5,cursorStyleHandler:u,actionHandler:c,getActionName:d}),p.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:u,actionHandler:c,getActionName:d}),p.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:l,actionHandler:h}),p.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:l,actionHandler:h}),p.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:l,actionHandler:h}),p.br=new e.Control({x:.5,y:.5,cursorStyleHandler:l,actionHandler:h}),p.mtr=new e.Control({x:0,y:-.5,actionHandler:s.rotationWithSnapping,cursorStyleHandler:s.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var m=e.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new e.Control({x:.5,y:0,actionHandler:s.changeWidth,cursorStyleHandler:u,actionName:"resizing"}),m.ml=new e.Control({x:-.5,y:0,actionHandler:s.changeWidth,cursorStyleHandler:u,actionName:"resizing"})}}()}(PM)),PM}var LM=$Xe();const qXe=({imageName:n,text:e,x:t,y:r})=>{const i=pe.useRef(null),[a,o]=pe.useState(null),[s,u]=pe.useState("");pe.useEffect(()=>{(async()=>{try{const c=await hr.get(`http://localhost:5077/api/upload/download-url/${n}`);console.log(c.data),u(c.data)}catch(c){console.error("  -URL:",c),alert(`  -URL: ${c}`)}})()},[n]),pe.useEffect(()=>{if(!a||!s)return;const h=new Image;return h.crossOrigin="Anonymous",h.src=s,h.onload=()=>{const c=new LM.fabric.Image(h,{left:0,top:0,selectable:!1});if(a.setBackgroundImage(c,a.renderAll.bind(a)),e){const f=new LM.fabric.Text(e,{left:t,top:r,fontSize:20,fill:"black"});a.add(f),a.renderAll()}},()=>{a.clear()}},[a,s,e,t,r]),pe.useEffect(()=>{const h=new LM.fabric.Canvas(i.current,{width:600,height:400,backgroundColor:"white"});return o(h),()=>{h.dispose()}},[]);const l=()=>{if(a){const h=a.toDataURL({format:"png",quality:1}),c=document.createElement("a");c.href=h,c.download="invitation.png",c.click()}};return Ie.jsxs("div",{children:[Ie.jsx("canvas",{ref:i}),Ie.jsx("button",{onClick:l,children:"  "})]})},VXe=({templateImage:n})=>{const[e,t]=pe.useState([]),[r,i]=pe.useState(null);pe.useEffect(()=>{q9e.load().then(s=>{console.log(" COCO-SSD model loaded!"),i(s)})},[]);const[,a]=pRe(()=>({accept:"TEXT",drop:async(s,u)=>{const l=u.getSourceClientOffset();if(!l||!r)return;await o(l.x,l.y)||t(c=>[...c,{id:s.id,text:s.text,x:l.x,y:l.y}])},collect:s=>({isOver:s.isOver()})})),o=async(s,u)=>{if(!r)return!1;const l=document.getElementById("templateImage");if(!l)return!1;const h=await r.detect(l);for(const c of h){const{bbox:f}=c,[d,p,m,g]=f;if(s>d&&s<d+m&&u>p&&u<p+g)return alert("     !   ."),!0}return!1};return Ie.jsx(Hae,{backend:tse,children:Ie.jsxs("div",{ref:s=>{s&&a(s)},className:"w-2/3 h-screen relative border p-4 bg-gray-100",children:[Ie.jsx("hr",{}),Ie.jsx("hr",{}),Ie.jsx("hr",{}),Ie.jsx("hr",{}),Ie.jsxs("div",{children:[Ie.jsx("h1",{children:"  "}),Ie.jsx(qXe,{imageName:n,text:" ",x:30,y:50})]}),e.map(s=>Ie.jsx(jXe,{text:s.text,x:s.x,y:s.y},s.id))]})})};var gN={exports:{}},rS={},MM={},UM={},lZ;function Hn(){return lZ||(lZ=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._registerNode=n.Konva=n.glob=void 0;const e=Math.PI/180;function t(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}n.glob=typeof Eu<"u"?Eu:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},n.Konva={_global:n.glob,version:"9.3.20",isBrowser:t(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return n.Konva.angleDeg?i*e:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return n.Konva.DD.isDragging},isTransforming(){var i;return(i=n.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!n.Konva.DD.node},releaseCanvasOnDestroy:!0,document:n.glob.document,_injectGlobal(i){n.glob.Konva=i}};const r=i=>{n.Konva[i.prototype.getClassName()]=i};n._registerNode=r,n.Konva._injectGlobal(n.Konva)}(UM)),UM}var BM={},cZ;function ia(){return cZ||(cZ=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.Transform=void 0;const e=Hn();class t{constructor(w=[1,0,0,1,0,0]){this.dirty=!1,this.m=w&&w.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(w){w.m[0]=this.m[0],w.m[1]=this.m[1],w.m[2]=this.m[2],w.m[3]=this.m[3],w.m[4]=this.m[4],w.m[5]=this.m[5]}point(w){const x=this.m;return{x:x[0]*w.x+x[2]*w.y+x[4],y:x[1]*w.x+x[3]*w.y+x[5]}}translate(w,x){return this.m[4]+=this.m[0]*w+this.m[2]*x,this.m[5]+=this.m[1]*w+this.m[3]*x,this}scale(w,x){return this.m[0]*=w,this.m[1]*=w,this.m[2]*=x,this.m[3]*=x,this}rotate(w){const x=Math.cos(w),S=Math.sin(w),E=this.m[0]*x+this.m[2]*S,A=this.m[1]*x+this.m[3]*S,k=this.m[0]*-S+this.m[2]*x,T=this.m[1]*-S+this.m[3]*x;return this.m[0]=E,this.m[1]=A,this.m[2]=k,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(w,x){const S=this.m[0]+this.m[2]*x,E=this.m[1]+this.m[3]*x,A=this.m[2]+this.m[0]*w,k=this.m[3]+this.m[1]*w;return this.m[0]=S,this.m[1]=E,this.m[2]=A,this.m[3]=k,this}multiply(w){const x=this.m[0]*w.m[0]+this.m[2]*w.m[1],S=this.m[1]*w.m[0]+this.m[3]*w.m[1],E=this.m[0]*w.m[2]+this.m[2]*w.m[3],A=this.m[1]*w.m[2]+this.m[3]*w.m[3],k=this.m[0]*w.m[4]+this.m[2]*w.m[5]+this.m[4],T=this.m[1]*w.m[4]+this.m[3]*w.m[5]+this.m[5];return this.m[0]=x,this.m[1]=S,this.m[2]=E,this.m[3]=A,this.m[4]=k,this.m[5]=T,this}invert(){const w=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),x=this.m[3]*w,S=-this.m[1]*w,E=-this.m[2]*w,A=this.m[0]*w,k=w*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=w*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=x,this.m[1]=S,this.m[2]=E,this.m[3]=A,this.m[4]=k,this.m[5]=T,this}getMatrix(){return this.m}decompose(){const w=this.m[0],x=this.m[1],S=this.m[2],E=this.m[3],A=this.m[4],k=this.m[5],T=w*E-x*S,O={x:A,y:k,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(w!=0||x!=0){const F=Math.sqrt(w*w+x*x);O.rotation=x>0?Math.acos(w/F):-Math.acos(w/F),O.scaleX=F,O.scaleY=T/F,O.skewX=(w*S+x*E)/T,O.skewY=0}else if(S!=0||E!=0){const F=Math.sqrt(S*S+E*E);O.rotation=Math.PI/2-(E>0?Math.acos(-S/F):-Math.acos(S/F)),O.scaleX=T/F,O.scaleY=F,O.skewX=0,O.skewY=(w*S+x*E)/T}return O.rotation=n.Util._getRotation(O.rotation),O}}n.Transform=t;const r="[object Array]",i="[object Number]",a="[object String]",o="[object Boolean]",s=Math.PI/180,u=180/Math.PI,l="#",h="",c="0",f="Konva warning: ",d="Konva error: ",p="rgb(",m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},g=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let y=[];const v=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(b){setTimeout(b,60)};n.Util={_isElement(b){return!!(b&&b.nodeType==1)},_isFunction(b){return!!(b&&b.constructor&&b.call&&b.apply)},_isPlainObject(b){return!!b&&b.constructor===Object},_isArray(b){return Object.prototype.toString.call(b)===r},_isNumber(b){return Object.prototype.toString.call(b)===i&&!isNaN(b)&&isFinite(b)},_isString(b){return Object.prototype.toString.call(b)===a},_isBoolean(b){return Object.prototype.toString.call(b)===o},isObject(b){return b instanceof Object},isValidSelector(b){if(typeof b!="string")return!1;const w=b[0];return w==="#"||w==="."||w===w.toUpperCase()},_sign(b){return b===0||b>0?1:-1},requestAnimFrame(b){y.push(b),y.length===1&&v(function(){const w=y;y=[],w.forEach(function(x){x()})})},createCanvasElement(){const b=document.createElement("canvas");try{b.style=b.style||{}}catch{}return b},createImageElement(){return document.createElement("img")},_isInDocument(b){for(;b=b.parentNode;)if(b==document)return!0;return!1},_urlToImage(b,w){const x=n.Util.createImageElement();x.onload=function(){w(x)},x.src=b},_rgbToHex(b,w,x){return((1<<24)+(b<<16)+(w<<8)+x).toString(16).slice(1)},_hexToRgb(b){b=b.replace(l,h);const w=parseInt(b,16);return{r:w>>16&255,g:w>>8&255,b:w&255}},getRandomColor(){let b=(Math.random()*16777215<<0).toString(16);for(;b.length<6;)b=c+b;return l+b},getRGB(b){let w;return b in m?(w=m[b],{r:w[0],g:w[1],b:w[2]}):b[0]===l?this._hexToRgb(b.substring(1)):b.substr(0,4)===p?(w=g.exec(b.replace(/ /g,"")),{r:parseInt(w[1],10),g:parseInt(w[2],10),b:parseInt(w[3],10)}):{r:0,g:0,b:0}},colorToRGBA(b){return b=b||"black",n.Util._namedColorToRBA(b)||n.Util._hex3ColorToRGBA(b)||n.Util._hex4ColorToRGBA(b)||n.Util._hex6ColorToRGBA(b)||n.Util._hex8ColorToRGBA(b)||n.Util._rgbColorToRGBA(b)||n.Util._rgbaColorToRGBA(b)||n.Util._hslColorToRGBA(b)},_namedColorToRBA(b){const w=m[b.toLowerCase()];return w?{r:w[0],g:w[1],b:w[2],a:1}:null},_rgbColorToRGBA(b){if(b.indexOf("rgb(")===0){b=b.match(/rgb\(([^)]+)\)/)[1];const w=b.split(/ *, */).map(Number);return{r:w[0],g:w[1],b:w[2],a:1}}},_rgbaColorToRGBA(b){if(b.indexOf("rgba(")===0){b=b.match(/rgba\(([^)]+)\)/)[1];const w=b.split(/ *, */).map((x,S)=>x.slice(-1)==="%"?S===3?parseInt(x)/100:parseInt(x)/100*255:Number(x));return{r:w[0],g:w[1],b:w[2],a:w[3]}}},_hex8ColorToRGBA(b){if(b[0]==="#"&&b.length===9)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:parseInt(b.slice(7,9),16)/255}},_hex6ColorToRGBA(b){if(b[0]==="#"&&b.length===7)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:1}},_hex4ColorToRGBA(b){if(b[0]==="#"&&b.length===5)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:parseInt(b[4]+b[4],16)/255}},_hex3ColorToRGBA(b){if(b[0]==="#"&&b.length===4)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:1}},_hslColorToRGBA(b){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(b)){const[w,...x]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b),S=Number(x[0])/360,E=Number(x[1])/100,A=Number(x[2])/100;let k,T,O;if(E===0)return O=A*255,{r:Math.round(O),g:Math.round(O),b:Math.round(O),a:1};A<.5?k=A*(1+E):k=A+E-A*E;const F=2*A-k,I=[0,0,0];for(let R=0;R<3;R++)T=S+1/3*-(R-1),T<0&&T++,T>1&&T--,6*T<1?O=F+(k-F)*6*T:2*T<1?O=k:3*T<2?O=F+(k-F)*(2/3-T)*6:O=F,I[R]=O*255;return{r:Math.round(I[0]),g:Math.round(I[1]),b:Math.round(I[2]),a:1}}},haveIntersection(b,w){return!(w.x>b.x+b.width||w.x+w.width<b.x||w.y>b.y+b.height||w.y+w.height<b.y)},cloneObject(b){const w={};for(const x in b)this._isPlainObject(b[x])?w[x]=this.cloneObject(b[x]):this._isArray(b[x])?w[x]=this.cloneArray(b[x]):w[x]=b[x];return w},cloneArray(b){return b.slice(0)},degToRad(b){return b*s},radToDeg(b){return b*u},_degToRad(b){return n.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),n.Util.degToRad(b)},_radToDeg(b){return n.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),n.Util.radToDeg(b)},_getRotation(b){return e.Konva.angleDeg?n.Util.radToDeg(b):b},_capitalize(b){return b.charAt(0).toUpperCase()+b.slice(1)},throw(b){throw new Error(d+b)},error(b){console.error(d+b)},warn(b){e.Konva.showWarnings&&console.warn(f+b)},each(b,w){for(const x in b)w(x,b[x])},_inRange(b,w,x){return w<=b&&b<x},_getProjectionToSegment(b,w,x,S,E,A){let k,T,O;const F=(b-x)*(b-x)+(w-S)*(w-S);if(F==0)k=b,T=w,O=(E-x)*(E-x)+(A-S)*(A-S);else{const I=((E-b)*(x-b)+(A-w)*(S-w))/F;I<0?(k=b,T=w,O=(b-E)*(b-E)+(w-A)*(w-A)):I>1?(k=x,T=S,O=(x-E)*(x-E)+(S-A)*(S-A)):(k=b+I*(x-b),T=w+I*(S-w),O=(k-E)*(k-E)+(T-A)*(T-A))}return[k,T,O]},_getProjectionToLine(b,w,x){const S=n.Util.cloneObject(b);let E=Number.MAX_VALUE;return w.forEach(function(A,k){if(!x&&k===w.length-1)return;const T=w[(k+1)%w.length],O=n.Util._getProjectionToSegment(A.x,A.y,T.x,T.y,b.x,b.y),F=O[0],I=O[1],R=O[2];R<E&&(S.x=F,S.y=I,E=R)}),S},_prepareArrayForTween(b,w,x){const S=[],E=[];if(b.length>w.length){const k=w;w=b,b=k}for(let k=0;k<b.length;k+=2)S.push({x:b[k],y:b[k+1]});for(let k=0;k<w.length;k+=2)E.push({x:w[k],y:w[k+1]});const A=[];return E.forEach(function(k){const T=n.Util._getProjectionToLine(k,S,x);A.push(T.x),A.push(T.y)}),A},_prepareToStringify(b){let w;b.visitedByCircularReferenceRemoval=!0;for(const x in b)if(b.hasOwnProperty(x)&&b[x]&&typeof b[x]=="object"){if(w=Object.getOwnPropertyDescriptor(b,x),b[x].visitedByCircularReferenceRemoval||n.Util._isElement(b[x]))if(w.configurable)delete b[x];else return null;else if(n.Util._prepareToStringify(b[x])===null)if(w.configurable)delete b[x];else return null}return delete b.visitedByCircularReferenceRemoval,b},_assign(b,w){for(const x in w)b[x]=w[x];return b},_getFirstPointerId(b){return b.touches?b.changedTouches[0].identifier:b.pointerId||999},releaseCanvas(...b){e.Konva.releaseCanvasOnDestroy&&b.forEach(w=>{w.width=0,w.height=0})},drawRoundedRectPath(b,w,x,S){let E=0,A=0,k=0,T=0;typeof S=="number"?E=A=k=T=Math.min(S,w/2,x/2):(E=Math.min(S[0]||0,w/2,x/2),A=Math.min(S[1]||0,w/2,x/2),T=Math.min(S[2]||0,w/2,x/2),k=Math.min(S[3]||0,w/2,x/2)),b.moveTo(E,0),b.lineTo(w-A,0),b.arc(w-A,A,A,Math.PI*3/2,0,!1),b.lineTo(w,x-T),b.arc(w-T,x-T,T,0,Math.PI/2,!1),b.lineTo(k,x),b.arc(k,x-k,k,Math.PI/2,Math.PI,!1),b.lineTo(0,E),b.arc(E,E,E,Math.PI,Math.PI*3/2,!1)}}}(BM)),BM}var iS={},zM={},hu={},hZ;function sr(){if(hZ)return hu;hZ=1,Object.defineProperty(hu,"__esModule",{value:!0}),hu.RGBComponent=r,hu.alphaComponent=i,hu.getNumberValidator=a,hu.getNumberOrArrayOfNumbersValidator=o,hu.getNumberOrAutoValidator=s,hu.getStringValidator=u,hu.getStringOrGradientValidator=l,hu.getFunctionValidator=h,hu.getNumberArrayValidator=c,hu.getBooleanValidator=f,hu.getComponentValidator=d;const n=Hn(),e=ia();function t(p){return e.Util._isString(p)?'"'+p+'"':Object.prototype.toString.call(p)==="[object Number]"||e.Util._isBoolean(p)?p:Object.prototype.toString.call(p)}function r(p){return p>255?255:p<0?0:Math.round(p)}function i(p){return p>1?1:p<1e-4?1e-4:p}function a(){if(n.Konva.isUnminified)return function(p,m){return e.Util._isNumber(p)||e.Util.warn(t(p)+' is a not valid value for "'+m+'" attribute. The value should be a number.'),p}}function o(p){if(n.Konva.isUnminified)return function(m,g){let y=e.Util._isNumber(m),v=e.Util._isArray(m)&&m.length==p;return!y&&!v&&e.Util.warn(t(m)+' is a not valid value for "'+g+'" attribute. The value should be a number or Array<number>('+p+")"),m}}function s(){if(n.Konva.isUnminified)return function(p,m){var g=e.Util._isNumber(p),y=p==="auto";return g||y||e.Util.warn(t(p)+' is a not valid value for "'+m+'" attribute. The value should be a number or "auto".'),p}}function u(){if(n.Konva.isUnminified)return function(p,m){return e.Util._isString(p)||e.Util.warn(t(p)+' is a not valid value for "'+m+'" attribute. The value should be a string.'),p}}function l(){if(n.Konva.isUnminified)return function(p,m){const g=e.Util._isString(p),y=Object.prototype.toString.call(p)==="[object CanvasGradient]"||p&&p.addColorStop;return g||y||e.Util.warn(t(p)+' is a not valid value for "'+m+'" attribute. The value should be a string or a native gradient.'),p}}function h(){if(n.Konva.isUnminified)return function(p,m){return e.Util._isFunction(p)||e.Util.warn(t(p)+' is a not valid value for "'+m+'" attribute. The value should be a function.'),p}}function c(){if(n.Konva.isUnminified)return function(p,m){const g=Int8Array?Object.getPrototypeOf(Int8Array):null;return g&&p instanceof g||(e.Util._isArray(p)?p.forEach(function(y){e.Util._isNumber(y)||e.Util.warn('"'+m+'" attribute has non numeric element '+y+". Make sure that all elements are numbers.")}):e.Util.warn(t(p)+' is a not valid value for "'+m+'" attribute. The value should be a array of numbers.')),p}}function f(){if(n.Konva.isUnminified)return function(p,m){var g=p===!0||p===!1;return g||e.Util.warn(t(p)+' is a not valid value for "'+m+'" attribute. The value should be a boolean.'),p}}function d(p){if(n.Konva.isUnminified)return function(m,g){return m==null||e.Util.isObject(m)||e.Util.warn(t(m)+' is a not valid value for "'+g+'" attribute. The value should be an object with properties '+p),m}}return hu}var fZ;function er(){return fZ||(fZ=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Factory=void 0;const e=ia(),t=sr(),r="get",i="set";n.Factory={addGetterSetter(a,o,s,u,l){n.Factory.addGetter(a,o,s),n.Factory.addSetter(a,o,u,l),n.Factory.addOverloadedGetterSetter(a,o)},addGetter(a,o,s){var u=r+e.Util._capitalize(o);a.prototype[u]=a.prototype[u]||function(){const l=this.attrs[o];return l===void 0?s:l}},addSetter(a,o,s,u){var l=i+e.Util._capitalize(o);a.prototype[l]||n.Factory.overWriteSetter(a,o,s,u)},overWriteSetter(a,o,s,u){var l=i+e.Util._capitalize(o);a.prototype[l]=function(h){return s&&h!==void 0&&h!==null&&(h=s.call(this,h,o)),this._setAttr(o,h),u&&u.call(this),this}},addComponentsGetterSetter(a,o,s,u,l){const h=s.length,c=e.Util._capitalize,f=r+c(o),d=i+c(o);a.prototype[f]=function(){const m={};for(let g=0;g<h;g++){const y=s[g];m[y]=this.getAttr(o+c(y))}return m};const p=(0,t.getComponentValidator)(s);a.prototype[d]=function(m){const g=this.attrs[o];u&&(m=u.call(this,m,o)),p&&p.call(this,m,o);for(const y in m)m.hasOwnProperty(y)&&this._setAttr(o+c(y),m[y]);return m||s.forEach(y=>{this._setAttr(o+c(y),void 0)}),this._fireChangeEvent(o,g,m),l&&l.call(this),this},n.Factory.addOverloadedGetterSetter(a,o)},addOverloadedGetterSetter(a,o){var s=e.Util._capitalize(o),u=i+s,l=r+s;a.prototype[o]=function(){return arguments.length?(this[u](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(a,o,s,u){e.Util.error("Adding deprecated "+o);const l=r+e.Util._capitalize(o),h=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[l]=function(){e.Util.error(h);const c=this.attrs[o];return c===void 0?s:c},n.Factory.addSetter(a,o,u,function(){e.Util.error(h)}),n.Factory.addOverloadedGetterSetter(a,o)},backCompat(a,o){e.Util.each(o,function(s,u){const l=a.prototype[u],h=r+e.Util._capitalize(s),c=i+e.Util._capitalize(s);function f(){l.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+u+'" instead.')}a.prototype[s]=f,a.prototype[h]=f,a.prototype[c]=f})},afterSetFilter(){this._filterUpToDate=!1}}}(zM)),zM}var Ed={},Td={},dZ;function xme(){if(dZ)return Td;dZ=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.HitContext=Td.SceneContext=Td.Context=void 0;const n=ia(),e=Hn();function t(y){const v=[],b=y.length,w=n.Util;for(let x=0;x<b;x++){let S=y[x];w._isNumber(S)?S=Math.round(S*1e3)/1e3:w._isString(S)||(S=S+""),v.push(S)}return v}const r=",",i="(",a=")",o="([",s="])",u=";",l="()",h="=",c=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],f=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],d=100;let p=class{constructor(v){this.canvas=v,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(v){v.fillEnabled()&&this._fill(v)}_fill(v){}strokeShape(v){v.hasStroke()&&this._stroke(v)}_stroke(v){}fillStrokeShape(v){v.attrs.fillAfterStrokeEnabled?(this.strokeShape(v),this.fillShape(v)):(this.fillShape(v),this.strokeShape(v))}getTrace(v,b){let w=this.traceArr,x=w.length,S="",E,A,k,T;for(E=0;E<x;E++)A=w[E],k=A.method,k?(T=A.args,S+=k,v?S+=l:n.Util._isArray(T[0])?S+=o+T.join(r)+s:(b&&(T=T.map(O=>typeof O=="number"?Math.floor(O):O)),S+=i+T.join(r)+a)):(S+=A.property,v||(S+=h+A.val)),S+=u;return S}clearTrace(){this.traceArr=[]}_trace(v){let b=this.traceArr,w;b.push(v),w=b.length,w>=d&&b.shift()}reset(){const v=this.getCanvas().getPixelRatio();this.setTransform(1*v,0,0,1*v,0,0)}getCanvas(){return this.canvas}clear(v){const b=this.getCanvas();v?this.clearRect(v.x||0,v.y||0,v.width||0,v.height||0):this.clearRect(0,0,b.getWidth()/b.pixelRatio,b.getHeight()/b.pixelRatio)}_applyLineCap(v){const b=v.attrs.lineCap;b&&this.setAttr("lineCap",b)}_applyOpacity(v){const b=v.getAbsoluteOpacity();b!==1&&this.setAttr("globalAlpha",b)}_applyLineJoin(v){const b=v.attrs.lineJoin;b&&this.setAttr("lineJoin",b)}setAttr(v,b){this._context[v]=b}arc(v,b,w,x,S,E){this._context.arc(v,b,w,x,S,E)}arcTo(v,b,w,x,S){this._context.arcTo(v,b,w,x,S)}beginPath(){this._context.beginPath()}bezierCurveTo(v,b,w,x,S,E){this._context.bezierCurveTo(v,b,w,x,S,E)}clearRect(v,b,w,x){this._context.clearRect(v,b,w,x)}clip(...v){this._context.clip.apply(this._context,v)}closePath(){this._context.closePath()}createImageData(v,b){const w=arguments;if(w.length===2)return this._context.createImageData(v,b);if(w.length===1)return this._context.createImageData(v)}createLinearGradient(v,b,w,x){return this._context.createLinearGradient(v,b,w,x)}createPattern(v,b){return this._context.createPattern(v,b)}createRadialGradient(v,b,w,x,S,E){return this._context.createRadialGradient(v,b,w,x,S,E)}drawImage(v,b,w,x,S,E,A,k,T){const O=arguments,F=this._context;O.length===3?F.drawImage(v,b,w):O.length===5?F.drawImage(v,b,w,x,S):O.length===9&&F.drawImage(v,b,w,x,S,E,A,k,T)}ellipse(v,b,w,x,S,E,A,k){this._context.ellipse(v,b,w,x,S,E,A,k)}isPointInPath(v,b,w,x){return w?this._context.isPointInPath(w,v,b,x):this._context.isPointInPath(v,b,x)}fill(...v){this._context.fill.apply(this._context,v)}fillRect(v,b,w,x){this._context.fillRect(v,b,w,x)}strokeRect(v,b,w,x){this._context.strokeRect(v,b,w,x)}fillText(v,b,w,x){x?this._context.fillText(v,b,w,x):this._context.fillText(v,b,w)}measureText(v){return this._context.measureText(v)}getImageData(v,b,w,x){return this._context.getImageData(v,b,w,x)}lineTo(v,b){this._context.lineTo(v,b)}moveTo(v,b){this._context.moveTo(v,b)}rect(v,b,w,x){this._context.rect(v,b,w,x)}roundRect(v,b,w,x,S){this._context.roundRect(v,b,w,x,S)}putImageData(v,b,w){this._context.putImageData(v,b,w)}quadraticCurveTo(v,b,w,x){this._context.quadraticCurveTo(v,b,w,x)}restore(){this._context.restore()}rotate(v){this._context.rotate(v)}save(){this._context.save()}scale(v,b){this._context.scale(v,b)}setLineDash(v){this._context.setLineDash?this._context.setLineDash(v):"mozDash"in this._context?this._context.mozDash=v:"webkitLineDash"in this._context&&(this._context.webkitLineDash=v)}getLineDash(){return this._context.getLineDash()}setTransform(v,b,w,x,S,E){this._context.setTransform(v,b,w,x,S,E)}stroke(v){v?this._context.stroke(v):this._context.stroke()}strokeText(v,b,w,x){this._context.strokeText(v,b,w,x)}transform(v,b,w,x,S,E){this._context.transform(v,b,w,x,S,E)}translate(v,b){this._context.translate(v,b)}_enableTrace(){let v=this,b=c.length,w=this.setAttr,x,S;const E=function(A){let k=v[A],T;v[A]=function(){return S=t(Array.prototype.slice.call(arguments,0)),T=k.apply(v,arguments),v._trace({method:A,args:S}),T}};for(x=0;x<b;x++)E(c[x]);v.setAttr=function(){w.apply(v,arguments);const A=arguments[0];let k=arguments[1];(A==="shadowOffsetX"||A==="shadowOffsetY"||A==="shadowBlur")&&(k=k/this.canvas.getPixelRatio()),v._trace({property:A,val:k})}}_applyGlobalCompositeOperation(v){const b=v.attrs.globalCompositeOperation;!b||b==="source-over"||this.setAttr("globalCompositeOperation",b)}};Td.Context=p,f.forEach(function(y){Object.defineProperty(p.prototype,y,{get(){return this._context[y]},set(v){this._context[y]=v}})});class m extends p{constructor(v,{willReadFrequently:b=!1}={}){super(v),this._context=v._canvas.getContext("2d",{willReadFrequently:b})}_fillColor(v){const b=v.fill();this.setAttr("fillStyle",b),v._fillFunc(this)}_fillPattern(v){this.setAttr("fillStyle",v._getFillPattern()),v._fillFunc(this)}_fillLinearGradient(v){const b=v._getLinearGradient();b&&(this.setAttr("fillStyle",b),v._fillFunc(this))}_fillRadialGradient(v){const b=v._getRadialGradient();b&&(this.setAttr("fillStyle",b),v._fillFunc(this))}_fill(v){const b=v.fill(),w=v.getFillPriority();if(b&&w==="color"){this._fillColor(v);return}const x=v.getFillPatternImage();if(x&&w==="pattern"){this._fillPattern(v);return}const S=v.getFillLinearGradientColorStops();if(S&&w==="linear-gradient"){this._fillLinearGradient(v);return}const E=v.getFillRadialGradientColorStops();if(E&&w==="radial-gradient"){this._fillRadialGradient(v);return}b?this._fillColor(v):x?this._fillPattern(v):S?this._fillLinearGradient(v):E&&this._fillRadialGradient(v)}_strokeLinearGradient(v){const b=v.getStrokeLinearGradientStartPoint(),w=v.getStrokeLinearGradientEndPoint(),x=v.getStrokeLinearGradientColorStops(),S=this.createLinearGradient(b.x,b.y,w.x,w.y);if(x){for(let E=0;E<x.length;E+=2)S.addColorStop(x[E],x[E+1]);this.setAttr("strokeStyle",S)}}_stroke(v){const b=v.dash(),w=v.getStrokeScaleEnabled();if(v.hasStroke()){if(!w){this.save();const S=this.getCanvas().getPixelRatio();this.setTransform(S,0,0,S,0,0)}this._applyLineCap(v),b&&v.dashEnabled()&&(this.setLineDash(b),this.setAttr("lineDashOffset",v.dashOffset())),this.setAttr("lineWidth",v.strokeWidth()),v.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),v.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(v):this.setAttr("strokeStyle",v.stroke()),v._strokeFunc(this),w||this.restore()}}_applyShadow(v){var b,w,x;const S=(b=v.getShadowRGBA())!==null&&b!==void 0?b:"black",E=(w=v.getShadowBlur())!==null&&w!==void 0?w:5,A=(x=v.getShadowOffset())!==null&&x!==void 0?x:{x:0,y:0},k=v.getAbsoluteScale(),T=this.canvas.getPixelRatio(),O=k.x*T,F=k.y*T;this.setAttr("shadowColor",S),this.setAttr("shadowBlur",E*Math.min(Math.abs(O),Math.abs(F))),this.setAttr("shadowOffsetX",A.x*O),this.setAttr("shadowOffsetY",A.y*F)}}Td.SceneContext=m;class g extends p{constructor(v){super(v),this._context=v._canvas.getContext("2d",{willReadFrequently:!0})}_fill(v){this.save(),this.setAttr("fillStyle",v.colorKey),v._fillFuncHit(this),this.restore()}strokeShape(v){v.hasHitStroke()&&this._stroke(v)}_stroke(v){if(v.hasHitStroke()){const b=v.getStrokeScaleEnabled();if(!b){this.save();const S=this.getCanvas().getPixelRatio();this.setTransform(S,0,0,S,0,0)}this._applyLineCap(v);const w=v.hitStrokeWidth(),x=w==="auto"?v.strokeWidth():w;this.setAttr("lineWidth",x),this.setAttr("strokeStyle",v.colorKey),v._strokeFuncHit(this),b||this.restore()}}}return Td.HitContext=g,Td}var pZ;function S4(){if(pZ)return Ed;pZ=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.HitCanvas=Ed.SceneCanvas=Ed.Canvas=void 0;const n=ia(),e=xme(),t=Hn();let r;function i(){if(r)return r;const u=n.Util.createCanvasElement(),l=u.getContext("2d");return r=function(){const h=t.Konva._global.devicePixelRatio||1,c=l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1;return h/c}(),n.Util.releaseCanvas(u),r}let a=class{constructor(l){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const c=(l||{}).pixelRatio||t.Konva.pixelRatio||i();this.pixelRatio=c,this._canvas=n.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(l){const h=this.pixelRatio;this.pixelRatio=l,this.setSize(this.getWidth()/h,this.getHeight()/h)}setWidth(l){this.width=this._canvas.width=l*this.pixelRatio,this._canvas.style.width=l+"px";const h=this.pixelRatio;this.getContext()._context.scale(h,h)}setHeight(l){this.height=this._canvas.height=l*this.pixelRatio,this._canvas.style.height=l+"px";const h=this.pixelRatio;this.getContext()._context.scale(h,h)}getWidth(){return this.width}getHeight(){return this.height}setSize(l,h){this.setWidth(l||0),this.setHeight(h||0)}toDataURL(l,h){try{return this._canvas.toDataURL(l,h)}catch{try{return this._canvas.toDataURL()}catch(f){return n.Util.error("Unable to get data URL. "+f.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Ed.Canvas=a;class o extends a{constructor(l={width:0,height:0,willReadFrequently:!1}){super(l),this.context=new e.SceneContext(this,{willReadFrequently:l.willReadFrequently}),this.setSize(l.width,l.height)}}Ed.SceneCanvas=o;class s extends a{constructor(l={width:0,height:0}){super(l),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(l.width,l.height)}}return Ed.HitCanvas=s,Ed}var WM={},gZ;function lj(){return gZ||(gZ=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DD=void 0;const e=Hn(),t=ia();n.DD={get isDragging(){let r=!1;return n.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return n.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];n.DD._dragElements.forEach((a,o)=>{const{node:s}=a,u=s.getStage();u.setPointersPositions(r),a.pointerId===void 0&&(a.pointerId=t.Util._getFirstPointerId(r));const l=u._changedPointerPositions.find(h=>h.id===a.pointerId);if(l){if(a.dragStatus!=="dragging"){const h=s.dragDistance();if(Math.max(Math.abs(l.x-a.startPointerPos.x),Math.abs(l.y-a.startPointerPos.y))<h||(s.startDrag({evt:r}),!s.isDragging()))return}s._setDragPosition(r,a),i.push(s)}}),i.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:r},!0)})},_endDragBefore(r){const i=[];n.DD._dragElements.forEach(a=>{const{node:o}=a,s=o.getStage();if(r&&s.setPointersPositions(r),!s._changedPointerPositions.find(h=>h.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(n.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,a.dragStatus="stopped");const l=a.node.getLayer()||a.node instanceof e.Konva.Stage&&a.node;l&&i.indexOf(l)===-1&&i.push(l)}),i.forEach(a=>{a.draw()})},_endDragAfter(r){n.DD._dragElements.forEach((i,a)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&n.DD._dragElements.delete(a)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",n.DD._endDragBefore,!0),window.addEventListener("touchend",n.DD._endDragBefore,!0),window.addEventListener("touchcancel",n.DD._endDragBefore,!0),window.addEventListener("mousemove",n.DD._drag),window.addEventListener("touchmove",n.DD._drag),window.addEventListener("mouseup",n.DD._endDragAfter,!1),window.addEventListener("touchend",n.DD._endDragAfter,!1),window.addEventListener("touchcancel",n.DD._endDragAfter,!1))}(WM)),WM}var mZ;function wa(){if(mZ)return iS;mZ=1,Object.defineProperty(iS,"__esModule",{value:!0}),iS.Node=void 0;const n=ia(),e=er(),t=S4(),r=Hn(),i=lj(),a=sr(),o="absoluteOpacity",s="allEventListeners",u="absoluteTransform",l="absoluteScale",h="canvas",c="Change",f="children",d="konva",p="listening",m="mouseenter",g="mouseleave",y="set",v="Shape",b=" ",w="stage",x="transform",S="Stage",E="visible",A=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(b);let k=1;class T{constructor(I){this._id=k++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(I),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(I){(I===x||I===u)&&this._cache.get(I)?this._cache.get(I).dirty=!0:I?this._cache.delete(I):this._cache.clear()}_getCache(I,R){let U=this._cache.get(I);return(U===void 0||(I===x||I===u)&&U.dirty===!0)&&(U=R.call(this),this._cache.set(I,U)),U}_calculate(I,R,U){if(!this._attachedDepsListeners.get(I)){const B=R.map(W=>W+"Change.konva").join(b);this.on(B,()=>{this._clearCache(I)}),this._attachedDepsListeners.set(I,!0)}return this._getCache(I,U)}_getCanvasCache(){return this._cache.get(h)}_clearSelfAndDescendantCache(I){this._clearCache(I),I===u&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(h)){const{scene:I,filter:R,hit:U}=this._cache.get(h);n.Util.releaseCanvas(I,R,U),this._cache.delete(h)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(I){const R=I||{};let U={};(R.x===void 0||R.y===void 0||R.width===void 0||R.height===void 0)&&(U=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let B=Math.ceil(R.width||U.width),W=Math.ceil(R.height||U.height),Y=R.pixelRatio,z=R.x===void 0?Math.floor(U.x):R.x,j=R.y===void 0?Math.floor(U.y):R.y,M=R.offset||0,q=R.drawBorder||!1,H=R.hitCanvasPixelRatio||1;if(!B||!W){n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const K=Math.abs(Math.round(U.x)-z)>.5?1:0,Z=Math.abs(Math.round(U.y)-j)>.5?1:0;B+=M*2+K,W+=M*2+Z,z-=M,j-=M;const J=new t.SceneCanvas({pixelRatio:Y,width:B,height:W}),X=new t.SceneCanvas({pixelRatio:Y,width:0,height:0,willReadFrequently:!0}),ae=new t.HitCanvas({pixelRatio:H,width:B,height:W}),ie=J.getContext(),ce=ae.getContext();return ae.isCache=!0,J.isCache=!0,this._cache.delete(h),this._filterUpToDate=!1,R.imageSmoothingEnabled===!1&&(J.getContext()._context.imageSmoothingEnabled=!1,X.getContext()._context.imageSmoothingEnabled=!1),ie.save(),ce.save(),ie.translate(-z,-j),ce.translate(-z,-j),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(l),this.drawScene(J,this),this.drawHit(ae,this),this._isUnderCache=!1,ie.restore(),ce.restore(),q&&(ie.save(),ie.beginPath(),ie.rect(0,0,B,W),ie.closePath(),ie.setAttr("strokeStyle","red"),ie.setAttr("lineWidth",5),ie.stroke(),ie.restore()),this._cache.set(h,{scene:J,filter:X,hit:ae,x:z,y:j}),this._requestDraw(),this}isCached(){return this._cache.has(h)}getClientRect(I){throw new Error('abstract "getClientRect" method call')}_transformedRect(I,R){const U=[{x:I.x,y:I.y},{x:I.x+I.width,y:I.y},{x:I.x+I.width,y:I.y+I.height},{x:I.x,y:I.y+I.height}];let B=1/0,W=1/0,Y=-1/0,z=-1/0;const j=this.getAbsoluteTransform(R);return U.forEach(function(M){const q=j.point(M);B===void 0&&(B=Y=q.x,W=z=q.y),B=Math.min(B,q.x),W=Math.min(W,q.y),Y=Math.max(Y,q.x),z=Math.max(z,q.y)}),{x:B,y:W,width:Y-B,height:z-W}}_drawCachedSceneCanvas(I){I.save(),I._applyOpacity(this),I._applyGlobalCompositeOperation(this);const R=this._getCanvasCache();I.translate(R.x,R.y);const U=this._getCachedSceneCanvas(),B=U.pixelRatio;I.drawImage(U._canvas,0,0,U.width/B,U.height/B),I.restore()}_drawCachedHitCanvas(I){const R=this._getCanvasCache(),U=R.hit;I.save(),I.translate(R.x,R.y),I.drawImage(U._canvas,0,0,U.width/U.pixelRatio,U.height/U.pixelRatio),I.restore()}_getCachedSceneCanvas(){let I=this.filters(),R=this._getCanvasCache(),U=R.scene,B=R.filter,W=B.getContext(),Y,z,j,M;if(I){if(!this._filterUpToDate){const q=U.pixelRatio;B.setSize(U.width/U.pixelRatio,U.height/U.pixelRatio);try{for(Y=I.length,W.clear(),W.drawImage(U._canvas,0,0,U.getWidth()/q,U.getHeight()/q),z=W.getImageData(0,0,B.getWidth(),B.getHeight()),j=0;j<Y;j++){if(M=I[j],typeof M!="function"){n.Util.error("Filter should be type of function, but got "+typeof M+" instead. Please check correct filters");continue}M.call(this,z),W.putImageData(z,0,0)}}catch(H){n.Util.error("Unable to apply filter. "+H.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return B}return U}on(I,R){if(this._cache&&this._cache.delete(s),arguments.length===3)return this._delegate.apply(this,arguments);let U=I.split(b),B=U.length,W,Y,z,j,M;for(W=0;W<B;W++)Y=U[W],z=Y.split("."),j=z[0],M=z[1]||"",this.eventListeners[j]||(this.eventListeners[j]=[]),this.eventListeners[j].push({name:M,handler:R});return this}off(I,R){let U=(I||"").split(b),B=U.length,W,Y,z,j,M,q;if(this._cache&&this._cache.delete(s),!I)for(Y in this.eventListeners)this._off(Y);for(W=0;W<B;W++)if(z=U[W],j=z.split("."),M=j[0],q=j[1],M)this.eventListeners[M]&&this._off(M,q,R);else for(Y in this.eventListeners)this._off(Y,q,R);return this}dispatchEvent(I){const R={target:this,type:I.type,evt:I};return this.fire(I.type,R),this}addEventListener(I,R){return this.on(I,function(U){R.call(this,U.evt)}),this}removeEventListener(I){return this.off(I),this}_delegate(I,R,U){const B=this;this.on(I,function(W){const Y=W.target.findAncestors(R,!0,B);for(let z=0;z<Y.length;z++)W=n.Util.cloneObject(W),W.currentTarget=Y[z],U.call(Y[z],W)})}remove(){return this.isDragging()&&this.stopDrag(),i.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(w),this._clearSelfAndDescendantCache(E),this._clearSelfAndDescendantCache(p)}_remove(){this._clearCaches();const I=this.getParent();I&&I.children&&(I.children.splice(this.index,1),I._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(I){const R="get"+n.Util._capitalize(I);return n.Util._isFunction(this[R])?this[R]():this.attrs[I]}getAncestors(){let I=this.getParent(),R=[];for(;I;)R.push(I),I=I.getParent();return R}getAttrs(){return this.attrs||{}}setAttrs(I){return this._batchTransformChanges(()=>{let R,U;if(!I)return this;for(R in I)R!==f&&(U=y+n.Util._capitalize(R),n.Util._isFunction(this[U])?this[U](I[R]):this._setAttr(R,I[R]))}),this}isListening(){return this._getCache(p,this._isListening)}_isListening(I){if(!this.listening())return!1;const U=this.getParent();return U&&U!==I&&this!==I?U._isListening(I):!0}isVisible(){return this._getCache(E,this._isVisible)}_isVisible(I){if(!this.visible())return!1;const U=this.getParent();return U&&U!==I&&this!==I?U._isVisible(I):!0}shouldDrawHit(I,R=!1){if(I)return this._isVisible(I)&&this._isListening(I);const U=this.getLayer();let B=!1;i.DD._dragElements.forEach(Y=>{Y.dragStatus==="dragging"&&(Y.node.nodeType==="Stage"||Y.node.getLayer()===U)&&(B=!0)});const W=!R&&!r.Konva.hitOnDragEnabled&&(B||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!W}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let I=this.getDepth(),R=this,U=0,B,W,Y,z;function j(q){for(B=[],W=q.length,Y=0;Y<W;Y++)z=q[Y],U++,z.nodeType!==v&&(B=B.concat(z.getChildren().slice())),z._id===R._id&&(Y=W);B.length>0&&B[0].getDepth()<=I&&j(B)}const M=this.getStage();return R.nodeType!==S&&M&&j(M.getChildren()),U}getDepth(){let I=0,R=this.parent;for(;R;)I++,R=R.parent;return I}_batchTransformChanges(I){this._batchingTransformChange=!0,I(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(x),this._clearSelfAndDescendantCache(u)),this._needClearTransformCache=!1}setPosition(I){return this._batchTransformChanges(()=>{this.x(I.x),this.y(I.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const I=this.getStage();if(!I)return null;const R=I.getPointerPosition();if(!R)return null;const U=this.getAbsoluteTransform().copy();return U.invert(),U.point(R)}getAbsolutePosition(I){let R=!1,U=this.parent;for(;U;){if(U.isCached()){R=!0;break}U=U.parent}R&&!I&&(I=!0);const B=this.getAbsoluteTransform(I).getMatrix(),W=new n.Transform,Y=this.offset();return W.m=B.slice(),W.translate(Y.x,Y.y),W.getTranslation()}setAbsolutePosition(I){const{x:R,y:U,...B}=this._clearTransform();this.attrs.x=R,this.attrs.y=U,this._clearCache(x);const W=this._getAbsoluteTransform().copy();return W.invert(),W.translate(I.x,I.y),I={x:this.attrs.x+W.getTranslation().x,y:this.attrs.y+W.getTranslation().y},this._setTransform(B),this.setPosition({x:I.x,y:I.y}),this._clearCache(x),this._clearSelfAndDescendantCache(u),this}_setTransform(I){let R;for(R in I)this.attrs[R]=I[R]}_clearTransform(){const I={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,I}move(I){let R=I.x,U=I.y,B=this.x(),W=this.y();return R!==void 0&&(B+=R),U!==void 0&&(W+=U),this.setPosition({x:B,y:W}),this}_eachAncestorReverse(I,R){let U=[],B=this.getParent(),W,Y;if(!(R&&R._id===this._id)){for(U.unshift(this);B&&(!R||B._id!==R._id);)U.unshift(B),B=B.parent;for(W=U.length,Y=0;Y<W;Y++)I(U[Y])}}rotate(I){return this.rotation(this.rotation()+I),this}moveToTop(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const I=this.index,R=this.parent.getChildren().length;return I<R-1?(this.parent.children.splice(I,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;const I=this.index,R=this.parent.getChildren().length;return I<R-1?(this.parent.children.splice(I,1),this.parent.children.splice(I+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;const I=this.index;return I>0?(this.parent.children.splice(I,1),this.parent.children.splice(I-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const I=this.index;return I>0?(this.parent.children.splice(I,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(I){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(I<0||I>=this.parent.children.length)&&n.Util.warn("Unexpected value "+I+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const R=this.index;return this.parent.children.splice(R,1),this.parent.children.splice(I,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let I=this.opacity();const R=this.getParent();return R&&!R._isUnderCache&&(I*=R.getAbsoluteOpacity()),I}moveTo(I){return this.getParent()!==I&&(this._remove(),I.add(this)),this}toObject(){let I=this.getAttrs(),R,U,B,W,Y;const z={attrs:{},className:this.getClassName()};for(R in I)U=I[R],Y=n.Util.isObject(U)&&!n.Util._isPlainObject(U)&&!n.Util._isArray(U),!Y&&(B=typeof this[R]=="function"&&this[R],delete I[R],W=B?B.call(this):null,I[R]=U,W!==U&&(z.attrs[R]=U));return n.Util._prepareToStringify(z)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(I,R,U){const B=[];R&&this._isMatch(I)&&B.push(this);let W=this.parent;for(;W;){if(W===U)return B;W._isMatch(I)&&B.push(W),W=W.parent}return B}isAncestorOf(I){return!1}findAncestor(I,R,U){return this.findAncestors(I,R,U)[0]}_isMatch(I){if(!I)return!1;if(typeof I=="function")return I(this);let R=I.replace(/ /g,"").split(","),U=R.length,B,W;for(B=0;B<U;B++)if(W=R[B],n.Util.isValidSelector(W)||(n.Util.warn('Selector "'+W+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),W.charAt(0)==="#"){if(this.id()===W.slice(1))return!0}else if(W.charAt(0)==="."){if(this.hasName(W.slice(1)))return!0}else if(this.className===W||this.nodeType===W)return!0;return!1}getLayer(){const I=this.getParent();return I?I.getLayer():null}getStage(){return this._getCache(w,this._getStage)}_getStage(){const I=this.getParent();return I?I.getStage():null}fire(I,R={},U){return R.target=R.target||this,U?this._fireAndBubble(I,R):this._fire(I,R),this}getAbsoluteTransform(I){return I?this._getAbsoluteTransform(I):this._getCache(u,this._getAbsoluteTransform)}_getAbsoluteTransform(I){let R;if(I)return R=new n.Transform,this._eachAncestorReverse(function(U){const B=U.transformsEnabled();B==="all"?R.multiply(U.getTransform()):B==="position"&&R.translate(U.x()-U.offsetX(),U.y()-U.offsetY())},I),R;{R=this._cache.get(u)||new n.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(R):R.reset();const U=this.transformsEnabled();if(U==="all")R.multiply(this.getTransform());else if(U==="position"){const B=this.attrs.x||0,W=this.attrs.y||0,Y=this.attrs.offsetX||0,z=this.attrs.offsetY||0;R.translate(B-Y,W-z)}return R.dirty=!1,R}}getAbsoluteScale(I){let R=this;for(;R;)R._isUnderCache&&(I=R),R=R.getParent();const B=this.getAbsoluteTransform(I).decompose();return{x:B.scaleX,y:B.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(x,this._getTransform)}_getTransform(){var I,R;const U=this._cache.get(x)||new n.Transform;U.reset();const B=this.x(),W=this.y(),Y=r.Konva.getAngle(this.rotation()),z=(I=this.attrs.scaleX)!==null&&I!==void 0?I:1,j=(R=this.attrs.scaleY)!==null&&R!==void 0?R:1,M=this.attrs.skewX||0,q=this.attrs.skewY||0,H=this.attrs.offsetX||0,K=this.attrs.offsetY||0;return(B!==0||W!==0)&&U.translate(B,W),Y!==0&&U.rotate(Y),(M!==0||q!==0)&&U.skew(M,q),(z!==1||j!==1)&&U.scale(z,j),(H!==0||K!==0)&&U.translate(-1*H,-1*K),U.dirty=!1,U}clone(I){let R=n.Util.cloneObject(this.attrs),U,B,W,Y,z;for(U in I)R[U]=I[U];const j=new this.constructor(R);for(U in this.eventListeners)for(B=this.eventListeners[U],W=B.length,Y=0;Y<W;Y++)z=B[Y],z.name.indexOf(d)<0&&(j.eventListeners[U]||(j.eventListeners[U]=[]),j.eventListeners[U].push(z));return j}_toKonvaCanvas(I){I=I||{};const R=this.getClientRect(),U=this.getStage(),B=I.x!==void 0?I.x:Math.floor(R.x),W=I.y!==void 0?I.y:Math.floor(R.y),Y=I.pixelRatio||1,z=new t.SceneCanvas({width:I.width||Math.ceil(R.width)||(U?U.width():0),height:I.height||Math.ceil(R.height)||(U?U.height():0),pixelRatio:Y}),j=z.getContext(),M=new t.SceneCanvas({width:z.width/z.pixelRatio+Math.abs(B),height:z.height/z.pixelRatio+Math.abs(W),pixelRatio:z.pixelRatio});return I.imageSmoothingEnabled===!1&&(j._context.imageSmoothingEnabled=!1),j.save(),(B||W)&&j.translate(-1*B,-1*W),this.drawScene(z,void 0,M),j.restore(),z}toCanvas(I){return this._toKonvaCanvas(I)._canvas}toDataURL(I){I=I||{};const R=I.mimeType||null,U=I.quality||null,B=this._toKonvaCanvas(I).toDataURL(R,U);return I.callback&&I.callback(B),B}toImage(I){return new Promise((R,U)=>{try{const B=I==null?void 0:I.callback;B&&delete I.callback,n.Util._urlToImage(this.toDataURL(I),function(W){R(W),B==null||B(W)})}catch(B){U(B)}})}toBlob(I){return new Promise((R,U)=>{try{const B=I==null?void 0:I.callback;B&&delete I.callback,this.toCanvas(I).toBlob(W=>{R(W),B==null||B(W)},I==null?void 0:I.mimeType,I==null?void 0:I.quality)}catch(B){U(B)}})}setSize(I){return this.width(I.width),this.height(I.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(I,R,U){let B=this.eventListeners[I],W,Y,z;for(W=0;W<B.length;W++)if(Y=B[W].name,z=B[W].handler,(Y!=="konva"||R==="konva")&&(!R||Y===R)&&(!U||U===z)){if(B.splice(W,1),B.length===0){delete this.eventListeners[I];break}W--}}_fireChangeEvent(I,R,U){this._fire(I+c,{oldVal:R,newVal:U})}addName(I){if(!this.hasName(I)){const R=this.name(),U=R?R+" "+I:I;this.name(U)}return this}hasName(I){if(!I)return!1;const R=this.name();return R?(R||"").split(/\s/g).indexOf(I)!==-1:!1}removeName(I){const R=(this.name()||"").split(/\s/g),U=R.indexOf(I);return U!==-1&&(R.splice(U,1),this.name(R.join(" "))),this}setAttr(I,R){const U=this[y+n.Util._capitalize(I)];return n.Util._isFunction(U)?U.call(this,R):this._setAttr(I,R),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const I=this.getLayer()||this.getStage();I==null||I.batchDraw()}}_setAttr(I,R){const U=this.attrs[I];U===R&&!n.Util.isObject(R)||(R==null?delete this.attrs[I]:this.attrs[I]=R,this._shouldFireChangeEvents&&this._fireChangeEvent(I,U,R),this._requestDraw())}_setComponentAttr(I,R,U){let B;U!==void 0&&(B=this.attrs[I],B||(this.attrs[I]=this.getAttr(I)),this.attrs[I][R]=U,this._fireChangeEvent(I,B,U))}_fireAndBubble(I,R,U){if(R&&this.nodeType===v&&(R.target=this),!((I===m||I===g)&&(U&&(this===U||this.isAncestorOf&&this.isAncestorOf(U))||this.nodeType==="Stage"&&!U))){this._fire(I,R);const W=(I===m||I===g)&&U&&U.isAncestorOf&&U.isAncestorOf(this)&&!U.isAncestorOf(this.parent);(R&&!R.cancelBubble||!R)&&this.parent&&this.parent.isListening()&&!W&&(U&&U.parent?this._fireAndBubble.call(this.parent,I,R,U):this._fireAndBubble.call(this.parent,I,R))}}_getProtoListeners(I){var R,U,B;const W=(R=this._cache.get(s))!==null&&R!==void 0?R:{};let Y=W==null?void 0:W[I];if(Y===void 0){Y=[];let z=Object.getPrototypeOf(this);for(;z;){const j=(B=(U=z.eventListeners)===null||U===void 0?void 0:U[I])!==null&&B!==void 0?B:[];Y.push(...j),z=Object.getPrototypeOf(z)}W[I]=Y,this._cache.set(s,W)}return Y}_fire(I,R){R=R||{},R.currentTarget=this,R.type=I;const U=this._getProtoListeners(I);if(U)for(var B=0;B<U.length;B++)U[B].handler.call(this,R);const W=this.eventListeners[I];if(W)for(var B=0;B<W.length;B++)W[B].handler.call(this,R)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(I){const R=I?I.pointerId:void 0,U=this.getStage(),B=this.getAbsolutePosition();if(!U)return;const W=U._getPointerById(R)||U._changedPointerPositions[0]||B;i.DD._dragElements.set(this._id,{node:this,startPointerPos:W,offset:{x:W.x-B.x,y:W.y-B.y},dragStatus:"ready",pointerId:R})}startDrag(I,R=!0){i.DD._dragElements.has(this._id)||this._createDragElement(I);const U=i.DD._dragElements.get(this._id);U.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:I&&I.evt},R)}_setDragPosition(I,R){const U=this.getStage()._getPointerById(R.pointerId);if(!U)return;let B={x:U.x-R.offset.x,y:U.y-R.offset.y};const W=this.dragBoundFunc();if(W!==void 0){const Y=W.call(this,B,I);Y?B=Y:n.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==B.x||this._lastPos.y!==B.y)&&(this.setAbsolutePosition(B),this._requestDraw()),this._lastPos=B}stopDrag(I){const R=i.DD._dragElements.get(this._id);R&&(R.dragStatus="stopped"),i.DD._endDragBefore(I),i.DD._endDragAfter(I)}setDraggable(I){this._setAttr("draggable",I),this._dragChange()}isDragging(){const I=i.DD._dragElements.get(this._id);return I?I.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(I){if(!(!(I.evt.button!==void 0)||r.Konva.dragButtons.indexOf(I.evt.button)>=0)||this.isDragging())return;let B=!1;i.DD._dragElements.forEach(W=>{this.isAncestorOf(W.node)&&(B=!0)}),B||this._createDragElement(I)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const R=i.DD._dragElements.get(this._id),U=R&&R.dragStatus==="dragging",B=R&&R.dragStatus==="ready";U?this.stopDrag():B&&i.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(I={x:0,y:0}){const R=this.getStage();if(!R)return!1;const U={x:-I.x,y:-I.y,width:R.width()+2*I.x,height:R.height()+2*I.y};return n.Util.haveIntersection(U,this.getClientRect())}static create(I,R){return n.Util._isString(I)&&(I=JSON.parse(I)),this._createNode(I,R)}static _createNode(I,R){let U=T.prototype.getClassName.call(I),B=I.children,W,Y,z;R&&(I.attrs.container=R),r.Konva[U]||(n.Util.warn('Can not find a node with class name "'+U+'". Fallback to "Shape".'),U="Shape");const j=r.Konva[U];if(W=new j(I.attrs),B)for(Y=B.length,z=0;z<Y;z++)W.add(T._createNode(B[z]));return W}}iS.Node=T,T.prototype.nodeType="Node",T.prototype._attrsAffectingSize=[],T.prototype.eventListeners={},T.prototype.on.call(T.prototype,A,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(x),this._clearSelfAndDescendantCache(u)}),T.prototype.on.call(T.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(E)}),T.prototype.on.call(T.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(p)}),T.prototype.on.call(T.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const O=e.Factory.addGetterSetter;return O(T,"zIndex"),O(T,"absolutePosition"),O(T,"position"),O(T,"x",0,(0,a.getNumberValidator)()),O(T,"y",0,(0,a.getNumberValidator)()),O(T,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),O(T,"opacity",1,(0,a.getNumberValidator)()),O(T,"name","",(0,a.getStringValidator)()),O(T,"id","",(0,a.getStringValidator)()),O(T,"rotation",0,(0,a.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"scale",["x","y"]),O(T,"scaleX",1,(0,a.getNumberValidator)()),O(T,"scaleY",1,(0,a.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"skew",["x","y"]),O(T,"skewX",0,(0,a.getNumberValidator)()),O(T,"skewY",0,(0,a.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"offset",["x","y"]),O(T,"offsetX",0,(0,a.getNumberValidator)()),O(T,"offsetY",0,(0,a.getNumberValidator)()),O(T,"dragDistance",void 0,(0,a.getNumberValidator)()),O(T,"width",0,(0,a.getNumberValidator)()),O(T,"height",0,(0,a.getNumberValidator)()),O(T,"listening",!0,(0,a.getBooleanValidator)()),O(T,"preventDefault",!0,(0,a.getBooleanValidator)()),O(T,"filters",void 0,function(F){return this._filterUpToDate=!1,F}),O(T,"visible",!0,(0,a.getBooleanValidator)()),O(T,"transformsEnabled","all",(0,a.getStringValidator)()),O(T,"size"),O(T,"dragBoundFunc"),O(T,"draggable",!1,(0,a.getBooleanValidator)()),e.Factory.backCompat(T,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),iS}var aS={},yZ;function C4(){if(yZ)return aS;yZ=1,Object.defineProperty(aS,"__esModule",{value:!0}),aS.Container=void 0;const n=er(),e=wa(),t=sr();let r=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){if(!a)return this.children||[];const o=this.children||[],s=[];return o.forEach(function(u){a(u)&&s.push(u)}),s}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let s=0;s<a.length;s++)this.add(a[s]);return this}const o=a[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const o=this._generalFind(a,!0);return o.length>0?o[0]:void 0}_generalFind(a,o){const s=[];return this._descendants(u=>{const l=u._isMatch(a);return l&&s.push(u),!!(l&&o)}),s}_descendants(a){let o=!1;const s=this.getChildren();for(const u of s){if(o=a(u),o)return!0;if(u.hasChildren()&&(o=u._descendants(a),o))return!0}return!1}toObject(){const a=e.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(o=>{a.children.push(o.toObject())}),a}isAncestorOf(a){let o=a.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(a){const o=e.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(s){o.add(s.clone())}),o}getAllIntersections(a){const o=[];return this.find("Shape").forEach(s=>{s.isVisible()&&s.intersects(a)&&o.push(s)}),o}_clearSelfAndDescendantCache(a){var o;super._clearSelfAndDescendantCache(a),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(s){s._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(o,s){o.index=s}),this._requestDraw()}drawScene(a,o,s){const u=this.getLayer(),l=a||u&&u.getCanvas(),h=l&&l.getContext(),c=this._getCanvasCache(),f=c&&c.scene,d=l&&l.isCache;if(!this.isVisible()&&!d)return this;if(f){h.save();const p=this.getAbsoluteTransform(o).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(h),h.restore()}else this._drawChildren("drawScene",l,o,s);return this}drawHit(a,o){if(!this.shouldDrawHit(o))return this;const s=this.getLayer(),u=a||s&&s.hitCanvas,l=u&&u.getContext(),h=this._getCanvasCache();if(h&&h.hit){l.save();const f=this.getAbsoluteTransform(o).getMatrix();l.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",u,o);return this}_drawChildren(a,o,s,u){var l;const h=o&&o.getContext(),c=this.clipWidth(),f=this.clipHeight(),d=this.clipFunc(),p=typeof c=="number"&&typeof f=="number"||d,m=s===this;if(p){h.save();const y=this.getAbsoluteTransform(s);let v=y.getMatrix();h.transform(v[0],v[1],v[2],v[3],v[4],v[5]),h.beginPath();let b;if(d)b=d.call(this,h,this);else{const w=this.clipX(),x=this.clipY();h.rect(w||0,x||0,c,f)}h.clip.apply(h,b),v=y.copy().invert().getMatrix(),h.transform(v[0],v[1],v[2],v[3],v[4],v[5])}const g=!m&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";g&&(h.save(),h._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(y){y[a](o,s,u)}),g&&h.restore(),p&&h.restore()}getClientRect(a={}){var o;const s=a.skipTransform,u=a.relativeTo;let l,h,c,f,d={x:1/0,y:1/0,width:0,height:0};const p=this;(o=this.children)===null||o===void 0||o.forEach(function(y){if(!y.visible())return;const v=y.getClientRect({relativeTo:p,skipShadow:a.skipShadow,skipStroke:a.skipStroke});v.width===0&&v.height===0||(l===void 0?(l=v.x,h=v.y,c=v.x+v.width,f=v.y+v.height):(l=Math.min(l,v.x),h=Math.min(h,v.y),c=Math.max(c,v.x+v.width),f=Math.max(f,v.y+v.height)))});const m=this.find("Shape");let g=!1;for(let y=0;y<m.length;y++)if(m[y]._isVisible(this)){g=!0;break}return g&&l!==void 0?d={x:l,y:h,width:c-l,height:f-h}:d={x:0,y:0,width:0,height:0},s?d:this._transformedRect(d,u)}};return aS.Container=r,n.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),n.Factory.addGetterSetter(r,"clipX",void 0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(r,"clipY",void 0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(r,"clipWidth",void 0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(r,"clipHeight",void 0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(r,"clipFunc"),aS}var jM={},Pg={},vZ;function _me(){if(vZ)return Pg;vZ=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.getCapturedShape=r,Pg.createEvent=i,Pg.hasPointerCapture=a,Pg.setPointerCapture=o,Pg.releaseCapture=s;const n=Hn(),e=new Map,t=n.Konva._global.PointerEvent!==void 0;function r(u){return e.get(u)}function i(u){return{evt:u,pointerId:u.pointerId}}function a(u,l){return e.get(u)===l}function o(u,l){s(u),l.getStage()&&(e.set(u,l),t&&l._fire("gotpointercapture",i(new PointerEvent("gotpointercapture"))))}function s(u,l){const h=e.get(u);if(!h)return;const c=h.getStage();c&&c.content,e.delete(u),t&&h._fire("lostpointercapture",i(new PointerEvent("lostpointercapture")))}return Pg}var bZ;function HXe(){return bZ||(bZ=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Stage=n.stages=void 0;const e=ia(),t=er(),r=C4(),i=Hn(),a=S4(),o=lj(),s=Hn(),u=_me(),l="Stage",h="string",c="px",f="mouseout",d="mouseleave",p="mouseover",m="mouseenter",g="mousemove",y="mousedown",v="mouseup",b="pointermove",w="pointerdown",x="pointerup",S="pointercancel",E="lostpointercapture",A="pointerout",k="pointerleave",T="pointerover",O="pointerenter",F="contextmenu",I="touchstart",R="touchend",U="touchmove",B="touchcancel",W="wheel",Y=5,z=[[m,"_pointerenter"],[y,"_pointerdown"],[g,"_pointermove"],[v,"_pointerup"],[d,"_pointerleave"],[I,"_pointerdown"],[U,"_pointermove"],[R,"_pointerup"],[B,"_pointercancel"],[p,"_pointerover"],[W,"_wheel"],[F,"_contextmenu"],[w,"_pointerdown"],[b,"_pointermove"],[x,"_pointerup"],[S,"_pointercancel"],[E,"_lostpointercapture"]],j={mouse:{[A]:f,[k]:d,[T]:p,[O]:m,[b]:g,[w]:y,[x]:v,[S]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[k]:"touchleave",[T]:"touchover",[O]:"touchenter",[b]:U,[w]:I,[x]:R,[S]:B,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[k]:k,[T]:T,[O]:O,[b]:b,[w]:w,[x]:x,[S]:S,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},M=J=>J.indexOf("pointer")>=0?"pointer":J.indexOf("touch")>=0?"touch":"mouse",q=J=>{const X=M(J);if(X==="pointer")return i.Konva.pointerEventsEnabled&&j.pointer;if(X==="touch")return j.touch;if(X==="mouse")return j.mouse};function H(J={}){return(J.clipFunc||J.clipWidth||J.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),J}const K="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";n.stages=[];class Z extends r.Container{constructor(X){super(H(X)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),n.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{H(this.attrs)}),this._checkVisibility()}_validateAdd(X){const ae=X.getType()==="Layer",ie=X.getType()==="FastLayer";ae||ie||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const X=this.visible()?"":"none";this.content.style.display=X}setContainer(X){if(typeof X===h){if(X.charAt(0)==="."){const ie=X.slice(1);X=document.getElementsByClassName(ie)[0]}else{var ae;X.charAt(0)!=="#"?ae=X:ae=X.slice(1),X=document.getElementById(ae)}if(!X)throw"Can not find container in document with id "+ae}return this._setAttr("container",X),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),X.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const X=this.children,ae=X.length;for(let ie=0;ie<ae;ie++)X[ie].clear();return this}clone(X){return X||(X={}),X.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,X)}destroy(){super.destroy();const X=this.content;X&&e.Util._isInDocument(X)&&this.container().removeChild(X);const ae=n.stages.indexOf(this);return ae>-1&&n.stages.splice(ae,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const X=this._pointerPositions[0]||this._changedPointerPositions[0];return X?{x:X.x,y:X.y}:(e.Util.warn(K),null)}_getPointerById(X){return this._pointerPositions.find(ae=>ae.id===X)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(X){X=X||{},X.x=X.x||0,X.y=X.y||0,X.width=X.width||this.width(),X.height=X.height||this.height();const ae=new a.SceneCanvas({width:X.width,height:X.height,pixelRatio:X.pixelRatio||1}),ie=ae.getContext()._context,ce=this.children;return(X.x||X.y)&&ie.translate(-1*X.x,-1*X.y),ce.forEach(function(ge){if(!ge.isVisible())return;const Ce=ge._toKonvaCanvas(X);ie.drawImage(Ce._canvas,X.x,X.y,Ce.getWidth()/Ce.getPixelRatio(),Ce.getHeight()/Ce.getPixelRatio())}),ae}getIntersection(X){if(!X)return null;const ae=this.children,ie=ae.length,ce=ie-1;for(let ge=ce;ge>=0;ge--){const Ce=ae[ge].getIntersection(X);if(Ce)return Ce}return null}_resizeDOM(){const X=this.width(),ae=this.height();this.content&&(this.content.style.width=X+c,this.content.style.height=ae+c),this.bufferCanvas.setSize(X,ae),this.bufferHitCanvas.setSize(X,ae),this.children.forEach(ie=>{ie.setSize({width:X,height:ae}),ie.draw()})}add(X,...ae){if(arguments.length>1){for(let ce=0;ce<arguments.length;ce++)this.add(arguments[ce]);return this}super.add(X);const ie=this.children.length;return ie>Y&&e.Util.warn("The stage has "+ie+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),X.setSize({width:this.width(),height:this.height()}),X.draw(),i.Konva.isBrowser&&this.content.appendChild(X.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(X){return u.hasPointerCapture(X,this)}setPointerCapture(X){u.setPointerCapture(X,this)}releaseCapture(X){u.releaseCapture(X,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&z.forEach(([X,ae])=>{this.content.addEventListener(X,ie=>{this[ae](ie)},{passive:!1})})}_pointerenter(X){this.setPointersPositions(X);const ae=q(X.type);ae&&this._fire(ae.pointerenter,{evt:X,target:this,currentTarget:this})}_pointerover(X){this.setPointersPositions(X);const ae=q(X.type);ae&&this._fire(ae.pointerover,{evt:X,target:this,currentTarget:this})}_getTargetShape(X){let ae=this[X+"targetShape"];return ae&&!ae.getStage()&&(ae=null),ae}_pointerleave(X){const ae=q(X.type),ie=M(X.type);if(!ae)return;this.setPointersPositions(X);const ce=this._getTargetShape(ie),ge=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;ce&&ge?(ce._fireAndBubble(ae.pointerout,{evt:X}),ce._fireAndBubble(ae.pointerleave,{evt:X}),this._fire(ae.pointerleave,{evt:X,target:this,currentTarget:this}),this[ie+"targetShape"]=null):ge&&(this._fire(ae.pointerleave,{evt:X,target:this,currentTarget:this}),this._fire(ae.pointerout,{evt:X,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(X){const ae=q(X.type),ie=M(X.type);if(!ae)return;this.setPointersPositions(X);let ce=!1;this._changedPointerPositions.forEach(ge=>{const Ce=this.getIntersection(ge);if(o.DD.justDragged=!1,i.Konva["_"+ie+"ListenClick"]=!0,!Ce||!Ce.isListening()){this[ie+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&Ce.setPointerCapture(ge.id),this[ie+"ClickStartShape"]=Ce,Ce._fireAndBubble(ae.pointerdown,{evt:X,pointerId:ge.id}),ce=!0;const Ee=X.type.indexOf("touch")>=0;Ce.preventDefault()&&X.cancelable&&Ee&&X.preventDefault()}),ce||this._fire(ae.pointerdown,{evt:X,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(X){const ae=q(X.type),ie=M(X.type);if(!ae||(i.Konva.isDragging()&&o.DD.node.preventDefault()&&X.cancelable&&X.preventDefault(),this.setPointersPositions(X),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const ge={};let Ce=!1;const Ee=this._getTargetShape(ie);this._changedPointerPositions.forEach(G=>{const de=u.getCapturedShape(G.id)||this.getIntersection(G),ye=G.id,le={evt:X,pointerId:ye},ne=Ee!==de;if(ne&&Ee&&(Ee._fireAndBubble(ae.pointerout,{...le},de),Ee._fireAndBubble(ae.pointerleave,{...le},de)),de){if(ge[de._id])return;ge[de._id]=!0}de&&de.isListening()?(Ce=!0,ne&&(de._fireAndBubble(ae.pointerover,{...le},Ee),de._fireAndBubble(ae.pointerenter,{...le},Ee),this[ie+"targetShape"]=de),de._fireAndBubble(ae.pointermove,{...le})):Ee&&(this._fire(ae.pointerover,{evt:X,target:this,currentTarget:this,pointerId:ye}),this[ie+"targetShape"]=null)}),Ce||this._fire(ae.pointermove,{evt:X,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(X){const ae=q(X.type),ie=M(X.type);if(!ae)return;this.setPointersPositions(X);const ce=this[ie+"ClickStartShape"],ge=this[ie+"ClickEndShape"],Ce={};let Ee=!1;this._changedPointerPositions.forEach(G=>{const de=u.getCapturedShape(G.id)||this.getIntersection(G);if(de){if(de.releaseCapture(G.id),Ce[de._id])return;Ce[de._id]=!0}const ye=G.id,le={evt:X,pointerId:ye};let ne=!1;i.Konva["_"+ie+"InDblClickWindow"]?(ne=!0,clearTimeout(this[ie+"DblTimeout"])):o.DD.justDragged||(i.Konva["_"+ie+"InDblClickWindow"]=!0,clearTimeout(this[ie+"DblTimeout"])),this[ie+"DblTimeout"]=setTimeout(function(){i.Konva["_"+ie+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),de&&de.isListening()?(Ee=!0,this[ie+"ClickEndShape"]=de,de._fireAndBubble(ae.pointerup,{...le}),i.Konva["_"+ie+"ListenClick"]&&ce&&ce===de&&(de._fireAndBubble(ae.pointerclick,{...le}),ne&&ge&&ge===de&&de._fireAndBubble(ae.pointerdblclick,{...le}))):(this[ie+"ClickEndShape"]=null,i.Konva["_"+ie+"ListenClick"]&&this._fire(ae.pointerclick,{evt:X,target:this,currentTarget:this,pointerId:ye}),ne&&this._fire(ae.pointerdblclick,{evt:X,target:this,currentTarget:this,pointerId:ye}))}),Ee||this._fire(ae.pointerup,{evt:X,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+ie+"ListenClick"]=!1,X.cancelable&&ie!=="touch"&&ie!=="pointer"&&X.preventDefault()}_contextmenu(X){this.setPointersPositions(X);const ae=this.getIntersection(this.getPointerPosition());ae&&ae.isListening()?ae._fireAndBubble(F,{evt:X}):this._fire(F,{evt:X,target:this,currentTarget:this})}_wheel(X){this.setPointersPositions(X);const ae=this.getIntersection(this.getPointerPosition());ae&&ae.isListening()?ae._fireAndBubble(W,{evt:X}):this._fire(W,{evt:X,target:this,currentTarget:this})}_pointercancel(X){this.setPointersPositions(X);const ae=u.getCapturedShape(X.pointerId)||this.getIntersection(this.getPointerPosition());ae&&ae._fireAndBubble(x,u.createEvent(X)),u.releaseCapture(X.pointerId)}_lostpointercapture(X){u.releaseCapture(X.pointerId)}setPointersPositions(X){const ae=this._getContentPosition();let ie=null,ce=null;X=X||window.event,X.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(X.touches,ge=>{this._pointerPositions.push({id:ge.identifier,x:(ge.clientX-ae.left)/ae.scaleX,y:(ge.clientY-ae.top)/ae.scaleY})}),Array.prototype.forEach.call(X.changedTouches||X.touches,ge=>{this._changedPointerPositions.push({id:ge.identifier,x:(ge.clientX-ae.left)/ae.scaleX,y:(ge.clientY-ae.top)/ae.scaleY})})):(ie=(X.clientX-ae.left)/ae.scaleX,ce=(X.clientY-ae.top)/ae.scaleY,this.pointerPos={x:ie,y:ce},this._pointerPositions=[{x:ie,y:ce,id:e.Util._getFirstPointerId(X)}],this._changedPointerPositions=[{x:ie,y:ce,id:e.Util._getFirstPointerId(X)}])}_setPointerPosition(X){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(X)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const X=this.content.getBoundingClientRect();return{top:X.top,left:X.left,scaleX:X.width/this.content.clientWidth||1,scaleY:X.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const X=this.container();if(!X)throw"Stage has no container. A container is required.";X.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),X.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(X){X.batchDraw()}),this}}n.Stage=Z,Z.prototype.nodeType=l,(0,s._registerNode)(Z),t.Factory.addGetterSetter(Z,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{n.stages.forEach(J=>{J.batchDraw()})})}(jM)),jM}var sS={},$M={},wZ;function Es(){return wZ||(wZ=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Shape=n.shapes=void 0;const e=Hn(),t=ia(),r=er(),i=wa(),a=sr(),o=Hn(),s=_me(),u="hasShadow",l="shadowRGBA",h="patternImage",c="linearGradient",f="radialGradient";let d;function p(){return d||(d=t.Util.createCanvasElement().getContext("2d"),d)}n.shapes={};function m(k){const T=this.attrs.fillRule;T?k.fill(T):k.fill()}function g(k){k.stroke()}function y(k){const T=this.attrs.fillRule;T?k.fill(T):k.fill()}function v(k){k.stroke()}function b(){this._clearCache(u)}function w(){this._clearCache(l)}function x(){this._clearCache(h)}function S(){this._clearCache(c)}function E(){this._clearCache(f)}class A extends i.Node{constructor(T){super(T);let O;for(;O=t.Util.getRandomColor(),!(O&&!(O in n.shapes)););this.colorKey=O,n.shapes[O]=this}getContext(){return t.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return t.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(u,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(h,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const O=p().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(O&&O.setTransform){const F=new t.Transform;F.translate(this.fillPatternX(),this.fillPatternY()),F.rotate(e.Konva.getAngle(this.fillPatternRotation())),F.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),F.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const I=F.getMatrix(),R=typeof DOMMatrix>"u"?{a:I[0],b:I[1],c:I[2],d:I[3],e:I[4],f:I[5]}:new DOMMatrix(I);O.setTransform(R)}return O}}_getLinearGradient(){return this._getCache(c,this.__getLinearGradient)}__getLinearGradient(){const T=this.fillLinearGradientColorStops();if(T){const O=p(),F=this.fillLinearGradientStartPoint(),I=this.fillLinearGradientEndPoint(),R=O.createLinearGradient(F.x,F.y,I.x,I.y);for(let U=0;U<T.length;U+=2)R.addColorStop(T[U],T[U+1]);return R}}_getRadialGradient(){return this._getCache(f,this.__getRadialGradient)}__getRadialGradient(){const T=this.fillRadialGradientColorStops();if(T){const O=p(),F=this.fillRadialGradientStartPoint(),I=this.fillRadialGradientEndPoint(),R=O.createRadialGradient(F.x,F.y,this.fillRadialGradientStartRadius(),I.x,I.y,this.fillRadialGradientEndRadius());for(let U=0;U<T.length;U+=2)R.addColorStop(T[U],T[U+1]);return R}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const T=t.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){const O=this.getStage();if(!O)return!1;const F=O.bufferHitCanvas;return F.getContext().clear(),this.drawHit(F,void 0,!0),F.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete n.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var O;if(!((O=this.attrs.perfectDrawEnabled)!==null&&O!==void 0?O:!0))return!1;const I=T||this.hasFill(),R=this.hasStroke(),U=this.getAbsoluteOpacity()!==1;if(I&&R&&U)return!0;const B=this.hasShadow(),W=this.shadowForStrokeEnabled();return!!(I&&R&&B&&W)}setStrokeHitEnabled(T){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let O=!1,F=this.getParent();for(;F;){if(F.isCached()){O=!0;break}F=F.getParent()}const I=T.skipTransform,R=T.relativeTo||O&&this.getStage()||void 0,U=this.getSelfRect(),W=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Y=U.width+W,z=U.height+W,j=!T.skipShadow&&this.hasShadow(),M=j?this.shadowOffsetX():0,q=j?this.shadowOffsetY():0,H=Y+Math.abs(M),K=z+Math.abs(q),Z=j&&this.shadowBlur()||0,J=H+Z*2,X=K+Z*2,ae={width:J,height:X,x:-(W/2+Z)+Math.min(M,0)+U.x,y:-(W/2+Z)+Math.min(q,0)+U.y};return I?ae:this._transformedRect(ae,R)}drawScene(T,O,F){const I=this.getLayer();let R=T||I.getCanvas(),U=R.getContext(),B=this._getCanvasCache(),W=this.getSceneFunc(),Y=this.hasShadow(),z,j;const M=R.isCache,q=O===this;if(!this.isVisible()&&!q)return this;if(B){U.save();const K=this.getAbsoluteTransform(O).getMatrix();return U.transform(K[0],K[1],K[2],K[3],K[4],K[5]),this._drawCachedSceneCanvas(U),U.restore(),this}if(!W)return this;if(U.save(),this._useBufferCanvas()&&!M){z=this.getStage();const K=F||z.bufferCanvas;j=K.getContext(),j.clear(),j.save(),j._applyLineJoin(this);var H=this.getAbsoluteTransform(O).getMatrix();j.transform(H[0],H[1],H[2],H[3],H[4],H[5]),W.call(this,j,this),j.restore();const Z=K.pixelRatio;Y&&U._applyShadow(this),U._applyOpacity(this),U._applyGlobalCompositeOperation(this),U.drawImage(K._canvas,0,0,K.width/Z,K.height/Z)}else{if(U._applyLineJoin(this),!q){var H=this.getAbsoluteTransform(O).getMatrix();U.transform(H[0],H[1],H[2],H[3],H[4],H[5]),U._applyOpacity(this),U._applyGlobalCompositeOperation(this)}Y&&U._applyShadow(this),W.call(this,U,this)}return U.restore(),this}drawHit(T,O,F=!1){if(!this.shouldDrawHit(O,F))return this;const I=this.getLayer(),R=T||I.hitCanvas,U=R&&R.getContext(),B=this.hitFunc()||this.sceneFunc(),W=this._getCanvasCache(),Y=W&&W.hit;if(this.colorKey||t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),Y){U.save();const j=this.getAbsoluteTransform(O).getMatrix();return U.transform(j[0],j[1],j[2],j[3],j[4],j[5]),this._drawCachedHitCanvas(U),U.restore(),this}if(!B)return this;if(U.save(),U._applyLineJoin(this),!(this===O)){const j=this.getAbsoluteTransform(O).getMatrix();U.transform(j[0],j[1],j[2],j[3],j[4],j[5])}return B.call(this,U,this),U.restore(),this}drawHitFromCache(T=0){const O=this._getCanvasCache(),F=this._getCachedSceneCanvas(),I=O.hit,R=I.getContext(),U=I.getWidth(),B=I.getHeight();R.clear(),R.drawImage(F._canvas,0,0,U,B);try{const W=R.getImageData(0,0,U,B),Y=W.data,z=Y.length,j=t.Util._hexToRgb(this.colorKey);for(let M=0;M<z;M+=4)Y[M+3]>T?(Y[M]=j.r,Y[M+1]=j.g,Y[M+2]=j.b,Y[M+3]=255):Y[M+3]=0;R.putImageData(W,0,0)}catch(W){t.Util.error("Unable to draw hit graph from cached scene canvas. "+W.message)}return this}hasPointerCapture(T){return s.hasPointerCapture(T,this)}setPointerCapture(T){s.setPointerCapture(T,this)}releaseCapture(T){s.releaseCapture(T,this)}}n.Shape=A,A.prototype._fillFunc=m,A.prototype._strokeFunc=g,A.prototype._fillFuncHit=y,A.prototype._strokeFuncHit=v,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,o._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",x),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",S),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",E),r.Factory.addGetterSetter(A,"stroke",void 0,(0,a.getStringOrGradientValidator)()),r.Factory.addGetterSetter(A,"strokeWidth",2,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),r.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),r.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),r.Factory.addGetterSetter(A,"lineJoin"),r.Factory.addGetterSetter(A,"lineCap"),r.Factory.addGetterSetter(A,"sceneFunc"),r.Factory.addGetterSetter(A,"hitFunc"),r.Factory.addGetterSetter(A,"dash"),r.Factory.addGetterSetter(A,"dashOffset",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowColor",void 0,(0,a.getStringValidator)()),r.Factory.addGetterSetter(A,"shadowBlur",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowOpacity",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternImage"),r.Factory.addGetterSetter(A,"fill",void 0,(0,a.getStringOrGradientValidator)()),r.Factory.addGetterSetter(A,"fillPatternX",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternY",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(A,"fillEnabled",!0),r.Factory.addGetterSetter(A,"strokeEnabled",!0),r.Factory.addGetterSetter(A,"shadowEnabled",!0),r.Factory.addGetterSetter(A,"dashEnabled",!0),r.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(A,"fillPriority","color"),r.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(A,"fillPatternRotation",0),r.Factory.addGetterSetter(A,"fillRule",void 0,(0,a.getStringValidator)()),r.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}($M)),$M}var xZ;function Sme(){if(xZ)return sS;xZ=1,Object.defineProperty(sS,"__esModule",{value:!0}),sS.Layer=void 0;const n=ia(),e=C4(),t=wa(),r=er(),i=S4(),a=sr(),o=Es(),s=Hn(),u="#",l="beforeDraw",h="draw",c=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],f=c.length;class d extends e.Container{constructor(m){super(m),this.canvas=new i.SceneCanvas,this.hitCanvas=new i.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(m){return this.getContext().clear(m),this.getHitCanvas().getContext().clear(m),this}setZIndex(m){super.setZIndex(m);const g=this.getStage();return g&&g.content&&(g.content.removeChild(this.getNativeCanvasElement()),m<g.children.length-1?g.content.insertBefore(this.getNativeCanvasElement(),g.children[m+1].getCanvas()._canvas):g.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){t.Node.prototype.moveToTop.call(this);const m=this.getStage();return m&&m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!t.Node.prototype.moveUp.call(this))return!1;const g=this.getStage();return!g||!g.content?!1:(g.content.removeChild(this.getNativeCanvasElement()),this.index<g.children.length-1?g.content.insertBefore(this.getNativeCanvasElement(),g.children[this.index+1].getCanvas()._canvas):g.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(t.Node.prototype.moveDown.call(this)){const m=this.getStage();if(m){const g=m.children;m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.insertBefore(this.getNativeCanvasElement(),g[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(t.Node.prototype.moveToBottom.call(this)){const m=this.getStage();if(m){const g=m.children;m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.insertBefore(this.getNativeCanvasElement(),g[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const m=this.getNativeCanvasElement();return t.Node.prototype.remove.call(this),m&&m.parentNode&&n.Util._isInDocument(m)&&m.parentNode.removeChild(m),this}getStage(){return this.parent}setSize({width:m,height:g}){return this.canvas.setSize(m,g),this.hitCanvas.setSize(m,g),this._setSmoothEnabled(),this}_validateAdd(m){const g=m.getType();g!=="Group"&&g!=="Shape"&&n.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(m){return m=m||{},m.width=m.width||this.getWidth(),m.height=m.height||this.getHeight(),m.x=m.x!==void 0?m.x:this.x(),m.y=m.y!==void 0?m.y:this.y(),t.Node.prototype._toKonvaCanvas.call(this,m)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){n.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){n.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,n.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(m){if(!this.isListening()||!this.isVisible())return null;let g=1,y=!1;for(;;){for(let v=0;v<f;v++){const b=c[v],w=this._getIntersection({x:m.x+b.x*g,y:m.y+b.y*g}),x=w.shape;if(x)return x;if(y=!!w.antialiased,!w.antialiased)break}if(y)g+=1;else return null}}_getIntersection(m){const g=this.hitCanvas.pixelRatio,y=this.hitCanvas.context.getImageData(Math.round(m.x*g),Math.round(m.y*g),1,1).data,v=y[3];if(v===255){const b=n.Util._rgbToHex(y[0],y[1],y[2]),w=o.shapes[u+b];return w?{shape:w}:{antialiased:!0}}else if(v>0)return{antialiased:!0};return{}}drawScene(m,g){const y=this.getLayer(),v=m||y&&y.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&v.getContext().clear(),e.Container.prototype.drawScene.call(this,v,g),this._fire(h,{node:this}),this}drawHit(m,g){const y=this.getLayer(),v=m||y&&y.hitCanvas;return y&&y.clearBeforeDraw()&&y.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,v,g),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(m){n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(m)}getHitGraphEnabled(m){return n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const m=this.parent;!!this.hitCanvas._canvas.parentNode?m.content.removeChild(this.hitCanvas._canvas):m.content.appendChild(this.hitCanvas._canvas)}destroy(){return n.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return sS.Layer=d,d.prototype.nodeType="Layer",(0,s._registerNode)(d),r.Factory.addGetterSetter(d,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(d,"clearBeforeDraw",!0),r.Factory.addGetterSetter(d,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),sS}var oS={},_Z;function GXe(){if(_Z)return oS;_Z=1,Object.defineProperty(oS,"__esModule",{value:!0}),oS.FastLayer=void 0;const n=ia(),e=Sme(),t=Hn();let r=class extends e.Layer{constructor(a){super(a),this.listening(!1),n.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return oS.FastLayer=r,r.prototype.nodeType="FastLayer",(0,t._registerNode)(r),oS}var uS={},SZ;function cj(){if(SZ)return uS;SZ=1,Object.defineProperty(uS,"__esModule",{value:!0}),uS.Group=void 0;const n=ia(),e=C4(),t=Hn();let r=class extends e.Container{_validateAdd(a){const o=a.getType();o!=="Group"&&o!=="Shape"&&n.Util.throw("You may only add groups and shapes to groups.")}};return uS.Group=r,r.prototype.nodeType="Group",(0,t._registerNode)(r),uS}var lS={},CZ;function hj(){if(CZ)return lS;CZ=1,Object.defineProperty(lS,"__esModule",{value:!0}),lS.Animation=void 0;const n=Hn(),e=ia(),t=function(){return n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class p2{constructor(a,o){this.id=p2.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:t(),frameRate:0},this.func=a,this.setLayers(o)}setLayers(a){let o=[];return a&&(o=Array.isArray(a)?a:[a]),this.layers=o,this}getLayers(){return this.layers}addLayer(a){const o=this.layers,s=o.length;for(let u=0;u<s;u++)if(o[u]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const o=p2.animations,s=o.length;for(let u=0;u<s;u++)if(o[u].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=t(),p2._addAnimation(this),this}stop(){return p2._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const o=a.id,s=this.animations,u=s.length;for(let l=0;l<u;l++)if(s[l].id===o){this.animations.splice(l,1);break}}static _runFrames(){const a={},o=this.animations;for(let s=0;s<o.length;s++){const u=o[s],l=u.layers,h=u.func;u._updateFrameObject(t());const c=l.length;let f;if(h?f=h.call(u,u.frame)!==!1:f=!0,!!f)for(let d=0;d<c;d++){const p=l[d];p._id!==void 0&&(a[p._id]=p)}}for(const s in a)a.hasOwnProperty(s)&&a[s].batchDraw()}static _animationLoop(){const a=p2;a.animations.length?(a._runFrames(),e.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return lS.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,lS}var qM={},EZ;function XXe(){return EZ||(EZ=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Easings=n.Tween=void 0;const e=ia(),t=hj(),r=wa(),i=Hn(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,u=3,l=["fill","stroke","shadowColor"];let h=0;class c{constructor(p,m,g,y,v,b,w){this.prop=p,this.propFunc=m,this.begin=y,this._pos=y,this.duration=b,this._change=0,this.prevPos=0,this.yoyo=w,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=g,this._change=v-this.begin,this.pause()}fire(p){const m=this[p];m&&m()}setTime(p){p>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():p<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=p,this.update())}getTime(){return this._time}setPosition(p){this.prevPos=this._pos,this.propFunc(p),this._pos=p}getPosition(p){return p===void 0&&(p=this._time),this.func(p,this.begin,this._change,this.duration)}play(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=u,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(p){this.pause(),this._time=p,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const p=this.getTimer()-this._startTime;this.state===s?this.setTime(p):this.state===u&&this.setTime(this.duration-p)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class f{constructor(p){const m=this,g=p.node,y=g._id,v=p.easing||n.Easings.Linear,b=!!p.yoyo;let w,x;typeof p.duration>"u"?w=.3:p.duration===0?w=.001:w=p.duration,this.node=g,this._id=h++;const S=g.getLayer()||(g instanceof i.Konva.Stage?g.getLayers():null);S||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){m.tween.onEnterFrame()},S),this.tween=new c(x,function(E){m._tweenFunc(E)},v,0,1,w*1e3,b),this._addListeners(),f.attrs[y]||(f.attrs[y]={}),f.attrs[y][this._id]||(f.attrs[y][this._id]={}),f.tweens[y]||(f.tweens[y]={});for(x in p)a[x]===void 0&&this._addAttr(x,p[x]);this.reset(),this.onFinish=p.onFinish,this.onReset=p.onReset,this.onUpdate=p.onUpdate}_addAttr(p,m){const g=this.node,y=g._id;let v,b,w,x,S;const E=f.tweens[y][p];E&&delete f.attrs[y][E][p];let A=g.getAttr(p);if(e.Util._isArray(m))if(v=[],b=Math.max(m.length,A.length),p==="points"&&m.length!==A.length&&(m.length>A.length?(x=A,A=e.Util._prepareArrayForTween(A,m,g.closed())):(w=m,m=e.Util._prepareArrayForTween(m,A,g.closed()))),p.indexOf("fill")===0)for(let k=0;k<b;k++)if(k%2===0)v.push(m[k]-A[k]);else{const T=e.Util.colorToRGBA(A[k]);S=e.Util.colorToRGBA(m[k]),A[k]=T,v.push({r:S.r-T.r,g:S.g-T.g,b:S.b-T.b,a:S.a-T.a})}else for(let k=0;k<b;k++)v.push(m[k]-A[k]);else l.indexOf(p)!==-1?(A=e.Util.colorToRGBA(A),S=e.Util.colorToRGBA(m),v={r:S.r-A.r,g:S.g-A.g,b:S.b-A.b,a:S.a-A.a}):v=m-A;f.attrs[y][this._id][p]={start:A,diff:v,end:m,trueEnd:w,trueStart:x},f.tweens[y][p]=this._id}_tweenFunc(p){const m=this.node,g=f.attrs[m._id][this._id];let y,v,b,w,x,S,E,A;for(y in g){if(v=g[y],b=v.start,w=v.diff,A=v.end,e.Util._isArray(b))if(x=[],E=Math.max(b.length,A.length),y.indexOf("fill")===0)for(S=0;S<E;S++)S%2===0?x.push((b[S]||0)+w[S]*p):x.push("rgba("+Math.round(b[S].r+w[S].r*p)+","+Math.round(b[S].g+w[S].g*p)+","+Math.round(b[S].b+w[S].b*p)+","+(b[S].a+w[S].a*p)+")");else for(S=0;S<E;S++)x.push((b[S]||0)+w[S]*p);else l.indexOf(y)!==-1?x="rgba("+Math.round(b.r+w.r*p)+","+Math.round(b.g+w.g*p)+","+Math.round(b.b+w.b*p)+","+(b.a+w.a*p)+")":x=b+w*p;m.setAttr(y,x)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const p=this.node,m=f.attrs[p._id][this._id];m.points&&m.points.trueEnd&&p.setAttr("points",m.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const p=this.node,m=f.attrs[p._id][this._id];m.points&&m.points.trueStart&&p.points(m.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(p){return this.tween.seek(p*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const p=this.node._id,m=this._id,g=f.tweens[p];this.pause();for(const y in g)delete f.tweens[p][y];delete f.attrs[p][m]}}n.Tween=f,f.attrs={},f.tweens={},r.Node.prototype.to=function(d){const p=d.onFinish;d.node=this,d.onFinish=function(){this.destroy(),p&&p()},new f(d).play()},n.Easings={BackEaseIn(d,p,m,g){return m*(d/=g)*d*((1.70158+1)*d-1.70158)+p},BackEaseOut(d,p,m,g){return m*((d=d/g-1)*d*((1.70158+1)*d+1.70158)+1)+p},BackEaseInOut(d,p,m,g){let y=1.70158;return(d/=g/2)<1?m/2*(d*d*(((y*=1.525)+1)*d-y))+p:m/2*((d-=2)*d*(((y*=1.525)+1)*d+y)+2)+p},ElasticEaseIn(d,p,m,g,y,v){let b=0;return d===0?p:(d/=g)===1?p+m:(v||(v=g*.3),!y||y<Math.abs(m)?(y=m,b=v/4):b=v/(2*Math.PI)*Math.asin(m/y),-(y*Math.pow(2,10*(d-=1))*Math.sin((d*g-b)*(2*Math.PI)/v))+p)},ElasticEaseOut(d,p,m,g,y,v){let b=0;return d===0?p:(d/=g)===1?p+m:(v||(v=g*.3),!y||y<Math.abs(m)?(y=m,b=v/4):b=v/(2*Math.PI)*Math.asin(m/y),y*Math.pow(2,-10*d)*Math.sin((d*g-b)*(2*Math.PI)/v)+m+p)},ElasticEaseInOut(d,p,m,g,y,v){let b=0;return d===0?p:(d/=g/2)===2?p+m:(v||(v=g*(.3*1.5)),!y||y<Math.abs(m)?(y=m,b=v/4):b=v/(2*Math.PI)*Math.asin(m/y),d<1?-.5*(y*Math.pow(2,10*(d-=1))*Math.sin((d*g-b)*(2*Math.PI)/v))+p:y*Math.pow(2,-10*(d-=1))*Math.sin((d*g-b)*(2*Math.PI)/v)*.5+m+p)},BounceEaseOut(d,p,m,g){return(d/=g)<1/2.75?m*(7.5625*d*d)+p:d<2/2.75?m*(7.5625*(d-=1.5/2.75)*d+.75)+p:d<2.5/2.75?m*(7.5625*(d-=2.25/2.75)*d+.9375)+p:m*(7.5625*(d-=2.625/2.75)*d+.984375)+p},BounceEaseIn(d,p,m,g){return m-n.Easings.BounceEaseOut(g-d,0,m,g)+p},BounceEaseInOut(d,p,m,g){return d<g/2?n.Easings.BounceEaseIn(d*2,0,m,g)*.5+p:n.Easings.BounceEaseOut(d*2-g,0,m,g)*.5+m*.5+p},EaseIn(d,p,m,g){return m*(d/=g)*d+p},EaseOut(d,p,m,g){return-m*(d/=g)*(d-2)+p},EaseInOut(d,p,m,g){return(d/=g/2)<1?m/2*d*d+p:-m/2*(--d*(d-2)-1)+p},StrongEaseIn(d,p,m,g){return m*(d/=g)*d*d*d*d+p},StrongEaseOut(d,p,m,g){return m*((d=d/g-1)*d*d*d*d+1)+p},StrongEaseInOut(d,p,m,g){return(d/=g/2)<1?m/2*d*d*d*d*d+p:m/2*((d-=2)*d*d*d*d+2)+p},Linear(d,p,m,g){return m*d/g+p}}}(qM)),qM}var TZ;function xB(){return TZ||(TZ=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Konva=void 0;const e=Hn(),t=ia(),r=wa(),i=C4(),a=HXe(),o=Sme(),s=GXe(),u=cj(),l=lj(),h=Es(),c=hj(),f=XXe(),d=xme(),p=S4();n.Konva=t.Util._assign(e.Konva,{Util:t.Util,Transform:t.Transform,Node:r.Node,Container:i.Container,Stage:a.Stage,stages:a.stages,Layer:o.Layer,FastLayer:s.FastLayer,Group:u.Group,DD:l.DD,Shape:h.Shape,shapes:h.shapes,Animation:c.Animation,Tween:f.Tween,Easings:f.Easings,Context:d.Context,Canvas:p.Canvas}),n.default=n.Konva}(MM)),MM}var cS={},DZ;function KXe(){if(DZ)return cS;DZ=1,Object.defineProperty(cS,"__esModule",{value:!0}),cS.Arc=void 0;const n=er(),e=Es(),t=Hn(),r=sr(),i=Hn();let a=class extends e.Shape{_sceneFunc(s){const u=t.Konva.getAngle(this.angle()),l=this.clockwise();s.beginPath(),s.arc(0,0,this.outerRadius(),0,u,l),s.arc(0,0,this.innerRadius(),u,0,!l),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}getSelfRect(){const s=this.innerRadius(),u=this.outerRadius(),l=this.clockwise(),h=t.Konva.getAngle(l?360-this.angle():this.angle()),c=Math.cos(Math.min(h,Math.PI)),f=1,d=Math.sin(Math.min(Math.max(Math.PI,h),3*Math.PI/2)),p=Math.sin(Math.min(h,Math.PI/2)),m=c*(c>0?s:u),g=f*u,y=d*(d>0?s:u),v=p*(p>0?u:s);return{x:m,y:l?-1*v:y,width:g-m,height:v-y}}};return cS.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,i._registerNode)(a),n.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(a,"angle",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(a,"clockwise",!1,(0,r.getBooleanValidator)()),cS}var hS={},fS={},AZ;function Cme(){if(AZ)return fS;AZ=1,Object.defineProperty(fS,"__esModule",{value:!0}),fS.Line=void 0;const n=er(),e=Hn(),t=Es(),r=sr();function i(s,u,l,h,c,f,d){const p=Math.sqrt(Math.pow(l-s,2)+Math.pow(h-u,2)),m=Math.sqrt(Math.pow(c-l,2)+Math.pow(f-h,2)),g=d*p/(p+m),y=d*m/(p+m),v=l-g*(c-s),b=h-g*(f-u),w=l+y*(c-s),x=h+y*(f-u);return[v,b,w,x]}function a(s,u){const l=s.length,h=[];for(let c=2;c<l-2;c+=2){const f=i(s[c-2],s[c-1],s[c],s[c+1],s[c+2],s[c+3],u);isNaN(f[0])||(h.push(f[0]),h.push(f[1]),h.push(s[c]),h.push(s[c+1]),h.push(f[2]),h.push(f[3]))}return h}let o=class extends t.Shape{constructor(u){super(u),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(u){let l=this.points(),h=l.length,c=this.tension(),f=this.closed(),d=this.bezier(),p,m,g;if(h){if(u.beginPath(),u.moveTo(l[0],l[1]),c!==0&&h>4){for(p=this.getTensionPoints(),m=p.length,g=f?0:4,f||u.quadraticCurveTo(p[0],p[1],p[2],p[3]);g<m-2;)u.bezierCurveTo(p[g++],p[g++],p[g++],p[g++],p[g++],p[g++]);f||u.quadraticCurveTo(p[m-2],p[m-1],l[h-2],l[h-1])}else if(d)for(g=2;g<h;)u.bezierCurveTo(l[g++],l[g++],l[g++],l[g++],l[g++],l[g++]);else for(g=2;g<h;g+=2)u.lineTo(l[g],l[g+1]);f?(u.closePath(),u.fillStrokeShape(this)):u.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const u=this.points(),l=u.length,h=this.tension(),c=i(u[l-2],u[l-1],u[0],u[1],u[2],u[3],h),f=i(u[l-4],u[l-3],u[l-2],u[l-1],u[0],u[1],h),d=a(u,h);return[c[2],c[3]].concat(d).concat([f[0],f[1],u[l-2],u[l-1],f[2],f[3],c[0],c[1],u[0],u[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let u=this.points();if(u.length<4)return{x:u[0]||0,y:u[1]||0,width:0,height:0};this.tension()!==0?u=[u[0],u[1],...this._getTensionPoints(),u[u.length-2],u[u.length-1]]:u=this.points();let l=u[0],h=u[0],c=u[1],f=u[1],d,p;for(let m=0;m<u.length/2;m++)d=u[m*2],p=u[m*2+1],l=Math.min(l,d),h=Math.max(h,d),c=Math.min(c,p),f=Math.max(f,p);return{x:l,y:c,width:h-l,height:f-c}}};return fS.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(o),n.Factory.addGetterSetter(o,"closed",!1),n.Factory.addGetterSetter(o,"bezier",!1),n.Factory.addGetterSetter(o,"tension",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(o,"points",[],(0,r.getNumberArrayValidator)()),fS}var dS={},VM={},kZ;function YXe(){return kZ||(kZ=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.t2length=n.getQuadraticArcLength=n.getCubicArcLength=n.binomialCoefficients=n.cValues=n.tValues=void 0,n.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],n.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],n.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,s,u)=>{let l,h;const f=u/2;l=0;for(let d=0;d<20;d++)h=f*n.tValues[20][d]+f,l+=n.cValues[20][d]*r(o,s,h);return f*l};n.getCubicArcLength=e;const t=(o,s,u)=>{u===void 0&&(u=1);const l=o[0]-2*o[1]+o[2],h=s[0]-2*s[1]+s[2],c=2*o[1]-2*o[0],f=2*s[1]-2*s[0],d=4*(l*l+h*h),p=4*(l*c+h*f),m=c*c+f*f;if(d===0)return u*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(s[2]-s[0],2));const g=p/(2*d),y=m/d,v=u+g,b=y-g*g,w=v*v+b>0?Math.sqrt(v*v+b):0,x=g*g+b>0?Math.sqrt(g*g+b):0,S=g+Math.sqrt(g*g+b)!==0?b*Math.log(Math.abs((v+w)/(g+x))):0;return Math.sqrt(d)/2*(v*w-g*x+S)};n.getQuadraticArcLength=t;function r(o,s,u){const l=i(1,u,o),h=i(1,u,s),c=l*l+h*h;return Math.sqrt(c)}const i=(o,s,u)=>{const l=u.length-1;let h,c;if(l===0)return 0;if(o===0){c=0;for(let f=0;f<=l;f++)c+=n.binomialCoefficients[l][f]*Math.pow(1-s,l-f)*Math.pow(s,f)*u[f];return c}else{h=new Array(l);for(let f=0;f<l;f++)h[f]=l*(u[f+1]-u[f]);return i(o-1,s,h)}},a=(o,s,u)=>{let l=1,h=o/s,c=(o-u(h))/s,f=0;for(;l>.001;){const d=u(h+c),p=Math.abs(o-d)/s;if(p<l)l=p,h+=c;else{const m=u(h-c),g=Math.abs(o-m)/s;g<l?(l=g,h-=c):c/=2}if(f++,f>500)break}return h};n.t2length=a}(VM)),VM}var NZ;function fj(){if(NZ)return dS;NZ=1,Object.defineProperty(dS,"__esModule",{value:!0}),dS.Path=void 0;const n=er(),e=Es(),t=Hn(),r=YXe();let i=class fu extends e.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=fu.parsePathData(this.data()),this.pathLength=fu.getPathLength(this.dataArray)}_sceneFunc(o){const s=this.dataArray;o.beginPath();let u=!1;for(let w=0;w<s.length;w++){const x=s[w].command,S=s[w].points;switch(x){case"L":o.lineTo(S[0],S[1]);break;case"M":o.moveTo(S[0],S[1]);break;case"C":o.bezierCurveTo(S[0],S[1],S[2],S[3],S[4],S[5]);break;case"Q":o.quadraticCurveTo(S[0],S[1],S[2],S[3]);break;case"A":var l=S[0],h=S[1],c=S[2],f=S[3],d=S[4],p=S[5],m=S[6],g=S[7],y=c>f?c:f,v=c>f?1:c/f,b=c>f?f/c:1;o.translate(l,h),o.rotate(m),o.scale(v,b),o.arc(0,0,y,d,d+p,1-g),o.scale(1/v,1/b),o.rotate(-m),o.translate(-l,-h);break;case"z":u=!0,o.closePath();break}}!u&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(d){if(d.command==="A"){const p=d.points[4],m=d.points[5],g=d.points[4]+m;let y=Math.PI/180;if(Math.abs(p-g)<y&&(y=Math.abs(p-g)),m<0)for(let v=p-y;v>g;v-=y){const b=fu.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],v,0);o.push(b.x,b.y)}else for(let v=p+y;v<g;v+=y){const b=fu.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],v,0);o.push(b.x,b.y)}}else if(d.command==="C")for(let p=0;p<=1;p+=.01){const m=fu.getPointOnCubicBezier(p,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);o.push(m.x,m.y)}else o=o.concat(d.points)});let s=o[0],u=o[0],l=o[1],h=o[1],c,f;for(let d=0;d<o.length/2;d++)c=o[d*2],f=o[d*2+1],isNaN(c)||(s=Math.min(s,c),u=Math.max(u,c)),isNaN(f)||(l=Math.min(l,f),h=Math.max(h,f));return{x:s,y:l,width:u-s,height:h-l}}getLength(){return this.pathLength}getPointAtLength(o){return fu.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,s,u,l){return Math.sqrt((u-o)*(u-o)+(l-s)*(l-s))}static getPathLength(o){let s=0;for(let u=0;u<o.length;++u)s+=o[u].pathLength;return s}static getPointAtLengthOfDataArray(o,s){let u,l=0,h=s.length;if(!h)return null;for(;l<h&&o>s[l].pathLength;)o-=s[l].pathLength,++l;if(l===h)return u=s[l-1].points.slice(-2),{x:u[0],y:u[1]};if(o<.01)return u=s[l].points.slice(0,2),{x:u[0],y:u[1]};const c=s[l],f=c.points;switch(c.command){case"L":return fu.getPointOnLine(o,c.start.x,c.start.y,f[0],f[1]);case"C":return fu.getPointOnCubicBezier((0,r.t2length)(o,fu.getPathLength(s),w=>(0,r.getCubicArcLength)([c.start.x,f[0],f[2],f[4]],[c.start.y,f[1],f[3],f[5]],w)),c.start.x,c.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return fu.getPointOnQuadraticBezier((0,r.t2length)(o,fu.getPathLength(s),w=>(0,r.getQuadraticArcLength)([c.start.x,f[0],f[2]],[c.start.y,f[1],f[3]],w)),c.start.x,c.start.y,f[0],f[1],f[2],f[3]);case"A":var d=f[0],p=f[1],m=f[2],g=f[3],y=f[4],v=f[5],b=f[6];return y+=v*o/c.pathLength,fu.getPointOnEllipticalArc(d,p,m,g,y,b)}return null}static getPointOnLine(o,s,u,l,h,c,f){c=c??s,f=f??u;const d=this.getLineLength(s,u,l,h);if(d<1e-10)return{x:s,y:u};if(l===s)return{x:c,y:f+(h>u?o:-o)};const p=(h-u)/(l-s),m=Math.sqrt(o*o/(1+p*p))*(l<s?-1:1),g=p*m;if(Math.abs(f-u-p*(c-s))<1e-10)return{x:c+m,y:f+g};const y=((c-s)*(l-s)+(f-u)*(h-u))/(d*d),v=s+y*(l-s),b=u+y*(h-u),w=this.getLineLength(c,f,v,b),x=Math.sqrt(o*o-w*w),S=Math.sqrt(x*x/(1+p*p))*(l<s?-1:1),E=p*S;return{x:v+S,y:b+E}}static getPointOnCubicBezier(o,s,u,l,h,c,f,d,p){function m(x){return x*x*x}function g(x){return 3*x*x*(1-x)}function y(x){return 3*x*(1-x)*(1-x)}function v(x){return(1-x)*(1-x)*(1-x)}const b=d*m(o)+c*g(o)+l*y(o)+s*v(o),w=p*m(o)+f*g(o)+h*y(o)+u*v(o);return{x:b,y:w}}static getPointOnQuadraticBezier(o,s,u,l,h,c,f){function d(v){return v*v}function p(v){return 2*v*(1-v)}function m(v){return(1-v)*(1-v)}const g=c*d(o)+l*p(o)+s*m(o),y=f*d(o)+h*p(o)+u*m(o);return{x:g,y}}static getPointOnEllipticalArc(o,s,u,l,h,c){const f=Math.cos(c),d=Math.sin(c),p={x:u*Math.cos(h),y:l*Math.sin(h)};return{x:o+(p.x*f-p.y*d),y:s+(p.x*d+p.y*f)}}static parsePathData(o){if(!o)return[];let s=o;const u=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];s=s.replace(new RegExp(" ","g"),",");for(var l=0;l<u.length;l++)s=s.replace(new RegExp(u[l],"g"),"|"+u[l]);const h=s.split("|"),c=[],f=[];let d=0,p=0;const m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let g;for(l=1;l<h.length;l++){let I=h[l],R=I.charAt(0);for(I=I.slice(1),f.length=0;g=m.exec(I);)f.push(g[0]);const U=[];for(let B=0,W=f.length;B<W;B++){if(f[B]==="00"){U.push(0,0);continue}const Y=parseFloat(f[B]);isNaN(Y)?U.push(0):U.push(Y)}for(;U.length>0&&!isNaN(U[0]);){let B="",W=[];const Y=d,z=p;var y,v,b,w,x,S,E,A,k,T;switch(R){case"l":d+=U.shift(),p+=U.shift(),B="L",W.push(d,p);break;case"L":d=U.shift(),p=U.shift(),W.push(d,p);break;case"m":var O=U.shift(),F=U.shift();if(d+=O,p+=F,B="M",c.length>2&&c[c.length-1].command==="z"){for(let j=c.length-2;j>=0;j--)if(c[j].command==="M"){d=c[j].points[0]+O,p=c[j].points[1]+F;break}}W.push(d,p),R="l";break;case"M":d=U.shift(),p=U.shift(),B="M",W.push(d,p),R="L";break;case"h":d+=U.shift(),B="L",W.push(d,p);break;case"H":d=U.shift(),B="L",W.push(d,p);break;case"v":p+=U.shift(),B="L",W.push(d,p);break;case"V":p=U.shift(),B="L",W.push(d,p);break;case"C":W.push(U.shift(),U.shift(),U.shift(),U.shift()),d=U.shift(),p=U.shift(),W.push(d,p);break;case"c":W.push(d+U.shift(),p+U.shift(),d+U.shift(),p+U.shift()),d+=U.shift(),p+=U.shift(),B="C",W.push(d,p);break;case"S":v=d,b=p,y=c[c.length-1],y.command==="C"&&(v=d+(d-y.points[2]),b=p+(p-y.points[3])),W.push(v,b,U.shift(),U.shift()),d=U.shift(),p=U.shift(),B="C",W.push(d,p);break;case"s":v=d,b=p,y=c[c.length-1],y.command==="C"&&(v=d+(d-y.points[2]),b=p+(p-y.points[3])),W.push(v,b,d+U.shift(),p+U.shift()),d+=U.shift(),p+=U.shift(),B="C",W.push(d,p);break;case"Q":W.push(U.shift(),U.shift()),d=U.shift(),p=U.shift(),W.push(d,p);break;case"q":W.push(d+U.shift(),p+U.shift()),d+=U.shift(),p+=U.shift(),B="Q",W.push(d,p);break;case"T":v=d,b=p,y=c[c.length-1],y.command==="Q"&&(v=d+(d-y.points[0]),b=p+(p-y.points[1])),d=U.shift(),p=U.shift(),B="Q",W.push(v,b,d,p);break;case"t":v=d,b=p,y=c[c.length-1],y.command==="Q"&&(v=d+(d-y.points[0]),b=p+(p-y.points[1])),d+=U.shift(),p+=U.shift(),B="Q",W.push(v,b,d,p);break;case"A":w=U.shift(),x=U.shift(),S=U.shift(),E=U.shift(),A=U.shift(),k=d,T=p,d=U.shift(),p=U.shift(),B="A",W=this.convertEndpointToCenterParameterization(k,T,d,p,E,A,w,x,S);break;case"a":w=U.shift(),x=U.shift(),S=U.shift(),E=U.shift(),A=U.shift(),k=d,T=p,d+=U.shift(),p+=U.shift(),B="A",W=this.convertEndpointToCenterParameterization(k,T,d,p,E,A,w,x,S);break}c.push({command:B||R,points:W,start:{x:Y,y:z},pathLength:this.calcLength(Y,z,B||R,W)})}(R==="z"||R==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(o,s,u,l){let h,c,f,d;const p=fu;switch(u){case"L":return p.getLineLength(o,s,l[0],l[1]);case"C":return(0,r.getCubicArcLength)([o,l[0],l[2],l[4]],[s,l[1],l[3],l[5]],1);case"Q":return(0,r.getQuadraticArcLength)([o,l[0],l[2]],[s,l[1],l[3]],1);case"A":h=0;var m=l[4],g=l[5],y=l[4]+g,v=Math.PI/180;if(Math.abs(m-y)<v&&(v=Math.abs(m-y)),c=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],m,0),g<0)for(d=m-v;d>y;d-=v)f=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],d,0),h+=p.getLineLength(c.x,c.y,f.x,f.y),c=f;else for(d=m+v;d<y;d+=v)f=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],d,0),h+=p.getLineLength(c.x,c.y,f.x,f.y),c=f;return f=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],y,0),h+=p.getLineLength(c.x,c.y,f.x,f.y),h}return 0}static convertEndpointToCenterParameterization(o,s,u,l,h,c,f,d,p){const m=p*(Math.PI/180),g=Math.cos(m)*(o-u)/2+Math.sin(m)*(s-l)/2,y=-1*Math.sin(m)*(o-u)/2+Math.cos(m)*(s-l)/2,v=g*g/(f*f)+y*y/(d*d);v>1&&(f*=Math.sqrt(v),d*=Math.sqrt(v));let b=Math.sqrt((f*f*(d*d)-f*f*(y*y)-d*d*(g*g))/(f*f*(y*y)+d*d*(g*g)));h===c&&(b*=-1),isNaN(b)&&(b=0);const w=b*f*y/d,x=b*-d*g/f,S=(o+u)/2+Math.cos(m)*w-Math.sin(m)*x,E=(s+l)/2+Math.sin(m)*w+Math.cos(m)*x,A=function(U){return Math.sqrt(U[0]*U[0]+U[1]*U[1])},k=function(U,B){return(U[0]*B[0]+U[1]*B[1])/(A(U)*A(B))},T=function(U,B){return(U[0]*B[1]<U[1]*B[0]?-1:1)*Math.acos(k(U,B))},O=T([1,0],[(g-w)/f,(y-x)/d]),F=[(g-w)/f,(y-x)/d],I=[(-1*g-w)/f,(-1*y-x)/d];let R=T(F,I);return k(F,I)<=-1&&(R=Math.PI),k(F,I)>=1&&(R=0),c===0&&R>0&&(R=R-2*Math.PI),c===1&&R<0&&(R=R+2*Math.PI),[S,E,f,d,O,R,m,c]}};return dS.Path=i,i.prototype.className="Path",i.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(i),n.Factory.addGetterSetter(i,"data"),dS}var OZ;function QXe(){if(OZ)return hS;OZ=1,Object.defineProperty(hS,"__esModule",{value:!0}),hS.Arrow=void 0;const n=er(),e=Cme(),t=sr(),r=Hn(),i=fj();let a=class extends e.Line{_sceneFunc(s){super._sceneFunc(s);const u=Math.PI*2,l=this.points();let h=l;const c=this.tension()!==0&&l.length>4;c&&(h=this.getTensionPoints());const f=this.pointerLength(),d=l.length;let p,m;if(c){const v=[h[h.length-4],h[h.length-3],h[h.length-2],h[h.length-1],l[d-2],l[d-1]],b=i.Path.calcLength(h[h.length-4],h[h.length-3],"C",v),w=i.Path.getPointOnQuadraticBezier(Math.min(1,1-f/b),v[0],v[1],v[2],v[3],v[4],v[5]);p=l[d-2]-w.x,m=l[d-1]-w.y}else p=l[d-2]-l[d-4],m=l[d-1]-l[d-3];const g=(Math.atan2(m,p)+u)%u,y=this.pointerWidth();this.pointerAtEnding()&&(s.save(),s.beginPath(),s.translate(l[d-2],l[d-1]),s.rotate(g),s.moveTo(0,0),s.lineTo(-f,y/2),s.lineTo(-f,-y/2),s.closePath(),s.restore(),this.__fillStroke(s)),this.pointerAtBeginning()&&(s.save(),s.beginPath(),s.translate(l[0],l[1]),c?(p=(h[0]+h[2])/2-l[0],m=(h[1]+h[3])/2-l[1]):(p=l[2]-l[0],m=l[3]-l[1]),s.rotate((Math.atan2(-m,-p)+u)%u),s.moveTo(0,0),s.lineTo(-f,y/2),s.lineTo(-f,-y/2),s.closePath(),s.restore(),this.__fillStroke(s))}__fillStroke(s){const u=this.dashEnabled();u&&(this.attrs.dashEnabled=!1,s.setLineDash([])),s.fillStrokeShape(this),u&&(this.attrs.dashEnabled=!0)}getSelfRect(){const s=super.getSelfRect(),u=this.pointerWidth()/2;return{x:s.x,y:s.y-u,width:s.width,height:s.height+u*2}}};return hS.Arrow=a,a.prototype.className="Arrow",(0,r._registerNode)(a),n.Factory.addGetterSetter(a,"pointerLength",10,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(a,"pointerWidth",10,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(a,"pointerAtBeginning",!1),n.Factory.addGetterSetter(a,"pointerAtEnding",!0),hS}var pS={},RZ;function ZXe(){if(RZ)return pS;RZ=1,Object.defineProperty(pS,"__esModule",{value:!0}),pS.Circle=void 0;const n=er(),e=Es(),t=sr(),r=Hn();let i=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}};return pS.Circle=i,i.prototype._centroid=!0,i.prototype.className="Circle",i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),n.Factory.addGetterSetter(i,"radius",0,(0,t.getNumberValidator)()),pS}var gS={},IZ;function JXe(){if(IZ)return gS;IZ=1,Object.defineProperty(gS,"__esModule",{value:!0}),gS.Ellipse=void 0;const n=er(),e=Es(),t=sr(),r=Hn();let i=class extends e.Shape{_sceneFunc(o){const s=this.radiusX(),u=this.radiusY();o.beginPath(),o.save(),s!==u&&o.scale(1,u/s),o.arc(0,0,s,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return gS.Ellipse=i,i.prototype.className="Ellipse",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(i),n.Factory.addComponentsGetterSetter(i,"radius",["x","y"]),n.Factory.addGetterSetter(i,"radiusX",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(i,"radiusY",0,(0,t.getNumberValidator)()),gS}var mS={},FZ;function eKe(){if(FZ)return mS;FZ=1,Object.defineProperty(mS,"__esModule",{value:!0}),mS.Image=void 0;const n=ia(),e=er(),t=Es(),r=Hn(),i=sr();class a extends t.Shape{constructor(s){super(s),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",u=>{this._removeImageLoad(u.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const s=this.image();s&&s.complete||s&&s.readyState===4||s&&s.addEventListener&&s.addEventListener("load",this._loadListener)}_removeImageLoad(s){s&&s.removeEventListener&&s.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const s=!!this.cornerRadius(),u=this.hasShadow();return s&&u?!0:super._useBufferCanvas(!0)}_sceneFunc(s){const u=this.getWidth(),l=this.getHeight(),h=this.cornerRadius(),c=this.attrs.image;let f;if(c){const d=this.attrs.cropWidth,p=this.attrs.cropHeight;d&&p?f=[c,this.cropX(),this.cropY(),d,p,0,0,u,l]:f=[c,0,0,u,l]}(this.hasFill()||this.hasStroke()||h)&&(s.beginPath(),h?n.Util.drawRoundedRectPath(s,u,l,h):s.rect(0,0,u,l),s.closePath(),s.fillStrokeShape(this)),c&&(h&&s.clip(),s.drawImage.apply(s,f))}_hitFunc(s){const u=this.width(),l=this.height(),h=this.cornerRadius();s.beginPath(),h?n.Util.drawRoundedRectPath(s,u,l,h):s.rect(0,0,u,l),s.closePath(),s.fillStrokeShape(this)}getWidth(){var s,u;return(s=this.attrs.width)!==null&&s!==void 0?s:(u=this.image())===null||u===void 0?void 0:u.width}getHeight(){var s,u;return(s=this.attrs.height)!==null&&s!==void 0?s:(u=this.image())===null||u===void 0?void 0:u.height}static fromURL(s,u,l=null){const h=n.Util.createImageElement();h.onload=function(){const c=new a({image:h});u(c)},h.onerror=l,h.crossOrigin="Anonymous",h.src=s}}return mS.Image=a,a.prototype.className="Image",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(a,"image"),e.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(a,"cropX",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(a,"cropY",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(a,"cropWidth",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(a,"cropHeight",0,(0,i.getNumberValidator)()),mS}var uv={},PZ;function tKe(){if(PZ)return uv;PZ=1,Object.defineProperty(uv,"__esModule",{value:!0}),uv.Tag=uv.Label=void 0;const n=er(),e=Es(),t=cj(),r=sr(),i=Hn(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",s="none",u="up",l="right",h="down",c="left",f=a.length;let d=class extends t.Group{constructor(g){super(g),this.on("add.konva",function(y){this._addListeners(y.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(g){let y=this,v;const b=function(){y._sync()};for(v=0;v<f;v++)g.on(a[v]+o,b)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let g=this.getText(),y=this.getTag(),v,b,w,x,S,E,A;if(g&&y){switch(v=g.width(),b=g.height(),w=y.pointerDirection(),x=y.pointerWidth(),A=y.pointerHeight(),S=0,E=0,w){case u:S=v/2,E=-1*A;break;case l:S=v+x,E=b/2;break;case h:S=v/2,E=b+A;break;case c:S=-1*x,E=b/2;break}y.setAttrs({x:-1*S,y:-1*E,width:v,height:b}),g.setAttrs({x:-1*S,y:-1*E})}}};uv.Label=d,d.prototype.className="Label",(0,i._registerNode)(d);class p extends e.Shape{_sceneFunc(g){const y=this.width(),v=this.height(),b=this.pointerDirection(),w=this.pointerWidth(),x=this.pointerHeight(),S=this.cornerRadius();let E=0,A=0,k=0,T=0;typeof S=="number"?E=A=k=T=Math.min(S,y/2,v/2):(E=Math.min(S[0]||0,y/2,v/2),A=Math.min(S[1]||0,y/2,v/2),T=Math.min(S[2]||0,y/2,v/2),k=Math.min(S[3]||0,y/2,v/2)),g.beginPath(),g.moveTo(E,0),b===u&&(g.lineTo((y-w)/2,0),g.lineTo(y/2,-1*x),g.lineTo((y+w)/2,0)),g.lineTo(y-A,0),g.arc(y-A,A,A,Math.PI*3/2,0,!1),b===l&&(g.lineTo(y,(v-x)/2),g.lineTo(y+w,v/2),g.lineTo(y,(v+x)/2)),g.lineTo(y,v-T),g.arc(y-T,v-T,T,0,Math.PI/2,!1),b===h&&(g.lineTo((y+w)/2,v),g.lineTo(y/2,v+x),g.lineTo((y-w)/2,v)),g.lineTo(k,v),g.arc(k,v-k,k,Math.PI/2,Math.PI,!1),b===c&&(g.lineTo(0,(v+x)/2),g.lineTo(-1*w,v/2),g.lineTo(0,(v-x)/2)),g.lineTo(0,E),g.arc(E,E,E,Math.PI,Math.PI*3/2,!1),g.closePath(),g.fillStrokeShape(this)}getSelfRect(){let g=0,y=0,v=this.pointerWidth(),b=this.pointerHeight(),w=this.pointerDirection(),x=this.width(),S=this.height();return w===u?(y-=b,S+=b):w===h?S+=b:w===c?(g-=v*1.5,x+=v):w===l&&(x+=v*1.5),{x:g,y,width:x,height:S}}}return uv.Tag=p,p.prototype.className="Tag",(0,i._registerNode)(p),n.Factory.addGetterSetter(p,"pointerDirection",s),n.Factory.addGetterSetter(p,"pointerWidth",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(p,"pointerHeight",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(p,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),uv}var yS={},LZ;function Eme(){if(LZ)return yS;LZ=1,Object.defineProperty(yS,"__esModule",{value:!0}),yS.Rect=void 0;const n=er(),e=Es(),t=Hn(),r=ia(),i=sr();let a=class extends e.Shape{_sceneFunc(s){const u=this.cornerRadius(),l=this.width(),h=this.height();s.beginPath(),u?r.Util.drawRoundedRectPath(s,l,h,u):s.rect(0,0,l,h),s.closePath(),s.fillStrokeShape(this)}};return yS.Rect=a,a.prototype.className="Rect",(0,t._registerNode)(a),n.Factory.addGetterSetter(a,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),yS}var vS={},MZ;function nKe(){if(MZ)return vS;MZ=1,Object.defineProperty(vS,"__esModule",{value:!0}),vS.RegularPolygon=void 0;const n=er(),e=Es(),t=sr(),r=Hn();let i=class extends e.Shape{_sceneFunc(o){const s=this._getPoints();o.beginPath(),o.moveTo(s[0].x,s[0].y);for(let u=1;u<s.length;u++)o.lineTo(s[u].x,s[u].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,s=this.attrs.radius||0,u=[];for(let l=0;l<o;l++)u.push({x:s*Math.sin(l*2*Math.PI/o),y:-1*s*Math.cos(l*2*Math.PI/o)});return u}getSelfRect(){const o=this._getPoints();let s=o[0].x,u=o[0].y,l=o[0].x,h=o[0].y;return o.forEach(c=>{s=Math.min(s,c.x),u=Math.max(u,c.x),l=Math.min(l,c.y),h=Math.max(h,c.y)}),{x:s,y:l,width:u-s,height:h-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return vS.RegularPolygon=i,i.prototype.className="RegularPolygon",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),n.Factory.addGetterSetter(i,"radius",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(i,"sides",0,(0,t.getNumberValidator)()),vS}var bS={},UZ;function rKe(){if(UZ)return bS;UZ=1,Object.defineProperty(bS,"__esModule",{value:!0}),bS.Ring=void 0;const n=er(),e=Es(),t=sr(),r=Hn(),i=Math.PI*2;let a=class extends e.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.innerRadius(),0,i,!1),s.moveTo(this.outerRadius(),0),s.arc(0,0,this.outerRadius(),i,0,!0),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}};return bS.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(a),n.Factory.addGetterSetter(a,"innerRadius",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(a,"outerRadius",0,(0,t.getNumberValidator)()),bS}var wS={},BZ;function iKe(){if(BZ)return wS;BZ=1,Object.defineProperty(wS,"__esModule",{value:!0}),wS.Sprite=void 0;const n=er(),e=Es(),t=hj(),r=sr(),i=Hn();let a=class extends e.Shape{constructor(s){super(s),this._updated=!0,this.anim=new t.Animation(()=>{const u=this._updated;return this._updated=!1,u}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(s){const u=this.animation(),l=this.frameIndex(),h=l*4,c=this.animations()[u],f=this.frameOffsets(),d=c[h+0],p=c[h+1],m=c[h+2],g=c[h+3],y=this.image();if((this.hasFill()||this.hasStroke())&&(s.beginPath(),s.rect(0,0,m,g),s.closePath(),s.fillStrokeShape(this)),y)if(f){const v=f[u],b=l*2;s.drawImage(y,d,p,m,g,v[b+0],v[b+1],m,g)}else s.drawImage(y,d,p,m,g,0,0,m,g)}_hitFunc(s){const u=this.animation(),l=this.frameIndex(),h=l*4,c=this.animations()[u],f=this.frameOffsets(),d=c[h+2],p=c[h+3];if(s.beginPath(),f){const m=f[u],g=l*2;s.rect(m[g+0],m[g+1],d,p)}else s.rect(0,0,d,p);s.closePath(),s.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const s=this;this.interval=setInterval(function(){s._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const s=this.getLayer();this.anim.setLayers(s),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const s=this.frameIndex(),u=this.animation(),l=this.animations(),h=l[u],c=h.length/4;s<c-1?this.frameIndex(s+1):this.frameIndex(0)}};return wS.Sprite=a,a.prototype.className="Sprite",(0,i._registerNode)(a),n.Factory.addGetterSetter(a,"animation"),n.Factory.addGetterSetter(a,"animations"),n.Factory.addGetterSetter(a,"frameOffsets"),n.Factory.addGetterSetter(a,"image"),n.Factory.addGetterSetter(a,"frameIndex",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(a,"frameRate",17,(0,r.getNumberValidator)()),n.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),wS}var xS={},zZ;function aKe(){if(zZ)return xS;zZ=1,Object.defineProperty(xS,"__esModule",{value:!0}),xS.Star=void 0;const n=er(),e=Es(),t=sr(),r=Hn();let i=class extends e.Shape{_sceneFunc(o){const s=this.innerRadius(),u=this.outerRadius(),l=this.numPoints();o.beginPath(),o.moveTo(0,0-u);for(let h=1;h<l*2;h++){const c=h%2===0?u:s,f=c*Math.sin(h*Math.PI/l),d=-1*c*Math.cos(h*Math.PI/l);o.lineTo(f,d)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return xS.Star=i,i.prototype.className="Star",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(i),n.Factory.addGetterSetter(i,"numPoints",5,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(i,"innerRadius",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(i,"outerRadius",0,(0,t.getNumberValidator)()),xS}var Zb={},WZ;function Tme(){if(WZ)return Zb;WZ=1,Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.Text=void 0,Zb.stringToArray=o;const n=ia(),e=er(),t=Es(),r=Hn(),i=sr(),a=Hn();function o(q){return[...q].reduce((H,K,Z,J)=>{if(new RegExp("\\p{Emoji}","u").test(K)){const X=J[Z+1];X&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(X)?(H.push(K+X),J[Z+1]=""):H.push(K)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(K+(J[Z+1]||""))?H.push(K+J[Z+1]):Z>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(K)?H[H.length-1]+=K:K&&H.push(K);return H},[])}const s="auto",u="center",l="inherit",h="justify",c="Change.konva",f="2d",d="-",p="left",m="text",g="Text",y="top",v="bottom",b="middle",w="normal",x="px ",S=" ",E="right",A="rtl",k="word",T="char",O="none",F="",I=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],R=I.length;function U(q){return q.split(",").map(H=>{H=H.trim();const K=H.indexOf(" ")>=0,Z=H.indexOf('"')>=0||H.indexOf("'")>=0;return K&&!Z&&(H=`"${H}"`),H}).join(", ")}let B;function W(){return B||(B=n.Util.createCanvasElement().getContext(f),B)}function Y(q){q.fillText(this._partialText,this._partialTextX,this._partialTextY)}function z(q){q.setAttr("miterLimit",2),q.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function j(q){return q=q||{},!q.fillLinearGradientColorStops&&!q.fillRadialGradientColorStops&&!q.fillPatternImage&&(q.fill=q.fill||"black"),q}class M extends t.Shape{constructor(H){super(j(H)),this._partialTextX=0,this._partialTextY=0;for(let K=0;K<R;K++)this.on(I[K]+c,this._setTextData);this._setTextData()}_sceneFunc(H){const K=this.textArr,Z=K.length;if(!this.text())return;let J=this.padding(),X=this.fontSize(),ae=this.lineHeight()*X,ie=this.verticalAlign(),ce=this.direction(),ge=0,Ce=this.align(),Ee=this.getWidth(),G=this.letterSpacing(),de=this.fill(),ye=this.textDecoration(),le=ye.indexOf("underline")!==-1,ne=ye.indexOf("line-through")!==-1,fe;ce=ce===l?H.direction:ce;let Ne=ae/2,Ae=b;if(r.Konva._fixTextRendering){const pt=this.measureSize("M");Ae="alphabetic",Ne=(pt.fontBoundingBoxAscent-pt.fontBoundingBoxDescent)/2+ae/2}var ue=0,me=0;for(ce===A&&H.setAttr("direction",ce),H.setAttr("font",this._getContextFont()),H.setAttr("textBaseline",Ae),H.setAttr("textAlign",p),ie===b?ge=(this.getHeight()-Z*ae-J*2)/2:ie===v&&(ge=this.getHeight()-Z*ae-J*2),H.translate(J,ge+J),fe=0;fe<Z;fe++){var ue=0,me=0,Se=K[fe],Re=Se.text,je=Se.width,rt=Se.lastInParagraph,at,yt;if(H.save(),Ce===E?ue+=Ee-je-J*2:Ce===u&&(ue+=(Ee-je-J*2)/2),le){H.save(),H.beginPath();const tt=r.Konva._fixTextRendering?Math.round(X/4):Math.round(X/2),ft=ue,Et=Ne+me+tt;H.moveTo(ft,Et),at=Re.split(" ").length-1,yt=Ce===h&&!rt?Ee-J*2:je,H.lineTo(ft+Math.round(yt),Et),H.lineWidth=X/15;const xt=this._getLinearGradient();H.strokeStyle=xt||de,H.stroke(),H.restore()}if(ne){H.save(),H.beginPath();const tt=r.Konva._fixTextRendering?-Math.round(X/4):0;H.moveTo(ue,Ne+me+tt),at=Re.split(" ").length-1,yt=Ce===h&&!rt?Ee-J*2:je,H.lineTo(ue+Math.round(yt),Ne+me+tt),H.lineWidth=X/15;const ft=this._getLinearGradient();H.strokeStyle=ft||de,H.stroke(),H.restore()}if(ce!==A&&(G!==0||Ce===h)){at=Re.split(" ").length-1;const tt=o(Re);for(let ft=0;ft<tt.length;ft++){const Et=tt[ft];Et===" "&&!rt&&Ce===h&&(ue+=(Ee-J*2-je)/at),this._partialTextX=ue,this._partialTextY=Ne+me,this._partialText=Et,H.fillStrokeShape(this),ue+=this.measureSize(Et).width+G}}else G!==0&&H.setAttr("letterSpacing",`${G}px`),this._partialTextX=ue,this._partialTextY=Ne+me,this._partialText=Re,H.fillStrokeShape(this);H.restore(),Z>1&&(Ne+=ae)}}_hitFunc(H){const K=this.getWidth(),Z=this.getHeight();H.beginPath(),H.rect(0,0,K,Z),H.closePath(),H.fillStrokeShape(this)}setText(H){const K=n.Util._isString(H)?H:H==null?"":H+"";return this._setAttr(m,K),this}getWidth(){return this.attrs.width===s||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===s||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(H){var K,Z,J,X,ae,ie,ce,ge,Ce,Ee,G;let de=W(),ye=this.fontSize(),le;de.save(),de.font=this._getContextFont(),le=de.measureText(H),de.restore();const ne=ye/100;return{actualBoundingBoxAscent:(K=le.actualBoundingBoxAscent)!==null&&K!==void 0?K:71.58203125*ne,actualBoundingBoxDescent:(Z=le.actualBoundingBoxDescent)!==null&&Z!==void 0?Z:0,actualBoundingBoxLeft:(J=le.actualBoundingBoxLeft)!==null&&J!==void 0?J:-7.421875*ne,actualBoundingBoxRight:(X=le.actualBoundingBoxRight)!==null&&X!==void 0?X:75.732421875*ne,alphabeticBaseline:(ae=le.alphabeticBaseline)!==null&&ae!==void 0?ae:0,emHeightAscent:(ie=le.emHeightAscent)!==null&&ie!==void 0?ie:100*ne,emHeightDescent:(ce=le.emHeightDescent)!==null&&ce!==void 0?ce:-20*ne,fontBoundingBoxAscent:(ge=le.fontBoundingBoxAscent)!==null&&ge!==void 0?ge:91*ne,fontBoundingBoxDescent:(Ce=le.fontBoundingBoxDescent)!==null&&Ce!==void 0?Ce:21*ne,hangingBaseline:(Ee=le.hangingBaseline)!==null&&Ee!==void 0?Ee:72.80000305175781*ne,ideographicBaseline:(G=le.ideographicBaseline)!==null&&G!==void 0?G:-21*ne,width:le.width,height:ye}}_getContextFont(){return this.fontStyle()+S+this.fontVariant()+S+(this.fontSize()+x)+U(this.fontFamily())}_addTextLine(H){this.align()===h&&(H=H.trim());const Z=this._getTextWidth(H);return this.textArr.push({text:H,width:Z,lastInParagraph:!1})}_getTextWidth(H){const K=this.letterSpacing(),Z=H.length;return W().measureText(H).width+K*Z}_setTextData(){let H=this.text().split(`
`),K=+this.fontSize(),Z=0,J=this.lineHeight()*K,X=this.attrs.width,ae=this.attrs.height,ie=X!==s&&X!==void 0,ce=ae!==s&&ae!==void 0,ge=this.padding(),Ce=X-ge*2,Ee=ae-ge*2,G=0,de=this.wrap(),ye=de!==O,le=de!==T&&ye,ne=this.ellipsis();this.textArr=[],W().font=this._getContextFont();const fe=ne?this._getTextWidth(F):0;for(let Ne=0,Ae=H.length;Ne<Ae;++Ne){let ue=H[Ne],me=this._getTextWidth(ue);if(ie&&me>Ce)for(;ue.length>0;){let Se=0,Re=o(ue).length,je="",rt=0;for(;Se<Re;){const at=Se+Re>>>1,yt=o(ue),pt=yt.slice(0,at+1).join(""),Le=this._getTextWidth(pt);(ne&&ce&&G+J>Ee?Le+fe:Le)<=Ce?(Se=at+1,je=pt,rt=Le):Re=at}if(je){if(le){const pt=o(ue),Le=o(je),tt=pt[Le.length],ft=tt===S||tt===d;let Et;if(ft&&rt<=Ce)Et=Le.length;else{const xt=Le.lastIndexOf(S),Ot=Le.lastIndexOf(d);Et=Math.max(xt,Ot)+1}Et>0&&(Se=Et,je=pt.slice(0,Se).join(""),rt=this._getTextWidth(je))}if(je=je.trimRight(),this._addTextLine(je),Z=Math.max(Z,rt),G+=J,this._shouldHandleEllipsis(G)){this._tryToAddEllipsisToLastLine();break}if(ue=o(ue).slice(Se).join("").trimLeft(),ue.length>0&&(me=this._getTextWidth(ue),me<=Ce)){this._addTextLine(ue),G+=J,Z=Math.max(Z,me);break}}else break}else this._addTextLine(ue),G+=J,Z=Math.max(Z,me),this._shouldHandleEllipsis(G)&&Ne<Ae-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),ce&&G+J>Ee)break}this.textHeight=K,this.textWidth=Z}_shouldHandleEllipsis(H){const K=+this.fontSize(),Z=this.lineHeight()*K,J=this.attrs.height,X=J!==s&&J!==void 0,ae=this.padding(),ie=J-ae*2;return!(this.wrap()!==O)||X&&H+Z>ie}_tryToAddEllipsisToLastLine(){const H=this.attrs.width,K=H!==s&&H!==void 0,Z=this.padding(),J=H-Z*2,X=this.ellipsis(),ae=this.textArr[this.textArr.length-1];!ae||!X||(K&&(this._getTextWidth(ae.text+F)<J||(ae.text=ae.text.slice(0,ae.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ae.text+F))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const H=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,K=this.hasShadow();return H&&K?!0:super._useBufferCanvas()}}return Zb.Text=M,M.prototype._fillFunc=Y,M.prototype._strokeFunc=z,M.prototype.className=g,M.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(M),e.Factory.overWriteSetter(M,"width",(0,i.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(M,"height",(0,i.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(M,"direction",l),e.Factory.addGetterSetter(M,"fontFamily","Arial"),e.Factory.addGetterSetter(M,"fontSize",12,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(M,"fontStyle",w),e.Factory.addGetterSetter(M,"fontVariant",w),e.Factory.addGetterSetter(M,"padding",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(M,"align",p),e.Factory.addGetterSetter(M,"verticalAlign",y),e.Factory.addGetterSetter(M,"lineHeight",1,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(M,"wrap",k),e.Factory.addGetterSetter(M,"ellipsis",!1,(0,i.getBooleanValidator)()),e.Factory.addGetterSetter(M,"letterSpacing",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(M,"text","",(0,i.getStringValidator)()),e.Factory.addGetterSetter(M,"textDecoration",""),Zb}var _S={},jZ;function sKe(){if(jZ)return _S;jZ=1,Object.defineProperty(_S,"__esModule",{value:!0}),_S.TextPath=void 0;const n=ia(),e=er(),t=Es(),r=fj(),i=Tme(),a=sr(),o=Hn(),s="",u="normal";function l(f){f.fillText(this.partialText,0,0)}function h(f){f.strokeText(this.partialText,0,0)}let c=class extends t.Shape{constructor(d){super(d),this.dummyCanvas=n.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(d){if(!this.attrs.data)return null;const p=this.pathLength;return d-1>p?null:r.Path.getPointAtLengthOfDataArray(d,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(d){d.setAttr("font",this._getContextFont()),d.setAttr("textBaseline",this.textBaseline()),d.setAttr("textAlign","left"),d.save();const p=this.textDecoration(),m=this.fill(),g=this.fontSize(),y=this.glyphInfo;p==="underline"&&d.beginPath();for(let v=0;v<y.length;v++){d.save();const b=y[v].p0;d.translate(b.x,b.y),d.rotate(y[v].rotation),this.partialText=y[v].text,d.fillStrokeShape(this),p==="underline"&&(v===0&&d.moveTo(0,g/2+1),d.lineTo(g,g/2+1)),d.restore()}p==="underline"&&(d.strokeStyle=m,d.lineWidth=g/20,d.stroke()),d.restore()}_hitFunc(d){d.beginPath();const p=this.glyphInfo;if(p.length>=1){const m=p[0].p0;d.moveTo(m.x,m.y)}for(let m=0;m<p.length;m++){const g=p[m].p1;d.lineTo(g.x,g.y)}d.setAttr("lineWidth",this.fontSize()),d.setAttr("strokeStyle",this.colorKey),d.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(d){return i.Text.prototype.setText.call(this,d)}_getContextFont(){return i.Text.prototype._getContextFont.call(this)}_getTextSize(d){const m=this.dummyCanvas.getContext("2d");m.save(),m.font=this._getContextFont();const g=m.measureText(d);return m.restore(),{width:g.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:d,height:p}=this._getTextSize(this.attrs.text);if(this.textWidth=d,this.textHeight=p,this.glyphInfo=[],!this.attrs.data)return null;const m=this.letterSpacing(),g=this.align(),y=this.kerningFunc(),v=Math.max(this.textWidth+((this.attrs.text||"").length-1)*m,0);let b=0;g==="center"&&(b=Math.max(0,this.pathLength/2-v/2)),g==="right"&&(b=Math.max(0,this.pathLength-v));const w=(0,i.stringToArray)(this.text());let x=b;for(let S=0;S<w.length;S++){const E=this._getPointAtLength(x);if(!E)return;let A=this._getTextSize(w[S]).width+m;if(w[S]===" "&&g==="justify"){const R=this.text().split(" ").length-1;A+=(this.pathLength-v)/R}const k=this._getPointAtLength(x+A);if(!k)return;const T=r.Path.getLineLength(E.x,E.y,k.x,k.y);let O=0;if(y)try{O=y(w[S-1],w[S])*this.fontSize()}catch{O=0}E.x+=O,k.x+=O,this.textWidth+=O;const F=r.Path.getPointOnLine(O+T/2,E.x,E.y,k.x,k.y),I=Math.atan2(k.y-E.y,k.x-E.x);this.glyphInfo.push({transposeX:F.x,transposeY:F.y,text:w[S],rotation:I,p0:E,p1:k}),x+=A}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const d=[];this.glyphInfo.forEach(function(x){d.push(x.p0.x),d.push(x.p0.y),d.push(x.p1.x),d.push(x.p1.y)});let p=d[0]||0,m=d[0]||0,g=d[1]||0,y=d[1]||0,v,b;for(let x=0;x<d.length/2;x++)v=d[x*2],b=d[x*2+1],p=Math.min(p,v),m=Math.max(m,v),g=Math.min(g,b),y=Math.max(y,b);const w=this.fontSize();return{x:p-w/2,y:g-w/2,width:m-p+w,height:y-g+w}}destroy(){return n.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return _S.TextPath=c,c.prototype._fillFunc=l,c.prototype._strokeFunc=h,c.prototype._fillFuncHit=l,c.prototype._strokeFuncHit=h,c.prototype.className="TextPath",c.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(c),e.Factory.addGetterSetter(c,"data"),e.Factory.addGetterSetter(c,"fontFamily","Arial"),e.Factory.addGetterSetter(c,"fontSize",12,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(c,"fontStyle",u),e.Factory.addGetterSetter(c,"align","left"),e.Factory.addGetterSetter(c,"letterSpacing",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(c,"textBaseline","middle"),e.Factory.addGetterSetter(c,"fontVariant",u),e.Factory.addGetterSetter(c,"text",s),e.Factory.addGetterSetter(c,"textDecoration",""),e.Factory.addGetterSetter(c,"kerningFunc",void 0),_S}var SS={},$Z;function oKe(){if($Z)return SS;$Z=1,Object.defineProperty(SS,"__esModule",{value:!0}),SS.Transformer=void 0;const n=ia(),e=er(),t=wa(),r=Es(),i=Eme(),a=cj(),o=Hn(),s=sr(),u=Hn(),l="tr-konva",h=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(A=>A+`.${l}`).join(" "),c="nodesRect",f=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],d={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},p="ontouchstart"in o.Konva._global;function m(A,k,T){if(A==="rotater")return T;k+=n.Util.degToRad(d[A]||0);const O=(n.Util.radToDeg(k)%360+360)%360;return n.Util._inRange(O,315+22.5,360)||n.Util._inRange(O,0,22.5)?"ns-resize":n.Util._inRange(O,45-22.5,45+22.5)?"nesw-resize":n.Util._inRange(O,90-22.5,90+22.5)?"ew-resize":n.Util._inRange(O,135-22.5,135+22.5)?"nwse-resize":n.Util._inRange(O,180-22.5,180+22.5)?"ns-resize":n.Util._inRange(O,225-22.5,225+22.5)?"nesw-resize":n.Util._inRange(O,270-22.5,270+22.5)?"ew-resize":n.Util._inRange(O,315-22.5,315+22.5)?"nwse-resize":(n.Util.error("Transformer has unknown angle for cursor detection: "+O),"pointer")}const g=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function y(A){return{x:A.x+A.width/2*Math.cos(A.rotation)+A.height/2*Math.sin(-A.rotation),y:A.y+A.height/2*Math.cos(A.rotation)+A.width/2*Math.sin(A.rotation)}}function v(A,k,T){const O=T.x+(A.x-T.x)*Math.cos(k)-(A.y-T.y)*Math.sin(k),F=T.y+(A.x-T.x)*Math.sin(k)+(A.y-T.y)*Math.cos(k);return{...A,rotation:A.rotation+k,x:O,y:F}}function b(A,k){const T=y(A);return v(A,k,T)}function w(A,k,T){let O=k;for(let F=0;F<A.length;F++){const I=o.Konva.getAngle(A[F]),R=Math.abs(I-k)%(Math.PI*2);Math.min(R,Math.PI*2-R)<T&&(O=I)}return O}let x=0,S=class extends a.Group{constructor(k){super(k),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(h,this.update),this.getNode()&&this.update()}attachTo(k){return this.setNode(k),this}setNode(k){return n.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([k])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return l+this._id}setNodes(k=[]){this._nodes&&this._nodes.length&&this.detach();const T=k.filter(F=>F.isAncestorOf(this)?(n.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=k=T,k.length===1&&this.useSingleNodeRotation()?this.rotation(k[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(F=>{const I=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(F._attrsAffectingSize.length){const R=F._attrsAffectingSize.map(U=>U+"Change."+this._getEventNamespace()).join(" ");F.on(R,I)}F.on(f.map(R=>R+`.${this._getEventNamespace()}`).join(" "),I),F.on(`absoluteTransformChange.${this._getEventNamespace()}`,I),this._proxyDrag(F)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(k){let T;k.on(`dragstart.${this._getEventNamespace()}`,O=>{T=k.getAbsolutePosition(),!this.isDragging()&&k!==this.findOne(".back")&&this.startDrag(O,!1)}),k.on(`dragmove.${this._getEventNamespace()}`,O=>{if(!T)return;const F=k.getAbsolutePosition(),I=F.x-T.x,R=F.y-T.y;this.nodes().forEach(U=>{if(U===k||U.isDragging())return;const B=U.getAbsolutePosition();U.setAbsolutePosition({x:B.x+I,y:B.y+R}),U.startDrag(O)}),T=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(k=>{k.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(c),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(c,this.__getNodeRect)}__getNodeShape(k,T=this.rotation(),O){const F=k.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),I=k.getAbsoluteScale(O),R=k.getAbsolutePosition(O),U=F.x*I.x-k.offsetX()*I.x,B=F.y*I.y-k.offsetY()*I.y,W=(o.Konva.getAngle(k.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),Y={x:R.x+U*Math.cos(W)+B*Math.sin(-W),y:R.y+B*Math.cos(W)+U*Math.sin(W),width:F.width*I.x,height:F.height*I.y,rotation:W};return v(Y,-o.Konva.getAngle(T),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const T=[];this.nodes().map(W=>{const Y=W.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),z=[{x:Y.x,y:Y.y},{x:Y.x+Y.width,y:Y.y},{x:Y.x+Y.width,y:Y.y+Y.height},{x:Y.x,y:Y.y+Y.height}],j=W.getAbsoluteTransform();z.forEach(function(M){const q=j.point(M);T.push(q)})});const O=new n.Transform;O.rotate(-o.Konva.getAngle(this.rotation()));let F=1/0,I=1/0,R=-1/0,U=-1/0;T.forEach(function(W){const Y=O.point(W);F===void 0&&(F=R=Y.x,I=U=Y.y),F=Math.min(F,Y.x),I=Math.min(I,Y.y),R=Math.max(R,Y.x),U=Math.max(U,Y.y)}),O.invert();const B=O.point({x:F,y:I});return{x:B.x,y:B.y,width:R-F,height:U-I,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),g.forEach(k=>{this._createAnchor(k)}),this._createAnchor("rotater")}_createAnchor(k){const T=new i.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:k+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:p?10:"auto"}),O=this;T.on("mousedown touchstart",function(F){O._handleMouseDown(F)}),T.on("dragstart",F=>{T.stopDrag(),F.cancelBubble=!0}),T.on("dragend",F=>{F.cancelBubble=!0}),T.on("mouseenter",()=>{const F=o.Konva.getAngle(this.rotation()),I=this.rotateAnchorCursor(),R=m(k,F,I);T.getStage().content&&(T.getStage().content.style.cursor=R),this._cursorChange=!0}),T.on("mouseout",()=>{T.getStage().content&&(T.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(T)}_createBack(){const k=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(T,O){const F=O.getParent(),I=F.padding();T.beginPath(),T.rect(-I,-I,O.width()+I*2,O.height()+I*2),T.moveTo(O.width()/2,-I),F.rotateEnabled()&&F.rotateLineVisible()&&T.lineTo(O.width()/2,-F.rotateAnchorOffset()*n.Util._sign(O.height())-I),T.fillStrokeShape(O)},hitFunc:(T,O)=>{if(!this.shouldOverdrawWholeArea())return;const F=this.padding();T.beginPath(),T.rect(-F,-F,O.width()+F*2,O.height()+F*2),T.fillStrokeShape(O)}});this.add(k),this._proxyDrag(k),k.on("dragstart",T=>{T.cancelBubble=!0}),k.on("dragmove",T=>{T.cancelBubble=!0}),k.on("dragend",T=>{T.cancelBubble=!0}),this.on("dragmove",T=>{this.update()})}_handleMouseDown(k){if(this._transforming)return;this._movingAnchorName=k.target.name().split(" ")[0];const T=this._getNodeRect(),O=T.width,F=T.height,I=Math.sqrt(Math.pow(O,2)+Math.pow(F,2));this.sin=Math.abs(F/I),this.cos=Math.abs(O/I),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const R=k.target.getAbsolutePosition(),U=k.target.getStage().getPointerPosition();this._anchorDragOffset={x:U.x-R.x,y:U.y-R.y},x++,this._fire("transformstart",{evt:k.evt,target:this.getNode()}),this._nodes.forEach(B=>{B._fire("transformstart",{evt:k.evt,target:B})})}_handleMouseMove(k){let T,O,F;const I=this.findOne("."+this._movingAnchorName),R=I.getStage();R.setPointersPositions(k);const U=R.getPointerPosition();let B={x:U.x-this._anchorDragOffset.x,y:U.y-this._anchorDragOffset.y};const W=I.getAbsolutePosition();this.anchorDragBoundFunc()&&(B=this.anchorDragBoundFunc()(W,B,k)),I.setAbsolutePosition(B);const Y=I.getAbsolutePosition();if(W.x===Y.x&&W.y===Y.y)return;if(this._movingAnchorName==="rotater"){const ie=this._getNodeRect();T=I.x()-ie.width/2,O=-I.y()+ie.height/2;let ce=Math.atan2(-O,T)+Math.PI/2;ie.height<0&&(ce-=Math.PI);const Ce=o.Konva.getAngle(this.rotation())+ce,Ee=o.Konva.getAngle(this.rotationSnapTolerance()),de=w(this.rotationSnaps(),Ce,Ee)-ie.rotation,ye=b(ie,de);this._fitNodesInto(ye,k);return}const z=this.shiftBehavior();let j;z==="inverted"?j=this.keepRatio()&&!k.shiftKey:z==="none"?j=this.keepRatio():j=this.keepRatio()||k.shiftKey;var Z=this.centeredScaling()||k.altKey;if(this._movingAnchorName==="top-left"){if(j){var M=Z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};F=Math.sqrt(Math.pow(M.x-I.x(),2)+Math.pow(M.y-I.y(),2));var q=this.findOne(".top-left").x()>M.x?-1:1,H=this.findOne(".top-left").y()>M.y?-1:1;T=F*this.cos*q,O=F*this.sin*H,this.findOne(".top-left").x(M.x-T),this.findOne(".top-left").y(M.y-O)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(I.y());else if(this._movingAnchorName==="top-right"){if(j){var M=Z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};F=Math.sqrt(Math.pow(I.x()-M.x,2)+Math.pow(M.y-I.y(),2));var q=this.findOne(".top-right").x()<M.x?-1:1,H=this.findOne(".top-right").y()>M.y?-1:1;T=F*this.cos*q,O=F*this.sin*H,this.findOne(".top-right").x(M.x+T),this.findOne(".top-right").y(M.y-O)}var K=I.position();this.findOne(".top-left").y(K.y),this.findOne(".bottom-right").x(K.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(I.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(I.x());else if(this._movingAnchorName==="bottom-left"){if(j){var M=Z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};F=Math.sqrt(Math.pow(M.x-I.x(),2)+Math.pow(I.y()-M.y,2));var q=M.x<I.x()?-1:1,H=I.y()<M.y?-1:1;T=F*this.cos*q,O=F*this.sin*H,I.x(M.x-T),I.y(M.y+O)}K=I.position(),this.findOne(".top-left").x(K.x),this.findOne(".bottom-right").y(K.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(I.y());else if(this._movingAnchorName==="bottom-right"){if(j){var M=Z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};F=Math.sqrt(Math.pow(I.x()-M.x,2)+Math.pow(I.y()-M.y,2));var q=this.findOne(".bottom-right").x()<M.x?-1:1,H=this.findOne(".bottom-right").y()<M.y?-1:1;T=F*this.cos*q,O=F*this.sin*H,this.findOne(".bottom-right").x(M.x+T),this.findOne(".bottom-right").y(M.y+O)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var Z=this.centeredScaling()||k.altKey;if(Z){const ie=this.findOne(".top-left"),ce=this.findOne(".bottom-right"),ge=ie.x(),Ce=ie.y(),Ee=this.getWidth()-ce.x(),G=this.getHeight()-ce.y();ce.move({x:-ge,y:-Ce}),ie.move({x:Ee,y:G})}const J=this.findOne(".top-left").getAbsolutePosition();T=J.x,O=J.y;const X=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ae=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:T,y:O,width:X,height:ae,rotation:o.Konva.getAngle(this.rotation())},k)}_handleMouseUp(k){this._removeEvents(k)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(k){var T;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const O=this.getNode();x--,this._fire("transformend",{evt:k,target:O}),(T=this.getLayer())===null||T===void 0||T.batchDraw(),O&&this._nodes.forEach(F=>{var I;F._fire("transformend",{evt:k,target:F}),(I=F.getLayer())===null||I===void 0||I.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(k,T){const O=this._getNodeRect(),F=1;if(n.Util._inRange(k.width,-this.padding()*2-F,F)){this.update();return}if(n.Util._inRange(k.height,-this.padding()*2-F,F)){this.update();return}const I=new n.Transform;if(I.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&k.width<0&&this._movingAnchorName.indexOf("left")>=0){const j=I.point({x:-this.padding()*2,y:0});k.x+=j.x,k.y+=j.y,k.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=j.x,this._anchorDragOffset.y-=j.y}else if(this._movingAnchorName&&k.width<0&&this._movingAnchorName.indexOf("right")>=0){const j=I.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=j.x,this._anchorDragOffset.y-=j.y,k.width+=this.padding()*2}if(this._movingAnchorName&&k.height<0&&this._movingAnchorName.indexOf("top")>=0){const j=I.point({x:0,y:-this.padding()*2});k.x+=j.x,k.y+=j.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=j.x,this._anchorDragOffset.y-=j.y,k.height+=this.padding()*2}else if(this._movingAnchorName&&k.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const j=I.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=j.x,this._anchorDragOffset.y-=j.y,k.height+=this.padding()*2}if(this.boundBoxFunc()){const j=this.boundBoxFunc()(O,k);j?k=j:n.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const R=1e7,U=new n.Transform;U.translate(O.x,O.y),U.rotate(O.rotation),U.scale(O.width/R,O.height/R);const B=new n.Transform,W=k.width/R,Y=k.height/R;this.flipEnabled()===!1?(B.translate(k.x,k.y),B.rotate(k.rotation),B.translate(k.width<0?k.width:0,k.height<0?k.height:0),B.scale(Math.abs(W),Math.abs(Y))):(B.translate(k.x,k.y),B.rotate(k.rotation),B.scale(W,Y));const z=B.multiply(U.invert());this._nodes.forEach(j=>{var M;const q=j.getParent().getAbsoluteTransform(),H=j.getTransform().copy();H.translate(j.offsetX(),j.offsetY());const K=new n.Transform;K.multiply(q.copy().invert()).multiply(z).multiply(q).multiply(H);const Z=K.decompose();j.setAttrs(Z),(M=j.getLayer())===null||M===void 0||M.batchDraw()}),this.rotation(n.Util._getRotation(k.rotation)),this._nodes.forEach(j=>{this._fire("transform",{evt:T,target:j}),j._fire("transform",{evt:T,target:j})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(k,T){this.findOne(k).setAttrs(T)}update(){var k;const T=this._getNodeRect();this.rotation(n.Util._getRotation(T.rotation));const O=T.width,F=T.height,I=this.enabledAnchors(),R=this.resizeEnabled(),U=this.padding(),B=this.anchorSize(),W=this.find("._anchor");W.forEach(z=>{z.setAttrs({width:B,height:B,offsetX:B/2,offsetY:B/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:B/2+U,offsetY:B/2+U,visible:R&&I.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:O/2,y:0,offsetY:B/2+U,visible:R&&I.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:O,y:0,offsetX:B/2-U,offsetY:B/2+U,visible:R&&I.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:F/2,offsetX:B/2+U,visible:R&&I.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:O,y:F/2,offsetX:B/2-U,visible:R&&I.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:F,offsetX:B/2+U,offsetY:B/2-U,visible:R&&I.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:O/2,y:F,offsetY:B/2-U,visible:R&&I.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:O,y:F,offsetX:B/2-U,offsetY:B/2-U,visible:R&&I.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:O/2,y:-this.rotateAnchorOffset()*n.Util._sign(F)-U,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:O,height:F,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const Y=this.anchorStyleFunc();Y&&W.forEach(z=>{Y(z)}),(k=this.getLayer())===null||k===void 0||k.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const k=this.findOne("."+this._movingAnchorName);k&&k.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return t.Node.prototype.toObject.call(this)}clone(k){return t.Node.prototype.clone.call(this,k)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};SS.Transformer=S,S.isTransforming=()=>x>0;function E(A){return A instanceof Array||n.Util.warn("enabledAnchors value should be an array"),A instanceof Array&&A.forEach(function(k){g.indexOf(k)===-1&&n.Util.warn("Unknown anchor name: "+k+". Available names are: "+g.join(", "))}),A||[]}return S.prototype.className="Transformer",(0,u._registerNode)(S),e.Factory.addGetterSetter(S,"enabledAnchors",g,E),e.Factory.addGetterSetter(S,"flipEnabled",!0,(0,s.getBooleanValidator)()),e.Factory.addGetterSetter(S,"resizeEnabled",!0),e.Factory.addGetterSetter(S,"anchorSize",10,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(S,"rotateEnabled",!0),e.Factory.addGetterSetter(S,"rotateLineVisible",!0),e.Factory.addGetterSetter(S,"rotationSnaps",[]),e.Factory.addGetterSetter(S,"rotateAnchorOffset",50,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(S,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(S,"rotationSnapTolerance",5,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(S,"borderEnabled",!0),e.Factory.addGetterSetter(S,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(S,"anchorStrokeWidth",1,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(S,"anchorFill","white"),e.Factory.addGetterSetter(S,"anchorCornerRadius",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(S,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(S,"borderStrokeWidth",1,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(S,"borderDash"),e.Factory.addGetterSetter(S,"keepRatio",!0),e.Factory.addGetterSetter(S,"shiftBehavior","default"),e.Factory.addGetterSetter(S,"centeredScaling",!1),e.Factory.addGetterSetter(S,"ignoreStroke",!1),e.Factory.addGetterSetter(S,"padding",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(S,"nodes"),e.Factory.addGetterSetter(S,"node"),e.Factory.addGetterSetter(S,"boundBoxFunc"),e.Factory.addGetterSetter(S,"anchorDragBoundFunc"),e.Factory.addGetterSetter(S,"anchorStyleFunc"),e.Factory.addGetterSetter(S,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(S,"useSingleNodeRotation",!0),e.Factory.backCompat(S,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),SS}var CS={},qZ;function uKe(){if(qZ)return CS;qZ=1,Object.defineProperty(CS,"__esModule",{value:!0}),CS.Wedge=void 0;const n=er(),e=Es(),t=Hn(),r=sr(),i=Hn();let a=class extends e.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.radius(),0,t.Konva.getAngle(this.angle()),this.clockwise()),s.lineTo(0,0),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius(s/2)}setHeight(s){this.radius(s/2)}};return CS.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(a),n.Factory.addGetterSetter(a,"radius",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(a,"angle",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(a,"clockwise",!1),n.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),CS}var ES={},VZ;function lKe(){if(VZ)return ES;VZ=1,Object.defineProperty(ES,"__esModule",{value:!0}),ES.Blur=void 0;const n=er(),e=wa(),t=sr();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(u,l){const h=u.data,c=u.width,f=u.height;let d,p,m,g,y,v,b,w,x,S,E,A,k,T,O,F,I,R,U,B,W,Y,z,j;const M=l+l+1,q=c-1,H=f-1,K=l+1,Z=K*(K+1)/2,J=new r,X=i[l],ae=a[l];let ie=null,ce=J,ge=null,Ce=null;for(m=1;m<M;m++)ce=ce.next=new r,m===K&&(ie=ce);for(ce.next=J,b=v=0,p=0;p<f;p++){for(F=I=R=U=w=x=S=E=0,A=K*(B=h[v]),k=K*(W=h[v+1]),T=K*(Y=h[v+2]),O=K*(z=h[v+3]),w+=Z*B,x+=Z*W,S+=Z*Y,E+=Z*z,ce=J,m=0;m<K;m++)ce.r=B,ce.g=W,ce.b=Y,ce.a=z,ce=ce.next;for(m=1;m<K;m++)g=v+((q<m?q:m)<<2),w+=(ce.r=B=h[g])*(j=K-m),x+=(ce.g=W=h[g+1])*j,S+=(ce.b=Y=h[g+2])*j,E+=(ce.a=z=h[g+3])*j,F+=B,I+=W,R+=Y,U+=z,ce=ce.next;for(ge=J,Ce=ie,d=0;d<c;d++)h[v+3]=z=E*X>>ae,z!==0?(z=255/z,h[v]=(w*X>>ae)*z,h[v+1]=(x*X>>ae)*z,h[v+2]=(S*X>>ae)*z):h[v]=h[v+1]=h[v+2]=0,w-=A,x-=k,S-=T,E-=O,A-=ge.r,k-=ge.g,T-=ge.b,O-=ge.a,g=b+((g=d+l+1)<q?g:q)<<2,F+=ge.r=h[g],I+=ge.g=h[g+1],R+=ge.b=h[g+2],U+=ge.a=h[g+3],w+=F,x+=I,S+=R,E+=U,ge=ge.next,A+=B=Ce.r,k+=W=Ce.g,T+=Y=Ce.b,O+=z=Ce.a,F-=B,I-=W,R-=Y,U-=z,Ce=Ce.next,v+=4;b+=c}for(d=0;d<c;d++){for(I=R=U=F=x=S=E=w=0,v=d<<2,A=K*(B=h[v]),k=K*(W=h[v+1]),T=K*(Y=h[v+2]),O=K*(z=h[v+3]),w+=Z*B,x+=Z*W,S+=Z*Y,E+=Z*z,ce=J,m=0;m<K;m++)ce.r=B,ce.g=W,ce.b=Y,ce.a=z,ce=ce.next;for(y=c,m=1;m<=l;m++)v=y+d<<2,w+=(ce.r=B=h[v])*(j=K-m),x+=(ce.g=W=h[v+1])*j,S+=(ce.b=Y=h[v+2])*j,E+=(ce.a=z=h[v+3])*j,F+=B,I+=W,R+=Y,U+=z,ce=ce.next,m<H&&(y+=c);for(v=d,ge=J,Ce=ie,p=0;p<f;p++)g=v<<2,h[g+3]=z=E*X>>ae,z>0?(z=255/z,h[g]=(w*X>>ae)*z,h[g+1]=(x*X>>ae)*z,h[g+2]=(S*X>>ae)*z):h[g]=h[g+1]=h[g+2]=0,w-=A,x-=k,S-=T,E-=O,A-=ge.r,k-=ge.g,T-=ge.b,O-=ge.a,g=d+((g=p+K)<H?g:H)*c<<2,w+=F+=ge.r=h[g],x+=I+=ge.g=h[g+1],S+=R+=ge.b=h[g+2],E+=U+=ge.a=h[g+3],ge=ge.next,A+=B=Ce.r,k+=W=Ce.g,T+=Y=Ce.b,O+=z=Ce.a,F-=B,I-=W,R-=Y,U-=z,Ce=Ce.next,v+=c}}const s=function(l){const h=Math.round(this.blurRadius());h>0&&o(l,h)};return ES.Blur=s,n.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),ES}var TS={},HZ;function cKe(){if(HZ)return TS;HZ=1,Object.defineProperty(TS,"__esModule",{value:!0}),TS.Brighten=void 0;const n=er(),e=wa(),t=sr(),r=function(i){const a=this.brightness()*255,o=i.data,s=o.length;for(let u=0;u<s;u+=4)o[u]+=a,o[u+1]+=a,o[u+2]+=a};return TS.Brighten=r,n.Factory.addGetterSetter(e.Node,"brightness",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),TS}var DS={},GZ;function hKe(){if(GZ)return DS;GZ=1,Object.defineProperty(DS,"__esModule",{value:!0}),DS.Contrast=void 0;const n=er(),e=wa(),t=sr(),r=function(i){const a=Math.pow((this.contrast()+100)/100,2),o=i.data,s=o.length;let u=150,l=150,h=150;for(let c=0;c<s;c+=4)u=o[c],l=o[c+1],h=o[c+2],u/=255,u-=.5,u*=a,u+=.5,u*=255,l/=255,l-=.5,l*=a,l+=.5,l*=255,h/=255,h-=.5,h*=a,h+=.5,h*=255,u=u<0?0:u>255?255:u,l=l<0?0:l>255?255:l,h=h<0?0:h>255?255:h,o[c]=u,o[c+1]=l,o[c+2]=h};return DS.Contrast=r,n.Factory.addGetterSetter(e.Node,"contrast",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),DS}var AS={},XZ;function fKe(){if(XZ)return AS;XZ=1,Object.defineProperty(AS,"__esModule",{value:!0}),AS.Emboss=void 0;const n=er(),e=wa(),t=ia(),r=sr(),i=function(a){const o=this.embossStrength()*10,s=this.embossWhiteLevel()*255,u=this.embossDirection(),l=this.embossBlend(),h=a.data,c=a.width,f=a.height,d=c*4;let p=0,m=0,g=f;switch(u){case"top-left":p=-1,m=-1;break;case"top":p=-1,m=0;break;case"top-right":p=-1,m=1;break;case"right":p=0,m=1;break;case"bottom-right":p=1,m=1;break;case"bottom":p=1,m=0;break;case"bottom-left":p=1,m=-1;break;case"left":p=0,m=-1;break;default:t.Util.error("Unknown emboss direction: "+u)}do{const y=(g-1)*d;let v=p;g+v<1&&(v=0),g+v>f&&(v=0);const b=(g-1+v)*c*4;let w=c;do{const x=y+(w-1)*4;let S=m;w+S<1&&(S=0),w+S>c&&(S=0);const E=b+(w-1+S)*4,A=h[x]-h[E],k=h[x+1]-h[E+1],T=h[x+2]-h[E+2];let O=A;const F=O>0?O:-O,I=k>0?k:-k,R=T>0?T:-T;if(I>F&&(O=k),R>F&&(O=T),O*=o,l){const U=h[x]+O,B=h[x+1]+O,W=h[x+2]+O;h[x]=U>255?255:U<0?0:U,h[x+1]=B>255?255:B<0?0:B,h[x+2]=W>255?255:W<0?0:W}else{let U=s-O;U<0?U=0:U>255&&(U=255),h[x]=h[x+1]=h[x+2]=U}}while(--w)}while(--g)};return AS.Emboss=i,n.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,n.Factory.afterSetFilter),AS}var kS={},KZ;function dKe(){if(KZ)return kS;KZ=1,Object.defineProperty(kS,"__esModule",{value:!0}),kS.Enhance=void 0;const n=er(),e=wa(),t=sr();function r(a,o,s,u,l){const h=s-o,c=l-u;if(h===0)return u+c/2;if(c===0)return u;let f=(a-o)/h;return f=c*f+u,f}const i=function(a){const o=a.data,s=o.length;let u=o[0],l=u,h,c=o[1],f=c,d,p=o[2],m=p,g;const y=this.enhance();if(y===0)return;for(let O=0;O<s;O+=4)h=o[O+0],h<u?u=h:h>l&&(l=h),d=o[O+1],d<c?c=d:d>f&&(f=d),g=o[O+2],g<p?p=g:g>m&&(m=g);l===u&&(l=255,u=0),f===c&&(f=255,c=0),m===p&&(m=255,p=0);let v,b,w,x,S,E,A,k,T;y>0?(b=l+y*(255-l),w=u-y*(u-0),S=f+y*(255-f),E=c-y*(c-0),k=m+y*(255-m),T=p-y*(p-0)):(v=(l+u)*.5,b=l+y*(l-v),w=u+y*(u-v),x=(f+c)*.5,S=f+y*(f-x),E=c+y*(c-x),A=(m+p)*.5,k=m+y*(m-A),T=p+y*(p-A));for(let O=0;O<s;O+=4)o[O+0]=r(o[O+0],u,l,w,b),o[O+1]=r(o[O+1],c,f,E,S),o[O+2]=r(o[O+2],p,m,T,k)};return kS.Enhance=i,n.Factory.addGetterSetter(e.Node,"enhance",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),kS}var NS={},YZ;function pKe(){if(YZ)return NS;YZ=1,Object.defineProperty(NS,"__esModule",{value:!0}),NS.Grayscale=void 0;const n=function(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const a=.34*t[i]+.5*t[i+1]+.16*t[i+2];t[i]=a,t[i+1]=a,t[i+2]=a}};return NS.Grayscale=n,NS}var OS={},QZ;function gKe(){if(QZ)return OS;QZ=1,Object.defineProperty(OS,"__esModule",{value:!0}),OS.HSL=void 0;const n=er(),e=wa(),t=sr();n.Factory.addGetterSetter(e.Node,"hue",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"saturation",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"luminance",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter);const r=function(i){const a=i.data,o=a.length,s=1,u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,h=this.luminance()*127,c=s*u*Math.cos(l*Math.PI/180),f=s*u*Math.sin(l*Math.PI/180),d=.299*s+.701*c+.167*f,p=.587*s-.587*c+.33*f,m=.114*s-.114*c-.497*f,g=.299*s-.299*c-.328*f,y=.587*s+.413*c+.035*f,v=.114*s-.114*c+.293*f,b=.299*s-.3*c+1.25*f,w=.587*s-.586*c-1.05*f,x=.114*s+.886*c-.2*f;let S,E,A,k;for(let T=0;T<o;T+=4)S=a[T+0],E=a[T+1],A=a[T+2],k=a[T+3],a[T+0]=d*S+p*E+m*A+h,a[T+1]=g*S+y*E+v*A+h,a[T+2]=b*S+w*E+x*A+h,a[T+3]=k};return OS.HSL=r,OS}var RS={},ZZ;function mKe(){if(ZZ)return RS;ZZ=1,Object.defineProperty(RS,"__esModule",{value:!0}),RS.HSV=void 0;const n=er(),e=wa(),t=sr(),r=function(i){const a=i.data,o=a.length,s=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,h=s*u*Math.cos(l*Math.PI/180),c=s*u*Math.sin(l*Math.PI/180),f=.299*s+.701*h+.167*c,d=.587*s-.587*h+.33*c,p=.114*s-.114*h-.497*c,m=.299*s-.299*h-.328*c,g=.587*s+.413*h+.035*c,y=.114*s-.114*h+.293*c,v=.299*s-.3*h+1.25*c,b=.587*s-.586*h-1.05*c,w=.114*s+.886*h-.2*c;let x,S,E,A;for(let k=0;k<o;k+=4)x=a[k+0],S=a[k+1],E=a[k+2],A=a[k+3],a[k+0]=f*x+d*S+p*E,a[k+1]=m*x+g*S+y*E,a[k+2]=v*x+b*S+w*E,a[k+3]=A};return RS.HSV=r,n.Factory.addGetterSetter(e.Node,"hue",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"saturation",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"value",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),RS}var IS={},JZ;function yKe(){if(JZ)return IS;JZ=1,Object.defineProperty(IS,"__esModule",{value:!0}),IS.Invert=void 0;const n=function(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]};return IS.Invert=n,IS}var FS={},eJ;function vKe(){if(eJ)return FS;eJ=1,Object.defineProperty(FS,"__esModule",{value:!0}),FS.Kaleidoscope=void 0;const n=er(),e=wa(),t=ia(),r=sr(),i=function(s,u,l){const h=s.data,c=u.data,f=s.width,d=s.height,p=l.polarCenterX||f/2,m=l.polarCenterY||d/2;let g=Math.sqrt(p*p+m*m),y=f-p,v=d-m;const b=Math.sqrt(y*y+v*v);g=b>g?b:g;const w=d,x=f,S=360/x*Math.PI/180;for(let E=0;E<x;E+=1){const A=Math.sin(E*S),k=Math.cos(E*S);for(let T=0;T<w;T+=1){y=Math.floor(p+g*T/w*k),v=Math.floor(m+g*T/w*A);let O=(v*f+y)*4;const F=h[O+0],I=h[O+1],R=h[O+2],U=h[O+3];O=(E+T*f)*4,c[O+0]=F,c[O+1]=I,c[O+2]=R,c[O+3]=U}}},a=function(s,u,l){const h=s.data,c=u.data,f=s.width,d=s.height,p=l.polarCenterX||f/2,m=l.polarCenterY||d/2;let g=Math.sqrt(p*p+m*m),y=f-p,v=d-m;const b=Math.sqrt(y*y+v*v);g=b>g?b:g;const w=d,x=f,S=0;let E,A;for(y=0;y<f;y+=1)for(v=0;v<d;v+=1){const k=y-p,T=v-m,O=Math.sqrt(k*k+T*T)*w/g;let F=(Math.atan2(T,k)*180/Math.PI+360+S)%360;F=F*x/360,E=Math.floor(F),A=Math.floor(O);let I=(A*f+E)*4;const R=h[I+0],U=h[I+1],B=h[I+2],W=h[I+3];I=(v*f+y)*4,c[I+0]=R,c[I+1]=U,c[I+2]=B,c[I+3]=W}},o=function(s){const u=s.width,l=s.height;let h,c,f,d,p,m,g,y,v,b,w=Math.round(this.kaleidoscopePower());const x=Math.round(this.kaleidoscopeAngle()),S=Math.floor(u*(x%360)/360);if(w<1)return;const E=t.Util.createCanvasElement();E.width=u,E.height=l;const A=E.getContext("2d").getImageData(0,0,u,l);t.Util.releaseCanvas(E),i(s,A,{polarCenterX:u/2,polarCenterY:l/2});let k=u/Math.pow(2,w);for(;k<=8;)k=k*2,w-=1;k=Math.ceil(k);let T=k,O=0,F=T,I=1;for(S+k>u&&(O=T,F=0,I=-1),c=0;c<l;c+=1)for(h=O;h!==F;h+=I)f=Math.round(h+S)%u,v=(u*c+f)*4,p=A.data[v+0],m=A.data[v+1],g=A.data[v+2],y=A.data[v+3],b=(u*c+h)*4,A.data[b+0]=p,A.data[b+1]=m,A.data[b+2]=g,A.data[b+3]=y;for(c=0;c<l;c+=1)for(T=Math.floor(k),d=0;d<w;d+=1){for(h=0;h<T+1;h+=1)v=(u*c+h)*4,p=A.data[v+0],m=A.data[v+1],g=A.data[v+2],y=A.data[v+3],b=(u*c+T*2-h-1)*4,A.data[b+0]=p,A.data[b+1]=m,A.data[b+2]=g,A.data[b+3]=y;T*=2}a(A,s,{})};return FS.Kaleidoscope=o,n.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),FS}var PS={},tJ;function bKe(){if(tJ)return PS;tJ=1,Object.defineProperty(PS,"__esModule",{value:!0}),PS.Mask=void 0;const n=er(),e=wa(),t=sr();function r(f,d,p){let m=(p*f.width+d)*4;const g=[];return g.push(f.data[m++],f.data[m++],f.data[m++],f.data[m++]),g}function i(f,d){return Math.sqrt(Math.pow(f[0]-d[0],2)+Math.pow(f[1]-d[1],2)+Math.pow(f[2]-d[2],2))}function a(f){const d=[0,0,0];for(let p=0;p<f.length;p++)d[0]+=f[p][0],d[1]+=f[p][1],d[2]+=f[p][2];return d[0]/=f.length,d[1]/=f.length,d[2]/=f.length,d}function o(f,d){const p=r(f,0,0),m=r(f,f.width-1,0),g=r(f,0,f.height-1),y=r(f,f.width-1,f.height-1),v=d||10;if(i(p,m)<v&&i(m,y)<v&&i(y,g)<v&&i(g,p)<v){const b=a([m,p,y,g]),w=[];for(let x=0;x<f.width*f.height;x++){const S=i(b,[f.data[x*4],f.data[x*4+1],f.data[x*4+2]]);w[x]=S<v?0:255}return w}}function s(f,d){for(let p=0;p<f.width*f.height;p++)f.data[4*p+3]=d[p]}function u(f,d,p){const m=[1,1,1,1,0,1,1,1,1],g=Math.round(Math.sqrt(m.length)),y=Math.floor(g/2),v=[];for(let b=0;b<p;b++)for(let w=0;w<d;w++){const x=b*d+w;let S=0;for(let E=0;E<g;E++)for(let A=0;A<g;A++){const k=b+E-y,T=w+A-y;if(k>=0&&k<p&&T>=0&&T<d){const O=k*d+T,F=m[E*g+A];S+=f[O]*F}}v[x]=S===255*8?255:0}return v}function l(f,d,p){const m=[1,1,1,1,1,1,1,1,1],g=Math.round(Math.sqrt(m.length)),y=Math.floor(g/2),v=[];for(let b=0;b<p;b++)for(let w=0;w<d;w++){const x=b*d+w;let S=0;for(let E=0;E<g;E++)for(let A=0;A<g;A++){const k=b+E-y,T=w+A-y;if(k>=0&&k<p&&T>=0&&T<d){const O=k*d+T,F=m[E*g+A];S+=f[O]*F}}v[x]=S>=255*4?255:0}return v}function h(f,d,p){const m=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],g=Math.round(Math.sqrt(m.length)),y=Math.floor(g/2),v=[];for(let b=0;b<p;b++)for(let w=0;w<d;w++){const x=b*d+w;let S=0;for(let E=0;E<g;E++)for(let A=0;A<g;A++){const k=b+E-y,T=w+A-y;if(k>=0&&k<p&&T>=0&&T<d){const O=k*d+T,F=m[E*g+A];S+=f[O]*F}}v[x]=S}return v}const c=function(f){const d=this.threshold();let p=o(f,d);return p&&(p=u(p,f.width,f.height),p=l(p,f.width,f.height),p=h(p,f.width,f.height),s(f,p)),f};return PS.Mask=c,n.Factory.addGetterSetter(e.Node,"threshold",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),PS}var LS={},nJ;function wKe(){if(nJ)return LS;nJ=1,Object.defineProperty(LS,"__esModule",{value:!0}),LS.Noise=void 0;const n=er(),e=wa(),t=sr(),r=function(i){const a=this.noise()*255,o=i.data,s=o.length,u=a/2;for(let l=0;l<s;l+=4)o[l+0]+=u-2*u*Math.random(),o[l+1]+=u-2*u*Math.random(),o[l+2]+=u-2*u*Math.random()};return LS.Noise=r,n.Factory.addGetterSetter(e.Node,"noise",.2,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),LS}var MS={},rJ;function xKe(){if(rJ)return MS;rJ=1,Object.defineProperty(MS,"__esModule",{value:!0}),MS.Pixelate=void 0;const n=er(),e=ia(),t=wa(),r=sr(),i=function(a){let o=Math.ceil(this.pixelSize()),s=a.width,u=a.height,l,h,c,f,d,p,m,g=Math.ceil(s/o),y=Math.ceil(u/o),v,b,w,x,S,E,A,k=a.data;if(o<=0){e.Util.error("pixelSize value can not be <= 0");return}for(S=0;S<g;S+=1)for(E=0;E<y;E+=1){for(f=0,d=0,p=0,m=0,v=S*o,b=v+o,w=E*o,x=w+o,A=0,l=v;l<b;l+=1)if(!(l>=s))for(h=w;h<x;h+=1)h>=u||(c=(s*h+l)*4,f+=k[c+0],d+=k[c+1],p+=k[c+2],m+=k[c+3],A+=1);for(f=f/A,d=d/A,p=p/A,m=m/A,l=v;l<b;l+=1)if(!(l>=s))for(h=w;h<x;h+=1)h>=u||(c=(s*h+l)*4,k[c+0]=f,k[c+1]=d,k[c+2]=p,k[c+3]=m)}};return MS.Pixelate=i,n.Factory.addGetterSetter(t.Node,"pixelSize",8,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),MS}var US={},iJ;function _Ke(){if(iJ)return US;iJ=1,Object.defineProperty(US,"__esModule",{value:!0}),US.Posterize=void 0;const n=er(),e=wa(),t=sr(),r=function(i){const a=Math.round(this.levels()*254)+1,o=i.data,s=o.length,u=255/a;for(let l=0;l<s;l+=1)o[l]=Math.floor(o[l]/u)*u};return US.Posterize=r,n.Factory.addGetterSetter(e.Node,"levels",.5,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),US}var BS={},aJ;function SKe(){if(aJ)return BS;aJ=1,Object.defineProperty(BS,"__esModule",{value:!0}),BS.RGB=void 0;const n=er(),e=wa(),t=sr(),r=function(i){const a=i.data,o=a.length,s=this.red(),u=this.green(),l=this.blue();for(let h=0;h<o;h+=4){const c=(.34*a[h]+.5*a[h+1]+.16*a[h+2])/255;a[h]=c*s,a[h+1]=c*u,a[h+2]=c*l,a[h+3]=a[h+3]}};return BS.RGB=r,n.Factory.addGetterSetter(e.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),n.Factory.addGetterSetter(e.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),n.Factory.addGetterSetter(e.Node,"blue",0,t.RGBComponent,n.Factory.afterSetFilter),BS}var zS={},sJ;function CKe(){if(sJ)return zS;sJ=1,Object.defineProperty(zS,"__esModule",{value:!0}),zS.RGBA=void 0;const n=er(),e=wa(),t=sr(),r=function(i){const a=i.data,o=a.length,s=this.red(),u=this.green(),l=this.blue(),h=this.alpha();for(let c=0;c<o;c+=4){const f=1-h;a[c]=s*h+a[c]*f,a[c+1]=u*h+a[c+1]*f,a[c+2]=l*h+a[c+2]*f}};return zS.RGBA=r,n.Factory.addGetterSetter(e.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),n.Factory.addGetterSetter(e.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),n.Factory.addGetterSetter(e.Node,"blue",0,t.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"alpha",1,function(i){return this._filterUpToDate=!1,i>1?1:i<0?0:i}),zS}var WS={},oJ;function EKe(){if(oJ)return WS;oJ=1,Object.defineProperty(WS,"__esModule",{value:!0}),WS.Sepia=void 0;const n=function(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const a=t[i+0],o=t[i+1],s=t[i+2];t[i+0]=Math.min(255,a*.393+o*.769+s*.189),t[i+1]=Math.min(255,a*.349+o*.686+s*.168),t[i+2]=Math.min(255,a*.272+o*.534+s*.131)}};return WS.Sepia=n,WS}var jS={},uJ;function TKe(){if(uJ)return jS;uJ=1,Object.defineProperty(jS,"__esModule",{value:!0}),jS.Solarize=void 0;const n=function(e){const t=e.data,r=e.width,i=e.height,a=r*4;let o=i;do{const s=(o-1)*a;let u=r;do{const l=s+(u-1)*4;let h=t[l],c=t[l+1],f=t[l+2];h>127&&(h=255-h),c>127&&(c=255-c),f>127&&(f=255-f),t[l]=h,t[l+1]=c,t[l+2]=f}while(--u)}while(--o)};return jS.Solarize=n,jS}var $S={},lJ;function DKe(){if(lJ)return $S;lJ=1,Object.defineProperty($S,"__esModule",{value:!0}),$S.Threshold=void 0;const n=er(),e=wa(),t=sr(),r=function(i){const a=this.threshold()*255,o=i.data,s=o.length;for(let u=0;u<s;u+=1)o[u]=o[u]<a?0:255};return $S.Threshold=r,n.Factory.addGetterSetter(e.Node,"threshold",.5,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),$S}var cJ;function AKe(){if(cJ)return rS;cJ=1,Object.defineProperty(rS,"__esModule",{value:!0}),rS.Konva=void 0;const n=xB(),e=KXe(),t=QXe(),r=ZXe(),i=JXe(),a=eKe(),o=tKe(),s=Cme(),u=fj(),l=Eme(),h=nKe(),c=rKe(),f=iKe(),d=aKe(),p=Tme(),m=sKe(),g=oKe(),y=uKe(),v=lKe(),b=cKe(),w=hKe(),x=fKe(),S=dKe(),E=pKe(),A=gKe(),k=mKe(),T=yKe(),O=vKe(),F=bKe(),I=wKe(),R=xKe(),U=_Ke(),B=SKe(),W=CKe(),Y=EKe(),z=TKe(),j=DKe();return rS.Konva=n.Konva.Util._assign(n.Konva,{Arc:e.Arc,Arrow:t.Arrow,Circle:r.Circle,Ellipse:i.Ellipse,Image:a.Image,Label:o.Label,Tag:o.Tag,Line:s.Line,Path:u.Path,Rect:l.Rect,RegularPolygon:h.RegularPolygon,Ring:c.Ring,Sprite:f.Sprite,Star:d.Star,Text:p.Text,TextPath:m.TextPath,Transformer:g.Transformer,Wedge:y.Wedge,Filters:{Blur:v.Blur,Brighten:b.Brighten,Contrast:w.Contrast,Emboss:x.Emboss,Enhance:S.Enhance,Grayscale:E.Grayscale,HSL:A.HSL,HSV:k.HSV,Invert:T.Invert,Kaleidoscope:O.Kaleidoscope,Mask:F.Mask,Noise:I.Noise,Pixelate:R.Pixelate,Posterize:U.Posterize,RGB:B.RGB,RGBA:W.RGBA,Sepia:Y.Sepia,Solarize:z.Solarize,Threshold:j.Threshold}}),rS}var kKe=gN.exports,hJ;function NKe(){if(hJ)return gN.exports;hJ=1,Object.defineProperty(kKe,"__esModule",{value:!0});const n=AKe();return gN.exports=n.Konva,gN.exports}NKe();var $k={exports:{}},fJ;function OKe(){return fJ||(fJ=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var t=xB();Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return t.Konva}});const r=xB();n.exports=r.Konva}($k,$k.exports)),$k.exports}var RKe=OKe();const EE=Fp(RKe);var HM={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM,dJ;function IKe(){return dJ||(dJ=1,GM=function(e){var t={},r=ox(),i=kB(),a=Object.assign;function o(D){for(var N="https://reactjs.org/docs/error-decoder.html?invariant="+D,$=1;$<arguments.length;$++)N+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+D+"; visit "+N+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),l=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),x=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=x&&D[x]||D["@@iterator"],typeof D=="function"?D:null)}function E(D){if(D==null)return null;if(typeof D=="function")return D.displayName||D.name||null;if(typeof D=="string")return D;switch(D){case h:return"Fragment";case l:return"Portal";case f:return"Profiler";case c:return"StrictMode";case g:return"Suspense";case y:return"SuspenseList"}if(typeof D=="object")switch(D.$$typeof){case p:return(D.displayName||"Context")+".Consumer";case d:return(D._context.displayName||"Context")+".Provider";case m:var N=D.render;return D=D.displayName,D||(D=N.displayName||N.name||"",D=D!==""?"ForwardRef("+D+")":"ForwardRef"),D;case v:return N=D.displayName||null,N!==null?N:E(D.type)||"Memo";case b:N=D._payload,D=D._init;try{return E(D(N))}catch{}}return null}function A(D){var N=D.type;switch(D.tag){case 24:return"Cache";case 9:return(N.displayName||"Context")+".Consumer";case 10:return(N._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return D=N.render,D=D.displayName||D.name||"",N.displayName||(D!==""?"ForwardRef("+D+")":"ForwardRef");case 7:return"Fragment";case 5:return N;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(N);case 8:return N===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof N=="function")return N.displayName||N.name||null;if(typeof N=="string")return N}return null}function k(D){var N=D,$=D;if(D.alternate)for(;N.return;)N=N.return;else{D=N;do N=D,(N.flags&4098)!==0&&($=N.return),D=N.return;while(D)}return N.tag===3?$:null}function T(D){if(k(D)!==D)throw Error(o(188))}function O(D){var N=D.alternate;if(!N){if(N=k(D),N===null)throw Error(o(188));return N!==D?null:D}for(var $=D,Q=N;;){var te=$.return;if(te===null)break;var oe=te.alternate;if(oe===null){if(Q=te.return,Q!==null){$=Q;continue}break}if(te.child===oe.child){for(oe=te.child;oe;){if(oe===$)return T(te),D;if(oe===Q)return T(te),N;oe=oe.sibling}throw Error(o(188))}if($.return!==Q.return)$=te,Q=oe;else{for(var ke=!1,Xe=te.child;Xe;){if(Xe===$){ke=!0,$=te,Q=oe;break}if(Xe===Q){ke=!0,Q=te,$=oe;break}Xe=Xe.sibling}if(!ke){for(Xe=oe.child;Xe;){if(Xe===$){ke=!0,$=oe,Q=te;break}if(Xe===Q){ke=!0,Q=oe,$=te;break}Xe=Xe.sibling}if(!ke)throw Error(o(189))}}if($.alternate!==Q)throw Error(o(190))}if($.tag!==3)throw Error(o(188));return $.stateNode.current===$?D:N}function F(D){return D=O(D),D!==null?I(D):null}function I(D){if(D.tag===5||D.tag===6)return D;for(D=D.child;D!==null;){var N=I(D);if(N!==null)return N;D=D.sibling}return null}function R(D){if(D.tag===5||D.tag===6)return D;for(D=D.child;D!==null;){if(D.tag!==4){var N=R(D);if(N!==null)return N}D=D.sibling}return null}var U=Array.isArray,B=e.getPublicInstance,W=e.getRootHostContext,Y=e.getChildHostContext,z=e.prepareForCommit,j=e.resetAfterCommit,M=e.createInstance,q=e.appendInitialChild,H=e.finalizeInitialChildren,K=e.prepareUpdate,Z=e.shouldSetTextContent,J=e.createTextInstance,X=e.scheduleTimeout,ae=e.cancelTimeout,ie=e.noTimeout,ce=e.isPrimaryRenderer,ge=e.supportsMutation,Ce=e.supportsPersistence,Ee=e.supportsHydration,G=e.getInstanceFromNode,de=e.preparePortalMount,ye=e.getCurrentEventPriority,le=e.detachDeletedInstance,ne=e.supportsMicrotasks,fe=e.scheduleMicrotask,Ne=e.supportsTestSelectors,Ae=e.findFiberRoot,ue=e.getBoundingRect,me=e.getTextContent,Se=e.isHiddenSubtree,Re=e.matchAccessibilityRole,je=e.setFocusIfFocusable,rt=e.setupIntersectionObserver,at=e.appendChild,yt=e.appendChildToContainer,pt=e.commitTextUpdate,Le=e.commitMount,tt=e.commitUpdate,ft=e.insertBefore,Et=e.insertInContainerBefore,xt=e.removeChild,Ot=e.removeChildFromContainer,dn=e.resetTextContent,Kr=e.hideInstance,Ba=e.hideTextInstance,Mu=e.unhideInstance,xe=e.unhideTextInstance,De=e.clearContainer,Ue=e.cloneInstance,et=e.createContainerChildSet,Nt=e.appendChildToContainerChildSet,pn=e.finalizeContainerChildren,Be=e.replaceContainerChildren,Ge=e.cloneHiddenInstance,nt=e.cloneHiddenTextInstance,bt=e.canHydrateInstance,kt=e.canHydrateTextInstance,tn=e.canHydrateSuspenseInstance,an=e.isSuspenseInstancePending,Mt=e.isSuspenseInstanceFallback,Bt=e.getSuspenseInstanceFallbackErrorDetails,Rt=e.registerSuspenseInstanceRetry,zt=e.getNextHydratableSibling,Vt=e.getFirstHydratableChild,$n=e.getFirstHydratableChildWithinContainer,fr=e.getFirstHydratableChildWithinSuspenseInstance,Wr=e.hydrateInstance,Ei=e.hydrateTextInstance,ai=e.hydrateSuspenseInstance,$i=e.getNextHydratableInstanceAfterSuspenseInstance,xc=e.commitHydratedContainer,Th=e.commitHydratedSuspenseInstance,Jo=e.clearSuspenseBoundary,So=e.clearSuspenseBoundaryFromContainer,xy=e.shouldDeleteUnhydratedTailInstances,Hf=e.didNotMatchHydratedContainerTextInstance,_r=e.didNotMatchHydratedTextInstance,Dh;function eu(D){if(Dh===void 0)try{throw Error()}catch($){var N=$.stack.trim().match(/\n( *(at )?)/);Dh=N&&N[1]||""}return`
`+Dh+D}var dr=!1;function Ti(D,N){if(!D||dr)return"";dr=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(N)if(N=function(){throw Error()},Object.defineProperty(N.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(N,[])}catch(Dt){var Q=Dt}Reflect.construct(D,[],N)}else{try{N.call()}catch(Dt){Q=Dt}D.call(N.prototype)}else{try{throw Error()}catch(Dt){Q=Dt}D()}}catch(Dt){if(Dt&&Q&&typeof Dt.stack=="string"){for(var te=Dt.stack.split(`
`),oe=Q.stack.split(`
`),ke=te.length-1,Xe=oe.length-1;1<=ke&&0<=Xe&&te[ke]!==oe[Xe];)Xe--;for(;1<=ke&&0<=Xe;ke--,Xe--)if(te[ke]!==oe[Xe]){if(ke!==1||Xe!==1)do if(ke--,Xe--,0>Xe||te[ke]!==oe[Xe]){var ut=`
`+te[ke].replace(" at new "," at ");return D.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",D.displayName)),ut}while(1<=ke&&0<=Xe);break}}}finally{dr=!1,Error.prepareStackTrace=$}return(D=D?D.displayName||D.name:"")?eu(D):""}var qp=Object.prototype.hasOwnProperty,Al=[],wr=-1;function mi(D){return{current:D}}function Ir(D){0>wr||(D.current=Al[wr],Al[wr]=null,wr--)}function Bn(D,N){wr++,Al[wr]=D.current,D.current=N}var Ah={},is=mi(Ah),Ks=mi(!1),kl=Ah;function _c(D,N){var $=D.type.contextTypes;if(!$)return Ah;var Q=D.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===N)return Q.__reactInternalMemoizedMaskedChildContext;var te={},oe;for(oe in $)te[oe]=N[oe];return Q&&(D=D.stateNode,D.__reactInternalMemoizedUnmaskedChildContext=N,D.__reactInternalMemoizedMaskedChildContext=te),te}function xa(D){return D=D.childContextTypes,D!=null}function Gf(){Ir(Ks),Ir(is)}function GD(D,N,$){if(is.current!==Ah)throw Error(o(168));Bn(is,N),Bn(Ks,$)}function XD(D,N,$){var Q=D.stateNode;if(N=N.childContextTypes,typeof Q.getChildContext!="function")return $;Q=Q.getChildContext();for(var te in Q)if(!(te in N))throw Error(o(108,A(D)||"Unknown",te));return a({},$,Q)}function Vp(D){return D=(D=D.stateNode)&&D.__reactInternalMemoizedMergedChildContext||Ah,kl=is.current,Bn(is,D),Bn(Ks,Ks.current),!0}function Nx(D,N,$){var Q=D.stateNode;if(!Q)throw Error(o(169));$?(D=XD(D,N,kl),Q.__reactInternalMemoizedMergedChildContext=D,Ir(Ks),Ir(is),Bn(is,D)):Ir(Ks),Bn(Ks,$)}var Co=Math.clz32?Math.clz32:Ox,_y=Math.log,N4=Math.LN2;function Ox(D){return D>>>=0,D===0?32:31-(_y(D)/N4|0)|0}var lr=64,Sy=4194304;function Hp(D){switch(D&-D){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return D&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return D&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return D}}function Gp(D,N){var $=D.pendingLanes;if($===0)return 0;var Q=0,te=D.suspendedLanes,oe=D.pingedLanes,ke=$&268435455;if(ke!==0){var Xe=ke&~te;Xe!==0?Q=Hp(Xe):(oe&=ke,oe!==0&&(Q=Hp(oe)))}else ke=$&~te,ke!==0?Q=Hp(ke):oe!==0&&(Q=Hp(oe));if(Q===0)return 0;if(N!==0&&N!==Q&&(N&te)===0&&(te=Q&-Q,oe=N&-N,te>=oe||te===16&&(oe&4194240)!==0))return N;if((Q&4)!==0&&(Q|=$&16),N=D.entangledLanes,N!==0)for(D=D.entanglements,N&=Q;0<N;)$=31-Co(N),te=1<<$,Q|=D[$],N&=~te;return Q}function KD(D,N){switch(D){case 1:case 2:case 4:return N+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return N+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YD(D,N){for(var $=D.suspendedLanes,Q=D.pingedLanes,te=D.expirationTimes,oe=D.pendingLanes;0<oe;){var ke=31-Co(oe),Xe=1<<ke,ut=te[ke];ut===-1?((Xe&$)===0||(Xe&Q)!==0)&&(te[ke]=KD(Xe,N)):ut<=N&&(D.expiredLanes|=Xe),oe&=~Xe}}function z1(D){return D=D.pendingLanes&-1073741825,D!==0?D:D&1073741824?1073741824:0}function W1(){var D=lr;return lr<<=1,(lr&4194240)===0&&(lr=64),D}function Xp(D){for(var N=[],$=0;31>$;$++)N.push(D);return N}function tu(D,N,$){D.pendingLanes|=N,N!==536870912&&(D.suspendedLanes=0,D.pingedLanes=0),D=D.eventTimes,N=31-Co(N),D[N]=$}function kh(D,N){var $=D.pendingLanes&~N;D.pendingLanes=N,D.suspendedLanes=0,D.pingedLanes=0,D.expiredLanes&=N,D.mutableReadLanes&=N,D.entangledLanes&=N,N=D.entanglements;var Q=D.eventTimes;for(D=D.expirationTimes;0<$;){var te=31-Co($),oe=1<<te;N[te]=0,Q[te]=-1,D[te]=-1,$&=~oe}}function Nl(D,N){var $=D.entangledLanes|=N;for(D=D.entanglements;$;){var Q=31-Co($),te=1<<Q;te&N|D[Q]&N&&(D[Q]|=N),$&=~te}}var Gn=0;function Kp(D){return D&=-D,1<D?4<D?(D&268435455)!==0?16:536870912:4:1}var Ol=i.unstable_scheduleCallback,QD=i.unstable_cancelCallback,ZD=i.unstable_shouldYield,Cy=i.unstable_requestPaint,_a=i.unstable_now,j1=i.unstable_ImmediatePriority,$1=i.unstable_UserBlockingPriority,q1=i.unstable_NormalPriority,O4=i.unstable_IdlePriority,Nh=null,Ys=null;function Yp(D){if(Ys&&typeof Ys.onCommitFiberRoot=="function")try{Ys.onCommitFiberRoot(Nh,D,void 0,(D.current.flags&128)===128)}catch{}}function V1(D,N){return D===N&&(D!==0||1/D===1/N)||D!==D&&N!==N}var Uu=typeof Object.is=="function"?Object.is:V1,Sc=null,Qp=!1,Zp=!1;function H1(D){Sc===null?Sc=[D]:Sc.push(D)}function JD(D){Qp=!0,H1(D)}function za(){if(!Zp&&Sc!==null){Zp=!0;var D=0,N=Gn;try{var $=Sc;for(Gn=1;D<$.length;D++){var Q=$[D];do Q=Q(!0);while(Q!==null)}Sc=null,Qp=!1}catch(te){throw Sc!==null&&(Sc=Sc.slice(D+1)),Ol(j1,za),te}finally{Gn=N,Zp=!1}}return null}var Oh=[],Cc=0,Ey=null,Xf=0,Ts=[],Eo=0,aa=null,Qs=1,Bu="";function zu(D,N){Oh[Cc++]=Xf,Oh[Cc++]=Ey,Ey=D,Xf=N}function eA(D,N,$){Ts[Eo++]=Qs,Ts[Eo++]=Bu,Ts[Eo++]=aa,aa=D;var Q=Qs;D=Bu;var te=32-Co(Q)-1;Q&=~(1<<te),$+=1;var oe=32-Co(N)+te;if(30<oe){var ke=te-te%5;oe=(Q&(1<<ke)-1).toString(32),Q>>=ke,te-=ke,Qs=1<<32-Co(N)+te|$<<te|Q,Bu=oe+D}else Qs=1<<oe|$<<te|Q,Bu=D}function Ty(D){D.return!==null&&(zu(D,1),eA(D,1,0))}function Dy(D){for(;D===Ey;)Ey=Oh[--Cc],Oh[Cc]=null,Xf=Oh[--Cc],Oh[Cc]=null;for(;D===aa;)aa=Ts[--Eo],Ts[Eo]=null,Bu=Ts[--Eo],Ts[Eo]=null,Qs=Ts[--Eo],Ts[Eo]=null}var Wa=null,Ds=null,si=!1,Ay=!1,Wu=null;function tA(D,N){var $=Po(5,null,null,0);$.elementType="DELETED",$.stateNode=N,$.return=D,N=D.deletions,N===null?(D.deletions=[$],D.flags|=16):N.push($)}function G1(D,N){switch(D.tag){case 5:return N=bt(N,D.type,D.pendingProps),N!==null?(D.stateNode=N,Wa=D,Ds=Vt(N),!0):!1;case 6:return N=kt(N,D.pendingProps),N!==null?(D.stateNode=N,Wa=D,Ds=null,!0):!1;case 13:if(N=tn(N),N!==null){var $=aa!==null?{id:Qs,overflow:Bu}:null;return D.memoizedState={dehydrated:N,treeContext:$,retryLane:1073741824},$=Po(18,null,null,0),$.stateNode=N,$.return=D,D.child=$,Wa=D,Ds=null,!0}return!1;default:return!1}}function Rx(D){return(D.mode&1)!==0&&(D.flags&128)===0}function Ix(D){if(si){var N=Ds;if(N){var $=N;if(!G1(D,N)){if(Rx(D))throw Error(o(418));N=zt($);var Q=Wa;N&&G1(D,N)?tA(Q,$):(D.flags=D.flags&-4097|2,si=!1,Wa=D)}}else{if(Rx(D))throw Error(o(418));D.flags=D.flags&-4097|2,si=!1,Wa=D}}}function nA(D){for(D=D.return;D!==null&&D.tag!==5&&D.tag!==3&&D.tag!==13;)D=D.return;Wa=D}function X1(D){if(!Ee||D!==Wa)return!1;if(!si)return nA(D),si=!0,!1;if(D.tag!==3&&(D.tag!==5||xy(D.type)&&!Z(D.type,D.memoizedProps))){var N=Ds;if(N){if(Rx(D))throw rA(),Error(o(418));for(;N;)tA(D,N),N=zt(N)}}if(nA(D),D.tag===13){if(!Ee)throw Error(o(316));if(D=D.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(o(317));Ds=$i(D)}else Ds=Wa?zt(D.stateNode):null;return!0}function rA(){for(var D=Ds;D;)D=zt(D)}function Kf(){Ee&&(Ds=Wa=null,Ay=si=!1)}function Fx(D){Wu===null?Wu=[D]:Wu.push(D)}var R4=s.ReactCurrentBatchConfig;function K1(D,N){if(Uu(D,N))return!0;if(typeof D!="object"||D===null||typeof N!="object"||N===null)return!1;var $=Object.keys(D),Q=Object.keys(N);if($.length!==Q.length)return!1;for(Q=0;Q<$.length;Q++){var te=$[Q];if(!qp.call(N,te)||!Uu(D[te],N[te]))return!1}return!0}function I4(D){switch(D.tag){case 5:return eu(D.type);case 16:return eu("Lazy");case 13:return eu("Suspense");case 19:return eu("SuspenseList");case 0:case 2:case 15:return D=Ti(D.type,!1),D;case 11:return D=Ti(D.type.render,!1),D;case 1:return D=Ti(D.type,!0),D;default:return""}}function Yf(D,N,$){if(D=$.ref,D!==null&&typeof D!="function"&&typeof D!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(o(309));var Q=$.stateNode}if(!Q)throw Error(o(147,D));var te=Q,oe=""+D;return N!==null&&N.ref!==null&&typeof N.ref=="function"&&N.ref._stringRef===oe?N.ref:(N=function(ke){var Xe=te.refs;ke===null?delete Xe[oe]:Xe[oe]=ke},N._stringRef=oe,N)}if(typeof D!="string")throw Error(o(284));if(!$._owner)throw Error(o(290,D))}return D}function Y1(D,N){throw D=Object.prototype.toString.call(N),Error(o(31,D==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":D))}function iA(D){var N=D._init;return N(D._payload)}function aA(D){function N(it,Ye){if(D){var lt=it.deletions;lt===null?(it.deletions=[Ye],it.flags|=16):lt.push(Ye)}}function $(it,Ye){if(!D)return null;for(;Ye!==null;)N(it,Ye),Ye=Ye.sibling;return null}function Q(it,Ye){for(it=new Map;Ye!==null;)Ye.key!==null?it.set(Ye.key,Ye):it.set(Ye.index,Ye),Ye=Ye.sibling;return it}function te(it,Ye){return it=Kh(it,Ye),it.index=0,it.sibling=null,it}function oe(it,Ye,lt){return it.index=lt,D?(lt=it.alternate,lt!==null?(lt=lt.index,lt<Ye?(it.flags|=2,Ye):lt):(it.flags|=2,Ye)):(it.flags|=1048576,Ye)}function ke(it){return D&&it.alternate===null&&(it.flags|=2),it}function Xe(it,Ye,lt,Ut){return Ye===null||Ye.tag!==6?(Ye=Sg(lt,it.mode,Ut),Ye.return=it,Ye):(Ye=te(Ye,lt),Ye.return=it,Ye)}function ut(it,Ye,lt,Ut){var fn=lt.type;return fn===h?Gt(it,Ye,lt.props.children,Ut,lt.key):Ye!==null&&(Ye.elementType===fn||typeof fn=="object"&&fn!==null&&fn.$$typeof===b&&iA(fn)===Ye.type)?(Ut=te(Ye,lt.props),Ut.ref=Yf(it,Ye,lt),Ut.return=it,Ut):(Ut=Ab(lt.type,lt.key,lt.props,null,it.mode,Ut),Ut.ref=Yf(it,Ye,lt),Ut.return=it,Ut)}function Dt(it,Ye,lt,Ut){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==lt.containerInfo||Ye.stateNode.implementation!==lt.implementation?(Ye=kb(lt,it.mode,Ut),Ye.return=it,Ye):(Ye=te(Ye,lt.children||[]),Ye.return=it,Ye)}function Gt(it,Ye,lt,Ut,fn){return Ye===null||Ye.tag!==7?(Ye=qa(lt,it.mode,Ut,fn),Ye.return=it,Ye):(Ye=te(Ye,lt),Ye.return=it,Ye)}function En(it,Ye,lt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return Ye=Sg(""+Ye,it.mode,lt),Ye.return=it,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case u:return lt=Ab(Ye.type,Ye.key,Ye.props,null,it.mode,lt),lt.ref=Yf(it,null,Ye),lt.return=it,lt;case l:return Ye=kb(Ye,it.mode,lt),Ye.return=it,Ye;case b:var Ut=Ye._init;return En(it,Ut(Ye._payload),lt)}if(U(Ye)||S(Ye))return Ye=qa(Ye,it.mode,lt,null),Ye.return=it,Ye;Y1(it,Ye)}return null}function Lt(it,Ye,lt,Ut){var fn=Ye!==null?Ye.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number")return fn!==null?null:Xe(it,Ye,""+lt,Ut);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case u:return lt.key===fn?ut(it,Ye,lt,Ut):null;case l:return lt.key===fn?Dt(it,Ye,lt,Ut):null;case b:return fn=lt._init,Lt(it,Ye,fn(lt._payload),Ut)}if(U(lt)||S(lt))return fn!==null?null:Gt(it,Ye,lt,Ut,null);Y1(it,lt)}return null}function Jr(it,Ye,lt,Ut,fn){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number")return it=it.get(lt)||null,Xe(Ye,it,""+Ut,fn);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case u:return it=it.get(Ut.key===null?lt:Ut.key)||null,ut(Ye,it,Ut,fn);case l:return it=it.get(Ut.key===null?lt:Ut.key)||null,Dt(Ye,it,Ut,fn);case b:var Fn=Ut._init;return Jr(it,Ye,lt,Fn(Ut._payload),fn)}if(U(Ut)||S(Ut))return it=it.get(lt)||null,Gt(Ye,it,Ut,fn,null);Y1(Ye,Ut)}return null}function Cr(it,Ye,lt,Ut){for(var fn=null,Fn=null,Tn=Ye,tr=Ye=0,ca=null;Tn!==null&&tr<lt.length;tr++){Tn.index>tr?(ca=Tn,Tn=null):ca=Tn.sibling;var Qn=Lt(it,Tn,lt[tr],Ut);if(Qn===null){Tn===null&&(Tn=ca);break}D&&Tn&&Qn.alternate===null&&N(it,Tn),Ye=oe(Qn,Ye,tr),Fn===null?fn=Qn:Fn.sibling=Qn,Fn=Qn,Tn=ca}if(tr===lt.length)return $(it,Tn),si&&zu(it,tr),fn;if(Tn===null){for(;tr<lt.length;tr++)Tn=En(it,lt[tr],Ut),Tn!==null&&(Ye=oe(Tn,Ye,tr),Fn===null?fn=Tn:Fn.sibling=Tn,Fn=Tn);return si&&zu(it,tr),fn}for(Tn=Q(it,Tn);tr<lt.length;tr++)ca=Jr(Tn,it,tr,lt[tr],Ut),ca!==null&&(D&&ca.alternate!==null&&Tn.delete(ca.key===null?tr:ca.key),Ye=oe(ca,Ye,tr),Fn===null?fn=ca:Fn.sibling=ca,Fn=ca);return D&&Tn.forEach(function(cs){return N(it,cs)}),si&&zu(it,tr),fn}function Is(it,Ye,lt,Ut){var fn=S(lt);if(typeof fn!="function")throw Error(o(150));if(lt=fn.call(lt),lt==null)throw Error(o(151));for(var Fn=fn=null,Tn=Ye,tr=Ye=0,ca=null,Qn=lt.next();Tn!==null&&!Qn.done;tr++,Qn=lt.next()){Tn.index>tr?(ca=Tn,Tn=null):ca=Tn.sibling;var cs=Lt(it,Tn,Qn.value,Ut);if(cs===null){Tn===null&&(Tn=ca);break}D&&Tn&&cs.alternate===null&&N(it,Tn),Ye=oe(cs,Ye,tr),Fn===null?fn=cs:Fn.sibling=cs,Fn=cs,Tn=ca}if(Qn.done)return $(it,Tn),si&&zu(it,tr),fn;if(Tn===null){for(;!Qn.done;tr++,Qn=lt.next())Qn=En(it,Qn.value,Ut),Qn!==null&&(Ye=oe(Qn,Ye,tr),Fn===null?fn=Qn:Fn.sibling=Qn,Fn=Qn);return si&&zu(it,tr),fn}for(Tn=Q(it,Tn);!Qn.done;tr++,Qn=lt.next())Qn=Jr(Tn,it,tr,Qn.value,Ut),Qn!==null&&(D&&Qn.alternate!==null&&Tn.delete(Qn.key===null?tr:Qn.key),Ye=oe(Qn,Ye,tr),Fn===null?fn=Qn:Fn.sibling=Qn,Fn=Qn);return D&&Tn.forEach(function(U4){return N(it,U4)}),si&&zu(it,tr),fn}function zl(it,Ye,lt,Ut){if(typeof lt=="object"&&lt!==null&&lt.type===h&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case u:e:{for(var fn=lt.key,Fn=Ye;Fn!==null;){if(Fn.key===fn){if(fn=lt.type,fn===h){if(Fn.tag===7){$(it,Fn.sibling),Ye=te(Fn,lt.props.children),Ye.return=it,it=Ye;break e}}else if(Fn.elementType===fn||typeof fn=="object"&&fn!==null&&fn.$$typeof===b&&iA(fn)===Fn.type){$(it,Fn.sibling),Ye=te(Fn,lt.props),Ye.ref=Yf(it,Fn,lt),Ye.return=it,it=Ye;break e}$(it,Fn);break}else N(it,Fn);Fn=Fn.sibling}lt.type===h?(Ye=qa(lt.props.children,it.mode,Ut,lt.key),Ye.return=it,it=Ye):(Ut=Ab(lt.type,lt.key,lt.props,null,it.mode,Ut),Ut.ref=Yf(it,Ye,lt),Ut.return=it,it=Ut)}return ke(it);case l:e:{for(Fn=lt.key;Ye!==null;){if(Ye.key===Fn)if(Ye.tag===4&&Ye.stateNode.containerInfo===lt.containerInfo&&Ye.stateNode.implementation===lt.implementation){$(it,Ye.sibling),Ye=te(Ye,lt.children||[]),Ye.return=it,it=Ye;break e}else{$(it,Ye);break}else N(it,Ye);Ye=Ye.sibling}Ye=kb(lt,it.mode,Ut),Ye.return=it,it=Ye}return ke(it);case b:return Fn=lt._init,zl(it,Ye,Fn(lt._payload),Ut)}if(U(lt))return Cr(it,Ye,lt,Ut);if(S(lt))return Is(it,Ye,lt,Ut);Y1(it,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"?(lt=""+lt,Ye!==null&&Ye.tag===6?($(it,Ye.sibling),Ye=te(Ye,lt),Ye.return=it,it=Ye):($(it,Ye),Ye=Sg(lt,it.mode,Ut),Ye.return=it,it=Ye),ke(it)):$(it,Ye)}return zl}var Qf=aA(!0),sA=aA(!1),Q1=mi(null),Z1=null,Jp=null,Px=null;function Lx(){Px=Jp=Z1=null}function oA(D,N,$){ce?(Bn(Q1,N._currentValue),N._currentValue=$):(Bn(Q1,N._currentValue2),N._currentValue2=$)}function ky(D){var N=Q1.current;Ir(Q1),ce?D._currentValue=N:D._currentValue2=N}function Zf(D,N,$){for(;D!==null;){var Q=D.alternate;if((D.childLanes&N)!==N?(D.childLanes|=N,Q!==null&&(Q.childLanes|=N)):Q!==null&&(Q.childLanes&N)!==N&&(Q.childLanes|=N),D===$)break;D=D.return}}function eg(D,N){Z1=D,Px=Jp=null,D=D.dependencies,D!==null&&D.firstContext!==null&&((D.lanes&N)!==0&&(oa=!0),D.firstContext=null)}function To(D){var N=ce?D._currentValue:D._currentValue2;if(Px!==D)if(D={context:D,memoizedValue:N,next:null},Jp===null){if(Z1===null)throw Error(o(308));Jp=D,Z1.dependencies={lanes:0,firstContext:D}}else Jp=Jp.next=D;return N}var Rh=null;function J1(D){Rh===null?Rh=[D]:Rh.push(D)}function Mx(D,N,$,Q){var te=N.interleaved;return te===null?($.next=$,J1(N)):($.next=te.next,te.next=$),N.interleaved=$,ju(D,Q)}function ju(D,N){D.lanes|=N;var $=D.alternate;for($!==null&&($.lanes|=N),$=D,D=D.return;D!==null;)D.childLanes|=N,$=D.alternate,$!==null&&($.childLanes|=N),$=D,D=D.return;return $.tag===3?$.stateNode:null}var Do=!1;function Ux(D){D.updateQueue={baseState:D.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uA(D,N){D=D.updateQueue,N.updateQueue===D&&(N.updateQueue={baseState:D.baseState,firstBaseUpdate:D.firstBaseUpdate,lastBaseUpdate:D.lastBaseUpdate,shared:D.shared,effects:D.effects})}function Ec(D,N){return{eventTime:D,lane:N,tag:0,payload:null,callback:null,next:null}}function Tc(D,N,$){var Q=D.updateQueue;if(Q===null)return null;if(Q=Q.shared,(On&2)!==0){var te=Q.pending;return te===null?N.next=N:(N.next=te.next,te.next=N),Q.pending=N,ju(D,$)}return te=Q.interleaved,te===null?(N.next=N,J1(Q)):(N.next=te.next,te.next=N),Q.interleaved=N,ju(D,$)}function Ny(D,N,$){if(N=N.updateQueue,N!==null&&(N=N.shared,($&4194240)!==0)){var Q=N.lanes;Q&=D.pendingLanes,$|=Q,N.lanes=$,Nl(D,$)}}function tg(D,N){var $=D.updateQueue,Q=D.alternate;if(Q!==null&&(Q=Q.updateQueue,$===Q)){var te=null,oe=null;if($=$.firstBaseUpdate,$!==null){do{var ke={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};oe===null?te=oe=ke:oe=oe.next=ke,$=$.next}while($!==null);oe===null?te=oe=N:oe=oe.next=N}else te=oe=N;$={baseState:Q.baseState,firstBaseUpdate:te,lastBaseUpdate:oe,shared:Q.shared,effects:Q.effects},D.updateQueue=$;return}D=$.lastBaseUpdate,D===null?$.firstBaseUpdate=N:D.next=N,$.lastBaseUpdate=N}function Ih(D,N,$,Q){var te=D.updateQueue;Do=!1;var oe=te.firstBaseUpdate,ke=te.lastBaseUpdate,Xe=te.shared.pending;if(Xe!==null){te.shared.pending=null;var ut=Xe,Dt=ut.next;ut.next=null,ke===null?oe=Dt:ke.next=Dt,ke=ut;var Gt=D.alternate;Gt!==null&&(Gt=Gt.updateQueue,Xe=Gt.lastBaseUpdate,Xe!==ke&&(Xe===null?Gt.firstBaseUpdate=Dt:Xe.next=Dt,Gt.lastBaseUpdate=ut))}if(oe!==null){var En=te.baseState;ke=0,Gt=Dt=ut=null,Xe=oe;do{var Lt=Xe.lane,Jr=Xe.eventTime;if((Q&Lt)===Lt){Gt!==null&&(Gt=Gt.next={eventTime:Jr,lane:0,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null});e:{var Cr=D,Is=Xe;switch(Lt=N,Jr=$,Is.tag){case 1:if(Cr=Is.payload,typeof Cr=="function"){En=Cr.call(Jr,En,Lt);break e}En=Cr;break e;case 3:Cr.flags=Cr.flags&-65537|128;case 0:if(Cr=Is.payload,Lt=typeof Cr=="function"?Cr.call(Jr,En,Lt):Cr,Lt==null)break e;En=a({},En,Lt);break e;case 2:Do=!0}}Xe.callback!==null&&Xe.lane!==0&&(D.flags|=64,Lt=te.effects,Lt===null?te.effects=[Xe]:Lt.push(Xe))}else Jr={eventTime:Jr,lane:Lt,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null},Gt===null?(Dt=Gt=Jr,ut=En):Gt=Gt.next=Jr,ke|=Lt;if(Xe=Xe.next,Xe===null){if(Xe=te.shared.pending,Xe===null)break;Lt=Xe,Xe=Lt.next,Lt.next=null,te.lastBaseUpdate=Lt,te.shared.pending=null}}while(!0);if(Gt===null&&(ut=En),te.baseState=ut,te.firstBaseUpdate=Dt,te.lastBaseUpdate=Gt,N=te.shared.interleaved,N!==null){te=N;do ke|=te.lane,te=te.next;while(te!==N)}else oe===null&&(te.shared.lanes=0);Oc|=ke,D.lanes=ke,D.memoizedState=En}}function lA(D,N,$){if(D=N.effects,N.effects=null,D!==null)for(N=0;N<D.length;N++){var Q=D[N],te=Q.callback;if(te!==null){if(Q.callback=null,Q=$,typeof te!="function")throw Error(o(191,te));te.call(Q)}}}var Fh={},nu=mi(Fh),ng=mi(Fh),Ph=mi(Fh);function ru(D){if(D===Fh)throw Error(o(174));return D}function eb(D,N){Bn(Ph,N),Bn(ng,D),Bn(nu,Fh),D=W(N),Ir(nu),Bn(nu,D)}function Jf(){Ir(nu),Ir(ng),Ir(Ph)}function Bx(D){var N=ru(Ph.current),$=ru(nu.current);N=Y($,D.type,N),$!==N&&(Bn(ng,D),Bn(nu,N))}function zx(D){ng.current===D&&(Ir(nu),Ir(ng))}var Di=mi(0);function tb(D){for(var N=D;N!==null;){if(N.tag===13){var $=N.memoizedState;if($!==null&&($=$.dehydrated,$===null||an($)||Mt($)))return N}else if(N.tag===19&&N.memoizedProps.revealOrder!==void 0){if((N.flags&128)!==0)return N}else if(N.child!==null){N.child.return=N,N=N.child;continue}if(N===D)break;for(;N.sibling===null;){if(N.return===null||N.return===D)return null;N=N.return}N.sibling.return=N.return,N=N.sibling}return null}var Wx=[];function jx(){for(var D=0;D<Wx.length;D++){var N=Wx[D];ce?N._workInProgressVersionPrimary=null:N._workInProgressVersionSecondary=null}Wx.length=0}var Zs=s.ReactCurrentDispatcher,ed=s.ReactCurrentBatchConfig,Lh=0,yi=null,Ki=null,sa=null,rg=!1,Oy=!1,Ry=0,ig=0;function Sa(){throw Error(o(321))}function td(D,N){if(N===null)return!1;for(var $=0;$<N.length&&$<D.length;$++)if(!Uu(D[$],N[$]))return!1;return!0}function Iy(D,N,$,Q,te,oe){if(Lh=oe,yi=N,N.memoizedState=null,N.updateQueue=null,N.lanes=0,Zs.current=D===null||D.memoizedState===null?Zx:Jx,D=$(Q,te),Oy){oe=0;do{if(Oy=!1,Ry=0,25<=oe)throw Error(o(301));oe+=1,sa=Ki=null,N.updateQueue=null,Zs.current=e_,D=$(Q,te)}while(Oy)}if(Zs.current=sd,N=Ki!==null&&Ki.next!==null,Lh=0,sa=Ki=yi=null,rg=!1,N)throw Error(o(300));return D}function nb(){var D=Ry!==0;return Ry=0,D}function Ao(){var D={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sa===null?yi.memoizedState=sa=D:sa=sa.next=D,sa}function ja(){if(Ki===null){var D=yi.alternate;D=D!==null?D.memoizedState:null}else D=Ki.next;var N=sa===null?yi.memoizedState:sa.next;if(N!==null)sa=N,Ki=D;else{if(D===null)throw Error(o(310));Ki=D,D={memoizedState:Ki.memoizedState,baseState:Ki.baseState,baseQueue:Ki.baseQueue,queue:Ki.queue,next:null},sa===null?yi.memoizedState=sa=D:sa=sa.next=D}return sa}function nd(D,N){return typeof N=="function"?N(D):N}function rb(D){var N=ja(),$=N.queue;if($===null)throw Error(o(311));$.lastRenderedReducer=D;var Q=Ki,te=Q.baseQueue,oe=$.pending;if(oe!==null){if(te!==null){var ke=te.next;te.next=oe.next,oe.next=ke}Q.baseQueue=te=oe,$.pending=null}if(te!==null){oe=te.next,Q=Q.baseState;var Xe=ke=null,ut=null,Dt=oe;do{var Gt=Dt.lane;if((Lh&Gt)===Gt)ut!==null&&(ut=ut.next={lane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),Q=Dt.hasEagerState?Dt.eagerState:D(Q,Dt.action);else{var En={lane:Gt,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null};ut===null?(Xe=ut=En,ke=Q):ut=ut.next=En,yi.lanes|=Gt,Oc|=Gt}Dt=Dt.next}while(Dt!==null&&Dt!==oe);ut===null?ke=Q:ut.next=Xe,Uu(Q,N.memoizedState)||(oa=!0),N.memoizedState=Q,N.baseState=ke,N.baseQueue=ut,$.lastRenderedState=Q}if(D=$.interleaved,D!==null){te=D;do oe=te.lane,yi.lanes|=oe,Oc|=oe,te=te.next;while(te!==D)}else te===null&&($.lanes=0);return[N.memoizedState,$.dispatch]}function ag(D){var N=ja(),$=N.queue;if($===null)throw Error(o(311));$.lastRenderedReducer=D;var Q=$.dispatch,te=$.pending,oe=N.memoizedState;if(te!==null){$.pending=null;var ke=te=te.next;do oe=D(oe,ke.action),ke=ke.next;while(ke!==te);Uu(oe,N.memoizedState)||(oa=!0),N.memoizedState=oe,N.baseQueue===null&&(N.baseState=oe),$.lastRenderedState=oe}return[oe,Q]}function $x(){}function qx(D,N){var $=yi,Q=ja(),te=N(),oe=!Uu(Q.memoizedState,te);if(oe&&(Q.memoizedState=te,oa=!0),Q=Q.queue,sb(Gx.bind(null,$,Q,D),[D]),Q.getSnapshot!==N||oe||sa!==null&&sa.memoizedState.tag&1){if($.flags|=2048,rd(9,Hx.bind(null,$,Q,te,N),void 0,null),$r===null)throw Error(o(349));(Lh&30)!==0||Vx($,N,te)}return te}function Vx(D,N,$){D.flags|=16384,D={getSnapshot:N,value:$},N=yi.updateQueue,N===null?(N={lastEffect:null,stores:null},yi.updateQueue=N,N.stores=[D]):($=N.stores,$===null?N.stores=[D]:$.push(D))}function Hx(D,N,$,Q){N.value=$,N.getSnapshot=Q,Xx(N)&&Dc(D)}function Gx(D,N,$){return $(function(){Xx(N)&&Dc(D)})}function Xx(D){var N=D.getSnapshot;D=D.value;try{var $=N();return!Uu(D,$)}catch{return!0}}function Dc(D){var N=ju(D,1);N!==null&&us(N,D,1,-1)}function ib(D){var N=Ao();return typeof D=="function"&&(D=D()),N.memoizedState=N.baseState=D,D={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:D},N.queue=D,D=D.dispatch=F4.bind(null,yi,D),[N.memoizedState,D]}function rd(D,N,$,Q){return D={tag:D,create:N,destroy:$,deps:Q,next:null},N=yi.updateQueue,N===null?(N={lastEffect:null,stores:null},yi.updateQueue=N,N.lastEffect=D.next=D):($=N.lastEffect,$===null?N.lastEffect=D.next=D:(Q=$.next,$.next=D,D.next=Q,N.lastEffect=D)),D}function cA(){return ja().memoizedState}function ab(D,N,$,Q){var te=Ao();yi.flags|=D,te.memoizedState=rd(1|N,$,void 0,Q===void 0?null:Q)}function Mh(D,N,$,Q){var te=ja();Q=Q===void 0?null:Q;var oe=void 0;if(Ki!==null){var ke=Ki.memoizedState;if(oe=ke.destroy,Q!==null&&td(Q,ke.deps)){te.memoizedState=rd(N,$,oe,Q);return}}yi.flags|=D,te.memoizedState=rd(1|N,$,oe,Q)}function hA(D,N){return ab(8390656,8,D,N)}function sb(D,N){return Mh(2048,8,D,N)}function Kx(D,N){return Mh(4,2,D,N)}function Yr(D,N){return Mh(4,4,D,N)}function ob(D,N){if(typeof N=="function")return D=D(),N(D),function(){N(null)};if(N!=null)return D=D(),N.current=D,function(){N.current=null}}function Fy(D,N,$){return $=$!=null?$.concat([D]):null,Mh(4,4,ob.bind(null,N,D),$)}function id(){}function Yx(D,N){var $=ja();N=N===void 0?null:N;var Q=$.memoizedState;return Q!==null&&N!==null&&td(N,Q[1])?Q[0]:($.memoizedState=[D,N],D)}function ub(D,N){var $=ja();N=N===void 0?null:N;var Q=$.memoizedState;return Q!==null&&N!==null&&td(N,Q[1])?Q[0]:(D=D(),$.memoizedState=[D,N],D)}function sg(D,N,$){return(Lh&21)===0?(D.baseState&&(D.baseState=!1,oa=!0),D.memoizedState=$):(Uu($,N)||($=W1(),yi.lanes|=$,Oc|=$,D.baseState=!0),N)}function lb(D,N){var $=Gn;Gn=$!==0&&4>$?$:4,D(!0);var Q=ed.transition;ed.transition={};try{D(!1),N()}finally{Gn=$,ed.transition=Q}}function ad(){return ja().memoizedState}function fA(D,N,$){var Q=la(D);if($={lane:Q,action:$,hasEagerState:!1,eagerState:null,next:null},dA(D))Qx(N,$);else if($=Mx(D,N,$,Q),$!==null){var te=oi();us($,D,Q,te),Py($,N,Q)}}function F4(D,N,$){var Q=la(D),te={lane:Q,action:$,hasEagerState:!1,eagerState:null,next:null};if(dA(D))Qx(N,te);else{var oe=D.alternate;if(D.lanes===0&&(oe===null||oe.lanes===0)&&(oe=N.lastRenderedReducer,oe!==null))try{var ke=N.lastRenderedState,Xe=oe(ke,$);if(te.hasEagerState=!0,te.eagerState=Xe,Uu(Xe,ke)){var ut=N.interleaved;ut===null?(te.next=te,J1(N)):(te.next=ut.next,ut.next=te),N.interleaved=te;return}}catch{}finally{}$=Mx(D,N,te,Q),$!==null&&(te=oi(),us($,D,Q,te),Py($,N,Q))}}function dA(D){var N=D.alternate;return D===yi||N!==null&&N===yi}function Qx(D,N){Oy=rg=!0;var $=D.pending;$===null?N.next=N:(N.next=$.next,$.next=N),D.pending=N}function Py(D,N,$){if(($&4194240)!==0){var Q=N.lanes;Q&=D.pendingLanes,$|=Q,N.lanes=$,Nl(D,$)}}var sd={readContext:To,useCallback:Sa,useContext:Sa,useEffect:Sa,useImperativeHandle:Sa,useInsertionEffect:Sa,useLayoutEffect:Sa,useMemo:Sa,useReducer:Sa,useRef:Sa,useState:Sa,useDebugValue:Sa,useDeferredValue:Sa,useTransition:Sa,useMutableSource:Sa,useSyncExternalStore:Sa,useId:Sa,unstable_isNewReconciler:!1},Zx={readContext:To,useCallback:function(D,N){return Ao().memoizedState=[D,N===void 0?null:N],D},useContext:To,useEffect:hA,useImperativeHandle:function(D,N,$){return $=$!=null?$.concat([D]):null,ab(4194308,4,ob.bind(null,N,D),$)},useLayoutEffect:function(D,N){return ab(4194308,4,D,N)},useInsertionEffect:function(D,N){return ab(4,2,D,N)},useMemo:function(D,N){var $=Ao();return N=N===void 0?null:N,D=D(),$.memoizedState=[D,N],D},useReducer:function(D,N,$){var Q=Ao();return N=$!==void 0?$(N):N,Q.memoizedState=Q.baseState=N,D={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:D,lastRenderedState:N},Q.queue=D,D=D.dispatch=fA.bind(null,yi,D),[Q.memoizedState,D]},useRef:function(D){var N=Ao();return D={current:D},N.memoizedState=D},useState:ib,useDebugValue:id,useDeferredValue:function(D){return Ao().memoizedState=D},useTransition:function(){var D=ib(!1),N=D[0];return D=lb.bind(null,D[1]),Ao().memoizedState=D,[N,D]},useMutableSource:function(){},useSyncExternalStore:function(D,N,$){var Q=yi,te=Ao();if(si){if($===void 0)throw Error(o(407));$=$()}else{if($=N(),$r===null)throw Error(o(349));(Lh&30)!==0||Vx(Q,N,$)}te.memoizedState=$;var oe={value:$,getSnapshot:N};return te.queue=oe,hA(Gx.bind(null,Q,oe,D),[D]),Q.flags|=2048,rd(9,Hx.bind(null,Q,oe,$,N),void 0,null),$},useId:function(){var D=Ao(),N=$r.identifierPrefix;if(si){var $=Bu,Q=Qs;$=(Q&~(1<<32-Co(Q)-1)).toString(32)+$,N=":"+N+"R"+$,$=Ry++,0<$&&(N+="H"+$.toString(32)),N+=":"}else $=ig++,N=":"+N+"r"+$.toString(32)+":";return D.memoizedState=N},unstable_isNewReconciler:!1},Jx={readContext:To,useCallback:Yx,useContext:To,useEffect:sb,useImperativeHandle:Fy,useInsertionEffect:Kx,useLayoutEffect:Yr,useMemo:ub,useReducer:rb,useRef:cA,useState:function(){return rb(nd)},useDebugValue:id,useDeferredValue:function(D){var N=ja();return sg(N,Ki.memoizedState,D)},useTransition:function(){var D=rb(nd)[0],N=ja().memoizedState;return[D,N]},useMutableSource:$x,useSyncExternalStore:qx,useId:ad,unstable_isNewReconciler:!1},e_={readContext:To,useCallback:Yx,useContext:To,useEffect:sb,useImperativeHandle:Fy,useInsertionEffect:Kx,useLayoutEffect:Yr,useMemo:ub,useReducer:ag,useRef:cA,useState:function(){return ag(nd)},useDebugValue:id,useDeferredValue:function(D){var N=ja();return Ki===null?N.memoizedState=D:sg(N,Ki.memoizedState,D)},useTransition:function(){var D=ag(nd)[0],N=ja().memoizedState;return[D,N]},useMutableSource:$x,useSyncExternalStore:qx,useId:ad,unstable_isNewReconciler:!1};function ko(D,N){if(D&&D.defaultProps){N=a({},N),D=D.defaultProps;for(var $ in D)N[$]===void 0&&(N[$]=D[$]);return N}return N}function t_(D,N,$,Q){N=D.memoizedState,$=$(Q,N),$=$==null?N:a({},N,$),D.memoizedState=$,D.lanes===0&&(D.updateQueue.baseState=$)}var Ly={isMounted:function(D){return(D=D._reactInternals)?k(D)===D:!1},enqueueSetState:function(D,N,$){D=D._reactInternals;var Q=oi(),te=la(D),oe=Ec(Q,te);oe.payload=N,$!=null&&(oe.callback=$),N=Tc(D,oe,te),N!==null&&(us(N,D,te,Q),Ny(N,D,te))},enqueueReplaceState:function(D,N,$){D=D._reactInternals;var Q=oi(),te=la(D),oe=Ec(Q,te);oe.tag=1,oe.payload=N,$!=null&&(oe.callback=$),N=Tc(D,oe,te),N!==null&&(us(N,D,te,Q),Ny(N,D,te))},enqueueForceUpdate:function(D,N){D=D._reactInternals;var $=oi(),Q=la(D),te=Ec($,Q);te.tag=2,N!=null&&(te.callback=N),N=Tc(D,te,Q),N!==null&&(us(N,D,Q,$),Ny(N,D,Q))}};function pA(D,N,$,Q,te,oe,ke){return D=D.stateNode,typeof D.shouldComponentUpdate=="function"?D.shouldComponentUpdate(Q,oe,ke):N.prototype&&N.prototype.isPureReactComponent?!K1($,Q)||!K1(te,oe):!0}function gA(D,N,$){var Q=!1,te=Ah,oe=N.contextType;return typeof oe=="object"&&oe!==null?oe=To(oe):(te=xa(N)?kl:is.current,Q=N.contextTypes,oe=(Q=Q!=null)?_c(D,te):Ah),N=new N($,oe),D.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Ly,D.stateNode=N,N._reactInternals=D,Q&&(D=D.stateNode,D.__reactInternalMemoizedUnmaskedChildContext=te,D.__reactInternalMemoizedMaskedChildContext=oe),N}function cb(D,N,$,Q){D=N.state,typeof N.componentWillReceiveProps=="function"&&N.componentWillReceiveProps($,Q),typeof N.UNSAFE_componentWillReceiveProps=="function"&&N.UNSAFE_componentWillReceiveProps($,Q),N.state!==D&&Ly.enqueueReplaceState(N,N.state,null)}function Rl(D,N,$,Q){var te=D.stateNode;te.props=$,te.state=D.memoizedState,te.refs={},Ux(D);var oe=N.contextType;typeof oe=="object"&&oe!==null?te.context=To(oe):(oe=xa(N)?kl:is.current,te.context=_c(D,oe)),te.state=D.memoizedState,oe=N.getDerivedStateFromProps,typeof oe=="function"&&(t_(D,N,oe,$),te.state=D.memoizedState),typeof N.getDerivedStateFromProps=="function"||typeof te.getSnapshotBeforeUpdate=="function"||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(N=te.state,typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount(),N!==te.state&&Ly.enqueueReplaceState(te,te.state,null),Ih(D,$,te,Q),te.state=D.memoizedState),typeof te.componentDidMount=="function"&&(D.flags|=4194308)}function od(D,N){try{var $="",Q=N;do $+=I4(Q),Q=Q.return;while(Q);var te=$}catch(oe){te=`
Error generating stack: `+oe.message+`
`+oe.stack}return{value:D,source:N,stack:te,digest:null}}function Uh(D,N,$){return{value:D,source:null,stack:$??null,digest:N??null}}function iu(D,N){try{console.error(N.value)}catch($){setTimeout(function(){throw $})}}var My=typeof WeakMap=="function"?WeakMap:Map;function Il(D,N,$){$=Ec(-1,$),$.tag=3,$.payload={element:null};var Q=N.value;return $.callback=function(){Ii||(Ii=!0,Yi=Q),iu(D,N)},$}function hb(D,N,$){$=Ec(-1,$),$.tag=3;var Q=D.type.getDerivedStateFromError;if(typeof Q=="function"){var te=N.value;$.payload=function(){return Q(te)},$.callback=function(){iu(D,N)}}var oe=D.stateNode;return oe!==null&&typeof oe.componentDidCatch=="function"&&($.callback=function(){iu(D,N),typeof Q!="function"&&(qu===null?qu=new Set([this]):qu.add(this));var ke=N.stack;this.componentDidCatch(N.value,{componentStack:ke!==null?ke:""})}),$}function mA(D,N,$){var Q=D.pingCache;if(Q===null){Q=D.pingCache=new My;var te=new Set;Q.set(N,te)}else te=Q.get(N),te===void 0&&(te=new Set,Q.set(N,te));te.has($)||(te.add($),D=CA.bind(null,D,N,$),N.then(D,D))}function yA(D){do{var N;if((N=D.tag===13)&&(N=D.memoizedState,N=N!==null?N.dehydrated!==null:!0),N)return D;D=D.return}while(D!==null);return null}function Bh(D,N,$,Q,te){return(D.mode&1)===0?(D===N?D.flags|=65536:(D.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(N=Ec(-1,1),N.tag=2,Tc($,N,1))),$.lanes|=1),D):(D.flags|=65536,D.lanes=te,D)}var Uy=s.ReactCurrentOwner,oa=!1;function Ca(D,N,$,Q){N.child=D===null?sA(N,null,$,Q):Qf(N,D.child,$,Q)}function fb(D,N,$,Q,te){$=$.render;var oe=N.ref;return eg(N,te),Q=Iy(D,N,$,Q,oe,te),$=nb(),D!==null&&!oa?(N.updateQueue=D.updateQueue,N.flags&=-2053,D.lanes&=~te,kc(D,N,te)):(si&&$&&Ty(N),N.flags|=1,Ca(D,N,Q,te),N.child)}function ud(D,N,$,Q,te){if(D===null){var oe=$.type;return typeof oe=="function"&&!xg(oe)&&oe.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(N.tag=15,N.type=oe,Ac(D,N,oe,Q,te)):(D=Ab($.type,null,Q,N,N.mode,te),D.ref=N.ref,D.return=N,N.child=D)}if(oe=D.child,(D.lanes&te)===0){var ke=oe.memoizedProps;if($=$.compare,$=$!==null?$:K1,$(ke,Q)&&D.ref===N.ref)return kc(D,N,te)}return N.flags|=1,D=Kh(oe,Q),D.ref=N.ref,D.return=N,N.child=D}function Ac(D,N,$,Q,te){if(D!==null){var oe=D.memoizedProps;if(K1(oe,Q)&&D.ref===N.ref)if(oa=!1,N.pendingProps=Q=oe,(D.lanes&te)!==0)(D.flags&131072)!==0&&(oa=!0);else return N.lanes=D.lanes,kc(D,N,te)}return Fl(D,N,$,Q,te)}function Qr(D,N,$){var Q=N.pendingProps,te=Q.children,oe=D!==null?D.memoizedState:null;if(Q.mode==="hidden")if((N.mode&1)===0)N.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bn(Vh,ua),ua|=$;else{if(($&1073741824)===0)return D=oe!==null?oe.baseLanes|$:$,N.lanes=N.childLanes=1073741824,N.memoizedState={baseLanes:D,cachePool:null,transitions:null},N.updateQueue=null,Bn(Vh,ua),ua|=D,null;N.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q=oe!==null?oe.baseLanes:$,Bn(Vh,ua),ua|=Q}else oe!==null?(Q=oe.baseLanes|$,N.memoizedState=null):Q=$,Bn(Vh,ua),ua|=Q;return Ca(D,N,te,$),N.child}function jr(D,N){var $=N.ref;(D===null&&$!==null||D!==null&&D.ref!==$)&&(N.flags|=512,N.flags|=2097152)}function Fl(D,N,$,Q,te){var oe=xa($)?kl:is.current;return oe=_c(N,oe),eg(N,te),$=Iy(D,N,$,Q,oe,te),Q=nb(),D!==null&&!oa?(N.updateQueue=D.updateQueue,N.flags&=-2053,D.lanes&=~te,kc(D,N,te)):(si&&Q&&Ty(N),N.flags|=1,Ca(D,N,$,te),N.child)}function $a(D,N,$,Q,te){if(xa($)){var oe=!0;Vp(N)}else oe=!1;if(eg(N,te),N.stateNode===null)By(D,N),gA(N,$,Q),Rl(N,$,Q,te),Q=!0;else if(D===null){var ke=N.stateNode,Xe=N.memoizedProps;ke.props=Xe;var ut=ke.context,Dt=$.contextType;typeof Dt=="object"&&Dt!==null?Dt=To(Dt):(Dt=xa($)?kl:is.current,Dt=_c(N,Dt));var Gt=$.getDerivedStateFromProps,En=typeof Gt=="function"||typeof ke.getSnapshotBeforeUpdate=="function";En||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(Xe!==Q||ut!==Dt)&&cb(N,ke,Q,Dt),Do=!1;var Lt=N.memoizedState;ke.state=Lt,Ih(N,Q,ke,te),ut=N.memoizedState,Xe!==Q||Lt!==ut||Ks.current||Do?(typeof Gt=="function"&&(t_(N,$,Gt,Q),ut=N.memoizedState),(Xe=Do||pA(N,$,Xe,Q,Lt,ut,Dt))?(En||typeof ke.UNSAFE_componentWillMount!="function"&&typeof ke.componentWillMount!="function"||(typeof ke.componentWillMount=="function"&&ke.componentWillMount(),typeof ke.UNSAFE_componentWillMount=="function"&&ke.UNSAFE_componentWillMount()),typeof ke.componentDidMount=="function"&&(N.flags|=4194308)):(typeof ke.componentDidMount=="function"&&(N.flags|=4194308),N.memoizedProps=Q,N.memoizedState=ut),ke.props=Q,ke.state=ut,ke.context=Dt,Q=Xe):(typeof ke.componentDidMount=="function"&&(N.flags|=4194308),Q=!1)}else{ke=N.stateNode,uA(D,N),Xe=N.memoizedProps,Dt=N.type===N.elementType?Xe:ko(N.type,Xe),ke.props=Dt,En=N.pendingProps,Lt=ke.context,ut=$.contextType,typeof ut=="object"&&ut!==null?ut=To(ut):(ut=xa($)?kl:is.current,ut=_c(N,ut));var Jr=$.getDerivedStateFromProps;(Gt=typeof Jr=="function"||typeof ke.getSnapshotBeforeUpdate=="function")||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(Xe!==En||Lt!==ut)&&cb(N,ke,Q,ut),Do=!1,Lt=N.memoizedState,ke.state=Lt,Ih(N,Q,ke,te);var Cr=N.memoizedState;Xe!==En||Lt!==Cr||Ks.current||Do?(typeof Jr=="function"&&(t_(N,$,Jr,Q),Cr=N.memoizedState),(Dt=Do||pA(N,$,Dt,Q,Lt,Cr,ut)||!1)?(Gt||typeof ke.UNSAFE_componentWillUpdate!="function"&&typeof ke.componentWillUpdate!="function"||(typeof ke.componentWillUpdate=="function"&&ke.componentWillUpdate(Q,Cr,ut),typeof ke.UNSAFE_componentWillUpdate=="function"&&ke.UNSAFE_componentWillUpdate(Q,Cr,ut)),typeof ke.componentDidUpdate=="function"&&(N.flags|=4),typeof ke.getSnapshotBeforeUpdate=="function"&&(N.flags|=1024)):(typeof ke.componentDidUpdate!="function"||Xe===D.memoizedProps&&Lt===D.memoizedState||(N.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||Xe===D.memoizedProps&&Lt===D.memoizedState||(N.flags|=1024),N.memoizedProps=Q,N.memoizedState=Cr),ke.props=Q,ke.state=Cr,ke.context=ut,Q=Dt):(typeof ke.componentDidUpdate!="function"||Xe===D.memoizedProps&&Lt===D.memoizedState||(N.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||Xe===D.memoizedProps&&Lt===D.memoizedState||(N.flags|=1024),Q=!1)}return as(D,N,$,Q,oe,te)}function as(D,N,$,Q,te,oe){jr(D,N);var ke=(N.flags&128)!==0;if(!Q&&!ke)return te&&Nx(N,$,!1),kc(D,N,oe);Q=N.stateNode,Uy.current=N;var Xe=ke&&typeof $.getDerivedStateFromError!="function"?null:Q.render();return N.flags|=1,D!==null&&ke?(N.child=Qf(N,D.child,null,oe),N.child=Qf(N,null,Xe,oe)):Ca(D,N,Xe,oe),N.memoizedState=Q.state,te&&Nx(N,$,!0),N.child}function zh(D){var N=D.stateNode;N.pendingContext?GD(D,N.pendingContext,N.pendingContext!==N.context):N.context&&GD(D,N.context,!1),eb(D,N.containerInfo)}function ld(D,N,$,Q,te){return Kf(),Fx(te),N.flags|=256,Ca(D,N,$,Q),N.child}var ss={dehydrated:null,treeContext:null,retryLane:0};function og(D){return{baseLanes:D,cachePool:null,transitions:null}}function n_(D,N,$){var Q=N.pendingProps,te=Di.current,oe=!1,ke=(N.flags&128)!==0,Xe;if((Xe=ke)||(Xe=D!==null&&D.memoizedState===null?!1:(te&2)!==0),Xe?(oe=!0,N.flags&=-129):(D===null||D.memoizedState!==null)&&(te|=1),Bn(Di,te&1),D===null)return Ix(N),D=N.memoizedState,D!==null&&(D=D.dehydrated,D!==null)?((N.mode&1)===0?N.lanes=1:Mt(D)?N.lanes=8:N.lanes=1073741824,null):(ke=Q.children,D=Q.fallback,oe?(Q=N.mode,oe=N.child,ke={mode:"hidden",children:ke},(Q&1)===0&&oe!==null?(oe.childLanes=0,oe.pendingProps=ke):oe=_g(ke,Q,0,null),D=qa(D,Q,$,null),oe.return=N,D.return=N,oe.sibling=D,N.child=oe,N.child.memoizedState=og($),N.memoizedState=ss,D):db(N,ke));if(te=D.memoizedState,te!==null&&(Xe=te.dehydrated,Xe!==null))return vA(D,N,ke,Q,Xe,te,$);if(oe){oe=Q.fallback,ke=N.mode,te=D.child,Xe=te.sibling;var ut={mode:"hidden",children:Q.children};return(ke&1)===0&&N.child!==te?(Q=N.child,Q.childLanes=0,Q.pendingProps=ut,N.deletions=null):(Q=Kh(te,ut),Q.subtreeFlags=te.subtreeFlags&14680064),Xe!==null?oe=Kh(Xe,oe):(oe=qa(oe,ke,$,null),oe.flags|=2),oe.return=N,Q.return=N,Q.sibling=oe,N.child=Q,Q=oe,oe=N.child,ke=D.child.memoizedState,ke=ke===null?og($):{baseLanes:ke.baseLanes|$,cachePool:null,transitions:ke.transitions},oe.memoizedState=ke,oe.childLanes=D.childLanes&~$,N.memoizedState=ss,Q}return oe=D.child,D=oe.sibling,Q=Kh(oe,{mode:"visible",children:Q.children}),(N.mode&1)===0&&(Q.lanes=$),Q.return=N,Q.sibling=null,D!==null&&($=N.deletions,$===null?(N.deletions=[D],N.flags|=16):$.push(D)),N.child=Q,N.memoizedState=null,Q}function db(D,N){return N=_g({mode:"visible",children:N},D.mode,0,null),N.return=D,D.child=N}function cd(D,N,$,Q){return Q!==null&&Fx(Q),Qf(N,D.child,null,$),D=db(N,N.pendingProps.children),D.flags|=2,N.memoizedState=null,D}function vA(D,N,$,Q,te,oe,ke){if($)return N.flags&256?(N.flags&=-257,Q=Uh(Error(o(422))),cd(D,N,ke,Q)):N.memoizedState!==null?(N.child=D.child,N.flags|=128,null):(oe=Q.fallback,te=N.mode,Q=_g({mode:"visible",children:Q.children},te,0,null),oe=qa(oe,te,ke,null),oe.flags|=2,Q.return=N,oe.return=N,Q.sibling=oe,N.child=Q,(N.mode&1)!==0&&Qf(N,D.child,null,ke),N.child.memoizedState=og(ke),N.memoizedState=ss,oe);if((N.mode&1)===0)return cd(D,N,ke,null);if(Mt(te))return Q=Bt(te).digest,oe=Error(o(419)),Q=Uh(oe,Q,void 0),cd(D,N,ke,Q);if($=(ke&D.childLanes)!==0,oa||$){if(Q=$r,Q!==null){switch(ke&-ke){case 4:te=2;break;case 16:te=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:te=32;break;case 536870912:te=268435456;break;default:te=0}te=(te&(Q.suspendedLanes|ke))!==0?0:te,te!==0&&te!==oe.retryLane&&(oe.retryLane=te,ju(D,te),us(Q,D,te,-1))}return wg(),Q=Uh(Error(o(421))),cd(D,N,ke,Q)}return an(te)?(N.flags|=128,N.child=D.child,N=TA.bind(null,D),Rt(te,N),null):(D=oe.treeContext,Ee&&(Ds=fr(te),Wa=N,si=!0,Wu=null,Ay=!1,D!==null&&(Ts[Eo++]=Qs,Ts[Eo++]=Bu,Ts[Eo++]=aa,Qs=D.id,Bu=D.overflow,aa=N)),N=db(N,Q.children),N.flags|=4096,N)}function Pl(D,N,$){D.lanes|=N;var Q=D.alternate;Q!==null&&(Q.lanes|=N),Zf(D.return,N,$)}function ug(D,N,$,Q,te){var oe=D.memoizedState;oe===null?D.memoizedState={isBackwards:N,rendering:null,renderingStartTime:0,last:Q,tail:$,tailMode:te}:(oe.isBackwards=N,oe.rendering=null,oe.renderingStartTime=0,oe.last=Q,oe.tail=$,oe.tailMode=te)}function pb(D,N,$){var Q=N.pendingProps,te=Q.revealOrder,oe=Q.tail;if(Ca(D,N,Q.children,$),Q=Di.current,(Q&2)!==0)Q=Q&1|2,N.flags|=128;else{if(D!==null&&(D.flags&128)!==0)e:for(D=N.child;D!==null;){if(D.tag===13)D.memoizedState!==null&&Pl(D,$,N);else if(D.tag===19)Pl(D,$,N);else if(D.child!==null){D.child.return=D,D=D.child;continue}if(D===N)break e;for(;D.sibling===null;){if(D.return===null||D.return===N)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}Q&=1}if(Bn(Di,Q),(N.mode&1)===0)N.memoizedState=null;else switch(te){case"forwards":for($=N.child,te=null;$!==null;)D=$.alternate,D!==null&&tb(D)===null&&(te=$),$=$.sibling;$=te,$===null?(te=N.child,N.child=null):(te=$.sibling,$.sibling=null),ug(N,!1,te,$,oe);break;case"backwards":for($=null,te=N.child,N.child=null;te!==null;){if(D=te.alternate,D!==null&&tb(D)===null){N.child=te;break}D=te.sibling,te.sibling=$,$=te,te=D}ug(N,!0,$,null,oe);break;case"together":ug(N,!1,null,null,void 0);break;default:N.memoizedState=null}return N.child}function By(D,N){(N.mode&1)===0&&D!==null&&(D.alternate=null,N.alternate=null,N.flags|=2)}function kc(D,N,$){if(D!==null&&(N.dependencies=D.dependencies),Oc|=N.lanes,($&N.childLanes)===0)return null;if(D!==null&&N.child!==D.child)throw Error(o(153));if(N.child!==null){for(D=N.child,$=Kh(D,D.pendingProps),N.child=$,$.return=N;D.sibling!==null;)D=D.sibling,$=$.sibling=Kh(D,D.pendingProps),$.return=N;$.sibling=null}return N.child}function Wh(D,N,$){switch(N.tag){case 3:zh(N),Kf();break;case 5:Bx(N);break;case 1:xa(N.type)&&Vp(N);break;case 4:eb(N,N.stateNode.containerInfo);break;case 10:oA(N,N.type._context,N.memoizedProps.value);break;case 13:var Q=N.memoizedState;if(Q!==null)return Q.dehydrated!==null?(Bn(Di,Di.current&1),N.flags|=128,null):($&N.child.childLanes)!==0?n_(D,N,$):(Bn(Di,Di.current&1),D=kc(D,N,$),D!==null?D.sibling:null);Bn(Di,Di.current&1);break;case 19:if(Q=($&N.childLanes)!==0,(D.flags&128)!==0){if(Q)return pb(D,N,$);N.flags|=128}var te=N.memoizedState;if(te!==null&&(te.rendering=null,te.tail=null,te.lastEffect=null),Bn(Di,Di.current),Q)break;return null;case 22:case 23:return N.lanes=0,Qr(D,N,$)}return kc(D,N,$)}function As(D){D.flags|=4}function hd(D,N){if(D!==null&&D.child===N.child)return!0;if((N.flags&16)!==0)return!1;for(D=N.child;D!==null;){if((D.flags&12854)!==0||(D.subtreeFlags&12854)!==0)return!1;D=D.sibling}return!0}var jh,$h,ks,Ns;if(ge)jh=function(D,N){for(var $=N.child;$!==null;){if($.tag===5||$.tag===6)q(D,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===N)break;for(;$.sibling===null;){if($.return===null||$.return===N)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},$h=function(){},ks=function(D,N,$,Q,te){if(D=D.memoizedProps,D!==Q){var oe=N.stateNode,ke=ru(nu.current);$=K(oe,$,D,Q,te,ke),(N.updateQueue=$)&&As(N)}},Ns=function(D,N,$,Q){$!==Q&&As(N)};else if(Ce){jh=function(D,N,$,Q){for(var te=N.child;te!==null;){if(te.tag===5){var oe=te.stateNode;$&&Q&&(oe=Ge(oe,te.type,te.memoizedProps,te)),q(D,oe)}else if(te.tag===6)oe=te.stateNode,$&&Q&&(oe=nt(oe,te.memoizedProps,te)),q(D,oe);else if(te.tag!==4){if(te.tag===22&&te.memoizedState!==null)oe=te.child,oe!==null&&(oe.return=te),jh(D,te,!0,!0);else if(te.child!==null){te.child.return=te,te=te.child;continue}}if(te===N)break;for(;te.sibling===null;){if(te.return===null||te.return===N)return;te=te.return}te.sibling.return=te.return,te=te.sibling}};var qh=function(D,N,$,Q){for(var te=N.child;te!==null;){if(te.tag===5){var oe=te.stateNode;$&&Q&&(oe=Ge(oe,te.type,te.memoizedProps,te)),Nt(D,oe)}else if(te.tag===6)oe=te.stateNode,$&&Q&&(oe=nt(oe,te.memoizedProps,te)),Nt(D,oe);else if(te.tag!==4){if(te.tag===22&&te.memoizedState!==null)oe=te.child,oe!==null&&(oe.return=te),qh(D,te,!0,!0);else if(te.child!==null){te.child.return=te,te=te.child;continue}}if(te===N)break;for(;te.sibling===null;){if(te.return===null||te.return===N)return;te=te.return}te.sibling.return=te.return,te=te.sibling}};$h=function(D,N){var $=N.stateNode;if(!hd(D,N)){D=$.containerInfo;var Q=et(D);qh(Q,N,!1,!1),$.pendingChildren=Q,As(N),pn(D,Q)}},ks=function(D,N,$,Q,te){var oe=D.stateNode,ke=D.memoizedProps;if((D=hd(D,N))&&ke===Q)N.stateNode=oe;else{var Xe=N.stateNode,ut=ru(nu.current),Dt=null;ke!==Q&&(Dt=K(Xe,$,ke,Q,te,ut)),D&&Dt===null?N.stateNode=oe:(oe=Ue(oe,Dt,$,ke,Q,N,D,Xe),H(oe,$,Q,te,ut)&&As(N),N.stateNode=oe,D?As(N):jh(oe,N,!1,!1))}},Ns=function(D,N,$,Q){$!==Q?(D=ru(Ph.current),$=ru(nu.current),N.stateNode=J(Q,D,$,N),As(N)):N.stateNode=D.stateNode}}else $h=function(){},ks=function(){},Ns=function(){};function No(D,N){if(!si)switch(D.tailMode){case"hidden":N=D.tail;for(var $=null;N!==null;)N.alternate!==null&&($=N),N=N.sibling;$===null?D.tail=null:$.sibling=null;break;case"collapsed":$=D.tail;for(var Q=null;$!==null;)$.alternate!==null&&(Q=$),$=$.sibling;Q===null?N||D.tail===null?D.tail=null:D.tail.sibling=null:Q.sibling=null}}function vi(D){var N=D.alternate!==null&&D.alternate.child===D.child,$=0,Q=0;if(N)for(var te=D.child;te!==null;)$|=te.lanes|te.childLanes,Q|=te.subtreeFlags&14680064,Q|=te.flags&14680064,te.return=D,te=te.sibling;else for(te=D.child;te!==null;)$|=te.lanes|te.childLanes,Q|=te.subtreeFlags,Q|=te.flags,te.return=D,te=te.sibling;return D.subtreeFlags|=Q,D.childLanes=$,N}function fd(D,N,$){var Q=N.pendingProps;switch(Dy(N),N.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(N),null;case 1:return xa(N.type)&&Gf(),vi(N),null;case 3:return $=N.stateNode,Jf(),Ir(Ks),Ir(is),jx(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(D===null||D.child===null)&&(X1(N)?As(N):D===null||D.memoizedState.isDehydrated&&(N.flags&256)===0||(N.flags|=1024,Wu!==null&&(Tb(Wu),Wu=null))),$h(D,N),vi(N),null;case 5:zx(N),$=ru(Ph.current);var te=N.type;if(D!==null&&N.stateNode!=null)ks(D,N,te,Q,$),D.ref!==N.ref&&(N.flags|=512,N.flags|=2097152);else{if(!Q){if(N.stateNode===null)throw Error(o(166));return vi(N),null}if(D=ru(nu.current),X1(N)){if(!Ee)throw Error(o(175));D=Wr(N.stateNode,N.type,N.memoizedProps,$,D,N,!Ay),N.updateQueue=D,D!==null&&As(N)}else{var oe=M(te,Q,$,D,N);jh(oe,N,!1,!1),N.stateNode=oe,H(oe,te,Q,$,D)&&As(N)}N.ref!==null&&(N.flags|=512,N.flags|=2097152)}return vi(N),null;case 6:if(D&&N.stateNode!=null)Ns(D,N,D.memoizedProps,Q);else{if(typeof Q!="string"&&N.stateNode===null)throw Error(o(166));if(D=ru(Ph.current),$=ru(nu.current),X1(N)){if(!Ee)throw Error(o(176));if(D=N.stateNode,$=N.memoizedProps,(Q=Ei(D,$,N,!Ay))&&(te=Wa,te!==null))switch(te.tag){case 3:Hf(te.stateNode.containerInfo,D,$,(te.mode&1)!==0);break;case 5:_r(te.type,te.memoizedProps,te.stateNode,D,$,(te.mode&1)!==0)}Q&&As(N)}else N.stateNode=J(Q,D,$,N)}return vi(N),null;case 13:if(Ir(Di),Q=N.memoizedState,D===null||D.memoizedState!==null&&D.memoizedState.dehydrated!==null){if(si&&Ds!==null&&(N.mode&1)!==0&&(N.flags&128)===0)rA(),Kf(),N.flags|=98560,te=!1;else if(te=X1(N),Q!==null&&Q.dehydrated!==null){if(D===null){if(!te)throw Error(o(318));if(!Ee)throw Error(o(344));if(te=N.memoizedState,te=te!==null?te.dehydrated:null,!te)throw Error(o(317));ai(te,N)}else Kf(),(N.flags&128)===0&&(N.memoizedState=null),N.flags|=4;vi(N),te=!1}else Wu!==null&&(Tb(Wu),Wu=null),te=!0;if(!te)return N.flags&65536?N:null}return(N.flags&128)!==0?(N.lanes=$,N):($=Q!==null,$!==(D!==null&&D.memoizedState!==null)&&$&&(N.child.flags|=8192,(N.mode&1)!==0&&(D===null||(Di.current&1)!==0?wi===0&&(wi=3):wg())),N.updateQueue!==null&&(N.flags|=4),vi(N),null);case 4:return Jf(),$h(D,N),D===null&&de(N.stateNode.containerInfo),vi(N),null;case 10:return ky(N.type._context),vi(N),null;case 17:return xa(N.type)&&Gf(),vi(N),null;case 19:if(Ir(Di),te=N.memoizedState,te===null)return vi(N),null;if(Q=(N.flags&128)!==0,oe=te.rendering,oe===null)if(Q)No(te,!1);else{if(wi!==0||D!==null&&(D.flags&128)!==0)for(D=N.child;D!==null;){if(oe=tb(D),oe!==null){for(N.flags|=128,No(te,!1),D=oe.updateQueue,D!==null&&(N.updateQueue=D,N.flags|=4),N.subtreeFlags=0,D=$,$=N.child;$!==null;)Q=$,te=D,Q.flags&=14680066,oe=Q.alternate,oe===null?(Q.childLanes=0,Q.lanes=te,Q.child=null,Q.subtreeFlags=0,Q.memoizedProps=null,Q.memoizedState=null,Q.updateQueue=null,Q.dependencies=null,Q.stateNode=null):(Q.childLanes=oe.childLanes,Q.lanes=oe.lanes,Q.child=oe.child,Q.subtreeFlags=0,Q.deletions=null,Q.memoizedProps=oe.memoizedProps,Q.memoizedState=oe.memoizedState,Q.updateQueue=oe.updateQueue,Q.type=oe.type,te=oe.dependencies,Q.dependencies=te===null?null:{lanes:te.lanes,firstContext:te.firstContext}),$=$.sibling;return Bn(Di,Di.current&1|2),N.child}D=D.sibling}te.tail!==null&&_a()>Hy&&(N.flags|=128,Q=!0,No(te,!1),N.lanes=4194304)}else{if(!Q)if(D=tb(oe),D!==null){if(N.flags|=128,Q=!0,D=D.updateQueue,D!==null&&(N.updateQueue=D,N.flags|=4),No(te,!0),te.tail===null&&te.tailMode==="hidden"&&!oe.alternate&&!si)return vi(N),null}else 2*_a()-te.renderingStartTime>Hy&&$!==1073741824&&(N.flags|=128,Q=!0,No(te,!1),N.lanes=4194304);te.isBackwards?(oe.sibling=N.child,N.child=oe):(D=te.last,D!==null?D.sibling=oe:N.child=oe,te.last=oe)}return te.tail!==null?(N=te.tail,te.rendering=N,te.tail=N.sibling,te.renderingStartTime=_a(),N.sibling=null,D=Di.current,Bn(Di,Q?D&1|2:D&1),N):(vi(N),null);case 22:case 23:return Db(),$=N.memoizedState!==null,D!==null&&D.memoizedState!==null!==$&&(N.flags|=8192),$&&(N.mode&1)!==0?(ua&1073741824)!==0&&(vi(N),ge&&N.subtreeFlags&6&&(N.flags|=8192)):vi(N),null;case 24:return null;case 25:return null}throw Error(o(156,N.tag))}function bA(D,N){switch(Dy(N),N.tag){case 1:return xa(N.type)&&Gf(),D=N.flags,D&65536?(N.flags=D&-65537|128,N):null;case 3:return Jf(),Ir(Ks),Ir(is),jx(),D=N.flags,(D&65536)!==0&&(D&128)===0?(N.flags=D&-65537|128,N):null;case 5:return zx(N),null;case 13:if(Ir(Di),D=N.memoizedState,D!==null&&D.dehydrated!==null){if(N.alternate===null)throw Error(o(340));Kf()}return D=N.flags,D&65536?(N.flags=D&-65537|128,N):null;case 19:return Ir(Di),null;case 4:return Jf(),null;case 10:return ky(N.type._context),null;case 22:case 23:return Db(),null;case 24:return null;default:return null}}var lg=!1,Ea=!1,Oo=typeof WeakSet=="function"?WeakSet:Set,It=null;function Sr(D,N){var $=D.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(Q){ui(D,N,Q)}else $.current=null}function Ro(D,N,$){try{$()}catch(Q){ui(D,N,Q)}}var r_=!1;function wA(D,N){for(z(D.containerInfo),It=N;It!==null;)if(D=It,N=D.child,(D.subtreeFlags&1028)!==0&&N!==null)N.return=D,It=N;else for(;It!==null;){D=It;try{var $=D.alternate;if((D.flags&1024)!==0)switch(D.tag){case 0:case 11:case 15:break;case 1:if($!==null){var Q=$.memoizedProps,te=$.memoizedState,oe=D.stateNode,ke=oe.getSnapshotBeforeUpdate(D.elementType===D.type?Q:ko(D.type,Q),te);oe.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:ge&&De(D.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Xe){ui(D,D.return,Xe)}if(N=D.sibling,N!==null){N.return=D.return,It=N;break}It=D.return}return $=r_,r_=!1,$}function dd(D,N,$){var Q=N.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var te=Q=Q.next;do{if((te.tag&D)===D){var oe=te.destroy;te.destroy=void 0,oe!==void 0&&Ro(N,$,oe)}te=te.next}while(te!==Q)}}function cg(D,N){if(N=N.updateQueue,N=N!==null?N.lastEffect:null,N!==null){var $=N=N.next;do{if(($.tag&D)===D){var Q=$.create;$.destroy=Q()}$=$.next}while($!==N)}}function gb(D){var N=D.ref;if(N!==null){var $=D.stateNode;switch(D.tag){case 5:D=B($);break;default:D=$}typeof N=="function"?N(D):N.current=D}}function zy(D){var N=D.alternate;N!==null&&(D.alternate=null,zy(N)),D.child=null,D.deletions=null,D.sibling=null,D.tag===5&&(N=D.stateNode,N!==null&&le(N)),D.stateNode=null,D.return=null,D.dependencies=null,D.memoizedProps=null,D.memoizedState=null,D.pendingProps=null,D.stateNode=null,D.updateQueue=null}function i_(D){return D.tag===5||D.tag===3||D.tag===4}function pd(D){e:for(;;){for(;D.sibling===null;){if(D.return===null||i_(D.return))return null;D=D.return}for(D.sibling.return=D.return,D=D.sibling;D.tag!==5&&D.tag!==6&&D.tag!==18;){if(D.flags&2||D.child===null||D.tag===4)continue e;D.child.return=D,D=D.child}if(!(D.flags&2))return D.stateNode}}function Wy(D,N,$){var Q=D.tag;if(Q===5||Q===6)D=D.stateNode,N?Et($,D,N):yt($,D);else if(Q!==4&&(D=D.child,D!==null))for(Wy(D,N,$),D=D.sibling;D!==null;)Wy(D,N,$),D=D.sibling}function a_(D,N,$){var Q=D.tag;if(Q===5||Q===6)D=D.stateNode,N?ft($,D,N):at($,D);else if(Q!==4&&(D=D.child,D!==null))for(a_(D,N,$),D=D.sibling;D!==null;)a_(D,N,$),D=D.sibling}var qi=null,Js=!1;function $u(D,N,$){for($=$.child;$!==null;)mb(D,N,$),$=$.sibling}function mb(D,N,$){if(Ys&&typeof Ys.onCommitFiberUnmount=="function")try{Ys.onCommitFiberUnmount(Nh,$)}catch{}switch($.tag){case 5:Ea||Sr($,N);case 6:if(ge){var Q=qi,te=Js;qi=null,$u(D,N,$),qi=Q,Js=te,qi!==null&&(Js?Ot(qi,$.stateNode):xt(qi,$.stateNode))}else $u(D,N,$);break;case 18:ge&&qi!==null&&(Js?So(qi,$.stateNode):Jo(qi,$.stateNode));break;case 4:ge?(Q=qi,te=Js,qi=$.stateNode.containerInfo,Js=!0,$u(D,N,$),qi=Q,Js=te):(Ce&&(Q=$.stateNode.containerInfo,te=et(Q),Be(Q,te)),$u(D,N,$));break;case 0:case 11:case 14:case 15:if(!Ea&&(Q=$.updateQueue,Q!==null&&(Q=Q.lastEffect,Q!==null))){te=Q=Q.next;do{var oe=te,ke=oe.destroy;oe=oe.tag,ke!==void 0&&((oe&2)!==0||(oe&4)!==0)&&Ro($,N,ke),te=te.next}while(te!==Q)}$u(D,N,$);break;case 1:if(!Ea&&(Sr($,N),Q=$.stateNode,typeof Q.componentWillUnmount=="function"))try{Q.props=$.memoizedProps,Q.state=$.memoizedState,Q.componentWillUnmount()}catch(Xe){ui($,N,Xe)}$u(D,N,$);break;case 21:$u(D,N,$);break;case 22:$.mode&1?(Ea=(Q=Ea)||$.memoizedState!==null,$u(D,N,$),Ea=Q):$u(D,N,$);break;default:$u(D,N,$)}}function gd(D){var N=D.updateQueue;if(N!==null){D.updateQueue=null;var $=D.stateNode;$===null&&($=D.stateNode=new Oo),N.forEach(function(Q){var te=P4.bind(null,D,Q);$.has(Q)||($.add(Q),Q.then(te,te))})}}function au(D,N){var $=N.deletions;if($!==null)for(var Q=0;Q<$.length;Q++){var te=$[Q];try{var oe=D,ke=N;if(ge){var Xe=ke;e:for(;Xe!==null;){switch(Xe.tag){case 5:qi=Xe.stateNode,Js=!1;break e;case 3:qi=Xe.stateNode.containerInfo,Js=!0;break e;case 4:qi=Xe.stateNode.containerInfo,Js=!0;break e}Xe=Xe.return}if(qi===null)throw Error(o(160));mb(oe,ke,te),qi=null,Js=!1}else mb(oe,ke,te);var ut=te.alternate;ut!==null&&(ut.return=null),te.return=null}catch(Dt){ui(te,N,Dt)}}if(N.subtreeFlags&12854)for(N=N.child;N!==null;)jy(N,D),N=N.sibling}function jy(D,N){var $=D.alternate,Q=D.flags;switch(D.tag){case 0:case 11:case 14:case 15:if(au(N,D),Io(D),Q&4){try{dd(3,D,D.return),cg(3,D)}catch(Lt){ui(D,D.return,Lt)}try{dd(5,D,D.return)}catch(Lt){ui(D,D.return,Lt)}}break;case 1:au(N,D),Io(D),Q&512&&$!==null&&Sr($,$.return);break;case 5:if(au(N,D),Io(D),Q&512&&$!==null&&Sr($,$.return),ge){if(D.flags&32){var te=D.stateNode;try{dn(te)}catch(Lt){ui(D,D.return,Lt)}}if(Q&4&&(te=D.stateNode,te!=null)){var oe=D.memoizedProps;if($=$!==null?$.memoizedProps:oe,Q=D.type,N=D.updateQueue,D.updateQueue=null,N!==null)try{tt(te,N,Q,$,oe,D)}catch(Lt){ui(D,D.return,Lt)}}}break;case 6:if(au(N,D),Io(D),Q&4&&ge){if(D.stateNode===null)throw Error(o(162));te=D.stateNode,oe=D.memoizedProps,$=$!==null?$.memoizedProps:oe;try{pt(te,$,oe)}catch(Lt){ui(D,D.return,Lt)}}break;case 3:if(au(N,D),Io(D),Q&4){if(ge&&Ee&&$!==null&&$.memoizedState.isDehydrated)try{xc(N.containerInfo)}catch(Lt){ui(D,D.return,Lt)}if(Ce){te=N.containerInfo,oe=N.pendingChildren;try{Be(te,oe)}catch(Lt){ui(D,D.return,Lt)}}}break;case 4:if(au(N,D),Io(D),Q&4&&Ce){oe=D.stateNode,te=oe.containerInfo,oe=oe.pendingChildren;try{Be(te,oe)}catch(Lt){ui(D,D.return,Lt)}}break;case 13:au(N,D),Io(D),te=D.child,te.flags&8192&&(oe=te.memoizedState!==null,te.stateNode.isHidden=oe,!oe||te.alternate!==null&&te.alternate.memoizedState!==null||(mg=_a())),Q&4&&gd(D);break;case 22:var ke=$!==null&&$.memoizedState!==null;if(D.mode&1?(Ea=($=Ea)||ke,au(N,D),Ea=$):au(N,D),Io(D),Q&8192){if($=D.memoizedState!==null,(D.stateNode.isHidden=$)&&!ke&&(D.mode&1)!==0)for(It=D,Q=D.child;Q!==null;){for(N=It=Q;It!==null;){ke=It;var Xe=ke.child;switch(ke.tag){case 0:case 11:case 14:case 15:dd(4,ke,ke.return);break;case 1:Sr(ke,ke.return);var ut=ke.stateNode;if(typeof ut.componentWillUnmount=="function"){var Dt=ke,Gt=ke.return;try{var En=Dt;ut.props=En.memoizedProps,ut.state=En.memoizedState,ut.componentWillUnmount()}catch(Lt){ui(Dt,Gt,Lt)}}break;case 5:Sr(ke,ke.return);break;case 22:if(ke.memoizedState!==null){bb(N);continue}}Xe!==null?(Xe.return=ke,It=Xe):bb(N)}Q=Q.sibling}if(ge){e:if(Q=null,ge)for(N=D;;){if(N.tag===5){if(Q===null){Q=N;try{te=N.stateNode,$?Kr(te):Mu(N.stateNode,N.memoizedProps)}catch(Lt){ui(D,D.return,Lt)}}}else if(N.tag===6){if(Q===null)try{oe=N.stateNode,$?Ba(oe):xe(oe,N.memoizedProps)}catch(Lt){ui(D,D.return,Lt)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===D)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===D)break e;for(;N.sibling===null;){if(N.return===null||N.return===D)break e;Q===N&&(Q=null),N=N.return}Q===N&&(Q=null),N.sibling.return=N.return,N=N.sibling}}}break;case 19:au(N,D),Io(D),Q&4&&gd(D);break;case 21:break;default:au(N,D),Io(D)}}function Io(D){var N=D.flags;if(N&2){try{if(ge){e:{for(var $=D.return;$!==null;){if(i_($)){var Q=$;break e}$=$.return}throw Error(o(160))}switch(Q.tag){case 5:var te=Q.stateNode;Q.flags&32&&(dn(te),Q.flags&=-33);var oe=pd(D);a_(D,oe,te);break;case 3:case 4:var ke=Q.stateNode.containerInfo,Xe=pd(D);Wy(D,Xe,ke);break;default:throw Error(o(161))}}}catch(ut){ui(D,D.return,ut)}D.flags&=-3}N&4096&&(D.flags&=-4097)}function hg(D,N,$){It=D,yb(D)}function yb(D,N,$){for(var Q=(D.mode&1)!==0;It!==null;){var te=It,oe=te.child;if(te.tag===22&&Q){var ke=te.memoizedState!==null||lg;if(!ke){var Xe=te.alternate,ut=Xe!==null&&Xe.memoizedState!==null||Ea;Xe=lg;var Dt=Ea;if(lg=ke,(Ea=ut)&&!Dt)for(It=te;It!==null;)ke=It,ut=ke.child,ke.tag===22&&ke.memoizedState!==null?wb(te):ut!==null?(ut.return=ke,It=ut):wb(te);for(;oe!==null;)It=oe,yb(oe),oe=oe.sibling;It=te,lg=Xe,Ea=Dt}vb(D)}else(te.subtreeFlags&8772)!==0&&oe!==null?(oe.return=te,It=oe):vb(D)}}function vb(D){for(;It!==null;){var N=It;if((N.flags&8772)!==0){var $=N.alternate;try{if((N.flags&8772)!==0)switch(N.tag){case 0:case 11:case 15:Ea||cg(5,N);break;case 1:var Q=N.stateNode;if(N.flags&4&&!Ea)if($===null)Q.componentDidMount();else{var te=N.elementType===N.type?$.memoizedProps:ko(N.type,$.memoizedProps);Q.componentDidUpdate(te,$.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var oe=N.updateQueue;oe!==null&&lA(N,oe,Q);break;case 3:var ke=N.updateQueue;if(ke!==null){if($=null,N.child!==null)switch(N.child.tag){case 5:$=B(N.child.stateNode);break;case 1:$=N.child.stateNode}lA(N,ke,$)}break;case 5:var Xe=N.stateNode;$===null&&N.flags&4&&Le(Xe,N.type,N.memoizedProps,N);break;case 6:break;case 4:break;case 12:break;case 13:if(Ee&&N.memoizedState===null){var ut=N.alternate;if(ut!==null){var Dt=ut.memoizedState;if(Dt!==null){var Gt=Dt.dehydrated;Gt!==null&&Th(Gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Ea||N.flags&512&&gb(N)}catch(En){ui(N,N.return,En)}}if(N===D){It=null;break}if($=N.sibling,$!==null){$.return=N.return,It=$;break}It=N.return}}function bb(D){for(;It!==null;){var N=It;if(N===D){It=null;break}var $=N.sibling;if($!==null){$.return=N.return,It=$;break}It=N.return}}function wb(D){for(;It!==null;){var N=It;try{switch(N.tag){case 0:case 11:case 15:var $=N.return;try{cg(4,N)}catch(ut){ui(N,$,ut)}break;case 1:var Q=N.stateNode;if(typeof Q.componentDidMount=="function"){var te=N.return;try{Q.componentDidMount()}catch(ut){ui(N,te,ut)}}var oe=N.return;try{gb(N)}catch(ut){ui(N,oe,ut)}break;case 5:var ke=N.return;try{gb(N)}catch(ut){ui(N,ke,ut)}}}catch(ut){ui(N,N.return,ut)}if(N===D){It=null;break}var Xe=N.sibling;if(Xe!==null){Xe.return=N.return,It=Xe;break}It=N.return}}var Nc=0,Os=1,Ll=2,fg=3,$y=4;if(typeof Symbol=="function"&&Symbol.for){var Fo=Symbol.for;Nc=Fo("selector.component"),Os=Fo("selector.has_pseudo_class"),Ll=Fo("selector.role"),fg=Fo("selector.test_id"),$y=Fo("selector.text")}function Ml(D){var N=G(D);if(N!=null){if(typeof N.memoizedProps["data-testname"]!="string")throw Error(o(364));return N}if(D=Ae(D),D===null)throw Error(o(362));return D.stateNode.current}function qy(D,N){switch(N.$$typeof){case Nc:if(D.type===N.value)return!0;break;case Os:e:{N=N.value,D=[D,0];for(var $=0;$<D.length;){var Q=D[$++],te=D[$++],oe=N[te];if(Q.tag!==5||!Se(Q)){for(;oe!=null&&qy(Q,oe);)te++,oe=N[te];if(te===N.length){N=!0;break e}else for(Q=Q.child;Q!==null;)D.push(Q,te),Q=Q.sibling}}N=!1}return N;case Ll:if(D.tag===5&&Re(D.stateNode,N.value))return!0;break;case $y:if((D.tag===5||D.tag===6)&&(D=me(D),D!==null&&0<=D.indexOf(N.value)))return!0;break;case fg:if(D.tag===5&&(D=D.memoizedProps["data-testname"],typeof D=="string"&&D.toLowerCase()===N.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function xb(D){switch(D.$$typeof){case Nc:return"<"+(E(D.value)||"Unknown")+">";case Os:return":has("+(xb(D)||"")+")";case Ll:return'[role="'+D.value+'"]';case $y:return'"'+D.value+'"';case fg:return'[data-testname="'+D.value+'"]';default:throw Error(o(365))}}function Ul(D,N){var $=[];D=[D,0];for(var Q=0;Q<D.length;){var te=D[Q++],oe=D[Q++],ke=N[oe];if(te.tag!==5||!Se(te)){for(;ke!=null&&qy(te,ke);)oe++,ke=N[oe];if(oe===N.length)$.push(te);else for(te=te.child;te!==null;)D.push(te,oe),te=te.sibling}}return $}function Bl(D,N){if(!Ne)throw Error(o(363));D=Ml(D),D=Ul(D,N),N=[],D=Array.from(D);for(var $=0;$<D.length;){var Q=D[$++];if(Q.tag===5)Se(Q)||N.push(Q.stateNode);else for(Q=Q.child;Q!==null;)D.push(Q),Q=Q.sibling}return N}var _b=Math.ceil,Vy=s.ReactCurrentDispatcher,dg=s.ReactCurrentOwner,Ri=s.ReactCurrentBatchConfig,On=0,$r=null,bi=null,Vi=0,ua=0,Vh=mi(0),wi=0,pg=null,Oc=0,Zr=0,gg=0,md=null,os=null,mg=0,Hy=1/0,Rs=null;function Fr(){Hy=_a()+500}var Ii=!1,Yi=null,qu=null,Hh=!1,su=null,Sb=0,Qi=0,Gy=null,yg=-1,vg=0;function oi(){return(On&6)!==0?_a():yg!==-1?yg:yg=_a()}function la(D){return(D.mode&1)===0?1:(On&2)!==0&&Vi!==0?Vi&-Vi:R4.transition!==null?(vg===0&&(vg=W1()),vg):(D=Gn,D!==0?D:ye())}function us(D,N,$,Q){if(50<Qi)throw Qi=0,Gy=null,Error(o(185));tu(D,$,Q),((On&2)===0||D!==$r)&&(D===$r&&((On&2)===0&&(Zr|=$),wi===4&&Rc(D,Vi)),ls(D,Q),$===1&&On===0&&(N.mode&1)===0&&(Fr(),Qp&&za()))}function ls(D,N){var $=D.callbackNode;YD(D,N);var Q=Gp(D,D===$r?Vi:0);if(Q===0)$!==null&&QD($),D.callbackNode=null,D.callbackPriority=0;else if(N=Q&-Q,D.callbackPriority!==N){if($!=null&&QD($),N===1)D.tag===0?JD(s_.bind(null,D)):H1(s_.bind(null,D)),ne?fe(function(){(On&6)===0&&za()}):Ol(j1,za),$=null;else{switch(Kp(Q)){case 1:$=j1;break;case 4:$=$1;break;case 16:$=q1;break;case 536870912:$=O4;break;default:$=q1}$=d_($,Cb.bind(null,D))}D.callbackPriority=N,D.callbackNode=$}}function Cb(D,N){if(yg=-1,vg=0,(On&6)!==0)throw Error(o(327));var $=D.callbackNode;if(Ic()&&D.callbackNode!==$)return null;var Q=Gp(D,D===$r?Vi:0);if(Q===0)return null;if((Q&30)!==0||(Q&D.expiredLanes)!==0||N)N=yd(D,Q);else{N=Q;var te=On;On|=2;var oe=u_();($r!==D||Vi!==N)&&(Rs=null,Fr(),Gh(D,N));do try{l_();break}catch(Xe){bg(D,Xe)}while(!0);Lx(),Vy.current=oe,On=te,bi!==null?N=0:($r=null,Vi=0,N=wi)}if(N!==0){if(N===2&&(te=z1(D),te!==0&&(Q=te,N=Eb(D,te))),N===1)throw $=pg,Gh(D,0),Rc(D,Q),ls(D,_a()),$;if(N===6)Rc(D,Q);else{if(te=D.current.alternate,(Q&30)===0&&!xA(te)&&(N=yd(D,Q),N===2&&(oe=z1(D),oe!==0&&(Q=oe,N=Eb(D,oe))),N===1))throw $=pg,Gh(D,0),Rc(D,Q),ls(D,_a()),$;switch(D.finishedWork=te,D.finishedLanes=Q,N){case 0:case 1:throw Error(o(345));case 2:Xh(D,os,Rs);break;case 3:if(Rc(D,Q),(Q&130023424)===Q&&(N=mg+500-_a(),10<N)){if(Gp(D,0)!==0)break;if(te=D.suspendedLanes,(te&Q)!==Q){oi(),D.pingedLanes|=D.suspendedLanes&te;break}D.timeoutHandle=X(Xh.bind(null,D,os,Rs),N);break}Xh(D,os,Rs);break;case 4:if(Rc(D,Q),(Q&4194240)===Q)break;for(N=D.eventTimes,te=-1;0<Q;){var ke=31-Co(Q);oe=1<<ke,ke=N[ke],ke>te&&(te=ke),Q&=~oe}if(Q=te,Q=_a()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*_b(Q/1960))-Q,10<Q){D.timeoutHandle=X(Xh.bind(null,D,os,Rs),Q);break}Xh(D,os,Rs);break;case 5:Xh(D,os,Rs);break;default:throw Error(o(329))}}}return ls(D,_a()),D.callbackNode===$?Cb.bind(null,D):null}function Eb(D,N){var $=md;return D.current.memoizedState.isDehydrated&&(Gh(D,N).flags|=256),D=yd(D,N),D!==2&&(N=os,os=$,N!==null&&Tb(N)),D}function Tb(D){os===null?os=D:os.push.apply(os,D)}function xA(D){for(var N=D;;){if(N.flags&16384){var $=N.updateQueue;if($!==null&&($=$.stores,$!==null))for(var Q=0;Q<$.length;Q++){var te=$[Q],oe=te.getSnapshot;te=te.value;try{if(!Uu(oe(),te))return!1}catch{return!1}}}if($=N.child,N.subtreeFlags&16384&&$!==null)$.return=N,N=$;else{if(N===D)break;for(;N.sibling===null;){if(N.return===null||N.return===D)return!0;N=N.return}N.sibling.return=N.return,N=N.sibling}}return!0}function Rc(D,N){for(N&=~gg,N&=~Zr,D.suspendedLanes|=N,D.pingedLanes&=~N,D=D.expirationTimes;0<N;){var $=31-Co(N),Q=1<<$;D[$]=-1,N&=~Q}}function s_(D){if((On&6)!==0)throw Error(o(327));Ic();var N=Gp(D,0);if((N&1)===0)return ls(D,_a()),null;var $=yd(D,N);if(D.tag!==0&&$===2){var Q=z1(D);Q!==0&&(N=Q,$=Eb(D,Q))}if($===1)throw $=pg,Gh(D,0),Rc(D,N),ls(D,_a()),$;if($===6)throw Error(o(345));return D.finishedWork=D.current.alternate,D.finishedLanes=N,Xh(D,os,Rs),ls(D,_a()),null}function o_(D){su!==null&&su.tag===0&&(On&6)===0&&Ic();var N=On;On|=1;var $=Ri.transition,Q=Gn;try{if(Ri.transition=null,Gn=1,D)return D()}finally{Gn=Q,Ri.transition=$,On=N,(On&6)===0&&za()}}function Db(){ua=Vh.current,Ir(Vh)}function Gh(D,N){D.finishedWork=null,D.finishedLanes=0;var $=D.timeoutHandle;if($!==ie&&(D.timeoutHandle=ie,ae($)),bi!==null)for($=bi.return;$!==null;){var Q=$;switch(Dy(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&Gf();break;case 3:Jf(),Ir(Ks),Ir(is),jx();break;case 5:zx(Q);break;case 4:Jf();break;case 13:Ir(Di);break;case 19:Ir(Di);break;case 10:ky(Q.type._context);break;case 22:case 23:Db()}$=$.return}if($r=D,bi=D=Kh(D.current,null),Vi=ua=N,wi=0,pg=null,gg=Zr=Oc=0,os=md=null,Rh!==null){for(N=0;N<Rh.length;N++)if($=Rh[N],Q=$.interleaved,Q!==null){$.interleaved=null;var te=Q.next,oe=$.pending;if(oe!==null){var ke=oe.next;oe.next=te,Q.next=ke}$.pending=Q}Rh=null}return D}function bg(D,N){do{var $=bi;try{if(Lx(),Zs.current=sd,rg){for(var Q=yi.memoizedState;Q!==null;){var te=Q.queue;te!==null&&(te.pending=null),Q=Q.next}rg=!1}if(Lh=0,sa=Ki=yi=null,Oy=!1,Ry=0,dg.current=null,$===null||$.return===null){wi=1,pg=N,bi=null;break}e:{var oe=D,ke=$.return,Xe=$,ut=N;if(N=Vi,Xe.flags|=32768,ut!==null&&typeof ut=="object"&&typeof ut.then=="function"){var Dt=ut,Gt=Xe,En=Gt.tag;if((Gt.mode&1)===0&&(En===0||En===11||En===15)){var Lt=Gt.alternate;Lt?(Gt.updateQueue=Lt.updateQueue,Gt.memoizedState=Lt.memoizedState,Gt.lanes=Lt.lanes):(Gt.updateQueue=null,Gt.memoizedState=null)}var Jr=yA(ke);if(Jr!==null){Jr.flags&=-257,Bh(Jr,ke,Xe,oe,N),Jr.mode&1&&mA(oe,Dt,N),N=Jr,ut=Dt;var Cr=N.updateQueue;if(Cr===null){var Is=new Set;Is.add(ut),N.updateQueue=Is}else Cr.add(ut);break e}else{if((N&1)===0){mA(oe,Dt,N),wg();break e}ut=Error(o(426))}}else if(si&&Xe.mode&1){var zl=yA(ke);if(zl!==null){(zl.flags&65536)===0&&(zl.flags|=256),Bh(zl,ke,Xe,oe,N),Fx(od(ut,Xe));break e}}oe=ut=od(ut,Xe),wi!==4&&(wi=2),md===null?md=[oe]:md.push(oe),oe=ke;do{switch(oe.tag){case 3:oe.flags|=65536,N&=-N,oe.lanes|=N;var it=Il(oe,ut,N);tg(oe,it);break e;case 1:Xe=ut;var Ye=oe.type,lt=oe.stateNode;if((oe.flags&128)===0&&(typeof Ye.getDerivedStateFromError=="function"||lt!==null&&typeof lt.componentDidCatch=="function"&&(qu===null||!qu.has(lt)))){oe.flags|=65536,N&=-N,oe.lanes|=N;var Ut=hb(oe,Xe,N);tg(oe,Ut);break e}}oe=oe.return}while(oe!==null)}h_($)}catch(fn){N=fn,bi===$&&$!==null&&(bi=$=$.return);continue}break}while(!0)}function u_(){var D=Vy.current;return Vy.current=sd,D===null?sd:D}function wg(){(wi===0||wi===3||wi===2)&&(wi=4),$r===null||(Oc&268435455)===0&&(Zr&268435455)===0||Rc($r,Vi)}function yd(D,N){var $=On;On|=2;var Q=u_();($r!==D||Vi!==N)&&(Rs=null,Gh(D,N));do try{_A();break}catch(te){bg(D,te)}while(!0);if(Lx(),On=$,Vy.current=Q,bi!==null)throw Error(o(261));return $r=null,Vi=0,wi}function _A(){for(;bi!==null;)c_(bi)}function l_(){for(;bi!==null&&!ZD();)c_(bi)}function c_(D){var N=DA(D.alternate,D,ua);D.memoizedProps=D.pendingProps,N===null?h_(D):bi=N,dg.current=null}function h_(D){var N=D;do{var $=N.alternate;if(D=N.return,(N.flags&32768)===0){if($=fd($,N,ua),$!==null){bi=$;return}}else{if($=bA($,N),$!==null){$.flags&=32767,bi=$;return}if(D!==null)D.flags|=32768,D.subtreeFlags=0,D.deletions=null;else{wi=6,bi=null;return}}if(N=N.sibling,N!==null){bi=N;return}bi=N=D}while(N!==null);wi===0&&(wi=5)}function Xh(D,N,$){var Q=Gn,te=Ri.transition;try{Ri.transition=null,Gn=1,SA(D,N,$,Q)}finally{Ri.transition=te,Gn=Q}return null}function SA(D,N,$,Q){do Ic();while(su!==null);if((On&6)!==0)throw Error(o(327));$=D.finishedWork;var te=D.finishedLanes;if($===null)return null;if(D.finishedWork=null,D.finishedLanes=0,$===D.current)throw Error(o(177));D.callbackNode=null,D.callbackPriority=0;var oe=$.lanes|$.childLanes;if(kh(D,oe),D===$r&&(bi=$r=null,Vi=0),($.subtreeFlags&2064)===0&&($.flags&2064)===0||Hh||(Hh=!0,d_(q1,function(){return Ic(),null})),oe=($.flags&15990)!==0,($.subtreeFlags&15990)!==0||oe){oe=Ri.transition,Ri.transition=null;var ke=Gn;Gn=1;var Xe=On;On|=4,dg.current=null,wA(D,$),jy($,D),j(D.containerInfo),D.current=$,hg($),Cy(),On=Xe,Gn=ke,Ri.transition=oe}else D.current=$;if(Hh&&(Hh=!1,su=D,Sb=te),oe=D.pendingLanes,oe===0&&(qu=null),Yp($.stateNode),ls(D,_a()),N!==null)for(Q=D.onRecoverableError,$=0;$<N.length;$++)te=N[$],Q(te.value,{componentStack:te.stack,digest:te.digest});if(Ii)throw Ii=!1,D=Yi,Yi=null,D;return(Sb&1)!==0&&D.tag!==0&&Ic(),oe=D.pendingLanes,(oe&1)!==0?D===Gy?Qi++:(Qi=0,Gy=D):Qi=0,za(),null}function Ic(){if(su!==null){var D=Kp(Sb),N=Ri.transition,$=Gn;try{if(Ri.transition=null,Gn=16>D?16:D,su===null)var Q=!1;else{if(D=su,su=null,Sb=0,(On&6)!==0)throw Error(o(331));var te=On;for(On|=4,It=D.current;It!==null;){var oe=It,ke=oe.child;if((It.flags&16)!==0){var Xe=oe.deletions;if(Xe!==null){for(var ut=0;ut<Xe.length;ut++){var Dt=Xe[ut];for(It=Dt;It!==null;){var Gt=It;switch(Gt.tag){case 0:case 11:case 15:dd(8,Gt,oe)}var En=Gt.child;if(En!==null)En.return=Gt,It=En;else for(;It!==null;){Gt=It;var Lt=Gt.sibling,Jr=Gt.return;if(zy(Gt),Gt===Dt){It=null;break}if(Lt!==null){Lt.return=Jr,It=Lt;break}It=Jr}}}var Cr=oe.alternate;if(Cr!==null){var Is=Cr.child;if(Is!==null){Cr.child=null;do{var zl=Is.sibling;Is.sibling=null,Is=zl}while(Is!==null)}}It=oe}}if((oe.subtreeFlags&2064)!==0&&ke!==null)ke.return=oe,It=ke;else e:for(;It!==null;){if(oe=It,(oe.flags&2048)!==0)switch(oe.tag){case 0:case 11:case 15:dd(9,oe,oe.return)}var it=oe.sibling;if(it!==null){it.return=oe.return,It=it;break e}It=oe.return}}var Ye=D.current;for(It=Ye;It!==null;){ke=It;var lt=ke.child;if((ke.subtreeFlags&2064)!==0&&lt!==null)lt.return=ke,It=lt;else e:for(ke=Ye;It!==null;){if(Xe=It,(Xe.flags&2048)!==0)try{switch(Xe.tag){case 0:case 11:case 15:cg(9,Xe)}}catch(fn){ui(Xe,Xe.return,fn)}if(Xe===ke){It=null;break e}var Ut=Xe.sibling;if(Ut!==null){Ut.return=Xe.return,It=Ut;break e}It=Xe.return}}if(On=te,za(),Ys&&typeof Ys.onPostCommitFiberRoot=="function")try{Ys.onPostCommitFiberRoot(Nh,D)}catch{}Q=!0}return Q}finally{Gn=$,Ri.transition=N}}return!1}function f_(D,N,$){N=od($,N),N=Il(D,N,1),D=Tc(D,N,1),N=oi(),D!==null&&(tu(D,1,N),ls(D,N))}function ui(D,N,$){if(D.tag===3)f_(D,D,$);else for(;N!==null;){if(N.tag===3){f_(N,D,$);break}else if(N.tag===1){var Q=N.stateNode;if(typeof N.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(qu===null||!qu.has(Q))){D=od($,D),D=hb(N,D,1),N=Tc(N,D,1),D=oi(),N!==null&&(tu(N,1,D),ls(N,D));break}}N=N.return}}function CA(D,N,$){var Q=D.pingCache;Q!==null&&Q.delete(N),N=oi(),D.pingedLanes|=D.suspendedLanes&$,$r===D&&(Vi&$)===$&&(wi===4||wi===3&&(Vi&130023424)===Vi&&500>_a()-mg?Gh(D,0):gg|=$),ls(D,N)}function EA(D,N){N===0&&((D.mode&1)===0?N=1:(N=Sy,Sy<<=1,(Sy&130023424)===0&&(Sy=4194304)));var $=oi();D=ju(D,N),D!==null&&(tu(D,N,$),ls(D,$))}function TA(D){var N=D.memoizedState,$=0;N!==null&&($=N.retryLane),EA(D,$)}function P4(D,N){var $=0;switch(D.tag){case 13:var Q=D.stateNode,te=D.memoizedState;te!==null&&($=te.retryLane);break;case 19:Q=D.stateNode;break;default:throw Error(o(314))}Q!==null&&Q.delete(N),EA(D,$)}var DA;DA=function(D,N,$){if(D!==null)if(D.memoizedProps!==N.pendingProps||Ks.current)oa=!0;else{if((D.lanes&$)===0&&(N.flags&128)===0)return oa=!1,Wh(D,N,$);oa=(D.flags&131072)!==0}else oa=!1,si&&(N.flags&1048576)!==0&&eA(N,Xf,N.index);switch(N.lanes=0,N.tag){case 2:var Q=N.type;By(D,N),D=N.pendingProps;var te=_c(N,is.current);eg(N,$),te=Iy(null,N,Q,D,te,$);var oe=nb();return N.flags|=1,typeof te=="object"&&te!==null&&typeof te.render=="function"&&te.$$typeof===void 0?(N.tag=1,N.memoizedState=null,N.updateQueue=null,xa(Q)?(oe=!0,Vp(N)):oe=!1,N.memoizedState=te.state!==null&&te.state!==void 0?te.state:null,Ux(N),te.updater=Ly,N.stateNode=te,te._reactInternals=N,Rl(N,Q,D,$),N=as(null,N,Q,!0,oe,$)):(N.tag=0,si&&oe&&Ty(N),Ca(null,N,te,$),N=N.child),N;case 16:Q=N.elementType;e:{switch(By(D,N),D=N.pendingProps,te=Q._init,Q=te(Q._payload),N.type=Q,te=N.tag=L4(Q),D=ko(Q,D),te){case 0:N=Fl(null,N,Q,D,$);break e;case 1:N=$a(null,N,Q,D,$);break e;case 11:N=fb(null,N,Q,D,$);break e;case 14:N=ud(null,N,Q,ko(Q.type,D),$);break e}throw Error(o(306,Q,""))}return N;case 0:return Q=N.type,te=N.pendingProps,te=N.elementType===Q?te:ko(Q,te),Fl(D,N,Q,te,$);case 1:return Q=N.type,te=N.pendingProps,te=N.elementType===Q?te:ko(Q,te),$a(D,N,Q,te,$);case 3:e:{if(zh(N),D===null)throw Error(o(387));Q=N.pendingProps,oe=N.memoizedState,te=oe.element,uA(D,N),Ih(N,Q,null,$);var ke=N.memoizedState;if(Q=ke.element,Ee&&oe.isDehydrated)if(oe={element:Q,isDehydrated:!1,cache:ke.cache,pendingSuspenseBoundaries:ke.pendingSuspenseBoundaries,transitions:ke.transitions},N.updateQueue.baseState=oe,N.memoizedState=oe,N.flags&256){te=od(Error(o(423)),N),N=ld(D,N,Q,$,te);break e}else if(Q!==te){te=od(Error(o(424)),N),N=ld(D,N,Q,$,te);break e}else for(Ee&&(Ds=$n(N.stateNode.containerInfo),Wa=N,si=!0,Wu=null,Ay=!1),$=sA(N,null,Q,$),N.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(Kf(),Q===te){N=kc(D,N,$);break e}Ca(D,N,Q,$)}N=N.child}return N;case 5:return Bx(N),D===null&&Ix(N),Q=N.type,te=N.pendingProps,oe=D!==null?D.memoizedProps:null,ke=te.children,Z(Q,te)?ke=null:oe!==null&&Z(Q,oe)&&(N.flags|=32),jr(D,N),Ca(D,N,ke,$),N.child;case 6:return D===null&&Ix(N),null;case 13:return n_(D,N,$);case 4:return eb(N,N.stateNode.containerInfo),Q=N.pendingProps,D===null?N.child=Qf(N,null,Q,$):Ca(D,N,Q,$),N.child;case 11:return Q=N.type,te=N.pendingProps,te=N.elementType===Q?te:ko(Q,te),fb(D,N,Q,te,$);case 7:return Ca(D,N,N.pendingProps,$),N.child;case 8:return Ca(D,N,N.pendingProps.children,$),N.child;case 12:return Ca(D,N,N.pendingProps.children,$),N.child;case 10:e:{if(Q=N.type._context,te=N.pendingProps,oe=N.memoizedProps,ke=te.value,oA(N,Q,ke),oe!==null)if(Uu(oe.value,ke)){if(oe.children===te.children&&!Ks.current){N=kc(D,N,$);break e}}else for(oe=N.child,oe!==null&&(oe.return=N);oe!==null;){var Xe=oe.dependencies;if(Xe!==null){ke=oe.child;for(var ut=Xe.firstContext;ut!==null;){if(ut.context===Q){if(oe.tag===1){ut=Ec(-1,$&-$),ut.tag=2;var Dt=oe.updateQueue;if(Dt!==null){Dt=Dt.shared;var Gt=Dt.pending;Gt===null?ut.next=ut:(ut.next=Gt.next,Gt.next=ut),Dt.pending=ut}}oe.lanes|=$,ut=oe.alternate,ut!==null&&(ut.lanes|=$),Zf(oe.return,$,N),Xe.lanes|=$;break}ut=ut.next}}else if(oe.tag===10)ke=oe.type===N.type?null:oe.child;else if(oe.tag===18){if(ke=oe.return,ke===null)throw Error(o(341));ke.lanes|=$,Xe=ke.alternate,Xe!==null&&(Xe.lanes|=$),Zf(ke,$,N),ke=oe.sibling}else ke=oe.child;if(ke!==null)ke.return=oe;else for(ke=oe;ke!==null;){if(ke===N){ke=null;break}if(oe=ke.sibling,oe!==null){oe.return=ke.return,ke=oe;break}ke=ke.return}oe=ke}Ca(D,N,te.children,$),N=N.child}return N;case 9:return te=N.type,Q=N.pendingProps.children,eg(N,$),te=To(te),Q=Q(te),N.flags|=1,Ca(D,N,Q,$),N.child;case 14:return Q=N.type,te=ko(Q,N.pendingProps),te=ko(Q.type,te),ud(D,N,Q,te,$);case 15:return Ac(D,N,N.type,N.pendingProps,$);case 17:return Q=N.type,te=N.pendingProps,te=N.elementType===Q?te:ko(Q,te),By(D,N),N.tag=1,xa(Q)?(D=!0,Vp(N)):D=!1,eg(N,$),gA(N,Q,te),Rl(N,Q,te,$),as(null,N,Q,!0,D,$);case 19:return pb(D,N,$);case 22:return Qr(D,N,$)}throw Error(o(156,N.tag))};function d_(D,N){return Ol(D,N)}function AA(D,N,$,Q){this.tag=D,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=N,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(D,N,$,Q){return new AA(D,N,$,Q)}function xg(D){return D=D.prototype,!(!D||!D.isReactComponent)}function L4(D){if(typeof D=="function")return xg(D)?1:0;if(D!=null){if(D=D.$$typeof,D===m)return 11;if(D===v)return 14}return 2}function Kh(D,N){var $=D.alternate;return $===null?($=Po(D.tag,N,D.key,D.mode),$.elementType=D.elementType,$.type=D.type,$.stateNode=D.stateNode,$.alternate=D,D.alternate=$):($.pendingProps=N,$.type=D.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=D.flags&14680064,$.childLanes=D.childLanes,$.lanes=D.lanes,$.child=D.child,$.memoizedProps=D.memoizedProps,$.memoizedState=D.memoizedState,$.updateQueue=D.updateQueue,N=D.dependencies,$.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext},$.sibling=D.sibling,$.index=D.index,$.ref=D.ref,$}function Ab(D,N,$,Q,te,oe){var ke=2;if(Q=D,typeof D=="function")xg(D)&&(ke=1);else if(typeof D=="string")ke=5;else e:switch(D){case h:return qa($.children,te,oe,N);case c:ke=8,te|=8;break;case f:return D=Po(12,$,N,te|2),D.elementType=f,D.lanes=oe,D;case g:return D=Po(13,$,N,te),D.elementType=g,D.lanes=oe,D;case y:return D=Po(19,$,N,te),D.elementType=y,D.lanes=oe,D;case w:return _g($,te,oe,N);default:if(typeof D=="object"&&D!==null)switch(D.$$typeof){case d:ke=10;break e;case p:ke=9;break e;case m:ke=11;break e;case v:ke=14;break e;case b:ke=16,Q=null;break e}throw Error(o(130,D==null?D:typeof D,""))}return N=Po(ke,$,N,te),N.elementType=D,N.type=Q,N.lanes=oe,N}function qa(D,N,$,Q){return D=Po(7,D,Q,N),D.lanes=$,D}function _g(D,N,$,Q){return D=Po(22,D,Q,N),D.elementType=w,D.lanes=$,D.stateNode={isHidden:!1},D}function Sg(D,N,$){return D=Po(6,D,null,N),D.lanes=$,D}function kb(D,N,$){return N=Po(4,D.children!==null?D.children:[],D.key,N),N.lanes=$,N.stateNode={containerInfo:D.containerInfo,pendingChildren:null,implementation:D.implementation},N}function kA(D,N,$,Q,te){this.tag=N,this.containerInfo=D,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ie,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xp(0),this.expirationTimes=Xp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xp(0),this.identifierPrefix=Q,this.onRecoverableError=te,Ee&&(this.mutableSourceEagerHydrationData=null)}function p_(D,N,$,Q,te,oe,ke,Xe,ut){return D=new kA(D,N,$,Xe,ut),N===1?(N=1,oe===!0&&(N|=8)):N=0,oe=Po(3,null,null,N),D.current=oe,oe.stateNode=D,oe.memoizedState={element:Q,isDehydrated:$,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ux(oe),D}function Nb(D){if(!D)return Ah;D=D._reactInternals;e:{if(k(D)!==D||D.tag!==1)throw Error(o(170));var N=D;do{switch(N.tag){case 3:N=N.stateNode.context;break e;case 1:if(xa(N.type)){N=N.stateNode.__reactInternalMemoizedMergedChildContext;break e}}N=N.return}while(N!==null);throw Error(o(171))}if(D.tag===1){var $=D.type;if(xa($))return XD(D,$,N)}return N}function vd(D){var N=D._reactInternals;if(N===void 0)throw typeof D.render=="function"?Error(o(188)):(D=Object.keys(D).join(","),Error(o(268,D)));return D=F(N),D===null?null:D.stateNode}function Ob(D,N){if(D=D.memoizedState,D!==null&&D.dehydrated!==null){var $=D.retryLane;D.retryLane=$!==0&&$<N?$:N}}function Cg(D,N){Ob(D,N),(D=D.alternate)&&Ob(D,N)}function M4(D){return D=F(D),D===null?null:D.stateNode}function NA(){return null}return t.attemptContinuousHydration=function(D){if(D.tag===13){var N=ju(D,134217728);if(N!==null){var $=oi();us(N,D,134217728,$)}Cg(D,134217728)}},t.attemptDiscreteHydration=function(D){if(D.tag===13){var N=ju(D,1);if(N!==null){var $=oi();us(N,D,1,$)}Cg(D,1)}},t.attemptHydrationAtCurrentPriority=function(D){if(D.tag===13){var N=la(D),$=ju(D,N);if($!==null){var Q=oi();us($,D,N,Q)}Cg(D,N)}},t.attemptSynchronousHydration=function(D){switch(D.tag){case 3:var N=D.stateNode;if(N.current.memoizedState.isDehydrated){var $=Hp(N.pendingLanes);$!==0&&(Nl(N,$|1),ls(N,_a()),(On&6)===0&&(Fr(),za()))}break;case 13:o_(function(){var Q=ju(D,1);if(Q!==null){var te=oi();us(Q,D,1,te)}}),Cg(D,1)}},t.batchedUpdates=function(D,N){var $=On;On|=1;try{return D(N)}finally{On=$,On===0&&(Fr(),Qp&&za())}},t.createComponentSelector=function(D){return{$$typeof:Nc,value:D}},t.createContainer=function(D,N,$,Q,te,oe,ke){return p_(D,N,!1,null,$,Q,te,oe,ke)},t.createHasPseudoClassSelector=function(D){return{$$typeof:Os,value:D}},t.createHydrationContainer=function(D,N,$,Q,te,oe,ke,Xe,ut){return D=p_($,Q,!0,D,te,oe,ke,Xe,ut),D.context=Nb(null),$=D.current,Q=oi(),te=la($),oe=Ec(Q,te),oe.callback=N??null,Tc($,oe,te),D.current.lanes=te,tu(D,te,Q),ls(D,Q),D},t.createPortal=function(D,N,$){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:Q==null?null:""+Q,children:D,containerInfo:N,implementation:$}},t.createRoleSelector=function(D){return{$$typeof:Ll,value:D}},t.createTestNameSelector=function(D){return{$$typeof:fg,value:D}},t.createTextSelector=function(D){return{$$typeof:$y,value:D}},t.deferredUpdates=function(D){var N=Gn,$=Ri.transition;try{return Ri.transition=null,Gn=16,D()}finally{Gn=N,Ri.transition=$}},t.discreteUpdates=function(D,N,$,Q,te){var oe=Gn,ke=Ri.transition;try{return Ri.transition=null,Gn=1,D(N,$,Q,te)}finally{Gn=oe,Ri.transition=ke,On===0&&Fr()}},t.findAllNodes=Bl,t.findBoundingRects=function(D,N){if(!Ne)throw Error(o(363));N=Bl(D,N),D=[];for(var $=0;$<N.length;$++)D.push(ue(N[$]));for(N=D.length-1;0<N;N--){$=D[N];for(var Q=$.x,te=Q+$.width,oe=$.y,ke=oe+$.height,Xe=N-1;0<=Xe;Xe--)if(N!==Xe){var ut=D[Xe],Dt=ut.x,Gt=Dt+ut.width,En=ut.y,Lt=En+ut.height;if(Q>=Dt&&oe>=En&&te<=Gt&&ke<=Lt){D.splice(N,1);break}else if(Q!==Dt||$.width!==ut.width||Lt<oe||En>ke){if(!(oe!==En||$.height!==ut.height||Gt<Q||Dt>te)){Dt>Q&&(ut.width+=Dt-Q,ut.x=Q),Gt<te&&(ut.width=te-Dt),D.splice(N,1);break}}else{En>oe&&(ut.height+=En-oe,ut.y=oe),Lt<ke&&(ut.height=ke-En),D.splice(N,1);break}}}return D},t.findHostInstance=vd,t.findHostInstanceWithNoPortals=function(D){return D=O(D),D=D!==null?R(D):null,D===null?null:D.stateNode},t.findHostInstanceWithWarning=function(D){return vd(D)},t.flushControlled=function(D){var N=On;On|=1;var $=Ri.transition,Q=Gn;try{Ri.transition=null,Gn=1,D()}finally{Gn=Q,Ri.transition=$,On=N,On===0&&(Fr(),za())}},t.flushPassiveEffects=Ic,t.flushSync=o_,t.focusWithin=function(D,N){if(!Ne)throw Error(o(363));for(D=Ml(D),N=Ul(D,N),N=Array.from(N),D=0;D<N.length;){var $=N[D++];if(!Se($)){if($.tag===5&&je($.stateNode))return!0;for($=$.child;$!==null;)N.push($),$=$.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Gn},t.getFindAllNodesFailureDescription=function(D,N){if(!Ne)throw Error(o(363));var $=0,Q=[];D=[Ml(D),0];for(var te=0;te<D.length;){var oe=D[te++],ke=D[te++],Xe=N[ke];if((oe.tag!==5||!Se(oe))&&(qy(oe,Xe)&&(Q.push(xb(Xe)),ke++,ke>$&&($=ke)),ke<N.length))for(oe=oe.child;oe!==null;)D.push(oe,ke),oe=oe.sibling}if($<N.length){for(D=[];$<N.length;$++)D.push(xb(N[$]));return`findAllNodes was able to match part of the selector:
  `+(Q.join(" > ")+`

No matching component was found for:
  `)+D.join(" > ")}return null},t.getPublicRootInstance=function(D){if(D=D.current,!D.child)return null;switch(D.child.tag){case 5:return B(D.child.stateNode);default:return D.child.stateNode}},t.injectIntoDevTools=function(D){if(D={bundleType:D.bundleType,version:D.version,rendererPackageName:D.rendererPackageName,rendererConfig:D.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:M4,findFiberByHostInstance:D.findFiberByHostInstance||NA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")D=!1;else{var N=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(N.isDisabled||!N.supportsFiber)D=!0;else{try{Nh=N.inject(D),Ys=N}catch{}D=!!N.checkDCE}}return D},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(D,N,$,Q){if(!Ne)throw Error(o(363));D=Bl(D,N);var te=rt(D,$,Q).disconnect;return{disconnect:function(){te()}}},t.registerMutableSourceForHydration=function(D,N){var $=N._getVersion;$=$(N._source),D.mutableSourceEagerHydrationData==null?D.mutableSourceEagerHydrationData=[N,$]:D.mutableSourceEagerHydrationData.push(N,$)},t.runWithPriority=function(D,N){var $=Gn;try{return Gn=D,N()}finally{Gn=$}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(D,N,$,Q){var te=N.current,oe=oi(),ke=la(te);return $=Nb($),N.context===null?N.context=$:N.pendingContext=$,N=Ec(oe,ke),N.payload={element:D},Q=Q===void 0?null:Q,Q!==null&&(N.callback=Q),D=Tc(te,N,ke),D!==null&&(us(D,te,ke,oe),Ny(D,te,ke)),ke},t}),GM}var pJ;function FKe(){return pJ||(pJ=1,HM.exports=IKe()),HM.exports}var PKe=FKe();const LKe=Fp(PKe);var XM={exports:{}},Lg={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gJ;function MKe(){return gJ||(gJ=1,Lg.ConcurrentRoot=1,Lg.ContinuousEventPriority=4,Lg.DefaultEventPriority=16,Lg.DiscreteEventPriority=1,Lg.IdleEventPriority=536870912,Lg.LegacyRoot=0),Lg}var mJ;function UKe(){return mJ||(mJ=1,XM.exports=MKe()),XM.exports}var Dme=UKe(),BKe=Hn();const yJ={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let vJ=!1,bJ=!1;const dj=".react-konva-event",zKe=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,WKe=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,jKe={};function E4(n,e,t=jKe){if(!vJ&&"zIndex"in e&&(console.warn(WKe),vJ=!0),!bJ&&e.draggable){var r=e.x!==void 0||e.y!==void 0,i=e.onDragEnd||e.onDragMove;r&&!i&&(console.warn(zKe),bJ=!0)}for(var a in t)if(!yJ[a]){var o=a.slice(0,2)==="on",s=t[a]!==e[a];if(o&&s){var u=a.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),n.off(u,t[a])}var l=!e.hasOwnProperty(a);l&&n.setAttr(a,void 0)}var h=e._useStrictMode,c={},f=!1;const d={};for(var a in e)if(!yJ[a]){var o=a.slice(0,2)==="on",p=t[a]!==e[a];if(o&&p){var u=a.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),e[a]&&(d[u]=e[a])}!o&&(e[a]!==t[a]||h&&e[a]!==n.getAttr(a))&&(f=!0,c[a]=e[a])}f&&(n.setAttrs(c),wy(n));for(var u in d)n.on(u+dj,d[u])}function wy(n){if(!BKe.Konva.autoDrawEnabled){var e=n.getLayer()||n.getStage();e&&e.batchDraw()}}var KM=kB();const Ame={},$Ke={};EE.Node.prototype._applyProps=E4;function qKe(n,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}n.add(e),wy(n)}function VKe(n,e,t){let r=EE[n];r||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=EE.Group);const i={},a={};for(var o in e){var s=o.slice(0,2)==="on";s?a[o]=e[o]:i[o]=e[o]}const u=new r(i);return E4(u,a),u}function HKe(n,e,t){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function GKe(n,e,t){return!1}function XKe(n){return n}function KKe(){return null}function YKe(){return null}function QKe(n,e,t,r){return $Ke}function ZKe(){}function JKe(n){}function eYe(n,e){return!1}function tYe(){return Ame}function nYe(){return Ame}const rYe=setTimeout,iYe=clearTimeout,aYe=-1;function sYe(n,e){return!1}const oYe=!1,uYe=!0,lYe=!0;function cYe(n,e){e.parent===n?e.moveToTop():n.add(e),wy(n)}function hYe(n,e){e.parent===n?e.moveToTop():n.add(e),wy(n)}function kme(n,e,t){e._remove(),n.add(e),e.setZIndex(t.getZIndex()),wy(n)}function fYe(n,e,t){kme(n,e,t)}function dYe(n,e){e.destroy(),e.off(dj),wy(n)}function pYe(n,e){e.destroy(),e.off(dj),wy(n)}function gYe(n,e,t){console.error(`Text components are not yet supported in ReactKonva. You text is: "${t}"`)}function mYe(n,e,t){}function yYe(n,e,t,r,i){E4(n,i,r)}function vYe(n){n.hide(),wy(n)}function bYe(n){}function wYe(n,e){(e.visible==null||e.visible)&&n.show()}function xYe(n,e){}function _Ye(n){}function SYe(){}const CYe=()=>Dme.DefaultEventPriority,EYe=Object.freeze(Object.defineProperty({__proto__:null,appendChild:cYe,appendChildToContainer:hYe,appendInitialChild:qKe,cancelTimeout:iYe,clearContainer:_Ye,commitMount:mYe,commitTextUpdate:gYe,commitUpdate:yYe,createInstance:VKe,createTextInstance:HKe,detachDeletedInstance:SYe,finalizeInitialChildren:GKe,getChildHostContext:nYe,getCurrentEventPriority:CYe,getPublicInstance:XKe,getRootHostContext:tYe,hideInstance:vYe,hideTextInstance:bYe,idlePriority:KM.unstable_IdlePriority,insertBefore:kme,insertInContainerBefore:fYe,isPrimaryRenderer:oYe,noTimeout:aYe,now:KM.unstable_now,prepareForCommit:KKe,preparePortalMount:YKe,prepareUpdate:QKe,removeChild:dYe,removeChildFromContainer:pYe,resetAfterCommit:ZKe,resetTextContent:JKe,run:KM.unstable_runWithPriority,scheduleTimeout:rYe,shouldDeprioritizeSubtree:eYe,shouldSetTextContent:sYe,supportsMutation:lYe,unhideInstance:wYe,unhideTextInstance:xYe,warnsIfNotActing:uYe},Symbol.toStringTag,{value:"Module"}));var TYe=Object.defineProperty,DYe=Object.defineProperties,AYe=Object.getOwnPropertyDescriptors,wJ=Object.getOwnPropertySymbols,kYe=Object.prototype.hasOwnProperty,NYe=Object.prototype.propertyIsEnumerable,xJ=(n,e,t)=>e in n?TYe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_J=(n,e)=>{for(var t in e||(e={}))kYe.call(e,t)&&xJ(n,t,e[t]);if(wJ)for(var t of wJ(e))NYe.call(e,t)&&xJ(n,t,e[t]);return n},OYe=(n,e)=>DYe(n,AYe(e)),SJ,CJ;typeof window<"u"&&((SJ=window.document)!=null&&SJ.createElement||((CJ=window.navigator)==null?void 0:CJ.product)==="ReactNative")?pe.useLayoutEffect:pe.useEffect;function Nme(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=Nme(r,e,t);if(i)return i;r=r.sibling}}function Ome(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const EJ=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=EJ;return}return EJ.apply(this,arguments)};const pj=Ome(pe.createContext(null));class Rme extends pe.Component{render(){return pe.createElement(pj.Provider,{value:this._reactInternals},this.props.children)}}function RYe(){const n=pe.useContext(pj);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=pe.useId();return pe.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=Nme(r,!1,a=>{let o=a.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function IYe(){const n=RYe(),[e]=pe.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==pj&&!e.has(i)&&e.set(i,pe.useContext(Ome(i)))}t=t.return}return e}function FYe(){const n=IYe();return pe.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>pe.createElement(e,null,pe.createElement(t.Provider,OYe(_J({},r),{value:n.get(t)}))),e=>pe.createElement(Rme,_J({},e))),[n])}function PYe(n){const e=ki.useRef({});return ki.useLayoutEffect(()=>{e.current=n}),ki.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const LYe=n=>{const e=ki.useRef(),t=ki.useRef(),r=ki.useRef(),i=PYe(n),a=FYe(),o=s=>{const{forwardedRef:u}=n;u&&(typeof u=="function"?u(s):u.current=s)};return ki.useLayoutEffect(()=>(t.current=new EE.Stage({width:n.width,height:n.height,container:e.current}),o(t.current),r.current=_C.createContainer(t.current,Dme.LegacyRoot,!1,null),_C.updateContainer(ki.createElement(a,{},n.children),r.current),()=>{EE.isBrowser&&(o(null),_C.updateContainer(null,r.current,null),t.current.destroy())}),[]),ki.useLayoutEffect(()=>{o(t.current),E4(t.current,n,i),_C.updateContainer(ki.createElement(a,{},n.children),r.current,null)}),ki.createElement("div",{ref:e,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},MYe="Layer",UYe="Image",BYe="Text",_C=LKe(EYe);_C.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:ki.version,rendererPackageName:"react-konva"});const zYe=ki.forwardRef((n,e)=>ki.createElement(Rme,{},ki.createElement(LYe,{...n,forwardedRef:e}))),WYe=({templateId:n})=>{const[e,t]=pe.useState(null);pe.useEffect(()=>{(async()=>{try{const o=await hr.get(`http://localhost:5077/api/templates/${n}`);t(o.data)}catch{console.log("    ")}})()},[n]);const[r,i]=pe.useState(null);return pe.useEffect(()=>{if(e){const a=new window.Image;a.src=e.imageUrl,a.onload=()=>{i(a)}}},[e]),Ie.jsx("div",{children:e?Ie.jsx(zYe,{width:600,height:400,children:Ie.jsxs(MYe,{children:[Ie.jsx(UYe,{image:r,width:600,height:400}),e.fields.map((a,o)=>Ie.jsx(BYe,{text:a.fieldName,x:a.x,y:a.y,fontSize:20,fontFamily:"Arial",fill:"black"},o))]})}):Ie.jsx("p",{children:" ..."})})},Ime=pe.createContext(()=>{});function jYe(){const[n,e]=pe.useState(null),[t,r]=pe.useState([]);return Ie.jsxs(xl,{className:"p-4",children:[Ie.jsx("h1",{className:"text-2xl font-bold mb-4",children:" "}),Ie.jsx(e3e,{onFileUploaded:r}),!n&&Ie.jsx(Ime.Provider,{value:e,children:Ie.jsx(Fme,{})}),Ie.jsx(Hae,{backend:tse,children:Ie.jsxs(j0,{container:!0,spacing:2,sx:{direction:"rtl"},children:[Ie.jsx(j0,{item:!0,xs:4,children:Ie.jsx(xl,{children:Ie.jsx(TNe,{paragraphs:t,setParagraphs:r})})}),Ie.jsx(j0,{item:!0,xs:8,children:n&&Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(VXe,{templateImage:n.name}),Ie.jsx("hr",{}),Ie.jsx("hr",{}),Ie.jsx("hr",{}),Ie.jsx("hr",{}),Ie.jsx(WYe,{templateId:n.id})]})})]})})]})}const $Ye=({category:n})=>{const[e,t]=pe.useState([]),r=pe.useContext(Ime);pe.useEffect(()=>{n?(async()=>{try{console.log(n),console.log("fetchTemplates");const o=await hr.get("http://localhost:5077/api/TextUpload/user/1",{headers:{Authorization:`Bearer ${r1}`}});console.log("res.data"),console.log(o.data),t(o.data),console.log("templates"),console.log(e)}catch(o){console.error("Error fetching templates:",o)}})():(console.log("*******************---------------------"),console.log(n))},[n]),pe.useEffect(()=>{},[e]);const i=a=>{console.log("TemplateSelect bsfore"),r(a),console.log("TemplateSelect after")};return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(xl,{sx:{fontSize:"50px",fontWeight:"bold"},children:"choose a template"}),Ie.jsx(j0,{container:!0,spacing:3,justifyContent:"center",sx:{mt:3},children:e.length>0?e.map((a,o)=>Ie.jsx(j0,{item:!0,xs:12,sm:6,md:4,display:"flex",justifyContent:"center",children:Ie.jsx(Go,{onClick:()=>i(a),children:Ie.jsx(vEe,{fileName:a.name})})},o)):Ie.jsx(t1,{variant:"h6",align:"center",sx:{width:"100%",mt:3},children:"  "})})]})},Fme=()=>{const[n,e]=pe.useState(""),[t,r]=pe.useState(!0),[i,a]=pe.useState([]),o=s=>{if(s.preventDefault(),n===""){alert(" ");return}console.log("Selected category:",n),r(!1)};return pe.useEffect(()=>{(async()=>{try{const u=await hr.get("http://localhost:5077/api/Category");a(u.data)}catch(u){console.error("  :",u),alert("   ")}})()},[]),Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(uD,{open:t,children:Ie.jsx(xl,{sx:UR,style:{direction:"rtl"},children:Ie.jsxs("form",{onSubmit:o,children:[Ie.jsxs(c9,{fullWidth:!0,margin:"normal",sx:{direction:"rtl",textAlign:"right"},children:[Ie.jsx(f9,{children:" "}),Ie.jsxs(OR,{value:n||"",onChange:s=>{const u=s.target.value;console.log("Category selected:",u),e(u)},style:{textAlign:"right"},children:[Ie.jsx(A6,{value:"",disabled:!0,children:" "}),i.map((s,u)=>Ie.jsx(A6,{value:s.id,children:s.name},u))]})]}),Ie.jsx(Go,{sx:{backgroundColor:"rosybrown"},variant:"contained",fullWidth:!0,type:"submit",children:""})]})})}),!t&&Ie.jsx($Ye,{category:n})]})};var YM={exports:{}},QM={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TJ;function qYe(){if(TJ)return QM;TJ=1;var n=ox();function e(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,i=n.useRef,a=n.useEffect,o=n.useMemo,s=n.useDebugValue;return QM.useSyncExternalStoreWithSelector=function(u,l,h,c,f){var d=i(null);if(d.current===null){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=o(function(){function g(x){if(!y){if(y=!0,v=x,x=c(x),f!==void 0&&p.hasValue){var S=p.value;if(f(S,x))return b=S}return b=x}if(S=b,t(v,x))return S;var E=c(x);return f!==void 0&&f(S,E)?(v=x,S):(v=x,b=E)}var y=!1,v,b,w=h===void 0?null:h;return[function(){return g(l())},w===null?void 0:function(){return g(w())}]},[l,h,c,f]);var m=r(u,d[0],d[1]);return a(function(){p.hasValue=!0,p.value=m},[m]),s(m),m},QM}var DJ;function VYe(){return DJ||(DJ=1,YM.exports=qYe()),YM.exports}var HYe=VYe();function GYe(n){n()}function XYe(){let n=null,e=null;return{clear(){n=null,e=null},notify(){GYe(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var AJ={notify(){},get:()=>[]};function KYe(n,e){let t,r=AJ,i=0,a=!1;function o(m){h();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),c())}}function s(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return a}function h(){i++,t||(t=n.subscribe(u),r=XYe())}function c(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=AJ)}function f(){a||(a=!0,h())}function d(){a&&(a=!1,c())}const p={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:u,isSubscribed:l,trySubscribe:f,tryUnsubscribe:d,getListeners:()=>r};return p}var YYe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QYe=YYe(),ZYe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",JYe=ZYe(),eQe=()=>QYe||JYe?pe.useLayoutEffect:pe.useEffect,tQe=eQe(),ZM=Symbol.for("react-redux-context"),JM=typeof globalThis<"u"?globalThis:{};function nQe(){if(!pe.createContext)return{};const n=JM[ZM]??(JM[ZM]=new Map);let e=n.get(pe.createContext);return e||(e=pe.createContext(null),n.set(pe.createContext,e)),e}var ty=nQe();function rQe(n){const{children:e,context:t,serverState:r,store:i}=n,a=pe.useMemo(()=>{const u=KYe(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=pe.useMemo(()=>i.getState(),[i]);tQe(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const s=t||ty;return pe.createElement(s.Provider,{value:a},e)}var iQe=rQe;function gj(n=ty){return function(){return pe.useContext(n)}}var Pme=gj();function Lme(n=ty){const e=n===ty?Pme:gj(n),t=()=>{const{store:r}=e();return r};return Object.assign(t,{withTypes:()=>t}),t}var aQe=Lme();function sQe(n=ty){const e=n===ty?aQe:Lme(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var oQe=sQe(),uQe=(n,e)=>n===e;function lQe(n=ty){const e=n===ty?Pme:gj(n),t=(r,i={})=>{const{equalityFn:a=uQe}=typeof i=="function"?{equalityFn:i}:i,o=e(),{store:s,subscription:u,getServerState:l}=o;pe.useRef(!0);const h=pe.useCallback({[r.name](f){return r(f)}}[r.name],[r]),c=HYe.useSyncExternalStoreWithSelector(u.addNestedSub,s.getState,l||s.getState,h,a);return pe.useDebugValue(c),c};return Object.assign(t,{withTypes:()=>t}),t}var kJ=lQe();function zs(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var cQe=typeof Symbol=="function"&&Symbol.observable||"@@observable",NJ=cQe,e6=()=>Math.random().toString(36).substring(7).split("").join("."),hQe={INIT:`@@redux/INIT${e6()}`,REPLACE:`@@redux/REPLACE${e6()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${e6()}`},RO=hQe;function mj(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Mme(n,e,t){if(typeof n!="function")throw new Error(zs(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(zs(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(zs(1));return t(Mme)(n,e)}let r=n,i=e,a=new Map,o=a,s=0,u=!1;function l(){o===a&&(o=new Map,a.forEach((g,y)=>{o.set(y,g)}))}function h(){if(u)throw new Error(zs(3));return i}function c(g){if(typeof g!="function")throw new Error(zs(4));if(u)throw new Error(zs(5));let y=!0;l();const v=s++;return o.set(v,g),function(){if(y){if(u)throw new Error(zs(6));y=!1,l(),o.delete(v),a=null}}}function f(g){if(!mj(g))throw new Error(zs(7));if(typeof g.type>"u")throw new Error(zs(8));if(typeof g.type!="string")throw new Error(zs(17));if(u)throw new Error(zs(9));try{u=!0,i=r(i,g)}finally{u=!1}return(a=o).forEach(v=>{v()}),g}function d(g){if(typeof g!="function")throw new Error(zs(10));r=g,f({type:RO.REPLACE})}function p(){const g=c;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(zs(11));function v(){const w=y;w.next&&w.next(h())}return v(),{unsubscribe:g(v)}},[NJ](){return this}}}return f({type:RO.INIT}),{dispatch:f,subscribe:c,getState:h,replaceReducer:d,[NJ]:p}}function fQe(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:RO.INIT})>"u")throw new Error(zs(12));if(typeof t(void 0,{type:RO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(zs(13))})}function Ume(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const o=e[a];typeof n[o]=="function"&&(t[o]=n[o])}const r=Object.keys(t);let i;try{fQe(t)}catch(a){i=a}return function(o={},s){if(i)throw i;let u=!1;const l={};for(let h=0;h<r.length;h++){const c=r[h],f=t[c],d=o[c],p=f(d,s);if(typeof p>"u")throw s&&s.type,new Error(zs(14));l[c]=p,u=u||p!==d}return u=u||r.length!==Object.keys(o).length,u?l:o}}function IO(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function dQe(...n){return e=>(t,r)=>{const i=e(t,r);let a=()=>{throw new Error(zs(15))};const o={getState:i.getState,dispatch:(u,...l)=>a(u,...l)},s=n.map(u=>u(o));return a=IO(...s)(i.dispatch),{...i,dispatch:a}}}function pQe(n){return mj(n)&&"type"in n&&typeof n.type=="string"}var Bme=Symbol.for("immer-nothing"),OJ=Symbol.for("immer-draftable"),Cl=Symbol.for("immer-state");function ah(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var sx=Object.getPrototypeOf;function S1(n){return!!n&&!!n[Cl]}function Rp(n){var e;return n?zme(n)||Array.isArray(n)||!!n[OJ]||!!((e=n.constructor)!=null&&e[OJ])||D4(n)||A4(n):!1}var gQe=Object.prototype.constructor.toString();function zme(n){if(!n||typeof n!="object")return!1;const e=sx(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===gQe}function FO(n,e){T4(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function T4(n){const e=n[Cl];return e?e.type_:Array.isArray(n)?1:D4(n)?2:A4(n)?3:0}function _B(n,e){return T4(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Wme(n,e,t){const r=T4(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function mQe(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function D4(n){return n instanceof Map}function A4(n){return n instanceof Set}function wv(n){return n.copy_||n.base_}function SB(n,e){if(D4(n))return new Map(n);if(A4(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=zme(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Cl];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:n[o]})}return Object.create(sx(n),r)}else{const r=sx(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function yj(n,e=!1){return k4(n)||S1(n)||!Rp(n)||(T4(n)>1&&(n.set=n.add=n.clear=n.delete=yQe),Object.freeze(n),e&&Object.entries(n).forEach(([t,r])=>yj(r,!0))),n}function yQe(){ah(2)}function k4(n){return Object.isFrozen(n)}var vQe={};function C1(n){const e=vQe[n];return e||ah(0,n),e}var TE;function jme(){return TE}function bQe(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function RJ(n,e){e&&(C1("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function CB(n){EB(n),n.drafts_.forEach(wQe),n.drafts_=null}function EB(n){n===TE&&(TE=n.parent_)}function IJ(n){return TE=bQe(TE,n)}function wQe(n){const e=n[Cl];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function FJ(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Cl].modified_&&(CB(e),ah(4)),Rp(n)&&(n=PO(e,n),e.parent_||LO(e,n)),e.patches_&&C1("Patches").generateReplacementPatches_(t[Cl].base_,n,e.patches_,e.inversePatches_)):n=PO(e,t,[]),CB(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==Bme?n:void 0}function PO(n,e,t){if(k4(e))return e;const r=e[Cl];if(!r)return FO(e,(i,a)=>PJ(n,r,e,i,a,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return LO(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,o=!1;r.type_===3&&(a=new Set(i),i.clear(),o=!0),FO(a,(s,u)=>PJ(n,r,i,s,u,t,o)),LO(n,i,!1),t&&n.patches_&&C1("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function PJ(n,e,t,r,i,a,o){if(S1(i)){const s=a&&e&&e.type_!==3&&!_B(e.assigned_,r)?a.concat(r):void 0,u=PO(n,i,s);if(Wme(t,r,u),S1(u))n.canAutoFreeze_=!1;else return}else o&&t.add(i);if(Rp(i)&&!k4(i)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;PO(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,r)&&LO(n,i)}}function LO(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&yj(e,t)}function xQe(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:jme(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=vj;t&&(i=[r],a=DE);const{revoke:o,proxy:s}=Proxy.revocable(i,a);return r.draft_=s,r.revoke_=o,s}var vj={get(n,e){if(e===Cl)return n;const t=wv(n);if(!_B(t,e))return _Qe(n,t,e);const r=t[e];return n.finalized_||!Rp(r)?r:r===t6(n.base_,e)?(n6(n),n.copy_[e]=DB(r,n)):r},has(n,e){return e in wv(n)},ownKeys(n){return Reflect.ownKeys(wv(n))},set(n,e,t){const r=$me(wv(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=t6(wv(n),e),a=i==null?void 0:i[Cl];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(mQe(t,i)&&(t!==void 0||_B(n.base_,e)))return!0;n6(n),TB(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return t6(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,n6(n),TB(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=wv(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){ah(11)},getPrototypeOf(n){return sx(n.base_)},setPrototypeOf(){ah(12)}},DE={};FO(vj,(n,e)=>{DE[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});DE.deleteProperty=function(n,e){return DE.set.call(this,n,e,void 0)};DE.set=function(n,e,t){return vj.set.call(this,n[0],e,t,n[0])};function t6(n,e){const t=n[Cl];return(t?wv(t):n)[e]}function _Qe(n,e,t){var i;const r=$me(e,t);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(n.draft_):void 0}function $me(n,e){if(!(e in n))return;let t=sx(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=sx(t)}}function TB(n){n.modified_||(n.modified_=!0,n.parent_&&TB(n.parent_))}function n6(n){n.copy_||(n.copy_=SB(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var SQe=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const o=this;return function(u=a,...l){return o.produce(u,h=>t.call(this,h,...l))}}typeof t!="function"&&ah(6),r!==void 0&&typeof r!="function"&&ah(7);let i;if(Rp(e)){const a=IJ(this),o=DB(e,void 0);let s=!0;try{i=t(o),s=!1}finally{s?CB(a):EB(a)}return RJ(a,r),FJ(i,a)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===Bme&&(i=void 0),this.autoFreeze_&&yj(i,!0),r){const a=[],o=[];C1("Patches").generateReplacementPatches_(e,i,a,o),r(a,o)}return i}else ah(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(o,...s)=>this.produceWithPatches(o,u=>e(u,...s));let r,i;return[this.produce(e,t,(o,s)=>{r=o,i=s}),r,i]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Rp(n)||ah(8),S1(n)&&(n=CQe(n));const e=IJ(this),t=DB(n,void 0);return t[Cl].isManual_=!0,EB(e),t}finishDraft(n,e){const t=n&&n[Cl];(!t||!t.isManual_)&&ah(9);const{scope_:r}=t;return RJ(r,e),FJ(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=C1("Patches").applyPatches_;return S1(n)?r(n,e):this.produce(n,i=>r(i,e))}};function DB(n,e){const t=D4(n)?C1("MapSet").proxyMap_(n,e):A4(n)?C1("MapSet").proxySet_(n,e):xQe(n,e);return(e?e.scope_:jme()).drafts_.push(t),t}function CQe(n){return S1(n)||ah(10,n),qme(n)}function qme(n){if(!Rp(n)||k4(n))return n;const e=n[Cl];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=SB(n,e.scope_.immer_.useStrictShallowCopy_)}else t=SB(n,!0);return FO(t,(r,i)=>{Wme(t,r,qme(i))}),e&&(e.finalized_=!1),t}var El=new SQe,Vme=El.produce;El.produceWithPatches.bind(El);El.setAutoFreeze.bind(El);El.setUseStrictShallowCopy.bind(El);El.applyPatches.bind(El);El.createDraft.bind(El);El.finishDraft.bind(El);function Hme(n){return({dispatch:t,getState:r})=>i=>a=>typeof a=="function"?a(t,r,n):i(a)}var EQe=Hme(),TQe=Hme,DQe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?IO:IO.apply(null,arguments)},AQe=n=>n&&typeof n.match=="function";function LC(n,e){function t(...r){if(e){let i=e(...r);if(!i)throw new Error(hh(0));return{type:n,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>pQe(r)&&r.type===n,t}var Gme=class SC extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,SC.prototype)}static get[Symbol.species](){return SC}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new SC(...e[0].concat(this)):new SC(...e.concat(this))}};function LJ(n){return Rp(n)?Vme(n,()=>{}):n}function AB(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function kQe(n){return typeof n=="boolean"}var NQe=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new Gme;return t&&(kQe(t)?o.push(EQe):o.push(TQe(t.extraArgument))),o},OQe="RTK_autoBatch",MJ=n=>e=>{setTimeout(e,n)},RQe=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let i=!0,a=!1,o=!1;const s=new Set,u=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:MJ(10):n.type==="callback"?n.queueNotification:MJ(n.timeout),l=()=>{o=!1,a&&(a=!1,s.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const c=()=>i&&h(),f=r.subscribe(c);return s.add(h),()=>{f(),s.delete(h)}},dispatch(h){var c;try{return i=!((c=h==null?void 0:h.meta)!=null&&c[OQe]),a=!i,a&&(o||(o=!0,u(l))),r.dispatch(h)}finally{i=!0}}})},IQe=n=>function(t){const{autoBatch:r=!0}=t??{};let i=new Gme(n);return r&&i.push(RQe(typeof r=="object"?r:void 0)),i};function FQe(n){const e=NQe(),{reducer:t=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=n||{};let s;if(typeof t=="function")s=t;else if(mj(t))s=Ume(t);else throw new Error(hh(1));let u;typeof r=="function"?u=r(e):u=e();let l=IO;i&&(l=DQe({trace:!1,...typeof i=="object"&&i}));const h=dQe(...u),c=IQe(h);let f=typeof o=="function"?o(c):c();const d=l(...f);return Mme(s,a,d)}function Xme(n){const e={},t=[];let r;const i={addCase(a,o){const s=typeof a=="string"?a:a.type;if(!s)throw new Error(hh(28));if(s in e)throw new Error(hh(29));return e[s]=o,i},addMatcher(a,o){return t.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return n(i),[e,t,r]}function PQe(n){return typeof n=="function"}function LQe(n,e){let[t,r,i]=Xme(e),a;if(PQe(n))a=()=>LJ(n());else{const s=LJ(n);a=()=>s}function o(s=a(),u){let l=[t[u.type],...r.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return l.filter(h=>!!h).length===0&&(l=[i]),l.reduce((h,c)=>{if(c)if(S1(h)){const d=c(h,u);return d===void 0?h:d}else{if(Rp(h))return Vme(h,f=>c(f,u));{const f=c(h,u);if(f===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return h},s)}return o.getInitialState=a,o}var MQe=(n,e)=>AQe(n)?n.match(e):n(e);function UQe(...n){return e=>n.some(t=>MQe(t,e))}var BQe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Kme=(n=21)=>{let e="",t=n;for(;t--;)e+=BQe[Math.random()*64|0];return e},zQe=["name","message","stack","code"],r6=class{constructor(n,e){nn(this,"_type");this.payload=n,this.meta=e}},UJ=class{constructor(n,e){nn(this,"_type");this.payload=n,this.meta=e}},WQe=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of zQe)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},BJ="External signal was aborted",Yme=(()=>{function n(e,t,r){const i=LC(e+"/fulfilled",(u,l,h,c)=>({payload:u,meta:{...c||{},arg:h,requestId:l,requestStatus:"fulfilled"}})),a=LC(e+"/pending",(u,l,h)=>({payload:void 0,meta:{...h||{},arg:l,requestId:u,requestStatus:"pending"}})),o=LC(e+"/rejected",(u,l,h,c,f)=>({payload:c,error:(r&&r.serializeError||WQe)(u||"Rejected"),meta:{...f||{},arg:h,requestId:l,rejectedWithValue:!!c,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"}}));function s(u,{signal:l}={}){return(h,c,f)=>{const d=r!=null&&r.idGenerator?r.idGenerator(u):Kme(),p=new AbortController;let m,g;function y(b){g=b,p.abort()}l&&(l.aborted?y(BJ):l.addEventListener("abort",()=>y(BJ),{once:!0}));const v=async function(){var x,S;let b;try{let E=(x=r==null?void 0:r.condition)==null?void 0:x.call(r,u,{getState:c,extra:f});if($Qe(E)&&(E=await E),E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const A=new Promise((k,T)=>{m=()=>{T({name:"AbortError",message:g||"Aborted"})},p.signal.addEventListener("abort",m)});h(a(d,u,(S=r==null?void 0:r.getPendingMeta)==null?void 0:S.call(r,{requestId:d,arg:u},{getState:c,extra:f}))),b=await Promise.race([A,Promise.resolve(t(u,{dispatch:h,getState:c,extra:f,requestId:d,signal:p.signal,abort:y,rejectWithValue:(k,T)=>new r6(k,T),fulfillWithValue:(k,T)=>new UJ(k,T)})).then(k=>{if(k instanceof r6)throw k;return k instanceof UJ?i(k.payload,d,u,k.meta):i(k,d,u)})])}catch(E){b=E instanceof r6?o(null,d,u,E.payload,E.meta):o(E,d,u)}finally{m&&p.signal.removeEventListener("abort",m)}return r&&!r.dispatchConditionRejection&&o.match(b)&&b.meta.condition||h(b),b}();return Object.assign(v,{abort:y,requestId:d,arg:u,unwrap(){return v.then(jQe)}})}}return Object.assign(s,{pending:a,rejected:o,fulfilled:i,settled:UQe(o,i),typePrefix:e})}return n.withTypes=()=>n,n})();function jQe(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function $Qe(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var qQe=Symbol.for("rtk-slice-createasyncthunk");function VQe(n,e){return`${n}/${e}`}function HQe({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[qQe];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(hh(11));const s=(typeof i.reducers=="function"?i.reducers(KQe()):i.reducers)||{},u=Object.keys(s),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(b,w){const x=typeof b=="string"?b:b.type;if(!x)throw new Error(hh(12));if(x in l.sliceCaseReducersByType)throw new Error(hh(13));return l.sliceCaseReducersByType[x]=w,h},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),h},exposeAction(b,w){return l.actionCreators[b]=w,h},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,h}};u.forEach(b=>{const w=s[b],x={reducerName:b,type:VQe(a,b),createNotation:typeof i.reducers=="function"};QQe(w)?JQe(x,w,h,e):YQe(x,w,h)});function c(){const[b={},w=[],x=void 0]=typeof i.extraReducers=="function"?Xme(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return LQe(i.initialState,E=>{for(let A in S)E.addCase(A,S[A]);for(let A of l.sliceMatchers)E.addMatcher(A.matcher,A.reducer);for(let A of w)E.addMatcher(A.matcher,A.reducer);x&&E.addDefaultCase(x)})}const f=b=>b,d=new Map;let p;function m(b,w){return p||(p=c()),p(b,w)}function g(){return p||(p=c()),p.getInitialState()}function y(b,w=!1){function x(E){let A=E[b];return typeof A>"u"&&w&&(A=g()),A}function S(E=f){const A=AB(d,w,()=>new WeakMap);return AB(A,E,()=>{const k={};for(const[T,O]of Object.entries(i.selectors??{}))k[T]=GQe(O,E,g,w);return k})}return{reducerPath:b,getSelectors:S,get selectors(){return S(x)},selectSlice:x}}const v={name:a,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...x}={}){const S=w??o;return b.inject({reducerPath:S,reducer:m},x),{...v,...y(S,!0)}}};return v}}function GQe(n,e,t,r){function i(a,...o){let s=e(a);return typeof s>"u"&&r&&(s=t()),n(s,...o)}return i.unwrapped=n,i}var XQe=HQe();function KQe(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function YQe({type:n,reducerName:e,createNotation:t},r,i){let a,o;if("reducer"in r){if(t&&!ZQe(r))throw new Error(hh(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,o?LC(n,o):LC(n))}function QQe(n){return n._reducerDefinitionType==="asyncThunk"}function ZQe(n){return n._reducerDefinitionType==="reducerWithPrepare"}function JQe({type:n,reducerName:e},t,r,i){if(!i)throw new Error(hh(18));const{payloadCreator:a,fulfilled:o,pending:s,rejected:u,settled:l,options:h}=t,c=i(n,a,h);r.exposeAction(e,c),o&&r.addCase(c.fulfilled,o),s&&r.addCase(c.pending,s),u&&r.addCase(c.rejected,u),l&&r.addMatcher(c.settled,l),r.exposeCaseReducer(e,{fulfilled:o||qk,pending:s||qk,rejected:u||qk,settled:l||qk})}function qk(){}var eZe=n=>"reducerPath"in n&&typeof n.reducerPath=="string",tZe=n=>n.flatMap(e=>eZe(e)?[[e.reducerPath,e.reducer]]:Object.entries(e)),bj=Symbol.for("rtk-state-proxy-original"),nZe=n=>!!n&&!!n[bj],rZe=new WeakMap,iZe=(n,e)=>AB(rZe,n,()=>new Proxy(n,{get:(t,r,i)=>{if(r===bj)return t;const a=Reflect.get(t,r,i);if(typeof a>"u"){const o=e[r.toString()];if(o){const s=o(void 0,{type:Kme()});if(typeof s>"u")throw new Error(hh(24));return s}}return a}})),aZe=n=>{if(!nZe(n))throw new Error(hh(25));return n[bj]},sZe=(n={})=>n;function oZe(...n){const e=Object.fromEntries(tZe(n)),t=()=>Object.keys(e).length?Ume(e):sZe;let r=t();function i(s,u){return r(s,u)}i.withLazyLoadedSlices=()=>i;const a=(s,u={})=>{const{reducerPath:l,reducer:h}=s,c=e[l];return!u.overrideExisting&&c&&c!==h||(e[l]=h,r=t()),i},o=Object.assign(function(u,l){return function(c,...f){return u(iZe(l?l(c,...f):c,e),...f)}},{original:aZe});return Object.assign(i,{inject:a,selector:o})}function hh(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const mN=Yme("completedInvitation/fetch",async(n,e)=>{try{console.log("in fetchCompletedInvitation");const t=await hr.get("http://localhost:5077/api/TextUpload/user/1",{headers:{Authorization:`Bearer ${r1}`}});return console.log("fetch all complete"),console.log(t.data),t.data}catch(t){return e.rejectWithValue(t)}}),i6=Yme("completedInvitation/add",async(n,e)=>{try{return(await hr.post("http://localhost:5077/api/CompletedInvitation/add",n,{headers:{Authorization:`Bearer ${r1}`}})).data}catch(t){return e.rejectWithValue(t)}}),uZe=XQe({name:"CompletedInvitation",initialState:{listCompletedInvitation:[],loading:!0,error:null},reducers:{},extraReducers:n=>{n.addCase(mN.pending,e=>{e.loading=!0,e.error=null}).addCase(mN.fulfilled,(e,t)=>{e.loading=!1,e.error=null,e.listCompletedInvitation=t.payload}).addCase(mN.rejected,e=>{e.loading=!1,e.error="Failed to load recipes"}).addCase(i6.pending,e=>{e.loading=!0,e.error=null}).addCase(i6.fulfilled,(e,t)=>{e.listCompletedInvitation=t.payload}).addCase(i6.rejected,e=>{e.loading=!1,e.error="Failed to add recipes"})}}),lZe=({imageUrl:n,fileName:e})=>{const[t,r]=pe.useState(0),[i,a]=pe.useState(!1),o=async()=>{if(!n){alert("   !");return}a(!0),r(0),console.log("*******************Download**********************");try{const u=await(await fetch(n)).blob(),l=document.createElement("a");l.download=e,l.href=window.URL.createObjectURL(u),l.setAttribute("download",e),document.body.appendChild(l),l.click(),document.body.removeChild(l),console.log("   !")}catch(s){console.error("  :",s),alert("   .")}finally{a(!1)}};return Ie.jsxs(xl,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[Ie.jsx(Go,{onClick:o,variant:"contained",color:"primary",startIcon:i?Ie.jsx(s9,{size:20}):Ie.jsx(t3e,{}),sx:{borderRadius:"20px"},disabled:i,children:i?"...":""}),t>0&&Ie.jsxs("div",{children:[": ",t,"%"]})]})},cZe=({fileName:n})=>{const[e,t]=pe.useState(null);return pe.useEffect(()=>{(async()=>{try{const i=await hr.get(`http://localhost:5077/api/upload/download-url/${n}`);t(i.data)}catch(i){console.error("  -URL:",i),alert(`  -URL: ${i}`)}})()},[n]),Ie.jsx("div",{children:Ie.jsx(ete,{sx:{width:350,boxShadow:4,borderRadius:3,overflow:"hidden",position:"relative"},children:e?Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(tte,{component:"img",height:"200",image:e,alt:n,sx:{objectFit:"contain",paddingTop:"25px"}}),Ie.jsx(Mxe,{sx:{justifyContent:"flex-start",padding:2},children:Ie.jsx(lZe,{imageUrl:e,fileName:n})})]}):Ie.jsx(t1,{variant:"body1",align:"center",sx:{padding:2},children:" ..."})})})},hZe=()=>{const n=oQe(),e=kJ(r=>r.CompletedInvitation.listCompletedInvitation),t=kJ(r=>r.CompletedInvitation.loading);return pe.useEffect(()=>{n(mN()),console.log(e)},[]),pe.useEffect(()=>{console.log("useEffect2"),console.log(e)},[e]),Ie.jsx(Ie.Fragment,{children:t?Ie.jsx(t1,{sx:{color:"rosybrown",textAlign:"center"},children:"Loading..."}):Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(xl,{sx:{fontSize:"50px",fontWeight:"bold"},children:"MyCompletedInvitation"}),Ie.jsx(j0,{container:!0,spacing:3,justifyContent:"center",sx:{mt:3},children:e.length>0?e.map((r,i)=>Ie.jsx(j0,{item:!0,xs:12,sm:6,md:4,display:"flex",justifyContent:"center",children:Ie.jsx(cZe,{fileName:r.name})},i)):Ie.jsx(t1,{variant:"h6",align:"center",sx:{width:"100%",mt:3},children:"   "})})]})})},fZe=FQe({reducer:oZe(uZe)}),dZe=y0e([{path:"/",element:Ie.jsx(Gve,{to:"/login",replace:!0})},{path:"/login",element:Ie.jsx(yEe,{})},{path:"/homePage",element:Ie.jsx(Pte,{})},{path:"/createInvitation",element:Ie.jsx(jYe,{}),children:[{path:"showTemplates",element:Ie.jsx(Fme,{})}]},{path:"/MyCompletedInvitation",element:Ie.jsxs(iQe,{store:fZe,children:[" ",Ie.jsx(hZe,{})]})}]);function pZe(){return Ie.jsx(Ie.Fragment,{children:Ie.jsx(qve,{router:dZe})})}Dye.createRoot(document.getElementById("root")).render(Ie.jsx(pe.StrictMode,{children:Ie.jsx(pZe,{})}));
